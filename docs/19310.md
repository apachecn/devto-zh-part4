# ä½¿ç”¨ Web Workers åŠ è½½å›¾åƒ

> åŸæ–‡:[https://dev.to/trezy/loading-images-with-web-workers-49ap](https://dev.to/trezy/loading-images-with-web-workers-49ap)

ç½‘ç»œå·¥ä½œè€…æ˜¯ç¥å¥‡çš„ã€‚å®ƒä»¬å…è®¸ JavaScript ä¸­çš„å¤šçº¿ç¨‹ï¼Œè¿™ç§è¯­è¨€ä»ä¸€å¼€å§‹å°±æ˜¯å•çº¿ç¨‹çš„ã€‚å®ƒä»¬çš„å®é™…åº”ç”¨èŒƒå›´ä»ç¹é‡çš„æ•°å­—å¤„ç†åˆ°ç®¡ç†å¼‚æ­¥æ•°æ®çš„æ£€ç´¢å’Œä¼ æ’­ï¼Œå†åˆ°åŠ è½½å›¾åƒ(æˆ‘å°†åœ¨æœ¬æ–‡ä¸­è®¨è®º)ã€‚

äº‹å®ä¸Šï¼Œæˆ‘æ­£åœ¨ä¸ºå³å°†åˆ°æ¥çš„å…³äºç½‘ç»œå·¥ä½œè€…çš„æ¼”è®²åšå‡†å¤‡ï¼Œæ®æˆ‘çš„ä¸€ä¸ªå¥½æœ‹å‹è¯´...

> å½“ç„¶ï¼Œç‰¹é›·å…¹çš„æ¼”è®²æ˜¯å…³äºç½‘ç»œå·¥ä½œè€…çš„ã€‚å¦‚æœä»–æ²¡æœ‰å’Œæ¢…æ ¼ç»“å©šï¼Œä»–ä¼šå’Œä¸€ä¸ªç½‘ç»œå·¥ä½œè€…ç»“å©šã€‚
> â€” @xlexious

æˆ‘æ˜¯è¯´ï¼Œæˆ‘æƒ³æˆ‘æœ‰ç‚¹å–œæ¬¢ä»–ä»¬ã€‚ITâ€½æ€ä¹ˆæ ·

## [](#why-would-we-want-to-load-images-with-web-workers)ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç”¨ web workers åŠ è½½å›¾åƒï¼Ÿ

å°†å›¾åƒåŠ è½½ä» UI çº¿ç¨‹è½¬ç§»åˆ° worker å¯¹äºå›¾åƒå¯†é›†å‹ç½‘ç«™æ¥è¯´æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„æœºä¼šï¼Œä¹Ÿæ˜¯æˆ‘æœ€å–œæ¬¢çš„ web worker å®ç°ä¹‹ä¸€ã€‚å®ƒå¯ä»¥é˜²æ­¢å›¾åƒä¸‹è½½é˜»å¡æ¸²æŸ“ï¼Œå¹¶å¯ä»¥å¤§å¤§åŠ å¿«æ‚¨çš„ç½‘ç«™ã€‚

*æœ‰è¶£çš„äº‹å®:* `<img>`æ ‡ç­¾å®é™…ä¸Šé˜»å¡äº†ä½ çš„åº”ç”¨ç¨‹åºè´Ÿè½½ã€‚å¦‚æœä½ çš„é¡µé¢ä¸Šæœ‰ 100 å¼ å›¾ç‰‡ï¼Œæµè§ˆå™¨ä¼šåœ¨å‘ˆç°é¡µé¢ä¹‹å‰ä¸‹è½½å…¨éƒ¨ 100 å¼ å›¾ç‰‡ã€‚

è®©æˆ‘ä»¬è°ˆä¸€è°ˆåœ¨å‡ ç§ä¸åŒçš„ç¯å¢ƒä¸­å®ç° web workersã€‚

### [](#the-standard-vanilla-implementation)æ ‡å‡†ï¼Œé¦™è‰å®ç°

è¦åœ¨æ™®é€šçš„ JavaScript åº”ç”¨ç¨‹åºä¸­å¯åŠ¨ä¸€ä¸ª web workerï¼Œéœ€è¦å°†å®ƒæ”¾åœ¨è‡ªå·±çš„æ–‡ä»¶ä¸­ã€‚è®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æ­£åœ¨æˆ‘çš„ç½‘ç«™ä¸Šå·¥ä½œï¼Œã€https://trezy.com[ã€‚æˆ‘ä»¬å°†æˆ‘ä»¬çš„å·¥äººæ–‡ä»¶å‘½åä¸º`image-loader.worker.js`ï¼Œå®ƒå°†åœ¨`https://trezy.com/workers/image-loader.worker.js`å¯ç”¨ã€‚](https://trezy.com)

æˆ‘ä»¬å°†ä»ä¸€ä¸ªéå¸¸ç®€å•çš„ web worker å¼€å§‹ï¼Œå®ƒå°†æ³¨é”€å®ƒæ¥æ”¶åˆ°çš„ä»»ä½•æ•°æ®:

```
/*
 * image-loader.worker.js
 */

// The `message` event is fired in a web worker any time `worker.postMessage(<data>)` is called.
// `event.data` represents the data being passed into a worker via `worker.postMessage(<data>)`.
self.addEventListener('message', event => {
  console.log('Worker received:', event.data)
}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸ºäº†åœ¨æˆ‘ä»¬çš„ä¸» JavaScript æ–‡ä»¶ä¸­ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å°†è¿™æ ·åš:

```
/*
 * main.js
 */

const ImageLoaderWorker = new Worker('/workers/image-loader.worker.js')

ImageLoaderWorker.postMessage('Hello world!') 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœæˆ‘ä»¬åŠ è½½æ‰€æœ‰è¿™äº›ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°`Hello world!`ã€‚
ğŸ‰å‘œï¼ğŸ¥³

## [](#lets-get-into-it)è®©æˆ‘ä»¬å¼€å§‹å§

### [](#step-1-update-your-markup)ç¬¬ä¸€æ­¥:æ›´æ–°ä½ çš„æ ‡è®°

æ‚¨çš„ worker å®ç°å·²ç»å…¨éƒ¨è§£å†³äº†ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å¼€å§‹å®ç°æˆ‘ä»¬çš„å›¾åƒåŠ è½½å™¨äº†ã€‚æˆ‘å°†ä»æˆ‘ä»¬æ‰“ç®—ä½¿ç”¨çš„ HTML å¼€å§‹:

```
<body>
  <img data-src="/images/image1.png">
  <img data-src="/images/image2.png">
  <img data-src="/images/image3.png">
  <img data-src="/images/image4.png">
  <img data-src="/images/image5.png">
</body> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> åšæŒä½ã€‚é‚£ä¸æ˜¯`<img>`æ ‡ç­¾çš„æ ·å­ï¼
> â€”ä½ ï¼Œåˆšæ‰ã€‚

å¾ˆæ•é”çš„è§‚å¯Ÿï¼Œä½ ï¼é€šå¸¸ä½ ä¼šä½¿ç”¨ä¸€ä¸ª`<img>`å…ƒç´ çš„`src`å±æ€§æ¥å‘Šè¯‰å®ƒä»å“ªé‡Œä¸‹è½½å›¾åƒæ–‡ä»¶ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯`data-src`ã€‚è¿™æ˜¯å› ä¸ºå½“æµè§ˆå™¨é‡åˆ°å¸¦æœ‰`src`å±æ€§çš„`<img>`å…ƒç´ æ—¶ï¼Œå®ƒä¼šç«‹å³å¼€å§‹ä¸‹è½½å›¾ç‰‡ã€‚å› ä¸ºæˆ‘ä»¬æƒ³æŠŠè¿™é¡¹å·¥ä½œå¸è½½ç»™æˆ‘ä»¬çš„ web workerï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨`data-src`æ¥é˜²æ­¢æµè§ˆå™¨åœ¨ UI çº¿ç¨‹ä¸Šå¤„ç†ä¸‹è½½ã€‚

### [](#step-2-pass-the-image-urls-to-our-web-worker)ç¬¬äºŒæ­¥:å°†å›¾ç‰‡ URL ä¼ é€’ç»™æˆ‘ä»¬çš„ web worker

åœ¨æˆ‘ä»¬çš„`main.js`æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ£€ç´¢æ‰€æœ‰ç›¸å…³çš„`<img>`å…ƒç´ ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å°†å®ƒä»¬çš„ URL ä¼ é€’ç»™æˆ‘ä»¬çš„ web worker:

```
/*
 * main.js
 */

// Load up the web worker
const ImageLoaderWorker = new Worker('/workers/image-loader.worker.js')

// Get all of the `<img>` elements that have a `data-src` property
const imgElements = document.querySelectorAll('img[data-src]')

// Loop over the image elements and pass their URLs to the web worker
imgElements.forEach(imageElement => {
  const imageURL = imageElement.getAttribute('data-src')
  ImageLoaderWorker.postMessage(imageURL)
}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#step-3-download-the-images)ç¬¬ä¸‰æ­¥:ä¸‹è½½å›¾ç‰‡

å¤ªæ£’äº†ã€‚ç°åœ¨æˆ‘ä»¬çš„ web worker å·²ç»æ”¶åˆ°äº†ä¸€å †å›¾åƒ URLï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å¤„ç†å®ƒä»¬ã€‚è¿™å¯¹äº web å·¥ä½œè€…æ¥è¯´æœ‰ç‚¹å¤æ‚ï¼ŒåŸå› æœ‰å‡ ä¸ª:

1.  **ä½ æ²¡æœ‰è®¿é—® DOM API çš„æƒé™ã€‚**è®¸å¤šé web worker image downloader å®ç°åˆ›å»ºä¸€ä¸ªæ–°çš„å›¾åƒå…ƒç´ ï¼Œå¹¶åœ¨å…¶ä¸Šè®¾ç½®`src`å±æ€§ï¼Œå¯åŠ¨ä¸‹è½½ï¼Œç„¶åç”¨æ–°çš„æ›¿æ¢åŸæ¥çš„`<img>`ã€‚è¿™å¯¹æˆ‘ä»¬ä¸èµ·ä½œç”¨ï¼Œå› ä¸ºæ²¡æœ‰åŠæ³•åœ¨ web worker å†…éƒ¨åˆ›å»º DOM å…ƒç´ ã€‚

2.  **å›¾åƒæ²¡æœ‰æœ¬åœ°çš„ JavasScript æ ¼å¼ã€‚**å›¾åƒæ˜¯ç”±äºŒè¿›åˆ¶æ•°æ®ç»„æˆçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†è¿™äº›æ•°æ®è½¬æ¢æˆå¯ä»¥åœ¨ JavaScript ä¸­ä½¿ç”¨çš„ä¸œè¥¿ã€‚

3.  ~~**åªèƒ½ä½¿ç”¨å­—ç¬¦ä¸²ä¸ UI çº¿ç¨‹é€šä¿¡ã€‚**~~ æˆ‘å·²ç»æ”¹æ­£äº†ã€‚è¿‡å»æ˜¯è¿™æ ·ï¼Œä½†ç°åœ¨ä¸æ˜¯äº†ï¼ğŸ˜

é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•ä¸‹è½½å›¾åƒï¼Œå°†å…¶ä»äºŒè¿›åˆ¶æ ¼å¼è½¬æ¢æˆ JavaScript å¯ä»¥ä½¿ç”¨çš„æ ¼å¼ï¼Œç„¶åä¼ é€’å› UI çº¿ç¨‹å‘¢ï¼Ÿè¿™å°±æ˜¯`fetch`å’Œ`FileReader` API çš„ç”¨æ­¦ä¹‹åœ°ã€‚

#### [](#-raw-fetch-endraw-is-for-more-than-just-json)`fetch`æ˜¯å¯¹ä¸æ­¢æ˜¯ JSON

æ‚¨å¯èƒ½ä¹ æƒ¯äºçœ‹åˆ°`fetch`ç”¨äºä»ä¸€äº› API è·å–æ•°æ®ï¼Œç„¶åè°ƒç”¨`response.json()`ä»¥å¯¹è±¡çš„å½¢å¼è·å–å“åº”çš„ JSON ä¸»ä½“ã€‚ç„¶è€Œï¼Œ`.json()`å¹¶ä¸æ˜¯è¿™é‡Œå”¯ä¸€çš„é€‰æ‹©ã€‚è¿˜æœ‰`.text()`ã€`.formData()`ã€`.arrayBuffer()`ï¼Œä»¥åŠå¯¹æˆ‘ä»¬è¿™ä¸ªç»ƒä¹ å¾ˆé‡è¦çš„`.blob()`ã€‚

ä¸€ä¸ª [`Blob`](https://developer.mozilla.org/en-US/docs/Web/API/Blob) å¯ä»¥ç”¨æ¥è¡¨ç¤ºå‡ ä¹ä»»ä½•ä¸œè¥¿ï¼ŒåŒ…æ‹¬æ²¡æœ‰æœ¬åœ° JavaScript æ ¼å¼çš„æ•°æ®ï¼Œæ¯”å¦‚å›¾åƒï¼å®ƒä»¬éå¸¸é€‚åˆæˆ‘ä»¬æ­£åœ¨åšçš„äº‹æƒ…ã€‚è®°ä½è¿™ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬æ›´æ–°æˆ‘ä»¬çš„ web worker æ¥æ¥æ”¶å›¾ç‰‡çš„ URLï¼Œå¹¶å°†å®ƒä»¬ä¸‹è½½ä¸º`Blob` s:

```
/*
 * image-loader.worker.js
 */

// I'm making the event handler `async` to make my life easier. If
// you're not compiling your code, you may want to use the Promise-based
// API of `fetch`
self.addEventListener('message', async event => {
  // Grab the imageURL from the event - we'll use this both to download
  // the image and to identify which image elements to update back in the
  // UI thread
  const imageURL = event.data

  // First, we'll fetch the image file
  const response = await fetch(imageURL)

  // Once the file has been fetched, we'll convert it to a `Blob`
  const fileBlob = await response.blob()
}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¥½çš„ï¼Œæˆ‘ä»¬æœ‰è¿›å±•äº†ï¼æˆ‘ä»¬å·²ç»æ›´æ–°äº†æˆ‘ä»¬çš„å›¾åƒï¼Œå› æ­¤å®ƒä»¬ä¸ä¼šè‡ªåŠ¨ä¸‹è½½ï¼Œæˆ‘ä»¬å·²ç»è·å–äº†å®ƒä»¬çš„ URL å¹¶å°†å…¶ä¼ é€’ç»™å·¥ä½œäººå‘˜ï¼Œå¹¶ä¸”æˆ‘ä»¬å·²ç»å°†å›¾åƒä¸‹è½½åˆ°æµè§ˆå™¨ï¼

### [](#step-4-return-the-image-data-to-the-ui-thread)ç¬¬å››æ­¥:å°†å›¾åƒæ•°æ®è¿”å›ç»™ UI çº¿ç¨‹

æ—¢ç„¶æˆ‘ä»¬å·²ç»è·å¾—äº† blob å½¢å¼çš„å›¾åƒï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒå‘é€å› UI çº¿ç¨‹è¿›è¡Œæ¸²æŸ“ã€‚å¦‚æœæˆ‘ä»¬å•ç‹¬å°†å­—ç¬¦ä¸²å‘é€å›å»ï¼Œé‚£ä¹ˆ UI çº¿ç¨‹å°†ä¸çŸ¥é“åœ¨å“ªé‡Œå‘ˆç°å®ƒã€‚ç›¸åï¼Œæˆ‘ä»¬å°†å‘å›ä¸€ä¸ªå¯¹è±¡ï¼Œå‘Šè¯‰ UI çº¿ç¨‹æ¸²æŸ“ä»€ä¹ˆ*å’Œ*ï¼Œå…¶ä¸­:

```
/*
 * image-loader.worker.js
 */

self.addEventListener('message', async event => {
  const imageURL = event.data

  const response = await fetch(imageURL)
  const blob = await response.blob()

  // Send the image data to the UI thread!
  self.postMessage({
    imageURL: imageURL,
    blob: blob,
  })
}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬çš„å·¥äººæ¡£æ¡ˆåšå¥½äº†ï¼æœ€åä¸€æ­¥æ˜¯å¤„ç†æˆ‘ä»¬åœ¨ UI çº¿ç¨‹ä¸­æ”¶åˆ°çš„å†…å®¹ã€‚

### ç¬¬å…­æ­¥:æ¸²æŸ“å›¾ç‰‡ï¼

æˆ‘ä»¬å·²ç»**äº†ï¼Œæ‰€ä»¥**å°±è¦å®Œæˆäº†ï¼æˆ‘ä»¬éœ€è¦åšçš„æœ€åä¸€ä»¶äº‹æ˜¯æ›´æ–° main.js æ–‡ä»¶ï¼Œä»¥æ¥æ”¶å’Œå¤„ç†ä» web worker è¿”å›çš„å›¾åƒæ•°æ®ã€‚

```
/*
 * main.js
 */

const ImageLoaderWorker = new Worker('/workers/image-loader.worker.js')
const imgElements = document.querySelectorAll('img[data-src]')

// Once again, it's possible that messages could be returned before the
// listener is attached, so we need to attach the listener before we pass
// image URLs to the web worker
ImageLoaderWorker.addEventListener('message', event => {
  // Grab the message data from the event
  const imageData = event.data

  // Get the original element for this image
  const imageElement = document.querySelectorAll(`img[data-src='${imageData.imageURL}']`)

  // We can use the `Blob` as an image source! We just need to convert it
  // to an object URL first
  const objectURL = URL.createObjectURL(imageData.blob)

  // Once the image is loaded, we'll want to do some extra cleanup
  imageElement.onload = () => {
    // Let's remove the original `data-src` attribute to make sure we don't
    // accidentally pass this image to the worker again in the future
    imageElement.removeAttribute(â€˜data-srcâ€™)

    // We'll also revoke the object URL now that it's been used to prevent the
    // browser from maintaining unnecessary references
    URL.revokeObjectURL(objectURL)
  }

  imageElement.setAttribute('src', objectURL)
})

imgElements.forEach(imageElement => {
  const imageURL = imageElement.getAttribute('data-src')
  ImageLoaderWorker.postMessage(imageURL)
}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æŸ¥çœ‹ [Codepen æ¼”ç¤º](https://s.trezy.sh/image-worker-main),ä¸€åˆ‡éƒ½åœ¨ä¸€èµ·å·¥ä½œ:

[https://codepen.io/trezy/embed/ZNdbeQ?height=600&default-tab=result&embed-version=2](https://codepen.io/trezy/embed/ZNdbeQ?height=600&default-tab=result&embed-version=2)

## [](#bonus-implementing-web-workers-with-webpack)å¥–åŠ±:ç”¨ Webpack å®ç° web workers

å¦‚æœä½ ä½¿ç”¨ Webpack æ¥ç¼–è¯‘ä½ æ‰€æœ‰çš„ä»£ç ï¼Œè¿˜æœ‰ä¸€ä¸ªå¾ˆå¥½çš„é€‰é¡¹æ¥åŠ è½½ä½ çš„ web workers: [`worker-loader`](https://github.com/webpack-contrib/worker-loader) ã€‚è¿™ä¸ªåŠ è½½å™¨å…è®¸æ‚¨å°† web worker å¯¼å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ï¼Œå°±åƒå®ƒæ˜¯ä¸€ä¸ªå¸¸è§„ç±»ä¸€æ ·ã€‚

æˆ‘è§‰å¾—è¿™æ ·æ„Ÿè§‰ä¹Ÿæ›´è‡ªç„¶ä¸€ç‚¹ã€‚åœ¨ä¸æ”¹å˜`image-loader.worker.js`å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæ‚¨åœ¨ Webpack é…ç½®:
ä¸­è®¾ç½®äº†`worker-loader`ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªå®ç°çš„æ ·å­

```
/*
 * main.js
 */

import ImageLoaderWorker from './workers/image-loader.worker.js'

const imageLoader = new ImageLoaderWorker

imageLoader.postMessage('Hello world!') 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°±åƒåœ¨æˆ‘ä»¬çš„æ™®é€šå®ç°ä¸­ä¸€æ ·ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°`Hello world!`è¢«æ³¨é”€ã€‚

## [](#conclusion)ç»“è®º

æˆ‘ä»¬å®Œäº‹äº†ã€‚åœ¨ä½¿ç”¨å‡ ç§ä¸åŒçš„æµè§ˆå™¨ API æ—¶ï¼Œå°†å›¾åƒä¸‹è½½å¸è½½ç»™ç½‘ç»œå·¥ä½œè€…æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç»ƒä¹ ï¼Œä½†æ›´é‡è¦çš„æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªåŠ é€Ÿç½‘ç«™æ¸²æŸ“çš„å¥½æ–¹æ³•ã€‚

è¯·åŠ¡å¿…åœ¨ä¸‹é¢çš„è¯„è®ºä¸­ç•™ä¸‹ä½ çš„é—®é¢˜å’Œå»ºè®®ã€‚å‘Šè¯‰æˆ‘ä½ æœ€å–œæ¬¢çš„ web å·¥ä½œè€…ä½¿ç”¨çš„ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œè®©æˆ‘çŸ¥é“æˆ‘æ˜¯å¦åœ¨æˆ‘çš„ä¾‹å­ä¸­é”™è¿‡äº†ä¸€äº›å¾ˆæ£’çš„ä¸œè¥¿ã€‚

## [](#updates)æ›´æ–°

*2019 å¹´ 11 æœˆ 13 æ—¥*

*   åŸºäº[@å•è‰²](https://dev.to/monochromer)çš„[è¯„è®º](https://dev.to/monochromer/comment/hlgh)å¢åŠ äº†`URL.revokeObjectURL(objectURL)`è°ƒç”¨ã€‚
*   ä¿®æ­£äº†å‡ ä¸ªé”™åˆ«å­—ã€‚