# åœ¨ Ubuntu ä¸Šè®¾ç½® Laravel æœ¬åœ°å¼€å‘ç¯å¢ƒğŸ˜ğŸ§

> åŸæ–‡:[https://dev . to/Andrew brooks/setting-up-laravel-local-dev-environment-on-Ubuntu-51kp](https://dev.to/andrewbrooks/setting-up-laravel-local-dev-environment-on-ubuntu-51kp)

è®©æˆ‘ä»¬åœ¨ Ubuntu desktop 19.04 å’Œ 18.04 ä¸Šè¿è¡Œä¸€ä¸ªç®€å•çš„ Laravel å¼€å‘ç¯å¢ƒï¼ŒåŒ…æ‹¬ä¸€ä¸ªå®Œæ•´çš„ MySQL æ•°æ®åº“è¿æ¥ã€‚

æœ¬æ–‡å‡è®¾æ‚¨å¯¹ Linux ç»ˆç«¯æœ‰ä¸€å®šçš„äº†è§£ã€‚

# [](#install-php)å®‰è£… PHP

æ·»åŠ å¹¶å®‰è£… PHP 7.3 PPA

```
sudo add-apt-repository ppa:ondrej/php
sudo apt-get update
sudo apt-get install php7.3 
```

éªŒè¯å®‰è£…çš„ PHP ç‰ˆæœ¬

```
php -v 
```

è¾“å‡º:

```
PHP 7.3.8-1+ubuntu19.04.1+deb.sury.org+1 (cli) (built: Aug  7 2019 09:52:53) ( NTS )
Copyright (c) 1997-2018 The PHP Group
Zend Engine v3.3.8, Copyright (c) 1998-2018 Zend Technologies
    with Zend OPcache v7.3.8-1+ubuntu19.04.1+deb.sury.org+1, Copyright (c) 1999-2018, by Zend Technologies 
```

# [](#install-mysql-database)å®‰è£… MySQL æ•°æ®åº“

```
sudo apt-get install php7.3-mysql
sudo apt-get install mysql-server
sudo mysql_secure_installation 
```

ç°åœ¨æ‚¨å°†çœ‹åˆ°ä¸€äº›æç¤ºã€‚

å¯¹äºæœ¬åœ°å¼€å‘ç¯å¢ƒï¼Œæˆ‘è·³è¿‡äº†â€œéªŒè¯å¯†ç æ’ä»¶â€ã€‚

æ‚¨å°†è¢«è¦æ±‚è¾“å…¥`root`ç”¨æˆ·çš„å¯†ç ã€‚

ä»é‚£é‡Œåˆ é™¤åŒ¿åç”¨æˆ·ï¼Œç¦æ­¢`root`ç”¨æˆ·è¿œç¨‹è®¿é—®ï¼Œå¹¶åˆ é™¤æµ‹è¯•æ•°æ®åº“ã€‚

å½“è¦æ±‚é‡æ–°åŠ è½½æƒé™è¡¨æ—¶ï¼Œé€‰æ‹©`yes`ã€‚

## [](#create-a-nonroot-user-with-root-privilages)åˆ›å»ºå…·æœ‰ root æƒé™çš„é root ç”¨æˆ·

ç¨ååœ¨é…ç½® Laravel åº”ç”¨ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ªç”¨æˆ·ã€‚

ä»¥`root`çš„èº«ä»½ç™»å½• MySQLã€‚

```
sudo mysql -u root -p 
```

è¿è¡Œä¸‹é¢çš„ SQL æ¥åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·`admin`ã€‚

```
CREATE USER 'admin'@'localhost' IDENTIFIED BY '';
GRANT ALL PRIVILEGES ON *.* TO 'admin'@'localhost' WITH GRANT OPTION;
FLUSH PRIVILEGES; 
```

è¾“å…¥`exit`é€€å‡º MySQL CLIã€‚

```
mysql> exit 
```

åœ¨ä¸ä½¿ç”¨`sudo`çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ä»¥`admin`çš„èº«ä»½ç™»å½•æ¥æµ‹è¯•æ–°ç”¨æˆ·ã€‚

```
mysql -u admin 
```

æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹:

```
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 12
Server version: 5.7.27-0ubuntu0.19.04.1 (Ubuntu)

Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> _ 
```

é€€å‡º MySqlï¼Œæˆ‘ä»¬å°†ç»§ç»­å®‰è£… Composerã€‚

```
mysql> exit 
```

# [](#install-composer)å®‰è£…ä½œæ›²å®¶

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°æˆ‘ä»¬çš„åŒ…ç®¡ç†å™¨ã€‚

```
sudo apt update 
```

ç°åœ¨ï¼Œæˆ‘ä»¬å°†å®‰è£…ä¸€äº›å®‰è£… Composer æ‰€éœ€çš„ä¾èµ–é¡¹ã€‚

*   `curl`ä¸‹è½½ä½œæ›²å®¶
*   è¿è¡Œå®‰è£…éœ€è¦ä½¿ç”¨`php-cli`
*   `php-mbstring`ä¸ºæ‰€ä½¿ç”¨çš„åº“æä¾›åŠŸèƒ½
*   `git`å°†å…è®¸ Composer ä¸‹è½½é¡¹ç›®ä¾èµ–é¡¹
*   `unzip`ç”¨äºè§£å‹ç¼©åŒ…

```
sudo apt install curl php-cli php-mbstring git unzip 
```

è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸‹è½½ Composer å®‰è£…ç¨‹åºäº†ã€‚

é¦–å…ˆè¿›å…¥æ‚¨çš„ä¸»ç›®å½•

```
cd ~ 
```

å¹¶å¼€å§‹ä¸‹è½½ Composer å®‰è£…ç¨‹åºã€‚

```
curl -sS https://getcomposer.org/installer -o composer-setup.php 
```

åœ¨æˆ‘ä»¬è¿è¡Œå®‰è£…ç¨‹åºä¹‹å‰ï¼Œéœ€è¦éªŒè¯å®ƒæ˜¯å¦æŸåã€‚

è®¿é—®[https://composer.github.io/pubkeys.html](https://composer.github.io/pubkeys.html)ï¼Œæ‰¾åˆ°â€œ**å®‰è£…äººå‘˜ç­¾å(SHA-384)**

ä½¿ç”¨ç­¾åå¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥éªŒè¯æ‚¨çš„å®‰è£…ç¨‹åºã€‚

```
HASH=your_hash_goes_here 
```

```
php -r "if (hash_file('SHA384', 'composer-setup.php') === '$HASH') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;" 
```

æ‚¨åº”è¯¥ä¼šçœ‹åˆ°
çš„è¾“å‡º

```
Installer verified 
```

å¦åˆ™ï¼Œæ‚¨éœ€è¦é‡æ–°ä¸‹è½½å®‰è£…ç¨‹åºï¼Œå¹¶å†æ¬¡é€šè¿‡éªŒè¯æ­¥éª¤ã€‚

## [](#run-the-installer)è¿è¡Œå®‰è£…ç¨‹åº

ç°åœ¨æˆ‘ä»¬å¯ä»¥è‡ªç”±åœ°åœ¨ç³»ç»Ÿä¸Šå…¨å±€å®‰è£… Composer äº†ã€‚

```
sudo php composer-setup.php --install-dir=/usr/local/bin --filename=composer 
```

è¾“å‡º:

```
All settings correct for using Composer
Downloading...

Composer (version 1.9.0) successfully installed to: /usr/local/bin/composer
Use it: php /usr/local/bin/composer 
```

æœ€åï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°å¯¹ composer ç›®å½•çš„æƒé™ã€‚

```
sudo chown -R $USER ~/.composer/ 
```

### [](#verify-composer-is-installed)éªŒè¯å®‰è£…äº† Composer

âš ï¸ä¸è¿è¡Œä½œæ›²å®¶ä½œä¸ºæ ¹ä½¿ç”¨é¡»è—¤âš ï¸

åªéœ€è¿è¡Œ

```
composer 
```

ä½ åº”è¯¥çœ‹åˆ°:

```
 ______
  / ____/___  ____ ___  ____  ____  ________  _____
 / /   / __ \/ __ `__ \/ __ \/ __ \/ ___/ _ \/ ___/
/ /___/ /_/ / / / / / / /_/ / /_/ (__  )  __/ /
\____/\____/_/ /_/ /_/ .___/\____/____/\___/_/
                    /_/
Composer version 1.9.0 2019-08-02 20:55:32 
```

# [](#time-for-laravel)æ‹‰è…Šç»´å°”æ—¶é—´åˆ°äº†ï¼

ä½†é¦–å…ˆï¼Œä¸€äº›ä¾èµ–ã€‚

```
sudo apt-get install php7.3-zip 
```

```
sudo apt-get install php7.3-xml 
```

ä½¿ç”¨ Composer ä¸‹è½½ Laravel å®‰è£…ç¨‹åºã€‚

```
composer global require laravel/installer 
```

ç°åœ¨æˆ‘ä»¬éœ€è¦æ›´æ–° Linux `$PATH`

```
echo 'export PATH="$PATH:$HOME/.composer/vendor/bin"' >> ~/.bashrc 
```

æ›´æ–°å®Œ`$PATH`åï¼Œå…³é—­ä½ çš„ç»ˆç«¯çª—å£ï¼Œæ‰“å¼€ä¸€ä¸ªæ–°çš„ã€‚

# [](#hello-world)æ‚¨å¥½ï¼Œä¸–ç•Œ

è®©æˆ‘ä»¬åœ¨æœ¬åœ°ä¸»æœºä¸Šè¿è¡Œä¸€ä¸ªæ ·æ¿ Laravel åº”ç”¨ç¨‹åºã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºå°†è¦è¿æ¥çš„æ•°æ®åº“ã€‚

ä½¿ç”¨ä¹‹å‰åˆ›å»ºçš„`admin`ç”¨æˆ·é€šè¿‡ç»ˆç«¯ç™»å½• MySqlã€‚

```
mysql -u admin 
```

ç°åœ¨è¿è¡Œä¸‹é¢çš„ SQL æ¥åˆ›å»ºä¸€ä¸ªåä¸º`laravel`çš„æ•°æ®åº“ã€‚

```
CREATE DATABASE laravel; 
```

éšç€æˆ‘ä»¬çš„æ•°æ®åº“åˆ›å»ºï¼Œæˆ‘ä»¬å¯ä»¥ç§»åŠ¨åˆ°äº‹æƒ…çš„ Laravel æ–¹é¢ã€‚

`cd`é€šè¿‡ç»ˆç«¯è¿›å…¥æ‚¨æƒ³è¦åˆ›å»º Laravel åº”ç”¨ç¨‹åºçš„æ–‡ä»¶å¤¹ã€‚

å¯¹æˆ‘æ¥è¯´é‚£æ˜¯`~/dev/laravel/`

è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ­å»ºåº”ç”¨:

```
laravel new hello-world 
```

ä»…ä»…æ˜¯åº”ç”¨ç¨‹åºçš„åå­—ï¼Œæ‰€ä»¥ä½ å¯ä»¥éšæ„å‘½åã€‚

ä¸€æ—¦è¿™å®Œæˆ`cd`åˆ°ä½ çš„åº”ç”¨ç¨‹åºçš„æ–°ç›®å½•ã€‚

```
cd hello-world 
```

æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰ Laravel åº”ç”¨ç¨‹åºå¦‚ä½•è¿æ¥åˆ°æˆ‘ä»¬çš„æ•°æ®åº“ã€‚

ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ç¼–è¾‘åº”ç”¨ç¨‹åºæ ¹ç›®å½•ä¸­çš„`.env`æ–‡ä»¶ã€‚

```
sudo nano .env 
```

è¿æ¥è®¾ç½®åº”è¯¥æ˜¯è¿™æ ·çš„

```
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=laravel
DB_USERNAME=admin
DB_PASSWORD= 
```

æ‚¨å¯ä»¥ä½¿ç”¨`ctrl+x`->-`'y'`->-`[ENTER]`ä¿å­˜ nano çš„æ›´æ”¹

ç°åœ¨æˆ‘ä»¬éœ€è¦æµ‹è¯•è¿™ä¸ªè¿æ¥ã€‚

ä¸ºæ­¤æˆ‘ä»¬å°†ç¼–è¾‘`/routes/web.php`

å®ƒåº”è¯¥çœ‹èµ·æ¥åƒ

```
Route::get('/', function () {
    // return view('welcome');
    try {
        DB::connection()->getPdo();
        $caught = false;
    } catch (Exception $e) {
        $caught = true;
        die("Could not connect to the database.  Please check your configuration. error:" . $e );
    }

    if(!$caught){
        echo 'Hello, world.';
    }
}); 
```

ç°åœ¨é€šè¿‡è¿è¡Œ
å¯åŠ¨æœåŠ¡å™¨

```
php artisan serve 
```

è¾“å‡º:

```
Laravel development server started: <http://127.0.0.1:8000> 
```

ç°åœ¨ä½ å¯ä»¥åœ¨ä½ çš„æµè§ˆå™¨ä¸­æŸ¥çœ‹å®ƒï¼Œç½‘å€æ˜¯ http://127.0.0.1:8000

ä½ åº”è¯¥çœ‹çœ‹â€œä½ å¥½ï¼Œä¸–ç•Œâ€æ‰“å°åˆ°å±å¹•ä¸Šï¼Œè¡¨ç¤ºæˆåŠŸè¿æ¥åˆ°æ•°æ®åº“ã€‚

å°±æ˜¯è¿™æ ·ï¼ğŸ‰

ç°åœ¨ï¼Œæ‚¨å·²ç»ä¸ºæœ¬åœ° Ubuntu å¼€å‘ç¯å¢ƒé…ç½®äº† PHP 7.3ã€MySqlã€Composer å’Œ Laravel å®‰è£…ç¨‹åºï¼Œå¹¶è¿è¡Œäº† starter Laravel åº”ç”¨ç¨‹åºã€‚

* * *

æˆ‘æ˜¯å®‰å¾·é²ï¼Œä¸€ä¸ªæ¥è‡ªå—æ–¹è…¹åœ°çš„å…¨æ ˆè½¯ä»¶å¼€å‘äººå‘˜ï¼Œä»äº‹äº’è”ç½‘å¼€å‘ã€‚

åœ¨æ¨ç‰¹ä¸Šç»™æˆ‘æ‰“ç”µè¯

å¦‚æœæ‚¨å¯¹æœªæ¥çš„æ–‡ç« æœ‰ä»»ä½•é—®é¢˜æˆ–è¦æ±‚ï¼Œè¯·è”ç³»æˆ‘ä»¬ï¼