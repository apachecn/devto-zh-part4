# ä½¿ç”¨ Apisentris åˆ›å»ºä¸€ä¸ªæ²¡æœ‰åç«¯çš„åŠ¨æ€ç½‘ç«™

> åŸæ–‡ï¼š<https://dev.to/_absyah_/create-a-dynamic-website-without-backend-using-apisentris-4e63>

### æœ‰æ²¡æœ‰æƒ³è¿‡å›åˆ°é‚£ä¸ª web åªæœ‰ HTML å’Œ CSS + JavaScript çš„æ—¶ä»£ï¼Ÿ

æˆ‘æœ‰ï¼Œä½†å¦‚æœæˆ‘æƒ³åˆ›å»ºä¸€ä¸ªåŠ¨æ€ç½‘ç«™ï¼Œå¿…é¡»æ˜ç¡®è€ƒè™‘åç«¯æŠ€æœ¯ï¼Œå°†ç”¨äºå¤„ç†å¯¹æœåŠ¡å™¨å’Œæ•°æ®åº“çš„è¯·æ±‚ï¼Œæ€»æ˜¯å—åˆ°å¦‚ä½•åšçš„é˜»ç¢ã€‚ç„¶è€Œï¼Œåœ¨ä»Šå¤©ï¼Œè®¸å¤šåç«¯å³æœåŠ¡æ­£åœ¨å‡ºç°ï¼Œè¿™ä½¿å¾—æœ‰å¯èƒ½ç»•è¿‡å¼€å‘åç«¯æœ¬èº«çš„ç–²åŠ³ã€‚

> ![Ardian profile image](img/3dfa51e805b61b906f5571d1fecb4ecd.png)é˜¿ä¸[@ _ absyah _](https://dev.to/_absyah_)![twitter logo](img/65e26e35707d96169ec8af6b3cbf2003.png)* * *ä¸æ­¤åŒæ—¶åœ¨åˆ›å®¢å®‡å®™çš„å¦ä¸€è¾¹ğŸŒ
> 
> [apisentris.com](https://t.co/vdroE4knKC)â„ï¸è½¬æ¢ä½ çš„ MySQLğŸ¬ä¸€ç§æ•°æ®åº“ç³»ç»ŸğŸ˜Google BigQuery åˆ° APIã€‚MongoDB å³å°†åŠ å…¥ï¼
> 
> ä¸æ¶‰åŠç¼–ç¨‹è¯­è¨€ã€‚ä¸éœ€è¦æœåŠ¡å™¨è®¾ç½®ğŸ‘‹åªæ˜¯ä¸€ä¸ªç§‘å­¦é­”æœ¯ğŸ§™â€â™‚ï¸
> 
> [@ apisentrishq](https://twitter.com/ApisentrisHQ)2019 å¹´ 2 æœˆ 07 æ—¥ä¸‹åˆ 14:19[![Twitter reply action](img/269095962147c28351274afdd5486a48.png)](https://twitter.com/intent/tweet?in_reply_to=1093514484100980736)[![Twitter retweet action](img/771160ecf06ae3d4d7a7815c29c819c2.png)](https://twitter.com/intent/retweet?tweet_id=1093514484100980736)1[![Twitter like action](img/c077611ab2a5e0b4cd0c826ee7ae1e48.png)](https://twitter.com/intent/like?tweet_id=1093514484100980736)9

æˆ‘å¼€å‘äº†ä¸€ä¸ªå¯ä»¥ä½œä¸ºåç«¯æœåŠ¡çš„åº”ç”¨ç¨‹åºï¼Œåä¸º Apisentrisï¼Œåç«¯é‡‡ç”¨ API ä¼˜å…ˆçš„æ–¹æ³•ã€‚æˆ‘æƒ³é€šè¿‡è¿™ä¸ªæ•™ç¨‹æ¥è¯æ˜æˆ‘å¼€å‘çš„ Apisentris å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚

#### åˆ›å»º Apisentris è´¦æˆ·

Apisentris æ˜¯ä¸€ä¸ªå¯ä»¥å°†å„ç§æ•°æ®åº“è½¬æ¢æˆ RESTful API çš„æœåŠ¡ã€‚

<figure>

[![Apisentris Landing Page](img/5d108457d668ee7c646f1354e9bbe1f7.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--E_43B-ls--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/dxjktrfkffdazcm1lwxn.png)

<figcaption>Apisentris Landing Page</figcaption>

</figure>

åœ¨è¿™é‡Œï¼Œæ•°æ®åº“è¢«ç§°ä¸ºè¿æ¥ã€‚Apisentris æä¾›æµ‹è¯•è¿æ¥ï¼Œå¯ä»¥ç”¨ä½œæ¼”ç¤ºï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥ç«‹å³äº†è§£ Apisentris æä¾›çš„åŠŸèƒ½ã€‚

<figure>

[https://www.youtube.com/embed/77rthlWoNz0](https://www.youtube.com/embed/77rthlWoNz0)

<figcaption>Apisentris - How It Works</figcaption>

</figure>

æ¼”ç¤ºè¿æ¥æä¾›äº†å¯åœ¨å…¶ä¸Šä½¿ç”¨çš„è¡¨æ ¼ï¼Œå³`programmers`è¡¨æ ¼å’Œ`languages`è¡¨æ ¼ã€‚ä¿å­˜æ¼”ç¤ºè¿æ¥åï¼Œæ¯ä¸ªè¡¨ä¸­éƒ½ä¼šå‡ºç°ä¸€ä¸ªæŒ‡å‘æ–‡æ¡£çš„é“¾æ¥ã€‚å¦‚æœç”¨æˆ·æƒ³é€šè¿‡ Linux /å‘½ä»¤æç¤ºç¬¦ç»ˆç«¯ç›´æ¥ä½¿ç”¨ cURLï¼Œè¿™ä¸ªæ–‡æ¡£é¡µé¢è¿˜æä¾›äº†ä½¿ç”¨ cURL çš„ä¾‹å­ã€‚

<figure>

[![](img/4903d36d23398fc6656a6769e15cb594.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Kf8X0Le6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/imee558fxf09qomdfdt5.png)

<figcaption>Accessing API from Console</figcaption>

</figure>

#### åˆ›é€  index.html

åˆ›å»ºåä¸º index.html çš„æ–‡ä»¶ï¼Œè§ä¸‹é¢çš„ä¾‹å­:

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  </head>
  <body>
    <section class="section">
      <div class="container">
        <!-- content is going here -->
      </div>
    </section>
  </body>
</html> 
```

è¿™ä¸ªé¡µé¢æ ‡é¢˜åªåŒ…å« bulma ä½œä¸º css æ¡†æ¶æ¥å¢å¼ºå¤–è§‚ï¼Œè¿˜åŒ…å« JQuery cdn ä½œä¸ºç½‘ç«™å’Œ Apisentris ä¹‹é—´çš„é€šä¿¡å™¨ã€‚æˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ªç´¢å¼•é¡µé¢åœ¨ä¸€ä¸ªè¡¨ä¸­æ˜¾ç¤ºç¨‹åºå‘˜åˆ—è¡¨ï¼Œè¯¥è¡¨åŒ…å« idã€ç”µå­é‚®ä»¶ã€åå­—ã€å§“æ°å’Œæ“ä½œç­‰åˆ—ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åº”è¯¥ç”¨è¿™ä¸ª html æ ‡ç­¾:
æ›¿æ¢`<!-â€Šcontent is going here ->`

```
<table class="table is-fullwidth" id="records-table">
   <tr>
      <th>ID</th>
      <th>Email</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Action</th>
    </tr>
</table> 
```

æˆ‘ä»¬å°†ä½¿ç”¨ AJAX æ¥è·å–ç¨‹åºå‘˜çš„ Apisentris å¸æˆ·ã€‚åœ¨å…³é—­`</ body>`æ ‡ç­¾ä¹‹å‰å†™æ ‡ç­¾`<script> </ script>`ï¼Œå¦‚ä¸‹:

```
<script>
    $(document).ready(function() {
        // render list
        $.ajax({
            url: "https://apisentris.com/api/v1/programmers",
            type: "GET",
            beforeSend: function(xhr) {
                xhr.setRequestHeader('client_id', '12000');
                xhr.setRequestHeader('access_token', 'dhxjIWAMYp-aYWpNfVkGPA');
                xhr.setRequestHeader('Content-Type', 'application/json');
            },
            success: function(response) {
                $.each(response, function(i, programmer) {
                      $('<tr id=row-' + programmer.id + '>').append(
                      $('<td>').text(programmer.id),
                      $('<td>').text(programmer.email),
                      $('<td>').text(programmer.firstname),
                      $('<td>').text(programmer.lastname),
                      $('<td data-programmer-id="' + programmer.id + '">').text('')
                    ).appendTo('#records-table').html();
                });
            }
        });
    });
  </script> 
```

AJAX ä½¿ç”¨ **GET** http æ–¹æ³•è°ƒç”¨**API/v1/ç¨‹åºå‘˜**ç«¯ç‚¹ã€‚åœ¨`beforeSend`ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æ·»åŠ éœ€è¦çš„å¤´ï¼Œå³`client_id`å’Œ Apisentris `access_token`ã€‚æ¥è‡ªè¿™ä¸ªç«¯ç‚¹çš„å“åº”æ˜¯ json å¯¹è±¡æ•°ç»„çš„å½¢å¼ã€‚æ˜¾ç¤ºåœ¨æˆ‘ä»¬ä¹‹å‰æä¾›çš„è¡¨ä¸­ï¼Œå› æ­¤å“åº”æ˜¯å¾ªç¯çš„ï¼Œç„¶åè¿½åŠ åˆ°è¡¨ä¸­ã€‚

<figure>

[![Our List of Programmers](img/9ebe41ceda494a09be9174380174e592.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--ctMNUFMC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/fxjzugov9i5ozpwylj2c.png)

<figcaption>index.html - List of Programmers</figcaption>

</figure>

æˆ‘ä»¬åªæŸ¥çœ‹ Actions åˆ—ï¼Œè¯¥åˆ—ä»ç„¶æ˜¯ç©ºçš„ã€‚è¯¥åˆ—åº”è¯¥æœ‰ä¸€ä¸ªèœå•ï¼Œç”¨äºç¼–è¾‘å’Œåˆ é™¤æœ‰é—®é¢˜çš„è¡Œã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç¨å¾®ä¿®æ”¹æˆ‘ä»¬çš„è„šæœ¬ï¼Œä»¥é€‚åº”æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½ã€‚

```
$('*[data-programmer-id='+ programmer.id +']')
    .html('<a href="edit.html?id='+ programmer.id +'">Edit</a>')
    .append('<a class="delete-record" data-programmer-id='+ programmer.id +'> Delete</a>'); 
```

åœ¨å°†æ¯ä¸ªç¨‹åºå‘˜è¡Œè¿½åŠ åˆ°è¡¨ä¸­åï¼Œåœ¨`success`å›è°ƒä¸­ç¼–å†™è„šæœ¬ã€‚

å› ä¸ºåˆ é™¤ç¨‹åºå‘˜ç‰¹æ€§ä¸ä½¿ç”¨æ–°é¡µé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†åœ¨è¿™ä¸ª**index.html**é¡µé¢ä¸Šæ·»åŠ ä¸€ä¸ªè„šæœ¬æ¥åˆ é™¤å®ƒã€‚é€šè¿‡ **DELETE** http æ–¹æ³•å¯¹ **api/v1/programmers/:id** ç«¯ç‚¹çš„ AJAX è°ƒç”¨ä¹Ÿå¯ä»¥ç§»é™¤ç¨‹åºå‘˜ã€‚

```
// assign delete action

$('.delete-record').on('click', function() {
    var programmerId = $(this).attr("data-programmer-id");
    var endpoint     = 'https://apisentris.com/api/v1/programmers/' + programmerId;
// remove from row
    $('#row-' + programmerId).remove();

    // do ajax delete
    $.ajax({
        url: endpoint,
        dataType: 'json',
        type: "DELETE",
        beforeSend: function(xhr) {
            xhr.setRequestHeader('client_id', '12000');
            xhr.setRequestHeader('access_token', 'dhxjIWAMYp-aYWpNfVkGPA');
            xhr.setRequestHeader('Content-Type', 'application/json');
        },
        success: function(response) {
            console.log('Record was successfully deleted.')
        }
    });
}); 
```

è¿™æ˜¯ä¸€ä¸ª JavaScript ä¸ JQuery ä»ç´¢å¼•æ˜¾ç¤ºç¨‹åºå‘˜åˆ—è¡¨ï¼Œä¹Ÿé“¾æ¥åˆ°ç¼–è¾‘é¡µé¢ï¼Œå¹¶ä»æ•°æ®åº“ä¸­åˆ é™¤ç¨‹åºå‘˜ã€‚

```
<script>
    $(document).ready(function() {
        // render list
        $.ajax({
            url: "https://apisentris.com/api/v1/programmers",
            type: "GET",
            beforeSend: function(xhr) {
                xhr.setRequestHeader('client_id', '12000');
                xhr.setRequestHeader('access_token', 'dhxjIWAMYp-aYWpNfVkGPA');
                xhr.setRequestHeader('Content-Type', 'application/json');
            },
            success: function(response) {
                $.each(response, function(i, programmer) {
                      $('<tr id=row-' + programmer.id + '>').append(
                      $('<td>').text(programmer.id),
                      $('<td>').text(programmer.email),
                      $('<td>').text(programmer.firstname),
                      $('<td>').text(programmer.lastname),
                      $('<td data-programmer-id="' + programmer.id + '">').text('')
                    ).appendTo('#records-table').html();
// create link to update
                    $('*[data-programmer-id='+ programmer.id +']')
                      .html('<a href="edit.html?id='+ programmer.id +'">Edit</a>')
                      .append('<a class="delete-record" data-programmer-id='+ programmer.id +'> Delete</a>');
});
// assign delete link
                $('.delete-record').on('click', function() {
                    var programmerId = $(this).attr("data-programmer-id");
                    var endpoint     = 'https://apisentris.com/api/v1/programmers/' + programmerId;
// remove from row
                    $('#row-' + programmerId).remove();

                    // do ajax delete
                    $.ajax({
                        url: endpoint,
                        dataType: 'json',
                        type: "DELETE",
                        beforeSend: function(xhr) {
                            xhr.setRequestHeader('client_id', '12000');
                            xhr.setRequestHeader('access_token', 'dhxjIWAMYp-aYWpNfVkGPA');
                            xhr.setRequestHeader('Content-Type', 'application/json');
                        },
                        success: function(response) {
                            console.log('Record was successfully deleted.')
                        }
                    });
                });
            }
        });
    });
</script> 
```

<figure>

[![List of Programmers with Action Links](img/3010d7284d0e248b7d7af76fd524379c.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Q7QQ9bJ7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/0t2xuetkze0bd6fdd730.png)

<figcaption>List of Programmers with Action Links</figcaption>

</figure>

#### åˆ›é€  new.html

åœ¨è¿™ä¸€é¡µä¸­ï¼Œæˆ‘ä»¬å°†å‘æ‚¨å±•ç¤ºä¸€ä¸ªå¯ç”¨äºåˆ›å»ºè®°å½•åŠŸèƒ½çš„è¡¨å•ã€‚HTML å’Œ Javascript å°†éå¸¸ç®€å•ã€‚

```
<section class="section">
    <div class="container">
      <h1 class="title">
        New Programmer | <a href="index.html">Back</a>
      </h1>
      <div class="field">
        <p class="control has-icons-left has-icons-right">
          <input class="input" type="email" placeholder="Email" name="email">
          <span class="icon is-small is-left">
            <i class="fas fa-envelope"></i>
          </span>
        </p>
      </div>
      <div class="field">
        <p class="control has-icons-left">
          <input class="input" type="text" placeholder="First Name" name="firstname">
          <span class="icon is-small is-left">
            <i class="fas fa-user"></i>
          </span>
        </p>
      </div>
      <div class="field">
        <p class="control has-icons-left">
          <input class="input" type="text" placeholder="Last Name" name="lastname">
        </p>
      </div>
      <div class="field">
        <p class="control">
          <button class="button is-success" id="create-record-btn"> Create
          </button>
        </p>
      </div>
    </div>
  </section> 
```

æˆ‘ä»¬å°†ä½¿ç”¨ AJAX è°ƒç”¨ **/api/v1/programmers** ç«¯ç‚¹ä¸ **POST** http æ–¹æ³•ã€‚

```
<script>
    $(document).ready(function() {
        $('#create-record-btn').click(function() {
            var email     = $('input[name="email"]').val();
            var firstname = $('input[name="firstname"]').val();
            var lastname  = $('input[name="lastname"]').val();
            var request   = {
                resource: {
                    email: email,
                    firstname: firstname,
                    lastname: lastname
                }
            }

            // do ajax post
            $.ajax({
                url: "https://apisentris.com/api/v1/programmers",
                data: JSON.stringify(request),
                dataType: 'json',
                type: "POST",
                beforeSend: function(xhr) {
                    xhr.setRequestHeader('client_id', '12000');
                    xhr.setRequestHeader('access_token', 'dhxjIWAMYp-aYWpNfVkGPA');
                    xhr.setRequestHeader('Content-Type', 'application/json');
                },
                success: function(response) {
                    window.location.replace('index.html')
                }
            });
        });
    });
  </script> 
```

è¿™ä¸ªé¡µé¢éå¸¸ç®€å•ï¼Œåªéœ€ä»ç°æœ‰è¡¨å•ä¸­è·å–å€¼ï¼Œç„¶åä»¥ JSON çš„å½¢å¼ä½œä¸ºè¯·æ±‚ä½“å‘é€ï¼Œç„¶ååœ¨å“åº”ä¸­ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å†æ¬¡å¤„ç†æ•°æ®ã€‚å¯¹äºä¸Šè¿°ä»£ç ï¼Œå“åº”æˆåŠŸåï¼Œå®ƒå°†è¢«é‡å®šå‘å›ç´¢å¼•é¡µé¢ã€‚

#### åˆ›é€  edit.html

ç¼–è¾‘é¡µé¢è¦æ±‚æˆ‘ä»¬è¿›è¡Œä¸¤æ¬¡ AJAX è°ƒç”¨ï¼Œå³è·å–å°†è¦æ›´æ”¹çš„æ•°æ®ï¼Œè¿™æ˜¯é€šè¿‡ **GET** http è¯·æ±‚å®Œæˆçš„ï¼Œå½“ä¿å­˜æ›´æ”¹æ—¶ï¼Œä½¿ç”¨ **PATCH** http æ–¹æ³•ã€‚

**GET** æ˜¯é€šè¿‡è°ƒç”¨ **api/v1/programmers/:id** ç«¯ç‚¹å®Œæˆçš„ï¼Œå…¶ä¸­`:id`æ˜¯ä¹‹å‰ä¿å­˜çš„æ•°æ®çš„ idï¼Œç„¶ååœ¨æ¯ä¸ªè¾“å…¥è¡¨å•ä¸Šæ˜¾ç¤ºæ¯ä¸ªå±æ€§ã€‚

```
// get resource details
$.ajax({
    url: endpoint,
    type: "GET",
    beforeSend: function(xhr) {
        xhr.setRequestHeader('client_id', '12000');
        xhr.setRequestHeader('access_token', 'dhxjIWAMYp-aYWpNfVkGPA');
        xhr.setRequestHeader('Content-Type', 'application/json');
    },
    success: function(response) {
        $('input[name="email"]').val(response.email);
        $('input[name="firstname"]').val(response.firstname);
        $('input[name="lastname"]').val(response.lastname);
    }
}); 
```

**PATCH** http æ–¹æ³•ä¸æˆ‘ä»¬åœ¨æ‰§è¡Œ **POST** http æ–¹æ³•æ—¶ä½¿ç”¨çš„ä»£ç éå¸¸ç›¸ä¼¼ï¼Œåªæ˜¯å°† AJAX ç±»å‹å‚æ•°:`POST`æ”¹ä¸º`PATCH`

```
$.ajax({
    url: endpoint,
    data: JSON.stringify(request),
    dataType: 'json',
    type: "PATCH", // uses PATCH http method
    beforeSend: function(xhr) {
        xhr.setRequestHeader('client_id', '12000');
        xhr.setRequestHeader('access_token', 'dhxjIWAMYp-aYWpNfVkGPA');
        xhr.setRequestHeader('Content-Type', 'application/json');
    },
    success: function(response) {
        window.location.replace('index.html')
    }
}); 
```

#### æºä»£ç å’Œç°åœºæ¼”ç¤º

[Github ä¸Šçš„æºä»£ç ](https://github.com/apisentris/demo)
[ç°åœºæ¼”ç¤º](http://absyah.com/apisentris/demo/jquery/index.html)

<figure>

[![List of Programmers Page](img/0b842c31d7d3478cd8c3f0eb0ddb6add.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--drAFC1fL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/kh1685zbpohvcegly1m1.png)

<figcaption>List of Programmers</figcaption>

</figure>

<figure>

[![Programmer Form](img/294ed42818c8b1c8eeab672be0df576f.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--O-uB0YtS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/sf0fxoycjf30ozwilr1f.png)

<figcaption>New Programmer</figcaption>

</figure>

<figure>

[![Prefilled Programmer Form](img/439c4a684aa67c745dabfc74b73c41dd.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--_PFcyJiI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/83vxv9lq37pyoonyx33y.png)

<figcaption>Edit Programmer with Prefilled Data</figcaption>

</figure>

* * *

æˆ‘æ˜¯æ¨ç‰¹ä¸Šçš„ [@_absyah_](https://dev.to/_absyah_) ï¼Œardian@apisentris.com çš„æ˜¯æˆ‘çš„é‚®ç®±ã€‚Apisentris çš„åˆ¶é€ è€…ã€‚
å…³æ³¨ Twitter ApisentrisHQï¼Œäº†è§£ Apisentris çš„æœ€æ–°åŠŸèƒ½æ›´æ–°ã€‚