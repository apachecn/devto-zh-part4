# å¦‚ä½•åœ¨ javascript ä¸­ä½¿ç”¨ Array reduce é€šè¿‡ä¸€ä¸ªé”®å¯¹å¯¹è±¡æ•°ç»„è¿›è¡Œåˆ†ç»„

> åŸæ–‡:[https://dev . to/param Harrison/how-to-group-a-array-of-objects-through-a-key-using-array-reduce-in-JavaScript-1 lki](https://dev.to/paramharrison/how-to-group-an-array-of-objects-through-a-key-using-array-reduce-in-javascript-1lki)

æˆ‘ä»¬ç»å¸¸ä½¿ç”¨`Array.map`ã€`Array.filter`å’Œ`Array.findIndex`ã€‚javascript Array ä¸­è¿˜æœ‰å…¶ä»–å‡ ç§æ–¹æ³•ã€‚

åœ¨ä½¿ç”¨ array reduce åˆ›å»º`groupBy`å‡½æ•°ä¹‹å‰ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°`Array.reduce`çš„åŸºæœ¬ç¤ºä¾‹ã€‚

### [](#how-reduce-works)å¦‚ä½•è¿˜åŸä½œå“

> ç®€å•åœ°è¯´ï¼Œå®ƒå°†æ•°ç»„ç®€åŒ–ä¸ºå•ä¸ªå€¼ã€‚å•ä¸ªå€¼å¯ä»¥æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²ã€å¯¹è±¡æˆ–å¦ä¸€ä¸ªæ•°ç»„ã€‚

è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå¸¸è§çš„æ•°ç»„ç¼©å‡çš„ä¾‹å­ï¼Œ

```
// Person array with name and Age
const person = [
  {
    name: 'Jim',
    color: 'blue',
    age: 22,
  },
  {
    name: 'Sam',
    color: 'blue',
    age: 33,
  },
  {
    name: 'Eddie',
    color: 'green',
    age: 77,
  },
];

// Add their sum of ages
const sumOfAges = person.reduce((sum, currentValue) => {
  return sum + currentValue.age;
}, 0);

console.log(sumOfAges); // 132 
```

*   `reduce`æ¥å—åˆå§‹å€¼ï¼Œè¿™é‡Œåœ¨æˆ‘ä»¬çš„å¹´é¾„æ€»å’Œä¸­ï¼Œæˆ‘ä»¬é€šè¿‡`0`ä½œä¸ºåˆå§‹å€¼
*   `reduce`å¯¹æ¯ä¸ªå€¼è¿›è¡Œè¿­ä»£ï¼Œå¹¶å°†æ¯æ¬¡çš„æ€»å’Œä¸å®ƒä»¬ä¹‹å‰çš„æ€»å’Œå€¼ç›¸åŠ ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¿”å›æ¯æ­¥çš„æ€»å’Œï¼Œè¿™ä¸ªæ€»å’Œä¸ä¸‹ä¸€ä¸ªå¹´é¾„å€¼ç›¸åŠ ã€‚
*   æœ€ç»ˆçš„å’Œå€¼å°†åœ¨è¿­ä»£ç»“æŸæ—¶è¿”å›ã€‚

### [](#how-to-groupby-using-reduce-in-javascript)å¦‚ä½•åœ¨ Javascript ä¸­ä½¿ç”¨ reduce è¿›è¡Œåˆ†ç»„

å¯¹äº person æ•°ç»„ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨é¢œè‰²å€¼å¯¹å¯¹è±¡è¿›è¡Œåˆ†ç»„ã€‚åœ¨æˆ‘ä»¬çš„å¯¹è±¡ä¸­ï¼Œæœ‰ä¸¤ä¸ªè“è‰²å¯¹è±¡å’Œä¸€ä¸ªç»¿è‰²å¯¹è±¡ã€‚

```
// Accepts the array and key
const groupBy = (array, key) => {
  // Return the end result
  return array.reduce((result, currentValue) => {
    // If an array already present for key, push it to the array. Else create an array and push the object
    (result[currentValue[key]] = result[currentValue[key]] || []).push(
      currentValue
    );
    // Return the current iteration `result` value, this will be taken as next iteration `result` value and accumulate
    return result;
  }, {}); // empty object is the initial value for result object
};

// Group by color as key to the person array
const personGroupedByColor = groupBy(person, 'color'); 
```

åˆ›å»º`groupBy`å‡½æ•°çš„æ­¥éª¤ï¼Œ

*   åˆ›å»ºä¸€ä¸ªå¯¹è±¡ä½œä¸ºç»“æœå¯¹è±¡çš„åˆå§‹å€¼
*   åœ¨æ•°ç»„ reduce ä¸­ï¼Œä¸ºæ¯ä¸ªä¸åŒçš„é”®å€¼åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œå¦‚æœå½“å‰å€¼ä¸­å­˜åœ¨é”®å€¼ï¼Œåˆ™æ¨é€å½“å‰å€¼

```
// this step of code can be restructured to multiple lines, see below for the multi line code
(result[currentValue[key]] = result[currentValue[key]] || []).push(
  currentValue
);

// This is how the above code in multiple line
if (!result[currentValue[key]]) {
  result[currentValue[key]] = [];
}
result[currentValue[key]].push(currentValue); 
```

åˆ†ç»„åçš„æœ€ç»ˆç»“æœå°†æ˜¯è¿™æ ·çš„ï¼Œ

```
{
  "blue": [
    {
      "name": "Jim",
      "color": "blue",
      "age": 22
    },
    {
      "name": "Sam",
      "color": "blue",
      "age": 33
    }
  ],
  "green": [
    {
      "name": "Eddie",
      "color": "green",
      "age": 77
    }
  ]
} 
```

ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ä¾‹å­ï¼Œ

ä¸ºäº†æ›´å¥½åœ°ç†è§£ array reduce å¦‚ä½•å¤„ç†æ¯æ¬¡è¿­ä»£ã€‚

è¿™å°±æ˜¯åœ¨æ¯æ¬¡è¿­ä»£ä¸­åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•

```
// Initial value for `result`
{}
// After first iteration
{ blue: [{ name: 'Jim', color: 'blue', age: 22 }] }
// After second iteration
{ blue:
   [ { name: 'Jim', color: 'blue', age: 22 },
     { name: 'Sam', color: 'blue', age: 33 } ] }
// After final iteration
{ blue:
   [ { name: 'Jim', color: 'blue', age: 22 },
     { name: 'Sam', color: 'blue', age: 33 } ],
  green: [{ name: 'Eddie', color: 'green', age: 77 }]} 
```

å¸Œæœ›ä½ å­¦ä¼šäº†å¦‚ä½•ä½¿ç”¨ array reduce çš„æŠ€å·§ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ array reduce åˆ›å»º`groupBy`å‡½æ•°ğŸ˜