# ç”¨ Formik æ„å»ºæ›´å¥½çš„ååº”å½¢å¼

> åŸæ–‡ï¼š<https://dev.to/bnevilleoneill/building-better-react-forms-with-formik-4jh1>

[![](img/38b06b74e2a0aa987d33a35b19c3b2ef.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--8o0gzE9N--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/9hq16hhtoij3cchazixq.jpg)

ä½¿ç”¨ React æ„å»ºè¡¨å•åŒ…æ‹¬å°†çŠ¶æ€è®¾ç½®ä¸ºç”¨æˆ·æ•°æ®çš„å®¹å™¨ï¼Œå°† props è®¾ç½®ä¸ºæ§åˆ¶çŠ¶æ€å¦‚ä½•ä½¿ç”¨ç”¨æˆ·è¾“å…¥æ›´æ–°çš„æ‰‹æ®µã€‚å¯ä»¥åœ¨ç”¨æˆ·è¾“å…¥ä¹‹é—´è¿›è¡ŒéªŒè¯ï¼Œå¹¶åœ¨è¡¨å•æäº¤æ—¶æ‰§è¡Œä»»æ„æäº¤åŠŸèƒ½ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ React è¡¨å•çš„ä¾‹å­ï¼Œå®ƒæ²¡æœ‰åº“ï¼Œåªæœ‰æœ€å°‘çš„å¼•å¯¼æ ·å¼:
[https://codesandbox.io/embed/q9r66xl44](https://codesandbox.io/embed/q9r66xl44)
åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨`constructor`æ–¹æ³•ä¸­åˆå§‹åŒ–æ‰€éœ€çš„çŠ¶æ€å€¼ã€‚å› ä¸ºæˆ‘ä»¬æœ‰ä¸¤ä¸ªå¿…éœ€çš„è¾“å…¥â€”â€”`email`å’Œ`password`â€”â€”æˆ‘ä»¬ä¸ºè¾“å…¥å€¼ã€è¾“å…¥æœ‰æ•ˆæ€§å’Œè¾“å…¥é”™è¯¯åˆå§‹åŒ–çŠ¶æ€:

```
constructor(props) {
  super(props);
  this.state = {
    formValues: {
      email: "",
      password: ""
    },
    formErrors: {
      email: "",
      password: ""
    },
    formValidity: {
      email: false,
      password: false
    },
    isSubmitting: false
  };
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºè¡¨å•çš„ render æ–¹æ³•ï¼Œè¾“å…¥å€¼æ¥è‡ª state:

```
render() {
  const { formValues, formErrors, isSubmitting } = this.state;
  return (
    <div className="container">
      <div className="row mb-5">
        <div className="col-lg-12 text-center">
          <h1 className="mt-5">Login Form</h1>
        </div>
      </div>
      <div className="row">
        <div className="col-lg-12">
          <form onSubmit={this.handleSubmit}>
            <div className="form-group">
              <label>Email address</label>
              <input
                type="email"
                name="email"
                className={`form-control ${
                  formErrors.email ? "is-invalid" : ""
                }`}
                placeholder="Enter email"
                onChange={this.handleChange}
                value={formValues.email}
              />
              <div className="invalid-feedback">{formErrors.email}</div>
            </div>
            <div className="form-group">
              <label>Password</label>
              <input
                type="password"
                name="password"
                className={`form-control ${
                  formErrors.password ? "is-invalid" : ""
                }`}
                placeholder="Password"
                onChange={this.handleChange}
                value={formValues.password}
              />
              <div className="invalid-feedback">{formErrors.password}</div>
            </div>
            <button
              type="submit"
              className="btn btn-primary btn-block"
              disabled={isSubmitting}
            >
              {isSubmitting ? "Please wait..." : "Submit"}
            </button>
          </form>
        </div>
      </div>
    </div>
  );
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æˆ‘ä»¬éœ€è¦ç¼–å†™`handleChange`æ–¹æ³•æ¥æ›´æ–°ç”¨æˆ·è¾“å…¥çš„çŠ¶æ€:

```
handleChange = ({ target }) => {
  const { formValues } = this.state;
  formValues[target.name] = target.value;
  this.setState({ formValues });
  this.handleValidation(target);
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ¯å½“çŠ¶æ€å€¼è¢«æ›´æ–°æ—¶ï¼Œæˆ‘ä»¬å°†é’ˆå¯¹ç”¨æˆ·è¾“å…¥è¿è¡Œä¸€ä¸ªéªŒè¯æ–¹æ³•ã€‚è¿™æ˜¯æˆ‘ä»¬çš„`handleValidation`æ–¹æ³•:

```
handleValidation = target => {
  const { name, value } = target;
  const fieldValidationErrors = this.state.formErrors;
  const validity = this.state.formValidity;
  const isEmail = name === "email";
  const isPassword = name === "password";
  const emailTest = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;
  validity[name] = value.length > 0;
  fieldValidationErrors[name] = validity[name]
    ? ""
    : `${name} is required and cannot be empty`;
  if (validity[name]) {
    if (isEmail) {
      validity[name] = emailTest.test(value);
      fieldValidationErrors[name] = validity[name]
        ? ""
        : `${name} should be a valid email address`;
    }
    if (isPassword) {
      validity[name] = value.length >= 3;
      fieldValidationErrors[name] = validity[name]
        ? ""
        : `${name} should be 3 characters minimum`;
    }
  }
  this.setState({
    formErrors: fieldValidationErrors,
    formValidity: validity
  });
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¸ªåŸºæœ¬è¡¨å•çš„æœ€åä¸€éƒ¨åˆ†æ˜¯æäº¤è¿‡ç¨‹çš„`handleSubmit`æ–¹æ³•ã€‚æˆ‘ä»¬éœ€è¦æ£€æŸ¥`formValidity`å€¼ï¼Œå¦‚æœæœ‰ä»»ä½•`false`å€¼ï¼Œå†æ¬¡è¿è¡ŒéªŒè¯æ–¹æ³•è€Œä¸æäº¤è¡¨å•ã€‚

```
handleSubmit = event => {
  event.preventDefault();
  this.setState({ isSubmitting: true });
  const { formValues, formValidity } = this.state;
  if (Object.values(formValidity).every(Boolean)) {
    alert("Form is validated! Submitting the form...");
    this.setState({ isSubmitting: false });
  } else {
    for (let key in formValues) {
      let target = {
        name: key,
        value: formValues[key]
      };
      this.handleValidation(target);
    }
    this.setState({ isSubmitting: false });
  }
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨è¡¨å•å·²ç»å¯ä»¥ä½¿ç”¨äº†ã€‚React åªä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºæä¾›â€œè§†å›¾â€å±‚ï¼Œè¿™æ„å‘³ç€å®ƒåªæä¾›åˆ¶ä½œè¡¨å•ç»„ä»¶çš„åŸºæœ¬å¿…éœ€å“ã€‚`component`ã€`state`å’Œ`props`å°±åƒæ‹¼å›¾å—ï¼Œä½ å¿…é¡»æŠŠå®ƒä»¬æ‹¼åœ¨ä¸€èµ·æ‰èƒ½æ„å»ºä¸€ä¸ªå·¥ä½œè¡¨å•ã€‚

æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œå¯¹äºåªæœ‰ä¸¤ä¸ªæ–‡æœ¬æ¡†çš„è¡¨å•æ¥è¯´ï¼Œè¿™æ˜¯ç›¸å½“å¤šçš„ä»£ç ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨ä¸€ä¸ªæœ‰ 10 ä¸ªæˆ–æ›´å¤šè¾“å…¥çš„è¡¨å•ä¸­ï¼Œæ‚¨éœ€è¦è®°å½•å¤šå°‘çŠ¶æ€å€¼ã€‚å‘€ï¼

æ˜¯çš„ï¼Œç”¨ React åˆ¶ä½œè¡¨å•ä¸€ç‚¹ä¹Ÿä¸å¥½ç©ï¼›å¾ˆå•°å—¦ï¼Œå¾ˆæ­»æ¿ã€‚æ„å»ºè¡¨å•å’Œåˆ›å»ºéªŒè¯æ–¹æ³•æ˜¯å¾ˆæ— èŠçš„ä»»åŠ¡ã€‚åœ¨æ¯ä¸ªè¡¨å•ä¸­ï¼Œæ‚¨è‡³å°‘éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œ:

1.  è®¾ç½®è¡¨å•å€¼ã€è¡¨å•é”™è¯¯å’Œè¡¨å•æœ‰æ•ˆæ€§çš„çŠ¶æ€
2.  å¤„ç†ç”¨æˆ·è¾“å…¥å’Œæ›´æ–°çŠ¶æ€
3.  åˆ›å»ºéªŒè¯å‡½æ•°
4.  å¤„ç†æäº¤

ä»¥è‡ªç„¶çš„â€œååº”â€æ–¹å¼æ„å»ºè¡¨å•è¦æ±‚æ‚¨ç¼–å†™ä»è®¾ç½®çŠ¶æ€åˆ°è¡¨å•æäº¤è¿‡ç¨‹çš„æ¯ä¸ªéƒ¨åˆ†ã€‚æˆ‘åšè¿‡æ— æ•°çš„ React è¡¨å•ï¼Œæˆ‘æ€»æ˜¯è§‰å¾—æ„å»ºè¡¨å•çš„è¿™ä¸€éƒ¨åˆ†éå¸¸æ¯ç‡¥å’Œè€—æ—¶ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä¸æ˜¯å”¯ä¸€æœ‰è¿™ç§æ„Ÿè§‰çš„äººã€‚

[![LogRocket Free Trial Banner](img/4aa67f42a82d61c79b61acb13eae9479.png)](https://logrocket.com/signup/)

## Enter Formik

è´¾é‡Œå¾·Â·å¸•å°”é»˜å‡ºäºåœ¨æ„å»º React è¡¨å•æ—¶çš„æŒ«è´¥æ„Ÿï¼Œç¼–å†™äº† Formik åº“ã€‚ä»–éœ€è¦ä¸€ç§æ–¹æ³•æ¥æ ‡å‡†åŒ–è¾“å…¥ç»„ä»¶å’Œè¡¨å•æäº¤æµç¨‹ã€‚Formik å¸®åŠ©æ‚¨ç¼–å†™æ„å»ºè¡¨å•çš„ä¸‰ä¸ªæœ€çƒ¦äººçš„éƒ¨åˆ†:

1.  è·å–è¡¨å•çŠ¶æ€å†…å¤–çš„å€¼
2.  éªŒè¯å’Œé”™è¯¯æ¶ˆæ¯
3.  å¤„ç†è¡¨å•æäº¤

è¿™åˆæ˜¯åŒä¸€ä¸ªè¡¨å•ï¼Œä½†è¿™æ¬¡ä½¿ç”¨çš„æ˜¯ Formik:
[https://codesandbox.io/embed/w63wr2xqq7](https://codesandbox.io/embed/w63wr2xqq7)
è¿™ä¸ªæ–°è¡¨å•åªä½¿ç”¨äº† Formik åº“ä¸­çš„å››ä¸ªé¢å¤–ç»„ä»¶:`<Formik />`ã€`<Form />`ã€`<Field />`å’Œ`<ErrorMessage />`ã€‚ä¸ºäº†é‡Šæ”¾ Formik çš„åŠ›é‡ï¼Œä½ å¯ä»¥å°†ä½ çš„è¡¨å•å°è£…åœ¨`<Formik />`ç»„ä»¶ä¸­:

```
<Formik>
  <Form>
    {/* the rest of the code here */}
  </Form>
</Formik> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬çœ‹çœ‹ä¸ React çš„è‡ªç„¶æ–¹å¼ç›¸æ¯”ï¼ŒFormik å¦‚ä½•ä½¿æ„å»ºè¡¨å•æ›´å®¹æ˜“ã€‚

### è·å–è¡¨æ ¼çŠ¶æ€çš„å€¼

Formik å°†é€šè¿‡å®ƒçš„`initialValues` prop åœ¨å†…éƒ¨è®¾ç½®çŠ¶æ€æ¥å­˜å‚¨ç”¨æˆ·è¾“å…¥ï¼Œå› æ­¤æ‚¨ä¸å†éœ€è¦ä»æ„é€ å‡½æ•°åˆå§‹åŒ–çŠ¶æ€ã€‚

ä¸ºäº†è·å– Formik å†…éƒ¨çŠ¶æ€çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨`<Field />`ç»„ä»¶æ›¿æ¢å¸¸è§„çš„ HTML `<input />`ç»„ä»¶ã€‚è¿™ä¸ªç»„ä»¶å°†å®Œæˆä¿æŒ Formik çŠ¶æ€å’Œè¾“å…¥å€¼åŒæ­¥çš„é­”æ³•ï¼Œæ‰€ä»¥ä½ ä¸å¿…å°†`value`å’Œ`onChange`é“å…·ä¼ å…¥`<Field />`ç»„ä»¶:

```
<Formik
  initialValues={{ email: "", password: "" }}
  onSubmit={({ setSubmitting }) => {
    alert("Form is validated! Submitting the form...");
    setSubmitting(false);
  }}
>
  {() => (
    <Form>
      <div className="form-group">
        <label htmlFor="email">Email</label>
        <Field
          type="email"
          name="email"
          className="form-control"
        />
      </div>
      <div className="form-group">
        <label htmlFor="password">Password</label>
        <Field
          type="password"
          name="password"
          className="form-control"
        />
      </div>
    </Form>
  )}
</Formik> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æœ‰äº† Formikï¼Œå°±ä¸å†éœ€è¦åœ¨`constructor`ä¸­åˆå§‹åŒ–çŠ¶æ€å¹¶åˆ›å»ºè‡ªå·±çš„`handleChange`æ–¹æ³•äº†ã€‚ä¸€åˆ‡éƒ½æå®šäº†ã€‚

### éªŒè¯å’Œé”™è¯¯ä¿¡æ¯

Formik ä¸­çš„éªŒè¯ä¼šåœ¨ç‰¹å®šäº‹ä»¶æœŸé—´è‡ªåŠ¨æ‰§è¡Œã€‚æ‰€æœ‰å¸¸è§çš„äº‹ä»¶ï¼Œæ¯”å¦‚ç”¨æˆ·è¾“å…¥ä¹‹åã€ç„¦ç‚¹æ”¹å˜æ—¶å’Œæäº¤æ—¶ï¼Œéƒ½åŒ…æ‹¬åœ¨å†…ï¼Œæ‚¨ä¸å¿…æ‹…å¿ƒå®ƒä»¬ã€‚ä½ æ‰€éœ€è¦åšçš„å°±æ˜¯å°†ä¸€ä¸ªå‡½æ•°ä¼ é€’ç»™ Formik çš„`validate` propã€‚

æ¯”è¾ƒ Formik éªŒè¯å’Œ vanilla React éªŒè¯ä¹‹é—´çš„ä»£ç :

```
// Formik validation code. Take values from Formik
validate={values => {
  let errors = {};
  if (values.email === "") {
    errors.email = "Email is required";
  } else if (!emailTest.test(values.email)) {
    errors.email = "Invalid email address format";
  }
  if (values.password === "") {
    errors.password = "Password is required";
  } else if (values.password.length < 3) {
    errors.password = "Password must be 3 characters at minimum";
  }
  return errors;
}}

// Vanilla React validation code. Take values given by handleChange
handleValidation = target => {
  const { name, value } = target;
  const fieldValidationErrors = this.state.formErrors;
  const validity = this.state.formValidity;
  const isEmail = name === "email";
  const isPassword = name === "password";
  const emailTest = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;
  validity[name] = value.length > 0;
  fieldValidationErrors[name] = validity[name]
    ? ""
    : `${name} is required and cannot be empty`;
  if (validity[name]) {
    if (isEmail) {
      validity[name] = emailTest.test(value);
      fieldValidationErrors[name] = validity[name]
        ? ""
        : `${name} should be a valid email address`;
    }
    if (isPassword) {
      validity[name] = value.length >= 3;
      fieldValidationErrors[name] = validity[name]
        ? ""
        : `${name} should be 3 characters minimum`;
    }
  }
  this.setState({
    formErrors: fieldValidationErrors,
    formValidity: validity
  });
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

éªŒè¯å°±ç»ªåï¼Œç°åœ¨éœ€è¦è¾“å‡ºé”™è¯¯æ¶ˆæ¯ã€‚Formik çš„`<ErrorMessage />`ç»„ä»¶å°†è‡ªåŠ¨æ˜¾ç¤ºç»™å®šåç§°çš„`<Field />`ç»„ä»¶çš„é”™è¯¯ä¿¡æ¯ã€‚ä½ å¯ä»¥é€šè¿‡`component`é“å…·è°ƒæ•´æ˜¾ç¤ºä»€ä¹ˆ HTML æ ‡ç­¾ã€‚å› ä¸ºè¿™ä¸ªç¤ºä¾‹è¡¨å•ä½¿ç”¨äº† Bootstrap çš„é£æ ¼ï¼Œä½ è¿˜éœ€è¦æ·»åŠ ä¸€ä¸ª`className`é“å…·:

```
// Formik error message output
<Field
  type="email"
  name="email"
  className={`form-control ${
    touched.email && errors.email ? "is-invalid" : ""
  }`}
/>
<ErrorMessage
  component="div"
  name="email"
  className="invalid-feedback"
/>

// Vanilla React error message output
<input
  type="email"
  name="email"
  className={`form-control ${
    formErrors.email ? "is-invalid" : ""
  }`}
  placeholder="Enter email"
  onChange={this.handleChange}
  value={formValues.email}
/>
<div className="invalid-feedback">{formErrors.email}</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é”™è¯¯æ¶ˆæ¯çš„ä»£ç å®é™…ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ Formik éªŒè¯ä¸­çš„ä»£ç æ¯” vanilla React ä¸­çš„å°‘å¾—å¤šã€‚å¥½æ ·çš„ï¼Œç¦ç±³å…‹ï¼

### æœ‰äº† Yup æ›´å®¹æ˜“éªŒè¯

è™½ç„¶æ‚¨å·²ç»æ„Ÿå—åˆ°äº†åœ¨éªŒè¯è¿‡ç¨‹ä¸­ä½¿ç”¨ Formik çš„å¥½å¤„ï¼Œä½†æ˜¯æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨å¯¹è±¡æ¨¡å¼éªŒè¯å™¨ä½¿å®ƒå˜å¾—æ›´åŠ ç®€å•ã€‚

å¯¹è±¡æ¨¡å¼éªŒè¯å™¨æ˜¯ä¸€ä¸ªç®€å•çš„åº“ï¼Œå®ƒå…è®¸æ‚¨å®šä¹‰ JavaScript å¯¹è±¡çš„è“å›¾ï¼Œå¹¶é€šè¿‡éªŒè¯è¿‡ç¨‹ç¡®ä¿å¯¹è±¡å€¼ä¸è“å›¾ç›¸åŒ¹é…ã€‚è¿™åœ¨éªŒè¯è¡¨å•æ•°æ®æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå®é™…ä¸Šæ˜¯ä¿å­˜åœ¨ Formik çš„`values` prop ä¸­çš„ä¸€ä¸ªå¯¹è±¡ã€‚

ç°åœ¨æœ‰ä¸€ä¸ªè¿™æ ·çš„åº“æ˜¯ Yupï¼ŒFormik çš„ä½œè€…éå¸¸å–œæ¬¢ Yupï¼Œä»¥è‡³äºä»–åŒ…æ‹¬äº†ä¸€ä¸ªç‰¹æ®Šçš„é“å…·æ¥è¿æ¥ Yup å’Œ Formikï¼Œåä¸º`validationSchema`ã€‚è¿™ä¸ªé“å…·ä¼šè‡ªåŠ¨å°† Yup çš„éªŒè¯é”™è¯¯è½¬æ¢æˆä¸€ä¸ªæ¼‚äº®çš„å¯¹è±¡ï¼Œå®ƒçš„é”®åŒ¹é…`values`å’Œ`touched`ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ Yup ä½œä¸ºéªŒè¯æ¨¡å¼çš„ Formik ç¤ºä¾‹ã€‚æ³¨æ„éªŒè¯å±æ€§æ˜¯å¦‚ä½•ä»`<Formik />`ç»„ä»¶ä¸­ç§»é™¤çš„:
[https://codesandbox.io/embed/olql6q2m1q](https://codesandbox.io/embed/olql6q2m1q)
æœ‰äº† Yup çš„å¯¹è±¡æ¨¡å¼éªŒè¯å™¨ï¼Œæ‚¨å°±ä¸å¿…å†æ‰‹åŠ¨ç¼–å†™`if`æ¡ä»¶äº†ã€‚ä½ å¯ä»¥é€šè¿‡[è®¿é—®å®ƒçš„ GitHub repo](https://github.com/jquense/yup) æ¥äº†è§£æ›´å¤šå…³äº Yup å’Œå®ƒèƒ½åšä»€ä¹ˆæ ·çš„éªŒè¯ã€‚

### è¡¨å•æäº¤æµç¨‹

Formik çš„`<Form />`ç»„ä»¶å°†è‡ªåŠ¨è¿è¡Œæ‚¨çš„éªŒè¯æ–¹æ³•ï¼Œå¦‚æœæœ‰ä»»ä½•é”™è¯¯ï¼Œå°†å–æ¶ˆæäº¤è¿‡ç¨‹ã€‚è™½ç„¶æ‚¨å¿…é¡»å°† onSubmit å±æ€§åŒ…å«åˆ°å¸¸è§„çš„`<form />`å…ƒç´ ä¸­ï¼Œä½†æ˜¯ Formik çš„`<Form />`åŒ…è£…å™¨å°†è¿è¡Œæ‚¨ä¼ é€’åˆ°`<Formik />`ç»„ä»¶ä¸­çš„`onSubmit`å±æ€§å‡½æ•°:

```
// Formik's submit code. Won't be executed if there are any errors.
onSubmit={({ setSubmitting }) => {
  alert("Form is validated!");
  setSubmitting(false);
}}

// Vanilla React submit code. Check on validity state then run validation manually.
handleSubmit = event => {
  event.preventDefault();
  this.setState({ isSubmitting: true });
  const { formValues, formValidity } = this.state;
  if (Object.values(formValidity).every(Boolean)) {
    alert("Form is validated!");
    this.setState({ isSubmitting: false });
  } else {
    for (let key in formValues) {
      let target = {
        name: key,
        value: formValues[key]
      };
      this.handleValidation(target);
    }
    this.setState({ isSubmitting: false });
  }
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

Formik è‡³å°‘åªéœ€è¦æäº¤å››è¡Œä»£ç ï¼Œå¹¶ä¸”ä¸éœ€è¦è·Ÿè¸ªè¡¨å•è¾“å…¥çš„æœ‰æ•ˆæ€§ã€‚è¿™çœŸæ˜¯å¤ªæ£’äº†ï¼

## ä½†æ˜¯ redux-form å‘¢ï¼Ÿ

å½“ç„¶ï¼Œ [redux-form](https://github.com/erikras/redux-form) å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯ä½ é¦–å…ˆéœ€è¦ä½¿ç”¨ reduxã€‚å¦‚æœä½ ç”¨çš„æ˜¯ MobX å‘¢ï¼Ÿå¦‚æœå°†æ¥å‡ºç°ä¸€ä¸ªæ–°çš„ã€æ›´å¥½çš„åº“ï¼Œè€Œæ‚¨æƒ³ç”¨å®ƒå–ä»£ Reduxï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿé™¤æ­¤ä¹‹å¤–ï¼Œæ‚¨çš„ React è¡¨å•å®é™…ä¸Šä»¥æŸç§æ–¹å¼å½±å“äº†æ•´ä¸ªåº”ç”¨ç¨‹åºçš„æµç¨‹å—ï¼Ÿ

è€ƒè™‘ä¸€ä¸‹:ç”¨æˆ·åæ–‡æœ¬æ¡†çš„å€¼å¯¹æ‚¨çš„åº”ç”¨ç¨‹åºå…¨å±€æ˜¯å¦æœ‰å½±å“ï¼Ÿå¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆçœŸçš„æ²¡æœ‰å¿…è¦ä½¿ç”¨ Redux æ¥è·Ÿè¸ªå®ƒçš„å€¼ã€‚ç”šè‡³å…ˆçŸ¥ä¸¹Â·é˜¿å¸ƒæ‹‰è«å¤«ä¹Ÿè¯´äº†åŒæ ·çš„è¯ã€‚

redux-form çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæ‚¨å°†è¡¨å•è¾“å…¥å€¼å­˜å‚¨åˆ° Redux store ä¸­ã€‚è¿™æ„å‘³ç€æ‚¨çš„åº”ç”¨ç¨‹åºå°†åœ¨æ¯æ¬¡å‡»é”®æ—¶è°ƒç”¨ Redux çš„ reducer æ¥æ›´æ–°ä¸€ä¸ªæ–‡æœ¬æ¡†çš„å€¼ã€‚è¿™ä¸æ˜¯ä¸ªå¥½ä¸»æ„ã€‚

æˆ‘å–œæ¬¢ä»¥â€œFormikâ€çš„æ–¹å¼ç¼–å†™è¡¨å•ï¼Œä½†æ˜¯å¦‚æœæ‚¨å–œæ¬¢ redux-formï¼Œé‚£ä¹Ÿæ²¡é—®é¢˜ã€‚[![ğŸ˜‰](img/d01d77fce0ff5b3851e7fc16aa3e21dc.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--CDd67yc0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s.w.oimg/core/emoji/12.0.0-1/72x72/1f609.png)

## ç»“è®º

æ„å»ºè¡¨å•æ˜¯ React ä¸æ“…é•¿çš„äº‹æƒ…ä¹‹ä¸€ã€‚å¹¸è¿çš„æ˜¯ï¼ŒReact æœ‰ä¸€ä¸ªå¼€å‘äººå‘˜ç¤¾åŒºï¼Œä»–ä»¬äº’ç›¸å¸®åŠ©ï¼Œä½¿ç¼–å†™ä»£ç çš„è¿‡ç¨‹æ›´åŠ å®¹æ˜“ã€‚

å¦‚æœæ‚¨è¦åœ¨ React åº”ç”¨ç¨‹åºä¸­ç¼–å†™è®¸å¤šè¡¨å•ï¼ŒFormik æ— ç–‘æ˜¯å¿…ä¸å¯å°‘çš„å¼€æºåº“ä¹‹ä¸€ã€‚å®ƒé€šè¿‡åƒ`<Field />`å’Œ`<Form />`è¿™æ ·çš„ç»„ä»¶æŠ½è±¡å‡ºè¡¨å•çš„ä¸€éƒ¨åˆ†ï¼Œä»è€ŒçœŸæ­£åŠ é€Ÿäº†æ‚¨çš„å¼€å‘è¿‡ç¨‹å¹¶å‡å°‘äº†æ ·æ¿ä»£ç ã€‚

è™½ç„¶æ™®é€šçš„ React è¡¨å•è¦æ±‚æ‚¨æŒ‡å®šè‡ªå·±çš„çŠ¶æ€å€¼å’Œæ–¹æ³•ï¼Œä½†æ˜¯æ‚¨å¯ä»¥ç®€å•åœ°å°† props ä¼ é€’ç»™`<Formik />`ç»„ä»¶æ¥åšåŒæ ·çš„äº‹æƒ…:å¤„ç†ç”¨æˆ·è¾“å…¥ã€éªŒè¯è¾“å…¥å’Œè¡¨å•æäº¤ã€‚

å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šå…³äº Formik çš„ä¿¡æ¯ï¼Œè¯·å‰å¾€æ–‡æ¡£æˆ–è§‚çœ‹å…¶åˆ›å»ºè€…çš„æ¼”ç¤ºã€‚æ„Ÿè°¢é˜…è¯»ï¼ã€T2[https://www.youtube.com/embed/oiNtnehlaTo](https://www.youtube.com/embed/oiNtnehlaTo)

* * *

## Plug: [LogRocket](https://logrocket.com/signup/) ï¼Œä¸€æ¬¾é€‚ç”¨äºç½‘ç»œåº”ç”¨çš„ DVR

[![LogRocket Dashboard Free Trial Banner](img/0abf868fe5ccbed99d71cb8d9e81ed98.png)](https://logrocket.com/signup/)

LogRocket æ˜¯ä¸€ä¸ªå‰ç«¯æ—¥å¿—å·¥å…·ï¼Œå¯ä»¥è®©ä½ å›æ”¾é—®é¢˜ï¼Œå°±åƒå®ƒä»¬å‘ç”Ÿåœ¨ä½ è‡ªå·±çš„æµè§ˆå™¨ä¸­ä¸€æ ·ã€‚LogRocket ä¸éœ€è¦çŒœæµ‹é”™è¯¯å‘ç”Ÿçš„åŸå› ï¼Œä¹Ÿä¸éœ€è¦å‘ç”¨æˆ·è¯¢é—®æˆªå›¾å’Œæ—¥å¿—è½¬å‚¨ï¼Œè€Œæ˜¯è®©æ‚¨é‡æ”¾ä¼šè¯ä»¥å¿«é€Ÿäº†è§£å“ªé‡Œå‡ºé”™äº†ã€‚å®ƒå¯ä»¥ä¸ä»»ä½•åº”ç”¨ç¨‹åºå®Œç¾é…åˆï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆæ¡†æ¶ï¼Œå¹¶ä¸”æœ‰æ’ä»¶å¯ä»¥è®°å½•æ¥è‡ª Reduxã€Vuex å’Œ@ngrx/store çš„é¢å¤–ä¸Šä¸‹æ–‡ã€‚

é™¤äº†è®°å½• Redux æ“ä½œå’ŒçŠ¶æ€ï¼ŒLogRocket è¿˜è®°å½•æ§åˆ¶å°æ—¥å¿—ã€JavaScript é”™è¯¯ã€å †æ ˆè·Ÿè¸ªã€å¸¦æœ‰å¤´+æ­£æ–‡çš„ç½‘ç»œè¯·æ±‚/å“åº”ã€æµè§ˆå™¨å…ƒæ•°æ®å’Œè‡ªå®šä¹‰æ—¥å¿—ã€‚å®ƒè¿˜ä½¿ç”¨ DOM æ¥è®°å½•é¡µé¢ä¸Šçš„ HTML å’Œ CSSï¼Œç”šè‡³ä¸ºæœ€å¤æ‚çš„å•é¡µé¢åº”ç”¨ç¨‹åºé‡æ–°åˆ›å»ºåƒç´ çº§å®Œç¾è§†é¢‘ã€‚

[å…è´¹è¯•ç”¨](https://logrocket.com/signup/)ã€‚

* * *

å¸–å­[ç”¨ Formik æ„å»ºæ›´å¥½çš„ååº”è¡¨å•](https://blog.logrocket.com/building-better-react-forms-with-formik/)æœ€å…ˆå‡ºç°åœ¨[åšå®¢](https://blog.logrocket.com)ä¸Šã€‚