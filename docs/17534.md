# ä»Šå¤©æˆ‘å­¦ä¹ äº†å¦‚ä½•ç”¨ CSS(å’Œ JavaScript)åˆ¶ä½œæ–‡æœ¬æ¸å˜åŠ¨ç”»

> åŸæ–‡:[https://dev . to/tchaflich/today-I-learn-how-to-animate-a-text-gradient-in-CSS-and-JavaScript-2ehp](https://dev.to/tchaflich/today-i-learned-how-to-animate-a-text-gradient-in-css-and-javascript-2ehp)

Clem Onojeghuo é€šè¿‡ Unsplash æ‹æ‘„çš„å°é¢ç…§ç‰‡ã€‚

### [](#im-very-sorry-and-youre-welcome)éå¸¸æŠ±æ­‰ã€‚ä¸å®¢æ°”ã€‚

[https://codepen.io/tchaflich/embed/rEjrrE?height=600&default-tab=result&embed-version=2](https://codepen.io/tchaflich/embed/rEjrrE?height=600&default-tab=result&embed-version=2)

çœ‹é‚£ä¸ªåå°å­*çªçª*ã€‚æˆ‘æƒ³æˆ‘è®©æˆ‘çš„ CPU ç€ç«äº†...å¯æ€œçš„ä¸œè¥¿çœŸçš„å°½åŠ›äº†ã€‚æˆ‘æ˜ç™½ä¸ºä»€ä¹ˆ CSS å¤§ä½¬ä»¬ç°åœ¨ä¸æƒ³è®©æˆ‘è¿™ä¹ˆåšäº†ã€‚

## ç¬¬ä¸€éƒ¨åˆ†:è·å–æ–‡æœ¬æ¸å˜ğŸŒˆ

æ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°è¿™éƒ¨åˆ†ä»£ç :

```
@mixin lead($one, $two, $three, $four, $five, $six) {
  background: linear-gradient(80deg, $one, $two, $three, $four, $five, $six);
  background-clip: text;
  text-fill-color: transparent;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°±æ˜¯è¿™åœºç¾éš¾ä¸­çœŸæ­£äº§ç”Ÿâ€œå½©è™¹æ–‡æœ¬â€çš„éƒ¨åˆ†ã€‚

`background`éƒ¨åˆ†åªæ˜¯ç”Ÿæˆæ¸å˜æœ¬èº«ï¼›ä½ ä»¥å‰å¯èƒ½åœ¨åˆ«å¤„è§è¿‡çš„å½©è™¹å‘•åã€‚å»æ‰ mixin ä¸­æ‰€æœ‰çš„`background-clip`å’Œ`text-fill`è¯¡è®¡ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·:

[![The text "happy pride month" in black with a rainbow gradient background.](../Images/af7ed5bbf9e67a20580ec0c1e79f6d5a.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--20K-24u9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/tp7qdpfcylxytg7ipxd3.PNG)

#### ä½¿æ–‡æœ¬çœ‹èµ·æ¥åƒèƒŒæ™¯çš„æ‰€æœ‰å…¶ä»–ä¸œè¥¿ã€‚

é€šå¸¸æƒ…å†µä¸‹ï¼Œ[èƒŒæ™¯å‰ªè¾‘å±æ€§](https://developer.mozilla.org/en-US/docs/Web/CSS/background-clip)ç”¨äºå¾®è°ƒè¾¹æ¡†å’Œå¡«å……ç­‰å‘¨å›´èƒŒæ™¯çš„å¤–è§‚ï¼Œä½†æ˜¯â€œæ–‡æœ¬â€å€¼éå¸¸ç¥å¥‡ã€‚

æ–‡æœ¬å¡«å……é¢œè‰²çš„*å¤§è‡´ç›¸å½“äºä½ çš„æ ‡å‡†å±æ€§`color`ã€‚(å¯¹äºè¿™æ”¯ç¬”ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨`color: transparent`ä»£æ›¿ï¼Œæˆ‘è¯•è¿‡äº†ï¼Œæ•ˆæœä¸é”™ã€‚)åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è®¾ç½®ä¸ºâ€œé€æ˜â€,è¿™æ ·æˆ‘ä»¬çš„èƒŒæ™¯å°±å¯ä»¥æ˜¾ç¤ºå‡ºæ¥ã€‚*

æ‰€ä»¥è¿™é‡Œå¾—åˆ°â€œå½©è™¹æ–‡æœ¬â€çš„æƒ…å†µæ˜¯:

*   èƒŒæ™¯å˜æˆäº†å½©è™¹
*   èƒŒæ™¯è¢«å‰ªè£ï¼Œä»¥ä¾¿åªæ˜¾ç¤ºé€šå¸¸è¢«æ–‡æœ¬è¦†ç›–çš„éƒ¨åˆ†
*   æ–‡æœ¬æ˜¯é€æ˜çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€è¿‡å®ƒçœ‹åˆ°èƒŒæ™¯

## ç¬¬äºŒéƒ¨åˆ†:ä½ å¯ä»¥åˆ¶ä½œä¸€ä¸ªèƒŒæ™¯åŠ¨ç”»ï¼Œä½†æ˜¯ä¸èƒ½åˆ¶ä½œæˆçº¿æ€§æ¸å˜

è¿™æ˜¯ä¸€åˆ‡å¼€å§‹åç¦»è½¨é“çš„åœ°æ–¹ã€‚æˆ‘çš„ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯åœ¨ä¸€ä¸ªå•ç‹¬çš„å®¹å™¨ä¸Šæ‰“ä¸Š`transition`ï¼Œç„¶åç»“æŸä¸€å¤©çš„å·¥ä½œï¼›è¿™å°†éœ€è¦å¤§çº¦äº”åˆ†é’Ÿï¼Œå…¶ä¸­å¤§éƒ¨åˆ†æ˜¯è°·æ­Œå¦‚ä½•ä½¿èƒŒæ™¯æ¸å˜å‰ªè¾‘ã€‚

***ç„¶è€Œ***

[https://codepen.io/tchaflich/embed/bPgmmB?height=600&default-tab=result&embed-version=2](https://codepen.io/tchaflich/embed/bPgmmB?height=600&default-tab=result&embed-version=2)

æ˜¯æ—¶å€™å°è¯•å¦ä¸€ç§ç­–ç•¥äº†ã€‚

```
<div id="main" class="container lead-red">
  HAPPY PRIDE MONTH
</div>
<div id="fade" class="container lead-orange">
  HAPPY PRIDE MONTH
</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç­‰ç­‰ï¼Œä¸ºä»€ä¹ˆæœ‰ä¸¤ä¸ª-

### [](#)ğŸ¤”

```
function intervalFunction() {
  rainbowify();
  setTimeout(intervalFunction, getNextTimeoutDuration());
};

intervalFunction(); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ åœ¨å¹•é—´ä¼‘æ¯æ—¶åšä»€ä¹ˆ-

# [](#-)ğŸ¤” ...ğŸ¤” ...ğŸ¤” ...

*å“¦ä¸*

è¦ç‚¹å¦‚ä¸‹:

æœ‰ä¸¤ä¸ªå‡ ä¹ç›¸åŒçš„ HTML å…ƒç´ ç›¸äº’é‡å ã€‚ç¬¬ä¸€ä¸ªï¼Œ`#main`ï¼Œåœ¨æœ€åº•å±‚ï¼Œä¸€ç›´å¯è§ï¼›å®ƒåœ¨æ¸å˜ä¹‹é—´ä»¥æ’å®šçš„ä¸é€æ˜åº¦â€œé—ªçƒâ€ã€‚ç¬¬äºŒä¸ªï¼Œ`#fade`ï¼Œåœ¨é¡¶å±‚ï¼Œä¸æ–­é—ªçƒ(å¯¹é½æ—¶)å’Œæ·¡å‡º(ä½¿ç”¨`opacity`å®ç°è¿‡æ¸¡çš„å¤–è§‚)ã€‚

è¿™ä¸¤ä¸ªä¸åœ¨åŒä¸€ä¸ªâ€œå½©è™¹å‘¨æœŸâ€ä¸Šâ€”â€”æ–‡æœ¬`#fade`æ¯”æ–‡æœ¬`#main`é¢†å…ˆä¸€ç§é¢œè‰²ã€‚JavaScript è¿è¡Œä¸€ä¸ªå¾ªç¯ï¼Œä½¿ç”¨ setInterval æ¥å¤„ç†è¿™ä¸¤ä¸ªå…ƒç´ ä¸Šçš„ç±»ï¼Œä»¥ä¿æŒé¢œè‰²ç§»åŠ¨ã€‚

é‚£ä¹Ÿæ²¡ç”¨ã€‚

## [](#part-three-blink-in-fade-out)ç¬¬ä¸‰éƒ¨åˆ†:é—ªç°ï¼Œæ·¡å‡º

æˆ‘çš„ä»£ç çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:åœ¨ä¸» setInterval å¾ªç¯ä¸­ï¼Œå°è¯•ç”¨ä¸€ä¸ªå°†è½¬åœºè®¡æ—¶å±æ€§è®¾ç½®ä¸º 0 æ¯«ç§’çš„`.halt`ç±»æ¥æš‚åœåŠ¨ç”»(æœ‰æ•ˆåœ°ç¦ç”¨è½¬åœº)ã€‚ç„¶åï¼Œæˆ‘å°†ä¸é€æ˜åº¦è®¾ç½®ä¸º 1ï¼Œè®©å®ƒâ€œé—ªçƒâ€ï¼Œå¹¶åˆ é™¤`.halt`ç±»ã€‚æˆ‘ä¼šå°†ä¸é€æ˜åº¦è®¾ç½®å› 0ï¼Œè®©è¿‡æ¸¡å‘æŒ¥å®ƒçš„é­”åŠ›ã€‚è¿™ä¸€åˆ‡ç«‹åˆ»å‘ç”Ÿäº†ï¼Œåªç”¨äº†å¤§çº¦å››è¡Œä»£ç ã€‚

å—¯ï¼Œ [CSS è½¬æ¢ä¸æ˜¯é‚£æ ·å·¥ä½œçš„](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Transitions/Using_CSS_transitions#JavaScript_examples)ã€‚ç»“æœæ˜¯ï¼Œä¸ºäº†è®©å®ƒè½¬æ¢ï¼Œæ¸²æŸ“å¼•æ“éœ€è¦å‡ æ¯«ç§’çš„æ—¶é—´æ¥å®Œæˆå®ƒçš„åŠ¨ä½œï¼Œè€Œä¸ç®¡å½“æ—¶å…ƒç´ çš„è½¬æ¢å±æ€§æ˜¯ä»€ä¹ˆã€‚

äº‹å®è¯æ˜ï¼Œå‡ ä¹ç«‹å³æ·»åŠ å’Œåˆ é™¤ä¸€ä¸ªç±»æ˜¯ä¸å¤Ÿçš„ã€‚

åœ¨æ”¾å¼ƒå¹¶å°è¯• JavaScript ä¹‹å‰ï¼Œæˆ‘æ›¾ç»å°è¯•è¿‡è¿‡æ¸¡æ—¶é—´å’Œå…¶ä»– CSSã€‚æœ€åˆçš„ JS æ”»å‡»æ˜¯åœ¨æˆ‘ç°æœ‰çš„ setInterval å¾ªç¯ä¸­ä½¿ç”¨ä¸€ä¸ª`setTimeout( ... , 20)`,æˆåŠŸäº†...å¤§çº¦ 95%çš„æ—¶é—´ã€‚å°†è¶…æ—¶è®¾ç½®å¾—è¾ƒä½ä¼šå¯¼è‡´è¿‡æ¸¡è·Ÿä¸ä¸Šè€Œæ–­æ–­ç»­ç»­ï¼Œè€Œå°†è¶…æ—¶è®¾ç½®å¾—è¾ƒé«˜ä¼šå¯¼è‡´åŠ¨ç”»ä¸­éå¸¸æ˜æ˜¾çš„åœé¡¿ã€‚ç„¶è€Œï¼Œåˆ°å¤„éƒ½æ˜¯å¥‡æ€ªçš„ç¥å¥‡æ•°å­—å’Œ Blinky McBlinkerton çš„å¶å°”é€ è®¿å¹¶ä¸æ˜¯æˆ‘æƒ³è¦ç¦»å¼€ T2 çš„åœ°æ–¹...

## [](#part-four-reducing-the-juddering)ç¬¬å››éƒ¨åˆ†:å‡å°‘æŠ–åŠ¨

æˆ‘æƒ³æ¶ˆé™¤çš„ç¬¬ä¸€éƒ¨åˆ†æ˜¯ç¥å¥‡çš„ 20 æ¯«ç§’è¶…æ—¶ã€‚æˆ‘åœ¨è°·æ­Œä¸Šæœç´¢äº†å¾ˆä¹…ï¼Œæ‰¾åˆ°äº†è¿™ä¸ª:

[åœ¨åˆ é™¤å’Œæ·»åŠ ç±»åä¹‹é—´è§¦å‘å›æµã€‚](https://css-tricks.com/restart-css-animation/#article-header-id-0)

è¯´æ˜äº†è¿™ä¸€ç‚¹:

```
fade.classList.add("halt");
fade.classList.add("hide");
fade.classList.remove("lead-" + rainbow[(i + 1) % ilen]);
fade.classList.add("lead-" + rainbow[(i + 2) % ilen]);

void fade.offsetWidth; // <- this one!

fade.classList.remove("halt");
fade.classList.remove("hide"); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸‹ä¸€ä»¶æˆ‘è®¤ä¸ºæˆ‘åº”è¯¥æå‰è®¡åˆ’çš„å¥‡æ€ªçš„äº‹æƒ…æ˜¯ [JS å®šæ—¶å™¨æ¼‚ç§»](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout#Reasons_for_delays_longer_than_specified)ã€‚æˆ‘ä»¥å‰åœ¨åˆ¶ä½œæ—¥ç¨‹è¡¨å’Œæ—¶é’Ÿæ—¶è§è¿‡è¿™ç§æƒ…å†µï¼›è§„å®šçš„ä¸€æ¯«ç§’åœ¨ç°å®ä¸­å¹¶ä¸æ€»æ˜¯*ä¸€æ¯«ç§’ï¼Œå› æ­¤ä»»ä½•é—´éš”éƒ½ä¸å¯é¿å…åœ°ä¼šç¦»å‡†ç¡®åº¦è¶Šæ¥è¶Šè¿œã€‚å› ä¸ºæˆ‘åœ¨æˆ‘çš„ SCSS å’Œæˆ‘çš„ JS ä¸­ç¡¬ç¼–ç äº†ç›¸åŒçš„è¶…æ—¶ï¼Œå¦‚æœå®ƒä»¬èƒ½ä¸€è‡´åœ°æ’é˜Ÿï¼Œçœ‹èµ·æ¥è‚¯å®šä¼šæ›´å¥½ã€‚è¿™å¯ä»¥é˜²æ­¢è¿›ä¸€æ­¥çš„åœé¡¿ã€å£åƒç­‰ã€‚ç”±äºå®šæ—¶å™¨æ¼‚ç§»ã€‚*

ä¸ºæ­¤ï¼Œæˆ‘ä½¿ç”¨ setTimeout è€Œä¸æ˜¯ setIntervalï¼Œå¹¶è®© Timeout è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è°ƒç”¨å¦ä¸€ä¸ªè¶…æ—¶(æœ‰æ•ˆåœ°åˆ›å»ºä¸€ä¸ªè¶…æ—¶é—´éš”)ã€‚æ¯æ¬¡è¶…æ—¶éƒ½ä¼šè®°å½•å…¶å¼€å§‹æ—¶é—´ï¼Œå¹¶è®°å½•ä¸ä¸Šæ¬¡è¶…æ—¶çš„â€œåå·®â€,ç„¶åè‡ªæˆ‘ä¿®æ­£ä»¥å°è¯•æ›´å‡†ç¡®åœ°è¾¾åˆ°é•¿æœŸç›®æ ‡ã€‚å¦‚æœæˆ‘è½¬å‘ç±»ä¼¼äº`@keyframes`çš„ä¸œè¥¿ï¼Œè¿™è‚¯å®šä¼šå¾ˆæœ‰ç”¨ã€‚

# [](#in-conclusion)æ€»ä¹‹:

[![Thomas the tank engine side-eyeing the distance, captioned "Thomas had never seen such a mess."](../Images/190ca4c9f4c2902fe0587ec7e3320185.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--kKwABDgG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://data.whicdn.com/images/300811981/large.png)

è¿™æ˜¯ä¸å¿…è¦çš„å¤æ‚å’Œè¿è¡Œåƒç³–èœœåœ¨å†¬å¤©ã€‚å°±åšä¸ª gif ä»€ä¹ˆçš„ã€‚

(ETA:åç»­[æ­¤å¤„](https://dev.to/tchaflich/how-to-actually-animate-a-text-gradient-in-css-3a33)ã€‚å¦‚æœå‡ºäºæŸç§åŸå› ä½ æƒ³*å®é™…ä¸Š*è¿™æ ·åš...)

ä½†æˆ‘åšåˆ°äº†ï¼ŒCSS éœ¸ä¸»ä»¬ã€‚æˆ‘æ‰“è´¥äº†ä½ ã€‚æˆ‘èµ¢äº†ã€‚