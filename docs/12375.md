# ä»”ç»†çœ‹çœ‹ Go çš„è¿½åŠ åŠŸèƒ½

> åŸæ–‡:[https://dev . to/andyhaskell/a-closer-look-at-go-s-slice-append-function-3bhb](https://dev.to/andyhaskell/a-closer-look-at-go-s-slice-append-function-3bhb)

å‘æ•°ç»„å’Œç±»ä¼¼æ•°ç»„çš„å¯¹è±¡æ·»åŠ é¡¹åœ¨è®¸å¤šç¼–ç¨‹è¯­è¨€ä¸­å¾ˆå¸¸è§ï¼Œåƒ JavaScript çš„`Array.push`å’Œ Python çš„`List.append`è¿™æ ·çš„å‡½æ•°å¯ä»¥æ·»åŠ é¡¹ã€‚åœ¨ Go ä¸­ï¼Œå‘å…¶åˆ‡ç‰‡ç±»å‹æ·»åŠ é¡¹ç›®çš„å‡½æ•°è¢«ç§°ä¸º`append`ï¼Œå®ƒçœ‹èµ·æ¥éå¸¸ç±»ä¼¼äºæ‚¨ä»å¦ä¸€ç§è¯­è¨€ä¸­æ‰€æœŸæœ›çš„ã€‚

```
var numbers []int
numbers = append(numbers, 250)
numbers = append(numbers, 2071)
numbers = append(numbers, 1123)
// logs [250, 2071, 1123]
fmt.Println(numbers) 
```

åœ¨è¿™ä¸ªä»£ç ç‰‡æ®µä¸­ï¼Œæˆ‘ä»¬å°†æ•°å­— 250ã€2071 å’Œ 1123 æ·»åŠ åˆ°ä¸€ç‰‡ int ä¸­ï¼Œç„¶åæ‰“å°å‡ºå®ƒçš„å†…å®¹ã€‚

å¤§å¤šæ•°æ—¶å€™ï¼Œå¾ˆå®¹æ˜“è®¤ä¸º`append`åªæ˜¯å°†é¡¹ç›®æ·»åŠ åˆ°åˆ‡ç‰‡ä¸Šã€‚ç„¶è€Œï¼Œå½“ä½ è¿½åŠ åˆ°ä¸€ä¸ªç‰‡æ—¶ï¼ŒçŸ¥é“åœ¨å¹•åå‘ç”Ÿäº†ä»€ä¹ˆæœ‰åŠ©äºä½ ç¼–å†™è¿è¡Œæ›´å¿«çš„ Go ä»£ç ï¼Œå¹¶é¿å…ä½¿ç”¨ç‰‡å’Œè¿½åŠ å‡½æ•°æ—¶å®¹æ˜“é”™è¿‡çš„é™·é˜±ã€‚æ‰€ä»¥åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä»”ç»†çœ‹çœ‹å½“ä½ è¿è¡Œ`append`æ—¶ä½ çš„è®¡ç®—æœºåœ¨åšä»€ä¹ˆã€‚

## [](#watching-a-slice-grow)çœ‹ç€ä¸€ç‰‡æˆé•¿

å½“ä½ æœ‰ä¸€ç‰‡æ—¶ï¼Œå®ƒèƒ½å‘Šè¯‰ä½ äº”ä»¶äº‹:

ğŸ›å®ƒçš„é•¿åº¦ï¼›`len(slice)`
ğŸ“¦å…¶å®¹é‡ï¼›`cap(slice)`
ğŸŠé‡Œé¢æœ‰ä»€ä¹ˆï¼›`fmt.Sprintf("%v", slice)`T7ã€‘ğŸ—ºï¸åœ¨å“ªé‡Œï¼Œåœ¨ä½ ç”µè„‘çš„å†…å­˜é‡Œï¼Œå®ƒåœ¨å“ªé‡Œï¼›`fmt.Sprintf("%p", slice)`
â“å…¶ç‰©å“æ˜¯ä»€ä¹ˆç±»å‹ï¼›`fmt.Sprintf("%T", slice)`

å› æ­¤ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚æœæˆ‘ä»¬å‘ä¸€ä¸ªåˆ‡ç‰‡è¿½åŠ äº”æ¬¡ï¼Œå‰å››ä¸ªä¼šå‘ç”Ÿä»€ä¹ˆ:

```
var numbers []int
for i := 0; i < 5; i++  {
    numbers = append(numbers, i)
    fmt.Printf("address: %p, length: %d, capacity: %d, items: %v\n",
        numbers, len(numbers), cap(numbers), numbers)
} 
```

è¿™æ˜¯æˆ‘è¿è¡Œæ—¶çš„è¾“å‡ºã€‚ä»»ä½•æ—¶å€™è¿è¡Œå®ƒï¼Œå†…å­˜åœ°å€åº”è¯¥æ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯å…¶ä»–çš„éƒ½åº”è¯¥æ˜¯ç›¸åŒçš„:

```
address: 0xc00009a000, length: 1, capacity: 1, items: [0]
address: 0xc00009a030, length: 2, capacity: 2, items: [0 1]
address: 0xc0000a6000, length: 3, capacity: 4, items: [0 1 2]
address: 0xc0000a6000, length: 4, capacity: 4, items: [0 1 2 3]
address: 0xc000092080, length: 5, capacity: 8, items: [0 1 2 3 4] 
```

è¯·æ³¨æ„:

*   æ¯æ¬¡æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ¡ç›®æ—¶ï¼Œ`len(numbers)`å’Œ`numbers`åˆ‡ç‰‡ä¸­çš„æ¡ç›®éƒ½ä¼šæ”¹å˜ï¼Œæ­£å¦‚æˆ‘ä»¬æ‰€é¢„æ–™çš„é‚£æ ·ã€‚
*   æ¯æ¬¡`len(numbers)`å’Œ`cap(numbers)`ç›¸åŒæ—¶ï¼Œåˆ‡ç‰‡å¤„äºæœ€å¤§å®¹é‡ã€‚å¦‚æœæˆ‘ä»¬ä»¥æœ€å¤§å®¹é‡å‘ä¸€ä¸ªå­˜å‚¨ç‰‡æ·»åŠ å¦ä¸€ä¸ªé¡¹ç›®ï¼Œåˆ™è¯¥å­˜å‚¨ç‰‡çš„å®¹é‡ä¼šå¢åŠ ã€‚

```
address: 0xc0000a6000, length: 3, capacity: 4, items: [0 1 2]
address: 0xc0000a6000, length: 4, capacity: 4, items: [0 1 2 3]
address: 0xc000092080, length: 5, capacity: 8, items: [0 1 2 3 4] 
```

*   ä¸ä»…å¦‚æ­¤ï¼Œå½“æˆ‘ä»¬æ·»åŠ åˆ°æœ€å¤§å®¹é‡çš„å­˜å‚¨ç‰‡æ—¶ï¼Œå®ƒçš„**åœ°å€**ä¹Ÿä¼šæ”¹å˜ï¼

å…³äºæœ€åä¸€ç‚¹ï¼Œè¿™æ„å‘³ç€å½“ç¬¬äº”ä¸ªæ•°å­—åŠ åˆ°è¿™ä¸ªç‰‡ä¸Šæ—¶ï¼Œä½ çš„è®¡ç®—æœºä¸ºæˆ‘ä»¬çš„ç‰‡åˆ†é…äº†ä¸€ä¸ªæ–°çš„**å†…å­˜å—**ã€‚`numbers`å˜é‡ç°åœ¨æŒ‡å‘åˆšåˆšåˆ†é…ç»™è¯¥ç‰‡çš„å†…å­˜éƒ¨åˆ†ã€‚ä¸ºäº†ç†è§£æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦è¿™ç§åˆ†é…ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹åˆ‡ç‰‡èƒŒåçš„æ•°æ®ç»“æ„:Go arraysï¼

## [](#arrays-in-go)å›´æ£‹ä¸­çš„æ•°ç»„

å¦‚æœæ‚¨åœ¨ Go ä¸­ä½¿ç”¨è¿ç»­æœ‰åºçš„é¡¹ç›®é›†åˆï¼Œé‚£ä¹ˆæ‚¨å¾ˆå¯èƒ½ä½¿ç”¨çš„æ˜¯åˆ‡ç‰‡ã€‚ç„¶è€Œï¼Œè¿™å¹¶ä¸æ„å‘³ç€æ²¡æœ‰ Go æ•°ç»„è¿™æ ·çš„ä¸œè¥¿ã€‚Go ä½¿ç”¨æ•°ç»„ï¼Œä½†æˆ‘ä»¬ä¸ç»å¸¸ç›´æ¥ä½¿ç”¨å®ƒä»¬çš„åŸå› æ˜¯æ•°ç»„ä¸»è¦ç”¨äºå­˜å‚¨åˆ‡ç‰‡çš„åº•å±‚æ•°æ®ã€‚

Go æ•°ç»„å’Œ Go åˆ‡ç‰‡ä¹‹é—´çš„ä¸€ä¸ªå¾ˆå¤§çš„åŒºåˆ«æ˜¯ï¼Œå½“ä½ å£°æ˜ä¸€ä¸ªæ•°ç»„çš„æ—¶å€™ï¼Œä½ å¿…é¡»äº‹å…ˆå£°æ˜å®ƒçš„å¤§å°ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ç”¨ç±»å‹`[2]string`è€Œä¸æ˜¯`[]string`æ¥å£°æ˜ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„:

```
// A slice of strings, with two items in it
vehiclesSlice := []string{"car", "PokÃ©mon that knows SURF"}
// An array with two items in it, with its size set to two
vehiclesArray := [2]string{"car", "PokÃ©mon that knows SURF"} 
```

è¿™äº›çœ‹èµ·æ¥å¾ˆç›¸ä¼¼ï¼Œæ‚¨å¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼è®¿é—®æ•°ç»„æˆ–åˆ‡ç‰‡ä¸­çš„é¡¹ç›®ã€‚ä¾‹å¦‚ï¼Œè¦æŸ¥çœ‹æ‚¨çš„æ‰€æœ‰è½¦è¾†ï¼Œè¿™ä¸ªå¾ªç¯å¯¹`vehiclesSlice`å’Œ`vehiclesArray` :
éƒ½æœ‰æ•ˆ

```
for i, v := range vehiclesArray {
    if i == 0 {
        fmt.Printf("I get around by riding a %s\n", v)
    } else {
        fmt.Printf("My other ride is a %s\n", v)
    }
} 
```

ç„¶è€Œï¼Œé™¤äº†è¯­æ³•ä¹‹å¤–ï¼Œç‰‡å’Œæ•°ç»„ä¹‹é—´çš„æœ€å¤§åŒºåˆ«ï¼Œä»¥åŠä¸ºä»€ä¹ˆä½ å¿…é¡»é¢„å…ˆå£°æ˜æ•°ç»„çš„å¤§å°ï¼Œæ˜¯ç‰‡å¯ä»¥æ”¹å˜å¤§å°ï¼Œè€Œæ•°ç»„æ˜¯å›ºå®šå¤§å°çš„ã€‚å› ä¸ºä¸€ä¸ªå›ºå®šå¤§å°çš„æ•°ç»„æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ä¸­çš„é¡¹ç›®æ‰€åœ¨çš„ä½ç½®ï¼Œæ‰€ä»¥å½“æ‚¨ç”¨ä¸€è¡Œç±»ä¼¼äº`vehiclesSlice = append(vehiclesSlice, "Catbus")`çš„ä»£ç é™„åŠ åˆ°ä¸€ä¸ªåˆ‡ç‰‡æ—¶ï¼Œå®é™…å‘ç”Ÿçš„æƒ…å†µæ˜¯:

1)åˆ‡ç‰‡å¢åŠ å…¶é•¿åº¦ï¼Œå› æ­¤`len(vehicles)`ç°åœ¨æ˜¯ 3
2a)å¦‚æœåº•å±‚æ•°ç»„ä¸­è¿˜æœ‰å‰©ä½™ç©ºé—´ï¼Œæˆ‘ä»¬çš„åˆ‡ç‰‡æ²¡æœ‰è¾¾åˆ°æœ€å¤§å®¹é‡ï¼Œå› æ­¤è¯¥é¡¹åªæ˜¯è¢«æ·»åŠ åˆ°æ•°ç»„ä¸­çš„ä¸€ä¸ªæ–°æ§½ä¸­:

[![A Go Gopher holding a pencil, writing the word "Catbus" into the third slot in a Go slice](../Images/6c8d5db5292fdac33562a5268df6de0c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--2X2d7gVX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/9prhhj9xaol1op4vqglh.jpg)

2b)ä½†æ˜¯ï¼Œå¦‚æœåº•å±‚æ•°ç»„å·²ç»æ»¡äº†ï¼Œå› ä¸ºæ•°ç»„æ˜¯å›ºå®šå¤§å°çš„ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦åœ¨å†…å­˜ä¸­åˆ†é…ä¸€ä¸ªæ–°çš„æ›´å¤§çš„æ•°ç»„ï¼Œç„¶åå°†æ‰€æœ‰å†…å®¹å¤åˆ¶åˆ°å…¶ä¸­ã€‚

[![A Go Gopher pulling a lever to operate a crane, carrying a newly-allocated slice of strings](../Images/fe91a80546407dbff623d35bc9a6751a.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--6XW175k8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/a4fp18bnabi8a8n9vzg1.jpg)

æ— è®ºå“ªç§æ–¹å¼ï¼Œä»ä¸€ä¸ªåˆ‡ç‰‡çš„é¡¹ç›®æ¥çœ‹ï¼Œç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼›è¯¥åˆ‡ç‰‡å°†æœ‰ä¸€ä¸ªåŒ…å«è¿™ä¸ªç»˜åˆ¶è‰¯å¥½çš„ Catbus çš„åº•å±‚æ•°ç»„:

<figure>

[![A sloppy drawing of Catbus from My Neighbor Totoro, but it looks more like a turtle with ears](../Images/8d789a591682f4198bb9dc77163cf8cc.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--o5RdYqfn--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/o67yd7yab9mdb607m4cn.jpg)

<figcaption>Boston Museum of Fine Arts, here I come!</figcaption>

</figure>

## [](#slices-arrays-and-performance)åˆ‡ç‰‡ã€æ•°ç»„å’Œæ€§èƒ½

åœ¨åªæœ‰å‡ ä¸ªé¡¹çš„ä¾‹å­ä¸­ï¼Œæ‚¨ä¸ä¼šæ³¨æ„åˆ°è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯è¿½åŠ å¸¦æ¥çš„è¿™äº›é‡æ–°åˆ†é…å¾ˆé‡è¦çš„åŸå› æ˜¯ï¼Œå¦‚æœæ‚¨çš„åˆ‡ç‰‡ä¸­æœ‰æ•°ç™¾ä¸‡ä¸ªé¡¹ï¼Œæ‚¨å¯èƒ½ä¼šèŠ±è´¹å¤§é‡æ—¶é—´æ¥åˆ†é…å†…å­˜å’Œé‡æ–°å¤åˆ¶å®ƒã€‚ä»è®¡ç®—æœºçš„è§’åº¦æ¥çœ‹ï¼Œå†…å­˜åˆ†é…æ˜¯ä¸€é¡¹ç¼“æ…¢çš„æ“ä½œã€‚

è¦äº†è§£è¿™ä¸€ç‚¹ï¼Œè¯·å°è¯•è¿è¡Œè¿™ä¸ª Go æµ‹è¯•åŸºå‡†ï¼Œç”¨åäº¿ä¸ª 8 ä½æ•´æ•°å¡«å……ä¸€ä¸ªç‰‡(å¦‚æœæ‚¨æœ‰è¶…è¿‡ 4gb çš„ RAM)ã€‚

```
package main

import (
    "testing"
)

var aBillion=1000*1000*1000

// Add items to a slice with a billion-item array allocated up-front
func BenchmarkBillionPreallocatedSlice(b *testing.B) {
    b.ReportAllocs()

    for i := 0; i < b.N; i++ {
        items := make([]uint8, 0, aBillion)
        for j := 0; j < aBillion; j++ {
            items = append(items, 255)
        }
    }
}

// Add items to a slice that starts out nil; the underlying array gets
// re-allocated and re-copied several times
func BenchmarkBillionEmptySlice(b *testing.B) {
    b.ReportAllocs()

    for i := 0; i < b.N; i++ {
        var items []uint8
        for j := 0; j < aBillion; j++ {
            items = append(items, 255)
        }
    }
} 
```

åœ¨æˆ‘çš„ Mac ä¸Šï¼Œå°† 10 äº¿ä¸ªé¡¹ç›®æ·»åŠ åˆ°ä¸€ä¸ªæ²¡æœ‰é¢„å…ˆåˆ†é…å†…å­˜çš„ç‰‡ä¸Šé€šå¸¸éœ€è¦å¤§çº¦ 0.5 åˆ° 0.6 ç§’ï¼Œè€Œå°†å®ƒä»¬æ·»åŠ åˆ°ä¸€ä¸ªå¼€å§‹ä¸ºç©ºçš„ç‰‡ä¸Šéœ€è¦å¤§çº¦ 2.5 åˆ° 2.8 ç§’ï¼Œå¤„ç†çš„å­—èŠ‚æ•°æ˜¯åŸæ¥çš„å…­å€ï¼

```
goos: darwin
goarch: amd64
pkg: benchmark
BenchmarkBillionPreallocatedSlice-8            2     583063935 ns/op    1000005728 B/op        2 allocs/op
BenchmarkBillionEmptySlice-8                   1    2799137688 ns/op    6168961152 B/op       73 allocs/op 
```

è¿™æ˜¾ç¤ºäº†é¢å¤–çš„åˆ†é…å’Œé‡å¤çš„æ•°æ®å¤åˆ¶ä¼šé™ä½ä»£ç çš„é€Ÿåº¦ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨å¸Œæœ›æé«˜å¤§é‡ä½¿ç”¨ç‰‡çš„ä»£ç çš„æ€§èƒ½ï¼Œæ‚¨åº”è¯¥è€ƒè™‘é˜²æ­¢ä¸å¿…è¦çš„é‡æ–°åˆ†é…ã€‚

ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªä»£ç ç‰‡æ®µï¼Œæˆ‘ä»¬å¡«å……ä¸€ä¸ªåˆ‡ç‰‡ï¼Œç„¶åå¤„ç†å®ƒçš„æ•°æ®ï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨åˆ‡ç‰‡æ“ä½œç¬¦æ¥å…è®¸æˆ‘ä»¬åœ¨å†æ¬¡å¡«å……å®ƒæ—¶é‡ç”¨å®ƒçš„åº•å±‚æ•°ç»„ã€‚

```
s := make([]int, 0, 1000)

// Fill the slice up and then send the items in the slice on their merry way
// down our data pipeline.
for i := 0; i < 1000; i++ {
    s = append(s, i)
}
fmt.Printf("address: %p, length: %d, capacity: %d\n", s, len(s), cap(s))
processSliceItems(s)

// Set the slice's length to 0 so we can start re-filling it. We're still using
// the same underlying array, so we can append to it and fill it up as many
// times as we want without any new allocations slowing down our code's
// performance.
s = s[:0]
fmt.Printf("address: %p, length: %d, capacity: %d\n", s, len(s), cap(s))

for i := 0; i < 1000; i++ {
    s = append(s, i)
} 
```

å½“æˆ‘ä»¬è¯´`s = s[:0]`æ—¶ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬æ­£åœ¨ç»™`s`åˆ†é…ä¸€ä¸ªç‰‡ï¼Œä¸**ç›¸åŒçš„åº•å±‚æ•°ç»„**ï¼Œä½†æ˜¯ç‰‡çš„é•¿åº¦è¢«é‡ç½®ã€‚å› æ­¤ï¼Œä¸éœ€è¦è¿›è¡Œæ–°çš„å†…å­˜åˆ†é…ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸¤æ¬¡æ‰“å°æ—¶éƒ½ä¼šçœ‹åˆ°ç›¸åŒçš„åœ°å€ã€‚

[![Slice before and after emptying it with the slicing operator. In the slice before emptying, length is 1000 and capacity is 0\. In the slice after emptying, length is 0, capacity is 1000, and its underlying arrays still have the same items as before, with the caption "These numbers now are not in the slice, but are still in the underlying array"](../Images/0a970aa1598a5b1462156820c410b682.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--tvjiBpWL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/10f20rq07kc1cj23x153.jpg)

## [](#be-safe-with-appending-to-slices)è¿½åŠ åˆ‡ç‰‡å®‰å…¨

é™¤äº†æ€§èƒ½ä¹‹å¤–ï¼Œåˆ‡ç‰‡çš„åº•å±‚æ•°ç»„å¯¹æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ append è¿˜æœ‰å¦ä¸€ä¸ªå½±å“ã€‚é‚£å°±æ˜¯ä¸ºäº†å®‰å…¨åœ°ä½¿ç”¨ slice appendï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬è¦è¿½åŠ åˆ°æ•°ç»„ä¸­çš„ä»€ä¹ˆä½ç½®ã€‚å¦‚æœæˆ‘ä»¬æ‹¿è¿™ä¸ªæ ‘æ‡’å®¶åº­çš„è´­ç‰©æ¸…å•æ¥è¯´:

```
groceryList := []string{
    "Cecropia leaves",     // Leaves sloths eat a lot of
    "Hibiscus flowers",    // ğŸŒº They're like sloth chocolate!
    "Green Sheen shampoo", // How sloths groom the algae ecosystem in their fur
}

foodstuffs := groceryList[:2]
personalCare := groceryList[2:]

fmt.Println("Food grocery items:", foodstuffs)
fmt.Println("Personal care items:", personalCare) 
```

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿™çœ‹èµ·æ¥æ˜¯æ­£ç¡®çš„ï¼›æˆ‘ä»¬æ‰“å°å‡ºé£Ÿå“åˆ‡ç‰‡ï¼Œå¾—åˆ°å‰ä¸¤é¡¹ï¼Œæ‰“å°å‡ºä¸ªäººæŠ¤ç†åˆ‡ç‰‡ï¼Œå¾—åˆ°ç¬¬ä¸‰é¡¹ã€‚

åœ¨å†…å­˜çº§åˆ«ï¼Œæˆ‘ä»¬æœ‰ä¸‰ä¸ªå­˜å‚¨ç‰‡ï¼Œå®ƒä»¬éƒ½ä½¿ç”¨ç›¸åŒçš„åº•å±‚é˜µåˆ—:

[![An array of the strings "Cecropia leaves", "Hibiscus flowers", and "Green Sheen shampoo". There is a black bracket labeled "groceryList" below the array, a blue bracket labeled "foodstuffs" above the array's first two items, and a green bracket labeled "personalCare" above the array's third item](../Images/80a1a47475e94cfc60995d7e5a70fdc7.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--1g9l4j4F--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/js7rax3ddicsv14wgw10.jpg)

ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬è¯•å›¾æŠŠå®ƒé™„åŠ åˆ°é£Ÿç‰©åˆ‡ç‰‡ä¸Šï¼Œé‚£å°±éº»çƒ¦äº†ã€‚å¦‚æœæˆ‘ä»¬åƒè¿™æ ·åœ¨`foodstuffs`åé¢åŠ ä¸Šâ€œé³„æ¢¨â€(å¤ä»£çš„å·¨å‹æ ‘æ‡’å¸®åŠ©ä¼ æ’­äº†å°†æ¼”å˜æˆä»Šå¤©çš„é³„æ¢¨çš„ç§å­):

```
foodstuffs := groceryList[0:2]
personalCare := groceryList[2:3]

foodstuffs = append(foodstuffs, "Avocados")

fmt.Println("Food grocery items:", foodstuffs)
fmt.Println("Personal care items:", personalCare) 
```

ç„¶åï¼Œå³ä½¿è¯­å¥`foodstuffs := groceryList[0:2]`å’Œ`foodstuffs = append(foodstuffs, "Avocados")`çœ‹èµ·æ¥åƒæ˜¯åœ¨åˆ›å»ºæ–°çš„æ•°ç»„ï¼Œæˆ‘ä»¬ä»ç„¶åœ¨ä½¿ç”¨ç›¸åŒçš„å†…å­˜åŒºåŸŸã€‚è¿™æ„å‘³ç€å½“æˆ‘ä»¬è¿½åŠ åˆ°`foodstuffs`ç‰‡æ—¶ï¼Œæˆ‘ä»¬å®é™…ä¸Šåšçš„æ˜¯è¿™æ ·çš„:

[![An array of the strings "Cecropia leaves", "Hibiscus flowers", and "Green Sheen shampoo", with "Green Sheen shampoo" crossed out and replaced with "avocados". Now, the green bracket labeled "personalCare" still is only over the third item, but the blue bracket labeled "foodstuffs" is over all three items in the array.](../Images/24b65981fcdf9d158e3aba189eb6f8a9.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--SHwGbiOc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/bqw5fc91ckruyt4fqf9h.jpg)

æˆ‘ä»¬å°†`"Avocados"`æ”¾å…¥åº•å±‚æ•°ç»„çš„ç¬¬ä¸‰ä¸ªæ§½ï¼Œåœ¨å†…å­˜ä¸­ï¼Œè¿™ä¹Ÿæ˜¯`personalCare`ç‰‡çš„**ç¬¬ä¸€ä¸ªæ§½**çš„ä½ç½®ã€‚æ‰€ä»¥ç°åœ¨é£Ÿå“éƒ¨åˆ†æ˜¯`[]string{"Cecropia leaves", "Hibiscus flowers", "Avocados"}`ï¼Œä½†æ˜¯ä¸ªäººæŠ¤ç†éƒ¨åˆ†æ˜¯`[]string{"Avocados"}`ã€‚æˆ‘ä»¬å°†â€œç»¿è‰²å…‰æ³½æ´—å‘æ°´â€ä»æ•°ç»„ä¸­åˆ é™¤ï¼

å› æ­¤ï¼Œä¸ºäº†åœ¨ Go ä¸­å®‰å…¨åœ°æ·»åŠ åˆ°åˆ‡ç‰‡ä¸­ï¼Œæ‚¨éœ€è¦ç¡®ä¿æ·»åŠ åˆ°åŒ…å«æˆ‘ä»¬æ·»åŠ çš„æ¯ä¸ªé¡¹ç›®çš„åˆ‡ç‰‡ä¸­ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯`groceryList`ã€‚è¿™æ„å‘³ç€ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œ`foodstuffs`å’Œ`personalCare`ç‰‡åº”è¯¥åªè¢«è¯»å–ï¼Œè€Œä¸æ˜¯è¢«è¿½åŠ ã€‚

å¦‚æœéœ€è¦è¿½åŠ åˆ‡ç‰‡çš„å‰¯æœ¬ï¼Œå¯ä»¥ä½¿ç”¨ Go å†…ç½®çš„`copy`å‡½æ•°ï¼Œåƒè¿™æ ·:

```
// The foodstuffs slice now has a different underlying array from groceryList;
// we can now append to it without overwriting personalCare[0]!
foodstuffs := make([]string, 2)
copy(foodstuffs, groceryList[:2])
foodstuffs = append(foodstuffs, "Avocados")

fmt.Println("Food grocery items:", foodstuffs)
fmt.Println("Personal care items:", personalCare) 
```

ç°åœ¨ï¼Œéšç€`foodstuffs`æœ‰äº†ä¸åŒçš„åº•å±‚æ•°ç»„ï¼Œé³„æ¢¨å¯ä»¥æ·»åŠ åˆ°é£Ÿå“åˆ‡ç‰‡ä¸­ï¼Œè¿™ä¸ä¼šè¦†ç›–æ‚è´§åº—æ¸…å•ä¸Šçš„ç»¿è‰²å…‰æ³½æ´—å‘æ°´ï¼æ ‘æ‡’ä»¬å·²ç»å‡†å¤‡å¥½å»å•†åº—äº†ï¼Œä½ å·²ç»å‡†å¤‡å¥½ç”¨`append`ç¼–å†™æ—¢é«˜æ•ˆåˆå®‰å…¨çš„ä»£ç äº†ã€‚ç›´åˆ°ä¸‹ä¸€æ¬¡ï¼Œ

[![Two-toed sloth climbing a tree](../Images/9d257f2913ca1ee16c78f3e6d2400892.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--rOeizJE5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/j03q1hkjgn94dshxena8.jpg)

### [](#stay-slothful)å·æ‡’ï¼

ç»´åŸºç™¾ç§‘ä¸Šçš„[æ ‘æ‡’å›¾ç‰‡](https://en.wikipedia.org/wiki/Hoffmann%27s_two-toed_sloth#/media/File:Two-toed_sloth_Costa_Rica_-_cropped.jpg)å›¾ç‰‡æ¥æºäº Stevenjï¼ŒåŸæ‘„å½±å¸ˆæ˜¯ç»´åŸºç™¾ç§‘ä¸Šçš„ Leyo å›¾ç‰‡æˆæƒ [CC-BY-2.5](https://creativecommons.org/licenses/by/2.5/) ã€‚

æ ‡é¢˜æ¨ªå¹…ä¸Šçš„ Go Gopher æœ€åˆæ˜¯ç”± Renee French ç»˜åˆ¶çš„ï¼Œå¹¶è·å¾—äº† 3.0 CC çš„è®¸å¯ã€‚

å¦å¤–ï¼Œåœ¨ Nicole Archambault çš„[metro west freecode campers meetup](https://www.meetup.com/MetroWest-FreeCodeCampers/)ä¸­ï¼Œæˆ‘ç”»äº† Catbus å›¾æ¥æ¼”ç¤ºåˆ‡ç‰‡é‡æ–°åˆ†é…ï¼