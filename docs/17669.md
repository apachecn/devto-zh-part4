# Random TIL #1

> åŸæ–‡:[https://dev.to/amree/random-til-1-2g19](https://dev.to/amree/random-til-1-2g19)

æˆ‘æƒ³æˆ‘åº”è¯¥åˆ†äº«ä¸€äº›éšæœºçš„ï¼Œç›´åˆ°æˆ‘å¾—åˆ°æˆ‘çš„å·¥ä½œç¥¨ã€‚è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘è¿˜èƒ½åšæŒå¤šä¹…ğŸ˜†

## [](#same-radio-buttons-name)ç›¸åŒå•é€‰æŒ‰é’®çš„åç§°

æˆ‘å¶ç„¶å‘ç°äº†è¿™ä¸ªé—®é¢˜ï¼Œå•é€‰æŒ‰é’®æ²¡æœ‰è¢«é€‰ä¸­ï¼Œå³ä½¿å®ƒåº”è¯¥åŸºäº URL ä¸­ç»™å®šçš„å‚æ•°ã€‚

æ˜¾ç„¶ï¼Œé—®é¢˜æ˜¯å› ä¸ºæœ‰å¦ä¸€ä¸ªåŒåçš„å•é€‰æŒ‰é’®ï¼Œæ‰€ä»¥è¿™æ˜¯è¢«æ£€æŸ¥çš„é‚£ä¸ªã€‚æˆ‘ä»¬æœ‰ä¸¤ç»„å•é€‰æŒ‰é’®(æ¡Œé¢å’Œç§»åŠ¨)ï¼Œå®ƒä»¬éƒ½ä½¿ç”¨ç›¸åŒçš„åç§°ã€‚ç®€å•åœ°åœ¨å…¶ä¸­ä¸€ä¸ªé›†åˆçš„åç§°å‰åŠ ä¸Šå‰ç¼€å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜

## [](#circleci-artifact-for-capybara-screenshots)CircleCI ç¥å™¨ä¸ºæ°´è±šæˆªå›¾

äº‹å®è¯æ˜ï¼Œè®¿é—®é‚£äº›æ°´è±šæˆªå›¾éå¸¸å®¹æ˜“ã€‚åªéœ€åœ¨æœ¬åœ°é…ç½®ä¸­æŒ‡å®šæˆªå›¾æ‰€åœ¨çš„ç›®å½•ï¼Œå°±èƒ½ç¡®ä¿å®ƒå‡ºç°åœ¨ CircleCI
çš„å·¥ä»¶é€‰é¡¹å¡ä¸­

```
version: 2
jobs:
  build:
    docker:
      ...
    steps:
      ...
      ...
      - store_artifacts:
          path: /home/circleci/project/tmp/capybara 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#testing-feature-spec-in-mobile-view)åœ¨ç§»åŠ¨è§†å›¾ä¸­æµ‹è¯•åŠŸèƒ½è§„æ ¼

ä¸ºäº†æµ‹è¯•ä¸€äº›åªåœ¨æ‰‹æœºä¸Šå¯ç”¨çš„ç”¨æˆ·ç•Œé¢ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆè°ƒæ•´çª—å£çš„å¤§å°ï¼Œè¿™å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç æ¥å®ç°:

```
# spec/support/capybara_test_helper.rb
module CapybaraTestHelper
  def resize_to_mobile(width: 375, height: 667)
    page.current_window.resize_to(width, height)
  end
end

# spec/rails_helper.rb
RSpec.configure do |config|
  # ...
  config.include CapybaraTestHelper, type: :feature
end 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å¾ˆå¥½ï¼Œä½†æ˜¯å¾ˆæ˜æ˜¾ï¼ŒCapbybara æ²¡æœ‰æŠŠçª—å£çš„å¤§å°è°ƒæ•´å›åŸæ¥çš„å¤§å°ï¼Œæ‰€ä»¥ï¼Œä½ çš„çœ¼é•œå¯èƒ½ä¼šå¤±æ•ˆã€‚ä¸ºäº†ç¡®ä¿å®ƒèƒ½è¢«é‡ç½®ï¼Œè¯·å†æ¬¡å°†è¿™æ®µä»£ç æ”¾å…¥æ‚¨çš„ rails åŠ©æ‰‹:

```
RSpec.configure do |config|
  config.after(js: true, type: :feature) do
    page.current_window.resize_to(1600, 1024)
  end
end 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¥å‰ä½¿ç”¨è¿‡`.maximize`ï¼Œå®ƒåœ¨æœ¬åœ°å·¥ä½œæ­£å¸¸ï¼Œä½†æ˜¯åœ¨ CircleCI å¤±è´¥äº†ï¼Œå¯èƒ½æ˜¯å› ä¸ºæ–‡æ¡£ä¸­æåˆ°çš„ä¸æ”¯æŒçš„é©±åŠ¨ç¨‹åºã€‚æ‰€ä»¥ï¼Œæ˜ç¡®è®¾ç½®å®½åº¦å’Œé«˜åº¦ä¼šæœ‰æ‰€å¸®åŠ©ã€‚

## [](#capybara-parent-selector)æ°´è±šäº²ä½“é€‰æ‹©å™¨

åœ¨æˆ‘çš„ä¸€ä¸ªè§„èŒƒä¸­ï¼Œæˆ‘éœ€è¦è·å–æ–‡æœ¬å€¼ï¼Œè¿™æ˜¯æˆ‘å¯ä»¥å®šä½çš„å…ƒç´ çš„ç¬¬ä¸‰ä¸ªå…„å¼Ÿã€‚å› ä¸ºå®ƒæ˜¯å”¯ä¸€çš„æ–‡æœ¬ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥ä½¿ç”¨çˆ¶é€‰æ‹©å™¨å¹¶è°ƒç”¨`.text`æ¥è·å–å€¼ã€‚ä½¿ç”¨`.first(:xpath, '..')`å¸®åŠ©:

```
find(
  'input[name="meh"]:checked',
  visible: false
).first(:xpath, '..').text 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°±è¿™æ ·äº†ï¼Œä¼™è®¡ä»¬ã€‚å¸Œæœ›è¿™äº›ç¬”è®°èƒ½å¯¹æœªæ¥çš„âœŒï¸æœ‰æ‰€å¸®åŠ©