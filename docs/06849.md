# è®©æˆ‘ä»¬åœ¨ AWS ä¸Šè®¾ç½®ä¸€ä¸ªå…è´¹çš„ VPN æœåŠ¡å™¨ï¼Œä¸åˆ° 5 åˆ†é’ŸğŸ˜±ğŸ¤¯ğŸ”¥

> åŸæ–‡:[https://dev . to/ya shints/let-s-setup-a-VPN-server-for-free-on-AWS-under-5-min-1 mg4](https://dev.to/yashints/let-s-setup-a-vpn-server-for-free-on-aws-under-5-min-1mg4)

æœ‰æ—¶ä½ æƒ³åœ¨æ²¡æœ‰äººç›‘è§†çš„æƒ…å†µä¸‹è¿æ¥åˆ°äº’è”ç½‘ã€‚è¿™å¯èƒ½æ˜¯ç”±äºæ”¿åºœã€ISP ç­‰æ–½åŠ çš„é™åˆ¶ã€‚åœ¨ä½¿ç”¨äº’è”ç½‘æ—¶ä¿æŒéšç§å¯¹ä¸€äº›äººæ¥è¯´éå¸¸é‡è¦ï¼Œå¯¹æˆ‘ä¸ªäººæ¥è¯´ï¼Œè¿™ç§ä½“éªŒå°±æ˜¯ç»•è¿‡ Twitter ç­‰ç½‘ç«™å’Œ Telegram ç­‰è½¯ä»¶ä¸Šçš„ä¸€ä¸ªå¯ç¬‘çš„ä¼ æ„Ÿå™¨ã€‚

æ‰€ä»¥æˆ‘æƒ³ï¼Œå¯¹äºä¸€ä¸ªç½‘ç»œå¼€å‘è€…æ¥è¯´ï¼Œå®‰è£…ä¸€ä¸ª VPN æœåŠ¡å™¨æœ‰å¤šéš¾(å› ä¸ºæˆ‘ä¸æƒ³æ¯æœˆæ”¯ä»˜ 5 ç¾å…ƒ)ã€‚åœ¨è°·æ­Œæœç´¢äº†ä¸€ä¸‹ä¹‹åï¼Œæˆ‘å‘ç°ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ [AWS(äºšé©¬é€Šç½‘ç»œæœåŠ¡)](https://aws.amazon.com/)ä¸Šå…è´¹ä½¿ç”¨ [OpenVPN](https://openvpn.net/) æ¥åšè¿™ä»¶äº‹ã€‚æˆ‘å¼€å§‹è®¾ç½®å®ƒï¼Œå‡ åˆ†é’Ÿåï¼Œæˆ‘è®©å®ƒè¿è¡Œèµ·æ¥ã€‚

> OpenVPN æ˜¯ä¸€æ¬¾æµè¡Œçš„å¼€æºå·¥å…·ï¼Œç»è¿‡å……åˆ†æµ‹è¯•ï¼Œå¯ä¸ºæ‚¨æä¾›ç”Ÿäº§å°±ç»ªçš„ VPN è§£å†³æ–¹æ¡ˆã€‚

æ‰€ä»¥ä¸ºäº†ä¸å¿˜è®°æˆ‘æ˜¯å¦‚ä½•åšåˆ°çš„ï¼Œåƒå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘æƒ³è®©æˆ‘ä»¬å†™ç‚¹ä¸œè¥¿ï¼Œè°çŸ¥é“å‘¢ï¼Œä¹Ÿè®¸å¯¹ä½ ä¹Ÿæœ‰ç”¨ğŸ˜‰ã€‚

ä½ å‡†å¤‡å¥½äº†å—ï¼Ÿ

## [](#aws-console)AWS æ§åˆ¶å°

å¦‚æœæ‚¨åœ¨ [AWS(äºšé©¬é€Šç½‘ç»œæœåŠ¡)](https://aws.amazon.com/)ä¸Šæ²¡æœ‰è´¦æˆ·ï¼Œè¯·åˆ›å»ºä¸€ä¸ªã€‚è¿™æ˜¯å…è´¹çš„ï¼Œä½†æ˜¯ä½ éœ€è¦å‡†å¤‡å¥½ä½ çš„ä¿¡ç”¨å¡ä¿¡æ¯ã€‚

æ³¨å†Œåï¼Œç™»å½•å¹¶åœ¨æœåŠ¡èœå•ä¸‹å¯»æ‰¾ EC2(ä½ å¯ä»¥è¾“å…¥ï¼Œå®ƒä¼šåœ¨ä½ è¾“å…¥æ—¶è¿‡æ»¤æœåŠ¡)ã€‚

[![Selecting EC2 services from AWS console](../Images/f76afdda882cc4f5e91b6af092754333.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--5bHZybZJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/8je0hvs5jx68r1h33hly.jpg)

å•å‡» EC2ï¼Œæ‚¨å°†è¢«é‡å®šå‘åˆ°å®ƒçš„ä»ªè¡¨æ¿ã€‚å•å‡»åˆ›å»ºå®ä¾‹éƒ¨åˆ†ä¸‹çš„å¯åŠ¨å®ä¾‹æŒ‰é’®ã€‚

## [](#select-the-openvpn)é€‰æ‹© OpenVPN

è®¸å¤šæ–‡ç« å°†æŒ‡å¯¼æ‚¨è®¾ç½®ä¸€ä¸ªæ–°çš„ Linux VM å¹¶æ‰‹åŠ¨å®‰è£… OpenVPNã€‚ç„¶è€Œï¼Œäº‹æƒ…å·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼Œä¸€äº›å¯çˆ±çš„äººå·²ç»åœ¨ AWS å¸‚åœºä¸Šæ¨å‡ºäº†ç°æˆçš„æœåŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šé€‰æ‹©å®ƒã€‚

è¿›å…¥ä»ªè¡¨æ¿åï¼Œç‚¹å‡»å·¦ä¾§çš„`AWS Marketplace`èœå•ï¼Œé”®å…¥ OpenVPNï¼Œç„¶åæŒ‰ enter é”®ã€‚

[![OpenVPN in AWS Marketplace](../Images/177b79d715610fd744e7ce6d6600d0a7.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--C4spOoqp--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/tulweb56w4u3vt8ho1ne.jpg)

ç‚¹å‡»ç¬¬ä¸€ä¸ªå¸¦æœ‰`free tier eligible`å¾½ç« çš„æŒ‰é’®ã€‚

## [](#selecting-instance-type)é€‰æ‹©å®ä¾‹ç±»å‹

åœ¨ä¸‹ä¸€é¡µç‚¹å‡»ç»§ç»­ï¼Œå¹¶ä»å®ä¾‹ç±»å‹åˆ—è¡¨ä¸­é€‰æ‹©`t2.micro`ã€‚

[![Choosing free tier instance type](../Images/63a48c9ac496b56568015caa55119723.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--7OaRZFhV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/ubh9unuynmxyi979skxm.jpg)

åœ¨æ­¤é˜¶æ®µç‚¹å‡» ***æŸ¥çœ‹å¹¶å¯åŠ¨*** æŒ‰é’®ã€‚

## [](#launch-the-instance)å¯åŠ¨å®ä¾‹

ä»å¼¹å‡ºçª—å£ä¸­é€‰æ‹©é€šç”¨ SSDï¼Œç„¶åå•å‡»ä¸‹ä¸€æ­¥ã€‚ç°åœ¨ç‚¹å‡»`Launch`ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªå¼¹å‡ºçª—å£ï¼Œè¦æ±‚ä½ é€‰æ‹©ä¸€ä¸ªå¯†é’¥å¯¹ã€‚è¿™æ˜¯ä¸ºäº†è®©æ‚¨ç¨åè®¿é—®å®ä¾‹ã€‚

[![Select a key pair to access the instance](../Images/82b7a81f6fb190555b4d4eb7d1aa1b98.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--HBuf3p9U--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/uhwahn8dxwo8t1b5iorc.jpg)

é€‰æ‹©åˆ›å»ºæ–°çš„å¯†é’¥å¯¹(æˆ–ç°æœ‰çš„å¯†é’¥å¯¹ï¼Œå¦‚æœæ‚¨å·²ç»æœ‰äº†)ï¼Œè¾“å…¥åç§°å¹¶å•å‡»ä¸‹è½½å¯†é’¥å¯¹ã€‚

å°†`.pem`æ–‡ä»¶ä¿å­˜åœ¨å®‰å…¨çš„åœ°æ–¹ï¼Œå› ä¸ºè¿™å°±åƒæ˜¯ä½ æœåŠ¡å™¨çš„åé—¨ğŸ˜ã€‚å•å‡»å¯åŠ¨å®ä¾‹ï¼Œç­‰å¾…å®ä¾‹è¿›å…¥è¿è¡ŒçŠ¶æ€ã€‚

[![status](../Images/2fd0deaa010b81dcc901e031003a52ee.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--R8FCmE08--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/q93r3zgt2ty9sme8b1i6.jpg)

å•å‡»æŸ¥çœ‹å®ä¾‹ä»¥æŸ¥çœ‹å®ä¾‹åˆ—è¡¨ã€‚

[![Instance list](../Images/efdd58ada094135d02e9456059980cd2.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--hkEqeJJ0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/k2bxqeh7375se021jhmj.jpg)

é€‰æ‹©æ‚¨çš„å®ä¾‹ï¼Œç„¶åå•å‡»è¿æ¥ã€‚

## [](#preparation)å‡†å¤‡

æ‚¨å°†åœ¨å¼¹å‡ºçª—å£ä¸­çœ‹åˆ°ä¸€ç»„å…³äºå¦‚ä½•è¿æ¥åˆ°æ‚¨çš„å®ä¾‹çš„è¯´æ˜ã€‚

[![Instructions on how to connect](../Images/e1644bccf14eb809c71c3c98b31a0341.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--AEc3br_V--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/q5tkxgsm8nhdmhbj2nsf.jpg)

åœ¨æŒ‡ä»¤é›†ä¸­ï¼Œä»–ä»¬å‘Šè¯‰ä½ ä½¿ç”¨ [PuTTY](https://docs.aws.amazon.com/console/ec2/instances/connect/putty) è¿æ¥åˆ°ä½¿ç”¨`SSH`çš„å®ä¾‹ã€‚ç„¶è€Œï¼Œæˆ‘å·²ç»åœ¨`WSL`(Linux çš„ windows å­ç³»ç»Ÿ)ä¸­å®‰è£…äº† Ubuntuï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒã€‚å¦åˆ™ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ PuTTY ç”šè‡³ web æµè§ˆå™¨è¿æ¥ã€‚

åœ¨æˆ‘ä»¬åšä»»ä½•äº‹æƒ…ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæˆ‘ä»¬çš„ç§é’¥è®¾ç½®æƒé™ğŸ‘‰ğŸ½`.pem`ğŸ‘ˆğŸ½æ–‡ä»¶ï¼Œå¦åˆ™å®ƒä¸å…è®¸æ‚¨è¿æ¥ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Linux æˆ– Mac æœºå™¨ï¼Œåªéœ€è¿è¡Œä¸‹é¢çš„å‘½ä»¤:

```
chmod 400 {name-of-file}.pem 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åƒæˆ‘ä¸€æ ·çš„å…¶ä»–äººï¼Œå³å‡»`.pem`æ–‡ä»¶ï¼Œç‚¹å‡»*å®‰å…¨>æ¨è¿›*ã€‚ç„¶åå°†æ‰€æœ‰è€…æ›´æ”¹ä¸ºæ‚¨è‡ªå·±ï¼Œå•å‡»ç¦ç”¨ç»§æ‰¿å¹¶åˆ é™¤æ‰€æœ‰æƒé™ã€‚å•å‡»æ·»åŠ ï¼Œæ·»åŠ æ‚¨è‡ªå·±å¹¶ç»™äºˆå®Œå…¨æ§åˆ¶ã€‚

[![Setting the right permissions for private key](../Images/830c3380b21c99a4094ca0215e707a1a.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--EofJ6tRf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/bjhazj0pt1eoh1hkn3j1.jpg)

## [](#connecting)è¿æ¥

å®Œæˆåï¼Œæ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œé”®å…¥ bashï¼Œç„¶åè¾“å…¥ä»¥ä¸‹å‘½ä»¤:

```
sudo ssh -i "{name-of-file}.pem" openvpnas@{serveraddress}.compute.amazonaws.com 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸è¦å¿˜è®°å°†æ–‡ä»¶åæ›¿æ¢ä¸ºæ‚¨ä¹‹å‰é€‰æ‹©çš„åç§°ï¼Œå¹¶å°†æœåŠ¡å™¨åç§°æ›¿æ¢ä¸ºæ‚¨ä»å¼¹å‡ºçš„è¯´æ˜ä¸­è·å¾—çš„åç§°ã€‚

[![Connect prompts](../Images/cf803b430efa63a612502222f411131d.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--MGlnBWw4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/2vymhxiwu9r47r3sbxzo.jpg)

ä¸ºåè®®é”®å…¥ yesï¼Œç„¶ååªéœ€æŒ‰ enter é”®ç¡®è®¤æ‰€æœ‰é»˜è®¤å€¼ã€‚å½“æ‚¨åˆ°è¾¾ç»ˆç‚¹æ—¶ï¼Œæ›´æ”¹ç”¨äºç™»å½•çš„ç”¨æˆ·å¯†ç :

```
sudo passwd openvpn 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¾“å…¥ä¸¤æ¬¡æ–°å¯†ç ï¼Œä¸€åˆ‡å°±ç»ªã€‚æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨çª—å£ï¼Œè¾“å…¥`https://{server address}:943/admin`ï¼Œç”¨`openvpn`å’Œä½ åˆšåˆšè®¾ç½®çš„å¯†ç ç™»å½•ã€‚

## [](#tidy-up-a-few-settings)æ•´ç†ä¸€äº›è®¾ç½®

è¿›å…¥ OpenVPN çš„ç®¡ç†ä»ªè¡¨æ¿åï¼Œå•å‡»é…ç½®å¹¶åº”ç”¨ä»¥ä¸‹æ›´æ”¹:

*   æ›´æ”¹*çš„åˆ‡æ¢ï¼Œå®¢æˆ·ç«¯äº’è”ç½‘æµé‡æ˜¯å¦åº”è¯¥é€šè¿‡ VPN è·¯ç”±ï¼Ÿ*åˆ°**æ˜¯**
*   å°†*è®©å®¢æˆ·ç«¯ä½¿ç”¨ç‰¹å®šçš„ DNS æœåŠ¡å™¨*åˆ‡æ¢ä¸º**æ˜¯**
*   é€‰æ‹©è‡ªå®šä¹‰ DNS æœåŠ¡å™¨ï¼Œå¹¶å°†ç¬¬ä¸€ä¸ªæ¡†è®¾ç½®ä¸º`1.1.1.1` (CloudFlare DNSğŸ¦„)å’Œç¬¬äºŒä¸ªåˆ°`8.8.8.8`

ç°åœ¨ä¿å­˜è®¾ç½®ï¼Œç­‰å¾…é¡¶éƒ¨çš„å¼¹å‡ºçª—å£ï¼Œç„¶åå•å‡»å°†æ›´æ”¹åº”ç”¨åˆ°æœåŠ¡å™¨ã€‚

## [](#youre-good-to-go)ä½ å¯ä»¥èµ°äº†

ä½ éƒ½å‡†å¤‡å¥½äº†ã€‚ä½ ç°åœ¨å¯ä»¥è¿æ¥åˆ°ä½ è‡ªå·±çš„ VPN æœåŠ¡å™¨ï¼Œäº«å—ç½‘ä¸Šå†²æµªğŸ˜ã€‚åœ¨æ‚¨ä¹‹å‰æ‰“å¼€çš„æµè§ˆå™¨çª—å£çš„ç¬¬ä¸€é¡µä¸Šï¼Œæœ‰äº”ä¸ªé€‰é¡¹å¯ä»¥ä¸‹è½½é€‚ç”¨äºä¸åŒå¹³å°çš„ OpenVPN å®¢æˆ·ç«¯ã€‚å¦‚æœä½ ç‚¹å‡» windowsï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªé¢„å…ˆé…ç½®å¥½ä½ çš„æœåŠ¡å™¨åœ°å€çš„å®‰è£…ç¨‹åºã€‚åªéœ€è¾“å…¥ä½ çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œç§ã€‚

å¦‚æœä½ éœ€è¦ä¸€ä¸ªå…è´¹çš„ VPN æœåŠ¡å™¨è®¾ç½®ï¼Œå¸Œæœ›è¿™èƒ½å¸®åˆ°ä½ ã€‚