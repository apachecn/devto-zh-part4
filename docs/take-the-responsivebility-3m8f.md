# æ‰¿æ‹…è´£ä»»

> åŸæ–‡ï¼š<https://dev.to/thekashey/take-the-responsivebility-3m8f>

*   æ‰‹æœºã€‚å¹³æ¿ç”µè„‘ã€‚æ¡Œé¢ã€‚
*   è‚–åƒã€‚é£æ™¯ã€‚
*   å¼€å¯å¤œé—´æ¨¡å¼ã€‚ç„¶åç¦»å¼€ã€‚
*   é€‚åº”æ€§ã€‚ååº”çµæ•ã€‚
*   è´Ÿè´£ä»»ã€‚

ä»Šå¤©æ˜¯æ˜ŸæœŸå…­ã€‚ç¾ä¸½é—ªäº®ï¼Œæœ‰ç‚¹é£çš„æ—©æ™¨ã€‚è€Œä¸”æˆ‘å¿…é¡»å†™è¿™ç¯‡æ–‡ç« ï¼Œåªè¦æˆ‘æœ‰æƒåŠ›è¿™æ ·åšï¼Œæˆ‘å°±æœ‰è´£ä»»ã€‚

> è®©æˆ‘ä»¬æ›´æ·±å…¥åœ°äº†è§£ react åª’ä½“æŸ¥è¯¢å’Œä½¿ç”¨å®ƒä»¬çš„ä¸åŒæ–¹æ³•ï¼Œä»¥åŠåŸºæœ¬åº”ç”¨ç¨‹åºé€»è¾‘ï¼Œä»¥åŒ¹é…åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶è®¾å¤‡çš„å½“å‰çŠ¶æ€ã€‚è¿™å¯ä¸å®¹æ˜“ã€‚ä½ ä¸èƒ½åªé—®é—®é¢˜ï¼Œè€Œä¸æ˜¯æé—®è€…ã€‚

# @åª’ä½“

æˆ‘ä¸ç¡®å®šä½ æ˜¯å¦ç†Ÿæ‚‰ CSS @media è§„åˆ™ï¼Œæ‰€ä»¥æˆ‘ä¼šç®€å•è§£é‡Šä¸€ä¸‹å®ƒæ˜¯ä»€ä¹ˆã€‚

> å½“æ‚¨å¸Œæœ›**æ ¹æ®è®¾å¤‡çš„ä¸€èˆ¬ç±»å‹**(å¦‚æ‰“å°ä¸å±å¹•)æˆ–ç‰¹å®šç‰¹å¾å’Œå‚æ•°(å¦‚å±å¹•åˆ†è¾¨ç‡æˆ–æµè§ˆå™¨è§†çª—å®½åº¦)ä¿®æ”¹æ‚¨çš„ç«™ç‚¹æˆ–åº”ç”¨ç¨‹åºæ—¶ï¼Œåª’ä½“æŸ¥è¯¢éå¸¸æœ‰ç”¨ã€‚

åª’ä½“æŸ¥è¯¢å¯èƒ½å–å†³äº:å±å¹•å¤§å°ã€åƒç´ å¯†åº¦ã€å±å¹•ç±»å‹ã€ä½¿ç”¨çš„æŒ‡é’ˆè®¾å¤‡(é¼ æ ‡/è§¦æ‘¸)ã€ç”¨æˆ·è®¾ç½®(å¦‚å‡å°‘é¢œè‰²æˆ–åŠ¨ä½œ)å’Œè®¾å¤‡çºµæ¨ªæ¯”ã€‚è¿™ä¸»è¦æ˜¯ CSS çš„ä¸œè¥¿ã€‚

# ååŒå®šä½

å°± CSS è€Œè¨€ï¼Œæœ‰ä¸¤ç§å¸¸è§çš„æ–¹æ³•æ¥å¤„ç†ä¸åŒçš„åª’ä½“ç›®æ ‡ã€‚

*   åˆ†ç¦»
*   åœºåœ°å‡ºç§Ÿ

### æŒ‰ä»‹è´¨åˆ†è‰²

ä½¿ç”¨åˆ†ç¦»ï¼Œæ‚¨é¦–å…ˆéœ€è¦**ä¸ºæ‚¨çš„`main target`å®šä¹‰æ‰€æœ‰æ ·å¼**ï¼Œç„¶å*é€ä¸ªåª’ä½“*è¦†ç›–è¿™äº›å€¼ã€‚æœ‰æ—¶å€™ï¼Œå½“ä½ ä¸æƒ³è¦†ç›–å€¼æ—¶(*ä¸è¦æ’¤é”€ï¼Œåªåš*åŸåˆ™)â€”â€”ä½ ç”šè‡³å¯ä»¥è·³è¿‡ç¬¬ä¸€éƒ¨åˆ†ã€‚

> ä½¿ç”¨ç§»åŠ¨ä¼˜å…ˆçš„æ–¹æ³•ï¼Œå¾ˆå®¹æ˜“ä½¿ä¸€ä¸ªå¸ƒå±€åœ¨çª„å±å¹•ä¸Šå·¥ä½œè‰¯å¥½ï¼Œç„¶ååœ¨æ¡Œé¢ä¸Šâ€œæ’¤é”€â€å®ƒçš„å¤§éƒ¨åˆ†ã€‚ä½†æ˜¯è¿™å¾ˆæ£˜æ‰‹ï¼Œå› ä¸ºæ‚¨å¿…é¡»è·Ÿè¸ªåœ¨åª’ä½“æŸ¥è¯¢ä¹‹å¤–åšäº†ä»€ä¹ˆï¼Œ
> å¹¶åœ¨æ¡Œé¢åª’ä½“æŸ¥è¯¢ä¸­é‡ç½®è¿™äº›å€¼ã€‚ä½ æœ€ç»ˆä¹Ÿä¼šå†™å¾ˆå¤š CSS åªæ˜¯ä¸ºäº†é‡ç½®
> å€¼ï¼Œä½ æœ€ç»ˆä¼šåƒ margin-bottom: 0 ä¸€æ ·ç¦»å¼€ CSSï¼Œä½ ä¸ç¡®å®šæ˜¯ä»€ä¹ˆã€‚
> ä¸ºã€‚ä¾§å…ƒç´ åº”è¯¥åªå‡ºç°åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šã€‚
> æˆ‘ä»¬æ²¡æœ‰åœ¨æ‰€æœ‰å±å¹•ä¸Šé»˜è®¤åº”ç”¨è¾¹è·ï¼Œä¹Ÿæ²¡æœ‰åœ¨æ¡Œé¢ä¸Šåˆ é™¤è¾¹è·ï¼Œè€Œæ˜¯åªåœ¨æ‰‹æœºä¸Šåº”ç”¨ã€‚[æ°ç‘ç±³Â·æ‰˜é©¬æ–¯ï¼ŒCSS 44 åˆ†é’Ÿ](https://jgthms.com/css-in-44-minutes-ebook/)

**è§„åˆ™åœ¨æ¯ä¸ªä»‹è´¨çš„åŸºç¡€ä¸Šå…±å­˜**ã€‚

```
.box {
  position: absolute;
  left: 0;
  top: 0;
}

.bar {
  position: sticky;
  top: 0;
}

.button {
  composes: flex-center;
}

@media screen and (min-width: $tablet) {
  .box {
    top: 1rem;
  }

  .bar {
    justify-content: center;
    width: $pin-size;
  }
}

@media screen and (min-width: $desktop) {
  .box {
    top: 0rem;
  }

  .button {
   composes: flex-right;
  }
} 
```

*   ğŸ‘-æ˜“äºç†è§£ä¸åŒå±å¹•ä¹‹é—´çš„åŒºåˆ«
*   ğŸ‘-æ›´éš¾æ”¹å˜é£æ ¼ï¼Œå®¹æ˜“å¿˜è®°æ›´æ–°åª’ä½“è¦†ç›–ã€‚

### æŒ‰è§„åˆ™åˆ†éš”

åœ¨æŒ‰è§„åˆ™åˆ†ç¦»ä¸­ï¼Œä¸ä¸€ä¸ªè§„åˆ™ç›¸å…³çš„ä¸€åˆ‡éƒ½åº”è¯¥åœ¨**ä¸€ä¸ªè§„åˆ™**ä¸­å®šä¹‰ã€‚

**è§„åˆ™åœ¨æ¯ä¸ªé€‰æ‹©å™¨çš„åŸºç¡€ä¸Šæ”¾åœ¨ä¸€èµ·**ã€‚

```
.box {
  position: absolute;
  left: 0;
  top: 0;

  @media screen and (min-width: $tablet) {
    & {
      top: 1rem;
    }
  }

  @media screen and (min-width: $desktop) {
    & {
      top: 0rem;
    }
  }
}

.bar {
  position: sticky;
  top: 0;

  @media screen and (min-width: $tablet) {
    & {
      justify-content: center;
      width: $pin-size;
    }
  }
}

.button {
  composes: flex-center;

  @media screen and (min-width: $desktop) {
    .button {
      composes: flex-right;
    }
  }
} 
```

åº”ç”¨è¿™ç§æ¨¡å¼çš„æ–‡ä»¶å¯èƒ½çœ‹èµ·æ¥æ›´å¤§ï¼Œç„¶è€Œï¼Œåœ¨ CSSO(æˆ–ä»»ä½•å…¶ä»– CSS ä¼˜åŒ–å™¨)ä¹‹åï¼Œå®ƒä¼šè¢«*é‡æ–°æ ¼å¼åŒ–*ä¸º**æ¯åª’ä½“**æ ¼å¼ã€‚

*   ğŸ‘-æ˜“äºæ›´æ”¹æ ·å¼ã€ç§»åŠ¨æ ·å¼å’Œå…±äº«æ ·å¼ã€‚
*   ğŸ‘-æ›´éš¾ç†è§£ä¸€ä¸ªå±å¹•ä¸å¦ä¸€ä¸ªå±å¹•æœ‰ä½•ä¸åŒ

è¿™é‡Œçš„é€‰æ‹©æ˜¯éå¸¸ä¸ªäººåŒ–çš„ï¼Œä½†æ˜¯å¯¹äºç»„ä»¶æ–¹æ³•(åœ¨æ‚¨çœ‹æ¥)ï¼Œç¬¬äºŒç§æ–¹æ³•æ›´å¥½ã€‚å°¤å…¶æ˜¯ä»ç»´æŠ¤çš„è§’åº¦æ¥çœ‹ã€‚

å¯¹äº CSS ä¸–ç•Œæ¥è¯´ï¼Œå®šä½ã€ä¸€è‡´æ€§ã€è·ç¦»ã€è®¤çŸ¥è´Ÿè·å’Œæ¨¡å¼åŒ¹é…æ˜¯éå¸¸é‡è¦çš„äº‹æƒ…ã€‚æƒ³çŸ¥é“æ›´å¤šå—ï¼Ÿ

[![thekashey image](img/638fcfb14e5c451b9d2dc31d89e5b034.png)](/thekashey) [## ã€Šå“ˆåˆ©Â·æ³¢ç‰¹ä¸ CSS çš„ç§©åºã€‹

### å®‰ä¸œÂ·ç§‘å°”ç¥–è¯ºå¤« 3 æœˆ 25 æ—¥ 19 æ—¶ 10 åˆ†é˜…è¯»

#css #stylelint #order #styleguide](/thekashey/happy-potter-and-the-order-of-css-5ec)

æ— è®ºå¦‚ä½•â€”â€”ä» CSS çš„è§’åº¦æ¥çœ‹å¤„ç†è¿™ä¸ªæ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ï¼Œè€Œä¸”**è¯·ä¸€ç›´è¿™ä¹ˆåš**ï¼Œå¦‚æœå¯èƒ½çš„è¯ã€‚SSR ä¼šè¯´è°¢è°¢ï¼Œè¿˜æœ‰æµè§ˆå™¨ã€‚ä½†é‚£æ˜¯å…³äºååº”ï¼Ÿ

# HTML/React

React æœ‰ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œä¸»è¦æ¥è‡ªäº[å·¨å¤§çš„é¸¿æ²Ÿ](https://css-tricks.com/the-great-divide/)â€”â€”React å¼€å‘äººå‘˜ä¸(ä¹Ÿä¸éœ€è¦)ç†Ÿæ‚‰ CSSã€‚æ‰€ä»¥ä»–ä»¬å‘æ˜äº†è‡ªå·±çš„æ–¹æ³•ã€‚

è®©æˆ‘ä»¬ç”¨æœ€æµè¡Œçš„æ–¹å¼æ¥æ€è€ƒ:

### 1ğŸ‘‘æœ‰ååº”çš„

[React-responsive](https://github.com/contra/react-responsive) å®é™…ä¸Šæ˜¯éå¸¸å¤è€çš„å›è´­åè®®ï¼Œå¹¶éšç€æ—¶é—´çš„æ¨ç§»å‘ç”Ÿäº†ä¸€äº›å˜åŒ–ã€‚ä»Šå¤©å®ƒæœ‰`hooks`å’Œ`Components` API

```
const isDesktopOrLaptop = useMediaQuery({
  query: '(min-device-width: 1224px)'
})
const isBigScreen = useMediaQuery({ query: '(min-device-width: 1824px)' })

<MediaQuery minDeviceWidth={1224} device={{ deviceWidth: 1600 }}>
   <p>You are a desktop or laptop</p>
   <MediaQuery minDeviceWidth={1824}>
     <p>You also have a huge screen</p>
   </MediaQuery> </MediaQuery> 
```

æ¯ä¸ªç»„ä»¶æˆ–æŒ‚é’©éƒ½æ˜¯ä¸€ä¸ª**å•ä¸ª**æ“ä½œï¼Œæ²¡æœ‰`else`ç®±ã€‚

### 2ğŸ‘‘ååº”-åª’ä½“

[æ¥è‡ª`ReactTraining`çš„åª’ä½“](https://github.com/ReactTraining/react-media)â€”â€”ä½å±…ç¬¬äºŒã€‚

ç»„ä»¶ API æ˜¯ä¸» API

```
<Media query="(max-width: 599px)">
   {matches =>
     matches 
       ? <p>The document is less than 600px wide.</p>
       : <p>The document is at least 600px wide.</p>
   }
</Media> 
```

åŒæ ·ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æ˜¯ä¸€ä¸ª**å•ä¸ª**æ“ä½œï¼Œä½†æ˜¯è¿™æ¬¡æœ‰ä¸€ä¸ª`else`æ¡ˆä¾‹ã€‚

### 3ğŸ‘‘ç¬¬ä¸‰å

ç¬¬ä¸‰åå°†åœ¨ 3 ä¸ªå›¾ä¹¦é¦†ä¹‹é—´åˆ†å¼€ã€‚ä»–ä»¬éƒ½è¿œä¸å¦‚èµ¢å®¶å—æ¬¢è¿ï¼Œä½†ä»ç„¶ç›¸å½“å—æ¬¢è¿ã€‚

### 3/1 ååº”-å“åº”-æ··åˆ

è€Œç¬¬ä¸€ä¸ªå¾ˆå¥‡æ€ª(å´å¾ˆæµè¡Œ) [react-responsive-mixin](https://github.com/akiran/react-responsive-mixin) ã€‚è¿™ç”šè‡³ä¸ React 15 ä¸å…¼å®¹ã€‚çœŸçš„æ˜¯é‚£ä¹ˆè€çš„`createClass` mixinï¼Œä½†æ˜¯ä¾ç„¶æµè¡Œï¼Œä¾ç„¶ç®¡ç”¨

```
var Component = React.createClass({
  mixins: [ResponsiveMixin],
  getInitialState: function () {
    return { url: '/img/large.img' };
  },
  componentDidMount: function () {
    this.media({maxWidth: 600}, function () {
      this.setState({url: '/img/small.jpg'});
    }.bind(this));
  },
  render: function () {
    return <img src={this.state.url} />;
  }
}); 
```

### 3/2 ååº”-å°ºå¯¸

ç¬¬äºŒæˆ–ç¬¬ä¸‰- [ååº”-å°ºå¯¸](https://github.com/renatorib/react-sizes)ã€‚ä¸€ä¸ªç±»ä¼¼ redux çš„æŸ¥è¯¢â€œçŠ¶æ€â€ç®¡ç†å™¨

```
const mapSizesToProps = ({ width }) => ({
  isMobile: width < 480,
})

export default withSizes(mapSizesToProps)(MyComponent); 
```

### 3/3 ä½¿ç”¨-åª’ä½“

æœ€åæ˜¯[ä½¿ç”¨åª’ä½“](https://github.com/streamich/use-media)ï¼ŒåŸºæœ¬ä¸Šä¸è¶…è¿‡ä¸€ä¸ª`hook`

```
const Demo = () => {
  // Accepts an object of features to test
  const isWide = useMediaLayout({minWidth: 1000});
  // Or a regular media query string
  const reduceMotion = useMediaLayout('(prefers-reduced-motion: reduce)');

  return (
    <div>
      Screen is wide: {isWide ? 'ğŸ˜ƒ' : 'ğŸ˜¢'}
    </div>
  );
}; 
```

# æ¯”èµ›ç»“æŸï¼Œæ‰€æœ‰äººè¢«è§£é›‡ğŸ”¥

ä¸Šé¢æ‰€æœ‰çš„å›¾ä¹¦é¦†éƒ½åœ¨åšä¸€äº›éå¸¸éå¸¸é”™è¯¯çš„äº‹æƒ…ã€‚åŒ¹é…æŸ¥è¯¢ä¸æ˜¯æ‚¨æ‰€éœ€è¦çš„ã€‚

å†æ¬¡é—®ä»€ä¹ˆæ˜¯åª’ä½“æŸ¥è¯¢:

> å½“ä½ æƒ³æ ¹æ®è®¾å¤‡çš„åŠŸèƒ½**ä¿®æ”¹ä½ çš„ç½‘ç«™æˆ–åº”ç”¨ç¨‹åº**æ—¶ï¼Œåª’ä½“æŸ¥è¯¢éå¸¸æœ‰ç”¨

é‚£ä¹ˆ**ä¿®æ”¹**æ˜¯ä»€ä¹ˆæ„æ€ï¼ŒCSS çš„**æœ¯è¯­ä¸­çš„â€œåˆ†ç»„â€å¯¹ä½ æœ‰ä»€ä¹ˆå¸®åŠ©å‘¢ï¼Ÿ**

æˆ–è®¸ï¼Œè®©æˆ‘ä»¬ä»”ç»†æ£€æŸ¥ä¸€ä¸‹å¦‚ä½•ç”¨ HTML çš„æ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜ã€‚é€šè¿‡ HTML çš„æ–¹å¼ï¼Œæˆ‘å‡è®¾äº† Bootstrapï¼[å¼•å¯¼ç¨‹åºçš„è´£ä»»å®ç”¨ç¨‹åº](https://v4-alpha.getbootstrap.com/layout/responsive-utilities/)ã€‚

> *   This. The hidden-*-up class hides elements when the viewport is at a given breakpoint or wider. For example. Hidden-md-up hides elements in medium, large, and oversized viewports.
> *   This. The hidden-*-down class hides elements when the viewport is at a given breakpoint or less. For example. Hidden-md-down hides elements in super-small, small and medium viewports.

è¿™å¯¹äºä»»ä½•â€œåŸå­â€CSS æ¡†æ¶æ¥è¯´éƒ½æ˜¯ä¸€æ ·çš„â€”â€”åªéœ€å®šä¹‰å‡ ä¸ªç±»å°±å¯ä»¥äº†

```
// tailwind
<!-- Width of 16 by default, 32 on medium screens, and 48 on large screens -->
<img class="w-16 md:w-32 lg:w-48" src="...">

// bootstrap
<div class="col-md-6 col-lg-4 col-xl-3">
   <h2>HTML</h2>
</div>

// bulma
<div class="column is-half-mobile  is-one-quarter-tablet></div> 
```

è¿™é‡Œè‡³å…³é‡è¦çš„æ˜¯- **ä¸€åˆ‡éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰**ã€‚ä¸€ä¸ª`class`å®šä¹‰äº†ç»„ä»¶åº”è¯¥å¦‚ä½•åœ¨ç›®æ ‡è®¾å¤‡çš„æ‰€æœ‰å˜åŒ–ä¸­å·¥ä½œã€‚

è®©æˆ‘ä»¬æƒ³æƒ³è¿™ä¸ªã€‚

# æœ‰é™çŠ¶æ€æœº

æ˜¯å•Šï¼æˆ‘ä»¬ä» CSS å¼€å§‹ï¼Œåœ¨è¿™é‡Œ**å¹¶è¡Œæœ‰é™çŠ¶æ€æœº**å¼€å§‹å‘æŒ¥ä½œç”¨ã€‚

> æœ‰é™çŠ¶æ€æœºåœ¨ä¸€ä¸ªæ—¶é—´ç‚¹åªèƒ½å¤„äºä¸€ç§çŠ¶æ€ã€‚åªè¦**çŠ¶æ€**å¯¹äº React ç”¨æˆ·æ¥è¯´å¯èƒ½æ„å‘³ç€ä¸åŒçš„ä¸œè¥¿(æ¯”å¦‚`state`ï¼)è®©æˆ‘ä»¬ç”¨å¦ä¸€ä¸ªæœ¯è¯­â€”â€”a`Phase`ã€‚

*   æ°´å¯èƒ½æ˜¯å†·çƒ­çš„å—ï¼Ÿæ˜¯çš„ï¼Œä½†ä¸æ˜¯åŒæ—¶ã€‚
*   æ˜¾ç¤ºå™¨å¯ä»¥åˆå®½åˆå°å—ï¼Ÿæ˜¯çš„ï¼Œä½†ä¸æ˜¯åŒæ—¶ã€‚
*   æ–¹å‘ä¼šä¸åŒå—ï¼Ÿæ˜¯çš„ï¼Œä½†ä¸æ˜¯åŒæ—¶ã€‚

è®¾å¤‡ç”±è®¸å¤šä¸åŒçš„çŠ¶æ€è¡¨ç¤ºï¼Œæœ‰äº›æ˜¯ç®€å•çš„å¸ƒå°”å‹ï¼Œä½†æœ‰äº›æ›´å¤æ‚ï¼Œå®ƒä»¬åŒæ—¶å¹¶å­˜ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨â€œå•ä¸€æŸ¥è¯¢â€æ¥å¤„ç†â€œå¸ƒå°”â€çŠ¶æ€ï¼Œä½†ä¸èƒ½å°†å…¶ç”¨äºåƒå±å¹•å¤§å°è¿™æ ·çš„çŠ¶æ€ï¼Œåªè¦å®ƒå¯ä»¥è¾¾åˆ° 5(ç®€å•ï¼)ç›®æ ‡ä¸åŒã€‚è¿™æ„å‘³ç€ä½ å¿…é¡»åŒæ—¶**åšå‡ºå¤šè¾¾ 5 ä¸ªå†³å®š**ã€‚å¥½å§ï¼Œæˆ‘ä»¬å°±åš 3 ä¸ªã€‚

```
<MediaMatcher
    mobile={"render for mobile"}
    tablet={"render for tablet"}
    desktop={"render desktop"}
/> 
const title = useMedia({
  mobile: "Hello",
  tablet: "Hello my friend",
  desktop: "Hello my dear friend, long time no see",
}); 
```

è¿™ä¸â€œæŒ‰è§„åˆ™åˆ†ç¦»â€çš„*å¹¶ç½®*æ˜¯ç›¸åŒçš„ï¼Œä¹Ÿå¯èƒ½ä¸â€œåŸå­ CSSâ€æ˜¯ç›¸åŒçš„ã€‚

æˆ–è®¸ï¼Œä¸€äº›é¢å¤–çš„ CSS ä¸–ç•Œæ¨¡å¼åº”è¯¥æ˜¯é€‚ç”¨çš„:

```
// would render "render for mobile" for the "missed" tablet
<MediaMatcher
    mobile={"render for mobile"}
    // tablet={"render for tablet"}
    desktop={"render desktop"}
/> 
// desktop would inherit "Hello my friend" from tablet
const title = useMedia({
  mobile: "Hello",
  tablet: "Hello my friend",
  // desktop: "Hello my dear friend, long time no see",
}); 
```

è§„åˆ™å¾ˆç®€å•- **é€‰æ‹©å·¦è¾¹çš„å€¼**ï¼Œä¹Ÿç§°ä¸º**ç§»åŠ¨ä¼˜å…ˆ**ã€‚ä½ ä¸å¯èƒ½â€œå¿˜è®°â€ä¸ºä¸€ä¸ªç‰¹å®šçš„ç›®æ ‡æä¾›ä¸€äº›å€¼ï¼Œå°¤å…¶æ˜¯å¦‚æœè¿™ä¸ªç›®æ ‡æ˜¨å¤©è¿˜ä¸å­˜åœ¨çš„è¯(ä½ çŸ¥é“ï¼Œè®¾è®¡å¸ˆå–œæ¬¢æ”¹å˜ä¸»æ„)ã€‚

> åª’ä½“åŒ¹é…ä¸åº”è¯¥åªæ˜¯ JavaScript ä¸­çš„**æ¡ä»¶**ã€‚åº”å½“æ˜¯**å†³å®š**ã€**å‰**ã€**å¼€å…³**ã€‚

ç°æœ‰çš„â€œåª’ä½“åŒ¹é…â€ç»™ä½ çš„èƒ½åŠ›*åŒ¹é…*ä¸€ä¸ª`media query`ï¼Œå…¶ä¸­ä¸€äº›è®©åœ¨`else`åˆ†æ”¯åšç‚¹ä»€ä¹ˆã€‚

æ­£å¦‚æˆ‘ä¸Šé¢æåˆ°çš„ï¼ŒåŸºäºå¤§å°çš„åª’ä½“æŸ¥è¯¢å¯èƒ½éœ€è¦åœ¨ä¸€ä¸ªåœ°æ–¹åšå‡ºä¸¤ä¸ªä»¥ä¸Šçš„å†³å®šã€‚ç„¶è€Œï¼Œå­˜åœ¨åª’ä½“åŒ¹é…çš„å­é›†ï¼Œå…¶ä¸­é€»è¾‘ä»ç„¶æ˜¯**äºŒè¿›åˆ¶**ï¼Œä¸ç®¡å®é™…ä¸Šæœ‰å¤šå°‘ä¸ª`phases`ã€‚æ˜¯`Above`ï¼Œè¿˜æœ‰`Below`ã€‚æˆ–è€…`Display-only`å’Œ`Dont-display`ã€‚

æœ‰äº›åº“ï¼Œåƒ [smooth-ui](https://smooth-ui.smooth-code.com/docs-utilities-breakpoint) æœ‰`Up`å’Œ`Down` **æ–­ç‚¹**ï¼Œé€šè¿‡ç»„åˆå®ƒä»¬å¯ä»¥è®©ä½ åŒ¹é…ä»»ä½•ä½ å¯èƒ½éœ€è¦çš„**é—´éš”**ã€‚

æˆ‘å¸Œæœ›åŒæ ·çš„â€œé—´éš”â€åœ¨æˆ‘è°ˆåˆ°çš„æ–¹æ³•ä¸­ä¹Ÿæ˜¯å¯è¡Œçš„ã€‚

```
// dont display on mobile
<MediaMatcher
    mobile={null}
    tablet={"something to render above mobile"}
/> 
// dont display on mobile
<MediaMatcher
    mobile={"something to render only `till tablet`(on mobile)"}
    tablet={null}
/> 
```

ä½ ä¹Ÿå¯ä»¥åˆ›å»º*ä¸ªå¯é€‰çš„*ä¸ªå·ï¼Œå› ä¸ºåª’ä½“å¯èƒ½ä¼šç»™ä½ é¢å¤–çš„ä¸œè¥¿:

```
const HoverMedia = createMediaMatcher({
  mouseDevice: "(hover: hover)",
  touchDevice: "(hover: none)",
});
// here is a trick - the order matters.
// we are putting a server("false") branch last, 
// so it would be a nearest "value to the left"

const MyComponent = () => {
  const autoFocus = HoverMedia.useMedia({
    touchDevice: false,
    mouseDevice: true,
  });

  // do not autofocus inputs on mobile
  // to prevent Virtual Keyboard opening
  return <input autoFocus={autoFocus}/> } 
```

ç”šè‡³å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„ä¸œè¥¿ä¹Ÿå¯ä»¥è¿™æ ·ç®¡ç†ã€‚æœ‰äº›ç»„ä»¶ä¸åº”åœ¨æœåŠ¡å™¨ç«¯å‘ˆç°ï¼Œæˆ–è€…å¯ä»¥åœ¨å®¢æˆ·ç«¯ä»¥â€œå…¶ä»–æ–¹å¼â€å‘ˆç°ã€‚

```
const SideMedia = createMediaMatcher({
  client: false,
  server: true,
});

// you can flip Server/Client only after "hydration" pass
// or SSR-ed HTML could not match CSR-ed one.
const SideMediaProvider = ({children}) => {
  const [isClient, setClient] = useState(false);
  useEffect(() => setClient(true), []);

  return (
    <SideMedia.Mock client={isClient}>
     {children}
    </SideMedia.Mock>
  )
}

const DisplayOnlyOnClient = ({children}) => {
  const display = SideMedia.pickMatch({
    client: true,
    server: false,
  });

  return display ? children : null;
} 
```

è¿˜æœ‰ä¸€ä»¶äº‹â€”â€”ä¸Šé¢æ‰€æœ‰çš„ä¾‹å­éƒ½æ¥è‡ªä¸€ä¸ªç°æœ‰çš„åº“ï¼Œå°½ç®¡å®ƒç¦»æµè¡Œè¿˜æœ‰ä¸€æ®µè·ç¦»ã€‚

## ![GitHub logo](img/a73f630113876d78cff79f59c2125b24.png)/[ååº”-åª’ä½“-æ¯”èµ›](https://github.com/thearnica/react-media-match)

### åšå‡ºè´Ÿè´£ä»»çš„ååº”â€”â€”å›½å®¶æœºå™¨æ”¯æŒåª’ä½“çš„è¯¢é—®

<article class="markdown-body entry-content container-lg" itemprop="text">

# ååº”-åª’ä½“-åŒ¹é…

[![Build Status](img/bbfd66e047589337b3a80f1faeac9914.png)](https://travis-ci.org/thearnica/react-media-match)[![coverage-badge](img/c2226cea9570e4bf1cd2bd86febd8420.png)](https://codecov.io/github/thearnica/react-media-match)[![NPM version](img/552cca03e30d00fc00dba84efabe0fc1.png)](https://www.npmjs.com/package/react-media-match)[![bundle size](img/08efd797f72efa7ca7439ac62f61655e.png)](https://bundlephobia.com/result?p=react-media-match)[![downloads](img/914fe9512cb81e68ca32c7e79f1336c4.png)](https://www.npmtrends.com/react-media-match)[![Greenkeeper badge](img/de3a4fc40eeb6419166522d402610219.png)](https://greenkeeper.io/)

åª’ä½“ç›®æ ‡å’Œâ€œä¼ æ„Ÿå™¨â€ä¸æ˜¯ç©å…·â€”â€”å®ƒä»¬å®šä¹‰äº†åº”ç”¨ç¨‹åºçš„**çŠ¶æ€**ã€‚åƒä¸€ä¸ªæœ‰é™çš„**çŠ¶æ€æœº** `state`æ•´ä½“å¤„ç†ã€‚ä¸è¦ä½¿ç”¨ååº”ä»‹è´¨æŸ¥è¯¢-ä½¿ç”¨ä»‹è´¨åŒ¹é…ã€‚

*   <g-emoji class="g-emoji" alias="package" fallback-src="https://github.githubassets.cimg/icons/emoji/unicode/1f4e6.png">ğŸ“¦</g-emoji>æ‰€æœ‰å¿…éœ€çš„åŒ¹é…å™¨éƒ½æ˜¯å†…ç½®çš„
*   <g-emoji class="g-emoji" alias="snake" fallback-src="https://github.githubassets.cimg/icons/emoji/unicode/1f40d.png">ğŸ</g-emoji>ç§»åŠ¨ä¼˜å…ˆâ€œæ— ç¼éš™â€ï¼Œè€Œ(ï¼)**æ— è™«**æ¥è¿‘ã€‚
*   <g-emoji class="g-emoji" alias="computer" fallback-src="https://github.githubassets.cimg/icons/emoji/unicode/1f4bb.png">ğŸ’»</g-emoji> SSR å‹å¥½ã€‚ä¸ºä»»ä½•è®¾å¤‡å®šåˆ¶ç›®æ ‡æ¸²æŸ“æ¨¡å¼å’Œ`SSR`ã€‚
*   <g-emoji class="g-emoji" alias="bulb" fallback-src="https://github.githubassets.cimg/icons/emoji/unicode/1f4a1.png">ğŸ’¡</g-emoji>æä¾›`Media Matchers`æ¥æ¸²æŸ“ç»„ä»¶ï¼Œæä¾›`Media Pickers`æ¥æ ¹æ®å½“å‰åª’ä½“é€‰æ‹©ä¸€ä¸ªå€¼ã€‚
*   <g-emoji class="g-emoji" alias="fishing_pole_and_fish" fallback-src="https://github.githubassets.cimg/icons/emoji/unicode/1f3a3.png">ğŸ£</g-emoji>ä¸º`pickers`æä¾›`hooks`æ¥å£
*   <g-emoji class="g-emoji" alias="brain" fallback-src="https://github.githubassets.cimg/icons/emoji/unicode/1f9e0.png">ğŸ§ </g-emoji> å¼€ç®±å³ç”¨çš„å¥½æ‰“å­—â€”â€”ç”¨æ‰“å­—ç¨¿å†™çš„
*   <g-emoji class="g-emoji" alias="rocket" fallback-src="https://github.githubassets.cimg/icons/emoji/unicode/1f680.png">ğŸš€</g-emoji>æ¯”é€šå¸¸æ›´é«˜çš„æ€§èƒ½â€”â€”åªæœ‰ä¸€ä¸ªé¡¶çº§æŸ¥è¯¢
*   ğŸ§¨ å¯æ§åŒ¹é…å™¨

### æ²™ç®±

[https://codesandbox.io/s/react-media-match-example-g28y3](https://codesandbox.io/s/react-media-match-example-g28y3)

# ä½¿ç”¨

ä½¿ç”¨é¢„æ„å»ºçš„åŒ¹é…å™¨æˆ–å®šä¹‰è‡ªå·±çš„åŒ¹é…å™¨

```
// custom
import { createMediaMatcher } from 'react-media-match';
const customMatcher = createMediaMatcher({
  portrait: '(orientation: portrait)',
  landscape: '(orientation: landscape)',
```

â€¦</article>

[View on GitHub](https://github.com/thearnica/react-media-match)

æˆ‘ä»¬åˆ›å»ºäº†`react-media-match`æ¥å¤„ç†**è®¾å¤‡çŠ¶æ€**ä½œä¸ºåº”ç”¨çŠ¶æ€ï¼Œè€Œä¸æ˜¯*åŒ¹é…éšæœºæŸ¥è¯¢*ã€‚æˆ‘ä»¬éå¸¸è´Ÿè´£åœ°å¤„ç†è´£ä»»é—®é¢˜ã€‚

### å…³äºæ€§èƒ½çš„è¯´æ˜

ç®€è€Œè¨€ä¹‹ï¼ŒAPI æœ‰ä¸¤ç§æ–¹æ³•

*   æœ€å¸¸è§çš„æ˜¯åœ¨ä½¿ç”¨çš„åœ°æ–¹æŒ‡å®š`media-query`ï¼Œæˆ–è€…ä»¥ä»»ä½•å…¶ä»–æ–¹å¼å¤„ç† resizeã€‚
*   ä¸å¤ªå¸¸è§çš„æ˜¯ä½¿ç”¨ä¸€ä¸ªä¸­å¤®å­˜å‚¨ï¼Œæ‰€æœ‰åŸºäº`redux`çš„åª’ä½“åº“ï¼Œå¦‚ [redux-mediaquery](https://github.com/Yaska/redux-mediaquery) éƒ½åœ¨è¿™ä¹ˆåšã€‚

ä¾‹å¦‚ï¼Œ`react-responsive`å’Œ`use-media`å°±æ˜¯è¿™æ ·å·¥ä½œçš„:

```
useMediaQuery({ query: '(min-device-width: 1824px)' }) 
```

`react-media`å®Œå…¨ç›¸åŒï¼Œå³ä½¿æ˜¯åŸºäºç»„ä»¶çš„ã€‚æ‚¨å¯ä»¥å‘ç»„ä»¶æä¾›ä»»ä½•æŸ¥è¯¢ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªç»„ä»¶éƒ½æ‹¥æœ‰è‡ªå·±çš„è®¢é˜…ã€‚

```
<Media query="(max-width: 599px)"> 
```

`react-sizes`ï¼Ÿæ¯ä¸ª`withSizes`éƒ½å°†`onResize`ç›‘å¬å™¨é™„åŠ åˆ°çª—å£ä¸Šå¹¶ç‹¬ç«‹è¡ŒåŠ¨ï¼Œå³ä½¿æ‰€æœ‰è®¢é˜…éƒ½åœ¨åšåŒæ ·çš„äº‹æƒ…ã€‚å¥–é‡‘- `react-sizes`ä¹Ÿ**èŠ‚æµ**è°ƒæ•´å›è°ƒã€‚
é‚£æ˜¯ä¸ª**é”™è¯¯**ã€‚æ›´å‡†ç¡®åœ°è¯´â€”â€”æ‰€æœ‰çš„å›¾ä¹¦é¦†éƒ½åœ¨åšé”™äº‹ã€‚

#### æ€ä¹ˆäº†ï¼Ÿ

è¯´æ¥è¯é•¿ï¼Œä½†æ˜¯ React å¯¹äºç”± *React æ§åˆ¶ä»£ç *(äº‹ä»¶å¤„ç†ç¨‹åºã€ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ç­‰)å’Œ**éæ§åˆ¶ä»£ç **å¼•èµ·çš„æ›´æ–°çš„å·¥ä½œæ–¹å¼ç•¥æœ‰ä¸åŒã€‚

å½“æ‚¨è°ƒç”¨ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å†…éƒ¨çš„`setState`æ—¶ï¼Œå®ƒä»€ä¹ˆä¹Ÿä¸åšï¼Œä½†æ˜¯è°ƒåº¦æ›´æ–°ï¼Œåœ¨å…¶ä»–è°ƒåº¦æ›´æ–°ä¸­ï¼Œå®ƒå°†åœ¨æ‚¨çš„ä»£ç è¿”å›*æ‰§è¡Œ*åæ‰§è¡Œã€‚

ä½†æ˜¯ï¼Œæ‚¨ä¸èƒ½ä½¿ç”¨ React å°†`resize`äº‹ä»¶ç›‘å¬å™¨æ·»åŠ åˆ°`window`ä¸­ï¼Œä¹Ÿä¸èƒ½åŒ¹é…`query`ã€‚å› æ­¤ï¼Œè¿™äº›å›è°ƒå°†ä»¥*ä¸å—æ§åˆ¶çš„*æ–¹å¼æ‰§è¡Œï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹`setState`å°†æ˜¯åŒæ­¥çš„ã€‚å¯¼è‡´å°½å¯èƒ½å¤šçš„çº§è”æ ‘æ›´æ–°ï¼Œå°½å¯èƒ½å¤šçš„*è¿æ¥çš„*ç»„ä»¶ã€‚

åªæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜:

*   ä½¿ç”¨ä¸€ä¸ªçœŸå®çš„æ¥æºï¼Œæ¯”å¦‚`redux`æˆ–è€…æŸä¸ªåŸºäº`Context`çš„çŠ¶æ€ï¼Œä½äºä½ çš„åº”ç”¨ä¹‹ä¸Šã€‚
*   ä½¿ç”¨å°šæœªè®°å½•ï¼Œä½†ç¨³å®šï¼Œå¹¶è¢«è®¸å¤šåº“é‡‡ç”¨`ReactDOM.unstable_batchedUpdates`å°†æ‰€æœ‰æ›´æ–°åˆå¹¶ä¸ºä¸€ä¸ª..

> ![Dan Abramov (on a vacation) profile image](img/e346240510296e836c980f8e525147e8.png)å°½ç®¡ä¸Šé¢è¯´å®ƒå¾ˆç¨³å®šã€‚21:00PM-2019 å¹´ 3 æœˆ 06 æ—¥[![Twitter reply action](img/269095962147c28351274afdd5486a48.png)](https://twitter.com/intent/tweet?in_reply_to=1103399900371447819)[![Twitter retweet action](img/771160ecf06ae3d4d7a7815c29c819c2.png)](https://twitter.com/intent/retweet?tweet_id=1103399900371447819)0[![Twitter like action](img/c077611ab2a5e0b4cd0c826ee7ae1e48.png)](https://twitter.com/intent/like?tweet_id=1103399900371447819)2

> æœ‰è¶£çš„äº‹å®â€”â€”è®¸å¤šåº“å®ç°äº†å›è°ƒèŠ‚æµï¼Œä½†æ˜¯å®ƒä»¬ä½¿å¾—æ€§èƒ½æ›´å·®ã€‚

* * *

æƒåŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§ã€‚ä½ åº”è¯¥å¯¹ä½ çš„åº”ç”¨ç¨‹åºçš„å“åº”æ–¹é¢æ›´åŠ è´Ÿè´£ï¼Œå¹¶ä¸”åƒè€ƒè™‘**çŠ¶æ€**ä¸€æ ·è€ƒè™‘åª’ä½“çš„è¯¢é—®ã€‚

**æ‰¿æ‹…è´£ä»»**ã€‚

> PS:å¦‚æœä½ ä¸å¤ªç¡®å®š React ç«¯ä¸ºä»€ä¹ˆéœ€è¦â€œå“åº”â€â€”â€”è¿™æ˜¯å¦ä¸€ç¯‡æ–‡ç« ã€‚