# è®©ä½ çš„ç”¨æˆ·ä¸ç”¨ç”¨äººå·¥æ™ºèƒ½æ‰“å­—ğŸ¤–

> åŸæ–‡ï¼š<https://dev.to/azure/save-your-users-from-typing-with-ai-33la>

æˆ‘ä¸€ç›´åœ¨ç© Azure å®šåˆ¶è§†è§‰æœåŠ¡ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„æœåŠ¡ï¼Œåªéœ€å‡ å¹…å›¾åƒå°±å¯ä»¥æ„å»ºå›¾åƒåˆ†ç±»å’Œå¯¹è±¡æ£€æµ‹æ¨¡å‹ã€‚ä¸ºäº†æ›´å®¹æ˜“åœ°æµ‹è¯•æˆ‘çš„æ¨¡å‹ï¼Œæˆ‘æƒ³å»ºç«‹ä¸€ä¸ªè¿æ¥åˆ°è‡ªå®šä¹‰è§†è§‰é¡¹ç›®çš„ç§»åŠ¨åº”ç”¨ç¨‹åºï¼Œå¹¶ä½¿ç”¨å®ƒæ¥åˆ†ç±»æˆ–æ£€æµ‹ä½¿ç”¨ç›¸æœºæ•è·çš„å›¾åƒä¸­çš„å¯¹è±¡ã€‚

[![The app running classifying an object](img/90815185a22efcf4fb6588c0f34c9f35.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--AvXB1mtM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/wh3ldfnwzzdiqhah2ihq.PNG)

è¿™ä¸ªåº”ç”¨éå¸¸ç®€å•ï¼Œå®ƒæ˜¯ä¸€ä¸ªä½¿ç”¨ç›¸æœºæ’ä»¶å’Œå®šåˆ¶è§†è§‰ SDK çš„ [Xamarin](https://dotnet.microsoft.com/apps/xamarin/?WT.mc_id=devto-blog-jabenn) åº”ç”¨ã€‚å®ƒæœ‰ä¸€ä¸ªé—®é¢˜...é…ç½®ã€‚

è¦ä½¿ç”¨æ¨¡å‹ï¼Œæ‚¨éœ€è¦å››æ¡ä¿¡æ¯:

*   é¢„æµ‹é”®â€”â€”ä¸€ä¸ªç‹¬ç‰¹çš„ API é”®ï¼Œç”¨äºåˆ†ç±»æˆ–æ£€æµ‹å¯¹è±¡
*   ç«¯ç‚¹â€”â€”è¿™äº›æœåŠ¡å¯ä»¥åœ¨ä¸åŒçš„ Azure åŒºåŸŸè¿è¡Œï¼Œæ‰€ä»¥ä½ éœ€è¦ç«¯ç‚¹æ¥æ˜¾ç¤ºå®ƒåœ¨å“ªä¸ªåŒºåŸŸ
*   é¡¹ç›® Idâ€”â€”æ‚¨å¯ä»¥æœ‰å¤šä¸ªé¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½ç”±ä¸€ä¸ª GUID æ ‡è¯†
*   å‘å¸ƒåç§°â€”â€”æ¯ä¸€ä¸ªæ¨¡å‹éƒ½æœ‰å¤šä¸ªè¿­ä»£ï¼Œæ‚¨å¯ä»¥å‘å¸ƒé‚£äº›æ‚¨æƒ³è¦ä½¿ç”¨åç§°çš„è¿­ä»£

è¦ä½¿ç”¨æˆ‘çš„æ¨¡å‹ï¼Œæˆ‘éœ€è¦ç”¨æ‰€æœ‰è¿™äº›ä¿¡æ¯é…ç½®æˆ‘çš„åº”ç”¨ç¨‹åºã€‚æˆ‘ä¸æƒ³ç¡¬ç¼–ç å®ƒä»¬â€”â€”æˆ‘ä¸æƒ³æ¯æ¬¡æ›´æ”¹é¡¹ç›®æˆ–è¿­ä»£æ—¶éƒ½å¿…é¡»é‡æ–°æ„å»ºæˆ‘çš„åº”ç”¨ç¨‹åºã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘åº”è¯¥èƒ½å¤Ÿåœ¨è¿è¡Œæ—¶è®¾ç½®å®ƒä»¬ï¼Œå¹¶åœ¨ä¼šè¯ä¹‹é—´å­˜å‚¨å®ƒä»¬ã€‚

æˆ‘ä»ä¸€ä¸ªç®€å•çš„è®¾ç½®å±å¹•å¼€å§‹è¾“å…¥è¿™ 4 ä¸ªå€¼ã€‚æˆ‘åœ¨åšè¿™ä¸ªçš„æ—¶å€™çŠ¯äº†å¾ˆå¤šé”™è¯¯ï¼Œå› ä¸ºè¿™äº›å€¼åˆé•¿åˆå¤æ‚ã€‚æˆ‘éœ€è¦è®©æˆ‘çš„åº”ç”¨ç¨‹åºæ›´æœ‰ç”¨ï¼Œå¹¶æ‰¾åˆ°é¿å…é”™è¯¯çš„æ–¹æ³•...

[![The settings screen with 4 text boxes to fill in with complex values](img/712a1c12e7dd5b3ac3170aa31e0e1303.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--ER1o8hlf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/ccpeh66cpfmzwsdga8fc.jpeg)

è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ OCR -å…‰å­¦å­—ç¬¦è¯†åˆ«ï¼Œä½¿ç”¨äººå·¥æ™ºèƒ½å°†å›¾åƒä¸­çš„æ–‡æœ¬è½¬æ¢ä¸ºå­—ç¬¦ä¸²å€¼ã€‚

å¾®è½¯æœ‰ä¸€ä¸ªæ–‡æœ¬è¯†åˆ«æœåŠ¡ï¼Œä½œä¸º Azure è®¤çŸ¥æœåŠ¡çš„ä¸€éƒ¨åˆ†ã€‚è¯¥æœåŠ¡è·å–å›¾åƒï¼Œç„¶åæ£€æµ‹å…¶ä¸­çš„æ–‡æœ¬å¹¶è¿”å›è¯¥æ–‡æœ¬ã€‚

## å…¥é—¨

è‹¥è¦å¼€å§‹ï¼Œæ‚¨éœ€è¦ä¸€ä¸ª Azure å¸æˆ·ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰å¸æˆ·ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œå…è´¹æ³¨å†Œã€‚

> ä»[è¿™é‡Œ](https://azure.microsoft.com/services/cognitive-services/computer-vision/?WT.mc_id=devto-blog-jabenn)å¼€å§‹ï¼Œæ‚¨æ— éœ€æ³¨å†Œå³å¯å…è´¹ä½¿ç”¨ 7 å¤©çš„è®¿å®¢è´¦æˆ·ã€‚

ä¸€æ—¦ä½ æ³¨å†Œäº†ï¼Œå°±å» Azure é—¨æˆ·ç½‘ç«™åˆ›å»ºä¸€ä¸ªè®¡ç®—æœºè§†è§‰èµ„æºã€‚

å½“ä½ åˆ›å»ºè¿™ä¸ªèµ„æºæ—¶ï¼Œä½ é€‰æ‹©ä½ æƒ³è¦çš„ä»·æ ¼ç­‰çº§â€”â€”æœ‰ä¸€ä¸ªå¾ˆå¥½çš„å…è´¹ç­‰çº§ï¼Œå…è®¸æ¯åˆ†é’Ÿå¤šè¾¾ 20 ä¸ªè¯·æ±‚ï¼Œè¿™å¯¹æˆ‘çš„åº”ç”¨ç¨‹åºæ¥è¯´æ˜¯å®Œç¾çš„ã€‚ä¸€æ—¦åˆ›å»ºå®Œæˆï¼Œæ‚¨å°†éœ€è¦ä»é—¨æˆ·çš„*æ€»è§ˆ*é€‰é¡¹å¡ä¸­æŠ“å–*ç«¯ç‚¹*ï¼Œå¹¶ä»*é”®*é€‰é¡¹å¡ä¸­æŠ“å–ä¸€ä¸ªé”®ã€‚

## ä½¿ç”¨æœåŠ¡ä»£ç 

Azure æœ‰ä¸€æ•´å¥—å¯ç”¨çš„ SDKï¼Œæ¶µç›–äº†æœ€æµè¡Œçš„è¯­è¨€å’ŒæŠ€æœ¯ï¼Œä»¥åŠé’ˆå¯¹ SDK ä¸å¯ç”¨çš„è¯­è¨€çš„ REST APIã€‚æˆ‘çš„åº”ç”¨ç¨‹åºæ˜¯ Xamarin åº”ç”¨ç¨‹åºï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨äº†ã€‚NET SDKs åœ¨ [NuGet](https://www.nuget.org/packages/Microsoft.Azure.CognitiveServices.Vision.ComputerVision/?WT.mc_id=devto-blog-jabenn) ä¸Šå¯ç”¨ã€‚

```
Install-Package Microsoft.Azure.CognitiveServices.Vision.ComputerVision -Version 5.0.0 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸€æ—¦æ·»åŠ äº†åŒ…ï¼Œæˆ‘åªéœ€è¦æ‹ä¸€å¼ ç…§ç‰‡ï¼Œç„¶åå‘é€å¤„ç†ã€‚ç”±äºæœ‰äº†[åª’ä½“æ’ä»¶](https://github.com/jamesmontemagno/MediaPlugin)ï¼Œç”¨ Xamarin åº”ç”¨ç¨‹åºæ‹ç…§å¹¶ä¸å¤æ‚ï¼Œæˆ‘ç”¨å®ƒæ¥æ‹æ‘„å›¾åƒå¹¶ç»™æˆ‘ä¸€ä¸ªæµã€‚

ä¸€æ—¦æˆ‘æœ‰äº†å›¾åƒï¼Œæˆ‘å°±æŠŠå®ƒå‘é€ç»™[è¯»å– API](https://docs.microsoft.com/azure/cognitive-services/computer-vision/concept-recognizing-text#read-api?WT.mc_id=devto-blog-jabenn) ã€‚è¿™ä¸ª API è·å–ä¸€ä¸ªå›¾åƒï¼Œå¹¶åœ¨ç¦»çº¿å¤„ç†å›¾åƒæ—¶ç«‹å³è¿”å›ä¸€ä¸ªä»¤ç‰Œã€‚ç„¶åè°ƒç”¨å¦ä¸€ä¸ª API æ¥æ£€æŸ¥çŠ¶æ€ï¼Œä¸€æ—¦çŠ¶æ€è¿”å›ä¸ºå·²å¤„ç†ï¼Œå°±å¯ä»¥è·å–æ–‡æœ¬ã€‚

### åˆ›å»ºè®¡ç®—æœºè§†è§‰å®¢æˆ·ç«¯

åœ¨å¤„ç†å›¾åƒä¹‹å‰ï¼Œæ‚¨éœ€è¦ä¸€ä¸ª`ComputerVisionClient`çš„å®ä¾‹ã€‚

```
var creds = new ApiKeyServiceClientCredentials(<Your Key>);
var computerVision = new ComputerVisionClient(creds)
{
   Endpoint = <Your Endpoint>
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ`<Your Key>`å°†è¢«æ›¿æ¢ä¸ºè®¡ç®—æœºè§†è§‰æœåŠ¡çš„ API å¯†é’¥ï¼Œ`<Your Endpoint>`å°†è¢«æ›¿æ¢ä¸ºæœåŠ¡ç«¯ç‚¹ã€‚

### å¯åŠ¨è¯»è¯·æ±‚

è¦å¼€å§‹ä½¿ç”¨ Read APIï¼Œæ‚¨éœ€è¦å‘é€å›¾åƒæ¥è°ƒç”¨ä¸€ä¸ª`BatchRead`å‡½æ•°ã€‚æ ¹æ®æ‚¨æ˜¯è¦å¤„ç†æ–‡ä»¶è¿˜æ˜¯æµï¼Œæœ‰å‡ ç§æ–¹æ³•ã€‚åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯æµã€‚

```
var results = await computerVision.BatchReadFileInStreamAsync(photo.GetStream());
var loc = results.OperationLocation;
var operationId = loc.Substring(loc.Length - 36); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¯¹`BatchReadFileInStreamAsync`çš„è°ƒç”¨è¿”å›ä¸€ä¸ªä¸­é—´ç»“æœï¼Œè¿™ä¸ªä¸­é—´ç»“æœæœ‰ä¸€ä¸ª`OperationLocation`â€”â€”ä¸€ä¸ªè¯»æ“ä½œçš„ä»¤ç‰Œã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„ URLï¼Œæœ«å°¾æœ‰æ ‡è®°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æå–æœ€å 36 ä¸ªå­—ç¬¦æ¥è·å¾—æ ‡è®°ã€‚

> ç»“æœæ˜¯ä¸€ä¸ªä¸­é—´ç»“æœï¼Œæ‚¨éœ€è¦ç­‰å¾…å¤„ç†å®Œæˆ

### ç­‰å¾…è¯·æ±‚å®Œæˆ

è¯·æ±‚å°†éœ€è¦ä¸€äº›æ—¶é—´æ¥è¿è¡Œï¼Œå‡ æ¯«ç§’è€Œä¸æ˜¯å‡ åˆ†é’Ÿã€‚æ‰¹å¤„ç†è°ƒç”¨çš„ç»“æœåŒ…å«çŠ¶æ€ï¼Œå¦‚æœè¯¥çŠ¶æ€æœªå®Œæˆï¼Œåˆ™å¯ä»¥è¿ç»­æ£€ç´¢å®ƒï¼Œç›´åˆ°å®ƒå®Œæˆï¼Œåœ¨é‡è¯•ä¹‹é—´ç­‰å¾…ã€‚

```
while (result.Status == TextOperationStatusCodes.Running ||
       result.Status == TextOperationStatusCodes.NotStarted)
{
    await Task.Delay(100);
    result = await computerVision.GetReadOperationResultAsync(operationId);
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“çŠ¶æ€ä¸º`NotStarted`æˆ–`Running`æ—¶ï¼Œè¯¥ä»£ç å¾ªç¯ï¼Œæš‚åœ 100msï¼Œç„¶åè¯·æ±‚æ–°çš„çŠ¶æ€ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæ‚¨è¿˜åº”è¯¥é™åˆ¶é‡è¯•æ¬¡æ•°ï¼Œå¹¶æ£€æŸ¥ä¸€ä¸ª`Failed`çŠ¶æ€ã€‚

### è·å–æ–‡æœ¬

ä¸€æ—¦çŠ¶æ€ä¸º`Succeeded`ï¼Œç»“æœå°†å¯ç”¨ã€‚ç»“æœä½œä¸ºä¸€ä¸ªåˆ—è¡¨è¿”å›ï¼Œæ¯ä¸ªåˆ—è¡¨å¼•ç”¨å›¾åƒä¸­çš„ä¸€ä¸ªæ–‡æœ¬åŒºåŸŸã€‚æ¯ä¸ª`TextRecognitionResult`åœ¨`Lines`å±æ€§ä¸­åŒ…å«ä¸€è¡Œæˆ–å¤šè¡Œæ–‡æœ¬ï¼Œæ¯ä¸€è¡Œæ–‡æœ¬éƒ½é™„æœ‰é¢å¤–çš„ç»†èŠ‚ï¼Œå¦‚æ–‡æœ¬çš„è¾¹ç•Œæ¡†ã€‚è¿™äº›è¡Œæ˜¯ä»ä¸Šåˆ°ä¸‹çš„ï¼Œæ‰€ä»¥æœ€ä¸Šé¢çš„ä¸€è¡Œæ–‡æœ¬æ˜¯`Lines`å±æ€§ä¸­çš„ç¬¬ä¸€ä¸ªæ¡ç›®ï¼Œä¸‹ä¸€è¡Œæ˜¯ä¸‹ä¸€ä¸ªæ¡ç›®ï¼Œä¾æ­¤ç±»æ¨ã€‚

å‡ºäºæˆ‘çš„ç›®çš„ï¼Œcustom vision æœåŠ¡ä¸Šçš„è®¾ç½®é¡µé¢åœ¨ä¸€ä¸ªå‚ç›´åˆ—è¡¨ä¸­æœ‰æˆ‘éœ€è¦çš„æ•°æ®ï¼Œå­—æ®µçš„æ ‡é¢˜åœ¨å€¼çš„ä¸Šæ–¹ï¼Œä¾‹å¦‚ä¸‹é¢æ˜¾ç¤ºçš„**é¡¹ç›® Id** ã€‚

[![The project Id value in the settings is below the title Project Id](img/d6f38c59cfcacffc2bf6e7e27e0933e0.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--sZeSemRe--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/wx1tjw69c5eezydj26ji.png)

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘æ‹æ‘„è¿™äº›å€¼å¹¶æ£€æµ‹åˆ°æ–‡æœ¬ï¼Œæˆ‘å°†æœ‰ä¸€è¡ŒåŒ…å«æ–‡æœ¬`"Project Id"`ï¼Œä¸‹ä¸€è¡Œæ˜¯é¡¹ç›® ID çš„ GUIDã€‚

[![Extracting the text from some lines in the immediate window](img/5f6e5adda3e05add62c00a0d69c2c9b9.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Ogvq5PE4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/6hfexvkik0sv9xvi7lhf.png)

æˆ‘ç°åœ¨å¯ä»¥æå–è¿™ä¸ªå€¼ï¼Œå¹¶åœ¨æˆ‘çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒã€‚

### æå®š

ä½¿ç”¨ Azure Cognitive Services çš„æ–‡æœ¬è¯†åˆ«æœåŠ¡æ„å‘³ç€ä½ å†ä¹Ÿä¸ç”¨è¦æ±‚ä½ çš„ç”¨æˆ·è¾“å…¥å¤æ‚çš„æ•°æ®äº†ï¼

* * *

ä½ å¯ä»¥åœ¨ GitHub ä¸Šæ‰¾åˆ°æˆ‘çš„åº”ç”¨çš„ä»£ç :[github.com/jimbobbennett/ObjectDetector](https://github.com/jimbobbennett/ObjectDetector)ã€‚æ‰€æœ‰ä½¿ç”¨è®¤çŸ¥æœåŠ¡çš„ä»£ç éƒ½åœ¨`SettingsViewModel`ä¸­ã€‚