# ä½¿ç”¨ Pyenv å’Œ Pipenv çš„ Python è™šæ‹Ÿç¯å¢ƒ

> åŸæ–‡:[https://dev . to/spacerockmedia/the-python-virtual-environment-with-pyenv-pipenv-3 mlo](https://dev.to/spacerockmedia/the-python-virtual-environment-with-pyenv-pipenv-3mlo)

æœ€åˆå‘è¡¨åœ¨æˆ‘çš„ç½‘ç«™ä¸Šï¼Œåœ°å€ä¸º [writingco.de](https://writingco.de) ã€‚è¿™æ˜¯æˆ‘çš„å†…å®¹åšå®¢çš„äº¤å‰å¸–å­ã€‚æˆ‘æ¯å‘¨éƒ½ä¼šå‘å¸ƒæ–°çš„å†…å®¹ï¼Œå¦‚æœä½ æƒ³ç›´æ¥åœ¨æ”¶ä»¶ç®±é‡Œæ”¶åˆ°æˆ‘çš„æ–‡ç« å’Œå…¶ä»–ä¿¡æ¯ï¼Œä½ å¯ä»¥æ³¨å†Œæˆ‘çš„[æ—¶äº‹é€šè®¯](https://writingco.de/newsletter)ï¼

å›´ç»•æ‰“åŒ…å’Œç®¡ç† python è™šæ‹Ÿç¯å¢ƒæœ‰ä¸€æ®µæ··ä¹±çš„å†å²ã€‚æˆ‘ä»¬ç”¨ pyvenv å—ï¼Ÿvenvï¼Ÿvirtualenvwrapperï¼Ÿæœ€è¿‘ï¼Œå…¶ä»–é€‰æ‹©çªç„¶å‡ºç°ã€‚ä½¿ç”¨ [pyenv](https://github.com/pyenv/pyenv) ç»™äº†æˆ‘ä»¬ç®¡ç† python ç‰ˆæœ¬çš„èƒ½åŠ›ï¼Œå°±åƒ`nvm`å’Œ`rvm`ä¸€æ ·ï¼Œè€Œ [Pipenv](https://github.com/pypa/pipenv) æ˜¯ pip æœ¬èº«çš„ç»§æ‰¿è€…ï¼Œæœ€ç»ˆå°†è¢«åˆå¹¶ã€‚

## [](#installing-pyenv)å®‰è£… Pyenv

Pyenv å…è®¸æ‚¨è½»æ¾åœ°åœ¨ç³»ç»Ÿä¸ŠåŒæ—¶å®‰è£…ä¸åŒç‰ˆæœ¬çš„ pythonï¼Œè€Œä¸ä¼šäº§ç”Ÿå†²çªã€‚å®ƒåœ¨ windows ä¸Šä¸å—æ”¯æŒï¼Œä½†æ˜¯ python å¯ä»¥å¾ˆå®¹æ˜“åœ°ä»ä»–ä»¬çš„ç½‘ç«™ä¸Šå®‰è£…ã€‚<mark id="annotation-text-3b71a6a0-d22b-4ac0-8787-25b139fb0829">ç¡®ä¿å°†å®ƒæ·»åŠ åˆ°æ‚¨çš„çª—å£`PATH`ã€‚</mark>

å®‰è£…éå¸¸ç®€å•ï¼Œåªéœ€è¿è¡Œè¿™äº›å‘½ä»¤å°±å¯ä»¥å®Œæˆå®‰è£…ã€‚

```
$ git clone https://github.com/pyenv/pyenv.git ~/.pyenv
$ echo 'export PYENV_ROOT="$HOME/.pyenv"' >> ~/.bash_profile
$ echo 'export PATH="$PYENV_ROOT/bin:$PATH"' >> ~/.bash_profile 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œåœ¨ä»–ä»¬çš„å›è´­é¡µé¢ä¸Šæœ‰æ›´å¤šçš„å®‰è£…ç»†èŠ‚ã€‚ä»–ä»¬ä¹Ÿæœ‰å¯¹`zsh`ç”¨æˆ·çš„è¯´æ˜ã€‚æ‚¨å¯èƒ½éœ€è¦åœ¨å®‰è£…åé‡æ–°åŠ è½½æ‚¨çš„ç»ˆç«¯ï¼Œä»¥ä½¿ pyenv å‘½ä»¤å¯ç”¨ã€‚

```
âœ pyenv
pyenv 1.2.12-2-geb68ec94
Usage: pyenv <command> [<args>]

Some useful pyenv commands are:
   commands List all available pyenv commands
   local Set or show the local application-specific Python version
   global Set or show the global Python version
   shell Set or show the shell-specific Python version
   install Install a Python version using python-build
   uninstall Uninstall a specific Python version
   rehash Rehash pyenv shims (run this after installing executables)
   version Show the current Python version and its origin
   versions List all Python versions available to pyenv
   which Display the full path to an executable
   whence List all Python versions that contain the given executable

See `pyenv help <command>' for information on a specific command.
For full documentation, see: https://github.com/pyenv/pyenv#readme 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬ä»Šå¤©è¦å¤„ç†çš„ä¸»è¦å­å‘½ä»¤æ˜¯`local`ã€`global`å’Œ`install`ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬çš„ç³»ç»Ÿä¸Šæœ‰å“ªäº›ç‰ˆæœ¬ã€‚

```
âœ pyenv versions
* system 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#installing-new-versions)å®‰è£…æ–°ç‰ˆæœ¬

å¯¹äºå¤§å¤šæ•°ç”¨æˆ·æ¥è¯´ï¼Œä½ åªæœ‰ç³»ç»Ÿè§£é‡Šå™¨ã€‚è®©æˆ‘ä»¬å®‰è£… 3.7 ä½œä¸º python <mark id="annotation-text-206ad3df-a7b5-4462-857b-35d31161f3e3">çš„å¦ä¸€ä¸ªå…¨çƒç‰ˆæœ¬ã€‚</mark> 

```
âœ pyenv install 3.7
python-build: definition not found: 3.7

The following versions contain `3.7' in the name:
  2.3.7
  3.3.7
  3.7.0
  3.7-dev
  3.7.1
  3.7.2
  3.7.3
  miniconda-3.7.0
  miniconda3-3.7.0
  stackless-3.3.7

See all available versions with `pyenv install --list'.
... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœæˆ‘ä»¬è¦æ±‚çš„ç‰ˆæœ¬åªæ˜¯éƒ¨åˆ†åŒ¹é…ï¼Œå®ƒä¼šå‘Šè¯‰æˆ‘ä»¬å¯ä»¥å®‰è£…å“ªäº›ç‰ˆæœ¬ã€‚è®©æˆ‘ä»¬å®‰è£…æœ€æ–°çš„ï¼Œè¿™å°†éœ€è¦å‡ åˆ†é’Ÿã€‚

```
âœ pyenv install 3.7.3
Downloading Python-3.7.3.tar.xz...
-> https://www.python.org/ftp/python/3.7.3/Python-3.7.3.tar.xz
Installing Python-3.7.3...
Installed Python-3.7.3 to /home/shawn/.pyenv/versions/3.7.3 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨è®©æˆ‘ä»¬è®© 3.7.3 å…¨çƒå¯ç”¨ï¼Œè¿™æ ·å°±ä¸ä¼šå¹²æ‰°æˆ‘ä»¬çš„ç³»ç»Ÿ python:

```
âœ pyenv global      
system
âœ pyenv global 3.7.3
âœ pyenv global      
3.7.3
âœ pyenv versions
  system
* 3.7.3 (set by /home/shawn/.pyenv/version) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬ç°åœ¨é»˜è®¤ä¸º 3.7.3ã€‚ç›®å‰ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº† pyenvã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„å·¥å…·ã€‚

## Pipenv:Python è™šæ‹Ÿç¯å¢ƒ

è¦å®‰è£… pipenvï¼Œæ‚¨å¯ä»¥é€šè¿‡æ‚¨ç³»ç»Ÿçš„è½¯ä»¶åŒ…ç®¡ç†å™¨è¿›è¡Œå®‰è£…ï¼Œå¦‚è¿™é‡Œçš„æ‰€è¿°ã€‚

### [](#the-setup)è®¾ç½®

å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç®€å•çš„é¡¹ç›®ã€‚è®©æˆ‘ä»¬å…‹éš†ä¸€ä¸ªæˆ‘æ‹¥æœ‰çš„ [repo](https://gitlab.com/autoferrit/template) ,å…¶ä¸­æœ‰å‡ ä¸ªç”¨äºåœ¨ git ä¸­è·Ÿè¸ªé¡¹ç›®çš„åŸºæœ¬æ–‡ä»¶ã€‚

```
âœ git clone git@gitlab.com:autoferrit/template.git demo
Cloning into 'demo'...
remote: Enumerating objects: 6, done.
remote: Counting objects: 100% (6/6), done.
remote: Compressing objects: 100% (6/6), done.
remote: Total 6 (delta 0), reused 0 (delta 0)
Receiving objects: 100% (6/6), done.
âœ cd demo
âœ ls -la
Permissions Size User Date Modified Git Name
drwxr-xr-x - shawn 27 Jun 12:10 -- .git
.rwxr-xr-x 474 shawn 27 Jun 12:09 -- .editorconfig
.rwxr-xr-x 2.2k shawn 27 Jun 12:09 -- .gitattributes
.rw-r--r-- 138 shawn 27 Jun 12:09 -- Pipfile
.rw-r--r-- 96 shawn 27 Jun 12:09 -- Readme.md 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨å¯ä»¥åœ¨ GitLab é¡¹ç›®ä¸­çœ‹åˆ°æ–‡ä»¶å†…å®¹ã€‚

*   å¸®åŠ©å‘Šè¯‰ç¼–è¾‘(ç”¨é€‚å½“çš„æ’ä»¶)åœ¨è¿™ä¸ªé¡¹ç›®ä¸­çš„æ–‡ä»¶ä¸Šåº”è¯¥ä½¿ç”¨ä»€ä¹ˆæ ¼å¼é€‰é¡¹ã€‚
*   åœ¨å„ç§å¹³å°ä¸Šå·¥ä½œæ—¶(æˆ‘åœ¨çœ‹ç€ä½ ï¼Œwindows)ï¼Œè¿™æ ·å¯ä»¥æ§åˆ¶è¡Œå°¾ã€‚
*   è¿™æ˜¯æˆ‘ä»¬ä¿ç•™åº”ç”¨ç¨‹åºéœ€æ±‚çš„åœ°æ–¹ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ requirements.txt

Pipfile ä¹Ÿå°†ç”±ä¸‹é¢çš„å‘½ä»¤ç”Ÿæˆã€‚

```
âœ pipenv --python 3.7.3 install 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°†åˆ›å»ºæ‚¨çš„ python è™šæ‹Ÿç¯å¢ƒï¼Œç„¶åæ‚¨å¯ä»¥é€šè¿‡è¿è¡Œ`pipenv shell`æ¥ä½¿ç”¨å®ƒã€‚æœ€å¥½çš„éƒ¨åˆ†æ˜¯ Pipenv æ”¯æŒ Pyenvï¼Œå¹¶å°†ä½¿ç”¨ python ç‰ˆæœ¬å®‰è£…ï¼Œä½¿ç”¨è¯¥å·¥å…·ä½¿æˆ‘ä»¬çš„ç³»ç»Ÿæ›´åŠ å¹²å‡€ã€‚

## [](#a-simple-api)ä¸€ä¸ªç®€å•çš„ API

ä¸ºäº†å±•ç¤ºå¦‚ä½•ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ FastAPI åˆ›å»ºä¸€ä¸ªéå¸¸åŸºæœ¬çš„ APIã€‚ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…éœ€æ±‚:

```
âœ pipenv install fastapi uvicorn 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°†åˆ›å»ºä¸€ä¸ªç±»ä¼¼äº node.js ä¸­çš„`package-lock.json`çš„`Pipfile.lock`ï¼Œå½“ä»£ç é€šè¿‡ CI æœåŠ¡å™¨æˆ–äº§å“è¿è¡Œæ—¶ï¼Œåˆ›å»ºä¸€ä¸ªå¯é‡å¤çš„ç¯å¢ƒæ˜¯è‡³å…³é‡è¦çš„ï¼Œè¿™ä¹Ÿæ˜¯ Pipenv çš„ä¼˜åŠ¿æ‰€åœ¨ã€‚å®ƒç¡®ä¿æˆ‘ä»¬å¯ä»¥å®é™…éƒ¨ç½²ç›¸åŒç‰ˆæœ¬çš„åŒ…åŠå…¶éœ€æ±‚ã€‚è®©æˆ‘ä»¬è¿è¡Œè¿™æ®µä»£ç ã€‚

```
âœ uvicorn main:app --reload 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨è®¿é—®[http://127 . 0 . 0 . 1:8000/items/5 å°±å¯ä»¥çœ‹åˆ°ä½ çš„ API äº†ï¼Ÿq=somequery](http://127.0.0.1:8000/items/5?q=somequery) ã€‚å¦‚æœä½ æƒ³ç»§ç»­å­¦ä¹ æœ¬æ•™ç¨‹ï¼Œä½ å¯ä»¥åœ¨ä»–ä»¬çš„æ–‡æ¡£[ä¸­é˜…è¯» fastapi æ•™ç¨‹ã€‚](https://fastapi.tiangolo.com/#example)

### Pipfile

è®©æˆ‘ä»¬æ‰“å¼€ Pipfileï¼Œçœ‹çœ‹ python è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…äº†ä»€ä¹ˆã€‚

```
[[source]]
name = "pypi"
url = "https://pypi.org/simple"
verify_ssl = true

[dev-packages]

[packages]
fastapi = "*"
uvicorn = "*"

[requires]
python_version = "3.7" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é»˜è®¤æƒ…å†µä¸‹ï¼ŒPipenv å°†æ€»æ˜¯å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„è½¯ä»¶åŒ…ã€‚è¿™æ˜¯æˆ‘ä»¬éƒ½åº”è¯¥åšçš„ã€‚å½“æ–°ç‰ˆæœ¬å‘å¸ƒæ—¶ï¼Œæˆ‘ä»¬è¿è¡Œ`pipenv install`ï¼Œå®ƒå°†å®‰è£…å·²å‘å¸ƒçš„æ–°ç‰ˆæœ¬ã€‚è¦æ›´æ–°ä¸€ä¸ªåŒ…ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œ`pipenv update fastapi`ï¼Œæˆ–è€…å¦‚æœæˆ‘ä»¬æƒ³æ›´æ–°æ‰€æœ‰çš„åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œ`pipenv update`ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦å›ºå®šä¸€ä¸ªç‰¹å®šçš„ç‰ˆæœ¬ï¼Œå¦‚æœä½ ä½¿ç”¨æ ‡å‡†çš„`pip`å’Œ`requirements.txt`ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•ã€‚

### å¦‚ä½•åœ¨æˆ‘çš„ç¯å¢ƒä¸­å®‰è£…å¼€å‘åŒ…ï¼Ÿ

è¦å®‰è£…å¼€å‘åŒ…ï¼Œåªéœ€ä¼ é€’`--dev`å‚æ•°ã€‚

```
âœ pipenv install --dev ptpython 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¹¶å®‰è£…å¼€å‘åŒ…:

```
âœ pipenv install --dev 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`pipenv install`å°†åªå®‰è£…åº”è¯¥å­˜åœ¨äºäº§å“ä¸­çš„åŸºç¡€åŒ…ã€‚è¿™å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚ä¼ é€’`--dev`å‚æ•°å°†å…è®¸æˆ‘ä»¬åœ¨æœ¬åœ°æˆ–åœ¨ CI è¿‡ç¨‹ä¸­å®‰è£…åŸºç¡€å’Œå¼€å‘åŒ…ã€‚

### [](#the-pip-in-the-shell)ç¾å…ƒå¤–å£³ä¸­çš„ pip

è¦æ¿€æ´»ç¯å¢ƒï¼Œåªéœ€è¿è¡Œ

```
demo on writingcode master [!?] 
âœ pipenv shell        
Launching subshell in virtual environmentâ€¦
 . /home/shawn/code/sandbox/demo/.venv/bin/activate

demo on writingcode master [!?] via demo 
âœ pip list    
Package Version
--------------- -------
Click 7.0    
fastapi 0.30.0 
h11 0.8.1  
httptools 0.0.13 
pip 19.1.1 
pydantic 0.28   
setuptools 41.0.1 
starlette 0.12.0 
uvicorn 0.8.2  
uvloop 0.12.2 
websockets 7.0    
wheel 0.33.4 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ³¨æ„:æˆ‘åœ¨è¿™é‡Œå±•ç¤ºäº†å®Œæ•´çš„ç»ˆç«¯æ–‡æœ¬ï¼Œä»¥è¡¨æ˜å®ƒç°åœ¨æ­£åœ¨ python ç¯å¢ƒçš„æç¤ºç¬¦ä¸‹æ·»åŠ `via demo`ã€‚ä½ å¯èƒ½ä¼šçœ‹åˆ°è¿™æ˜¯ä¸åŒçš„è¡¨ç°ã€‚é€šå¸¸çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:

```
(demo) $ pip list
... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#checking-for-vulnerabilities-in-your-virtual-environment)æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒä¸­çš„æ¼æ´

æœ€å¥½çš„ç‰¹æ€§ä¹‹ä¸€å¯èƒ½æ˜¯æ£€æŸ¥æ¼æ´çš„èƒ½åŠ›ã€‚

```
âœ pipenv check
Checking PEP 508 requirementsâ€¦
Passed!
Checking installed package safetyâ€¦
All good! 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬çš„ python è™šæ‹Ÿç¯å¢ƒä¸­æ²¡æœ‰æ¼æ´ã€‚è¿™æ˜¯ä»¶å¥½äº‹ã€‚æˆ‘ä»¬è¯•ç€åŠ ä¸€ä¸ªã€‚

```
âœ pipenv install 'django==2.1'
âœ pipenv check
Checking PEP 508 requirementsâ€¦
Passed!
Checking installed package safetyâ€¦
36883: django <2.1.6,>=2.1.0 resolved (2.1 installed)!
Django 2.1.x before 2.1.6 allows Uncontrolled Memory Consumption via a malicious attacker-supplied value to the django.utils.numberformat.format() function.

36522: django <2.1.2,>=2.1 resolved (2.1 installed)!
An issue was discovered in Django 2.1 before 2.1.2, in which unprivileged users can read the password hashes of arbitrary accounts. The read-only password widget used by the Django Admin to display an obfuscated password hash was bypassed if a user has only the "view" permission (new in Django 2.1), resulting in display of the entire password hash to those users. This may result in a vulnerability for sites with legacy user accounts using insecure hashes.

36517: django <2.1.2,>=2.1.0 resolved (2.1 installed)!
django before 2.1.2 fixes a security bug in 2.1.x. 
If an admin user has the change permission to the user model, only part of the
password hash is displayed in the change form. Admin users with the view (but
not change) permission to the user model were displayed the entire hash. 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å“‡å“¦ï¼ä¸è¦å®‰è£… Django 2.1ã€‚å¹¸è¿çš„æ˜¯å®ƒè¢«ä¿®å¤äº†ï¼Œè®©æˆ‘ä»¬æ›´æ–°å®ƒã€‚

```
âœ pipenv update django
Locking [dev-packages] dependenciesâ€¦
Locking [packages] dependenciesâ€¦
âœ” Success! 
Updated Pipfile.lock (9d4a23)!
Installing dependencies from Pipfile.lock (9d4a23)â€¦
  ğŸ â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰ 11/11 â€” 00:00:01
All dependencies are now up-to-date!

âœ pip list            
Package Version
--------------- -------
...  
Django 2.1    
... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç­‰ç­‰ä¸ºä»€ä¹ˆè£…çš„æ˜¯è€ç‰ˆæœ¬ï¼Ÿè¿™å¾ˆå¥½ï¼ä¸ºä»€ä¹ˆï¼Ÿè¿™æ„å‘³ç€æˆ‘ä»¬çš„è®¾ç½®æ˜¯å¹‚ç­‰çš„ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºæˆ‘ä»¬é’‰ä½äº† Django çš„â€œ2.1â€ç‰ˆæœ¬ï¼Œæ‰€ä»¥æ²¡ç”¨ã€‚æ‰€ä»¥æˆ‘ä»¬åº”è¯¥é€šè¿‡å°†ç‰ˆæœ¬æ›´æ”¹ä¸º`"*"`æ¥åœ¨ Pipfile ä¸­å–æ¶ˆå›ºå®šã€‚æˆ‘ä»¬ç°åœ¨åº”è¯¥èƒ½å¤Ÿå¾—åˆ°é¢„æœŸçš„ç»“æœã€‚

```
âœ pipenv install            
Pipfile.lock (10cb8d) out of date, updating to (9d4a23)â€¦
Locking [dev-packages] dependenciesâ€¦
Locking [packages] dependenciesâ€¦
âœ” Success! 
Updated Pipfile.lock (10cb8d)!
Installing dependencies from Pipfile.lock (10cb8d)â€¦
  ğŸ â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰ 12/12 â€” 00:00:04

âœ pip list      
Package Version
--------------- -------
...  
Django 2.2.2  
... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#conclusion)ç»“è®º

Pyenv å’Œ Pipenv ä½¿å¾—æ£€æŸ¥ python è™šæ‹Ÿç¯å¢ƒå’Œç‰ˆæœ¬å˜å¾—æ›´åŠ å®¹æ˜“ã€‚ç°åœ¨ï¼Œæ‚¨å¯ä»¥è®©æ‚¨çš„ç¯å¢ƒè·¨ç³»ç»Ÿä¸€è‡´åœ°éƒ¨ç½²ã€‚å½“è°ˆåˆ°è·¨ç³»ç»Ÿä¸€è‡´åœ°å®‰è£…éœ€æ±‚æ—¶ï¼ŒPython æœ‰ä¸€ä¸ªä»¤äººå¤´ç–¼çš„å†å²ã€‚ä½¿ç”¨è¿™äº›å·¥å…·å°†æœ‰åŠ©äºæ‚¨æ›´åŠ ä¸“æ³¨äºæ‚¨çš„å®é™…ä»£ç ã€‚

ä¸å¹¸çš„æ˜¯ï¼ŒPipenv å¹¶ä¸é€‚åˆé‚£äº›éœ€è¦ setup.py æ‰èƒ½å°†åº“ä¸Šä¼ åˆ° pypi çš„äºº

è¿™æ˜¯è®¢é˜…æˆ‘çš„æ—¶äº‹é€šè®¯çš„é“¾æ¥ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨æ¨ç‰¹ä¸Šå…³æ³¨æˆ‘ã€‚
T3![](../Images/ad9b9da1674b387c7b673d8f5867bfc0.png)T5ã€‘

åœ¨ Python ä¸­ï¼Œä½ å¦‚ä½•ç®¡ç†ä½ çš„ç¯å¢ƒå’Œä¾èµ–å…³ç³»ï¼Ÿ