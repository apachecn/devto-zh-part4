# JSDoc ç”¨ JSDoc è®°å½•ä½ çš„ Javascript ä»£ç 

> åŸæ–‡ï¼š<https://dev.to/paulasantamaria/document-your-javascript-code-with-jsdoc-2fbf>

# ç®€ä»‹

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å°è¯•æ¶µç›– JSDoc å…¥é—¨æ‰€éœ€è¦çŸ¥é“çš„ä¸€åˆ‡ã€‚æˆ‘è¿˜ä¼šå’Œä½ åˆ†äº«ä¸€äº›æˆ‘å­¦åˆ°çš„å¾ˆé…·çš„ä¸œè¥¿ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—æœ‰ç”¨ã€‚

## ç›®å½•

*   [å®‰è£…](#installation)
*   [ç”¨é€”](#usage)
    *   [æ–‡ä»¶](#document)
    *   [å¯¼å‡º](#export)
    *   [å¯¼å‡ºæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹](#export-files-or-folders)
    *   [é€’å½’å¯¼å‡ºæ‰€æœ‰æ–‡ä»¶](#export-all-files-recursively)
    *   [ä½¿ç”¨é…ç½®æ–‡ä»¶](#use-a-configuration-file)
*   [å…³äº JSDoc çš„å…¶ä»–é…·äº‹](#other-cool-stuff-about-jsdoc)
    *   [vs code ä¸­çš„å†…ç½®æ”¯æŒ](#built-in-support-in-vscode)
    *   [ä½¿ç”¨è‡ªå®šä¹‰å¸ƒå±€](#use-a-custom-layout)
    *   [JSDoc å’Œ Swagger](#jsdoc-and-swagger)
    *   è¿˜çŸ¥é“å…¶ä»–æœ‰è¶£çš„ JSDoc ç‰¹æ€§å—ï¼Ÿ

* * *

JSDoc æ˜¯ä¸€ä¸ªå¼€æºçš„ Javascript API æ–‡æ¡£ç”Ÿæˆå™¨ã€‚å®ƒå…è®¸å¼€å‘äººå‘˜é€šè¿‡æ³¨é‡Šè®°å½•ä»–ä»¬çš„ä»£ç ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­:

```
/**
 *  Retrieves a single file by id.
 *  @param {string} id File identifier.
 *  @returns {File} File object.
 */
const getFileById = (id) => {
    // ...
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸€æ—¦æ‚¨çš„ä»£ç è¢«å®Œæ•´åœ°è®°å½•ä¸‹æ¥ï¼Œæ‚¨å°±å¯ä»¥é€šè¿‡è¿è¡Œä¸€ä¸ªç®€å•çš„å‘½ä»¤è½»æ¾åœ°ç”Ÿæˆä¸€ä¸ªåŒ…å«æ‰€æœ‰ API æ–‡æ¡£çš„ç½‘ç«™ã€‚å¤šé…·å•Šã€‚

ä¸‹é¢æ˜¯å‰é¢çš„ä»£ç åœ¨ç”Ÿæˆçš„ç½‘ç«™ä¸­çš„æ ·å­:

[![A screenshot of the documentation formatted in the website including all the JSDoc tags specified in the previous code](img/9bf0e3f10aecbf0496001d38204d6c0b.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--21dnoAHa--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/cdcDW66.png)

# å®‰è£…

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é€šè¿‡ [npm](https://www.npmjs.com/) å…¨å±€å®‰è£… JSDocã€‘

```
npm install -g jsdoc 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ–è€…ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¸ºå•ä¸ªé¡¹ç›®å®‰è£…:

```
npm install --save-dev jsdoc 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å…³äºå®‰è£…çš„æ›´å¤šä¿¡æ¯[åœ¨è¿™é‡Œ](https://github.com/jsdoc/jsdoc#installation-and-usage)

ç°åœ¨ï¼Œè¯´å®è¯ï¼Œå°½ç®¡æˆ‘å·²ç»ä½¿ç”¨ JSDoc æ³¨é‡Šæ¥è®°å½•æˆ‘çš„ä»£ç å¾ˆé•¿æ—¶é—´äº†ï¼Œä½†æˆ‘ç›´åˆ°å‡ å‘¨å‰æ‰å®‰è£…è¿™ä¸ªåŒ…ï¼Œå› ä¸ºæˆ‘å®é™…ä¸Šä¸éœ€è¦ç”Ÿæˆç½‘ç«™ã€‚ç›¸åï¼Œæˆ‘åªæ˜¯åœ¨ VSCode ä¸­ä½¿ç”¨å®ƒï¼Œä½†æˆ‘ä¼šåœ¨è¿™ç¯‡æ–‡ç« çš„åé¢è°ˆåˆ°è¿™ä¸ª[ã€‚](#vscode--jsdoc)

# ç”¨æ³•

## æ–‡æ¡£

è¦å¼€å§‹è®°å½•ä½ çš„ä»£ç ï¼Œä½ æ‰€è¦åšçš„å°±æ˜¯åœ¨ä½ æƒ³è¦è®°å½•çš„æ¯ä¸ªä»£ç å—ä¸Šæ·»åŠ ä¸€ä¸ªä»¥`/**`å¼€å¤´çš„æ³¨é‡Š:æ¨¡å—ã€æ–¹æ³•ã€ç±»ã€å‡½æ•°ç­‰ç­‰ã€‚

æ‚¨å¯ä»¥ç®€å•åœ°æ·»åŠ ä¸€ä¸ªæè¿°:

```
/**
 * Retrieves a user by email.
 */
const getByEmail = async (email) => {
    // ...
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ–è€…ä½ å¯ä»¥ä½¿ç”¨æ ‡ç­¾æ¥å……åˆ†åˆ©ç”¨ JSDocã€‘

```
/**
 * Retrieves a user by email.
 * @async
 * @method
 * @param {String} email - User email
 * @returns {User} User object
 * @throws {NotFoundError} When the user is not found.
 */
const getByEmail = async (email) => {
    // ...
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æœ‰ä¸€ä¸ªå·¨å¤§çš„æ ‡ç­¾åˆ—è¡¨[ä¾›ä½ é€‰æ‹©ï¼Œå°½å¯èƒ½å½»åº•åœ°è®°å½•ä½ çš„ä»£ç ã€‚](https://jsdoc.app/#block-tags)

è®°ä½ï¼Œä½ æ·»åŠ åˆ°æ³¨é‡Šä¸­çš„ä¿¡æ¯è¶Šå¤šï¼Œä½ çš„ API æ–‡æ¡£å°±è¶Šè¯¦ç»†ã€‚è€Œä¸”ï¼Œ**æ‰¾åˆ°ä½ è§‰å¾—åˆé€‚çš„ç»†èŠ‚æ•°é‡**ã€‚æœ€å¥½ç”¨å‡ ä¸ªæ ‡ç­¾è®°å½•æ‰€æœ‰ä»£ç ï¼Œè€Œä¸æ˜¯ç”¨æ‰€æœ‰æ ‡ç­¾è®°å½•æ‰€æœ‰æ–¹æ³•ï¼Œå› ä¸ºå¤ªå¤šäº†ï¼Œä½ è·Ÿä¸ä¸Šã€‚

## å¯¼å‡º

æ·»åŠ è¯„è®ºåï¼Œå‰©ä¸‹è¦åšçš„å°±æ˜¯ç”Ÿæˆæ‚¨çš„æ–‡æ¡£ç½‘ç«™:

### å¯¼å‡ºæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹

åªéœ€è°ƒç”¨ jsdoc å¹¶æ·»åŠ æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚

```
jsdoc path/to/my/file.js 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¦åŒ…å«è®¸å¤šæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œè¯·æ·»åŠ å®ƒä»¬çš„æ‰€æœ‰è·¯å¾„ï¼Œç”¨ä¸€ä¸ªç©ºæ ¼åˆ†éš”ã€‚

### é€’å½’å¯¼å‡ºæ‰€æœ‰æ–‡ä»¶

```
jsdoc -r . 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### ä½¿ç”¨ä¸€ä¸ªé…ç½®æ–‡ä»¶

å¾ˆå¯èƒ½ä½ æ­£åœ¨åšä¸€ä¸ªå¤§é¡¹ç›®ï¼Œæœ‰å¾ˆå¤šæ–‡ä»¶å’Œæ–‡ä»¶å¤¹éœ€è¦å¯¼å‡ºï¼Œä¹Ÿæœ‰ä¸€äº›éœ€è¦æ’é™¤(æˆ‘åœ¨çœ‹ç€ä½ ï¼Œ`node_modules`)ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä½¿ç”¨ JSDoc é…ç½®æ–‡ä»¶ã€‚

ä½¿ç”¨é…ç½®æ–‡ä»¶å…è®¸æˆ‘ä»¬å®šåˆ¶ JSDoc è¡Œä¸ºï¼Œæ¯”å¦‚:

*   å“ªäº›æ–‡ä»¶å¤¹æˆ–æ–‡ä»¶åº”è¯¥åŒ…æ‹¬åœ¨å†…ï¼Œå“ªäº›åº”è¯¥æ’é™¤åœ¨å¤–ã€‚
*   å½“æˆ‘ä»¬ä½¿ç”¨`--recurse`é€‰é¡¹æ—¶ï¼ŒJSDoc ä¼šæœ‰å¤šæ·±ã€‚
*   å°†è‡ªå®šä¹‰åº”ç”¨äºæ¨¡æ¿
*   ç­‰ç­‰

ä½ éœ€è¦åšçš„å°±æ˜¯åˆ›å»ºä¸€ä¸ªåŒ…å«ä½ æƒ³è¦çš„è®¾ç½®çš„`.json`æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨`-c`æˆ–`--configure`é€‰é¡¹å‘Šè¯‰ JSDoc å®ƒä»¬åœ¨å“ªé‡Œ:

```
jsdoc -c /path/to/conf.json 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œæœ‰ä¸€ä¸ªæˆ‘ç»å¸¸ä½¿ç”¨çš„(éå¸¸ç®€å•çš„)ä¾‹å­:

```
{
    "source": {
        "includePattern": ".+\\.js(doc|x)?$",   // Only process file ending in .js, .jsdoc or .jsx
        "include": ["."],                       // Check all folders.
        "exclude": ["node_modules"]             // Be gone, node_modules.
    },
    "recurseDepth": 10,                         // Only go 10 levels deep.
    "opts": {
        "destination": "./docs/",               // Where I want my docs to be generated.
        "recurse": true                         // Same as using -r or --recurse
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> **Pro æç¤º:**
> ä½ å¯èƒ½æƒ³æŠŠè¿™ä¸ªå‘½ä»¤æ·»åŠ åˆ°ä½ çš„ package.json è„šæœ¬ä¸­:

```
"scripts":  {  "generate-docs":  "jsdoc -c /path/to/my/conf.js"  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶åç®€å•åœ°ä»å‘½ä»¤è¡Œä½¿ç”¨`npm run generate-docs`ã€‚

æˆ–è€…ä½ å¯ä»¥ç»™è¿™ä¸ªè„šæœ¬èµ·ä¸€äº›æ›´å‚»çš„åå­—ï¼Œæ¯”å¦‚:`docs-pls`ã€`gimme-docs`æˆ–è€…`ill-have-the-large-docs-with-extra-docs`(å¥½å§ï¼Œä¹Ÿè®¸ä¸æ˜¯æœ€åä¸€ä¸ªğŸ˜… ).

å…³äºé…ç½®[çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·ç‚¹å‡»](https://jsdoc.app/about-configuring-jsdoc.html)

# å…³äº JSDoc çš„å…¶ä»–é…·äº‹

## åœ¨ VSCode ä¸­å†…ç½®æ”¯æŒ

æ‰€ä»¥ï¼Œå°±åƒæˆ‘è¯´çš„ï¼Œæˆ‘ç”šè‡³åœ¨å®‰è£… JSDoc ä¹‹å‰å°±å–œæ¬¢å®ƒäº†ï¼Œè¿™æ˜¯å› ä¸º VSCode å†…ç½®äº†å¯¹ JSDoc æ³¨é‡Šçš„æ”¯æŒï¼ŒåŒ…æ‹¬:

*   å½“æ‚¨åœ¨å‡½æ•°å£°æ˜å‰é”®å…¥`/**`(ç„¶åæŒ‰ enter é”®)æ—¶ï¼Œå®ƒä¼šä¸ºæ‚¨æ„å»º JSDoc æ³¨é‡Šç»“æ„ã€‚![VSCode automatically generates the structure of the JSCode annotations for a function](img/13f0de56a9577be9971392b503923604.png)
*   ä¸°å¯Œçš„æ‚¬åœä¿¡æ¯![VSCode displays all the tags from a function when you hover said function](img/62d0761b53aacd0a41411557ca5fd5aa.png)
*   å…³äºæ‚¨æ­£åœ¨ä½¿ç”¨çš„å‡½æ•°ç­¾åçš„ä¿¡æ¯![VSCode displays info about the function params when the user types the name of the function](img/c4c88b9a88903f10414edc4a96a1a786.png)

æœ‰å…³ VSCode ä¸­ JSDoc æ”¯æŒçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ [VSCode æ–‡æ¡£](https://code.visualstudio.com/docs/languages/javascript#_jsdoc-support)ã€‚

## ä½¿ç”¨è‡ªå®šä¹‰å¸ƒå±€

é€šè¿‡ç”Ÿæˆä¸€ä¸ªå®šåˆ¶çš„`layout.tmpl`æ–‡ä»¶ï¼Œå¹¶å°†é€‰é¡¹`templates.default.layoutFile`è®¾ç½®ä¸º JSDoc é…ç½®æ–‡ä»¶ä¸­å®šåˆ¶å¸ƒå±€çš„è·¯å¾„ï¼Œå¯ä»¥ä¸º API æ–‡æ¡£åˆ›å»ºè‡ªå·±çš„æ¨¡æ¿ã€‚

æ²¡æœ‰æ—¶é—´ç”Ÿæˆè‡ªå·±çš„æ¨¡æ¿ï¼Ÿä»¥ä¸‹æ˜¯ä¸€äº›æ‚¨å¯ä»¥ä½¿ç”¨çš„éå¸¸ç®€æ´çš„æ¨¡æ¿é¡¹ç›®:

*   [ç¾å¹¶](https://github.com/nijikokun/minami)
*   [æ–‡ä»¶å¸¦](https://github.com/docstrap/docstrap)
*   [å¸ƒä¼¦ç‰¹é‡Œ JSDoc æ¨¡æ¿](https://github.com/braintree/jsdoc-template)

## JSDoc å’Œ Swagger

è¿™ä¸ªé¡¹ç›®é›†æˆäº† jsdoc å’Œ swaggerï¼Œå…è®¸ä½ ä½¿ç”¨æ ‡ç­¾@swagger åœ¨ä½ çš„ä»£ç å—:
ä¸Šä¸ºä½ çš„è·¯çº¿ç¼–å†™è§„èŒƒ

```
 /**
   * @swagger
   * /:
   *   get:
   *     description: Returns all users.
   *     responses:
   *       200:
   *         description: All users were returned.
   */
  app.get('/users', (req, res) => {
    // ...
  }); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

* * *

## çŸ¥é“ JSDoc è¿˜æœ‰ä»€ä¹ˆæœ‰è¶£çš„ç‰¹æ€§å—ï¼Ÿ

åœ¨è¯„è®ºé‡Œå‘Šè¯‰æˆ‘ï¼ğŸ‘‡