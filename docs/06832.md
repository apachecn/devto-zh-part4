# Android Studio 3.5 ä¸­æ›´å¥½çš„ä¾èµ–ç®¡ç†

> åŸæ–‡ï¼š<https://dev.to/jmfayard/better-dependency-management-in-android-studio-3-5-with-gradle-buildsrcversions-34e9>

Android Studio 3.5 å‘å¸ƒäº†ï¼ä½ æ›´æ–°äº†å—ï¼Ÿå»[https://developer.android.com/studio](https://developer.android.com/studio)ï¼Œæˆ‘ä¼šç­‰ã€‚

å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œæœ€è®©æˆ‘å…´å¥‹çš„ä¸æ˜¯ä»»ä½•æ–°åŠŸèƒ½ï¼Œè€Œæ˜¯ä¸€ä¸ª bugfixï¼Œå®ƒè®© android å¼€å‘è€…å†æ¬¡å…³æ³¨æˆ‘çš„å¼€æºä¾èµ–ç®¡ç†é¡¹ç›®ã€‚

## ![GitHub logo](img/75095a8afc1e0f207cda715962e75c8d.png)[ã€jmfaardã€‘](https://github.com/jmfayard)/[åˆ·æ–°ç‰ˆ](https://github.com/jmfayard/refreshVersions)

### ç”Ÿå‘½å¤ªçŸ­æš‚ï¼Œæ²¡æœ‰æ—¶é—´å»è°·æ­Œä¾èµ–å’Œç‰ˆæœ¬

<article class="markdown-body entry-content container-lg" itemprop="text">

# ä»€ä¹ˆæ˜¯ refreshVersionsï¼Ÿ

**refreshVersions** å¸®åŠ©**grade**ç”¨æˆ·å®Œæˆ**ç¹ççš„æ‰‹å·¥å·¥ä½œ**é€šå¸¸æ¶‰åŠæ·»åŠ å’Œæ›´æ–°**ä¾èµ–é¡¹åŠå…¶ç‰ˆæœ¬**ã€‚

[![](img/400e1cee45c783477900fdcdb386ff8d.png)](http://www.youtube.com/watch?v=VhYERonB8co "Gradle refreshVersions")

## è¯æ˜æ–‡ä»¶

*   [ä»è¿™é‡Œå¼€å§‹](https://jmfayard.github.io/refreshVersions/)
*   [è®¾ç½®åˆ·æ–°ç‰ˆæœ¬](https://jmfayard.github.io/refreshVersions/setup/)
*   [è¿ç§»æ‚¨çš„é¡¹ç›®](https://jmfayard.github.io/refreshVersions/migrate/)
*   [æŸ¥æ‰¾å¯ç”¨çš„ä¾èµ–å…³ç³»æ›´æ–°](https://jmfayard.github.io/refreshVersions/update-dependencies/)
*   [æ·»åŠ ä¾èµ–å…³ç³»](https://jmfayard.github.io/refreshVersions/add-dependencies/)
*   [æ¢ç´¢å†…ç½®ä¾èµ–ç¬¦å·](https://jmfayard.github.io/refreshVersions/dependency-notations/)
*   [è®¡åˆ’åˆ·æ–°ç‰ˆæœ¬æœºå™¨äºº](https://jmfayard.github.io/refreshVersions/refreshversions-bot/)
*   [ä½¿ç”¨ buildSrc](https://jmfayard.github.io/refreshVersions/gradle-buildsrcversions/)
*   [å˜æ›´æ—¥å¿—](https://jmfayard.github.io/refreshVersions/CHANGELOG/)

[**å‚è§ https://jmfayard.github.io/refreshVersions**T3 çš„æ–‡æ¡£](https://jmfayard.github.io/refreshVersions/)

## è®¾ç½®

```
// settings.gradle(.kts)
plugins {
    // See https://jmfayard.github.io/refreshVersions
    id("de.fayard.refreshVersions") version "0.50.2"
}
refreshVersions { // Optional: configure the plugin
    // ...
}
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

[é˜…è¯»å‹å¥½æ–‡æ¡£](https://jmfayard.github.io/refreshVersions/setup/)

## ä½¿ç”¨

ç¡®ä¿é¡¹ç›®è®¾ç½®æ­£ç¡®(è§ä¸Šæ–‡)ã€‚

**è¿ç§»é¡¹ç›®:**

ä»»åŠ¡å¯ä»¥å¸®åŠ©ä½ åœ¨å‡ åˆ†é’Ÿæˆ–è€…æ›´çŸ­çš„æ—¶é—´å†…è¿ç§»ä½ çš„é¡¹ç›®ã€‚

åœ¨ç‰ˆæœ¬ 0.50.0 ä¸­ï¼Œå¢åŠ äº†å¯¹ Gradle ç‰ˆæœ¬ç›®å½•çš„æ”¯æŒ([å‚è§è¿™é‡Œçš„è®¨è®ºçº¿ç¨‹](https://github.com/jmfayard/refreshVersions/discussions/592))ï¼Œæ‰€ä»¥ç°åœ¨éœ€è¦ä¸€ä¸ª`--mode`é€‰é¡¹ã€‚

åœ¨æ²¡æœ‰å®ƒçš„æƒ…å†µä¸‹è¿è¡Œå®ƒæ¥æŸ¥çœ‹å®Œæ•´çš„åˆ—è¡¨å’Œå®Œæ•´çš„æè¿°â€¦

</article>

[View on GitHub](https://github.com/jmfayard/refreshVersions)

è¿™ä¸ªé¡¹ç›®è¯ç”Ÿäºå¯¹ Android Studio è¿™ä¸ªé»‘æš—è§’è½æ—¥ç›Šå¢é•¿çš„åŒæ¶:

> ğŸ™€Gradle é¡¹ç›®åŒæ­¥å¤±è´¥ã€‚[ **å†è¯•ä¸€æ¬¡**ğŸ™€

[![](img/8bc3115646f6b89fac94b40b8d5fcc27.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--uoWw2rvR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://github.com/jmfayard/buildSrcVersions/raw/master/doc/try-again.png)

**â€œå†è¯•ä¸€æ¬¡â€**åœ¨è¿™é‡Œæœ‰ç‚¹ç”¨è¯ä¸å½“ã€‚

## Android Studio å¯¹ç¼–è¾‘ Gradle æ–‡ä»¶çš„æ”¯æŒå¾ˆå·®ğŸ˜¿

æ€»çš„æ¥è¯´ï¼ŒAndroid Studio æ˜¯ä¸€ä¸ªå‡ºè‰²çš„ IDEï¼Œä¸ Gradle çš„é›†æˆæ˜¯å®ƒçš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ã€‚å› æ­¤ï¼Œæ‚¨ä¼šæœŸæœ›æ‹¥æœ‰å¼ºå¤§çš„å·¥å…·æ”¯æŒæ¥ç¼–è¾‘æ‚¨çš„æ„å»ºæ–‡ä»¶ã€‚

ç›¸åï¼Œè¿™ä¸ªé”™è¯¯æ¶ˆæ¯æ­£æ˜¯å®ƒå´©æºƒçš„æ—¶åˆ»ã€‚ä¸è¦è¯´*å†è¯•ä¸€æ¬¡*ï¼Œæªè¾åº”è¯¥æ›´åƒè¿™æ ·:â€œ*ä½ åœ¨æŸä¸ªåœ°æ–¹æœ‰ä¸€äº›é”™è¯¯ï¼Œä½ è¦é ä½ è‡ªå·±å»ä¿®æ­£å®ƒã€‚ç¥ä½ å¥½è¿ï¼Œå‘Šè¯‰æˆ‘ä½ ä»€ä¹ˆæ—¶å€™**è®¤ä¸º**ä½ å®Œæˆäº†ã€‚*â€ã€‚

å¼€å‘äººå‘˜çš„ä½“éªŒå˜å¾—æ›´åƒæ˜¯æ‚¨å¯¹ JavaScript ä¸–ç•Œçš„æœŸæœ›ã€‚ä½ ä»æŸä¸ªç½‘ç«™å¤åˆ¶/ç²˜è´´äº†ä¸€äº›ä¸œè¥¿ï¼Œå¸Œæœ›æ˜¯åœ¨æ­£ç¡®çš„åœ°æ–¹(è¿™ä¸æ˜¯å°äº‹ï¼).æŠ±ç€æœ€å¥½çš„å¸Œæœ›ï¼Œæ‚¨è¿è¡Œå®ƒå¹¶æŠ›å‡ºä¸€ä¸ªç¥ç§˜çš„é”™è¯¯æ¶ˆæ¯ã€‚é‡å¤ä¸€éã€‚

ä¸ºä»€ä¹ˆæ˜é¢è¿™ä¹ˆå·®ï¼Ÿä¸ javascript ä¸–ç•Œä¸­çš„åŸå› éå¸¸ç›¸ä¼¼:æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨åŠ¨æ€è¯­è¨€(Groovy)åšå¤§é‡çš„å…ƒç¼–ç¨‹å·¥ä½œ(ä½¿ç”¨ Gradle æ’ä»¶)ã€‚

Gradle æœ‰æ­£ç¡®çš„é•¿æœŸè®¡åˆ’æ¥å…‹æœè¿™ä¸ªé—®é¢˜:[å°‘å†™ Groovyï¼Œå¤šå†™ Kotlin](https://dev.to/jmfayard/how-kotlin-makes-editing-your-gradle-build-less-frustrating-232l) ã€‚

è™½ç„¶ Kotlin å¯èƒ½æ˜¯æœªæ¥ï¼Œä½† Groovy æ˜¯ç°åœ¨ã€‚æˆ‘ä»¬éœ€è¦ä¸€äº›æ¸è¿›çš„è¿›å±•æ¥å¸®åŠ©æˆ‘ä»¬ç°åœ¨å·²ç»å­˜åœ¨çš„æ„å»ºã€‚

## grad le " build src "æ¨¡å—ğŸ˜¼

åœ¨ Android Studio 3.5 ä¸­ï¼ŒGradle çš„â€œbuildSrcâ€æ¨¡å—å¯ä»¥æ´¾ä¸Šç”¨åœºã€‚

> â€œbuildSrcâ€æ˜¯ä¸€ä¸ª Gradle æ¨¡å—ï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥åƒå¾€å¸¸ä¸€æ ·ç¼–å†™ Kotlin ä»£ç (æœ‰å®Œæ•´çš„å·¥å…·æ”¯æŒ)ã€‚ç„¶åï¼Œæ‚¨çš„æ‰€æœ‰æ„å»ºæ–‡ä»¶éƒ½å¯ä»¥ä½¿ç”¨è¿™äº›ä»£ç ï¼Œè€Œä¸æ˜¯æ‚¨çš„æœ€ç»ˆåº”ç”¨ç¨‹åºã€‚å…³é”®çš„æ˜¯ IntelliJ IDEA å’Œ Android Studio å¾ˆå¥½åœ°æ”¯æŒä»`build.gradle`å¼€å§‹è°ƒç”¨å®ƒ

ä½ å¯ä»¥æŠŠæ‰€æœ‰æœ‰ç‚¹å¤æ‚æˆ–è€…åº”è¯¥é‡ç”¨çš„ä¸œè¥¿éƒ½æ”¾åœ¨é‚£é‡Œï¼Œè®©ä½ çš„`build.gradle`æ–‡ä»¶ä¿æŒæ•´æ´ã€‚

æˆ‘æƒ³åˆ°çš„ä¸»è¦ç”¨ä¾‹æ˜¯æ›¿æ¢æˆ‘ä»¬ä»¥å‰ç¼–å†™çš„ Groovy [libraries.gradle æ–‡ä»¶](https://github.com/abbas-oveissi/SearchMovies/blob/607ce1c6f9aa48669ab1b91f8824e9251f2a1fa5/libraries.gradle):

[![](img/e893a692eae68fa38d1061fe1131ce58.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--P4AvL9p6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://miro.medium.com/max/1278/1%2A1Neqbi_bfoUscWrxhu2NbA.png)

è¿™å¾ˆç®€å•ï¼Œä½†æ˜¯...æˆ‘å¿…é¡»æ‰‹åŠ¨ç¼–å†™æ‰€æœ‰è¿™äº›ä»£ç å—ï¼Ÿ

æ‡’æƒ°æ˜¯ç¨‹åºå‘˜çš„ä¸‰å¤§ç¾å¾·ä¹‹ä¸€ï¼Œæ‰€ä»¥æˆ‘å†™äº†ä¸€ä¸ªæ’ä»¶ï¼Œè¯¢é—® Gradle æˆ‘çš„é¡¹ç›®ä½¿ç”¨äº†å“ªäº›ä¾èµ–é¡¹ï¼Œå¹¶è®© [KotlinPoet](https://github.com/square/kotlinpoet) ç”Ÿæˆè¿™äº›æ–‡ä»¶ã€‚

## Gradle buildSrcVersionsğŸ˜¸

é€šè¿‡ç¼–è¾‘æ ¹æ–‡ä»¶`build.gradle(.kts)`å®‰è£…æ’ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤º: