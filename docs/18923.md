# ä½¿ç”¨ JHipster é¢†åŸŸè¯­è¨€åœ¨ 30 åˆ†é’Ÿå†…åˆ›å»ºå®Œæ•´çš„å¾®æœåŠ¡å †æ ˆ

> åŸæ–‡ï¼š<https://dev.to/deepu105/create-full-microservice-stack-using-jhipster-domain-language-under-30-minutes-4ele>

*æœ€åˆå‘å¸ƒäº[deepu . tech](https://deepu.tech/create-full-microservice-stack-using-j-hipster-domain-language-under-30-minutes/)T3ã€‚*

æˆ‘å†™åšå®¢å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œå‡ å¹´å‰æˆ‘å†™äº†ä¸€äº›ï¼Œä½†ä»æ¥æ²¡æœ‰çœŸæ­£ç»§ç»­å†™è¿‡ã€‚æ‰€ä»¥å½“æˆ‘å†³å®šé‡æ–°å¼€å§‹å†™ä½œæ—¶ï¼Œæˆ‘ä¸éœ€è¦å¯¹ä¸€ä¸ªä¸»é¢˜æƒ³å¤ªå¤šï¼Œå› ä¸ºè¿™ä¸ªä¸»é¢˜å¾ˆæ˜æ˜¾â€”â€”T2ã€‚

JHipster æ˜¯ Java web åº”ç”¨ç¨‹åºå’Œå¾®æœåŠ¡å¼€å‘çš„å¼€å‘å¹³å°ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ª JVM å¼€å‘è€…ï¼Œä½ å¯èƒ½å·²ç»å¬è¯´è¿‡ [JHipster](https://www.jhipster.tech/) ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆï¼Œä½ é”™è¿‡äº†å¾ˆå¤šï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ å»çœ‹çœ‹ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨[äºšé©¬é€Š](https://www.amazon.com/Stack-Development-JHipster-Deepu-Sasidharan/dp/178847631X)å’Œ [Packt](https://www.packtpub.com/application-development/full-stack-development-jhipster) ä¸ŠæŸ¥çœ‹æˆ‘çš„ä¹¦ã€Š**ç”¨ JHipster** è¿›è¡Œå…¨æ ˆå¼€å‘ã€‹æ¥äº†è§£ JHipsterã€‚

æˆ‘ä» 2015 å¹´ 4 æœˆå¼€å§‹å¼€å‘ JHipsterï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘å®ç°çš„æœ€é…·çš„åŠŸèƒ½æ— ç–‘æ˜¯ä½¿ç”¨ JDL ç”Ÿæˆå¤šä¸ªåº”ç”¨ç¨‹åºã€‚è¿™ä¸ªç‰¹æ€§åœ¨ JHipster çš„æœ€æ–°ç‰ˆæœ¬ä¸­å¯ç”¨ã€‚å¦‚æœä½ å¯¹ JDL ä¸ç†Ÿæ‚‰ï¼Œæˆ‘æ¨èä½ å» https://www.jhipster.tech/jdl/æŸ¥é˜…è¿™äº›æ–‡ä»¶

## ç”µå­å•†åŠ¡åº”ç”¨

å› æ­¤ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ JHipster åˆ›å»ºå¾®æœåŠ¡å †æ ˆã€‚æˆ‘ä»¬ä»Šå¤©å°†å»ºç«‹ä¸€ä¸ªç”µå­å•†åŠ¡å•†åº—ã€‚å †æ ˆåŒ…æ‹¬-

*   ä½¿ç”¨ JHipster Registry çš„æœåŠ¡å‘ç°ï¼Œè¿™æ˜¯ä¸€ä¸ª Spring boot åº”ç”¨ç¨‹åºï¼Œå®ƒæ‰“åŒ…äº† Eureka server å’Œ Spring cloud config serverã€‚

*   ä½¿ç”¨ Spring Bootã€ç½‘é£ Zuulã€ReactJS å’Œ Swagger çš„ API ç®¡ç†å’Œç½‘å…³ã€‚

*   ä½¿ç”¨ Spring Boot çš„å¾®æœåŠ¡ã€‚

*   ä½¿ç”¨ç”±å¼¹æ€§å †æ ˆ(ELK)å’Œ Zipkin åˆ¶æˆçš„ JHipster æ§åˆ¶å°è¿›è¡Œç›‘æ§ã€‚

[![Microservice application architecture](img/def08e5ff8344536a7a45b2f8611d04e.png) ](https://res.cloudinary.com/practicaldev/image/fetch/s--DXg7gK9m--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2000/1%2Ab4krMVZ-mqjxAIh_EM1jhQ.png) *å¾®æœåŠ¡åº”ç”¨æ¶æ„*

ç½‘å…³å°†ä¼ å…¥çš„è¯·æ±‚è·¯ç”±åˆ°ä¸¤ä¸ªå¾®æœåŠ¡ï¼Œå‘ç¥¨åº”ç”¨ç¨‹åºå’Œé€šçŸ¥åº”ç”¨ç¨‹åºã€‚

### è¦æ±‚

ä¸ºäº†éµå¾ªè¿™ä¸ªæ•™ç¨‹ï¼Œä½ éœ€è¦åœ¨ä½ çš„ç”µè„‘ä¸Šå®‰è£…ä¸€ä¸ªæœ€æ–°ç‰ˆæœ¬çš„ **Docker** ã€ **Docker-compose** ã€ **NodeJS** å’Œ **Java** ã€‚ä»¥ä¸‹æ˜¯æˆ‘å®‰è£…è¿‡çš„ç‰ˆæœ¬(**æ›´æ–°**:æœ‰äº† JHipster 6+å°±å¯ä»¥ç”¨ Java 11 & 12)ã€‚

```
$ docker -v                                                                                                                       
Docker version 18.06.1-ce, build e68fc7a

$ docker-compose -v                                
docker-compose version 1.20.1, build 5d8c71b

$ node -v                
v8.11.4

$ java -version          
openjdk version "1.8.0_212"
OpenJDK Runtime Environment (Zulu 8.38.0.13-CA-linux64) (build 1.8.0_212-b04)
OpenJDK 64-Bit Server VM (Zulu 8.38.0.13-CA-linux64) (build 25.212-b04, mixed mode) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é¦–å…ˆï¼Œå®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ JHipster

```
$ npm install generator-jhipster -g 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒéªŒè¯æ‚¨æ˜¯å¦æ‹¥æœ‰ç‰ˆæœ¬ **5.3.4** æˆ–æ›´é«˜ç‰ˆæœ¬

```
$ jhipster --version 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### åˆ›é€  JDL

ç°åœ¨è®©æˆ‘ä»¬åˆ›é€ æˆ‘ä»¬çš„ JDLã€‚å‰å¾€ [JDL å·¥ä½œå®¤](https://start.jhipster.tech/jdl-studio/)æˆ–è€…ä½ æœ€å–œæ¬¢çš„ IDE/ç¼–è¾‘å™¨(*å¦‚æœä½ å–œæ¬¢*ï¼Œä½ å¯ä»¥ä½¿ç”¨ [JHipster IDE](https://www.jhipster.tech/jhipster-ide/) æ’ä»¶)ã€‚

é¦–å…ˆï¼Œè®©æˆ‘ä»¬å®šä¹‰æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬å°†ä»ç½‘å…³å¼€å§‹

```
application {
  config {
    baseName store,
    applicationType gateway,
    packageName com.jhipster.demo.store,
    serviceDiscoveryType eureka,
    authenticationType jwt,
    prodDatabaseType mysql,
    cacheProvider hazelcast,
    buildTool gradle,
    clientFramework react,
    testFrameworks [protractor]
  }
  entities *
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¤§å¤šæ•°é€‰é¡¹éƒ½æ˜¯ä¸è¨€è‡ªæ˜çš„ï¼Œæˆ‘ä»¬æ­£åœ¨æ„å»ºä¸€ä¸ªåä¸º **Store** çš„åº”ç”¨ç¨‹åºï¼Œå…¶ç±»å‹ä¸º **Gateway** ï¼Œå…·æœ‰ **JWT** è®¤è¯å’Œ**åŸºäº Eureka** çš„æœåŠ¡å‘ç°ã€‚åº”ç”¨ç¨‹åºä½¿ç”¨ä¸€ä¸ª **MySQL** æ•°æ®åº“å’Œ **Hazelcast** è¿›è¡Œç¼“å­˜ã€‚å®ƒæ˜¯ä½¿ç”¨ **Gradle** æ„å»ºçš„ã€‚å¯¹äºå®¢æˆ·ç«¯ï¼Œå®ƒä½¿ç”¨ **React** å’Œ **Sass** ã€‚å®ƒè¿˜æœ‰ç”¨äºç«¯åˆ°ç«¯æµ‹è¯•çš„**é‡è§’å™¨**ã€‚

åœ¨å®šä¹‰çš„æœ€åä½ å¯ä»¥çœ‹åˆ°`entities *`ï¼Œæˆ‘ä»¬ç¨åä¼šè°ˆåˆ°è¿™ä¸€ç‚¹ã€‚

ç°åœ¨è®©æˆ‘ä»¬æ¥å®šä¹‰æˆ‘ä»¬çš„å‘ç¥¨å¾®æœåŠ¡

```
application {
  config {
    baseName invoice,
    applicationType microservice,
    packageName com.jhipster.demo.invoice,
    serviceDiscoveryType eureka,
    authenticationType jwt,
    prodDatabaseType mysql,
    buildTool gradle,
    serverPort 8081
  }
  entities Invoice, Shipment
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å®ƒéµå¾ªç±»ä¼¼çš„é€‰é¡¹ï¼Œå¦‚æˆ‘ä»¬çš„ç½‘å…³ï¼Œå› ä¸ºå®ƒæ˜¯å¾®æœåŠ¡ï¼Œå®ƒæ²¡æœ‰å®šä¹‰ä»»ä½•å®¢æˆ·ç«¯é€‰é¡¹ï¼Œä¹Ÿè·³è¿‡äº†ç”¨æˆ·ç®¡ç†ï¼Œå› ä¸ºå®ƒå°†ç”±ç½‘å…³å¤„ç†ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜æåˆ°äº†ä¸€ä¸ªè‡ªå®šä¹‰ç«¯å£ **8081** ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å¸Œæœ›è¿™ä¸ªåº”ç”¨ç¨‹åºä¸ç½‘å…³ä½¿ç”¨çš„é»˜è®¤ç«¯å£ 8080 å†²çªã€‚

ç°åœ¨è®©æˆ‘ä»¬å®šä¹‰ç¬¬äºŒä¸ªå¾®æœåŠ¡ï¼Œé€šçŸ¥åº”ç”¨ç¨‹åº

```
application {
  config {
    baseName notification,
    applicationType microservice,
    packageName com.jhipster.demo.notification,
    serviceDiscoveryType eureka,
    authenticationType jwt,
    databaseType mongodb,
    cacheProvider no,
    enableHibernateCache false,
    buildTool gradle,
    serverPort 8082
  }
  entities Notification
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¸ªåº”ç”¨ç¨‹åºéµå¾ªè®¸å¤šç±»ä¼¼äºç½‘å…³å’Œå‘ç¥¨åº”ç”¨ç¨‹åºçš„é€‰é¡¹ï¼Œä½†æ˜¯å®ƒä¸ä½¿ç”¨ MySQLï¼Œè€Œæ˜¯ä½¿ç”¨ **MongoDB** ä½œä¸ºå®ƒçš„æ•°æ®åº“ï¼Œå¹¶ä¸”è¿˜ç¦ç”¨äº†ç¼“å­˜ã€‚

æ—¢ç„¶æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå®šä¹‰å·²ç»å®Œæˆï¼Œæˆ‘ä»¬å°†ç»§ç»­å®šä¹‰æˆ‘ä»¬çš„å®ä½“æ¨¡å‹ã€‚

å¯¹äºæˆ‘ä»¬çš„ç½‘å…³å•†åº—åº”ç”¨ç¨‹åºï¼Œè®©æˆ‘ä»¬å®šä¹‰ä»¥ä¸‹å®ä½“å’Œæšä¸¾

```
/** Product sold by the Online store */
entity Product {
    name String required
    description String
    price BigDecimal required min(0)
    size Size required
    image ImageBlob
}

enum Size {
    S, M, L, XL, XXL
}

entity ProductCategory {
    name String required
    description String
}

entity Customer {
    firstName String required
    lastName String required
    gender Gender required
    email String required pattern(/^[^@\s]+@[^@\s]+\.[^@\s]+$/)
    phone String required
    addressLine1 String required
    addressLine2 String
    city String required
    country String required
}

enum Gender {
    MALE, FEMALE, OTHER
}

entity ProductOrder {
    placedDate Instant required
    status OrderStatus required
    code String required
    invoiceId Long
}

enum OrderStatus {
    COMPLETED, PENDING, CANCELLED
}

entity OrderItem {
    quantity Integer required min(0)
    totalPrice BigDecimal required min(0)
    status OrderItemStatus required
}

enum OrderItemStatus {
    AVAILABLE, OUT_OF_STOCK, BACK_ORDER
}

relationship OneToOne {
    Customer{user(login) required} to User
}

relationship ManyToOne {
    OrderItem{product(name) required} to Product
}

relationship OneToMany {
    Customer{order} to ProductOrder{customer(email) required},
    ProductOrder{orderItem} to OrderItem{order(code) required},
    ProductCategory{product} to Product{productCategory(name)}
}

service Product, ProductCategory, Customer, ProductOrder, OrderItem with serviceClass
paginate Product, Customer, ProductOrder, OrderItem with pagination 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

JDL å®šä¹‰äº†å®ä½“ã€æšä¸¾ã€å®ä½“ä¹‹é—´çš„å…³ç³»ä»¥åŠé€‰é¡¹ï¼Œå¦‚åˆ†é¡µå’ŒæœåŠ¡å±‚ã€‚

å®ä½“å­—æ®µå®šä¹‰éµå¾ªä»¥ä¸‹è¯­æ³•

```
entity <entity name> {
  <field name> <type> [<validation>*]
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å…³ç³»å®šä¹‰éµå¾ªä»¥ä¸‹è¯­æ³•

```
relationship (OneToMany | ManyToOne | OneToOne | ManyToMany) {
    <from entity>[{<relationship name>[(<display field>)]}] 
    to 
    <to entity>[{<relationship name>[(<display field>)]}]
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å‚è€ƒ [JDL æ–‡æ¡£](https://www.jhipster.tech/jdl/)è·å–å®Œæ•´çš„ DSL å‚è€ƒã€‚

å‘ç¥¨å¾®æœåŠ¡åº”ç”¨ç¨‹åºå…·æœ‰ä»¥ä¸‹å®ä½“

```
entity Invoice {
    code String required
    date Instant required
    details String
    status InvoiceStatus required
    paymentMethod PaymentMethod required
    paymentDate Instant required
    paymentAmount BigDecimal required
}

enum InvoiceStatus {
    PAID, ISSUED, CANCELLED
}

entity Shipment {
    trackingCode String
    date Instant required
    details String
}

enum PaymentMethod {
    CREDIT_CARD, CASH_ON_DELIVERY, PAYPAL
}

relationship OneToMany {
    Invoice{shipment} to Shipment{invoice(code) required}
}

service Invoice, Shipment with serviceClass
paginate Invoice, Shipment with pagination
microservice Invoice, Shipment with invoice 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ³¨æ„è¿™é‡Œå£°æ˜çš„æœ€åä¸€ä¸ª**å¾®æœåŠ¡**é€‰é¡¹ï¼Œå®ƒæŒ‡å®šè¿™äº›å®ä½“å±äºåä¸º**å‘ç¥¨**çš„å¾®æœåŠ¡ï¼Œä»¥ä¾¿æˆ‘ä»¬çš„ç½‘å…³çŸ¥é“å°†è¿™äº›å®ä½“çš„è¯·æ±‚è·¯ç”±åˆ°å“ªé‡Œã€‚

ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹é€šçŸ¥å¾®æœåŠ¡åº”ç”¨ç¨‹åºçš„å®ä½“

```
entity Notification {
    date Instant required
    details String
    sentDate Instant required
    format NotificationType required
    userId Long required
    productId Long required
}

enum NotificationType {
    EMAIL, SMS, PARCEL
}

microservice Notification with notification 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨è®©æˆ‘ä»¬å›åˆ°åº”ç”¨ç¨‹åºå®šä¹‰ä¸­ä½¿ç”¨çš„ entities å…³é”®å­—ã€‚

```
application {
  config {
    ...
  }
  entities *
}

application {
  config {
    ...
  }
  entities Invoice, Shipment
}

application {
  config {
    ...
  }
  entities Notification
}

/* Entities for Store Gateway */

entity Product {
    ...
}

entity ProductCategory {
    ...
}

entity Customer {
    ...
}

entity ProductOrder {
    ...
}

entity OrderItem {
    ...
}

microservice Invoice, Shipment with invoice

/* Entities for Invoice microservice */
entity Invoice {
    ...
}

entity Shipment {
    ...
}

/* Entities for notification microservice */

entity Notification {
    ...
}

microservice Notification with notification 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æŒ‡ç¤ºå•†åº—ç½‘å…³åº”ç”¨ç¨‹åºï¼Œå®ƒåº”è¯¥åŒ…å« JDL ä¸­å®šä¹‰çš„æ‰€æœ‰å®ä½“ï¼Œå¹¶ä¸”ç½‘å…³å°†çŸ¥é“è·³è¿‡å±äºå¦ä¸€ä¸ªå¾®æœåŠ¡çš„å®ä½“çš„æœåŠ¡å™¨ç«¯ä»£ç ï¼Œå› æ­¤å°†åªä¸ºè¿™äº›å®ä½“ç”Ÿæˆå®¢æˆ·ç«¯ä»£ç ï¼Œè¿™é‡Œå³**å‘ç¥¨**ã€**å‘è´§**å’Œ**é€šçŸ¥**ã€‚æˆ‘ä»¬è¿˜æŒ‡ç¤ºå‘ç¥¨åº”ç”¨ç¨‹åºå’Œé€šçŸ¥åº”ç”¨ç¨‹åºåŒ…å«å…¶å®ä½“ã€‚

### ç”Ÿæˆç”³è¯·

åˆ›å»ºä¸€ä¸ªæˆ‘ä»¬æƒ³è¦åˆ›å»ºå¾®æœåŠ¡å †æ ˆçš„æ–‡ä»¶å¤¹ã€‚

```
$ mkdir ecommerce && cd ecommerce 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œè®©æˆ‘ä»¬æŠŠæ‰€æœ‰çš„ä¸œè¥¿æ”¾å…¥ä¸€ä¸ª JDL æ¡£æ¡ˆã€‚è®©æˆ‘ä»¬ç§°å®ƒä¸º`app.jdl`å¹¶ä¿å­˜åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚

```
application {
  config {
    baseName store,
    applicationType gateway,
    packageName com.jhipster.demo.store,
    serviceDiscoveryType eureka,
    authenticationType jwt,
    prodDatabaseType mysql,
    cacheProvider hazelcast,
    buildTool gradle,
    clientFramework react,
    testFrameworks [protractor]
  }
  entities *
}

application {
  config {
    baseName invoice,
    applicationType microservice,
    packageName com.jhipster.demo.invoice,
    serviceDiscoveryType eureka,
    authenticationType jwt,
    prodDatabaseType mysql,
    buildTool gradle,
    serverPort 8081
  }
  entities Invoice, Shipment
}

application {
  config {
    baseName notification,
    applicationType microservice,
    packageName com.jhipster.demo.notification,
    serviceDiscoveryType eureka,
    authenticationType jwt,
    databaseType mongodb,
    cacheProvider no,
    enableHibernateCache false,
    buildTool gradle,
    serverPort 8082
  }
  entities Notification
}

/* Entities for Store Gateway */

/** Product sold by the Online store */
entity Product {
    name String required
    description String
    price BigDecimal required min(0)
    size Size required
    image ImageBlob
}

enum Size {
    S, M, L, XL, XXL
}

entity ProductCategory {
    name String required
    description String
}

entity Customer {
    firstName String required
    lastName String required
    gender Gender required
    email String required pattern(/^[^@\s]+@[^@\s]+\.[^@\s]+$/)
    phone String required
    addressLine1 String required
    addressLine2 String
    city String required
    country String required
}

enum Gender {
    MALE, FEMALE, OTHER
}

entity ProductOrder {
    placedDate Instant required
    status OrderStatus required
    code String required
    invoiceId Long
}

enum OrderStatus {
    COMPLETED, PENDING, CANCELLED
}

entity OrderItem {
    quantity Integer required min(0)
    totalPrice BigDecimal required min(0)
    status OrderItemStatus required
}

enum OrderItemStatus {
    AVAILABLE, OUT_OF_STOCK, BACK_ORDER
}

relationship OneToOne {
    Customer{user(login) required} to User
}

relationship ManyToOne {
 OrderItem{product(name) required} to Product
}

relationship OneToMany {
   Customer{order} to ProductOrder{customer(email) required},
   ProductOrder{orderItem} to OrderItem{order(code) required} ,
   ProductCategory{product} to Product{productCategory(name)}
}

service Product, ProductCategory, Customer, ProductOrder, OrderItem with serviceClass
paginate Product, Customer, ProductOrder, OrderItem with pagination

/* Entities for Invoice microservice */
entity Invoice {
    code String required
    date Instant required
    details String
    status InvoiceStatus required
    paymentMethod PaymentMethod required
    paymentDate Instant required
    paymentAmount BigDecimal required
}

enum InvoiceStatus {
    PAID, ISSUED, CANCELLED
}

entity Shipment {
    trackingCode String
    date Instant required
    details String
}

enum PaymentMethod {
    CREDIT_CARD, CASH_ON_DELIVERY, PAYPAL
}

relationship OneToMany {
    Invoice{shipment} to Shipment{invoice(code) required}
}

service Invoice, Shipment with serviceClass
paginate Invoice, Shipment with pagination
microservice Invoice, Shipment with invoice

/* Entities for notification microservice */

entity Notification {
    date Instant required
    details String
    sentDate Instant required
    format NotificationType required
    userId Long required
    productId Long required
}

enum NotificationType {
    EMAIL, SMS, PARCEL
}

microservice Notification with notification 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨è®©æˆ‘ä»¬è°ƒç”¨ JHipster CLI æ¥å¯¼å…¥è¿™ä¸ªæ–‡ä»¶

```
$ jhipster import-jdl app.jdl 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°†åˆ›å»º**å•†åº—**ã€**å‘ç¥¨**å’Œ**é€šçŸ¥**æ–‡ä»¶å¤¹ï¼Œå¹¶å°†åœ¨æ¯ä¸ªæ–‡ä»¶å¤¹ä¸­æ‰§è¡Œä»¥ä¸‹æ“ä½œ

*   ç”Ÿæˆé€‚å½“çš„åº”ç”¨ç¨‹åºå’Œå®ä½“é…ç½®ã€‚

*   åŸºäºé…ç½®ç”Ÿæˆåº”ç”¨ç¨‹åºå’Œå®ä½“æºä»£ç ã€‚

*   ä¸ºåº”ç”¨ç¨‹åºå®‰è£… NPM ä¾èµ–é¡¹ã€‚

è¯¥è¿‡ç¨‹å®Œæˆåï¼Œæ‚¨åº”è¯¥ä¼šåœ¨æ§åˆ¶å°ä¸Šçœ‹åˆ°ä»¥ä¸‹å†…å®¹

```
Entity Product generated successfully.
Entity ProductCategory generated successfully.
Entity Customer generated successfully.
Entity ProductOrder generated successfully.
Entity OrderItem generated successfully.
Entity Invoice generated successfully.
Entity Shipment generated successfully.
Entity Notification generated successfully.
Congratulations, JHipster execution is complete! 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æµè§ˆä¸€ä¸‹ç”Ÿæˆçš„ä»£ç ï¼Œç†Ÿæ‚‰ä¸€ä¸‹ã€‚

### ç”¨ Docker è¿è¡Œåº”ç”¨ç¨‹åº

ç°åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå·²ç»åˆ›å»ºå¥½äº†ï¼Œæ˜¯æ—¶å€™ä½¿ç”¨ Docker åœ¨æœ¬åœ°æµ‹è¯•å®ƒä»¬äº†ã€‚ä¸ºæ­¤ï¼Œé¦–å…ˆè®©æˆ‘ä»¬ä½¿ç”¨ JHipster ç”Ÿæˆä¸€äº› docker ç»„åˆé…ç½®ã€‚

åœ¨**ç”µå­å•†åŠ¡**æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ï¼Œå¹¶è¿è¡Œ JHipster docker-compose å‘½ä»¤

```
$ mkdir docker-compose && cd docker-compose
$ jhipster docker-compose 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å®ƒä¼šæç¤ºæ‚¨å‡ ä¸ªé—®é¢˜ï¼Œé€‰æ‹©ä¸‹é¢çªå‡ºæ˜¾ç¤ºçš„ç­”æ¡ˆ

```
ğŸ³  Welcome to the JHipster Docker Compose Sub-Generator ğŸ³
Files will be generated in folder: /home/deepu/workspace/temp/ecommerce/docker-compose
âœ” Docker is installed

? Which *type* of application would you like to deploy? Microservice application

? Which *type* of gateway would you like to use? JHipster gateway based on Netflix Zuul

? Enter the root directory where your gateway(s) and microservices are located ../

3 applications found at /home/deepu/workspace/temp/ecommerce/
? Which applications do you want to include in your configuration? invoice, notification, store

? Which applications do you want to use with clustered databases (only available with MongoDB and Couchbase)? 

? Do you want to setup monitoring for your applications ? Yes, for logs and metrics with the JHipster Console (based on ELK and Zipkin)

? You have selected the JHipster Console which is based on the ELK stack and additional technologies, which one do you want to use ? Zipkin, for distributed tracing (only compatible with
 JHipster >= v4.2.0)

JHipster registry detected as the service discovery and configuration provider used by your apps
? Enter the admin password used to secure the JHipster Registry? admin 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°†ä¸ºå †æ ˆç”Ÿæˆæ‰€æœ‰éœ€è¦çš„ docker-compose é…ç½®ï¼Œè¿˜å°†æ‰“å°å‡ºæ„å»º docker æ˜ åƒçš„è¿›ä¸€æ­¥æŒ‡ä»¤ã€‚

**æ³¨æ„:**åœ¨æœ€æ–°çš„ JHipster ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬è¿ç§»åˆ°ä½¿ç”¨ [Jib](https://github.com/GoogleContainerTools/jib) æ¥åˆ›å»º Docker å›¾åƒã€‚è¿™æ˜¯å¯¹æˆ‘ä»¬ä½¿ç”¨çš„ Docker Maven æ’ä»¶çš„å·¨å¤§æ”¹è¿›ï¼Œç»“æœåˆ›å»ºå›¾åƒçš„å‘½ä»¤å˜æˆäº†`./gradlew -Pprod bootWar jibDockerBuild`ã€‚

```
Docker Compose configuration generated with missing images!
To generate the missing Docker image(s), please run:
  ./gradlew -Pprod bootWar jibDockerBuild in /home/deepu/workspace/temp/ecommerce/invoice
  ./gradlew -Pprod bootWar jibDockerBuild in /home/deepu/workspace/temp/ecommerce/notification
  ./gradlew -Pprod bootWar jibDockerBuild in /home/deepu/workspace/temp/ecommerce/store 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æŒ‰ç…§è¯´æ˜æ„å»º docker æ˜ åƒã€‚ä¸€æ—¦æ‰€æœ‰ 3 ä¸ªå›¾åƒéƒ½æ„å»ºå¥½äº†ï¼Œä» **docker-compose** æ–‡ä»¶å¤¹è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å¯åŠ¨æ‰€æœ‰çš„ä¸œè¥¿ã€‚

```
$ docker-compose up -d 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸€æ—¦å®¹å™¨å¯åŠ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æµæ—¥å¿—

```
$ docker-compose logs -f 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æŠŠä½ æœ€å–œæ¬¢çš„æµè§ˆå™¨æŒ‡å‘ [http://localhost:8080/](http://localhost:8080/) ï¼Œçœ‹çœ‹ç”µå•†å¾®æœåŠ¡åº”ç”¨åœ¨è¡ŒåŠ¨ã€‚

[![Gateway application(Store)](img/f303f33fe6b8bb9911069d59aecbc410.png) ](https://res.cloudinary.com/practicaldev/image/fetch/s--0ThU3_1j--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2604/1%2ANR3QX_Q88_a4cWJ9X3fcnw.png) *ã€ç½‘å…³åº”ç”¨(å•†åº—)*

æ‚¨å¯ä»¥åœ¨ [http://localhost:8761/](http://localhost:8761/#/) çœ‹åˆ° JHipster æ³¨å†Œä¸­å¿ƒçš„è¿è¡Œ

[![JHipster Registry](img/203e3fbc79552180dde032d0dc092f47.png) ](https://res.cloudinary.com/practicaldev/image/fetch/s--k9YWBDEZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2604/1%2AF-MV1Q_jsBvUHHeInJR8TA.png) *å‰æ™®æ–¯ç‰¹æ³¨å†Œè¡¨*

æœ€åæ˜¯ JHipster æ§åˆ¶å°ï¼Œä½äº [http://localhost:5601](http://localhost:5601) /

[![JHipster Console- Kibana dashboard](img/de4458ec62699deec2c363371e568cca.png) ](https://res.cloudinary.com/practicaldev/image/fetch/s--x3PPgxTz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2616/1%2Av2tJsdLIJcVwm7RDAI_YVg.png) *å‰æ™®æ–¯ç‰¹æ§åˆ¶å°â€”â€”åŸºå·´çº³ä»ªè¡¨ç›˜*

ä¸€æ—¦ä½ ç©å®Œäº†ï¼Œä½ å¯ä»¥åœ¨ **docker-compose** æ–‡ä»¶å¤¹ä¸­è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å…³é—­ä¸€åˆ‡

```
docker-compose down 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¸Œæœ›æ‚¨å–œæ¬¢ä½¿ç”¨ JHipster åˆ›å»ºå¾®æœåŠ¡ã€‚è¦äº†è§£å¦‚ä½•å°† JHipster monolith è½¬æ¢ä¸ºå¾®æœåŠ¡ï¼Œè¯·æŸ¥çœ‹æˆ‘åœ¨[äºšé©¬é€Š](https://www.amazon.com/Stack-Development-JHipster-Deepu-Sasidharan/dp/178847631X)å’Œ [Packt](https://www.packtpub.com/application-development/full-stack-development-jhipster) ä¸Šçš„ä¹¦â€œ*ç”¨ JHipster* è¿›è¡Œå…¨æ ˆå¼€å‘â€ã€‚

åœ¨æ¥ä¸‹æ¥çš„å‡ å‘¨é‡Œï¼Œæˆ‘ä¼šå†™ä¸€äº›å…³äºå°†è¿™ä¸ªå¾®æœåŠ¡æ ˆéƒ¨ç½²åˆ°å„ç§äº‘æä¾›å•†çš„å¸–å­ï¼Œæ¯”å¦‚ GCPã€Azureã€AWSã€Heroku ç­‰ç­‰ã€‚

å¦‚æœä½ å–œæ¬¢ JHipsterï¼Œåˆ«å¿˜äº†åœ¨ [Github](https://github.com/jhipster/generator-jhipster) ä¸Šç»™å®ƒä¸€é¢—æ˜Ÿã€‚

å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·ç•™ä¸‹èµæˆ–è¯„è®ºã€‚

ä½ å¯ä»¥åœ¨ [Twitter](https://twitter.com/deepu105) å’Œ [LinkedIn](https://www.linkedin.com/in/deepu05/) ä¸Šå…³æ³¨æˆ‘ã€‚

æˆ‘çš„å…¶ä»–ç›¸å…³å¸–å­:

1.  [åœ¨ Azure Kubernetes æœåŠ¡(AKS)ä¸Šéƒ¨ç½² JHipster å¾®æœåŠ¡](https://deepu.tech/deploying-jhipster-microservices-on-azure-kubernetes-service-aks)

2.  [åœ¨ Kubernetes ä¸Šä½¿ç”¨ Istio æœåŠ¡ç½‘æ ¼çš„ JHipster å¾®æœåŠ¡](https://deepu.tech/jhipster-microservices-with-istio-service-mesh-on-kubernetes)

åŸè½½äº[åª’ä½“](https://medium.com/jhipster/create-full-microservice-stack-using-jhipster-domain-language-under-30-minutes-ecc6e7fc3f77)2018 . 9 . 22