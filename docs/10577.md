# æœ‰åº§å±±è¦çˆ¬

> åŸæ–‡:[https://dev.to/jtenner/there-s-a-mountain-to-climb-3402](https://dev.to/jtenner/there-s-a-mountain-to-climb-3402)

AssemblyScript æ˜¯ Web ç¨‹åºé›†ç¼–è¯‘å™¨çš„ç±»å‹è„šæœ¬ã€‚å®ƒç›®å‰æ­£ä»¥éå¸¸å¿«çš„é€Ÿåº¦æˆç†Ÿï¼Œä½†åƒæ‰€æœ‰é¡¹ç›®ä¸€æ ·ï¼Œå®ƒéœ€è¦å¤§é‡çš„åŠªåŠ›å’Œå¥‰çŒ®æ‰èƒ½å˜å¾—æ›´å¥½ã€‚å¿…é¡»å¬ä»è´£ä»»çš„å¬å”¤ï¼Œä»é¾™ç©´ä¸­è·å–é»„é‡‘ã€‚

## ![GitHub logo](../Images/a73f630113876d78cff79f59c2125b24.png) [ç»„è£…è„šæœ¬](https://github.com/AssemblyScript) / [ç»„è£…è„šæœ¬](https://github.com/AssemblyScript/assemblyscript)

### è‚¯å®šä¸æ˜¯ WebAssembly ç¼–è¯‘å™¨çš„ç±»å‹è„šæœ¬ğŸš€

<article class="markdown-body entry-content container-lg" itemprop="text">

[![AssemblyScript logo](../Images/991b4653baee4f5000ba823d7265b53e.png)T2ã€‘](https://assemblyscript.org)

[![Test status](../Images/76340ce00a0a10c745566947f91c0a1c.png)](https://github.com/AssemblyScript/assemblyscript/actions?query=workflow%3ATest)[![Publish status](../Images/699ea13a9ee0376aca5fde6fce52fcaf.png)](https://github.com/AssemblyScript/assemblyscript/actions?query=workflow%3APublish)[![npm compiler version](../Images/8145eb2c775dde2e06500dca701c0ad9.png)](https://www.npmjs.com/package/assemblyscript)[![npm loader version](../Images/9cea788c57f063697d742cfe1721459d.png)](https://www.npmjs.com/package/@assemblyscript/loader)[![Discord online](../Images/f55d42249a841f29fffb440efb3aa83e.png)](https://discord.gg/assemblyscript)

**AssemblyScript** ä½¿ç”¨ [Binaryen](https://github.com/WebAssembly/binaryen) å°† [TypeScript](http://www.typescriptlang.org) (åŸºæœ¬ä¸Šæ˜¯å¸¦ç±»å‹çš„ JavaScript)çš„ä¸¥æ ¼å˜ä½“ç¼–è¯‘æˆ [WebAssembly](http://webassembly.org) ã€‚å®ƒç”Ÿæˆç²¾ç›Šå’Œå¹³å‡çš„ WebAssembly æ¨¡å—ï¼Œè€Œä»…ä»…æ˜¯ä¸€ä¸ª`npm install`ä¹‹é¥ã€‚

### [å…³äº](https://assemblyscript.org) [ç®€ä»‹](https://assemblyscript.org/introduction.html) [å¿«é€Ÿå…¥é—¨](https://assemblyscript.org/quick-start.html) [å¼€å‘è¯´æ˜](https://assemblyscript.org/development.html)

## è´¡çŒ®è€…

[![Contributor logos](../Images/078a49b07397ff575b3d1e7b61be51a0.png)T2ã€‘](https://assemblyscript.org/#contributors)

## æ„Ÿè°¢æˆ‘ä»¬çš„èµåŠ©å•†ï¼

å¤§å¤šæ•°æ ¸å¿ƒå›¢é˜Ÿæˆå‘˜å’Œå¤§å¤šæ•°è´¡çŒ®è€…éƒ½æ˜¯åœ¨ç©ºé—²æ—¶é—´åšè¿™é¡¹å¼€æºå·¥ä½œçš„ã€‚å¦‚æœä½ ä½¿ç”¨ AssemblyScript å®Œæˆä¸€é¡¹é‡è¦çš„ä»»åŠ¡æˆ–è€…æ‰“ç®—è¿™æ ·åšï¼Œå¹¶ä¸”ä½ å¸Œæœ›æˆ‘ä»¬åœ¨å®ƒä¸Šé¢æŠ•å…¥æ›´å¤šçš„æ—¶é—´ï¼Œ[è¯·å°†](https://opencollective.com/assemblyscript/donate)æèµ ç»™æˆ‘ä»¬çš„[open collection](https://opencollective.com/assemblyscript)ã€‚é€šè¿‡èµåŠ©è¿™ä¸ªé¡¹ç›®ï¼Œä½ çš„æ ‡å¿—å°†å‡ºç°åœ¨ä¸‹é¢ã€‚éå¸¸æ„Ÿè°¢ä½ çš„æ”¯æŒï¼

[![Sponsor logos](../Images/229ffec963204f876b62fb4ed1efdd53.png)T2ã€‘](https://assemblyscript.org/#sponsors)

</article>

[View on GitHub](https://github.com/AssemblyScript/assemblyscript)

std åº“ä¸­çš„ä¸€äº›åŠŸèƒ½ç›®å‰è¿˜ä¸å®Œæ•´ã€‚è¿™æ ¹æœ¬ä¸æ˜¯å› ä¸ºåˆ›ä½œè€…æ— èƒ½ï¼æœ‰å †ç§¯å¦‚å±±çš„å·¥ä½œè¦åšã€‚å¦‚æœæ‚¨æ°å¥½æ˜¯å®ç° JavaScript åŸå‹æ‰€éœ€ç®—æ³•çš„ä¸“å®¶ï¼Œé‚£ä¹ˆæ‚¨å¾ˆæœ‰å¯èƒ½å¯¹ AssemblyScript åšå‡ºå·¨å¤§è´¡çŒ®ï¼æœ‰å¾ˆå¤šå”¾æ‰‹å¯å¾—çš„æ°´æœï¼

æˆ‘äº²è‡ªå¸®åŠ©å®ç°çš„ä¸€äº›åŠŸèƒ½éå¸¸å¤§ï¼Œå¾ˆéš¾è¯»æ‡‚ï¼Œä½†æ˜¯å›æŠ¥æ˜¯å€¼å¾—çš„ã€‚ä¾‹å¦‚ï¼Œå»å¹´æˆ‘å¸®åŠ©å¼•å…¥äº†é«˜é˜¶å‡½æ•°`MAP<T>()`,ä½¿å¾—`TypedArray.prototype.map`å‡½æ•°å¯ä»¥åœ¨æ—©æœŸç‰ˆæœ¬çš„ AssemblyScript ä¸­å®ç°ã€‚ä»é‚£ä»¥åï¼Œè¿™ä¸ªå‡½æ•°å¿…é¡»é‡æ–°å®ç°ï¼Œå› ä¸º AssemblyScript çš„å†…å­˜æ¨¡å‹å‘ç”Ÿäº†å˜åŒ–(å˜å¾—æ›´å¥½ã€‚)ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œè¿™å°±æ˜¯ä»Šå¤©çš„`MAP`é«˜é˜¶å‡½æ•°çš„æ ·å­ã€‚

```
// @ts-ignore: This is a top level decorator that can be used in AssemblyScript
@inline
// ArrayBufferView is the parent class for Array<T> and TypedArray.
// AssemblyScript uses ArrayBuffers to represent raw heap allocations. 
function MAP<TArray extends ArrayBufferView, T>(
  array: TArray,
  fn: (value: T, index: i32, self: TArray) => T,
): TArray {
  var length = array.length;
  // get the usize pointer to the start of the source ArrayBuffer
  var dataStart = array.dataStart;

  // create a new array to store the results
  var out = instantiate<TArray>(length);
  // get the usize pointer to the start of the result array
  var outDataStart = out.dataStart;

  // for each item in the source array
  for (let i = 0; i < length; i++) {
    // store it in the result array
    store<T>(
      // This calculation depends on the type of the TypedArray.
      // alignof<T>() helps us to calculate how many bytes are needed to store
      // the result in Web Assembly linear memory.
      outDataStart + (<usize>i << alignof<T>()),
      // call the function for each source element
      fn(load<T>(dataStart + (<usize>i << alignof<T>())), i, array)
    );
  }

  // return the result
  return out;
} 
```

`ArrayBuffer`ç±»æ˜¯è¿™ä¸ªå‡½æ•°çš„åŸºç¡€ã€‚ä½¿ç”¨ä¸€ä¸ªä¸“é—¨çš„`ArrayBufferView`ç±»ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨çº¿æ€§ Web ç»„ä»¶å†…å­˜ä¸­å­˜å‚¨ä¸€ä¸ªæŒ‡å‘æ•°æ®å¼€å§‹çš„æŒ‡é’ˆï¼Œå¹¶åƒ JavaScript å¯¹å¾…`ArrayBuffer`å®ä¾‹ä¸€æ ·å¯¹å¾…å®ƒã€‚

å®ƒç”šè‡³è‡ªå¸¦äº†è‡ªå·±çš„æ•°ç»„è®¿é—®æ–¹æ³•ã€‚

```
 @operator("[]") // unchecked is built-in
  private __get(index: i32): f64 {
    if (<u32>index >= <u32>this.dataLength >>> alignof<f64>()) throw new RangeError(E_INDEXOUTOFRANGE);
    return load<f64>(this.dataStart + (<usize>index << alignof<f64>()));
  }

  @operator("[]=") // unchecked is built-in
  private __set(index: i32, value: f64): void {
    if (<u32>index >= <u32>this.dataLength >>> alignof<f64>()) throw new RangeError(E_INDEXOUTOFRANGE);
    store<f64>(this.dataStart + (<usize>index << alignof<f64>()), value);
  } 
```

è¿™æ˜¯ std åº“ä¸­ç›®å‰ä½¿ç”¨çš„`Float64Array` `__get`å’Œ`__set`æ–¹æ³•ã€‚å¦‚æœä½ æ˜¯åˆå­¦è€…ï¼Œå¯¹æŒ‰ä½è¿ç®—ä¸€æ— æ‰€çŸ¥ï¼Œè¿™äº›å‡½æ•°å¾ˆéš¾è¯»æ‡‚ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€ä½ *ç¨åŠ å­¦ä¹ å’ŒåŠªåŠ›*å°±ä¸ä¼šç†è§£å®ƒã€‚

å¦‚æœä½ è®¤ä¸ºä½ æœ‰æ—¶é—´å’Œç²¾åŠ›æ¥å¸®å¿™ï¼Œä½ ä¹Ÿå¯ä»¥çœ‹çœ‹ä¸‹é¢çš„é¡¹ç›®ï¼Œçœ‹çœ‹ä½¿ç”¨ AssemblyScript èƒ½åšäº›ä»€ä¹ˆã€‚

## ![GitHub logo](../Images/a73f630113876d78cff79f59c2125b24.png) [ç»„è£…è„šæœ¬](https://github.com/AssemblyScript) / [èŠ‚ç‚¹](https://github.com/AssemblyScript/node)

### ç”¨äº AssemblyScript çš„ node.js APIs çš„å®ç°ã€‚

<article class="markdown-body entry-content container-lg" itemprop="text">

# [![AS](../Images/ad74d2d00ca854d3c79166df761b1f02.png)](https://avatars1.githubusercontent.com/u/28916798?s=48) èŠ‚ç‚¹

åˆ©ç”¨ [WASI](https://wasi.dev) å®ç° AssemblyScript çš„ node.js APIsã€‚

## ä»‹ç»

è¿™ä¸ªåº“æ—¨åœ¨ä¸º AssemblyScript ç¨‹åºæä¾›ä¸€ä¸ªæ–¹ä¾¿çš„ node.js ç±»ç¯å¢ƒã€‚è¯·æ³¨æ„ï¼Œå®ƒä»å¤„äºæ—©æœŸé˜¶æ®µï¼Œè€Œä¸”è¿™ä¸ªåº“å’Œ WASI éƒ½è¿˜æ²¡æœ‰æœ€ç»ˆå®Œæˆã€‚

å’Œå¾€å¸¸ä¸€æ ·ï¼Œå¦‚æœè¿™ä¸ªæƒ³æ³•å¬èµ·æ¥å¯¹ä½ æœ‰å¸å¼•åŠ›ï¼Œè¯·éšæ„æ”¹è¿›ç°æœ‰çš„ API æˆ–è´¡çŒ®æ›´å¤šçš„ APIã€‚

## è¯´æ˜

å°†åº“ç»„ä»¶ä½œä¸ºé¡¹ç›®çš„ä¾èµ–é¡¹è¿›è¡Œå®‰è£…

```
$> npm install --save-dev AssemblyScript/node 
```

å¹¶å°†å®ƒåŒ…å«åœ¨æ‚¨çš„æ„å»ºæ­¥éª¤ä¸­ï¼Œä»¥è®¿é—®å®ƒæä¾›çš„å®ç°:

```
$> asc --lib ./node_modules/@assemblyscript/node/assembly [...] 
```

è¿™æ ·åšå°†è‡ªåŠ¨æ³¨å†Œåƒ`Buffer`ç±»è¿™æ ·çš„é€šç”¨å…¨å±€å˜é‡ï¼Œå¹¶å…è®¸é€šè¿‡`import * as fs from "fs"`è¯·æ±‚æ–‡ä»¶ç³»ç»Ÿæ¨¡å—ã€‚

## è¯æ˜æ–‡ä»¶

*   [wiki ä¸Šçš„çŠ¶æ€å’Œ API æ–‡æ¡£](https://github.com/AssemblyScript/node/wiki)
*   [å®æ–½æ¥æº](https://raw.githubusercontent.com/AssemblyScript/node/master/./assembly)

## å»ºç­‘ç‰©

è¦è¿è¡Œæµ‹è¯•ï¼Œé¦–å…ˆè¦ç¡®ä¿â€¦

</article>

[View on GitHub](https://github.com/AssemblyScript/node)

è¿™ä¸ªåº“çš„è¯ç”Ÿæ˜¯å› ä¸ºç¤¾åŒºéœ€è¦ä¸€ä¸ªèŠ‚ç‚¹`Buffer`å®ç°ã€‚å®ƒè®¡åˆ’ä½¿ç”¨ [WASI](https://wasi.dev) æ¥å£è®¿é—®ç³»ç»Ÿçº§ APIï¼ŒåŒæ—¶åœ¨æœ‰æ„ä¹‰çš„åœ°æ–¹å·å·¥å‡æ–™ã€‚ç›®å‰ï¼Œ`Buffer`ç±»éœ€è¦åšå¤§é‡çš„å·¥ä½œï¼Œç²¾é€š node.js ç›®å‰ä½¿ç”¨çš„ç®—æ³•çš„äººä¼šå‘ç°åœ¨å®ç°è¿™äº›æ¨¡å—å’Œå‡½æ•°æ—¶å­˜åœ¨å¾ˆå¤§çš„æŒ‘æˆ˜ã€‚

å¦‚æœæµ‹è¯•æ˜¯ä½ çš„äº‹æƒ…ï¼Œå¹¶ä¸”ä½ æƒ³å¸®åŠ© AssemblyScript å¼€å‘å®ƒçš„å·¥å…·ï¼Œæˆ‘å¼€å‘äº†ä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•æ¡†æ¶å«åš`as-pect`ã€‚

## ![GitHub logo](../Images/a73f630113876d78cff79f59c2125b24.png) [è©¹çº³](https://github.com/jtenner) / [è‡³äº](https://github.com/jtenner/as-pect)

### ğŸ”¥å¼ºçƒˆçš„ğŸ”¥ç”¨æ±‡ç¼–è„šæœ¬è¿›è¡Œå¿«é€Ÿæµ‹è¯•

<article class="markdown-body entry-content container-lg" itemprop="text">

# jtenner/as-pect

è¿™ä¸ªåŒ…æ˜¯ä¸€ä¸ª monorepoï¼ŒåŒ…å« cli å’Œ`@as-pect`åŒ…çš„æ ¸å¿ƒã€‚

[![Greenkeeper badge](../Images/5cdc90a38632362af8046ca689938e38.png)](https://greenkeeper.io/)[![Build Status](../Images/5ba3bac52136a284cfa710e93562662c.png)](https://travis-ci.org/jtenner/as-pect)[![Coverage Status](../Images/31f04fb04873034e57430b913897975f.png)](https://coveralls.io/github/jtenner/as-pect?branch=master)[![lerna](../Images/fd8983decc3fc5bab4a2d10c5def50a9.png)T11ã€‘](https://lerna.js.org/)

ç”¨ AssemblyScript ç¼–å†™ä½ çš„æ¨¡å—ï¼Œä»¥ WebAssembly çš„é€Ÿåº¦è·å¾—æå¿«çš„å¼•å¯¼æµ‹è¯•ï¼

## è¯æ˜æ–‡ä»¶

è¦æŸ¥çœ‹æ–‡æ¡£ï¼Œå¯ä»¥åœ¨ gitbook ä¸Šçš„[è¿™é‡Œ](https://tenner-joshua.gitbook.io/as-pect/)æ‰¾åˆ°ã€‚å¦‚æœæ–‡ä»¶æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶æå‡ºé—®é¢˜ï¼

## è´¡çŒ®è€…

è‹¥è¦æŠ•ç¨¿ï¼Œè¯·å‚é˜… [CONTRIBUTING.md](https://raw.githubusercontent.com/jtenner/as-pect/master/./CONTRIBUTING.md) ã€‚

æ„Ÿè°¢ [@willemneal](https://github.com/willemneal) å’Œ [@MaxGraey](https://github.com/maxgraey) çš„æ”¯æŒï¼Œè®©`as-pect`æˆä¸ºæœ€å¥½çš„è½¯ä»¶ã€‚

å…¶ä»–è´¡çŒ®è€…:

*   [@trusktr](https://github.com/trusktr) -æ–‡æ¡£å˜æ›´
*   [@MaxGraey](https://github.com/maxgraey) -æ€§èƒ½ API å»ºè®®
*   [@torch2424](https://github.com/torch2424) -æ–‡æ¡£å˜æ›´
*   [@dcodeio](https://github.com/dcodeio) -è‡ªå·±åšäº† AssemblyScriptï¼
*   [@9oelM](https://github.com/9oelM) -å…¶ä»–åŠŸèƒ½

## ç‰¹åˆ«æ„Ÿè°¢

ç‰¹åˆ«æ„Ÿè°¢ [AssemblyScript](https://github.com/AssemblyScript/assemblyscript) å›¢é˜Ÿåˆ›å»ºäº† AssemblyScript æœ¬èº«ã€‚

</article>

[View on GitHub](https://github.com/jtenner/as-pect)

è¿™ä¸ª cli å·¥å…·æ—¨åœ¨å¸®åŠ©å¼€å‘äººå‘˜åœ¨å°½å¯èƒ½çŸ­çš„åœæœºæ—¶é—´å†…å¼•å¯¼ä»–ä»¬çš„æµ‹è¯•ã€‚

ä½ æ˜¯å®³æ€•å…¥é—¨è¿˜æ˜¯éœ€è¦å…ˆæ²‰æµ¸åœ¨ç¤¾åŒºé‡Œï¼Ÿè¯·éšæ—¶åœ¨ dev.to ä¸Šç»™æˆ‘å‘æ¶ˆæ¯ï¼Œä»¥è®¿é—®æˆ‘ä»¬çš„ Slack æœåŠ¡å™¨ã€‚æœ‰å¾ˆå¤šäººç­‰ç€å¸®ä½ å¼€å§‹ï¼Œæˆ‘ä»¬ç»å¯¹ä¸æƒ³è‡ªå·±åšè¿™äº›è‰°è‹¦çš„å·¥ä½œã€‚

æœ‰ä¸€åº§å±±ç­‰ç€ä½ å»æ”€ç™»ï¼Œä½ å¯ä»¥æ”€ç™»å®ƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ è®¤ä¸ºä½ å‡†å¤‡å¥½è¿æ¥æŒ‘æˆ˜çš„è¯ã€‚ğŸ˜‰

æœ€è¯šæŒšçš„é—®å€™ï¼Œ
[@jtenner](https://dev.to/jtenner)