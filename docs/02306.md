# ä½¿ç”¨ spotify-web-sdk ç®¡ç† Spotify web API ç”³è¯·

> [https://dev . to/openevufcg/ä½¿ç”¨-o-Spotify-web-SDK-to-manage-requisitions coes-a-API-web-do-Spotify-3j3i](https://dev.to/opendevufcg/usando-o-spotify-web-sdk-para-gerenciar-requisicoes-a-api-web-do-spotify-3j3i)è¿›è¡Œç®¡ç†

æˆ‘å’Œ [Renan](https://dev.to/joserenan) æœ‰ä¸€ä¸ªå«åš[çš„å¼€æºç»„ç»‡ï¼Œåœ¨é‚£é‡Œæˆ‘ä»¬å¼€å‘äº†ä¸“æ³¨äºéŸ³ä¹çš„åº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬çš„ä¸€ä¸ªé¡¹ç›®æ˜¯ Spotify web API çš„ SDKï¼Œæˆ‘ä»¬åˆ›å»ºè¯¥ API æ˜¯ä¸ºäº†æ”¯æŒä½¿ç”¨æ­¤æ•°æ®çš„å…¶ä»–åº”ç”¨ç¨‹åºã€‚](https://github.com/calluswhatyouwant)

åœ¨è¿™ä¸ªå¸–å­(è¿™æ˜¯æ¥è‡ªæˆ‘ä»¬å…¬å¸çš„ dev.to çš„è¯‘æ–‡))ä¸­ï¼Œæˆ‘å°†æ¼”ç¤ºâ€œ[spotify-web SDKâ€](https://github.com/calluswhatyouwant/spotify-web-sdk)å¦‚ä½•ç®€åŒ– Spotify ç”¨æˆ·æ•°æ®çš„æ£€ç´¢å’Œç®¡ç†ã€‚æˆ‘å°†é€šè¿‡æè¿°ä¸€ä¸ªéå¸¸ä¸¥é‡çš„é—®é¢˜*æ‰€æ¿€å‘çš„åº”ç”¨ç¨‹åºå¼€å‘è¿‡ç¨‹æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä½œä¸ºè¯¥æµå¹³å°çš„ç”¨æˆ·é¢ä¸´è¿™ä¸ªé—®é¢˜ã€‚*

 *## ![GitHub logo](img/292a238c61c5611a7f4d07a21d9e8e0a.png)[calluswhatyouwant](https://github.com/calluswhatyouwant)/[Spotify-we b-SDK](https://github.com/calluswhatyouwant/spotify-web-sdk)

### Spotify Web API çš„ JS SDKã€‚

<article class="markdown-body entry-content container-lg" itemprop="text">

# Spotify Web SDK

Spotify Web API çš„ JavaScript SDK è¯·æ³¨æ„ï¼Œè¿™ä¸ªé¡¹ç›®ä»ç„¶æ˜¯æµ‹è¯•ç‰ˆã€‚

## ç›®å½•

*   [ç‰¹æ€§](https://raw.githubusercontent.com/calluswhatyouwant/spotify-web-sdk/master/#features)
*   [å®‰è£…](https://raw.githubusercontent.com/calluswhatyouwant/spotify-web-sdk/master/#installation)
*   [ç”¨é€”](https://raw.githubusercontent.com/calluswhatyouwant/spotify-web-sdk/master/#usage)
*   [ç¤¾åŒº](https://raw.githubusercontent.com/calluswhatyouwant/spotify-web-sdk/master/#community)
    *   [å»ºè®®æ–°åŠŸèƒ½æˆ–æŠ¥å‘Šé”™è¯¯](https://raw.githubusercontent.com/calluswhatyouwant/spotify-web-sdk/master/#suggest-a-new-feature-or-report-a-bug)
    *   [è‡ªå·±åŠ¨æ‰‹](https://raw.githubusercontent.com/calluswhatyouwant/spotify-web-sdk/master/#do-it-yourself)
    *   [ç»´æŠ¤äººå‘˜](https://raw.githubusercontent.com/calluswhatyouwant/spotify-web-sdk/master/#maintainers)
    *   [åäººå ‚](https://raw.githubusercontent.com/calluswhatyouwant/spotify-web-sdk/master/#hall-of-fame)
*   [æ‰§ç…§](https://raw.githubusercontent.com/calluswhatyouwant/spotify-web-sdk/master/#license)

## ç‰¹å¾

### â€œæˆ‘ä¸ºä»€ä¹ˆè¦ç”¨è¿™ä¸ªï¼Ÿâ€

æˆ‘ä»¬å¸Œæœ›ä¸ºæ‚¨å¤„ç†å›°éš¾çš„å·¥ä½œï¼Œå³ä½¿æ˜¯æå‡ºç®€å•çš„è¯·æ±‚ï¼Œä¾‹å¦‚è·å–èµ›é“ä¿¡æ¯ï¼Œæ‚¨ä¹Ÿéœ€è¦è¿›è¡Œä¸€ç³»åˆ—è®¾ç½®ã€‚åœ¨æˆ‘ä»¬çš„å¸®åŠ©ä¸‹ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡ŒåšåŒæ ·çš„äº‹æƒ…:

```
import * as spotify from 'spotify-web-sdk';
spotify.init({ token: 'YOUR SPOTIFY TOKEN HERE!' }); // You should only need to run this once.
spotify.getTrack('3LOpHuEpjkL4T1Zcjhko8w'); // Or any other track id.
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¯¹ï¼Œå°±è¿™ä¹ˆç®€å•ï¼

### â€œæˆ‘è¿˜æ˜¯è§‰å¾—ä¸€ç‚¹éƒ½ä¸è¾›è‹¦ã€‚

â€¦</article>

[View on GitHub](https://github.com/calluswhatyouwant/spotify-web-sdk)

# Um problema do mundo real(*ä¸€ç‚¹åŠ¨åŠ›*

my Spotify library ä¸­çš„ç›¸å†Œéƒ¨åˆ†éå¸¸æ‚ä¹±ï¼Œä½†è¿™å¹¶ä¸æ˜¯æˆ‘çš„é”™-åœ¨åº”ç”¨ç¨‹åºéƒ¨ç½²ä¸­ï¼Œæ¯å½“å°†å•ä¸ªç›¸å†Œæ·»åŠ åˆ°æ­Œæ›²ä¸­æ—¶ï¼Œè¯¥ç›¸å†Œä¹Ÿä¼šæœ€ç»ˆæ˜¾ç¤ºä¸ºç›¸å†Œã€‚å› ä¸ºæ¯”èµ·éšæœºæ’­æ”¾åˆ—è¡¨æ¨¡å¼ï¼Œæˆ‘æ›´å–œæ¬¢ä»å¤´åˆ°å°¾æ’­æ”¾ä¸“è¾‘ã€‚

<figure>

[![Screenshot de Ã¡lbuns no Spotify](img/d50ff188b4ddc820e5dc36e7c6f08bf4.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--SUpefDiT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/9m6nxnmakkfwp13kisr3.png)

<figcaption>**Comfort Crowd** and **People** sÃ£o singles, mas tambÃ©m aparecem na minha biblioteca como Ã¡lbuns.</figcaption>

</figure>

æˆ‘æƒ³åˆ°äº†ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆ:æˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ’­æ”¾åˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«äº†æˆ‘å¬è¿‡çš„æ¯å¼ ä¸“è¾‘çš„ç¬¬ä¸€ä¸ªæ›²ç›®ã€‚æ‹¥æœ‰è¿™ä¸ªæ’­æ”¾åˆ—è¡¨å¯¹æˆ‘ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥ä¿ç•™æˆ‘ç¬¬ä¸€æ¬¡å¬åˆ°å…¨éƒ¨ä½œå“çš„é‚£ä¸€å¤©çš„è®°å½•(è‡³å°‘åœ¨æˆ‘è®°å¾—ä¸€å¬åˆ°å®ƒä»¬å°±æ·»åŠ å®ƒä»¬çš„æ—¶å€™)ã€‚é—®é¢˜è§£å†³äº†-æˆ‘...ã€‚è‡³å°‘æœ‰ä¸€éƒ¨åˆ†ã€‚å—¯ï¼Œä¸ºäº†ä½¿äº‹æƒ…æ›´æœ‰æ¡ç†ï¼Œæˆ‘è¿˜æ˜¯å¸Œæœ›èƒ½å¤ŸæŒ‰å‘è¡Œæ—¥æœŸæ’åˆ—ä¸“è¾‘çš„å¼•ç”¨é¡ºåºï¼Œè€Œ Spotify è¿˜ä¸æ”¯æŒè¿™ä¸€ç‚¹(å³ä½¿ç”¨æˆ·åœ¨äº”å¹´å¤šå‰å°±è¦æ±‚ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚

æˆ‘å¯»æ‰¾èƒ½å¸®æˆ‘ç®¡ç†è¿™ç§æ’åºæ–¹æ³•çš„å·¥å…·ï¼Œå‘ç°äº†ä¸€ä¸ªå« [Sort Your Music](http://sortyourmusic.playlistmachinery.com/) çš„ web åº”ç”¨ç¨‹åºã€‚å°½ç®¡å®ƒä»¬çš„æ’åºæ–¹æ³•éå¸¸ç®€å•ä¸”ä½¿ç”¨æ•ˆç‡é«˜ï¼Œä½†å®ƒä¼šå¤ç›–æ·»åŠ è½¨é“çš„æ—¥æœŸã€‚æˆ‘çŸ¥é“åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å¯èƒ½å·²ç»åœ¨ç”¨æˆ‘çš„ä¸æ»¡ç¿»éä½ çš„çœ¼ç›äº†ï¼Œä½†æ˜¯ï¼ŒçŸ¥é“æœ‰å¯èƒ½å¾—åˆ°æˆ‘æƒ³è¦çš„ç»“æœï¼Œæˆ‘å†³å®šå®æ–½æˆ‘è‡ªå·±çš„å·¥å…·ã€‚æ²¡ä»€ä¹ˆæ¯”"è‡ªå·±åŠ¨æ‰‹"æ›´å¥½çš„äº†ï¼Ÿ

<figure>

[![Taylor Swift com Ã³dio](img/f2bf11367aaccbd932503bc45b4b62e8.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--0T1LNRwl--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/f1co9752rtmcdbm5nqfr.gif)

<figcaption>Perdoe-me caso vocÃª nÃ£o enfrente esse problema no seu dia a dia.</figcaption>

</figure>

# [](#devagar-e-sempre)æ…¢æ…¢åœ°æ°¸è¿œ

Spotify web API æä¾›äº†ä¸¤ä¸ªç”¨äºç®¡ç†æ’­æ”¾åˆ—è¡¨çš„ç«¯ç‚¹:ç”¨äºå¤ç›–æ‰€æœ‰éŸ³è½¨ï¼›[ç”¨äºç§»åŠ¨éŸ³è½¨æˆ–éŸ³è½¨å—çš„å¦ä¸€ä¸ª](https://developer.spotify.com/documentation/web-api/reference/playlists/reorder-playlists-tracks/)ã€‚ä¸å‰è€…ä¸åŒï¼Œåè€…ä¸ä¼šä¿®æ”¹*timestamp*ï¼Œè¯¥æ—¶é—´æˆ³è¡¨ç¤ºå°†éŸ³è½¨æ·»åŠ åˆ°æ’­æ”¾åˆ—è¡¨çš„æ—¶é—´ä»¥åŠæ·»åŠ éŸ³è½¨çš„äººå‘˜çš„æ ‡è¯†ç¬¦(ç”¨äºåä½œæ’­æ”¾åˆ—è¡¨)ã€‚

<figure>

[![VisualizaÃ§Ã£o da reordenaÃ§Ã£o de faixas](img/be20282f1a7577d61277783424b90a8c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--113_b26J--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/lfcnbuvlnmvemungeuyu.png)

<figcaption>VisualizaÃ§Ã£o de como funciona o endpoint "reordenaÃ§Ã£o de faixas de uma playlist".
Fonte: [Spotify for Developers](https://developer.spotify.com/documentation/web-api/reference/playlists/reorder-playlists-tracks/)</figcaption>

</figure>

å¦‚ä¸Šæ‰€è¿°ï¼Œæ­¤ç«¯ç‚¹çš„å·¥ä½œæ–¹å¼æ˜¯ï¼Œå¯¹æ’­æ”¾åˆ—è¡¨è¿›è¡Œæ’åºéœ€è¦å¤šä¸ªè¿ç»­è¯·æ±‚(åŸºæœ¬ä¸Šæ˜¯æ’­æ”¾åˆ—è¡¨ä¸­æ¯ä¸ªèŒƒå›´ä¸€ä¸ªè¯·æ±‚)ï¼Œè¿™ä¹Ÿæ„å‘³ç€æ‰€éœ€çš„æ—¶é—´è¿œè¿œè¶…è¿‡å¤ç›–æ‰€æœ‰è¯·æ±‚æ‰€éœ€çš„æ—¶é—´ã€‚ä¸å¾—ä¸åšå‡ºç‰ºç‰²ï¼Œä½†ç»“æœæ°æ°æ˜¯é¢„æœŸçš„:è¿™é‡Œæ˜¯â€˜t0â€™spotificable playlist editorï¼

<figure>

[![Spotify Playlist Editor](img/4bf9ebd72321ea8ccae7abc68200f59c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Ih3NqGfw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/7ookuks66s0203i3s9n3.png)

<figcaption>Quando vocÃª tiver feito login, algo assim deve aparecer na tela inicial da aplicaÃ§Ã£o.</figcaption>

</figure>

# [](#detalhando-o-processo-mas-n%C3%A3o-demais)è¯¦ç»†è¯´æ˜è¿‡ç¨‹(ä½†ä¸è¦è¿‡åˆ†)

æˆ‘æƒ³å°½å¿«åŸå‹ååº”åº”ç”¨ç¨‹åºï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨äº†â€˜t0â€™create-reaction-appï¼ŒèŠ‚çœäº†æˆ‘å¾ˆå¤šåˆå§‹è®¾ç½®æ—¶é—´ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘é¼“åŠ±æ‚¨å°è¯•ä»å¤´å¼€å§‹æ„å»º React åº”ç”¨ç¨‹åºï¼Œä½†è¿™è‚¯å®šæ˜¯ä¸€åªæ‰‹åœ¨è½®å­ä¸Šï¼Œå½“æ‚¨ç€æ€¥çš„æ—¶å€™ã€‚ä¸ºäº†ä¿æŒä¸€åˆ‡ç®€å•èµ·è§ï¼Œ**ç§»åŠ¨æ’­æ”¾åˆ—è¡¨ç¼–è¾‘å™¨**æ˜¯*æ— æœåŠ¡å™¨ã€‘*ï¼Œä½†å®ƒå…è®¸æ¯ä¸ªäººé€šè¿‡å®æ–½[éšå¼æˆäºˆæµ](https://developer.spotify.com/documentation/general/guides/authorization-guide/)æ¥è®¿é—®å…¶ç§»åŠ¨æ•°æ®ï¼Œè¿™æ˜¯è·å–è®¿é—®ä»¤ç‰Œçš„ç®€å•æ–¹æ³•

æˆ‘æ·»åŠ äº†ä¸€äº›è½¯ä»¶åŒ…å’Œå·¥å…·æ¥ç®€åŒ–ç¼–ç è¿‡ç¨‹(ä¾‹å¦‚ï¼Œ[bootstrap](https://getbootstrap.com)è¿™æ ·æˆ‘å°±ä¸ç”¨å†æ‹…å¿ƒé£æ ¼äº†ï¼›[å‡è£…](https://prettier.io/)æœ‰åŠ©äºä¿æŒä»£ç çš„æ ‡å‡†åŒ–ã€‚æˆ‘è¿˜è§‰å¾—æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ç”¨ [Flow](https://flow.org) è¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥ã€‚æˆ‘å–œæ¬¢ JavaScript å…·æœ‰åŠ¨æ€ç±»å‹ï¼Œä½†ç”±äº SDK å¤„ç†çš„æ¨¡å‹å¾ˆå¤šï¼Œè€Œè¿™äº›æ¨¡å‹åˆå…·æœ‰è®¸å¤šå±æ€§ï¼ŒFlow æˆä¸ºä¸€ä¸ªå¾ˆå¥½çš„ç›Ÿå‹ã€‚

<figure>

[![IntelliSense](img/37ec7cc60cd23b82a6a01f4b8a6ebef4.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--X1y3_tBK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/jjhcgbimvjazm6wcvcb8.png)

<figcaption>VocÃª pode atÃ© odiar o Flow, mas o fato Ã© que React + Flow + [IntelliSense](https://code.visualstudio.com/docs/editor/intellisense) Ã© um verdadeiro dream team.</figcaption>

</figure>

## [](#conhe%C3%A7a-o-melhor-amigo-autoproclamado-da-api-web-do-spotify-o-spotifywebsdk)ã€è®¤è¯†æœ€å¥½çš„æœ‹å‹ã€‘~~ã€è‡ªç§°ã€‘~~çš„ Spotify web APIï¼ŒSpotify-web SDKï¼

ä¸‹é¢æ˜¯ä»ç»„ä»¶ *UserPage* ä¸­æå–çš„ä¸€æ®µä»£ç ã€‚ä½ å¯ä»¥çœ‹åˆ°æœ‰äº›è¿›å£ç›´æ¥ç”± SDK åˆ¶æˆ:

```
/* @flow */

import React, { Component } from 'react';
import {
    /* FunÃ§Ãµes que encapsulam endpoints da API do Spotify */
    init,
    getCurrentUserPlaylists,
    getCurrentUserProfile,
    /* Modelos */
    Page,
    PlaylistSimplified,
    PrivateUser,
} from 'spotify-web-sdk';

type Props = {
    history: any,
};

type State = {
    page: Page<PlaylistSimplified>,
    playlists: PlaylistSimplified[],
    user: PrivateUser,
};

class UserPage extends Component<Props, State> {
    // ...
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸€æ—¦ç”¨æˆ·ç™»å½• Spotifyï¼Œ *UserPage* æ˜¯åº”ç”¨ç¨‹åºçš„ä¸»é¡µã€‚å…¶ä¸»è¦ç›®çš„æ˜¯æ˜¾ç¤ºç”¨æˆ·æ’­æ”¾åˆ—è¡¨ï¼Œå¹¶å¸¦æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œç”¨äºé€‰æ‹©æ„Ÿå…´è¶£çš„æ’­æ”¾åˆ—è¡¨ã€‚æœ€åˆæ£€ç´¢åˆ°äº”ä¸ªæ’­æ”¾åˆ—è¡¨:

```
componentDidMount = async () => {
    const page = await getCurrentUserPlaylists({ limit: 5 });
    this.setState({
        page,
        playlists: page.items,
    });
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é€šè¿‡å°†å¯¹è±¡ *page* ä¿æŒåœ¨ç»„ä»¶çŠ¶æ€ï¼Œè¦æ±‚æ›´å¤šæ’­æ”¾åˆ—è¡¨å°±åƒå¯èƒ½çš„é‚£æ ·ç®€å•ã€‚è¿™æ˜¯å› ä¸ºæ£€ç´¢ä¸‹ä¸€ä¸ªæ•°æ®çš„é€»è¾‘å·²ç»åœ¨è¯¥ç±»å£°æ˜ä¸­å®ç°äº†*é¡µ*no*Spotify-web-SDK*:

```
class Page<T> {
    // ...
    async getNextPage() {
        if (!this.hasNext()) throw new Error('There are no more pages');
        const params = {
            ...this.queryParams,
            limit: this.limit,
            offset: this.offset + this.limit,
        };
        const response = await this.getAxiosPageInstance().get('/', { params });
            return new Page<T>(response.data, this.t, this.wrapper);
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ ·ï¼Œåœ¨æ’­æ”¾åˆ—è¡¨ç¼–è¾‘å™¨ä¸­å¤„ç†æ‰€æœ‰è¿™äº›é€»è¾‘åªä¸è¿‡æ˜¯ä¸€ä¸ªç®€å•çš„å‡½æ•°è°ƒç”¨ï¼Œæ— éœ€è·Ÿè¸ªè¯¸å¦‚ limite å’Œ offset:
ä¹‹ç±»çš„å€¼

```
loadMorePlaylists = async () => {
    const { page } = this.state;
    const nextPage = await page.getNextPage(); 
    // Relaxa e deixa o spotify-web-sdk lidar com o trabalho duro!
    this.setState(prevState => {
        const playlists = prevState.playlists.concat(nextPage.items);
        return { playlists, page: nextPage };
    });
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯¥åº”ç”¨ç¨‹åºçš„ä¸»è¦ç›®çš„æ˜¯å…è®¸ç”¨æˆ·å¯¹å…¶æ’­æ”¾åˆ—è¡¨è¿›è¡Œæ’åºï¼Œæ‰€ä»¥ç°åœ¨è®©æˆ‘ä»¬é‡ç‚¹å…³æ³¨å®ƒã€‚ä»ç»„ä»¶*playslistpage*ä¸­ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©æ’åºæ–¹æ³•(åŒ…æ‹¬æŒ‰å‘å¸ƒæ—¥æœŸï¼é¡µ:1ã€‚ä¸‹é¢ï¼Œæˆ‘çš„å®æ–½é¦–å…ˆç¡®å®šäº†éŸ³è½¨çš„é¢„æœŸæœ€ç»ˆé¡ºåºï¼Œç„¶åä½¿ç”¨é¡ºåºè°ƒç”¨é‡æ–°æ’åˆ—éŸ³è½¨ã€‚è¿™å°±æ˜¯ä»£ç çš„è¿ä½œæ–¹å¼:

```
import { reorderPlaylistTracks } from 'spotify-web-sdk';

export const sortPlaylistTracksByAttribute = async (
    playlistId: string,
    attribute: string
) => {
    let insertionOrder = await getInsertionOrder(playlistId, attribute);
    return insertionOrder.reduce(async (previousPromise, current) => {
        await previousPromise;
        return moveTrackToTop(playlistId, current);
    }, Promise.resolve());
};

const getInsertionOrder = async (
    playlistId: string,
    attribute: string
) => { /* Determina a ordem de inserÃ§Ã£o baseada no atributo escolhido. */ };

const moveTrackToTop = (id: string, oldIndex: number) =>
    reorderPlaylistTracks(id, oldIndex, { rangeLength: 1, insertBefore: 0 }); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœä½ ä¸ç†Ÿæ‚‰è¿™ç§ä½¿ç”¨ *Array.prototype.reduce()* æŒ‰é¡ºåºè§£ææ‰¿è¯ºçš„æ–¹æ³•ï¼Œä½ æœ‰ä¸€ç¯‡å¾ˆå¥½çš„æ–‡ç« è§£é‡Šäº†å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œ**åŸå› ä½•åœ¨**ã€‚çœ‹çœ‹é‚£è¾¹çš„[ã€CSS æŠŠæˆã€‘](https://css-tricks.com/why-using-reduce-to-sequentially-resolve-promises-works/)ï¼

å¦‚ä¸Šæ‰€è¿°ï¼Œspotify-web-sdk çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºå¸Œæœ›è®¿é—® Spotify web API çš„å¼€å‘äººå‘˜èŠ‚çœæ—¶é—´ã€‚ä¸å…¶ç›´æ¥è°ƒç”¨ API å¹¶æ‹…å¿ƒç»†èŠ‚ï¼Œæ‚¨çš„å¤§éƒ¨åˆ†å·¥ä½œåº”è¯¥æ˜¯å¯¼å…¥å‡½æ•°å¹¶åœ¨ä»£ç ä¸­è°ƒç”¨å®ƒã€‚

å¦‚æœæ‚¨æœ‰å…´è¶£ä½¿ç”¨ Spotify æ•°æ®æ„å»ºæ‚¨è‡ªå·±çš„åº”ç”¨ç¨‹åºï¼Œå½“å‰ç‰ˆæœ¬çš„â€œSpotify-web-SDKâ€é©»ç•™åœ¨ NPM ä¸­ï¼Œå¯ä»¥å¿«é€Ÿæ·»åŠ åˆ°åŒ…. json è¿è¡Œ`npm add spotify-web-sdk`çš„é¡¹ç›®ä¸­ã€‚

**ç§»åŠ¨æ’­æ”¾åˆ—è¡¨ç¼–è¾‘å™¨**ä¹Ÿåœ¨ç©ºä¸­[è¿™é‡Œ](https://calluswhatyouwant.github.io/spotify-playlist-editor/)å¦‚æœä½ æƒ³ç©ä¸€ç‚¹çš„è¯ã€‚å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¯¥åº”ç”¨ç¨‹åºæ—¶é‡åˆ°ä»»ä½•æ„å¤–æƒ…å†µï¼Œé‚£åªæ˜¯æ¿€å‘å¼€æºç²¾ç¥çš„åŸ¹è®­:åœ¨ GitHub å­˜å‚¨åº“ä¸­åˆ›å»ºä¸€ä¸ªé—®é¢˜ï¼PRs ä¹Ÿå¾ˆå—æ¬¢è¿(æœ‰ä¸€äº›æœªè§£å†³çš„é—®é¢˜ï¼ŒHacktoberfest å°±åœ¨é‚£é‡Œ-æˆ‘...ã€‚é¡µ:1ã€‚

## ![GitHub logo](img/292a238c61c5611a7f4d07a21d9e8e0a.png)å‘¼å« whatyouwant / [ spotify æ’­æ”¾åˆ—è¡¨ç¼–è¾‘å™¨](https://github.com/calluswhatyouwant/spotify-playlist-editor)

### æ‚¨å¯ä»¥éšæ„å¯¹ Spotify æ’­æ”¾åˆ—è¡¨è¿›è¡Œæ’åºã€‚

<article class="markdown-body entry-content container-lg" itemprop="text">

# Spotify æ’­æ”¾åˆ—è¡¨ç¼–è¾‘å™¨

éšå¿ƒæ‰€æ¬²åœ°å¯¹ Spotify æ’­æ”¾åˆ—è¡¨è¿›è¡Œæ’åºï¼ <g-emoji class="g-emoji" alias="hammer_and_wrench" fallback-src="https://github.githubassets.cimg/icons/emoji/unicode/1f6e0.png">ğŸ› </g-emoji>

[![Initial page](img/118986bd18943cf955fbeced058c6736.png)T2ã€‘](https://raw.githubusercontent.com/calluswhatyouwant/spotify-playlist-editor/master/./main-page.png)

## ç›®å½•

*   [ç‰¹æ€§](https://raw.githubusercontent.com/calluswhatyouwant/spotify-playlist-editor/master/#features)
*   [ç¤¾åŒº](https://raw.githubusercontent.com/calluswhatyouwant/spotify-playlist-editor/master/#community)
    *   [å®‰è£…å’Œä½¿ç”¨](https://raw.githubusercontent.com/calluswhatyouwant/spotify-playlist-editor/master/#installation-and-usage)
    *   [éƒ¨ç½²](https://raw.githubusercontent.com/calluswhatyouwant/spotify-playlist-editor/master/#deployment)
    *   [å»ºè®®æ–°åŠŸèƒ½æˆ–æŠ¥å‘Šé”™è¯¯](https://raw.githubusercontent.com/calluswhatyouwant/spotify-playlist-editor/master/#suggest-a-new-feature-or-report-a-bug)
    *   [ç»´æŠ¤äººå‘˜](https://raw.githubusercontent.com/calluswhatyouwant/spotify-playlist-editor/master/#maintainers)

## ç‰¹å¾

*   ä»æ‚¨æœ€è¿‘çš„ Spotify æ›²ç›®æˆ–æ‚¨æœ‰å²ä»¥æ¥çš„çƒ­é—¨æ›²ç›®ä¸­åˆ›å»ºæ–°çš„æ’­æ”¾åˆ—è¡¨ï¼›
*   æ’­æ”¾åˆ—è¡¨æ’åºä¾æ®
    *   æ’­æ”¾åˆ—è¡¨è½¨é“å±æ€§(æ·»åŠ æ—¥æœŸ)ï¼›
    *   æ›²ç›®å±æ€§(åç§°ã€é•¿åº¦ã€äººæ°”)ï¼›
    *   ä¸“è¾‘å±æ€§(åç§°ã€å‘è¡Œæ—¥æœŸ)ï¼›
    *   è‰ºæœ¯å®¶å±æ€§(å§“å)ã€‚

### å½“å‰çš„é™åˆ¶

*   å¼ºçƒˆå»ºè®®åˆ›å»ºæ‚¨æƒ³è¦ç¼–è¾‘çš„æ’­æ”¾åˆ—è¡¨çš„å‰¯æœ¬ï¼Œæˆ–è€…ä½¿ç”¨æ’­æ”¾åˆ—è¡¨åˆ›å»ºé€‰é¡¹ä¹‹ä¸€ã€‚(éšä¾¿ç©ç©ï¼Œä½†æ˜¯è¦å®‰å…¨çš„åšï¼);
*   æ‚¨åªèƒ½å¯¹ä¸è¶…è¿‡ 100 é¦–æ›²ç›®çš„æ’­æ”¾åˆ—è¡¨è¿›è¡Œæ’åºï¼›
*   æ’åºå¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´(åŒ…å« 100 é¦–æ›²ç›®çš„æ’­æ”¾åˆ—è¡¨å¯èƒ½éœ€è¦ 30 ç§’åˆ° 1 åˆ†é’Ÿ)ã€‚åœ¨æ’åºå®Œæˆä¹‹å‰ï¼Œä¸è¦é‡æ–°åŠ è½½æˆ–å…³é—­æ’­æ”¾åˆ—è¡¨é¡µé¢ã€‚

## ç¤¾åŒº

### å®‰è£…å’Œä½¿ç”¨

åªéœ€è¿è¡Œ`yarn install`æ¥å®‰è£…é¡¹ç›®çš„ä¾èµ–é¡¹â€¦

</article>

[View on GitHub](https://github.com/calluswhatyouwant/spotify-playlist-editor)

å¦‚æœæ‚¨æƒ³åŠ å…¥å‘¼å«é¡¹ç›®çš„æ–°é—»ï¼Œè¯·æ”¶å¬æˆ‘ä»¬çš„ Twitter ç®€ä»‹ï¼

* * *

éå¸¸æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼æ³¨æ„:å¾ˆå¿«ï¼Œæˆ‘ä»¬å°†åœ¨ **dev.to** æ”¶åˆ°æ¥è‡ª opendevufcg æŠ•ç¨¿äººçš„æ–°æ–‡ç« ã€‚é™ªåŒ openevufcg no[Twitter](https://twitter.com/OpenDevUFCG)ã€no [Instagram](https://instagram.com/OpenDevUFCG) å½“ç„¶è¿˜æœ‰ [GitHub](https://github.com/OpenDevUFCG) ã€‚*