# åœ¨æœ¬åœ°è®¾ç½® MongoDB

> åŸæ–‡:[https://dev.to/jackkeck/setting-up-mongodb-locally-1lm2](https://dev.to/jackkeck/setting-up-mongodb-locally-1lm2)

## [](#a-simple-mongo-database)**ä¸€ä¸ªç®€å•çš„ MONGO æ•°æ®åº“**

æˆ‘ä½¿ç”¨è¿‡ MongoDB å¾ˆå¤šæ¬¡ï¼Œæƒ³åˆ†äº«ä¸€ä¸‹æˆ‘é€šå¸¸æ˜¯å¦‚ä½•åœ¨æœ¬åœ°æ„å»ºå¿«é€Ÿå®ä¾‹çš„ã€‚å¦‚æœä½ äº†è§£æˆ‘ï¼Œä½ å°±ä¼šçŸ¥é“æˆ‘å–œæ¬¢å·´å°¼å¼çš„åˆ†è§£ã€‚

[![gif of Barney the purple dinosaur singing "I love you, you love me..."](../Images/3fe01abe170218b47be745d0a96e70fd.png)T2ã€‘](https://i.giphy.com/media/GMalHy5bWkfN6/giphy.gif)

æ‰€ä»¥ä¸ç®¡ä½ æ˜¯æ–°æ‰‹è¿˜æ˜¯ç»éªŒä¸°å¯Œçš„å…½åŒ»ï¼Œéƒ½åº”è¯¥å¾ˆå®¹æ˜“ç†è§£ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å°†æµè§ˆ:

*   [åŸºæœ¬å®‰è£…](#install)
*   [åŠ è½½æ•°æ®é›†](#load)
*   [åŸºæœ¬å®‰å…¨](#security)

æˆ‘ä¾é  [MongoDB çš„å®‰è£…è¯´æ˜](https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/)å’Œä»–ä»¬çš„[æ ¸å¿ƒæ–‡æ¡£](https://docs.mongodb.com/)è¿›è¡Œå®‰è£…ã€‚é¢å¤–çš„æ¥æºåœ¨é€‚å½“çš„æƒ…å†µä¸‹è¢«å†…è”æ³¨æ˜ã€‚å¦‚æœä»»ä½•æ—¶å€™ä½ éœ€è¦ä»å¤´å¼€å§‹ï¼Œä½ å¯ä»¥ä½¿ç”¨åº•éƒ¨çš„[æœ‰ç”¨ç¢ç‰‡](#help)éƒ¨åˆ†ã€‚æœ‰æ¸…ç†æ•°æ®åº“çš„å‘½ä»¤ï¼Œä»¥åŠå¦‚ä½•æ‰§è¡Œå¹²å‡€çš„å¸è½½ã€‚å¦å¤–ï¼Œä½ å¯ä»¥åœ¨ä¸‹é¢æ‰¾åˆ°æˆ‘çš„[æœ¬åœ°è®¾ç½®](#localhost)çš„ç»†èŠ‚ã€‚

* * *

* * *

## [](#my-localhost)**æˆ‘çš„æœ¬åœ°ä¸»æœº**

ä¸ºäº†åœ¨è°ƒè¯•æ—¶ä¿æŒé€æ˜å’Œç†æ™ºï¼Œè¿™äº›æ˜¯æˆ‘çš„æœ¬åœ°ç¯å¢ƒçš„ç›¸å…³ç»†èŠ‚ã€‚

| **æœ¬åœ°è®¾ç½®** |
| --- |
| **OS** : macOS Mojave 10.14.4 |
| **è‡ªåˆ¶**:è‡ªåˆ¶ 2.1.9 |
| **è½¬åˆ°**:è½¬åˆ° 2.22.0 ç‰ˆ |
| **MONGODB** : MongoDB ç¤¾åŒº 4.0 |

* * *

* * *

## [](#install)**å®‰è£…**

[![gif of mongodb being installed in a terminal](../Images/2cedb6a71649c7653beac0c84015cfc9.png)](https://i.giphy.com/media/ciwIbp8x2krQnhPgYu/giphy.gif) 
å®‰è£…å’Œå¯åŠ¨ MongoDB å¾ˆç®€å•ã€‚æ‰“å¼€ä½ çš„ç»ˆç«¯ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤:

```
brew tap mongodb/brew
brew install mongodb-community@4.0 
mongod --config /usr/local/etc/mongod.conf & 
```

å®¶é…¿çš„ [`tap`](https://docs.brew.sh/Taps) å‘½ä»¤åˆ›å»ºäº† [MongoDB çš„å…¬å¼](https://github.com/mongodb/homebrew-brew)çš„æµ…å±‚å…‹éš†ã€‚è¿™æ„å‘³ç€å®ƒåœ¨æ‚¨çš„è‡ªåˆ¶è½¯ä»¶ä¸­æ·»åŠ äº†ä¸€ä¸ªæŒ‡å‘ GitHub åº“çš„å¼•ç”¨/é“¾æ¥ï¼Œä»¥ä¾›å°†æ¥ä½¿ç”¨ã€‚

æˆ‘ä»¬è¿è¡Œ [`install`](https://docs.brew.sh/Manpage#install-formula) ï¼ŒçŸ¥é“å®ƒä½¿ç”¨æˆ‘ä»¬ä¹‹å‰æŒ‡å®šçš„ MongoDB å…¬å¼ã€‚é™¤äº† MongoDB äºŒè¿›åˆ¶æ–‡ä»¶ï¼ŒHomebrew è¿˜ä¼šåˆ›å»ºæ‚¨çš„é…ç½®æ–‡ä»¶(`mongod.conf`)å’Œå¿…è¦çš„è·¯å¾„ã€‚

å°½ç®¡ä½¿ç”¨è‡ªåˆ¶è½¯ä»¶è¿›è¡Œå®‰è£…ï¼Œæˆ‘ä»¬å°†ä¸ä¼šä½¿ç”¨ä»–ä»¬çš„ [`services`](https://docs.brew.sh/Manpage#services-subcommand) å‘½ä»¤ã€‚è¿™æ˜¯å› ä¸º`brew services`ä½¿ç”¨äº†`launchctl`çš„ plist æ–‡ä»¶ã€‚å› æ­¤ï¼Œ[å®ƒä¸ä¼šåœ¨æ¯æ¬¡å¯åŠ¨æ—¶è·å–é…ç½®æ–‡ä»¶çš„æ–°å‰¯æœ¬ã€‚](https://github.com/Homebrew/homebrew-services/issues/186)

ç›¸åï¼Œæˆ‘ä»¬ç›´æ¥è°ƒç”¨ MongoDB çš„çˆ¶è¿›ç¨‹ [`mongod`](https://docs.mongodb.com/manual/reference/program/mongod/) ï¼Œå¹¶ä½¿ç”¨`--config`æ ‡å¿—å¼•ç”¨æˆ‘ä»¬çš„â€œmongod.confâ€ã€‚åœ¨ Linux ä¸­ï¼Œ`&`æ˜¯ä¸€ä¸ª[æ§åˆ¶æ“ä½œç¬¦](https://www.w3resource.com/linux-system-administration/control-operators.php)ã€‚å®ƒå…è®¸æ‚¨çš„ shell ç®¡ç†åœ¨åå°å‘å‡ºçš„å‘½ä»¤ï¼›è¿™å°†è¾“å‡º[è¿‡ç¨‹æ ‡è¯†ç¬¦(PID)](http://www.linfo.org/pid.html) ã€‚å¦‚æœè¦éªŒè¯ï¼Œå¯ä»¥ä½¿ç”¨`jobs -l`æ‰“å°è¿›ç¨‹è¿è¡ŒèƒŒæ™¯åŠå…¶ PIDã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨`ps`(åœ¨è¿™ç§æƒ…å†µä¸‹ç”¨ä¸€ä¸ª`| grep mongo*`)ã€‚

* * *

* * *

## [](#load)**è½½**

[![gif of mongodb being loaded with a json dataset in a terminal](../Images/165340385df8e18647af4930f3b09a63.png)](https://i.giphy.com/media/iFhFPIbQEQ6GPIs4KY/giphy.gif) 
ç°åœ¨æˆ‘ä»¬å·²ç»å®‰è£…å¹¶å¯åŠ¨äº† MongoDBï¼Œæˆ‘ä»¬éœ€è¦ç”¨æ•°æ®å¡«å……å®ƒã€‚æˆ‘ä»¬å°†ä½¿ç”¨ç”± [ALT-WDI](https://github.com/ATL-WDI-Exercises) æä¾›çš„ [`mongo-pokemon`](https://github.com/ATL-WDI-Exercises/mongo-pokemon) åº“ä¸­çš„æ•°æ®é›†ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘å°†è¿™ä¸ªå›è´­åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œå¹¶å°†å…¶ç²¾ç®€ä¸ºæˆ‘ä»¬éœ€è¦çš„å•ä¸ªæ•°æ®é›†æ–‡ä»¶ã€‚

ç¡®ä¿æ‚¨å·²ç»å¯åŠ¨äº† MongoDB å®ä¾‹ï¼Œç„¶åæ‰“å¼€æ‚¨çš„ç»ˆç«¯ï¼Œå¯¼èˆªåˆ°ä¸€ä¸ªå¹²å‡€çš„ç›®å½•ï¼Œå¹¶è¿è¡Œä»¥ä¸‹ä»£ç :

```
git clone https://github.com/jackkeck/pokemonDataSet
cd pokemonDataSet
mongoimport -d pokemon -c pokemons --jsonArray < pokemon.json
mongo
show dbs
use pokemon
show collections
db.pokemons.find().pretty() 
```

Git çš„ [`clone`](https://git-scm.com/docs/git-clone) å‘½ä»¤ä¼šå°†æˆ‘çš„åˆ†å‰å­˜å‚¨åº“å¤åˆ¶åˆ°æ‚¨çš„æœ¬åœ°æœºå™¨ä¸Šã€‚ä¸€æ—¦å®ƒè¢«ä¸‹è½½ï¼Œä½ ä½¿ç”¨ [`cd`](http://linuxcommand.org/lc3_man_pages/cdh.html) ä¸‹æ‹‰åˆ°å­˜å‚¨åº“ä¸­ã€‚

MongoDB çš„ [`mongoimport`](https://docs.mongodb.com/manual/reference/program/mongoimport/) å‘½ä»¤å…è®¸æˆ‘ä»¬æ‰¹é‡è£…è½½æ•°æ®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨æ ‡å¿—æ¥å®Œæˆä¸€äº›äº‹æƒ…ã€‚æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨`-d`æ ‡å¿—åˆ›å»ºä¸€ä¸ªåä¸ºâ€œå£è¢‹å¦–æ€ªâ€çš„æ•°æ®åº“ã€‚æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨`-c`å›½æ——åˆ›å»ºä¸€ä¸ªåä¸ºâ€œå£è¢‹å¦–æ€ªâ€çš„é›†åˆã€‚æˆ‘ä»¬å‘Šè¯‰ import å‘½ä»¤å°†æ•°æ®æ–‡ä»¶è§†ä¸ºä¸€ä¸ª [JSON æ•°ç»„](https://www.json.org/)ã€‚æœ€åï¼Œæˆ‘ä»¬å°† pokemon.json æŒ‡å®šä¸ºæˆ‘ä»¬çš„å¯¼å…¥æ–‡ä»¶ã€‚

MongoDB é€šè¿‡å®ƒçš„ [`mongo`](https://docs.mongodb.com/manual/mongo/) å‘½ä»¤æä¾›äº†ä¸€ä¸ªåŸºäº Javascript çš„ shellã€‚ä¸€æ—¦æˆ‘ä»¬å¼¹å‡ºä¸€ä¸ª shellï¼Œæˆ‘ä»¬å°±ä½¿ç”¨ [`show dbs`](https://docs.mongodb.com/manual/reference/mongo-shell/) å‘½ä»¤æ¥åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„æ•°æ®åº“ï¼Œä»¥éªŒè¯æˆ‘ä»¬å·²ç»åˆ›å»ºäº† pokemon æ•°æ®åº“ã€‚æˆ‘ä»¬`use`å£è¢‹å¦–æ€ªæ•°æ®åº“ç„¶åä½¿ç”¨ [`show collections`](https://docs.mongodb.com/manual/reference/mongo-shell/) åˆ—å‡ºå®ƒçš„æ”¶è—ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°â€œå£è¢‹å¦–æ€ªâ€é›†åˆè¢«åˆ›å»ºï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ [`db.pokemons.find().pretty()`](https://docs.mongodb.com/manual/reference/method/db.collection.find/index.html) æ¥æ£€æŸ¥æ•°æ®æ˜¯å¦è¢«å¯¼å…¥ã€‚æˆ‘å–œæ¬¢æ·»åŠ  [`.pretty()`](https://docs.mongodb.com/manual/reference/method/cursor.pretty/index.html) æ–¹æ³•ï¼Œè®©è¾“å‡ºæ›´å®¹æ˜“é˜…è¯»ã€‚å¯¹äºç†Ÿæ‚‰å…³ç³»æ•°æ®åº“å’Œ sql çš„äººæ¥è¯´ï¼Œè¿™æ˜¯ mongo ä¸­çš„`select * from pokemon.pokemons`ã€‚

* * *

* * *

## [](#security)**å®‰å…¨**

MongoDB å’Œå®‰å…¨ç¤¾åŒºæœ‰ç€æœ‰è¶£çš„å…³ç³»ã€‚åœ¨ 3.6 ç‰ˆæœ¬ä¹‹å‰ï¼ŒMongoDB é»˜è®¤å…è®¸ 27017 ç«¯å£ä¸Šçš„ä»»ä½•è¿æ¥(è¿™æ„å‘³ç€å¦‚æœæ‚¨ä¸åœ¨é˜²ç«å¢™åé¢ï¼Œä»»ä½•äººéƒ½å¯ä»¥è¿›å…¥æ‚¨çš„æ•°æ®åº“)ã€‚å³ä½¿ç°åœ¨ï¼Œå®ƒä»ç„¶æ²¡æœ‰é»˜è®¤å¯ç”¨ä»»ä½•ç±»å‹çš„è®¿é—®æ§åˆ¶æˆ–èº«ä»½éªŒè¯ï¼Œé™¤éæ‚¨æœ‰ä¼ä¸šè®¸å¯ç‰ˆæœ¬ğŸ’°ã€‚æœ¬èŠ‚å°†ä»‹ç»ä¸€äº›æˆ‘ä»¬å¯ä»¥ç”¨æ¥ä¿æŠ¤å®ä¾‹çš„åŸºæœ¬æ­¥éª¤ã€‚

* * *

* * *

### [](#rolebased-access-control)**åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶**

ä½œä¸ºä¸€æ¡è§„åˆ™ï¼Œæˆ‘ä»¬åº”è¯¥åŠªåŠ›éµå®ˆæœ€å°ç‰¹æƒåŸåˆ™(PoLP)ã€‚é€šè¿‡ç°åœ¨åº”ç”¨è¿™ä¸€åŸåˆ™ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿æˆ‘ä»¬æ„å»ºçš„åº”ç”¨ç¨‹åºå…·æœ‰ç”Ÿäº§ç¯å¢ƒä¸­çš„è®¿é—®çº§åˆ«ã€‚

MongoDB ä½¿ç”¨åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶(RBAC)æ¥å®ç°æ²»ç†(er....æ§åˆ¶)çš„è®¿é—®ã€‚æœ‰å¤§é‡å…³äº RBAC æ˜¯ä»€ä¹ˆçš„èµ„æ–™ã€‚å¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œè¿™é‡Œæœ‰æ¥è‡ªå¤§å«Â·è´¹æ‹‰çº¦æ´›å’Œé‡Œå¤å¾·Â·åº“æ©çš„ä¼šè®®è®ºæ–‡*â€œåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶â€* : çš„å®šä¹‰

> åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶(RBAC)ç­–ç•¥å°†è®¿é—®æ§åˆ¶å†³ç­–å»ºç«‹åœ¨ç”¨æˆ·åœ¨ç»„ç»‡å†…è¢«å…è®¸æ‰§è¡Œçš„åŠŸèƒ½çš„åŸºç¡€ä¸Šã€‚ç”¨æˆ·ä¸èƒ½éšæ„å°†è®¿é—®æƒé™ä¼ é€’ç»™å…¶ä»–ç”¨æˆ·ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼ŒMongoDB ä¸ä¼šå¯ç”¨æ­¤åŠŸèƒ½ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦:

1.  åˆ›å»ºè¶…çº§ç”¨æˆ·ã€‚
2.  åœ¨æˆ‘ä»¬çš„`mongod.conf`ä¸­å¯ç”¨`authorization`ã€‚
3.  åˆ›å»ºä¸€ä¸ªå…·æœ‰è¯»å†™(RW)æƒé™çš„ç”¨æˆ·ï¼Œä½†åªèƒ½è®¿é—® pokemon æ•°æ®åº“ã€‚

#### [](#create-admin-user)*åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·*

[![gif of creating an admin user for mongodb in terminal](../Images/7ab8bf613bf2c530a6b0280bb8fca710.png)](https://i.giphy.com/media/McUpUbMLNHwjFm0o3K/giphy.gif) 
è¶…çº§ç”¨æˆ·å¯ä»¥åšä»»ä½•äº‹æƒ…ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ ä¸€ç›´ä½¿ç”¨è¿™ä¸ªæƒé™ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¸¦æœ‰å¯†ç çš„ä¸“ç”¨ç®¡ç†å‘˜ç”¨æˆ·ã€‚åœ¨æ‚¨çš„ç»ˆç«¯ä¸­ï¼Œæ‰“å¼€ä¸€ä¸ª mongo shell å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤:

```
use admin

db.createUser(
  { 
    user: "admin",  
    pwd: "doNotEatThat", 
    roles: 
      [
        {role: "userAdminAnyDatabase", db: "admin"},
        {role: "dbAdminAnyDatabase",   db: "admin"},
        {role: "readWriteAnyDatabase", db: "admin"}
      ]
  }
) 
```

* * *

* * *

#### [](#enable-authorization)*å¯ç”¨æˆæƒ*

[![gif of editing mongodb configuration to enable security authorization](../Images/c31a48014c07a901da541fedf8f493aa.png)](https://i.giphy.com/media/MBNtB3E78GeCA0Rdyl/giphy.gif) 
ä¸€æ—¦åˆ›å»ºäº† admin ç”¨æˆ·ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ MongoDB ä¸­å¯ç”¨`security.authorization`è®¾ç½®ã€‚

1.  åœæ­¢ MongoDB è¿è¡Œ`pkill -f mongod`æ¥åœæ­¢æ•°æ®åº“ã€‚æ‚¨å¯ä»¥ç¡®è®¤å®ƒå·²ç»åœæ­¢ä½¿ç”¨`jobs -l`ã€‚
2.  æ›´æ–°`mongod.conf`æˆ‘ç”¨äº†`sudo vi`ã€‚ä½œä¸ºå‚è€ƒï¼Œä½¿ç”¨ç®­å¤´é”®åˆ°è¾¾æ–‡ä»¶çš„æœ«å°¾ï¼ŒæŒ‰é”®ç›˜ä¸Šçš„â€œIâ€é”®é”®å…¥ï¼Œåœ¨ä¸‹é¢æ·»åŠ å®‰å…¨å—ï¼ŒæŒ‰é”®ç›˜ä¸Šçš„â€œescâ€é”®ï¼Œç„¶åé”®å…¥â€œ:wqâ€ï¼Œç„¶åæŒ‰ enter é”®ä¿å­˜å¹¶é€€å‡ºã€‚

```
/:~$ sudo vi /usr/local/etc/mongod.conf

systemLog:
  destination: file
  path: /usr/local/var/log/mongodb/mongo.log
  logAppend: true
storage:
  dbPath: /usr/local/var/mongodb
net:
  bindIp: 127.0.0.1
security:
   authorization: enabled 
```

#### [](#create-basic-user)*åˆ›å»ºåŸºç¡€ç”¨æˆ·*

[![gif of creating a basic user for mongodb in terminal](../Images/41586877fe49dc13d5a4f089aa028e45.png)](https://i.giphy.com/media/J4Ij43gtosj1PWAVaE/giphy.gif) 
åŸºæœ¬ç”¨æˆ·ä»…å¯¹*å£è¢‹å¦–æ€ªæ•°æ®åº“æ‹¥æœ‰è¯»å†™æƒé™ã€‚åœ¨æ‚¨çš„ç»ˆç«¯ä¸­ï¼Œæ‰“å¼€ä¸€ä¸ª mongo shell å¹¶è¿è¡Œä»¥ä¸‹ä»£ç :* 

 *```
db.auth("admin", "doNotEatThat")

use pokemon

db.createUser(
  { 
    user: "misty",  
    pwd: "godDamitPsyduck", 
    roles: 
      [
        {role: "readWrite", db: "pokemon"}
      ]
  }
) 
```

* * *

* * *

#### [](#trust-but-verify)*ä¿¡ä»»ï¼Œä½†*æ ¸å®

[![gif showing inability to perform actions mongodb without first authenticating ](../Images/d6928d5c48c3212fbf0fb5242386dcd3.png)](https://i.giphy.com/media/XBu8j8LPQB3WNqQn1m/giphy.gif) 
éªŒè¯ä½ çš„æ•°æ®åº“ç°åœ¨æ˜¯ç”¨ RBAC æ²»ç†çš„ï¼Œè¯•ç€è¿æ¥å¹¶æŸ¥çœ‹ä¸€äº›ä¸œè¥¿ã€‚æ‚¨ä¼šæ³¨æ„åˆ°ï¼Œå½“æ‚¨ä½¿ç”¨`mongo` shell å¯åŠ¨ä¸€ä¸ªè¿æ¥æ—¶ï¼Œä¸å†æœ‰è­¦å‘Šæ¶ˆæ¯è¯´â€œæ²¡æœ‰ä¸ºè¿™ä¸ªæ•°æ®åº“å¯ç”¨è®¿é—®æ§åˆ¶â€ã€‚æ­¤å¤–ï¼Œåœ¨ä½¿ç”¨`db.auth("user","pwd")`éªŒè¯ä¹‹å‰ï¼Œæˆ‘ä»¬æ— æ³•æŸ¥çœ‹æˆ–ç¼–è¾‘ä»»ä½•å†…å®¹ã€‚

* * *

* * *

#### [](#change-default-port)**æ›´æ”¹é»˜è®¤ç«¯å£**

[![gif of editing the default port in mongod.conf using terminal](../Images/ecae73dbd6668c9d3613581e34ff6ac8.png)](https://i.giphy.com/media/LPHQpKvJKUsIZSOD2A/giphy.gif) 
ä» MongoDB 3.6 å¼€å§‹ï¼Œmongod ç°åœ¨è¢«é…ç½®ä¸ºåªå…è®¸æ¥è‡ªæœ¬åœ°ä¸»æœºçš„*è¿æ¥ã€‚è¿™æ„å‘³ç€æ‚¨åªèƒ½ä»æ‚¨çš„ç¬”è®°æœ¬ç”µè„‘è®¿é—®æ‚¨çš„å®ä¾‹ã€‚è¿™å¾ˆå¥½ï¼Œä½†æ˜¯ IP å¯èƒ½ä¼šè¢«æ¬ºéª—ï¼Œç­‰ç­‰ã€‚æˆ‘ä»¬å°†é‡‡å–çš„ä¸€ä¸ªé¢å¤–æ­¥éª¤æ˜¯æ›´æ”¹é»˜è®¤çš„ MongoDB çš„é»˜è®¤ç«¯å£ã€‚ç±»ä¼¼äºæˆ‘ä»¬å¦‚ä½•å¯ç”¨`security.authorization`ï¼Œæˆ‘ä»¬å°†æ›´æ–°æˆ‘ä»¬çš„`mongod.conf`ã€‚*

1.  åœæ­¢ MongoDB è¿è¡Œ`pkill -f mongod`æ¥åœæ­¢æ•°æ®åº“ã€‚æ‚¨å¯ä»¥ç¡®è®¤å®ƒå·²ç»åœæ­¢ä½¿ç”¨`jobs -l`ã€‚
2.  æ›´æ–°`mongod.conf`æˆ‘ç”¨äº†`sudo vi`ã€‚ä½œä¸ºå‚è€ƒï¼Œä½¿ç”¨ç®­å¤´é”®åˆ°è¾¾æ–‡ä»¶çš„æœ«å°¾ï¼ŒæŒ‰é”®ç›˜ä¸Šçš„â€œIâ€é”®é”®å…¥ï¼Œåœ¨ä¸‹é¢æ·»åŠ ç«¯å£è®¾ç½®ï¼ŒæŒ‰é”®ç›˜ä¸Šçš„â€œescâ€é”®ï¼Œç„¶åé”®å…¥â€œ:wqâ€ï¼Œç„¶åæŒ‰ enter é”®ä¿å­˜å¹¶é€€å‡ºã€‚

```
/:~$ sudo vi /usr/local/etc/mongod.conf

systemLog:
  destination: file
  path: /usr/local/var/log/mongodb/mongo.log
  logAppend: true
storage:
  dbPath: /usr/local/var/mongodb
net:
  port: 23456
  bindIp: 127.0.0.1
security:
   authorization: enabled 
```

ç°åœ¨å¼€å§‹å¤‡ä»½æ‚¨çš„æ•°æ®åº“ã€‚è¯·è®°ä½ï¼Œä½ éœ€è¦è¿è¡Œâ€œmongo - port 23456â€æ¥å¯åŠ¨ä½ çš„è¿æ¥ã€‚

* * *

* * *

#### [](#helpful-scraps)**ä¹‰æ°”æ®‹ç¾¹**

**æ•°æ®åº“æ¸…ç†**
è¦å¿«é€Ÿæ¸…é™¤é™¤ admin ä¹‹å¤–çš„æ‰€æœ‰æ•°æ®åº“*ï¼Œè¯·ä½¿ç”¨æ¥è‡ªç”¨æˆ·çš„è¿™ä¸ªæ¼‚äº®çš„ä¸€è¡Œç¨‹åº [kev](https://stackoverflow.com/users/348785/kev) ä½œä¸º[MongoDB drop every DATABASE](https://stackoverflow.com/a/16908246)çº¿ç¨‹å †æ ˆæº¢å‡º:
``bash
mongo --quiet --eval 'db.getMongo().getDBNames().forEach(function(i){db.getSiblingDB(i).dropDatabase()})'`  `**CLEAN UNISTALLL**
To completely uninstall MongoDB and delete all of its tertiary data, please run the following commands:
``bash
pkill -f mongod
launchctl unload ~/Library/LaunchAgents/homebrew.mxcl.mongodb.plist
rm -f ~/Library/LaunchAgents/homebrew.mxcl.mongodb.plist
launchctl remove homebrew.mxcl.mongodb
brew uninstall --force mongodb-community
brew untap mongodb/brew
rm -rf /usr/local/etc/mongo*
rm -rf /usr/local/bin/mong*
rm -rf /usr/local/var/mongodb
rm -rf /Users/$USER/Library/Caches/Homebrew/downloads/*mongodb*````* 

 ```* * *

* * *```*