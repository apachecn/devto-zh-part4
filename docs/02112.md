# å•é¡µåº”ç”¨ç¨‹åºä¸­çš„é¡µé¢æ ‡é¢˜å’Œ A11y(å°¤å…¶æ˜¯ã€‚React & Vue)

> åŸæ–‡ï¼š<https://dev.to/s_aitchison/page-titles-and-a11y-in-single-page-applications-esp-react-vue-4ok8>

(è¿™ç¯‡æ–‡ç« çš„ä¸€ä¸ªç‰ˆæœ¬åªè¯¦ç»†æè¿°äº† React çš„å®ç°ï¼Œæœ€åˆå‘å¸ƒåœ¨[Up Your A11y:Handling Page Titles in React](https://www.upyoura11y.com/page-titles/))

## ä¸ºä»€ä¹ˆé¡µé¢æ ‡é¢˜å¯¹å¯è®¿é—®æ€§å¾ˆé‡è¦ï¼Ÿ

ç®€å•æ¥è¯´ï¼Œç”¨æˆ·æ— éœ€è¾“å…¥æˆ–å¯¼èˆªé¡µé¢å†…å®¹å°±å¯ä»¥ç«‹å³è·å¾—é¡µé¢æ ‡é¢˜ã€‚ä¸ºäº†æ„Ÿå—ä¸€ä¸‹è¿™ç§å¯è®¿é—®æ€§çš„å«ä¹‰ï¼Œç°åœ¨è¯•ç€æ‰“å¼€ä½ çš„å±å¹•é˜…è¯»å™¨(å¦‚æœä½ ç”¨çš„æ˜¯ Macï¼ŒCmd + F5 ä¼šåˆ‡æ¢ VoiceOver çš„å¼€å…³)ã€‚

æ‚¨åº”è¯¥ä¼šå‘ç°ï¼Œè¿™ä¸ªé¡µé¢çš„æ ‡é¢˜ä¼šç«‹å³æ˜¾ç¤ºå‡ºæ¥ï¼ŒåŒæ—¶è¿˜ä¼šæ˜¾ç¤ºå…¶ä»–ç›¸å…³çš„æµè§ˆå™¨ä¿¡æ¯ã€‚å¦‚æœæ‚¨æ‰“å¼€äº†å…¶ä»–é€‰é¡¹å¡ï¼Œè¯·å°è¯•ä½¿ç”¨ tab é”®æˆ–å•å‡»å®ƒä»¬ï¼Œçœ‹çœ‹æ ‡é¢˜åœ¨äº†è§£è¯¥é€‰é¡¹å¡æ˜¯å¦åŒ…å«æ‚¨è¦æŸ¥æ‰¾çš„å†…å®¹æ–¹é¢æœ‰å¤šå¤§ç”¨å¤„ã€‚

å¾ˆæ˜æ˜¾ï¼Œä¸€ä¸ªç®€æ´çš„ã€æè¿°æ€§çš„é¡µé¢æ ‡é¢˜å¯¹äºå±å¹•é˜…è¯»å™¨ç”¨æˆ·æ¥è¯´æ˜¯è‡³å…³é‡è¦çš„ã€‚

## å¦‚ä½•ç»™ä½ çš„é¡µé¢åŠ æ ‡é¢˜

W3C åœ¨è¿™æ–¹é¢æœ‰ä¸€äº›ä¼˜ç§€çš„ç®€å•æŠ€å·§ï¼Œæ€»ç»“å¦‚ä¸‹ã€‚

**æ¯ä¸ªç½‘é¡µçš„æ ‡é¢˜åº”è¯¥:**

*   è¯†åˆ«ç½‘é¡µçš„ä¸»é¢˜
*   åœ¨ç«™ç‚¹åœ°å›¾æˆ–æœç´¢ç»“æœåˆ—è¡¨ä¸­è„±ç¦»ä¸Šä¸‹æ–‡é˜…è¯»æ—¶æœ‰æ„ä¹‰ï¼Œä¾‹å¦‚é€šè¿‡å±å¹•é˜…è¯»å™¨
*   çŸ­çš„

**è¿™ä¹Ÿå¯èƒ½æœ‰åŠ©äºæ ‡é¢˜:**

*   æ ‡è¯†ç½‘é¡µæ‰€å±çš„ç«™ç‚¹æˆ–å…¶ä»–èµ„æº
*   åœ¨ç½‘é¡µæ‰€å±çš„ç«™ç‚¹æˆ–å…¶ä»–èµ„æºä¸­æ˜¯å”¯ä¸€çš„

é€šå¸¸ï¼Œæœ€é‡è¦/æœ€å…·ä½“çš„ä¿¡æ¯æ’åœ¨æœ€å‰é¢ä¹Ÿæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œä¾‹å¦‚

> å•é¡µåº”ç”¨ç¨‹åºä¸­çš„é¡µé¢æ ‡é¢˜:å¼€å‘ç¤¾åŒº

è€Œä¸æ˜¯:

> å¼€å‘ç¤¾åŒº:å•é¡µåº”ç”¨ç¨‹åºä¸­çš„é¡µé¢æ ‡é¢˜

## é¡µé¢æ ‡é¢˜å’Œå•é¡µåº”ç”¨

åœ¨å•é¡µé¢åº”ç”¨ç¨‹åºä¸­(æ¯”å¦‚ React å’Œå®¢æˆ·ç«¯æ¸²æŸ“çš„ Vue åº”ç”¨ç¨‹åº)ï¼Œé¡µé¢æ ‡é¢˜æ°¸è¿œä¸ä¼šæ”¹å˜ï¼Œé™¤éå®ƒè¢«ä¸“é—¨ç®¡ç†ã€‚è¿™ä½¿å¾—ä½ çš„ç”¨æˆ·åœ¨æ²¡æœ‰è¾“å…¥å’Œé˜…è¯»ä½ çš„å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå¾ˆéš¾æ‰¾åˆ°ä»–ä»¬å½“å‰æ­£åœ¨æµè§ˆçš„é¡µé¢çš„çº¿ç´¢ã€‚å¥½æ¶ˆæ¯æ˜¯æœ‰ç®€å•çš„æ–¹æ³•æ¥è½»æ¾ç®¡ç†æ ‡é¢˜ã€‚

## ç®¡ç† React ä¸­çš„é¡µé¢æ ‡é¢˜

å¯¹äº React åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å®ç° [React æ–‡æ¡£æ ‡é¢˜](https://github.com/gaearon/react-document-title)ç»„ä»¶ã€‚

å¯¹äºåº”ç”¨ç¨‹åºä¸­çš„æ¯ä¸ªé¡µé¢ï¼Œåªéœ€å°†å‘ˆç°çš„ç»„ä»¶åŒ…è£…åœ¨ DocumentTitle ç»„ä»¶ä¸­ï¼Œå¹¶ä¼ å…¥é¡µé¢æ ‡é¢˜ï¼Œä¾‹å¦‚

```
class ExamplePage extends React.Component {
  render() {
    return (
      <DocumentTitle title="Example Title: Example Website Name">
        <main>
          ...
        </main>
      </DocumentTitle>
    );
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœéœ€è¦ï¼Œæ‚¨ç”šè‡³å¯ä»¥å°†é¡µé¢æ ‡é¢˜ç»‘å®šåˆ°ç»„ä»¶çŠ¶æ€ä¸­çš„å±æ€§ï¼Œä¾‹å¦‚ï¼Œå¦‚æœæ‚¨éœ€è¦åœ¨ç»„ä»¶æŒ‚è½½æ—¶ä» API æˆ–å…¶ä»–åœ°æ–¹åŠ è½½é¡µé¢æ ‡é¢˜ã€‚

```
class ExamplePage extends React.Component {
  constructor(props) {
    super(props);

    this.state = {
      pageTitle: 'Loading Topics: Example Website Name',
    }
  }

  componentDidMount() {
    // Complete any tasks you need to complete before 
    // establishing page title

    this.setState({ pageTitle: 'Topics: Example Website Name' });
  }

  render() {
    const { pageTitle } = this.state;
    return (
      <DocumentTitle title={pageTitle}>
        <main>
          ...
        </main>
      </DocumentTitle>
    );
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## ç®¡ç† Vue ä¸­çš„é¡µé¢æ ‡é¢˜

ä½¿ç”¨ Vue-Routerï¼Œæ‚¨å¯ä»¥æ·»åŠ ä¸€ä¸ªç®€å•çš„æŒ‚é’©æ¥ç®¡ç†æ¯æ¬¡è·¯ç”±å™¨ä½ç½®æ”¹å˜æ—¶çš„é¡µé¢æ ‡é¢˜ã€‚é¦–å…ˆï¼Œæ‚¨éœ€è¦åœ¨å…ƒæ•°æ®ä¸­ä¸ºæ‚¨çš„æ¯æ¡è·¯çº¿é…ç½®é¡µé¢æ ‡é¢˜ï¼Œä¾‹å¦‚:

```
{
  path: '/',
  name: 'Home',
  meta: { 
    title: 'Home: MyApp',
  }, 
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœé¡µé¢æ ‡é¢˜å–å†³äºè·¯çº¿æœ¬èº«çš„ä¸€äº›ä¿¡æ¯ï¼Œè¿™å¯ä»¥ä¿®æ”¹ä¸º:

```
{
  path: '/',
  name: 'Home',
  meta: { 
    title: route => { 
      /* return custom title based on route/store/whatever  */ 
    },
  }, 
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æ‚¨å·²ç»é…ç½®å¥½äº†é¡µé¢æ ‡é¢˜ï¼Œæˆ‘ä»¬åªéœ€è¦å‘ vue-router æ·»åŠ ä¸€äº›ä»£ç ï¼Œä»¥ç¡®ä¿æ ‡é¢˜åœ¨è·¯ç”±æ”¹å˜åå¾—åˆ°æ›´æ–°ã€‚

è¿™å¯ä»¥é€šè¿‡ä¸ºè·¯ç”±å™¨å®šä¹‰ afterEach æ“ä½œæ¥å®ç°ï¼Œå¦‚ä¸‹:

```
router.afterEach((to, from) => {
  Vue.nextTick(() => {
    document.title = to.meta.title(to)
  })
}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ³¨æ„ä½¿ç”¨äº†`Vue.nextTick()`ï¼Œè€Œä¸æ˜¯åœ¨ afterEach å›è°ƒä¸­ç›´æ¥è®¾ç½®é¡µé¢æ ‡é¢˜ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿é¡µé¢æ ‡é¢˜ä»…åœ¨è·¯ç”±å™¨å¯¼èˆªå®Œæˆåæ›´æ–°(åŒ…æ‹¬æ›´æ–°æµè§ˆå™¨å†å²)ï¼Œä»è€Œç¡®ä¿æ‚¨çš„æµè§ˆå™¨å†å²ä¸é¡µé¢æ ‡é¢˜ä¿æŒåŒæ­¥ã€‚

## ç®€å•æœ‰æ•ˆ

æˆ‘åœ¨è¿™é‡Œè¯¦ç»†æè¿°äº†ä¸¤ä¸ªæµè¡Œæ¡†æ¶çš„ä¸€äº›åŸºæœ¬å®ç°ï¼Œä½†æ˜¯å¦‚æœä½ æœ‰å¦ä¸€ä¸ªå•é¡µé¢åº”ç”¨æ¡†æ¶çš„å®ç°ï¼Œè¯·åœ¨ä¸‹é¢éšæ„è¯„è®ºï¼

æ­£å¦‚ä½ åœ¨ä¸Šé¢çœ‹åˆ°çš„ï¼Œå®ç°é¡µé¢æ ‡é¢˜ç®¡ç†çš„æ­¥éª¤å¯èƒ½éå¸¸ç®€å•ï¼Œä½†æ˜¯è¿™æ ·åšçš„å½±å“æ˜¯å·¨å¤§çš„ã€‚å¥½çš„é¡µé¢æ ‡é¢˜å°†æœ‰åŠ©äºæ‰€æœ‰ç”¨æˆ·æµè§ˆä½ çš„åº”ç”¨ç¨‹åºï¼ŒåŒæ—¶ç»™ä½ çš„é¡µé¢ä¸€ä¸ªä¸“ä¸šçš„å¤–è§‚å’Œæ„Ÿè§‰ã€‚

* * *

ä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨å—ï¼Ÿè¯·è€ƒè™‘[ç»™æˆ‘ä¹°æ¯å’–å•¡](https://www.buymeacoffee.com/mgkZuRU)ï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥ç»§ç»­åˆ¶ä½œå†…å®¹ğŸ™‚