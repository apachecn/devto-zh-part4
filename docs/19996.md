# forEach çš„ä¹è¶£

> åŸæ–‡:[https://dev.to/gokatz/fun-with-foreach-1p1o](https://dev.to/gokatz/fun-with-foreach-1p1o)

## [](#so-whats-a-foreach)é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯ forEachï¼Ÿ

`forEach`æ˜¯ä¸€ä¸ªå°å®¶ä¼™ï¼Œä»–è¿­ä»£/å¾ªç¯éå†æ•°ç»„ï¼Œå¹¶å¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œç»™å®šçš„å›è°ƒã€‚å®ƒæ›´åƒæ˜¯ä¼ ç»Ÿçš„`for`ç¯ï¼Œä½†å…·æœ‰åŠŸèƒ½æ€§ã€‚ä¸€ä¸ªæ ·æœ¬ç‰‡æ®µåº”è¯¥æ˜¯è¿™æ ·çš„ï¼Œ

```
let colors = ['black', 'blue', 'red'];

colors.forEach((color) => {
    console.log(`${color} is a cool color`);
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¾“å‡ºä¸º:

```
black is a cool color
blue is a cool color
red is a cool color 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å› æ­¤ï¼Œæ­£å¦‚æ‚¨æ‰€è§ï¼Œ`forEach`å°†ä¸ºè¢«è°ƒç”¨æ–¹æ•°ç»„çš„æ¯ä¸ªæ¡ç›®è°ƒç”¨å›è°ƒã€‚æ˜¯çš„ï¼Œä½ å¯èƒ½å·²ç»çŸ¥é“è¿™æœ‰ä»€ä¹ˆå¥½ç©çš„äº†ï¼Ÿ

## [](#whats-the-fun-in-there)é‡Œé¢æœ‰ä»€ä¹ˆå¥½ç©çš„ï¼ŸğŸ‘¯â€â™‚ï¸

æˆ‘ä»¬å°†çœ‹åˆ°ä¸€äº›æ‚¨åœ¨å®æ—¶äº§å“/åº”ç”¨ä¸­å¯èƒ½ä¸ä¼šé‡åˆ°çš„ç‰‡æ®µï¼Œå¹¶å°è¯•çŒœæµ‹è¿™äº›ç‰‡æ®µçš„ç»“æœ(ä¸å·çœ‹è¾“å‡º)ğŸ‘€).è¿™æ‰æ˜¯çœŸæ­£çš„ä¹è¶£æ‰€åœ¨ğŸ˜‰

### [](#snippet-1)ç‰‡æ®µ 1

```
let colors = ['black', 'blue', 'red'];

colors.forEach((color) => {
    colors.push('cyan');
    console.log(`${color} is a cool color`);
});

console.log(colors); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‰€ä»¥ï¼Œå½“æˆ‘ä»”ç»†æ€è€ƒè¿™ä¸ªç‰‡æ®µæ—¶ï¼Œæˆ‘é¢„æµ‹è¿™ä¼šå¯¼è‡´ä¸€ä¸ªæ— é™å¾ªç¯ã€‚è¿™å®Œå…¨å¯ä»¥ç†è§£ï¼Œå¯¹å§ï¼Ÿä½†æ˜¯ï¼Œæˆ‘ä»¬çš„å°å®¶ä¼™ï¼Œ`forEach`ï¼Œ**å°†ä¼šè¿è¡Œå›è°ƒå‡½æ•°ï¼Œè¿è¡Œçš„æ¬¡æ•°æ­£å¥½æ˜¯åˆå§‹æ•°ç»„é•¿åº¦**çš„æ¬¡æ•°ã€‚

è¿™æ˜¯ä¸€ä¸ªå°å°çš„ [Twitter æŠ•ç¥¨](https://twitter.com/_gokatz/status/1129378217226203136)é™ˆè¿°äº†è¿™æ ·ä¸€ä¸ªç‰‡æ®µã€‚çœ‹çœ‹è¿™ä¸ªã€‚ä½ å¹¶ä¸å­¤å•ğŸ˜›

æ¶²ä½“é”™è¯¯:å†…éƒ¨

è¿™é‡Œï¼Œåˆå§‹æ•°ç»„é•¿åº¦æ˜¯ 3ï¼Œå›è°ƒåªæ‰§è¡Œ 3 æ¬¡ã€‚ç„¶è€Œï¼Œ**å›è°ƒå¯ä»¥æ”¹å˜æ•°ç»„**ã€‚ä½†æ˜¯ï¼Œå›è°ƒå°†ä¸ä¼šä¸ºåé¢è¶…å‡ºç•Œé™(åˆå§‹é•¿åº¦)çš„å…ƒç´ æ‰§è¡Œã€‚

å› æ­¤ï¼Œè¾“å‡ºå°†æ˜¯:

```
black is a cool color
blue is a cool color
red is a cool color
[ 'black', 'blue', 'red', 'cyan', 'cyan', 'cyan' ] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#snippet-2)ç‰‡æ®µ 2

```
let colors = ['black', 'blue', 'red'];

colors.forEach((color, index) => {
    colors[index+1] = 'cyan';
    console.log(`${color} is a cool color`);
});

console.log(colors); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ ¹æ®**å›è°ƒå¯ä»¥æ”¹å˜æ•°ç»„**çš„è§„åˆ™ï¼Œè¿™ä¸ªä»£ç ç‰‡æ®µçš„è¾“å‡ºä¼šæœ‰äº›ç›´æ¥ã€‚ä»ç¬¬ä¸€æ¬¡è¿è¡Œå¼€å§‹ï¼Œæˆ‘ä»¬ç”¨è¿™ä¸ª`colors[index+1] = 'cyan'`è¯­å¥å°†ä¸‹ä¸€ä¸ªç´¢å¼•çš„æ•°ç»„å€¼æ”¹ä¸º`cyan`ã€‚å› æ­¤ï¼Œè¾“å‡ºå°†æ˜¯:

```
black is a cool color
cyan is a cool color
cyan is a cool color
[ 'black', 'cyan', 'cyan', 'cyan' ] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ­£å¦‚ä½ å¯èƒ½æ³¨æ„åˆ°çš„ï¼Œåœ¨ç»“æœæ•°ç»„ä¸­æœ‰ä¸€ä¸ªé¢å¤–çš„å…ƒç´ ï¼Œè¿™æ˜¯å› ä¸ºï¼Œåœ¨æœ€åä¸€æ¬¡è¿è¡Œ(index = 2)æ—¶ï¼Œæˆ‘ä»¬å°†ä¸‹ä¸€ä¸ª index (index = 3)å…ƒç´ çš„å€¼èµ‹å€¼ä¸º`cyan`,å¦‚å‰æ‰€è¿°ï¼Œå›è°ƒå°†ä¸ä¼šä¸ºæˆ‘ä»¬åˆšåˆšæ¨é€çš„æœ€åä¸€ä¸ªå…ƒç´ è¿è¡Œï¼Œå› ä¸ºå®ƒé©»ç•™åœ¨åˆå§‹æ•°ç»„é•¿åº¦ä¹‹å¤–ã€‚

### [](#snippet-3)ç‰‡æ®µ 3

```
let colors = ['black', 'blue', 'red'];

colors.forEach((color, index) => {
    delete colors[index+1];
    console.log(`${color} is a cool color`);
});

console.log(colors); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œæˆ‘ä»¬ä»æ•°ç»„ä¸­åˆ é™¤é¡¹ç›®ã€‚ä½ è®¤ä¸ºè¾“å‡ºä¼šæ˜¯ä»€ä¹ˆï¼Ÿå·²åˆ é™¤é¡¹ç›®çš„å ä½ç¬¦æ˜¯ä»€ä¹ˆï¼Ÿ`undefined`ï¼Ÿ`NULL`ï¼Ÿè¿˜æ˜¯åˆ«çš„ï¼Ÿ

å¿«é€Ÿæµè§ˆæ—¶ï¼Œå¾ªç¯çš„å¸¸è§é¢„æµ‹æ˜¯ï¼Œ

```
black is a cool color
undefined is a cool color
undefined is a cool color 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬çŸ¥é“å›è°ƒå°†è¢«è°ƒç”¨æ•°ç»„çš„åˆå§‹é•¿åº¦ï¼Œåœ¨è¿™ä¸ªæ•°ç»„ä¸­ï¼Œå°±æ˜¯ **3** ã€‚

ä½†æ˜¯ï¼Œåˆ é™¤æ•°ç»„å…ƒç´ ä¼šä½¿é‚£ä¸ªç©ºé—´æˆä¸ºä¸€ä¸ª[æ´](http://2ality.com/2015/09/holes-arrays-es6.html)ï¼Œè€Œè¿™ä¸ª`forEach`å®¶ä¼™**ç›¸å½“èªæ˜ï¼Œä¸ä¼šä¸ºæ•°ç»„**ä¸­çš„æ´è¿è¡Œå›è°ƒã€‚

å› æ­¤ï¼Œå½“å¯¹ç¬¬ä¸€ä¸ªå…ƒç´ (index = 0)æ‰§è¡Œå›è°ƒæ—¶ï¼Œå®ƒå°†åˆ é™¤ç¬¬äºŒä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ä¸ä¼šæ‰§è¡Œå¯¹ç¬¬äºŒä¸ªå…ƒç´ çš„å›è°ƒï¼Œå¾ªç¯å°†è·³åˆ°ç¬¬ä¸‰ä¸ªå…ƒç´ ã€‚å› æ­¤è¾“å‡ºå°†æ˜¯:

```
black is a cool color
red is a cool color
[ 'black', empty, 'red' ] // empty is just the representation of holes in V8 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#snippet-4)ç‰‡æ®µ 4

é‚£ä¹ˆï¼Œä¸€ä¸ªç©ºæ•°ç»„ä¼šè¢«å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ

```
let colors = new Array(3);

colors.forEach((color, index) => {
    colors[index] = 'cyan';
    console.log(`${colors[index]} is a cool color`);
});

console.log(colors); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä»€ä¹ˆéƒ½ä¸ä¼šæ”¹å˜ï¼Œç©ºæ•°ç»„çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯å­”ã€‚`console.log(colors)`å°†å¯¼è‡´ç±»ä¼¼äº
çš„ç»“æœ

```
[empty Ã— 3] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å› æ­¤**å›è°ƒä¸ä¼šå¯¹ä»»ä½•æ´**æ‰§è¡Œï¼Œæ•´ä¸ªä»£ç ç‰‡æ®µçš„å®é™…è¾“å‡ºä¹Ÿå°†æ˜¯:

```
[empty Ã— 3] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#snippet-5)ç‰‡æ®µ 5

`forEach`ä¸­å¦ä¸€ä¸ªè¾ƒå°‘ä½¿ç”¨çš„ç‰¹æ€§æ˜¯å®ƒå¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œ [`thisArg`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach#Using_thisArg) ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°è¢«ä¼ é€’ï¼Œå›è°ƒå°†ä½¿ç”¨ä¼ é€’çš„ä¸Šä¸‹æ–‡æ¥æ‰§è¡Œã€‚ä»¥ä¸‹ç‰‡æ®µä»…ç”¨äºæ¼”ç¤ºï¼Œæ‚¨å¯ä»¥åœ¨ [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach#Using_thisArg) ä¸Šæ‰¾åˆ°æ›´ç›¸å…³çš„ç¤ºä¾‹ã€‚æˆ‘åœ¨è¿™é‡Œæ²¡æœ‰ä½¿ç”¨ç®­å¤´åŠŸèƒ½ï¼Œå› ä¸ºé‚£æ ·ä¼šä½¿`this`å˜æˆ`undefined`ã€‚

```
class colorHandler {
  isFavorite(color) {
    return color === 'cyan';
  }
}

let colors = ['black', 'blue', 'red', 'cyan'];

colors.forEach(function(color, index) {
    console.log(this.isFavorite(color))
}, new colorHandler()); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¾“å‡ºå°†æ˜¯:

```
false
false
false
true 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#so)å¦‚æ­¤...

å¸Œæœ›è¿™å¾ˆæœ‰è¶£ã€‚è¿™å°±æ˜¯æˆ‘ä»¬çš„å°å®¶ä¼™ã€‚å…³äº`forEach`å¯èƒ½è¿˜æœ‰å¾ˆå¤šå…¶ä»–æœ‰è¶£çš„ä¸œè¥¿ã€‚è¯·åœ¨è¯„è®ºä¸­åˆ†äº«ç»™æˆ‘ä»¬æƒŠå–œã€‚è®©æˆ‘ä»¬çœ‹çœ‹ **Fun With Arrays** ç³»åˆ—ä¸­çš„å¦ä¸€ä¸ªæ•°ç»„æ–¹æ³•/å±æ€§ã€‚

è¿˜æœ‰ä¸€ä¸ªæœ‰è¶£çš„äº‹å®:è¿™ä¸ªæ ‡é¢˜çš„çµæ„Ÿæ¥è‡ªäºç‰›é€¼(ğŸ˜‰)èŠ‚ç›®ç”±ã€Šç”Ÿæ´»å¤§çˆ†ç‚¸ã€‹ç³»åˆ—**ä¸­çš„è°¢å°”é¡¿å’Œè‰¾ç±³ä¸»æŒï¼Œåä¸º**ä¸æ——å¸œåŒä¹ã€‚****

[![](../Images/433db746a0c6d5f41b415678a5559f1f.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--xllGqR0l--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/hy6b2komgorhj87i64vh.jpg)