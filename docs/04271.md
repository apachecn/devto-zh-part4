# ES6 ç®­å¤´åŠŸèƒ½:æ‚¨éœ€è¦çŸ¥é“çš„ä¸€åˆ‡

> åŸæ–‡ï¼š<https://dev.to/godcrampy/es6-arrow-functions-all-you-need-to-know-5h4p>

ES6 å¼•å…¥äº†ç®­å¤´å‡½æ•°ï¼Œå®ƒæä¾›äº†ä¸€ç§ç¼–å†™æ›´çŸ­æ›´ç®€æ´ä»£ç çš„æ–¹æ³•ã€‚

```
// Old way
function squareOld(number) {
    return number ** 2;
}

// ES6 way
const squareNew = number => number ** 2;

// Callbacks become cleaner
let array = [1, 2, 3, 4, 5, 6];

// Old
array.filter(function(value) {
    return value % 2 === 0;
});
// [2, 4, 6]

// ES6
array.filter(value => value % 2 === 0);
// [2, 4, 6] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯·æ³¨æ„ä»¥ä¸‹äº‹é¡¹:

1.  ç®­å¤´å‡½æ•°è¯­æ³•è¿”å›æˆ‘ä»¬éœ€è¦å­˜å‚¨åœ¨å˜é‡ä¸­çš„å‡½æ•°
2.  æˆ‘ä»¬ä¸å†™`return`å…³é”®å­—ã€‚å½“å‡½æ•°å®šä¹‰åªæœ‰ä¸€è¡Œæ—¶ï¼Œè¿”å›è¯¥è¡Œçš„è¾“å‡º
3.  å‚æ•°`number`æ²¡æœ‰æ‹¬å·ã€‚(å½“æœ‰å¤šä¸ªå‚æ•°æ—¶ï¼Œæƒ…å†µå°±ä¸åŒäº†)

### ç®­å¤´è¯­æ³•

```
// No arguments
const sayHi = () => console.log("Hi");

// One argument, One line
const addFive = number => number + 5;

// Multiple arguments, One line
const addNumbers = (a, b) => a + b;

// One argument, Multiple lines
const doStuffAndAddFive = number => {
    let flavour = "vanilla";
    makeIceCream(flavour);
    eatIceCream();
    return number; /* Note that here we have to use the return keyword */
};

// Multiple arguments, Multiple lines
const doStuffAndAddNumbers = (a, b) => {
    let flavour = "vanilla";
    makeIceCream(flavour);
    eatIceCream();
    return a + b;
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### ç»‘å®šåœ¨æ™®é€šå‡½æ•°ä¸­

ç»‘å®šæ˜¯ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«ã€‚æ¯ä¸ªå‡½æ•°éƒ½å¯ä»¥è®¿é—®`this`å˜é‡ã€‚

è€ƒè™‘ä»¥ä¸‹æƒ…å†µ:

```
function getThis() {
    return this;
}
getThis();
// returns the global object 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸Šè¿°å‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶è¿”å›å…¨å±€å¯¹è±¡ã€‚

ç°åœ¨è€ƒè™‘è¿™ä¸ª:

```
let obj = {
    fruit: "Apple",
    calories: 100,
    getThis: function() {
        return this;
    }
};

obj.getThis();
// returns the obj object 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨è®©æˆ‘ä»¬çœ‹ä¸€ä¸ª ES6 *ç±»*çš„ä¾‹å­:

```
class Fruit {
    constructor(name, calories) {
        this.name = name;
        this.calories = calories;
    }
    getThis() {
        return this;
    }
}

let apple = new Fruit("Apple", 97);
apple.getThis();
// returns apple 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸€ä¸ªå¥‡ç‰¹çš„æ¡ˆä¾‹:

```
let person = {
    name: "Sally",
    getName: function() {
        return this.name;
    }
};

let name = "Sergie";

person.getName();
// "Sally"

let foo = person.getName;

foo();
// "Sergie" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“æˆ‘ä»¬ç§°ä¹‹ä¸º`person.getName()`ï¼Œ`this`æŒ‡çš„æ˜¯äººå¯¹è±¡ã€‚ç„¶åï¼Œå½“æˆ‘ä»¬ç”¨ä¸`person.getName`ç›¸åŒçš„å®šä¹‰æ¥åˆå§‹åŒ–`foo`æ—¶ï¼Œ`this`æŒ‡çš„æ˜¯å…¨å±€å¯¹è±¡ã€‚

å¦‚ä½•ææ¸…æ¥š`this`å…³é”®è¯æŒ‡å‘å“ªé‡Œï¼Ÿ

ä¸€ä¸ªåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æœ‰æ•ˆçš„å¥½æ–¹æ³•æ˜¯æ£€æŸ¥å‡½æ•°è°ƒç”¨ä¹‹å‰æ˜¯å¦æœ‰ç‚¹æ“ä½œç¬¦ã€‚å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå‡½æ•°å®šä¹‰ä¸­çš„`this`å°†å¼•ç”¨ç‚¹è¿ç®—ç¬¦ä¹‹å‰çš„å¯¹è±¡ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­`person.getName()`ä¸­ï¼Œå¯¼è‡´`this`è¢«å¼•ç”¨åˆ°`person`ã€‚å¦‚æœæ²¡æœ‰ç‚¹ç¬¦ï¼Œ`this`é€šå¸¸ä¼šæŒ‡ä»£å…¨å±€å¯¹è±¡ã€‚

æ³¨æ„ï¼Œè¿™åªæ˜¯ä¸€ä¸ªæŠ€å·§ï¼Œè€Œä¸æ˜¯è§„åˆ™ã€‚

### ç»‘å®šç®­å¤´åŠŸèƒ½

ä¸æ™®é€šå‡½æ•°ä¸åŒï¼Œ`this`çš„ç»‘å®šæ ¹æ®ä»£ç å®šä¹‰çš„ä½ç½®*è€Œä¸æ˜¯å®šä¹‰æœ¬èº«è€Œå˜åŒ–ï¼Œarrow å‡½æ•°ä¸­çš„ç»‘å®šåœ¨ä»»ä½•åœ°æ–¹éƒ½ä¿æŒä¸å˜ã€‚*

æˆ‘ä»¬æ¥è€ƒè™‘ä¸€ä¸‹å‰é¢å¸¦ç®­å¤´å‡½æ•°çš„ä»£ç :

```
let person = {
  name: "Sally",
  getName: () => this.name;
}

let name = "Sergie";

person.getName();
// "Sergie"

let foo = person.getName;

foo();
// "Sergie" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å› æ­¤ï¼Œåœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œarrow å‡½æ•°å¼•ç”¨å¸¦æœ‰`this`çš„å…¨å±€å¯¹è±¡ã€‚åœ¨ç®­å¤´åŠŸèƒ½çš„æƒ…å†µä¸‹ï¼Œ`this`ç»‘å®šä¸å˜ã€‚å¦ä¸€ä¸ªæ£€æŸ¥ç®­å¤´å‡½æ•°çš„`this`å¯¹è±¡æŒ‡å‘å“ªé‡Œçš„æ–¹æ³•æ˜¯åœ¨å£°æ˜ç®­å¤´å‡½æ•°ä¹‹å‰è§‚å¯Ÿ`this`çš„å€¼ã€‚

```
let object = {
    whatsThis: this,
    getThisNew: () => this,
    getThisOld: function() {
        return this;
    }
};

object.whatsThis();
// global

object.getThisNew();
// global

object.getThisOld();
// object 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬åœ¨ ES6 ç±»çš„æƒ…å†µä¸‹æµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬ç›®å‰æ‰€çŸ¥é“çš„ã€‚æ³¨æ„ï¼Œä¸å¯¹è±¡ä¸åŒçš„æ˜¯ï¼Œ`this`å¼•ç”¨çš„ä¸æ˜¯å¯¹è±¡æœ¬èº«ï¼Œåœ¨ç±»ä¸­å®ƒå¼•ç”¨çš„æ˜¯ç±»çš„å®ä¾‹ã€‚

```
class Fruit {
    constructor(name) {
        this.name = name;
    }
    getNameOld() {
        return this.name;
    }
    getNameNew = () => this.name;
}

// global variable
let name = "Sally";

let apple = new Fruit("Apple");

apple.getNameNew();
// "Apple"

apple.getNameOld();
// "Apple"

// Now let's make two new functions:
let foo = apple.getNameOld;
let bar = apple.getNameNew;

foo();
// "Sally"

bar();
// "Apple" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ³¨æ„`foo`æ˜¯å¦‚ä½•è¿”å›`"Sally"`çš„ï¼Œå› ä¸º*ç»‘å®šåˆ°å…¨å±€å¯¹è±¡*ï¼Œè€Œ`bar`ç»‘å®šåˆ°`apple`å¯¹è±¡å¹¶è¿”å›`"Apple"`ã€‚

å› æ­¤ï¼Œæ€»çš„æ¥è¯´ï¼Œæ™®é€šå‡½æ•°éµå¾ª*ç‚¹*æ“ä½œç¬¦â€œhack â€,è€Œç®­å¤´å‡½æ•°ä¿æŒ*ç»‘å®š*åˆ°å‡½æ•°å®šä¹‰å‰çš„å€¼`this`ã€‚å³ä½¿å‡½æ•°è¢«é‡æ–°å£°æ˜ï¼Œè¿™ç§ç»‘å®šä»ç„¶å­˜åœ¨ï¼Œä¸åƒé¦™è‰å‘³ã€‚

> è¿™å°±æ˜¯ä½ éœ€è¦çŸ¥é“çš„å…³äº ES6 ç®­å¤´å‡½æ•°çš„å…¨éƒ¨å†…å®¹ã€‚å¦‚æœä½ å‘ç°äº†é”™è¯¯æˆ–è€…æœ‰ç–‘é—®ï¼Œè¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ã€‚æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œç¥æ‚¨æœ‰ç¾å¥½çš„ä¸€å¤©ğŸ˜„