# ä½¿ç”¨ GitHub æ“ä½œå°†é¡¹ç›®éƒ¨ç½²åˆ° Github é¡µé¢

> åŸæ–‡ï¼š<https://dev.to/pierresaid/deploy-node-projects-to-github-pages-with-github-actions-4jco>

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†è§£é‡Šå¦‚ä½•å»ºç«‹ä¸€ä¸ªä½¿ç”¨ç°æœ‰ GitHub åŠ¨ä½œçš„åŸºæœ¬å·¥ä½œæµç¨‹ã€‚æ¯æ¬¡å¯¹ä¸»åˆ†æ”¯è¿›è¡Œæ›´æ”¹æ—¶ï¼Œè¯¥å·¥ä½œæµéƒ½ä¼šå°†é™æ€ç½‘ç«™éƒ¨ç½²åˆ° GitHub é¡µé¢ã€‚

ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨[éƒ¨ç½²åˆ° GitHub é¡µé¢åŠ¨ä½œ](https://github.com/marketplace/actions/deploy-to-github-pages)ã€‚

# åˆ›å»ºæˆ‘ä»¬çš„å·¥ä½œæµ

å­˜å‚¨åº“çš„å·¥ä½œæµç¨‹å­˜å‚¨åœ¨`.github/workflows/`æ–‡ä»¶å¤¹ä¸­ã€‚

åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª. yml æ–‡ä»¶(ä¾‹å¦‚`deploy-to-gh-pages.yml`ä½ å¯ä»¥éšæ„å‘½å)å¹¶ç²˜è´´è¿™ä¸ª:

```
 name: Build and Deploy
on: [push] # defaults to master
permissions:
  contents: write
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v3

      - name: Install and Build ğŸ”§
        run: |
          npm install
          npm run-script build

      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: build # The folder the action should deploy. 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### æ„å»ºæ­¥éª¤

```
 - name: Install and Build ğŸ”§
      run: |
        npm install
        npm run-script build 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨éƒ¨ç½²ä¹‹å‰æ”¾ç½®ç¼–è¯‘ä»£ç æ‰€éœ€çš„è„šæœ¬ã€‚å¦‚æœæ²¡æœ‰å¿…è¦ï¼Œåªéœ€åˆ é™¤è¿™ä¸€éƒ¨åˆ†ã€‚

### é€‰é¡¹

```
 with:
        branch: gh-pages
        folder: dist 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‰€æœ‰è¿™äº›é€‰é¡¹éƒ½æ˜¯ç¯å¢ƒå˜é‡ï¼Œ [Deploy to GitHub Pages åŠ¨ä½œ](https://github.com/marketplace/actions/deploy-to-github-pages)å°†ä½¿ç”¨è¿™äº›å˜é‡æ¥å·¥ä½œã€‚

`BRANCH`é€‰é¡¹æ˜¯æ‚¨å¸Œæœ›å°†æ„å»ºæ–‡ä»¶éƒ¨ç½²åˆ°çš„åˆ†æ”¯ã€‚é»˜è®¤æƒ…å†µä¸‹æ˜¯`gh-pages`ï¼Œè¿™æ · github ä¼šè‡ªåŠ¨è®¾ç½®ä½ çš„ github pages ç½‘ç«™ã€‚

> åœ¨æ­¤ä¹‹å‰ï¼Œæ‚¨éœ€è¦åˆ›å»º`gh-pages`åˆ†æ”¯ã€‚å¦‚æœåˆ†æ”¯ä¸å­˜åœ¨ï¼Œæ“ä½œå°†å¤±è´¥ã€‚

`folder`é€‰é¡¹æ˜¯æ‚¨æƒ³è¦éƒ¨ç½²çš„å­˜å‚¨åº“ä¸­çš„æ–‡ä»¶å¤¹ã€‚Vue.js åº”ç”¨é€šå¸¸æ˜¯`dist`ï¼ŒReact.js åº”ç”¨é€šå¸¸æ˜¯`build`ã€‚

éœ€è¦æœ‰`permissions`æ–‡ä»¶ï¼Œè¿™æ ·è„šæœ¬å°±æœ‰è¶³å¤Ÿçš„æƒé™è¿è¡Œã€‚

æˆ–è€…ï¼Œå¦‚æœæ‚¨æƒ³ä½¿ç”¨ç‰¹å®šçš„è®¿é—®ä»¤ç‰Œï¼Œæ‚¨å¯ä»¥åƒè¿™æ ·æ·»åŠ `token`é€‰é¡¹:

> `token: ${{ secrets.ACCESS_TOKEN }}`

æ­¤é€‰é¡¹æ˜¯ç”¨äºæˆæƒæ“ä½œå­˜å‚¨åº“çš„è®¿é—®ä»¤ç‰Œã€‚

> æ‚¨å¯ä»¥åœ¨[é…ç½®æ–‡ä»¶è®¾ç½®/å¼€å‘è€…è®¾ç½®](https://github.com/settings/tokens)ä¸­ç”Ÿæˆè¯¥ä»¤ç‰Œï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°æ‚¨çš„å­˜å‚¨åº“çš„`secrets`ä¸­çš„`Settings/Secrets`ä¸­

# è‡ªå®šä¹‰åŸŸå

å¦‚æœæ‚¨ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼Œæ‚¨éœ€è¦é¢„å…ˆåœ¨`gh_pages`åˆ†æ”¯çš„æ ¹ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ª`CNAME`æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«æ‚¨çš„åŸŸåã€‚

> ä¾‹å¦‚`dev.to`

å¦‚æœæ‚¨æ˜¯ä½¿ç”¨è‡ªå®šä¹‰åŸŸåçš„**è€Œä¸æ˜¯**ï¼Œé‚£ä¹ˆä¸è¦å¿˜è®°æŒ‡å®šæ‚¨çš„é¡¹ç›®ä¸åœ¨æœåŠ¡å™¨æ ¹ç›®å½•ä¸‹ã€‚

*   å¯¹äº Vue.js åº”ç”¨ç¨‹åºï¼Œå°†æ­¤æ·»åŠ åˆ°`vue.config.js`ä¸­ã€‚[è¿›ä¸€æ­¥ä¿¡æ¯](https://cli.vuejs.org/config/#publicpath)ã€‚

```
module.exports = {
    publicPath: process.env.NODE_ENV === 'production'
        ? '/repository-name/'
        : '/'
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*   å¯¹äº React.js åº”ç”¨ç¨‹åºï¼Œæ·»åŠ è¿™ä¸ªä½ çš„`package.json`ã€‚[è¿›ä¸€æ­¥ä¿¡æ¯](https://create-react-app.dev/docs/deployment#building-for-relative-paths)ã€‚

```
"homepage":"https://yourusername.github.io/repository-name" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# æŒ‡å®šåˆ†æ”¯(å¯é€‰)

é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“è¿›è¡Œæ›´æ”¹æ—¶ï¼Œè¿™å°†ä½¿ç”¨`master`åˆ†æ”¯ã€‚

è¦è¿›è¡Œæ›´æ”¹ï¼Œè¯·å°†è¯¥å±æ€§çš„`on: [push]`æ›¿æ¢ä¸ºæ‚¨å¸Œæœ›è¿è¡Œè¯¥å±æ€§çš„åˆ†æ”¯çš„åç§°ã€‚

```
on:
  push:
    branches:
      - main 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> æ³¨æ„:å¦‚æœæ²¡æœ‰åœ¨`master`åˆ†æ”¯ä¸Šæ¨é€ï¼Œæ‚¨çš„å·¥ä½œæµä¸ä¼šå‡ºç°åœ¨`Actions`é€‰é¡¹å¡ä¸­ã€‚ä½†æ˜¯ï¼Œæ‚¨ä»ç„¶å¯ä»¥åœ¨æäº¤çš„è¯¦ç»†ä¿¡æ¯ä¸­è®¿é—®å·¥ä½œæµçš„è¿è¡Œã€‚

* * *

å°±æ˜¯è¿™æ ·ï¼æ¨åŠ¨ä½ çš„æ”¹å˜ï¼Œä½ ç°åœ¨å¯ä»¥åœ¨â€œåŠ¨ä½œâ€æ ‡ç­¾ä¸­è§‚çœ‹é­”æœ¯è¡¨æ¼”ã€‚

[![Alt Text](img/266096836dedf22937f5ee2f279853e1.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--v49viQLZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/1djjhixx18vkdh8n9sl5.png)

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯¥åº”ç”¨è¢«éƒ¨ç½²åˆ° GitHub é¡µé¢*ä½ å¯ä»¥ç‚¹å‡»ä»£ç æ ‡ç­¾*ä¸­çš„`environment`æŒ‰é’®æŸ¥çœ‹ä½ çš„éƒ¨ç½²:

[![Alt Text](img/e1ce1a1c2de52feb4a6266c8d6d21b20.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--aaP_-Ce7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/ys92cfjv10gdk7onx63f.png)

ç¬¬ä¸€æ¬¡è¿è¡ŒåŠ¨ä½œæ—¶ï¼Œæ‚¨å¯èƒ½éœ€è¦åœ¨â€œè®¾ç½®â€æ ‡ç­¾ä¸­ç¦ç”¨/å¯ç”¨ github é¡µé¢é€‰é¡¹ã€‚ä½ å¯ä»¥é€šè¿‡å°†*æº*è®¾ç½®æ›´æ”¹ä¸º`master`ï¼Œç„¶åè¿”å›åˆ°`gh-pages`æ¥å®ç°ã€‚

æ‚¨çš„ live åº”ç”¨ç¨‹åºçš„é“¾æ¥æ˜¯`https://yourusername.github.io/repository-name`