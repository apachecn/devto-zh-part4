# å½“ä½ æœ€å–œæ¬¢çš„ Twitcher åœ¨ 30 è¡Œ Python ä¸­æµå¼ä¼ è¾“æ—¶ï¼Œæ”¶åˆ°ä¸€æ¡çŸ­ä¿¡ã€‚

> åŸæ–‡:[https://dev . to/daolf/get-an-SMS-when-your favorite-twitcher-is-streaming-in-30-lines-of-python-549 a](https://dev.to/daolf/get-an-sms-when-your-favorite-twitcher-is-streaming-in-30-lines-of-python-549a)

å¤§å®¶å¥½:)ä»Šå¤©ï¼Œæˆ‘å°†å¼€å§‹ä¸€ä¸ªä¸“é—¨é’ˆå¯¹ Python åˆå­¦è€…çš„æ–°ç³»åˆ—å¸–å­ã€‚è¿™ä¸ªæ¦‚å¿µç›¸å½“ç®€å•:æˆ‘å°†ç”¨å°½å¯èƒ½å°‘çš„ä»£ç åšä¸€ä¸ªæœ‰è¶£çš„é¡¹ç›®ï¼Œå¹¶å°è¯•å°½å¯èƒ½å¤šçš„æ–°å·¥å…·ã€‚

ä¾‹å¦‚ï¼Œä»Šå¤©æˆ‘ä»¬å°†å­¦ä¹ ä½¿ç”¨ Twilio APIï¼ŒTwitch APIï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•åœ¨ Heroku ä¸Šéƒ¨ç½²é¡¹ç›®ã€‚æˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•æ‹¥æœ‰è‡ªå·±çš„â€œTwitch Liveâ€çŸ­ä¿¡é€šçŸ¥ç¨‹åºï¼Œ30 è¡Œä»£ç ï¼Œæ¯æœˆ 12 ç¾åˆ†ã€‚

**å…ˆå†³æ¡ä»¶**:ä½ åªéœ€è¦çŸ¥é“å¦‚ä½•åœ¨ä½ çš„æœºå™¨ä¸Šè¿è¡Œ Pythonï¼Œä»¥åŠ git ä¸­çš„ä¸€äº›åŸºæœ¬å‘½ä»¤(commit & push)ã€‚å¦‚æœä½ éœ€è¦è¿™äº›æ–¹é¢çš„å¸®åŠ©ï¼Œæˆ‘å¯ä»¥å‘ä½ æ¨èè¿™ä¸¤ç¯‡æ–‡ç« :

*   [Python 3 å®‰è£…&å®‰è£…æŒ‡å—](https://realpython.com/installing-python/)
*   [Adrian hajd in ä¸ºåˆå­¦è€…ç¼–å†™çš„ç»ˆæ Git å‘½ä»¤æ•™ç¨‹](https://www.freecodecamp.org/news/git-commands/)

**ä½ å°†å­¦åˆ°ä»€ä¹ˆ:**

*   Twitch API
*   Twilio API
*   åœ¨ Heroku éƒ¨ç½²
*   åœ¨ Heroku ä¸Šè®¾ç½®è°ƒåº¦ç¨‹åº

**æ‚¨å°†æ„å»ºä»€ä¹ˆ:**

è§„èŒƒå¾ˆç®€å•:æˆ‘ä»¬å¸Œæœ›åœ¨æŸä¸ªç‰¹å®šçš„ Twitcher æ­£åœ¨ç›´æ’­æ—¶æ”¶åˆ°çŸ­ä¿¡ã€‚æˆ‘ä»¬æƒ³çŸ¥é“è¿™ä¸ªäººä»€ä¹ˆæ—¶å€™ä¸Šçº¿ï¼Œä»€ä¹ˆæ—¶å€™ç¦»å¼€æµåª’ä½“ã€‚æˆ‘ä»¬æƒ³è®©è¿™æ•´ä¸ªäº‹æƒ…è‡ªå·±è¿è¡Œï¼Œä¸€æ•´å¤©ã€‚

æˆ‘ä»¬å°†æŠŠè¿™ä¸ªé¡¹ç›®åˆ†ä¸º 3 ä¸ªéƒ¨åˆ†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•ä»¥ç¼–ç¨‹æ–¹å¼çŸ¥é“æŸä¸ªç‰¹å®šçš„ Twitcher æ˜¯å¦åœ¨çº¿ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œå¦‚ä½•æ¥æ”¶çŸ­ä¿¡ã€‚æœ€åï¼Œæˆ‘ä»¬å°†çœ‹çœ‹å¦‚ä½•è®©è¿™æ®µä»£ç æ¯ X åˆ†é’Ÿè¿è¡Œä¸€æ¬¡ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ä¼šé”™è¿‡æˆ‘ä»¬æœ€å–œæ¬¢çš„ streamer çš„å¦ä¸€ä¸ªæ—¶åˆ»ã€‚

# [](#is-this-twitcher-live)è¿™ä¸ª Twitcher æ˜¯ç›´æ’­å—ï¼Ÿ

è¦çŸ¥é“ Twitcher æ˜¯å¦æ˜¯å®æ—¶çš„ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸¤ä»¶äº‹:æˆ‘ä»¬å¯ä»¥è®¿é—® Twitcher çš„ URL å¹¶å°è¯•æŸ¥çœ‹æ ‡è®°â€œå®æ—¶â€æ˜¯å¦åœ¨é‚£é‡Œã€‚

[![](../Images/be17925a0cbd1cd7c4c2dea8c23f3937.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--7Z3kk3a3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.freecodecamp.org/news/content/images/2019/08/Capture-d-e-cran-2019-08-14-a--15.49.31.png)

è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠåˆ°æŠ“å–ï¼Œåœ¨ Python ä¸­ä¸åˆ° 20 è¡Œä»£ç æ˜¯ä¸å®¹æ˜“åšåˆ°çš„ã€‚Twitch è¿è¡Œå¤§é‡ JS ä»£ç ï¼Œä¸€ä¸ªç®€å•çš„ request.get()æ˜¯ä¸å¤Ÿçš„ã€‚

å¯¹äºæŠ“å–å·¥ä½œï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Chrome ä¸­æŠ“å–è¯¥é¡µé¢ï¼Œä»¥è·å¾—ä¸æ‚¨åœ¨æˆªå›¾ä¸­çœ‹åˆ°çš„å†…å®¹ç›¸åŒçš„å†…å®¹ã€‚è¿™æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯éœ€è¦çš„ä»£ç è¿œä¸æ­¢ 30 è¡Œã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œä¸è¦çŠ¹è±«ï¼Œçœ‹çœ‹æˆ‘æœ€è¿‘çš„[ç½‘é¡µæŠ“å–æŒ‡å—](https://www.daolf.com/posts/avoiding-being-blocked-while-scraping-ultimate-guide/)ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»–ä»¬çš„ APIï¼Œè€Œä¸æ˜¯å°è¯•ä½¿ç”¨ Twitchã€‚å¯¹äºé‚£äº›ä¸ç†Ÿæ‚‰è¿™ä¸ªæœ¯è¯­çš„äººæ¥è¯´ï¼ŒAPI æ˜¯ä¸€ä¸ªç¼–ç¨‹æ¥å£ï¼Œå®ƒå…è®¸ç½‘ç«™å‘ä»»ä½•äºº(ä¸»è¦æ˜¯å¼€å‘è€…)å…¬å¼€å®ƒä»¬çš„ç‰¹æ€§å’Œæ•°æ®ã€‚åœ¨ Twitch çš„ä¾‹å­ä¸­ï¼Œä»–ä»¬çš„ API æ˜¯é€šè¿‡ HTTP å…¬å¼€çš„ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„ HTTP è¯·æ±‚è·å¾—å¤§é‡ä¿¡æ¯å¹¶åšå¾ˆå¤šäº‹æƒ…ã€‚

## [](#get-your-api-key)è·å–æ‚¨çš„ API å¯†é’¥

ä¸ºæ­¤ï¼Œæ‚¨å¿…é¡»é¦–å…ˆåˆ›å»ºä¸€ä¸ª Twitch API é”®ã€‚è®¸å¤šæœåŠ¡å¯¹å®ƒä»¬çš„ API å®æ–½è®¤è¯ï¼Œä»¥ç¡®ä¿æ²¡æœ‰äººæ»¥ç”¨å®ƒä»¬ï¼Œæˆ–è€…é™åˆ¶æŸäº›äººå¯¹æŸäº›ç‰¹æ€§çš„è®¿é—®ã€‚

è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è·å–æ‚¨çš„ API å¯†é’¥:

*   åˆ›å»ºä¸€ä¸ª Twitch å¸æˆ·
*   ç°åœ¨åˆ›å»ºä¸€ä¸ª Twitch [å¼€å‘å¸æˆ·](https://dev.twitch.tv/) - >â€œæ³¨å†Œ-ä¸ Twitchâ€å³ä¸Šè§’
*   ç™»å½•åï¼Œè½¬åˆ°æ‚¨çš„â€œä»ªè¡¨æ¿â€
*   "æ³¨å†Œæ‚¨çš„åº”ç”¨ç¨‹åº"
*   åç§°->éšä¾¿ï¼ŒOauth é‡å®šå‘ URL -> [http://localhost](http://localhost) ï¼Œç±»åˆ«- >éšä¾¿

ç°åœ¨ï¼Œæ‚¨åº”è¯¥ä¼šåœ¨å±å¹•åº•éƒ¨çœ‹åˆ°æ‚¨çš„å®¢æˆ·ç«¯ idã€‚è¿™ä¸ªç•™ç€ä»¥åç”¨ã€‚

# [](#is-that-twitcher-streaming-now)é‚£ä¸ª Twitcher ç°åœ¨æµäº†å—ï¼Ÿ

æœ‰äº† API å¯†åŒ™ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æŸ¥è¯¢ Twitch API ä»¥è·å¾—æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬å¼€å§‹ç¼–ç ã€‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µä½¿ç”¨æ­£ç¡®çš„å‚æ•°ä½¿ç”¨ Twitch API å¹¶æ‰“å°å“åº”ã€‚

```
# requests is the go to package in python to make http request
# https://2.python-requests.org/en/master/ import requests

# This is one of the route where Twich expose data, 
# They have many more: https://dev.twitch.tv/docs endpoint = "https://api.twitch.tv/helix/streams?"

# In order to authenticate we need to pass our api key through header headers = {"Client-ID": "<YOUR-CLIENT-ID>"}

# The previously set endpoint needs some parameter, here, the Twitcher we want to follow
# Disclaimer, I don't even know who this is, but he was the first one on Twich to have a live stream so I could have nice examples params = {"user_login": "Solary"}

# It is now time to make the actual request response = request.get(endpoint, params=params, headers=headers)
print(response.json()) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¾“å‡ºåº”è¯¥æ˜¯è¿™æ ·çš„:

```
{  "data":[  {  "id":"35289543872",  "user_id":"174955366",  "user_name":"Solary",  "game_id":"21779",  "type":"live",  "title":"Wakz duoQ w/ Tioo - GM 400LP - On rÃ©cupÃ¨re le chall aprÃ¨s les -250LP d'inactivitÃ© !",  "viewer_count":4073,  "started_at":"2019-08-14T07:01:59Z",  "language":"fr",  "thumbnail_url":"https://static-cdn.jtvnw.net/previews-ttv/live_user_solary-{width}x{height}.jpg",  "tag_ids":[  "6f655045-9989-4ef7-8f85-1edcec42d648"  ]  }  ],  "pagination":{  "cursor":"eyJiIjpudWxsLCJhIjp7Ik9mZnNldCI6MX19"  }  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ç§æ•°æ®æ ¼å¼è¢«ç§°ä¸º JSONï¼Œæ˜“äºé˜…è¯»ã€‚`data`å¯¹è±¡æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰å½“å‰æ´»åŠ¨æµçš„æ•°ç»„ã€‚é”®`type`ç¡®ä¿æµå½“å‰æ˜¯`live`ã€‚å¦åˆ™ï¼Œè¯¥é”®å°†ä¸ºç©º(ä¾‹å¦‚ï¼Œåœ¨å‡ºé”™çš„æƒ…å†µä¸‹)ã€‚

å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨ Python ä¸­åˆ›å»ºä¸€ä¸ªå¸ƒå°”å˜é‡æ¥å­˜å‚¨å½“å‰ç”¨æˆ·æ˜¯å¦åœ¨æµå¼ä¼ è¾“ï¼Œæˆ‘ä»¬åªéœ€åœ¨ä»£ç ä¸­æ·»åŠ :

```
json_response = response.json()

# We get only streams streams = json_response.get('data', [])

# We create a small function, (a lambda), that tests if a stream is live or not is_active = lambda stream: stream.get('type') == 'live'
# We filter our array of streams with this function so we only keep streams that are active streams_active = filter(is_active, streams)

# any returns True if streams_active has at least one element, else False at_least_one_stream_active = any(streams_active)

print(at_least_one_stream_active) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ­¤æ—¶ï¼Œ`at_least_one_stream_active`å°±æ˜¯`True`å½“ä½ æœ€å–œæ¬¢çš„ Twitcher ç›´æ’­çš„æ—¶å€™ã€‚
ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•é€šè¿‡çŸ­ä¿¡è·å¾—é€šçŸ¥ã€‚

# [](#send-me-a-text-now)ç»™æˆ‘å‘ä¸ªçŸ­ä¿¡ï¼Œç°åœ¨ï¼

å› æ­¤ï¼Œè¦å‘æˆ‘ä»¬è‡ªå·±å‘é€æ–‡æœ¬ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Twilio APIã€‚åªéœ€åˆ°[é‚£é‡Œ](https://www.twilio.com/try-twilio)å»åˆ›å»ºä¸€ä¸ªè´¦æˆ·ã€‚å½“è¦æ±‚ç¡®è®¤æ‚¨çš„ç”µè¯å·ç æ—¶ï¼Œè¯·ä½¿ç”¨æ‚¨å¸Œæœ›åœ¨æ­¤é¡¹ç›®ä¸­ä½¿ç”¨çš„ç”µè¯å·ç ã€‚è¿™æ ·ä½ å°±å¯ä»¥ä½¿ç”¨ Twilio æä¾›ç»™æ–°ç”¨æˆ·çš„ 15 ç¾å…ƒå…è´¹ä¿¡ç”¨ã€‚ä¸€æ¡çŸ­ä¿¡å¤§çº¦ 1 ç¾åˆ†ï¼Œè¶³å¤Ÿä½ çš„æœºå™¨äººè¿è¡Œä¸€å¹´äº†ã€‚

å¦‚æœä½ å»[æ§åˆ¶å°](https://www.twilio.com/console)ï¼Œä½ ä¼šçœ‹åˆ°ä½ çš„`Account SID`å’Œä½ çš„`Auth Token`ï¼Œç•™ç€ä»¥åç”¨ã€‚ä¹Ÿç‚¹å‡»çº¢è‰²çš„å¤§æŒ‰é’®â€œè·å–æˆ‘çš„è¯•ç”¨å·â€ï¼ŒæŒ‰ç…§æ­¥éª¤ï¼Œå¹¶ä¿å­˜è¿™ä¸ªç¨åã€‚

ç”¨ Twilio Python API å‘é€æ–‡æœ¬éå¸¸å®¹æ˜“ï¼Œå› ä¸ºä»–ä»¬æä¾›äº†ä¸€ä¸ªåŒ…æ¥å¸®ä½ åšè¿™äº›çƒ¦äººçš„äº‹æƒ…ã€‚ç”¨`pip install Twilio`å®‰è£…åŒ…ï¼Œåªéœ€åš:

```
from twilio.rest import Client
client = Client(<Your Account SID>, <Your Auth Token>)
client.messages.create(
    body='Test MSG',from_=<Your Trial Number>,to=<Your Real Number>) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°±æ˜¯ä½ ç»™è‡ªå·±å‘ä¸€æ¡çŸ­ä¿¡æ‰€éœ€è¦çš„ï¼Œå¾ˆæ£’å§ï¼Ÿ

# [](#putting-everything-together)æŠŠä¸€åˆ‡æ”¾åœ¨ä¸€èµ·

æˆ‘ä»¬ç°åœ¨å°†æ‰€æœ‰å†…å®¹æ”¾åœ¨ä¸€èµ·ï¼Œå¹¶ç¨å¾®ç¼©çŸ­ä»£ç ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è¯´ Python ä»£ç ä¸åˆ° 30 è¡Œã€‚

```
import requests
from twilio.rest import Client
endpoint = "https://api.twitch.tv/helix/streams?"
headers = {"Client-ID": "<YOUR-CLIENT-ID>"}
params = {"user_login": "Solary"}
response = request.get(endpoint, params=params, headers=headers)
json_response = response.json()
streams = json_response.get('data', [])
is_active = lambda stream:stream.get('type') == 'live'
streams_active = filter(is_active, streams)
at_least_one_stream_active = any(streams_active)
if at_least_one_stream_active:
    client = Client(<Your Account SID>, <Your Auth Token>)
    client.messages.create(body='LIVE !!!',from_=<Your Trial Number>,to=<Your Real Number>) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# [](#avoiding-double-notifications)é¿å…åŒé‡é€šçŸ¥

è¿™ä¸ªç‰‡æ®µå·¥ä½œå¾—å¾ˆå¥½ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªç‰‡æ®µæ¯åˆ†é’Ÿéƒ½åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œä¸€æ—¦æˆ‘ä»¬æœ€å–œæ¬¢çš„ Twitcher ä¸Šçº¿ï¼Œæˆ‘ä»¬å°±ä¼šæ¯åˆ†é’Ÿæ”¶åˆ°ä¸€æ¡çŸ­ä¿¡ã€‚

æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥å­˜å‚¨è¿™æ ·çš„äº‹å®ï¼Œå³æˆ‘ä»¬å·²ç»è¢«é€šçŸ¥æˆ‘ä»¬çš„ Twitcher æ˜¯æ´»çš„ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¸å†éœ€è¦è¢«é€šçŸ¥ã€‚

Twilio API çš„å¥½å¤„æ˜¯ï¼Œå®ƒæä¾›äº†ä¸€ç§æ£€ç´¢æˆ‘ä»¬çš„æ¶ˆæ¯å†å²çš„æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€æ£€ç´¢æˆ‘ä»¬å‘é€çš„æœ€åä¸€æ¡çŸ­ä¿¡ï¼Œçœ‹çœ‹æˆ‘ä»¬æ˜¯å¦å·²ç»å‘é€äº†ä¸€æ¡é€šçŸ¥æˆ‘ä»¬ twitcher æ˜¯æ´»åŠ¨çš„æ–‡æœ¬ã€‚

è¿™é‡Œæˆ‘ä»¬è¦ç”¨ä¼ªä»£ç åšçš„æ˜¯:

```
if favorite_twitcher_live and last_sent_sms is not live_notification:
    send_live_notification()
if not favorite_twitcher_live and last_sent_sms is live_notification:
    send_live_is_over_notification() 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ ·ï¼Œæˆ‘ä»¬å°†åœ¨æµå¼€å§‹æ—¶ä»¥åŠç»“æŸæ—¶æ”¶åˆ°æ–‡æœ¬ã€‚è¿™æ ·æˆ‘ä»¬å°±ä¸ä¼šæ”¶åˆ°åƒåœ¾é‚®ä»¶â€”â€”å¾ˆå¥½ï¼Œå¯¹å§ï¼Ÿæˆ‘ä»¬æ¥ç¼–ç ä¸€ä¸‹:

```
# reusing our Twilio client last_messages_sent = client.messages.list(limit=1)
last_message_id = last_messages_sent[0].sid
last_message_data = client.messages(last_message_id).fetch()
last_message_content = last_message_data.body 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨è®©æˆ‘ä»¬æŠŠæ‰€æœ‰çš„ä¸œè¥¿æ”¾åœ¨ä¸€èµ·:

```
import requests
from twilio.rest import Client
client = Client(<Your Account SID>, <Your Auth Token>)

endpoint = "https://api.twitch.tv/helix/streams?"
headers = {"Client-ID": "<YOUR-CLIENT-ID>"}
params = {"user_login": "Solary"}
response = request.get(endpoint, params=params, headers=headers)
json_response = response.json()
streams = json_response.get('data', [])
is_active = lambda stream:stream.get('type') == 'live'
streams_active = filter(is_active, streams)
at_least_one_stream_active = any(streams_active)

last_messages_sent = client.messages.list(limit=1)
if last_messages_sent:
    last_message_id = last_messages_sent[0].sid
    last_message_data = client.messages(last_message_id).fetch()
    last_message_content = last_message_data.body
    online_notified = "LIVE" in last_message_content
    offline_notified = not online_notified
else:
    online_notified, offline_notified = False, False

if at_least_one_stream_active and not online_notified:
    client.messages.create(body='LIVE !!!',from_=<Your Trial Number>,to=<Your Real Number>)
if not at_least_one_stream_active and not offline_notified:
    client.messages.create(body='OFFLINE !!!',from_=<Your Trial Number>,to=<Your Real Number>) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç§ï¼

ç°åœ¨ä½ æœ‰äº†ä¸€ä¸ªä¸åˆ° 30 è¡Œçš„ Python ä»£ç ç‰‡æ®µï¼Œå®ƒä¼šåœ¨ä½ æœ€å–œæ¬¢çš„ Twitcher ä¸Šçº¿/ä¸‹çº¿æ—¶é©¬ä¸Šç»™ä½ å‘ä¸€æ¡çŸ­ä¿¡ï¼Œè€Œä¸ä¼šç»™ä½ å‘åƒåœ¾é‚®ä»¶ã€‚

æˆ‘ä»¬ç°åœ¨åªéœ€è¦æ¯éš” X åˆ†é’Ÿè¿è¡Œä¸€æ¬¡è¿™ä¸ªä»£ç ç‰‡æ®µã€‚

# [](#the-quest-for-a-host)å¯»æ‰¾å®¿ä¸»

ä¸ºäº†æ‰˜ç®¡å’Œè¿è¡Œè¿™ä¸ªç‰‡æ®µï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Herokuã€‚è€å®è¯´ï¼ŒHeroku æ˜¯åœ¨ç½‘ç»œä¸Šæ‰˜ç®¡åº”ç”¨ç¨‹åºæœ€ç®€å•çš„æ–¹å¼ä¹‹ä¸€ã€‚ç¼ºç‚¹æ˜¯ï¼Œä¸å…¶ä»–è§£å†³æ–¹æ¡ˆç›¸æ¯”ï¼Œå®ƒéå¸¸æ˜‚è´µã€‚å¯¹æˆ‘ä»¬æ¥è¯´å¹¸è¿çš„æ˜¯ï¼Œä»–ä»¬æœ‰ä¸€ä¸ªæ…·æ…¨çš„å…è´¹è®¡åˆ’ï¼Œå¯ä»¥è®©æˆ‘ä»¬å‡ ä¹å…è´¹åšæˆ‘ä»¬æƒ³åšçš„äº‹æƒ…ã€‚

å¦‚æœä½ è¿˜æ²¡æœ‰ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ª [Heroku è´¦æˆ·](https://www.heroku.com/)ã€‚ä½ è¿˜éœ€è¦ä¸‹è½½å¹¶[å®‰è£… Heroku å®¢æˆ·ç«¯](https://devcenter.heroku.com/articles/heroku-cli#download-and-install)ã€‚

ç°åœ¨ä½ å¿…é¡»å°†ä½ çš„ Python è„šæœ¬ç§»åŠ¨åˆ°å®ƒè‡ªå·±çš„æ–‡ä»¶å¤¹ä¸­ï¼Œä¸è¦å¿˜è®°åœ¨å…¶ä¸­æ·»åŠ ä¸€ä¸ª`requirements.txt`æ–‡ä»¶ã€‚åè€…çš„å†…å®¹å¼€å§‹:

```
requests
twilio 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`cd`æ”¾å…¥è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œç„¶ååªåšä¸€ä¸ª`heroku create --app <app name>`ã€‚

å¦‚æœä½ æ‰“å¼€ä½ çš„åº”ç”¨[ä»ªè¡¨ç›˜](https://dashboard.heroku.com/apps)ï¼Œä½ ä¼šçœ‹åˆ°ä½ çš„æ–°åº”ç”¨ã€‚

æˆ‘ä»¬ç°åœ¨éœ€è¦åˆå§‹åŒ–ä¸€ä¸ª git repoï¼Œå¹¶å°†ä»£ç æ¨é€åˆ° Heroku:

```
git init
heroku git:remote -a <app name>
git add .
git commit -am 'Deploy breakthrough script'
git push heroku master 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ çš„åº”ç”¨ç¨‹åºç°åœ¨å·²åœ¨ Heroku ä¸Šï¼Œä½†æ²¡æœ‰ä»»ä½•ä½œç”¨ã€‚ç”±äºè¿™ä¸ªå°è„šæœ¬ä¸èƒ½æ¥å— HTTP è¯·æ±‚ï¼Œæ‰€ä»¥å»`<app name>.herokuapp.com`ä¸ä¼šåšä»»ä½•äº‹æƒ…ã€‚ä½†è¿™åº”è¯¥ä¸æ˜¯é—®é¢˜ã€‚ä¸ºäº†è®©è¿™ä¸ªè„šæœ¬å…¨å¤©å€™è¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ Heroku æ’ä»¶â€œHeroku Schedulerâ€ã€‚è‹¥è¦å®‰è£…æ­¤åŠ è½½é¡¹ï¼Œè¯·å•å‡»åº”ç”¨ä»ªè¡¨æ¿ä¸Šçš„â€œé…ç½®åŠ è½½é¡¹â€æŒ‰é’®ã€‚

[![](../Images/5bb7a4ab6f5fba75d429d7178e309ddf.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--9GeqegVj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.freecodecamp.org/news/content/images/2019/08/Capture-d-e-cran-2019-08-15-a--12.50.40.png)

ç„¶åï¼Œåœ¨æœç´¢æ ä¸Šï¼ŒæŸ¥æ‰¾ Heroku Scheduler:

[![](../Images/8c3b6b8b8270e65fa71f7ecba88200e7.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--nRT83ifd--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.freecodecamp.org/news/content/images/2019/08/Capture-d-e-cran-2019-08-15-a--12.53.12.png)

å•å‡»ç»“æœï¼Œç„¶åå•å‡»â€œä¾›åº”â€

[![](../Images/d3bc1392bdbc617a8d9dfe5833adf241.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Z6apx5py--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.freecodecamp.org/news/content/images/2019/08/Capture-d-e-cran-2019-08-15-a--12.50.59.png)

å¦‚æœä½ å›åˆ°ä½ çš„åº”ç”¨ä»ªè¡¨æ¿ï¼Œä½ ä¼šçœ‹åˆ°é™„åŠ ç»„ä»¶:

[![](../Images/21166fe47ff4b51dde7855917135c3db.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--DyFSu_as--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.freecodecamp.org/news/content/images/2019/08/Capture-d-e-cran-2019-08-15-a--12.54.16.png)

å•å‡»â€œHeroku Schedulerâ€é“¾æ¥æ¥é…ç½®ä½œä¸šã€‚ç„¶åç‚¹å‡»â€œåˆ›å»ºå·¥å•â€ã€‚åœ¨æ­¤é€‰æ‹©â€œ10 åˆ†é’Ÿâ€ï¼Œå¯¹äºè¿è¡Œå‘½ä»¤é€‰æ‹©`python <name_of_your_script>.py`ã€‚ç‚¹å‡»â€œä¿å­˜ä½œä¸šâ€ã€‚

è™½ç„¶æˆ‘ä»¬ç›®å‰åœ¨ Heroku ä¸Šä½¿ç”¨çš„æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯å…è´¹çš„ï¼Œä½†æ˜¯ Heroku è°ƒåº¦ç¨‹åºå°†åœ¨$ 25/æœˆçš„å®ä¾‹ä¸Šè¿è¡Œè¯¥ä½œä¸šï¼Œä½†æ˜¯æŒ‰æ¯”ä¾‹åˆ†é…ç»™ç¬¬äºŒä¸ªå®ä¾‹ã€‚å› ä¸ºè¿™ä¸ªè„šæœ¬å¤§çº¦éœ€è¦ 3 ç§’é’Ÿè¿è¡Œï¼Œæ‰€ä»¥è¿™ä¸ªè„šæœ¬æ¯ 10 åˆ†é’Ÿè¿è¡Œä¸€æ¬¡ï¼Œä½ æ¯ä¸ªæœˆåªéœ€è¦èŠ± 12 ç¾åˆ†ã€‚

# [](#ideas-for-improvements)æ”¹è¿›æ„è§

æˆ‘å¸Œæœ›ä½ å–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œä½ æœ‰ä¹è¶£æŠŠå®ƒæ”¾åœ¨é€‚å½“çš„ä½ç½®ã€‚åœ¨ä¸åˆ° 30 è¡Œçš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åšäº†å¾ˆå¤šï¼Œä½†è¿™ä¸€åˆ‡éƒ½è¿œéå®Œç¾ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æ”¹è¿›å®ƒçš„æƒ³æ³•:

*   å‘è‡ªå·±å‘é€æœ‰å…³å½“å‰æµåª’ä½“çš„æ›´å¤šä¿¡æ¯(ç©çš„æ¸¸æˆã€è§‚çœ‹äººæ•°...)
*   ä¸€æ—¦ twitcher ç¦»çº¿ï¼Œå‘é€è‡ªå·±æœ€åä¸€ä¸ªæµçš„æŒç»­æ—¶é—´
*   ä¸ç»™ä½ å‘çŸ­ä¿¡ï¼Œè€Œæ˜¯å‘é‚®ä»¶
*   å¦‚æœä½ æœ‰æ›´å¤šçš„æƒ³æ³•ï¼Œè¯·ä¸è¦çŠ¹è±«ï¼Œåœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ã€‚

# [](#conclusion-please-dont-go)ç»“è®ºï¼Œè¯·ä¸è¦èµ°ğŸ™ğŸ™ğŸ™

æˆ‘å¸Œæœ›ä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œå¹¶ä¸”åœ¨é˜…è¯»ä¸­æœ‰æ‰€æ”¶è·ã€‚æˆ‘çœŸçš„ç›¸ä¿¡è¿™ç§é¡¹ç›®æ˜¯å­¦ä¹ æ–°å·¥å…·å’Œæ–°æ¦‚å¿µçš„æœ€å¥½æ–¹å¼ä¹‹ä¸€ï¼Œæˆ‘æœ€è¿‘å‘å¸ƒäº†ä¸€ä¸ª[ç½‘ç»œæŠ“å– API](https://www.scrapingninja.co) ï¼Œåœ¨åˆ¶ä½œå®ƒçš„è¿‡ç¨‹ä¸­æˆ‘å­¦åˆ°äº†å¾ˆå¤šã€‚

æˆ‘æ­£è€ƒè™‘ç”¨ 15 ä¸ªè¿™ç§é¡¹ç›®ä¸º Python å­¦ä¹ è€…å†™ä¸€æœ¬ä¹¦ã€‚è¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ï¼Œå¦‚æœä½ è®¤ä¸ºè¿™æ˜¯ä½ æ„Ÿå…´è¶£çš„ä¸œè¥¿ï¼Œå¦‚æœä½ è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªåä¸»æ„ğŸ™…â€â™‚ï¸æˆ–è€…åªæ˜¯ä½ æ‰€æƒ³çš„ğŸ¤”

å¿«ä¹ç¼–ç ã€‚