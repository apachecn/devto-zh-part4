# å¿«é€Ÿå›é¡¾ JavaScript çš„ Array.prototype.sort()æ–¹æ³•

> åŸæ–‡:[https://dev . to/isalevine/a-quick-review-of-JavaScript-s-array-prototype-sort-method-7cm](https://dev.to/isalevine/a-quick-review-of-javascript-s-array-prototype-sort-method-7cm)

*å°é¢å›¾ç‰‡é¸£è°¢: [**çŒäºº x çŒäºº**æ¼«ç”»](https://en.wikipedia.org/wiki/Hunter_%C3%97_Hunter)ä½œè€…å¯Œåšä¹‰åšï¼Œç”±ä½ çœŸæ­£è¿·ä¸Šã€‚< 3*

åœ¨é¢è¯•ä¸­ï¼Œäº†è§£ä½ é€‰æ‹©ä½¿ç”¨çš„è¯­è¨€çš„åŸºç¡€æ˜¯å¾ˆé‡è¦çš„ã€‚è¿™å¬èµ·æ¥åƒæ˜¯å¸¸è¯†ï¼Œä½†åŸºç¡€çŸ¥è¯†çš„å·®è·ä¼šè®©ä½ çœ‹èµ·æ¥å¾ˆç³Ÿç³•ã€‚åœ¨ç»å†äº†ä¸€æ¬¡**(å’³å’³)**ä¸æ„‰å¿«çš„ç»å†ä¹‹åï¼ŒåŒ…æ‹¬ç¨å¾®è¿‡å¿«åœ°æµè§ˆ JavaScript çš„ array . protype . sort()æ–¹æ³•ä¸Šçš„ [MDN æ–‡æ¡£ï¼Œæˆ‘æƒ³ä½¿ç”¨æˆ‘ä»¬åœ¨æœ¬ç³»åˆ—å‰é¢æ£€ç´¢çš„åŒä¸€ä¸ª JSON å¯¹è±¡æ¥åˆ†è§£ä¸€ä¸ªç®€å•çš„å®ç°ã€‚](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)

[![gif of hisoka holding out a hand of playing cards, some of them facing the wrong direction](../Images/cb26ff5bf57078fa2f4745062ee3fb7d.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--2J0_f1_H--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/o8fk857mzi5bqvesp5o2.gif) 
*æ•´ç†ä¸œè¥¿å¾ˆé‡è¦ï¼é—®é—®è¿™å®¶ä¼™å°±çŸ¥é“äº†ï¼Œä»–æ˜æ˜çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆï¼*

# [](#default-arrayprotoypesort-behavior)é»˜è®¤ array . protype . sort()è¡Œä¸º

é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ JavaScript æ•°ç»„ä¸Šè°ƒç”¨`.sort()`å°†å°è¯•ä¸€äº›åŸºæœ¬çš„ä»ä½åˆ°é«˜çš„æ’åºï¼ŒåŸºäºå­—ç¬¦ä¸²çš„å­—æ¯é¡ºåºæˆ–æ•°å­—çš„å€¼ã€‚ç„¶è€Œï¼Œé»˜è®¤è¡Œä¸ºå°†åªæ¯”è¾ƒå­—ç¬¦ä¸²(ä»…é¦–å­—æ¯)æˆ–æ•°å­—(é‡åˆ°çš„ç¬¬ä¸€ä¸ªæ•°å­—)çš„ç¬¬ä¸€ä¸ªå…ƒç´ **ã€‚**

ä»¥ä¸‹æ˜¯æ¥è‡ª MDN æ–‡æ¡£çš„æ¯ä¸ªç¤ºä¾‹:

```
// sorting strings alphabetically, based on the first letter
var months = ['March', 'Jan', 'Feb', 'Dec'];
months.sort();
console.log(months);
// expected output: Array ["Dec", "Feb", "Jan", "March"]

// sorting integers by their first digit
var array1 = [1, 30, 4, 21, 100000];
array1.sort();
console.log(array1);
// expected output: ArrayÂ [1, 100000, 21, 30, 4] 
```

å¯ä»¥ç†è§£çš„æ˜¯ï¼Œçœ‹åˆ° 100000 å‡ºç°åœ¨ 1 å’Œ 21 ä¹‹é—´ï¼Œä½ å¯èƒ½ä¼šæªæ‰‹ä¸åŠã€‚å¹¸è¿çš„æ˜¯ï¼ŒJavaScript ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§å†…ç½®çš„æ–¹å¼æ¥å®šåˆ¶æˆ‘ä»¬çš„æ’åºè¡Œä¸ºï¼Œå³åœ¨`.sort()`ä¸­ä½¿ç”¨`compareFunction`ï¼

# [](#defining-sorting-behavior-with-a-comparefunction-sort-functiona-b-)ç”¨ compareFunction å®šä¹‰æ’åºè¡Œä¸ºã€‚æ’åº(å‡½æ•°(aï¼Œb) { â€¦ })

æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ä¸€ä¸ªåä¸º`compareFunction`çš„åŒ¿åå‡½æ•°æ¥æ”¹å˜é»˜è®¤çš„æ’åºè¡Œä¸ºã€‚æˆ‘ä»¬å°†å®ƒæ·»åŠ åˆ°`.sort()`è°ƒç”¨ä¸­ï¼Œå¹¶ä¼ é€’å‚æ•°`a`å’Œ`b`æ¥è¡¨ç¤ºæ•°ç»„çš„å…ƒç´ ã€‚

ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æ¯”è¾ƒ`a`å’Œ`b`çš„æ•´ä¸ªå€¼ï¼Œå¹¶åŸºäºæ­¤è¿›è¡Œæ’åºï¼Œè€Œä¸æ˜¯åªæ¯”è¾ƒæ•´æ•°çš„ç¬¬ä¸€ä¸ªæ•°å­—ã€‚

å†æ¬¡æ”¹ç¼–è‡ª MDN æ–‡æ¡£:

```
// sorting integers by their value
var array1 = [1, 30, 4, 21, 100000];

array1.sort(function(a, b) {   // this anonymous function is the compareFunction
    if (a < b) {    // now the entire values of a & b are compared
        return -1;
    };
    if (a > b) {
        return 1;
    };
    // a must be equal to b, no change to index
    return 0;
});

console.log(array1);
// expected output: ArrayÂ [1, 4, 21, 30, 100000] 
```

å¤ªå¥½äº†ï¼ç°åœ¨ï¼Œé€šè¿‡æ˜¾å¼æ¯”è¾ƒ`a`å’Œ`b`çš„*æ•´ä½“*å€¼ï¼Œè€Œä¸ä»…ä»…æ˜¯å®ƒä»¬çš„ç¬¬ä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬å¾—åˆ°äº†æˆ‘ä»¬æœŸæœ›çš„æ•°å­—æ’åºã€‚

æ³¨æ„ï¼ŒåŒ¿åçš„`compareFunction`æ˜¯ç‰¹æ®Šçš„ï¼Œå› ä¸ºå®ƒåœ¨å¯»æ‰¾è´Ÿ(-1)ã€é›¶(0)æˆ–æ­£(1)çš„è¿”å›:

```
Negative  =>  lower index
Zero      =>  no change
Positive  =>  higher index 
```

å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä»»ä½•æˆ‘ä»¬å¸Œæœ›æœ€ç»ˆè¿”å›è´Ÿ/é›¶/æ­£å€¼çš„æ¡ä»¶ã€‚

# [](#sorting-json-based-on-nested-properties)æ ¹æ®åµŒå¥—å±æ€§å¯¹ JSON è¿›è¡Œæ’åº

**TLï¼›DR:å°†ä½ çš„åµŒå¥—å±æ€§èµ‹ç»™ä½ å¯ä»¥åœ¨æ¯”è¾ƒé€»è¾‘ä¸­è½»æ¾ä½¿ç”¨çš„å˜é‡ï¼**

è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­:æŒ‰ç…§å±æ€§çš„å­—æ¯é¡ºåºå¯¹æ¥è‡ª[https://www.reddit.com/r/popular.json](https://www.reddit.com/r/popular.json)çš„ JSON è¿›è¡Œæ’åºã€‚

æé†’ä¸€ä¸‹ï¼Œä¸‹é¢æ˜¯æˆ‘ä»¬å°†è¦æ’åºçš„ JSONï¼Œç‰¹åˆ«æ˜¯åŸºäº`data.children`æ•°ç»„ä¸­çš„å±æ€§:

[![sorted json from reddit's /r/popular board](../Images/c3ea7c962d2ea7110e2575c239c502fb.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--OxvTkL1m--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/0zcaz3mscl2fwfu7iwb5.png)

æˆ‘ä»¬å°†ä½¿ç”¨ç›¸åŒçš„[èŠ‚ç‚¹è·å–åŒ…](https://www.npmjs.com/package/node-fetch)ï¼Œåœ¨æœ¬ç³»åˆ— :
çš„[ä¸Šä¸€ç¯‡æ–‡ç« ä¸­å·²ç»æ¢è®¨è¿‡äº†](https://dev.to/isalevine/three-ways-to-retrieve-json-from-the-web-using-node-js-3c88)

```
const url = "https://www.reddit.com/r/popular.json"

// use the node-fetch package to retrieve JSON from the URL above
const fetch = require('node-fetch');

let settings = {
    method: "Get"
};

fetch(url, settings)
.then(res => res.json())
.then((json) => {
    sortJson(json);
}); 
```

åœ¨æˆ‘ä»¬çš„`sortJson()`å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹æ­¥éª¤:

1.  æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªå±æ€§æ¥è¯»å–é€šè¿‡`data.children[i].data[property]`è®¿é—®çš„`data.children`æ•°ç»„ä¸­çš„æ¯ä¸ªå¯¹è±¡ã€‚
2.  æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª`compareFunction`ï¼Œå®ƒä½¿ç”¨æˆ‘ä»¬å®šä¹‰çš„`â€propertyâ€`æ¥æ¯”è¾ƒ`a`å’Œ`b`çš„å±æ€§ã€‚æˆ‘ä»¬å°†åµŒå¥—å€¼åˆ†é…ç»™å®¹æ˜“è®¿é—®çš„å˜é‡ï¼Œ`property1`å’Œ`property2`ã€‚
3.  æ¯”è¾ƒ`property1`å’Œ`property2`ã€‚é€šå¸¸ï¼Œè¿™äº›æ¯”è¾ƒè¿”å›è´Ÿå€¼(-1)ã€é›¶(0)æˆ–æ­£å€¼(1)ã€‚åŸå§‹æ•°ç»„å°†æ ¹æ®å±æ€§é‡æ–°æ’åºã€‚

è¿™æ˜¯æˆ‘ä»¬çš„å‡½æ•°ï¼Œä½¿ç”¨`â€titleâ€`å±æ€§:
æŒ‰ upvotes æ’åº

```
// sort Array json.data.children alphabetically by "title"
function sortJson(json) {

    // you can easily change this to any property, such as â€œupsâ€ or â€œauthor_fullname"
    let property = "title";  

    json.data.children.sort(function(a, b) {

        // create new variables to easily access nested data for sorting
        let propertyA = a.data[property];
        let propertyB = b.data[property];

        if (propertyA < propertyB) {    // checks for a â€œlowerâ€ alphabetical order
            return -1
        };
        if (propertyA > propertyB) {    // checks for a â€œhigherâ€ alphabetical order
            return 1
        };
        return 0    // if titles are equal

    });

// First 3 Objects in Array json.data.children BEFORE sort():
// [0].data.title: What do you NEVER f*** with?
// [1].data.title: [Game Thread] Florida vs. Miami (7:00PM ET)
// [2].data.title: ğŸ‰ 100.000.000 SUBSCRIBERS ğŸ‰

// First 3 Objects in Array json.data.children AFTER sort():
// [0].data.title: 'Like you've been fired from your job': YouTubers have lost thousands of dollars after their channels were mistakenly demonetized for months
// [1].data.title: Disney+ episodes will release on a weekly basis, instead of the all at once â€œbingeâ€ model
// [2].data.title: Employee spits in food for Instagram likes 
```

æ³¨æ„ï¼Œåœ¨æˆ‘ä»¬çš„è¾“å‡ºä¸­ï¼Œåº”ç”¨äº†æ­£å¸¸çš„ JavaScript å­—ç¬¦ä¸²æ’åºè§„åˆ™ï¼Œæ¯”å¦‚æ’‡å· **'** å‡ºç°åœ¨å­—æ¯ **D** ä¹‹å‰ã€‚

# [](#conclusion)ç»“è®º

æ’åºåœ¨ä»»ä½•è¯­è¨€ä¸­éƒ½æ˜¯ä¸€ä¸ªåŸºæœ¬åŠŸèƒ½ï¼Œæ‰€ä»¥åœ¨è¿›è¡ŒæŠ€æœ¯æŒ‘æˆ˜ä¹‹å‰ä¸€å®šè¦ç»ƒä¹ ä¸€ä¸‹ï¼æ­¤å¤–ï¼Œå¯¹äºåƒ JavaScript å’Œ Ruby è¿™æ ·çš„è¯­è¨€ï¼Œä¸€å®šè¦æ·±å…¥ç ”ç©¶æ’åºæ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„ï¼Œå› ä¸ºå¯èƒ½ä¼šè¦æ±‚æ‚¨åˆ›å»ºä¸€äº›å®šåˆ¶çš„æ’åºåŠŸèƒ½ã€‚

å’Œå¾€å¸¸ä¸€æ ·ï¼ŒèŠ±ç‚¹æ—¶é—´ç†Ÿæ‚‰ä¸€ä¸‹ MDN æ–‡æ¡£ä¹Ÿæ— å¦¨ï¼Œä»¥é˜²æ‚¨éœ€è¦å®ƒä»¬ä½œä¸ºå¿«é€Ÿå‚è€ƒ:[MDN docs for array . protype . sort()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)

æ¬¢è¿åœ¨ä¸‹é¢è¯„è®ºä»»ä½•é¢å¤–çš„æ’åºæŠ€å·§æˆ–çªé—¨ï¼

# 19/8/28 æ›´æ–°

[è²å°”Â·çº³ä»€](https://dev.to/philnash)åˆšåˆšå‘å¸ƒäº†ä¸€ç¯‡ä»¤äººéš¾ä»¥ç½®ä¿¡çš„å…³äº JavaScript çš„`Array.prototype.sort()`ä¸­çš„é™·é˜±å’Œä¸ä¸€è‡´çš„æ–‡ç« ã€‚å…·ä½“æ¥è¯´ï¼Œä»–æ¶µç›–äº†ä¸¤ä¸ªé‡è¦çš„ä¸»é¢˜ï¼Œè¿™ä¸¤ä¸ªä¸»é¢˜æ˜¯å¯¹æœ¬ç»¼è¿°çš„è¡¥å……:

*   å¦‚ä½•å¤„ç†ç©ºå€¼(å¼ºåˆ¶ä¸ºå­—ç¬¦ä¸²â€œnullâ€æˆ–æ•´æ•° 0)
*   å¦‚ä½•å¤„ç†æœªå®šä¹‰çš„/å…·æœ‰æœªå®šä¹‰å€¼çš„å¯¹è±¡

**[ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ä»–çš„æ–‡ç« ï¼](https://dev.to/philnash/how-not-to-sort-an-array-in-javascript-l9o)T3ã€‘**