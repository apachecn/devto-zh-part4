# å¦‚ä½•ä¸ºä½ çš„ React åº”ç”¨ç¨‹åºè®¾ç½® ESLint å’Œ beautiful

> åŸæ–‡:[https://dev . to/thomaslombart/how-to-setup-eslint-and-beautiful-for-your-react-apps-1n 42](https://dev.to/thomaslombart/how-to-setup-eslint-and-prettier-for-your-react-apps-1n42)

æ„å»ºé«˜è´¨é‡çš„åº”ç”¨æå…·æŒ‘æˆ˜æ€§ï¼ŒåŸå› æœ‰å¾ˆå¤š:

*   æ‚¨çš„ä»£ç åº“å¢é•¿å¾—è¶Šå¤šï¼Œç»´æŠ¤èµ·æ¥å°±è¶Šå›°éš¾ã€‚
*   å¼€å‘äººå‘˜æœ‰ä¸åŒçš„ç¼–ç æ–¹å¼ï¼Œè¿™å¯èƒ½ä¼šè®©ä½ æ„Ÿåˆ°å›°æƒ‘ï¼Œé™ä½ä½ çš„é€Ÿåº¦ã€‚
*   JavaScript æ˜¯ä¸€ç§åˆçœ‹èµ·æ¥å¾ˆå®¹æ˜“å­¦çš„è¯­è¨€ï¼Œä½†å…¶å®æ²¡é‚£ä¹ˆå®¹æ˜“ã€‚ä½ å¯èƒ½ä¼šé™·å…¥å¸¸è§çš„é™·é˜±ã€‚React(æˆ–ä»»ä½•å…¶ä»–å‰ç«¯åº“/æ¡†æ¶)ä¹Ÿæ˜¯å¦‚æ­¤ã€‚
*   ç­‰ç­‰ã€‚

å¦‚ä»Šï¼Œè®¸å¤šå·¥å…·å…è®¸æˆ‘ä»¬ç¼–å†™é«˜è´¨é‡çš„ä»£ç ï¼Œå¹¶ç¡®ä¿æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸ä¼šå´©æºƒã€‚ä½ å¯èƒ½ä¸€å¼€å§‹ä¼šæƒ³åˆ°åƒ [Jest](https://jestjs.io/) ã€ [React æµ‹è¯•åº“](https://testing-library.com/docs/react-testing-library/intro)æˆ–è€… [Cypress](https://circleci.com/) è¿™æ ·çš„æµ‹è¯•å·¥å…·ï¼Œä½†æ˜¯åœ¨ç¼–å†™æµ‹è¯•ä¹‹å‰ï¼Œä½ å¯ä»¥ç”¨ **a linter** åœ¨ä½ çš„ app ä¸­æ·»åŠ ç¬¬ä¸€å±‚å®‰å…¨ã€‚

## [](#lint-your-code)Lint ä½ çš„ä»£ç 

linter **é™æ€åˆ†æä½ çš„ä»£ç ã€‚**è¿™æ„å‘³ç€å®ƒç­¾å‡ºä»£ç è€Œä¸æ‰§è¡Œå®ƒã€‚ä½†æ˜¯ä½ å¯èƒ½ä¼šæƒ³ï¼Œä¸ºä»€ä¹ˆè¦ç”¨æ£‰ç»’å‘¢ï¼Ÿå› ä¸ºä½ å¯ä»¥ä¸€è¾¹å†™ç³Ÿç³•çš„ä»£ç ä¸€è¾¹å¼€å‘åº”ç”¨ã€‚å› æ­¤ï¼Œæœ‰ä¸€ä¸ªèƒ½ä¸ºä½ å‘ç°å¸¸è§é”™è¯¯å’Œä¸è‰¯å®è·µçš„å·¥å…·æ˜¯å¾ˆé‡è¦çš„ã€‚

linter æœ€æ£’çš„éƒ¨åˆ†æ˜¯åœ¨ä½ çš„ä»£ç ä¸­æ‰¾åˆ°çœ‹èµ·æ¥ä¸åƒå®ƒä»¬çš„æ½œåœ¨é”™è¯¯ã€‚ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ª for å¾ªç¯ï¼Œä¹ä¸€çœ‹ï¼Œå®ƒå°†è®°å½•ä» 0 åˆ° 4 çš„æ•°å­—:

```
for (var i = 0; i < 5; i++) {
  setTimeout(() => console.log(i), 1000);
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½†æ˜¯ï¼Œå®ƒè®°å½•äº†äº”æ¬¡`5`ã€‚å¾ˆå¥‡æ€ªï¼Œå¯¹å§ï¼Ÿè¿™èƒŒåçš„åŸå› æ˜¯`var`å…³é”®å­—æ˜¯**å‡½æ•°èŒƒå›´çš„ã€‚ç”±äºè¿™é‡Œæ²¡æœ‰å‡½æ•°ï¼Œ`i`å°†æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ã€‚å› æ­¤ï¼Œå½“ç¬¬ä¸€ä¸ª`setTimeout`çš„å›è°ƒç»“æŸè¿è¡Œæ—¶ï¼Œå¾ªç¯å·²ç»è¢«æ‰§è¡Œäº†ï¼Œå› æ­¤ï¼Œ`i`çš„æœ€åä¸€ä¸ªå€¼æ˜¯ 5ã€‚**

æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨`let`å…³é”®å­—æ¥ä¿®å¤è¿™ç§è¡Œä¸ºï¼Œè¯¥å…³é”®å­—æ˜¯**å—èŒƒå›´çš„** :

```
for (let i = 0; i < 5; i++) {
  setTimeout(() => console.log(i), 1000);
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¸€æ¬¡ï¼Œæ¯æ¬¡è¿­ä»£éƒ½æœ‰è‡ªå·±çš„`i`å˜é‡ï¼Œå¹¶ä¸”æ²¡æœ‰è¢«å…¨å±€å£°æ˜ã€‚

å¦‚æœæ‚¨åœ¨å¼€å‘äººå‘˜çš„ä¸€ç”Ÿä¸­è‡³å°‘ä¸€æ¬¡éƒ½æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆå‡ ä¹æ— æ³•çŒœæµ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ä½†æ˜¯æ£‰ç»’å¯ä»¥ï¼å®ƒä¼šçœ‹åˆ°ä½ åœ¨ for å¾ªç¯ä¸­ä½¿ç”¨äº†`var`å…³é”®å­—ã€‚åœ¨è¿™ä¸ªå¾ªç¯ä¸­ï¼Œæ‚¨ä½¿ç”¨çš„å‡½æ•°å¼•ç”¨äº†å…¶ä½œç”¨åŸŸä¹‹å¤–çš„å˜é‡ï¼Œè¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªä¸å¥½çš„åšæ³•ã€‚å› æ­¤ï¼Œå®ƒä¼šå‘æ‚¨æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œæ‚¨ä¼šçŸ¥é“è¯¥æ€ä¹ˆåšã€‚

## [](#eslint)ESLint

æ—¢ç„¶ä½ å·²ç»çœ‹åˆ°äº†ä¸ºä»€ä¹ˆæ—æŒºä½ çš„ä»£ç æ˜¯é‡è¦çš„ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ **ESLint** ã€‚è¿™æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæœ€åˆç”±[å°¼å¤æ‹‰æ–¯Â·cÂ·æ‰å¡æ–¯](https://humanwhocodes.com/)åˆ›å»ºï¼Œä¸º JavaScript æä¾›äº†ä¸€ä¸ªå¯æ’æ‹”çš„æ—æŒºå®ç”¨ç¨‹åºã€‚

åŸºæœ¬ä¸Šï¼ŒESLint è§£æä½ çš„ä»£ç ï¼Œåˆ†æå®ƒï¼Œå¹¶è¿è¡Œæ—æŒºè§„åˆ™ã€‚è¿™äº›è§„åˆ™å¯èƒ½ä¼šè§¦å‘è­¦å‘Šæˆ–é”™è¯¯ï¼Œè®©æ‚¨çŸ¥é“æ‚¨çš„ä»£ç æ˜¯å¯¹è¿˜æ˜¯é”™ã€‚

ä¾‹å¦‚ï¼Œä¸€ä¸ªæµè¡Œçš„è§„åˆ™æ˜¯ [no-undef](https://eslint.org/docs/rules/no-undef) :å®ƒç¡®ä¿ä½ çš„ä»£ç æ²¡æœ‰ä»»ä½•æœªå£°æ˜çš„å˜é‡ã€‚ä½¿ç”¨`no-undef`ï¼Œä¸‹é¢çš„ä»£ç å°†æ˜¯ä¸æ­£ç¡®çš„:

```
// âŒ Oops, what is add?
const result = add(1, 2); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç¡®å®å¦‚æ­¤ã€‚ESLint ä¸çŸ¥é“`add`æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Œä¼šå‘ä½ æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ä½ éœ€è¦æ˜¾å¼å£°æ˜`add`æ¥çº æ­£å®ƒ:

```
// âœ… Correct
function add() {}
const result = add(1, 2); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#install-eslint)å®‰è£…æ–¯æ´›æ–‡å°¼äºšè¯­

æ‚¨å¯ä»¥é€šè¿‡ä¸¤ç§ä¸åŒçš„æ–¹å¼å®‰è£… ESLint:

1.  å…¨çƒ:`npm install eslint -g`
2.  ä¸Šä¸€ä¸ªé¡¹ç›®:`npm install eslint --save-dev`

æˆ‘å»ºè®®æ‚¨ç›´æ¥åœ¨é¡¹ç›®ä¸­å®‰è£… ESLintã€‚äº‹å®ä¸Šï¼Œå¦‚æœä½ åœ¨å…¨çƒèŒƒå›´å†…å®‰è£…å®ƒï¼Œä½ å¯èƒ½ä¼šä½¿ ESLint ä¸ä½ çš„å…¶ä»–é¡¹ç›®æˆ–å…¶ä»–å¼€å‘äººå‘˜å‘ç”Ÿå†²çª(å¹¶ä¸”ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µ:â€œå®ƒåœ¨æˆ‘çš„æœºå™¨ä¸Šå·¥ä½œï¼â€é—®é¢˜)ã€‚

**æ³¨æ„**:ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ VSCode çš„ [ESLint æ‰©å±•ã€‚é€šè¿‡ç›´æ¥åœ¨ä»£ç ä¸­çªå‡ºæ˜¾ç¤ºé”™è¯¯å’Œè­¦å‘Šï¼Œå®ƒå°†æå¤§åœ°æ”¹å–„æ‚¨çš„å¼€å‘äººå‘˜ä½“éªŒã€‚](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint)

### [](#configure-eslint)é…ç½® ESLint

ESLint çš„ä¼Ÿå¤§ä¹‹å¤„åœ¨äºå®ƒæ˜¯é«˜åº¦å¯é…ç½®çš„ã€‚ä½ æ‰€è¦åšçš„å°±æ˜¯åœ¨ä½ çš„é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`.eslintrc`æ–‡ä»¶ï¼Œç„¶åä½ å°±å¯ä»¥åœ¨ä»»ä½•ä½ æƒ³è¦çš„æ–‡ä»¶ä¸Šè¿è¡Œ ESLint äº†ã€‚

**æ³¨æ„**:ä¹Ÿå¯ä»¥åœ¨`package.json`æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ª ESLint é…ç½®ã€‚ä¸ºæ­¤ï¼Œåªéœ€å°†é…ç½®å¯¹è±¡æ”¾åœ¨ä¸€ä¸ª`eslintConfig`é”®ä¸­ã€‚

è¿™ä¸ªé…ç½®æ–‡ä»¶é‡‡ç”¨ JSON å¯¹è±¡çš„å½¢å¼ã€‚ä¸ºæ­¤ï¼Œæ‚¨å¯ä»¥æŒ‡å®šè®¸å¤šé€‰é¡¹:

#### [](#parseroptions)è¯­æ³•åˆ†æ

[è§£æé€‰é¡¹](https://eslint.org/docs/user-guide/configuring#specifying-parser-options):å‘Šè¯‰ ESLint ä½ å¸Œæœ›å®ƒå¦‚ä½•è§£æä½ çš„ä»£ç ã€‚å¤§å¤šæ•°æ—¶å€™ï¼Œæ‚¨æŒ‡å®šå“ªä¸ª ECMAScript ç‰ˆæœ¬(ES6ã€ES2018 ç­‰ã€‚)æ‚¨æ­£åœ¨ä½¿ç”¨`ecmaVersion`é”®ã€‚è¿™ä¹Ÿæ˜¯é€šè¿‡å°†`sourceType`è®¾ç½®ä¸º`module`æ¥å‘Šè¯‰ ESLint ä½ æ˜¯å¦ä½¿ç”¨ ECMAScript æ¨¡å—(`import`å’Œ`export`)ã€‚

#### [](#environment)ç¯å¢ƒ

`environment`å®šä¹‰ä½ æ­£åœ¨ä½¿ç”¨çš„é¢„å®šä¹‰å…¨å±€å˜é‡ã€‚ä¾‹å¦‚ï¼ŒJest å…è®¸æ‚¨åœ¨æµ‹è¯•æ–‡ä»¶ä¸­ä½¿ç”¨å…¨å±€å˜é‡ï¼Œå¦‚`describe`ã€`it`æˆ–`test`ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æ²¡æœ‰æ˜ç¡®åœ°å‘Šè¯‰å®ƒï¼ŒESLint ä¸ä¼šçŸ¥é“è¿™äº›å˜é‡æŒ‡çš„æ˜¯ä»€ä¹ˆã€‚ä¸ºæ­¤ï¼Œå°†`jest`è®¾ç½®ä¸º`true`ã€‚

#### [](#globals)globals

æœ‰æ—¶ä½ å¯èƒ½ä¼šè‡ªå·±å£°æ˜å…¨å±€å˜é‡ã€‚ç„¶åï¼Œæ‚¨éœ€è¦å°†å®ƒä»¬æ·»åŠ åˆ°è¿™ä¸ªå¯¹è±¡ä¸­ã€‚

#### [](#plugins)æ’ä»¶

åŸºæœ¬ä¸Šï¼Œæ’ä»¶æ˜¯ä¸€ç»„ä¸åŒä¸€ä¸»é¢˜ç›¸å…³çš„ ESLint è§„åˆ™ã€‚ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œ [eslint-plugin-react](https://github.com/yannickcr/eslint-plugin-react) åŒ…å«äº†å¾ˆå¤šä¸ react ç›¸å…³çš„è§„åˆ™ã€‚

**è­¦å‘Š**:å¦‚æœä½ æƒ³è®©ä½ çš„è§„åˆ™æ­£ç¡®å·¥ä½œï¼Œä½ å¿…é¡»æŠŠæ’ä»¶ä½œä¸ºä¸€ä¸ªå¼€å‘ä¾èµ–é¡¹æ¥å®‰è£…ã€‚

#### [](#rules)è§„åˆ™

è¿™äº›æ˜¯æˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡çš„æ—æŒºè§„åˆ™ã€‚æ¯ä¸ªè§„åˆ™éƒ½æœ‰ä¸€ä¸ªå€¼ï¼Œå¦‚æœè¦ç¦ç”¨è§„åˆ™ï¼Œè¿™ä¸ªå€¼å¯ä»¥æ˜¯`off`ï¼Œå¦‚æœè¦æ˜¾ç¤ºè­¦å‘Šï¼Œå¯ä»¥æ˜¯`warn`ï¼Œå¦‚æœè¦æŠ›å‡ºé”™è¯¯ï¼Œå¯ä»¥æ˜¯`error`ã€‚

#### [](#extends)å»¶ä¼¸

å…è®¸æ‚¨ä»å…¶ä»–é…ç½®æ‰©å±•æ‚¨çš„é…ç½®æ–‡ä»¶ã€‚ä¸€ä¸ªæ¯”è¾ƒæµè¡Œçš„æ˜¯[æä¾›çš„`react-app`Create React App](https://github.com/facebook/create-react-app)ã€‚åŒæ ·åœ¨`extends`ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨æµè¡Œé£æ ¼çš„æŒ‡å—ï¼Œå¦‚ [Airbnb](https://www.npmjs.com/package/eslint-config-airbnb) ã€ [Google](https://github.com/google/eslint-config-google) æˆ– [Standard](https://github.com/standard/eslint-config-standard) çš„æŒ‡å—ã€‚

#### [](#inline-configuration)ç›´åˆ—é…ç½®

æ‚¨å¯ä»¥ä½¿ç”¨ç‰¹æ®Šæ³¨é‡Šä¿®æ”¹ ESLint çš„é…ç½®ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å¯¹ä¸`no-undef`ç›¸å…³çš„é”™è¯¯ä»£ç æ‰§è¡Œä»¥ä¸‹æ“ä½œ:

```
// eslint-disable-next-line
const result = add(1, 2); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æœ‰äº†è¿™ä¸ªï¼ŒESLint å°±ä¸ä¼šæŠ±æ€¨äº†ã€‚

å°½ç®¡å¦‚æ­¤ï¼Œè¿˜æ˜¯è¦å°å¿ƒä½¿ç”¨ï¼æ¯æ¬¡å‘ç°é”™è¯¯å°±ç¦ç”¨ ESLint å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚è¿™é€šå¸¸æ„å‘³ç€æ‚¨çš„ä»£ç æœ‰é—®é¢˜ã€‚

### [](#eslint-cli)ESLint CLI

ESLint æœ‰ä¸€ä¸ª CLI æ¥ Lint æ–‡ä»¶ã€‚ä½ å¯ä»¥åœ¨ ESLint çš„æ–‡æ¡£ä¸Šæ‰¾åˆ°æ‰€æœ‰é€‰é¡¹[ã€‚æ‚¨å°†ä½¿ç”¨æœ€å¤šçš„æ˜¯`--fix`é€‰é¡¹ï¼Œå®ƒå¯ä»¥åœ¨ ESLint å¯ä»¥ä¿®å¤æ–‡ä»¶æ—¶ä¿®å¤æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‘½ä»¤ lints ä»£ç åº“ä¸­å­˜åœ¨çš„æ¯ä¸ªæ–‡ä»¶:](https://eslint.org/docs/user-guide/command-line-interface#options) 

```
eslint . 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶åæ‚¨å¯ä»¥å°†è¿™äº›è„šæœ¬åŒ…å«åœ¨æ‚¨çš„`package.json`æ–‡ä»¶ä¸­:

```
{  "scripts":  {  "lint":  "eslint .",  "lint:fix":  "eslint --fix ."  }  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨å¯ä»¥ä½¿ç”¨`npm run`å‘½ä»¤æ¥ä½¿ç”¨è¿™äº›è„šæœ¬ã€‚ä¸€ä¸ªå°†åªæ˜¯ lint ä»£ç åº“ï¼Œè€Œå¦ä¸€ä¸ªå°† lint å¹¶å°è¯•ä¿®å¤å®ƒèƒ½ä¿®å¤çš„ä»»ä½•ä¸œè¥¿ã€‚

### [](#eslint-configuration-examples)ESLint é…ç½®ç¤ºä¾‹

ä¸‹é¢æ˜¯ä¸€ä¸ª`.eslintrc`æ–‡ä»¶çš„ä¾‹å­:

```
{  "env":  {  "commonjs":  true,  "es6":  true,  "node":  true  },  "extends":  "eslint:recommended",  "parserOptions":  {  "ecmaVersion":  2020  },  "rules":  {  "no-console":  "error"  }  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨è¿™ç§é…ç½®ä¸­ï¼Œæˆ‘ä»¬:

*   æ‰©å±•`eslint:recommended`é…ç½®
*   å‘Šè¯‰ ESLint æˆ‘ä»¬å°†ä½¿ç”¨ CommonJS å…¨å±€å˜é‡(`require`è€Œä¸æ˜¯`import`)
*   æŒ‡å®šæˆ‘ä»¬å°†ä½¿ç”¨ 2020 ç‰ˆæœ¬çš„ ECMAScript è¯­æ³•ç¼–å†™ JavaScript
*   ä¸å…è®¸ä½¿ç”¨`console.log`ã€‚

è¿™é‡Œæ˜¯å¦ä¸€ä¸ª ESLint é…ç½®:

```
{  "env":  {  "browser":  true,  "jest":  true,  "es6":  true  },  "plugins":  ["import"],  "extends":  "eslint:recommended",  "parserOptions":  {  "ecmaVersion":  2020,  "sourceType":  "module"  },  "rules":  {  "no-console":  "warn",  "no-eval":  "error",  "import/first":  "error"  }  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯¥ ESLint é…ç½®æ»¡è¶³ä»¥ä¸‹è¦æ±‚:

*   åŒ…æ‹¬æ¨èçš„ ESLint è§„åˆ™
*   åŒ…æ‹¬`jest`ã€`es6`å’Œ`browser`çš„å…¨å±€å˜é‡
*   ä¸å…è®¸ä½¿ç”¨`eval`
*   å¦‚æœä½¿ç”¨`console.log`ï¼Œè­¦å‘Šç”¨æˆ·
*   åŒ…æ‹¬[å¯¼å…¥](https://github.com/benmosher/eslint-plugin-import)æ’ä»¶å’Œ[æŠ¥å‘Šåœ¨éå¯¼å…¥è¯­å¥](https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/first.md)ä¹‹åçš„ä»»ä½•å¯¼å…¥
*   æŒ‡ç¤ºæ‚¨æ­£åœ¨ä½¿ç”¨ ES2020 è¯­æ³•çš„è§£æå™¨

å¦‚æœä½ å¾ˆå¥½å¥‡ï¼Œä¹Ÿå¯ä»¥å»çœ‹çœ‹ create-react-app çš„[é…ç½®é•¿ä»€ä¹ˆæ ·ï¼Œå¼•æ“ç›–ä¸‹ï¼ŒçœŸçš„å¾ˆæœ‰æ„æ€ï¼](https://github.com/facebook/create-react-app/blob/master/packages/eslint-config-react-app/index.js)

## [](#prettier)æ¼‚äº®äº›

ç°åœ¨ï¼Œæ‚¨çŸ¥é“äº†å¦‚ä½•åœ¨é¡¹ç›®ä¸­å®æ–½ä¸€äº›æŒ‡å¯¼åŸåˆ™ï¼Œå¹¶é¿å… ESLint çš„å¸¸è§ç¼ºé™·ã€‚å¤ªå¥½äº†ï¼ç°åœ¨æ€ä¹ˆåŠï¼Ÿæ ¼å¼åŒ–ä½ çš„ä»£ç ã€‚

å‡è®¾æ‚¨åœ¨ä¸€ä¸ªç”±ä¸‰åå¼€å‘äººå‘˜ç»„æˆçš„å›¢é˜Ÿä¸­ä¸ºåŒä¸€ä¸ªé¡¹ç›®å·¥ä½œ:

*   ä¸€ä¸ªå¼€å‘äººå‘˜æ€»æ˜¯ä½¿ç”¨å•å¼•å·è€Œä¸æ˜¯åŒå¼•å·ã€‚
*   å¦ä¸€ä¸ªä½¿ç”¨å››ä¸ªç©ºæ ¼çš„ç¼©è¿›ï¼Œä½¿å®ƒçš„è¡Œéå¸¸çŸ­ã€‚
*   ç„¶è€Œï¼Œä½ æ›´å–œæ¬¢ç¼©è¿›ä¸¤ä¸ªç©ºæ ¼ï¼Œä½ é€šå¸¸ä½¿ç”¨åŒå¼•å·ã€‚

é‚£ä¹ˆï¼Œå¦‚æœä½ éœ€è¦åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸Šåˆä½œï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿå—¯:

*   ä½ çš„ä»£ç **ä¸€å¡Œç³Šæ¶‚**ã€‚
*   ä½ æµªè´¹æ—¶é—´ç”¨ä½ è‡ªå·±çš„ä»£ç é£æ ¼é‡å†™åˆ«äººçš„ä»£ç 

ä½ èƒ½å¦‚ä½•ä¿®ç†å®ƒï¼Ÿä½¿ç”¨é€šç”¨çš„ä»£ç é£æ ¼ã€‚æ€ä¹ˆåšï¼Ÿæœ‰äº†[æ›´æ¼‚äº®çš„](https://prettier.io/):ä¸€ä¸ªå›ºæ‰§å·±è§çš„ä»£ç æ ¼å¼åŒ–ç¨‹åºã€‚å¾ˆæ˜æ˜¾ï¼Œå®ƒæ”¯æŒ JavaScriptï¼Œä½†ä¹Ÿæ”¯æŒ[è®¸å¤šå…¶ä»–è¯­è¨€](https://prettier.io/docs/en/index.html)ï¼Œå¦‚
JSXã€CSSã€JSON æˆ– Vueã€‚

### [](#install-prettier)å®‰è£…ç¾è§‚

ä½ å¯ä»¥ç”¨ä¸¤ç§ä¸åŒçš„æ–¹æ³•å®‰è£…æ›´æ¼‚äº®çš„:

1.  å…¨çƒ:`npm install prettier -g`
2.  ä¸Šä¸€ä¸ªé¡¹ç›®:`npm install prettier --save-dev`

å°±åƒ ESLint ä¸€æ ·ï¼Œæˆ‘å»ºè®®ä½ åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å®‰è£…æ›´æ¼‚äº®çš„ï¼Œè€Œä¸æ˜¯å…¨å±€å®‰è£…ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šä¸å…¶ä»–é¡¹ç›®å†²çªã€‚

**æ³¨æ„**:ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ VSCode çš„[æ¼‚äº®æ‰©å±•ã€‚é€šè¿‡ä» VSCode æ ¼å¼åŒ–æ‚¨çš„ä»£ç ï¼Œå®ƒå°†æå¤§åœ°æ”¹å–„æ‚¨çš„å¼€å‘äººå‘˜ä½“éªŒã€‚](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint)

### [](#configure-prettier)é…ç½®æ›´æ¼‚äº®

å¦‚ä¸Šæ‰€è¿°ï¼ŒPrettier æ˜¯ä¸€ä¸ªå›ºæ‰§å·±è§çš„ä»£ç æ ¼å¼åŒ–ç¨‹åºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šä»¥æ‚¨å¯èƒ½ä¸å–œæ¬¢çš„æ–¹å¼æ ¼å¼åŒ–æ‚¨çš„ä»£ç ã€‚ä½†æ˜¯å®ƒä»¬å…è®¸ä½ ä¿®æ”¹ä¸€äº›ä¸œè¥¿ã€‚ä½ å¯ä»¥é€šè¿‡ä¸€ä¸ª`.prettierrc`æ–‡ä»¶æˆ–è€…é€šè¿‡ä½ çš„`package.json`æ–‡ä»¶ä¸­çš„ä¸€ä¸ª`prettier`é”®æ¥é…ç½®å®ƒã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›æ‚¨å¯ä»¥é…ç½®çš„è§„åˆ™:

*   `singleQuote` : `true`å¦‚æœè¦ç”¨å•å¼•å·ï¼Œ`false`å¦åˆ™ã€‚
*   `printWidth`:æŒ‡å®šæ‰“å°æœºæ¢è¡Œé•¿åº¦çš„æ•°å­—ã€‚
*   `semi` : `true`å¦‚æœè¦åœ¨æ¯æ¡è¯­å¥çš„æœ«å°¾æ‰“å°åˆ†å·ï¼Œ`false`å¦åˆ™ã€‚

å¦‚æœæ‚¨æƒ³æ‰¾åˆ°æ›´å¤šé€‰é¡¹ï¼Œè¯·ç‚¹å‡»æ­¤å¤„çš„[ã€‚](https://prettier.io/docs/en/options.html)

### [](#prettier-cli)æ¼‚äº®çš„ CLI

æ›´æ¼‚äº®ï¼Œå°±åƒ ESLint ä¸€æ ·ï¼Œæœ‰ä¸€ä¸ª CLI æ¥æ ¼å¼åŒ–æ–‡ä»¶ã€‚ä½ å¯ä»¥åœ¨[beauty çš„æ–‡æ¡£](https://prettier.io/docs/en/cli.html)ä¸Šæ‰¾åˆ°å¾ˆå¤šé€‰é¡¹ã€‚ä½ ä¼šç”¨åˆ°æœ€å¤šçš„æ˜¯`--write`é€‰é¡¹ï¼Œç±»ä¼¼äº ESLint çš„`--fix`é€‰é¡¹ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤æ ¼å¼åŒ–ä½äº`src`æ–‡ä»¶å¤¹ä¸­çš„æ¯ä¸ª`.js`æˆ–`.jsx`æ–‡ä»¶:

```
prettier --write src/*.(js|jsx) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ª CLI é€‰é¡¹åœ¨æ‚¨çš„`package.json`æ–‡ä»¶ä¸­åŒ…å«ä¸€ä¸ªæ ¼å¼åŒ–è„šæœ¬:

```
{  "scripts":  {  "format":  "prettier --write \"**/*.+(js|jsx|json|css|md)\""  }  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œä½ åªéœ€è¦è¿è¡Œ`npm run format`æ¥æ ¼å¼åŒ–ä½ çš„æ•´ä¸ªä»£ç åº“ã€‚

### [](#integrate-prettier-with-eslint)ç”¨ ESLint æ•´åˆæ›´æ¼‚äº®

Prettier å¯ä»¥æ ¼å¼åŒ–æˆ‘ä»¬çš„ä»£ç ï¼Œä½†æ˜¯è°è¯´ ESLint ä¸è¡Œï¼Ÿçš„ç¡®ï¼ŒESLint ä¹Ÿæœ‰æ ¼å¼åŒ–è§„åˆ™ï¼Œæ¯”å¦‚ [max-len](https://eslint.org/docs/rules/max-len) (ç±»ä¼¼äº`printWidth`)æˆ–è€…[å¼•å·](https://eslint.org/docs/rules/quotes)ã€‚å¥½å§ï¼Œå¦‚æœä½ ç”¨æ¼‚äº®ï¼Œä½ å°±ä¸éœ€è¦è¿™äº›è§„åˆ™äº†ã€‚æ›´æ¼‚äº®çš„**å–ä»£äº†** ESLint çš„**æ ¼å¼**è§„åˆ™ï¼Œä½†æ˜¯**æ²¡æœ‰å–ä»£**ä»£ç è´¨é‡**è§„åˆ™ã€‚**

å› æ­¤ï¼Œæ‚¨å¯ä»¥é€šè¿‡å®‰è£…ä»¥ä¸‹å†…å®¹ï¼Œåœ¨ ESLint é…ç½®ä¸­æ›´å¥½åœ°é›†æˆ:

```
npm  install  --save-dev  eslint-config-prettier  eslint-plugin-prettier 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`eslint-config-prettier`ç¦ç”¨ä¸æ›´æ¼‚äº®ç›¸å†²çªçš„è§„åˆ™ã€‚åŒæ—¶`eslint-plugin-prettier`å¢åŠ äº†ä½¿ç”¨æ›´æ¼‚äº®çš„æ ¼å¼å†…å®¹çš„è§„åˆ™ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ¨èçš„é…ç½®æ¥å¯ç”¨æ­¤é…ç½®:

```
{  "extends":  ["plugin:prettier/recommended"]  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#prettier-configuration-example)æ›´æ¼‚äº®çš„é…ç½®ç¤ºä¾‹

ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´æ¼‚äº®çš„é…ç½®(`.prettierrc` ):

```
{  "printWidth":  85,  "arrowParens":  "always",  "semi":  false,  "tabWidth":  2  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åŸºæœ¬ä¸Šï¼Œå®ƒæ„å‘³ç€æ›´æ¼‚äº®:

*   å°†åœ¨è¶…è¿‡ 85 ä¸ªå­—ç¬¦çš„è¡Œä¸Šæ¢è¡Œã€‚
*   å°†å§‹ç»ˆåœ¨ç®­å¤´å‡½æ•°å‘¨å›´ä½¿ç”¨æ‹¬å·ï¼Œå³ä½¿åªæœ‰ä¸€ä¸ªå‚æ•°ã€‚
*   ä¸ä¼šåœ¨æ¯ä¸ªè¯­å¥çš„æœ«å°¾æ‰“å°åˆ†å·ã€‚
*   æ¯ä¸ªç¼©è¿›çº§åˆ«å°†ä½¿ç”¨ä¸¤ä¸ªç©ºæ ¼ã€‚

è®©æˆ‘ä»¬ä»¥ä¸€ä¸ªæ··ä¹±è€Œç®€å•çš„ React ç»„ä»¶ä¸ºä¾‹ï¼Œé€šè¿‡å°è¯•å®ƒçš„[åœ¨çº¿æ¸¸ä¹åœº](https://prettier.io/playground/)æ¥å½¢è±¡åŒ–æ›´æ¼‚äº®çš„æ•ˆæœ:

[![Example of Prettier formatting](../Images/b51521f6223fdd20ec809b8ce829562d.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--0AnE4hCq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7cl4wc2xh8r8mrv557bq.png)

è¿™ç«‹å³æ›´å¯è¯»ï¼Œç›¸ä¿¡æˆ‘ï¼Œä½ ä¼šæµªè´¹ä½ çš„æ—¶é—´æ‰‹å·¥æ ¼å¼åŒ–ã€‚æ‰€ä»¥ä½¿ç”¨æ ¼å¼åŒ–ç¨‹åºæ˜¯å¿…ä¸å¯å°‘çš„ã€‚

## [](#lint-and-format-at-each-commit)æ¯æ¬¡æäº¤æ—¶çš„ Lint å’Œ format

ä½ å¯ä»¥è¿è¡Œä»£ç åº“ï¼Œå¾ˆå¥½ã€‚ä½†æ˜¯ï¼Œè¿™æ˜¯å¦æ„å‘³ç€ç°åœ¨æ‚¨å¯ä»¥éšæ—¶ lint å’Œæ ¼å¼åŒ–æ‚¨çš„ä»£ç å‘¢ï¼Ÿ**ä¸ï¼**

å¦‚æœä½ åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨ Gitâ€”â€”è°ä¸ä½¿ç”¨å‘¢â€”â€”ä½ å¯ä»¥åœ¨æ¯æ¬¡æäº¤æˆ–æ¯æ¬¡æ¨é€ä¹‹å‰åˆ©ç”¨ [Git é’©å­](https://git-scm.com/docs/githooks)æ¥è¿è¡Œ ESLint å’Œ Prettierã€‚ç„¶åï¼Œåœ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¹‹å‰ï¼Œæ‚¨çš„ä»£ç ä¼šä¸æ–­åœ°è¢«è½¬æ¢å’Œæ ¼å¼åŒ–ğŸ˜‰

### [](#husky)æ²™å“‘

æˆ‘ä»¬ä¸æ˜¯åœ¨è°ˆè®ºç‹—ã€‚æˆ‘ä»¬è°ˆè®ºçš„æ˜¯[å·¥å…·](https://github.com/typicode/husky)ï¼Œå®ƒå…è®¸ä½ éå¸¸å®¹æ˜“åœ°è®¾ç½® Git æŒ‚é’©ã€‚å‡è®¾æ‚¨çš„`package.json`æœ‰ä»¥ä¸‹è„šæœ¬ï¼Œæ‚¨æƒ³åœ¨æ¯æ¬¡æäº¤æ—¶è¿è¡Œ`lint`å’Œ`format`:

```
{  "scripts":  {  "start":  "react-scripts start",  "build":  "react-scripts build",  "test":  "react-scripts test",  "eject":  "react-scripts eject",  "lint":  "eslint .",  "format":  "prettier --write \"**/*.+(js|jsx|json|yml|yaml|css|md|vue)\""  }  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶åï¼Œæ‚¨å¯ä»¥é€šè¿‡ä¸¤ä¸ªç®€å•çš„æ­¥éª¤æ·»åŠ  Git æŒ‚é’©:

1.  å°† husky ä½œä¸ºå¼€å‘ä¾èµ–é¡¹å®‰è£…:

```
npm install --save-dev husky 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

1.  åœ¨æ‚¨çš„`package.json`ä¸­æ’å…¥ä»¥ä¸‹å†…å®¹:

```
{
  "husky": {
    "hooks": {
      "pre-commit": "npm run lint && npm run format"
    }
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä»…æ­¤è€Œå·²ã€‚æ¯æ¬¡æäº¤æ—¶ï¼Œå°†è¿è¡Œä¸`pre-commit`ç›¸å…³çš„å‘½ä»¤ã€‚æ‰€ä»¥ä½ çš„ä»£ç åº“å°†è¢«é“¾æ¥å’Œæ ¼å¼åŒ–ã€‚

`pre-commit`æ˜¯ç›®å‰ä½¿ç”¨æœ€å¤šçš„ Git é’©å­ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨[å…¶ä»–é’©å­](https://git-scm.com/docs/githooks)ï¼Œæ¯”å¦‚`pre-push`æˆ–è€…`post-commit`ã€‚

### [](#lintstaged)çš®æ£‰é˜¶æ®µ

è¯·åŸè°…æˆ‘ã€‚è¯¥å·¥å…·å°†æ˜¯æœ€åå®‰è£…çš„ã€‚æ‚¨çš„ä»£ç åº“å¢é•¿å¾—è¶Šå¤šï¼Œæ—æŒºå’Œæ ¼å¼åŒ–å°±ä¼šè¶Šé•¿ã€‚å‡è®¾ä½ æœ‰ 1000 å¤šä¸ªç»„ä»¶ã€‚ä½ ä¸æƒ³ç­‰ç€ ESLint å¤„ç†ä½ æ‰€æœ‰çš„ä»£ç åº“ï¼Œä¸æ˜¯å—ï¼Ÿæœ€åï¼Œå”¯ä¸€éœ€è¦è¢«é“¾æ¥çš„æ–‡ä»¶æ˜¯é‚£äº›åˆšåˆšè¢«ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚ä¸ºæ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ [lint-staged](https://github.com/okonet/lint-staged) ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸ªå·¥å…·å°†ç¡®ä¿ä½ å°† lint æ–‡ä»¶çš„**å°†æäº¤**ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé‚£äº›æ˜¯**ä¸Šæ¼”**ã€‚

è¦å®‰è£…å®ƒï¼Œæ‚¨å¿…é¡»è¿è¡Œä»¥ä¸‹å‘½ä»¤:

```
npm install --save-dev lint-staged 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶åï¼Œæ‚¨å¿…é¡»ä¸ºé…ç½®æ·»åŠ ä¸€ä¸ª`lint-staged`é”®åˆ°æ‚¨çš„`package.json`æˆ–ä¸€ä¸ª`.lintstagedrc`æ–‡ä»¶ã€‚æ ¹æ® [lint-staged docs](https://github.com/okonet/lint-staged) çš„è¯´æ³•ï¼Œé…ç½®åº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­æ¯ä¸ªå€¼æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªè¦è¿è¡Œçš„å‘½ä»¤ï¼Œå®ƒçš„å…³é”®å­—æ˜¯ä¸€ä¸ªç”¨äºè¿™äº›å‘½ä»¤çš„ glob æ¨¡å¼ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­:

```
{  "lint-staged":  {  "*.+(js|jsx)":  "eslint --fix",  "*.+(json|css|md)":  "prettier --write"  }  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¸ªé…ç½®å°†å…è®¸æ‚¨è¿è¡Œ ESLint å¹¶ä¿®å¤`.js`å’Œ`.jsx`æ–‡ä»¶ã€‚åŒæ—¶åœ¨`.json`ã€`.css`ã€`.md`æ–‡ä»¶ä¸Šè¿è¡Œä¼šæ›´æ¼‚äº®ã€‚

## [](#setup-eslint-and-prettier-on-a-react-app-with-a-precommit)é€šè¿‡é¢„æäº¤åœ¨ React åº”ç”¨ç¨‹åºä¸Šè®¾ç½® ESLint å’Œ React

åœ¨è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•åœ¨ç”± [create-react-app](https://github.com/facebook/create-react-app) ç”Ÿæˆçš„åº”ç”¨ç¨‹åºä¸Šè®¾ç½®æ›´æ¼‚äº®ã€æ›´å¥å£®å’Œ lint-stagedã€‚æ›´ç¡®åˆ‡åœ°è¯´ï¼Œæˆ‘ä»¬å°†:

1.  å°†æ¼‚äº®å™¨çš„æ¨èé…ç½®æ·»åŠ åˆ° ESLintï¼Œå¹¶æ·»åŠ ä»¥ä¸‹æ ¼å¼åŒ–è§„åˆ™(å‚è§[æ¼‚äº®å™¨çš„é€‰é¡¹](https://prettier.io/docs/en/options.html)):

*   `printWidth`å¿…é¡»è®¾ç½®ä¸º 90Â°
*   åœ¨å¯¹è±¡æ–‡å­—ä¸­ï¼Œæ‹¬å·ä¹‹é—´ä¸åº”è¯¥æœ‰ç©ºæ ¼ã€‚
*   åœ¨ ES5 ä¸­æœ‰æ•ˆçš„åœ°æ–¹åº”è¯¥æœ‰å°¾éšé€—å·

1.  å°† husky å’Œ lint-staged æ·»åŠ åˆ° lint å¹¶ä»…æ ¼å¼åŒ–æš‚å­˜æ–‡ä»¶:

*   åº”è¯¥æœ‰ä¸€ä¸ª`pre-commit`é’©å­è¿è¡Œ`lint-staged`
*   é javascript æ–‡ä»¶(CSSã€JSONã€HTML ç­‰ã€‚)åº”è¯¥ä½¿ç”¨æ›´æ¼‚äº®çš„æ ¼å¼
*   JS å’Œ JSX æ–‡ä»¶åº”è¯¥è¢« Lint(å¹¶ä¸”ç”±äºæ¼‚äº®çš„ ESLint æ’ä»¶è€Œè¢«é‡æ–°æ ¼å¼åŒ–)

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª React åº”ç”¨ç¨‹åºã€‚è½¬åˆ°æ‚¨é€šå¸¸å·¥ä½œçš„æ–‡ä»¶å¤¹å¹¶è¿è¡Œ:

```
npx create-react-app react-eslint-prettier-app 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

**æ³¨æ„**:å¦‚æœä½ ä¸èƒ½ä½¿ç”¨ [npx](https://blog.npmjs.org/post/162869356040/introducing-npx-an-npm-package-runner) ï¼Œè¿™å¯èƒ½æ„å‘³ç€ä½ æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªè¿‡æ—¶ç‰ˆæœ¬çš„ npm ( < 5.2)ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¦ä¹ˆæ›´æ–° npmï¼Œè¦ä¹ˆä½¿ç”¨`npm install -g`å…¨å±€å®‰è£…`create-react-app`ã€‚

é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•è®¾ç½®å¾—æ›´æ¼‚äº®ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…åœ¨æˆ‘ä»¬çš„`devDependencies`æ¼‚äº®å’Œå®ƒçš„æ’ä»¶:

```
npm install --save-dev prettier eslint-config-prettier eslint-plugin-prettier 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æé†’ä¸€ä¸‹ï¼Œ`eslint-config-prettier`å°†ç¦ç”¨æ‰€æœ‰å¯èƒ½ä¸ Prettier çš„è§„åˆ™å†²çªçš„ ESLint æ ¼å¼è§„åˆ™ã€‚`eslint-plugin-prettier`æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œå®ƒå°†æ·»åŠ æ›´æ¼‚äº®çš„æ ¼å¼è§„åˆ™ã€‚

ç„¶åï¼Œè®©æˆ‘ä»¬å‘Šè¯‰ ESLint æˆ‘ä»¬å°†ä½¿ç”¨æ›´æ¼‚äº®çš„æ¨èé…ç½®:

```
{  "eslintConfig":  {  "extends":  [  "react-app",  "react-app/jest",  "plugin:prettier/recommended"  ]  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸€æ—¦å®Œæˆï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šæ›´æ¼‚äº®çš„é€‰é¡¹ã€‚ä¸ºæ­¤ï¼Œè¦ä¹ˆåˆ›å»ºä¸€ä¸ª`.prettierrc`æ–‡ä»¶ï¼Œè¦ä¹ˆç»™`package.json`æ·»åŠ ä¸€ä¸ª`prettier`é”®ã€‚æˆ‘ä»¬å°†é€‰æ‹©ç¬¬äºŒä¸ªé€‰é¡¹:

```
{  "prettier":  {  "printWidth":  90,  "bracketSpacing":  false,  "trailingComma":  "es5"  }  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬åœ¨æš‚å­˜æ–‡ä»¶ä¸Šæ·»åŠ `pre-commit`æŒ‚é’©ã€‚æˆ‘ä»¬éœ€è¦åœ¨`devDependencies`ä¸­åŒæ—¶å®‰è£…`husky`å’Œ`lint-staged`ï¼Œå› ä¸º:

```
npm install --save-dev husky lint-staged 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶åï¼Œæˆ‘ä»¬å°†é€šè¿‡å‘`package.json` :
æ·»åŠ ä¸€ä¸ª`husky`é”®æ¥æ·»åŠ `pre-commit`é’©å­æœ¬èº«

```
{  "husky":  {  "hooks":  {  "pre-commit":  "lint-staged"  }  }  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœæˆ‘ä»¬è®©å®ƒä¿æŒåŸæ ·ï¼Œå®ƒå°†ä¼šå¤±è´¥ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰ä¸º`lint-staged`æŒ‡å®šé…ç½®ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬é©¬ä¸Šå¼€å§‹:

```
{  "lint-staged":  {  "*.+(js|jsx)":  ["eslint --fix",  "git add"],  "*.+(json|css|md)":  ["prettier --write",  "git add"]  }  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ ESLint æ¥ Lint å’Œæ ¼å¼åŒ– JS å’Œ JSX æ–‡ä»¶ã€‚æˆ‘ä»¬ä¹Ÿç”¨æ¼‚äº®æ¥æ ¼å¼åŒ–`json`ã€`css`å’Œ`markdown`æ–‡ä»¶ã€‚**ç§ï¼ä½ å·²ç»å‡†å¤‡å¥½äº†ã€‚**è¿™é‡Œæ˜¯å®Œæ•´çš„`package.json`æ–‡ä»¶:

```
{  "name":  "react-eslint-prettier-app",  "version":  "0.1.0",  "private":  true,  "dependencies":  {  ...  },  "scripts":  {  ...  },  "eslintConfig":  {  "extends":  [  "react-app",  "react-app/jest",  "plugin:prettier/recommended"  ]  },  "prettier":  {  "printWidth":  90,  "bracketSpacing":  false,  "trailingComma":  "es5"  },  "husky":  {  "hooks":  {  "pre-commit":  "lint-staged"  }  },  "lint-staged":  {  "*.+(js|jsx)":  "eslint --fix",  "*.+(json|css|md)":  "prettier --write"  },  "browserslist":  {  ...  },  "devDependencies":  {  "eslint-config-prettier":  "^7.2.0",  "eslint-plugin-prettier":  "^3.3.1",  "husky":  "^4.3.8",  "lint-staged":  "^10.5.3",  "prettier":  "^2.2.1"  }  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œä½ åº”è¯¥æœ‰ä¸€ä¸ª`pre-commit`é’©å­æ¥é“¾æ¥å’Œæ ¼å¼åŒ–ä½ çš„ä»£ç ã€‚