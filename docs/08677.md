# React-hooks - useStateï¼ŒuseEffectï¼ŒuseRefï¼ŒuseMemo

> åŸæ–‡:[https://dev . to/vinodchauhan 7/react-hooks-use state-use effect-useref-use memo-2dj](https://dev.to/vinodchauhan7/react-hooks-usestate-useeffect-useref-usememo-2dj)

æƒ³è±¡ä¸€ä¸‹:ä½ çš„åº”ç”¨ç¨‹åºä¸­æœ‰ä¸€ä¸ªä¼˜ç§€çš„å‡½æ•°ç»„ä»¶ï¼Œä½†æœ‰ä¸€å¤©ä½ éœ€è¦åœ¨å…¶ä¸­æ·»åŠ ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ç»è¿‡ä¸€æ®µæ—¶é—´çš„æ€è€ƒï¼Œä½ å¯ä»¥å°†å‡½æ•°ç»„ä»¶è½¬æ¢æˆä¸€ä¸ªç±»&è¿™å°±å¯¹äº†ã€‚

æ‚¨å°†è½¬æ¢ç±» Temp æ‰©å±• Reactã€‚ç»„ä»¶ï¼Œç„¶ååœ¨ render body ä¸­å¤åˆ¶æ‚¨çš„è¿”å›å‡½æ•°ã€‚ç„¶è€Œï¼Œæ–°çš„ React-Hooks æœ‰æ›´å¥½çš„æ–¹æ³•æ¥åšè¿™ä»¶äº‹ã€‚æ‚¨ä¹Ÿå¯ä»¥åœ¨åŠŸèƒ½ç»„ä»¶å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ä½¿ç”¨çŠ¶æ€ã€‚

### [](#note-basic-of-react-will-be-required-for-this-article)æ³¨æ„:è¿™ç¯‡æ–‡ç« éœ€è¦ React çš„åŸºç¡€çŸ¥è¯†ã€‚

**é’©å­**ï¼Œè®©ä½ æ’å…¥çŠ¶æ€&ç”Ÿå‘½å‘¨æœŸååº”ç‰¹æ€§åˆ°åŠŸèƒ½ç»„ä»¶ä¸­ã€‚

## [](#usestate-)ä½¿ç”¨çŠ¶æ€:

è¿™ä¸ªé’©å­å°†å…è®¸ä½ åœ¨åŠŸèƒ½ç»„ä»¶ä¸­æ·»åŠ çŠ¶æ€ã€‚åœ¨ç±»ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰â€œthisâ€ã€‚æœ‰äº†â€œthisâ€çš„å¸®åŠ©ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–çŠ¶æ€ï¼Œå¹¶å¯ä»¥åšæˆ‘ä»¬çš„å·¥ä½œã€‚ä½†æ˜¯åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰â€œthis â€,æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½èµ‹å€¼æˆ–è¯»å–â€œthisâ€ã€‚

```
import React, { useState } from 'react';

// Declare a new state variable, which we'll call "count"
   const [count, setCount] = useState(0); 
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† react åŒ…ä¸­çš„â€œuseStateâ€ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå˜é‡â€œcount â€,å®ƒçš„å€¼ä½œä¸ºä¸€ä¸ªå‚æ•°è®¾ç½®åœ¨ useState(0)ä¸­ã€‚æ‰€ä»¥â€œ0â€å°†æ˜¯å®ƒçš„åˆå§‹å€¼ï¼Œå®ƒå¯ä»¥æ˜¯ä»»ä½•ä½ éœ€è¦çš„æ•°æ®ç±»å‹ã€‚

//å¯ä»¥ä¿®æ”¹ä¸ºæˆ‘ä»¬åœ¨ useState ä¸­æåˆ°çš„ setCount æ–¹æ³•ã€‚

```
<button onClick={() => setCount(count + 1)}> 
    {count} // Can be read in this way
  </button> 
```

###### [](#full-example-)å®Œæ•´ç¤ºä¾‹:

```
 import React, { useState } from 'react';
   function Example() {
     const [count, setCount] = useState(0);
     return (<division> <h3>You clicked {count} times</h3>
      <button onClick={() => setCount(count + 1)}>
       Click me
        </button>
     <division/>
   );
  } 
```

å½“æˆ‘ä»¬ç”¨ useState å£°æ˜ä¸€ä¸ªçŠ¶æ€å˜é‡æ—¶ï¼Œå®ƒè¿”å›ä¸€å¯¹â€”â€”ä¸€ä¸ªåŒ…å«ä¸¤é¡¹çš„æ•°ç»„ã€‚ç¬¬ä¸€é¡¹æ˜¯å½“å‰å€¼ï¼Œç¬¬äºŒé¡¹æ˜¯è®©æˆ‘ä»¬æ›´æ–°å®ƒçš„å‡½æ•°ã€‚

## [](#custom-hooks-)è‡ªå®šä¹‰æŒ‚é’©:

React é’©å­æœ€å¥½çš„ä¸€ç‚¹æ˜¯å®ƒä»¬æ˜¯å¸¸è§„çš„ JS å‡½æ•°è°ƒç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬çš„æ‰€æœ‰é€»è¾‘é‡æ„ä¸ºä¸€ä¸ªå°å‡½æ•°ã€‚

// ğŸ¨åˆ›å»ºä¸€ä¸ªåä¸º useCounter çš„è‡ªå®šä¹‰é’©å­ï¼Œå®ƒæ¥å— step å’Œ
// initialCount å¹¶è¿”å›è®¡æ•°å’Œå¢é‡å‡½æ•° function

```
useCounter({stepCount = 1, initialCount = 0}) {
 const [count, setCount] = React.useState(initialCount)
 const increment = () => setCount(count + stepCount)
 return [count, increment]
}
function Counter({step = 1, initialCount = 0}) {
 const [count, increment] = useCounter(step, initialCount)
 return <buton onClick={increment}>{count}</buton> } 
```

## [](#useeffect-)ä½¿ç”¨æ•ˆæœ:

å¯ä»¥ç”¨' useEffect 'ç›´æ¥åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨å¤„ç† 3 ä¸ªç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œå³:componentDidMountï¼ŒcomponentDidUpdateï¼ŒcomponentWillUnmountã€‚

æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è¿è¡Œæˆ‘ä»¬çš„ä»£ç ã€‚æˆ‘ä»¬ä¼ é€’ç»™`React.useEffect`çš„å›è°ƒä¼šåœ¨ç»„ä»¶çš„æ¯æ¬¡æ¸²æŸ“(åŒ…æ‹¬é‡æ–°æ¸²æŸ“)çš„*ä¹‹åè¢«è°ƒç”¨ã€‚* 

```
React.useEffect( () => {
   Console.log("useEffect runs");
}); 
```

ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬*åªæœ‰*æƒ³ç”¨ä¸€ä¸ªæ•ˆæœå›è°ƒå‡½æ•°æ¥è¿è¡Œæˆ‘ä»¬å˜é‡å€¼çš„å˜åŒ–ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯¹æˆ‘ä»¬æ¥è¯´å¹¸è¿çš„æ˜¯ï¼Œ`React.useEffect`å…è®¸æ‚¨ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼Œç§°ä¸ºâ€œä¾èµ–å…³ç³»æ•°ç»„â€,å½“(ä¸”ä»…å½“)è¿™äº›ä¾èµ–å…³ç³»å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šå‘å‡ºä¿¡å·æ¥ååº”æ‚¨çš„æ•ˆæœå›è°ƒå‡½æ•°åº”è¯¥è¢«è°ƒç”¨ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªæ¥é¿å…åšä¸å¿…è¦çš„å·¥ä½œï¼

```
//Custom useState hook 
function useLocalStorageCounter({step = 1, initialCount = 0, key = 'count'}) {
const [count, setCount] = React.useState(() =>
  Number(window.localStorage.getItem('count') || initialCount),
)
React.useEffect(() => {
window.localStorage.setItem('count', count)
}, [count]);

const increment = () => setCount(c => c + step)
return [count, increment]
} 
```

å¦‚æœæˆ‘åœ¨ useEffect ä¸­æä¾›äº†ç©ºçš„ä¾èµ–é¡¹ï¼Œé‚£ä¹ˆè¿™æ„å‘³ç€æˆ‘åªæƒ³åœ¨åˆå§‹åŠ è½½æ—¶åŠ è½½å›è°ƒå‡½æ•°ã€‚æˆ–è€…ï¼Œå¦‚æœæˆ‘ä»å›è°ƒå‡½æ•°ä¸­è¿”å›ä¸€äº›ä¸œè¥¿ï¼Œé‚£ä¹ˆå®ƒå°†åƒ componentWillUnmount lifeCycle æ–¹æ³•ä¸€æ ·å·¥ä½œã€‚

## [](#useref)useRef:

useRef è¿”å›ä¸€ä¸ªå¯å˜çš„ Ref å¯¹è±¡ã€‚å½“å‰å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ é€’çš„å‚æ•°(initialValue)ã€‚è¿”å›çš„å¯¹è±¡å°†åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå­˜æœŸå†…ä¿æŒä¸å˜ã€‚

```
function formMethod() {
  const username= useRef(null);
  const onUsernameClick = () => {
    // `current` points to the mounted text input element
    username.current.focus();
  };
  return (
      <input> ref={username} type="text"</>
      <buton onClick={onUsernameClick}>Focus the input</buton>  
  );
} 
```

è¯·è®°ä½ï¼ŒuseRef ä¸ä¼šåœ¨å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥æ‚¨ã€‚å˜å¼‚äº†ã€‚å½“å‰å±æ€§ä¸ä¼šå¯¼è‡´é‡æ–°å‘ˆç°ã€‚

## [](#usememo)ä½¿ç”¨å¤‡å¿˜å½•:

```
const memoizedValue = useMemo(() => modifyValue(a), [a]); 
```

useMemo åªä¼šåœ¨å…¶ä¸­ä¸€ä¸ªä¾èµ–å…³ç³»å‘ç”Ÿå˜åŒ–æ—¶é‡æ–°è®¡ç®— memoized å€¼ã€‚è¿™ç§ä¼˜åŒ–æœ‰åŠ©äºé¿å…æ¯æ¬¡æ¸²æŸ“æ—¶è¿›è¡Œæ˜‚è´µçš„è®¡ç®—ã€‚
è®°ä½ä¼ é€’ç»™ useMemo çš„å‡½æ•°åœ¨æ¸²æŸ“æ—¶è¿è¡Œã€‚ä¸è¦åšä»»ä½•æ¸²æŸ“æ—¶é€šå¸¸ä¸ä¼šåšçš„äº‹æƒ…ã€‚å¦‚æœæ²¡æœ‰æä¾›æ•°ç»„ï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè®¡ç®—ä¸€ä¸ªæ–°å€¼ã€‚

ä¸ºäº†è®©ä½ çš„æ‰‹è„åœ¨ä»£ç ä¸­ï¼Œæˆ‘åœ¨ CodeSandbox çš„ react hooks ä¸­åšäº†ä¸€ä¸ªä¾‹å­ã€‚
[https://codesandbox.io/s/tictactoe-react-hooks-fjth8](https://codesandbox.io/s/tictactoe-react-hooks-fjth8)

[![](../Images/acb2017d59b6b54dfd44fbf69e62fee7.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ESgcuDnT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/v7iro4ikv2e8dc35apv6.png)

[https://github.com/vinodchauhan7/react-hooks-ticTacToe](https://github.com/vinodchauhan7/react-hooks-ticTacToe)

å¦‚æœä½ å–œæ¬¢è¿™ä¸ªï¼Œè¯·æä¾›ä½ çš„å»ºè®¾æ€§æ„è§å’Œåˆ†äº«ã€‚