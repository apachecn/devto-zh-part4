# ä» JavaScript åˆ° Swiftâ€”â€”åœ¨ SwiftUI ä¸­æ„å»ºåˆ—è¡¨

> åŸæ–‡:[https://dev . to/ghost/from-JavaScript-to-swift-building-a-list-in-swift ui-34bj](https://dev.to/ghost/from-javascript-to-swift-building-a-list-in-swiftui-34bj)

æ‰€ä»¥ä½ æƒ³ç”¨è‹¹æœæ–°çš„å£°æ˜å¼ UI æ¡†æ¶å»ºç«‹ä¸€ä¸ªåˆ—è¡¨ã€‚ä¹Ÿè®¸ä½ åƒæˆ‘ä¸€æ ·ä¹ æƒ¯äºä¸º web æ„å»ºï¼Œä½ ä¼šæƒ³ï¼Œâ€œè®©æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œå¹¶è¿­ä»£å®ƒæ¥åˆ¶ä½œä¸€ä¸ªåˆ—è¡¨ã€‚â€å¾ˆç®€å•ï¼Œæˆ–è€…ä½ æ˜¯è¿™ä¹ˆè®¤ä¸ºçš„ã€‚åœ¨ JavaScript ä¸­ï¼Œæ‚¨å¯èƒ½ä¼šè¿™æ ·åš:

```
// Mock data structure
const racers = [
    {
        id: 1,
        name: 'Valentino Rossi',
        team: 'Yamaha'
    },
    {
        id: 2,
        name: 'Marc MÃ¡rquez',
        team: 'Repsol Honda'
    },
];

// In React
racers.map(racer => (
    <p key={racer.id}>{racer.name} rides with {racer.team}</p> ));

// In ES6
const container = document.querySelector('.container');
racers.map(racer => {
    const item = document.createElement('p');
    item.setAttribute('id', racer.id);
    item.textContent = `${racer.name} rides with ${racer.team}`;
    container.appendChild(item);
}); 
```

æˆ‘æƒ³æˆ‘å¯ä»¥ç”¨ SwiftUI åšåŒæ ·çš„äº‹æƒ…ã€‚å®šä¹‰ä¸€ä¸ªå­—å…¸æ•°ç»„ï¼Œå¹¶ä½¿ç”¨ç±»ä¼¼ SwiftUI çš„`ForEach`æˆ–`List`è§†å›¾å¯¹å®ƒä»¬è¿›è¡Œè¿­ä»£ã€‚åœ¨ UIKit ä¸­ï¼Œ`List`å¤§çº¦ç­‰äº`UITableView`ï¼Œä»æˆ‘å’Œ`UITableView`çš„ç»éªŒæ¥çœ‹ï¼Œæ¡Œå­å¸Œæœ›ä¸€åˆ‡éƒ½ä»¥ä¸€ç§éå¸¸ç‰¹åˆ«çš„æ–¹å¼è®¾ç½®ã€‚æ‰€ä»¥å°å¿ƒç¿¼ç¿¼åœ°æ¥è¿‘,`List`ä¼šè¦æ±‚æˆ‘ä»¬åšä¸€äº›é¢å¤–çš„äº‹æƒ…å—ï¼Œæˆ–è€…æˆ‘ä»¬åªæ˜¯æ‰”ä¸€äº›æ•°æ®è¿›å»ï¼Œä¸–ç•Œå°±ä¼šå˜å¾—å¾ˆå¥½ï¼ŸåŸæ¥ï¼Œè¿˜æœ‰æ›´å¤šè®¾ç½®ã€‚è¿™ä¸ªä¸è¡Œ:

```
import SwiftUI

struct RacerList : View {

      // Mock data structure
    let racers: [[String:String]] = [
        [
            "name": "Valentino Rossi",
            "team": "Yamaha"
        ],
        [
            "name": "Marc MÃ¡rquez",
            "team": "Repsol Honda"
        ]
    ]

    var body: some View {
        List(racers) { racer in
            if let name: String = racer.name, team: String = racer.team {
                Text("\(name) rides with \(team)")
            }
        }
    }
} 
```

ç¼–è¯‘å™¨æŠ›å‡ºè¿™ä¸ªé”™è¯¯:`Unable to infer complex closure return type; add explicit type to disambiguate`ï¼Œæœ¬è´¨ä¸Šå½’ç»“ä¸º:â€œå˜¿ï¼Œæˆ‘ä¸æ˜ç™½ä½ è¿”å›çš„æ˜¯ä»€ä¹ˆç±»å‹ã€‚â€ä½†æ˜¯å½“æˆ‘ä»¬æ‰“å¼€å®ƒä»¬çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æ˜¯è¯´è¿‡`name`å’Œ`team`é€‰é¡¹æ˜¯å­—ç¬¦ä¸²å—ï¼Ÿ

äº‹å®è¯æ˜ï¼Œé—®é¢˜ä¸åœ¨äº SwiftUI è§†å›¾ä»£ç ï¼Œè€Œåœ¨äºæ•°æ®ç»“æ„ã€‚ **Swift æ˜¯ä¸€ç§å¼ºç±»å‹ã€é¢å‘åè®®çš„è¯­è¨€**(ä¸ºäº†æˆ‘è‡ªå·±çš„ç¼˜æ•…è€ŒåŠ ç²—)ã€‚ä¼ é€’ç»™`List`çš„æ•°æ®éœ€è¦ç¬¦åˆ`Identifiable`åè®®ï¼Œè¿™æ ·å®ƒå°±çŸ¥é“å¦‚ä½•å¼•ç”¨æ¯ä¸€é¡¹ã€‚

> æˆ‘å–œæ¬¢è¿™æ ·è€ƒè™‘åè®®:åè®®å¯¹äºç±»ç»§æ‰¿å°±åƒ GraphQL å¯¹äº REST ä¸€æ ·ã€‚åœ¨å¤§å¤šæ•°é¢å‘å¯¹è±¡è¯­è¨€çš„å¸¸è§„ç±»ç»§æ‰¿ä¸­ï¼Œå¦‚æœä½ æƒ³æ‰©å±•ä¸€ä¸ªç±»ï¼Œä½ å¯ä»¥åœ¨ä½ çš„æ–°å­ç±»ä¸­ä»é‚£ä¸ªç±»è·å¾—æ‰€æœ‰çš„æ–¹æ³•ã€å±æ€§å’Œå…¶ä»–ä¸œè¥¿ã€‚ä½¿ç”¨åè®®ï¼Œæ‚¨å¯ä»¥å°†è¿™äº›åŒ…è¢±åˆ†æˆä¸åŒçš„â€œç‰‡æ®µâ€,æ‚¨å¯ä»¥å‘Šè¯‰æ‚¨çš„æ–°ç±»éµå¾ªè¿™äº›â€œç‰‡æ®µâ€ã€‚ä¸ GraphQL éå¸¸ç›¸ä¼¼ï¼Œåœ¨ graph QL ä¸­ï¼Œæ‚¨ç¡®åˆ‡åœ°å‘Šè¯‰åç«¯æ‚¨æƒ³è¦ä»€ä¹ˆå’Œä¸æƒ³è¦ä»€ä¹ˆï¼Œåè®®å…è®¸æ‚¨ç¡®åˆ‡åœ°å®šä¹‰æ‚¨å¸Œæœ›æ‚¨çš„å­ç±»(æˆ–ç»“æ„)å¾—åˆ°ä»€ä¹ˆã€‚

æˆ‘ä»¬å¯ä»¥è¿™æ ·å®ç°`Identifiable`åè®®:

```
import SwiftUI

// Mock data structure
struct Racer: Identifiable {
    var id: Int
    var name: String
    var team: String
}

struct RacerList : View {
    var body: some View {
        let a = Racer(id: 1, name: "Valentino Rossi", team: "Yamaha")
        let b = Racer(id: 2, name: "Marc MÃ¡rquez", team: "Repsol Honda")
        let racers = [a, b]

        return List(racers) { racer in
            Text("\(racer.name) rides with \(racer.team)")
        }
    }
} 
```

è€¶ï¼ŒæˆåŠŸäº†ï¼ğŸ™Œç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬è¦å¼€å§‹å¯¹æ­¤è¿›è¡Œä¸€ç‚¹é‡æ„ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•°æ®ç»“æ„ï¼Œæˆ–è€…åœ¨ iOS ä¸–ç•Œä¸­ä¼—æ‰€å‘¨çŸ¥çš„*æ¨¡å‹*ï¼Œä¸æˆ‘ä»¬æ‰€æœ‰çš„æ¨¡å‹æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„ç›®å½•ä¸­ã€‚ç„¶åï¼Œåœ¨æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå¤§å†™çš„ R `Racer`ï¼Œç¼–è¯‘å™¨çŸ¥é“æˆ‘ä»¬åœ¨å¼•ç”¨æˆ‘ä»¬çš„æ¨¡å‹ï¼Œå› æ­¤æœ‰å…³äºå®ƒå¦‚ä½•ç¬¦åˆ`Identifiable`å’Œæ¯ä¸ªå±æ€§çš„ç±»å‹çš„è¯¦ç»†ä¿¡æ¯ã€‚

æå®šäº†ã€‚è¿™æ˜¯å…³äºå¦‚ä½•åœ¨æ¥è‡ª JavaScript é¢†åŸŸçš„ Swift ä¸­åšäº‹çš„ä¸€ç³»åˆ—æ¾æ•£ç›¸å…³çš„æ–‡ç« ä¸­çš„åˆä¸€æ¬¡å¾€è¿”ã€‚æ„Ÿè°¢é˜…è¯»ï¼

æ›´å¤šèµ„æº:

*   [è‹¹æœ SwiftUI åˆ—è¡¨æ•™ç¨‹](https://developer.apple.com/tutorials/swiftui/building-lists-and-navigation)
*   [åè®®â€”Swift ç¼–ç¨‹è¯­è¨€(Swift 5.1)](https://docs.swift.org/swift-book/LanguageGuide/Protocols.html)
*   [å¯è¯†åˆ«- SwiftUI |è‹¹æœå¼€å‘è€…æ–‡æ¡£](https://developer.apple.com/documentation/swiftui/identifiable)
*   [Swift ä¸­ä¸åŒé£æ ¼çš„è§†å›¾æ¨¡å‹â€”Sundell Swift](https://www.swiftbysundell.com/posts/different-flavors-of-view-models-in-swift)