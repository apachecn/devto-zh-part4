# å¿«æ·æ–¹å¼çš„å¿«æ·æ–¹å¼

> åŸæ–‡:[https://dev.to/zmdominguez/shortcuts-to-shortcuts-572d](https://dev.to/zmdominguez/shortcuts-to-shortcuts-572d)

è·ç¦»æˆ‘ä¸Šæ¬¡æŸ¥çœ‹å®ç°[åº”ç”¨ç¨‹åºå¿«æ·æ–¹å¼](https://developer.android.com/guide/topics/ui/shortcuts)å·²ç»è¿‡å»å‡ å¹´äº†ï¼Œæœ€è¿‘æˆ‘åˆåœ¨æŸ¥çœ‹å®ƒä»¬ã€‚æˆ‘è®°å¾—ç¬¬ä¸€æ¬¡ä¸º Android N å‘å¸ƒæ—¶å°±å®ç°äº†å®ƒä»¬ï¼Œä½†æ˜¯å’Œç”Ÿæ´»ä¸€æ ·ï¼Œäº‹æƒ…å‘ç”Ÿäº†ä¸€äº›å˜åŒ–ã€‚

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³åˆ†äº«ä¸€äº›æˆ‘åœ¨å®ç°é™æ€åº”ç”¨å¿«æ·æ–¹å¼æ—¶å­¦åˆ°çš„æœ‰è¶£çš„ä¸œè¥¿ã€‚(æ³¨:æœ¬å¸–å‡è®¾è¯»è€…ç†Ÿæ‚‰[å®ç° app å¿«æ·æ–¹å¼](https://developer.android.com/guide/topics/ui/shortcuts/creating-shortcuts)çš„åŸºæœ¬è¦æ±‚)ã€‚ä¸€å¦‚æ—¢å¾€ï¼Œ[è¿™ç¯‡æ–‡ç« çš„æ‰€æœ‰ä»£ç ](https://github.com/zmdominguez/sdk_sandbox/tree/feature/app-shortcuts)éƒ½åœ¨æˆ‘çš„æ²™ç›’åº”ç”¨ä¸­ã€‚

### [](#android-studio-support-is-limited)Android Studio æ”¯æŒâ€¦æœ‰é™ã€‚

â˜ï¸:åœ¨è¿™ä¸ªç»ƒä¹ ä¸­ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ Android Studio 3.5 Beta 4ã€‚

æˆ‘è¯´çš„æœ‰é™æ˜¯æŒ‡èµ„æºå¼•ç”¨æ ¹æœ¬ä¸ä¼šè‡ªåŠ¨å®Œæˆã€‚è¿™å˜å¾—å¾ˆæ£˜æ‰‹ï¼Œå› ä¸ºä¸€äº›å¿…éœ€çš„å±æ€§*å¯ä»¥*ä½¿ç”¨èµ„æºå¼•ç”¨ã€‚ä¸‹è¡¨æ˜¾ç¤ºäº†è¿™äº›æ˜¯ä»€ä¹ˆ:

| å…è®¸ | ä¸å…è®¸ |
| --- | --- |
| `shortcutShortLabel` | `shortcutId` |
| `shortcutLongLabel` | `Intent`å±æ€§(`targetPackage`ï¼Œ`targetClass`) |
| `icon` |  |

âš ï¸:æˆ‘çš„éç§‘å­¦æµ‹è¯•è¡¨æ˜ï¼Œåœ¨ pixel launchers ä¸Šï¼Œ`shortcutShortLabel`è¢«ä½¿ç”¨ï¼Œé™¤é`shortcutLongLabel`æ˜¯ 17 ä¸ªå­—ç¬¦æˆ–æ›´å°‘ã€‚

### APIs 25 å’Œ 26 ä¹‹é—´çš„è®¾è®¡æŒ‡å—æœ‰æ‰€å˜åŒ–

Android O å¼•å…¥äº†[è‡ªé€‚åº”å›¾æ ‡](https://developer.android.com/guide/practices/ui_guidelines/icon_design_adaptive.html)ï¼Œå¦‚æœæˆ‘ä»¬è€ƒè™‘åˆ°ç”¨æˆ·å¯ä»¥å°†å¿«æ·æ–¹å¼é’‰åœ¨ä»–ä»¬çš„ä¸»å±å¹•ä¸Šï¼Œå¦‚æœæˆ‘ä»¬æƒ³æä¾›æœ€å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬éœ€è¦æ”¯æŒè¿™ç§æ ¼å¼ã€‚

Nick Butcher åœ¨ä»–å…³äºå®ç°è‡ªé€‚åº”å›¾æ ‡çš„[å¸–å­ä¸­è¯¦ç»†è°ˆåˆ°äº†è¿™ä¸€ç‚¹ã€‚](https://medium.com/androiddevelopers/implementing-adaptive-icons-1e4d1795470e)

âš ï¸ä½¿ç”¨äº†ä¸€ä¸ª`VectorDrawable`ä½œä¸ºå›¾æ ‡å‰æ™¯ï¼Œæ­£å¦‚å°¼å…‹æ‰€å±•ç¤ºçš„ï¼Œå®ƒä¼¼ä¹ä¸å–œæ¬¢ä½¿ç”¨ä¸»é¢˜å‚è€ƒä½œä¸ºå¡«å……é¢œè‰²ã€‚ä½¿ç”¨èµ„æºå¼•ç”¨æ˜¯å¯ä»¥çš„ã€‚ [![](../Images/effbae2ab8a90277ac0a7c030af6852c.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--BghyG093--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/GvfiOMX.png)

é˜…è¯»[è¿™ç¯‡æ–‡ç« ](https://medium.com/google-design/designing-adaptive-icons-515af294c783)äº†è§£æ›´å¤šå…³äºè®¾è®¡é€‚åº”æ€§å›¾æ ‡çš„ä¿¡æ¯ï¼Œé˜…è¯»[è¿™ç¯‡æ–‡ç« ](https://commondatastorage.googleapis.com/androiddevelopers/shareables/design/app-shortcuts-design-guidelines.pdf)è®¾è®¡åº”ç”¨ç¨‹åºå¿«æ·å›¾æ ‡ã€‚

### [](#mo-package-names-mo-files)Mo 'åŒ…åï¼ŒMo 'æ–‡ä»¶

å¯¹äºæˆ‘ä»¬æƒ³è¦æ”¯æŒçš„æ¯ä¸€ä¸ª app å¿«æ·æ–¹å¼ï¼Œéƒ½éœ€è¦æœ‰ä¸€ä¸ª`Intent`ä¸ä¹‹å…³è”ï¼›æ¯ä¸ª`Intent`éœ€è¦ä¸€ä¸ª`targetPackage`å’Œä¸€ä¸ª`targetClass`ã€‚ä¹Ÿå°±æ˜¯:

```
<intent
    android:action="android.intent.action.VIEW"
    android:targetPackage="com.zdominguez.sdksandbox"
    android:targetClass="com.zdominguez.sdksandbox.MainActivity" /> 
```

å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºå¯¹æ¯ç§æ„å»ºç±»å‹æœ‰ä¸åŒçš„åŒ…åï¼Œè¿™å¯èƒ½ä¼šå‡ºç°é—®é¢˜ã€‚æœ‰äºº[å†™äº†ä¸€ä¸ªå‡½æ•°](https://stackoverflow.com/a/44840413/395576)æ¥æ”¯æŒå˜é‡ï¼Œä½†ä¸å¹¸çš„æ˜¯å®ƒä¸èƒ½åœ¨æ›´ç°ä»£ç‰ˆæœ¬çš„ Gradle æ’ä»¶ä¸Šå·¥ä½œã€‚

è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦å¤šä¸ª`shortcuts.xml`æ–‡ä»¶æ¥æ”¯æŒæˆ‘ä»¬æƒ³è¦æ”¯æŒçš„æ‰€æœ‰æ„å»ºå˜ä½“:

[![](../Images/5f3c2a5f8741c449d923330ff3ce0474.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--cDbXQ2lW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/g3M5YgK.png)

### ä¼ é€’é¢å¤–æ„å›¾æ˜¯å¯èƒ½çš„ï¼Œä½†æœ‰æ—¶è¹¦åºŠæ´»åŠ¨ä¼šæ´¾ä¸Šç”¨åœº

å¦‚æœæˆ‘ä»¬éœ€è¦ä¼ é€’ä¸€äº›é¢å¤–çš„ä¸œè¥¿ç»™æˆ‘ä»¬çš„ç›®æ ‡`Activity`ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ XML æ–‡ä»¶:
æ¥å®Œæˆ

```
<intent ...>
    <extra android:name="target_tab" android:value="settings" />
</intent> 
```

åœ¨åº”ç”¨ç¨‹åºå¿«æ·æ–¹å¼çš„æ–‡æ¡£ä¸­ï¼Œæœ‰ä¸€æ¡å¾ˆé‡è¦çš„å£°æ˜è¢«åŸ‹æ²¡äº†:

> å½“åº”ç”¨ç¨‹åºå·²ç»åœ¨è¿è¡Œæ—¶ï¼Œå½“é™æ€å¿«æ·æ–¹å¼å¯åŠ¨æ—¶ï¼Œåº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰ç°æœ‰æ´»åŠ¨éƒ½ä¼šè¢«é”€æ¯ã€‚

è¿™æ—¶ trampoline `Activity`å°±å˜å¾—æœ‰ç”¨äº†ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å‡†å¤‡æˆ‘ä»¬çš„åå°å †æ ˆï¼Œç”šè‡³å¯ä»¥å¤„ç†æ¥æ”¶æ´»åŠ¨éœ€è¦çš„ä¸€äº›éœ€æ±‚(ä¾‹å¦‚ï¼Œä»æ•°æ®åº“ä¸­è¯»å–ä¸€ä¸ªå€¼)ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œé˜…è¯»æ›´å¤šå…³äºè¹¦åºŠæ´»åŠ¨çš„ä¿¡æ¯ã€‚â°

### [](#handling-up-navigation)å¤„ç†å‘ä¸Šå¯¼èˆª

ç±»ä¼¼äºæˆ‘ä»¬åº”è¯¥å¦‚ä½•[å¤„ç†å¯¼èˆª](https://developer.android.com/training/notify-user/navigation#define_your_apps_activity_hierarchy)å½“ä»ä¸€ä¸ªé€šçŸ¥å¼€å§‹ä¸€ä¸ª`Activity`æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å½“ç”¨æˆ·å¯¼èˆªè¿œç¦»æˆ‘ä»¬çš„ç›®æ ‡`Activity`æ—¶åº”ç”¨ç¨‹åºå°†å¦‚ä½•è¡¨ç°ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå¿«æ·æ–¹å¼æä¾›å¤šä¸ª`Intent`,åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå°†æ˜¯ç”¨æˆ·æœ€åˆçœ‹åˆ°çš„ã€‚

```
<shortcut ...>
    <intent
        android:action="android.intent.action.VIEW"
        android:targetPackage="com.zdominguez.sdksandbox"
        android:targetClass="com.zdominguez.sdksandbox.MainActivity">
        <extra android:name="target_tab" android:value="settings" />
    </intent>
    <intent
        android:action="android.intent.action.VIEW"
        android:targetPackage="com.zdominguez.sdksandbox"
        android:targetClass="com.zdominguez.sdksandbox.DemoActivity">
    </intent>
</shortcut> 
```

æˆ‘èŠ±äº†æ¯”æˆ‘æƒ³è±¡ä¸­æ›´é•¿çš„æ—¶é—´æ¥ç†è§£è¿™ä¸€åˆ‡ğŸ˜©ï¼Œæ‰€ä»¥æˆ‘å†™ä¸‹æ¥ç»™ä»¥åçš„æˆ‘åšä¸ªå‚è€ƒã€‚

ğŸ‘¯è¯·åŠ¡å¿…é˜…è¯»å…¶ä½™çš„[æœ€ä½³å®è·µ](https://developer.android.com/guide/topics/ui/shortcuts/best-practices)æ–‡æ¡£ï¼Œä»¥äº†è§£æ›´å¤šä¿¡æ¯ã€‚