# ä¸æ˜¯å¦ä¸€ä¸ªå¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åº:ç¬¬ 4 éƒ¨åˆ†

> åŸæ–‡ï¼š<https://dev.to/westbrook/not-another-to-do-app-part-4-58cd>

#### ç”¨ Open Web ç»„ä»¶æ¨èå¼„è„ä½ çš„æ‰‹å’Œè„š...ç®—æ˜¯å§ã€‚

> *è¿™æ˜¯ 2019 å¹´ 2 æœˆ 26 æ—¥æ¥è‡ª [Medium](https://medium.com/@westbrook/not-another-to-do-app-169c14bb7ef9) çš„ä¸€ç¯‡æ–‡ç« çš„äº¤å‰å¸–å­ï¼Œåˆ©ç”¨äº†æˆ‘æœ€è¿‘å†³å®šåœ¨æˆ‘çš„å†™ä½œä¸­ä½¿ç”¨è¯­æ³•çš„ä¼˜åŠ¿(å› æ­¤ï¼Œåœ¨è¿™é‡Œå’Œé‚£é‡Œåšäº†ä¸€äº›å°ç¼–è¾‘)ï¼Œå¦‚æœä½ åœ¨é‚£é‡Œçœ‹åˆ°å®ƒï¼Œæ„Ÿè°¢å†æ¬¡æŸ¥çœ‹ğŸ™‡ğŸ½â€â™‚ï¸:å¦‚æœè¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡é˜…è¯»ï¼Œæ¬¢è¿ï¼*

*æ¬¢è¿æ¥åˆ°â€œä¸è¦å†åšä¸€ä¸ªåº”ç”¨ç¨‹åºâ€ï¼Œè¿™æ˜¯ä¸€ç¯‡å†—é•¿çš„ç»¼è¿°ï¼Œè®²è¿°äº†æ¯ä¸ªå¼€å‘äººå‘˜åœ¨æŸä¸ªæ—¶å€™éƒ½ä¼šç¼–å†™çš„æœ€å°çš„åº”ç”¨ç¨‹åºä¹‹ä¸€ã€‚å¦‚æœä½ æ˜¯æ¥å­¦ä¹ ç¼–å†™åº”ç”¨ç¨‹åºçš„ç‰¹å®šæŠ€æœ¯çš„ï¼Œæˆ–è€…æ˜¯ä»ä»¥å‰çš„å®‰è£…ä¸­èµ°å‡ºæ¥çš„ï¼Œé‚£ä¹ˆä½ å¯èƒ½æ¥å¯¹åœ°æ–¹äº†ï¼Œåº”è¯¥ç»§ç»­è¯»ä¸‹å»ï¼å¦‚æœæ²¡æœ‰ï¼Œä½ å¯èƒ½æƒ³[ä»å¤´å¼€å§‹](https://dev.to/westbrook/not-another-to-do-app-2kj9)ï¼Œè¿™æ ·ä½ ä¹Ÿå¯ä»¥çŸ¥é“[æˆ‘ä»¬æ‰€æœ‰è§’è‰²çš„èƒŒæ™¯æ•…äº‹...](https://github.com/Westbrook/to-do-app)*

å¦‚æœä½ å·²ç»åšåˆ°äº†è¿™ä¸€æ­¥ï¼Œä¸ºä»€ä¹ˆç°åœ¨å°±æ”¾å¼ƒå‘¢ï¼Ÿ

* * *

# é‡ä¸¤æ¬¡ï¼Œçš®æ£‰ä¸€æ¬¡

<figure>

[![Measure Twice, Lint Once](img/1f8b558d14b21d2fd512334fed21bd79.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--08-DAb5n--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/2i1f74tq26nescs51siu.jpeg)

<figcaption>Photo by [Fleur Treurniet](https://unsplash.com/@yer_a_wizard) on [Unsplash](https://unsplash.com/)</figcaption>

</figure>

è¯»è€…å¯¹å‰ä¸€èŠ‚ä¸­å…±äº«çš„ä¸€æ®µæœ‰é—®é¢˜çš„ä»£ç åšå‡ºäº†å¦‚æ­¤æ¿€çƒˆçš„å›åº”ï¼Œè¦é˜»æ­¢ä»–ä»¬çš„ä¸€ä¸¤æ¡è¯„è®ºå¯èƒ½å·²ç»å¤ªæ™šäº†ã€‚åœ¨å‡†ç¡®åœ°å‘æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºäº¤ä»˜å†…å®¹ä»¥é€šè¿‡â€œå®ƒä¸ºæ‚¨åˆ—è¡¨ä¸­çš„æ¯ä¸ªå¾…åŠäº‹é¡¹å°†å¾…åŠå…ƒç´ å‘ˆç°åˆ° DOM ä¸­â€çš„æµ‹è¯•æ—¶ï¼Œä¸‹é¢çš„ä»£ç ç¤ºä¾‹å¼•å‘äº† open-wc å›¢é˜Ÿä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæä¾›çš„å¦ä¸€ä¸ªç‰¹æ€§çš„æ„¤æ€’:

```
render() {
    return html` ${this.todos.map(todo => html`
            <to-do>${todo}</to-do>
        `)} `;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## *æ—æŒºï¼*

<figure>

[![ raw `.map` endraw  is disallowed in templates...](img/295bb9b0f44daef5754fb72013cf1ac3.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--whzYhFKH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/jtffdb04o4mpvmwxjku1.png)

<figcaption>`.map` is disallowed in templates...</figcaption>

</figure>

æ­£å¦‚ä½ åœ¨ä¸Šé¢çš„ç»ˆç«¯è¯»æ•°ä¸­çœ‹åˆ°çš„ï¼Œopen-wc çš„ç”Ÿæˆå™¨åŒ…å«çš„ [`eslint-plugin-lit`](https://www.npmjs.com/package/eslint-plugin-lit) æœ‰åŠ©äºä½ ç¼–å†™æ›´å¹²å‡€ã€æ›´é«˜æ€§èƒ½çš„ä»£ç ï¼Œå¹¶ä¸ºåŸºäº`lit-html`çš„æ¨¡æ¿å»ºç«‹äº†è®¸å¤šè§„åˆ™ã€‚é™¤äº†ä¸ä¾èµ–æ¨¡æ¿ä¸­çš„`.map`ä¹‹å¤–ï¼Œå½“æ‚¨å°†åŒä¸€ä¸ªå±æ€§å¤šæ¬¡ç»‘å®šåˆ°ä¸€ä¸ªå…ƒç´ æ—¶(å³`<x-foo bar=${x} bar=${y} baz></x-foo>`)ï¼Œå½“æ‚¨å†—ä½™åœ°ä½¿ç”¨æ¨¡æ¿æ–‡å­—æ—¶(å³`foo ${â€˜bar'}`)ï¼Œå½“æ‚¨çš„ç»‘å®šä½äºæ— æ•ˆä½ç½®æ—¶(å³`<x-foo></${expr}>`)ï¼Œç­‰ç­‰ï¼Œæ‚¨éƒ½ä¼šè¢«å‘ŠçŸ¥ã€‚å¹¸è¿çš„æ˜¯ï¼Œåœ¨æˆ‘çš„`.map`ä¸­ï¼Œçº æ­£é”™è¯¯çš„æ­¥éª¤å¾ˆå°‘ï¼Œå®ƒä»¬ä½¿æˆ‘ä»¬çš„æ¨¡æ¿å¯è¯»æ€§æ›´å¥½ï¼Œå¹¶ä¸”å®ƒä»¬ä¸ºä»£ç çš„å¯é‡ç”¨æ€§åšå¥½äº†å‡†å¤‡ï¼Œæˆ‘ä»¬å°†åœ¨åé¢è®¨è®ºã€‚

```
import { renderTodos } from './to-do-ui';

// ...

render() {
    return html` ${renderTodos(this.todos)} `;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶è€Œï¼Œè¿™å¹¶ä¸æ˜¯ lint æŠ¥å‘Šä¸­å”¯ä¸€è®©æˆ‘æ„Ÿåˆ°æƒŠè®¶çš„éƒ¨åˆ†ã€‚ä»¥ä¸‹ä¹ŸæŠ“ä½äº†æˆ‘:

<figure>

[![No  raw `for(let y in x)` endraw ?](img/9abde50f0db4d5bbb07d788f25bbab86.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--TW0Lb_QB--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/yl641c8at9cbo3vrswb1.png)

<figcaption>No `for(let y in x)`?</figcaption>

</figure>

æˆ‘å®é™…ä¸Šåœ¨ä¸¤ä¸ªç›¸å…³çš„åœ°æ–¹è§¦å‘äº†è¿™ä¸ªè­¦æŠ¥(ä¸€ä¸ªåœ¨åº”ç”¨ç¨‹åºç«¯ï¼Œä¸€ä¸ªåœ¨åŒä¸€ç‰¹æ€§çš„æµ‹è¯•ç«¯),æ‰€ä»¥çº æ­£å…¶ä¸­ä¸€ä¸ªçš„é€»è¾‘ä¸»è¦é€‚ç”¨äºå¦ä¸€ä¸ªã€‚åœ¨ä¸€ä¸ªå®ä¾‹ä¸­ï¼Œä»£ç å¦‚ä¸‹:

```
for (const todoCount in workLevelByTodoCount) {
    if (todos.length <= todoCount) {
        return workLevelByTodoCount[todoCount];
    }
}
return Object.keys(workLevelByTodoCount).length; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“é€šè¿‡å¯¹è±¡/æ•°ç»„æ–¹æ³•äº¤ä»˜æ—¶ï¼Œæ‚¨å¯ä»¥æ›´åŠ æ¸…æ™°åœ°è·å¾—ç›¸åŒçš„åŠŸèƒ½:

```
const workLevelCounts = Object.keys(workLevelByTodoCount);
const count = workLevelCounts
    .find(todoCount => todos.length <= todoCount);
return typeof count !== 'undefined'
    ? workLevelByTodoCount[count]
    : workLevelCounts.length; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é™¤äº†ä¸Šè¿°ç»“æœä¹‹å¤–ï¼Œæˆ‘è¿˜é‡åˆ°äº†è®¸å¤šå…¶ä»–è¾ƒå°çš„æ—æŒºé”™è¯¯å’Œè­¦å‘Šï¼Œæˆ‘å¾ˆé«˜å…´åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨`git commit -am 'Code with some linting errors'`æ—¶å°±ä»æˆ‘çš„ä»£ç åº“ä¸­æ¸…é™¤äº†è¿™äº›é”™è¯¯å’Œè­¦å‘Šã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå½“æ¶‰åŠåˆ°è¿™äº›å¯èƒ½å¯¹æ‚¨çš„ä»£ç äº§ç”Ÿå¤åˆè´Ÿé¢å½±å“çš„å°é—®é¢˜æ—¶ï¼ŒçŸ¥é“æœ‰äººæ”¯æŒæ‚¨æ˜¯å¾ˆå¥½çš„ã€‚

## æ›´ä½•å†µ

å½“ä¸€ä¸ªé¡¹ç›®æ·»åŠ çš„å¸®åŠ©ç”¨æˆ·å˜å¾—æ›´å¥½çš„å·¥å…·(æ¯”å¦‚æäº¤æ—¶çš„æ—æŒº)åšäº†å¸®åŠ©é¡¹ç›®æœ¬èº«å˜å¾—æ›´å¥½çš„æ‰©å±•å·¥ä½œæ—¶ï¼Œè¿™ä¹Ÿå¾ˆå¥½ã€‚ä¸€æ—¦æˆ‘å®Œæˆäº†æˆ‘çš„æ—æŒºé—®é¢˜æ¸…å•ï¼Œæˆ‘å‘ç°è¿˜æœ‰ä¸€ä¸ªæˆ‘æ— æ³•è§£é‡Šçš„é—®é¢˜ã€‚

<figure>

[![Even the generator needs to be linted, sometimes.](img/05d119035f3b0191b341cd2d7b1bb0b1.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--s4nj2lOl--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/dcl0x26124cqcnpwt55t.png)

<figcaption>Even the generator needs to be linted, sometimes.</figcaption>

</figure>

äº‹å®è¯æ˜ï¼Œåœ¨å‘ç”µæœºçš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰äº›ä¸œè¥¿è¢«æ¼æ‰äº†ã€‚åœ¨å‘ç°è¿™ä¸ªé—®é¢˜å¹¶åœ¨ open-wc é¡¹ç›®ä¸­æäº¤[ä¸€ä¸ªé—®é¢˜](https://github.com/open-wc/open-wc/issues/246)åä¸ä¹…ï¼Œå®ƒå°±è¢«æ•´ç†å¥½äº†ã€‚

* * *

# çŸ­æ¸¸æˆ

æ­£å¦‚è®¸å¤šå¯¹æ­¤ç±»è¯é¢˜æœ‰æ„è§çš„äººæ‰€æŠ•ç¥¨çš„é‚£æ ·ï¼Œä¸€ç¯‡ 9000 å¤šå­—çš„æ–‡ç« æ˜¯ä¸è¡Œçš„ã€‚

> ![WestbrookJ profile image](img/c68b7eeba8c71652bba77a02b2b5f5eb.png)WestbrookJ@ WestbrookJ![twitter logo](img/4c8a2313941dda016bf4d78d103264aa.png)æ‰€ä»¥ï¼Œæˆ‘åœ¨å†™åšæ–‡...æˆ‘æ³¨æ„åˆ°ï¼Œå½“æˆ‘ä¸çœ‹çš„æ—¶å€™ï¼Œå®ƒå˜å¾—ç›¸å½“é•¿ï¼Œä¸€æ¬¡å®Œæˆå¯èƒ½æœ‰ 7000 ä¸ªå•è¯ã€‚æˆ‘æƒ³è¯´æˆ‘ä¼šå¾ˆå¹¸è¿åœ°æŠŠå®ƒç¼–è¾‘ä¸‹æ¥ï¼Œä½†æ˜¯ä¸€äº›æŠ€å·§æˆ‘è¿˜åœ¨æé«˜...æˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ2019 å¹´ 2 æœˆ 20 æ—¥ 12 ç‚¹ 22 åˆ†[![Twitter reply action](img/44d8b042100e231770330321e5b63d65.png)](https://twitter.com/intent/tweet?in_reply_to=1098196160613896192)[![Twitter retweet action](img/93d9c70ccc54851d2e8e881b53c21dae.png)](https://twitter.com/intent/retweet?tweet_id=1098196160613896192)[![Twitter like action](img/2e93f7775eadefab8bcd34a4542cc5a7.png)](https://twitter.com/intent/like?tweet_id=1098196160613896192)

æ‰€ä»¥ï¼Œæ€€ç€å¯¹ä½ æœ€æ·±çš„æ•¬æ„ï¼Œæˆ‘äº²çˆ±çš„è¯»è€…ï¼Œæˆ‘æŠŠå³å°†åˆ°æ¥çš„å¯¹è¯åˆ†æˆäº†å¾®ä¸è¶³é“çš„åä¸ªéƒ¨åˆ†ã€‚æ­å–œä½ ï¼Œä½ å·²ç»æ¥è¿‘ç¬¬ä¸€åœºæ¯”èµ›çš„å°¾å£°äº†ï¼å¦‚æœä½ åˆ°ç›®å‰ä¸ºæ­¢è¿˜å¾ˆäº«å—ï¼Œæˆ–è€…æ˜¯é‚£ç§ä¼šç»™ä¸€éƒ¨æ–°çš„æƒ…æ™¯å–œå‰§åŠ å‡ é›†å°±èƒ½è®©å®ƒå¤§æ”¾å¼‚å½©çš„äººï¼Œè¿™é‡Œæœ‰ä¸€ä»½å…¶ä»–äººçš„åå•ï¼Œä½ å¯ä»¥æŠŠå®ƒä»¬æ”¾åœ¨ä½ çš„ç½‘é£åå•ä¸Š:

*   [ä¸æ˜¯å¦ä¸€ä¸ªå¾…åŠåº”ç”¨](https://dev.to/westbrook/not-another-to-do-app-2kj9)
*   [å…¥é—¨](https://dev.to/westbrook/not-another-to-do-app-3jem)
*   [å°½æ—©æµ‹è¯•ï¼Œç»å¸¸æµ‹è¯•](https://dev.to/westbrook/not-another-to-do-app-2m9a)(æˆ‘å¯ä»¥å¯¹è¿™äº›æ–‡ç« ä½¿ç”¨ä¸€äº›å•å…ƒæµ‹è¯•...)
*   æµ‹é‡ä¸¤æ¬¡ï¼Œçš®æ£‰ä¸€æ¬¡(ä½ åœ¨è¿™é‡Œ)
*   [ä½¿å…¶æˆä¸ºç»„ä»¶](https://dev.to/westbrook/not-another-to-do-app-part-5-5d7o)
*   [ä½¿å…¶æˆä¸ºå¯é‡å¤ä½¿ç”¨çš„é›¶ä»¶](https://dev.to/westbrook/not-another-to-do-app-part-6-an)
*   ä½ çš„ç»„ä»¶çœŸçš„éœ€è¦çŸ¥é“è¿™äº›å—ï¼Ÿ
*   [å°½æ—©ã€ç»å¸¸ã€åªåœ¨éœ€è¦çš„æ—¶å€™æŠŠä¸œè¥¿åˆ†å¼€](https://dev.to/westbrook/not-another-to-do-app-part-8-3lic)
*   [æœ‰äº›æŠ½è±¡å¹¶ä¸(ä»…ä»…)é€‚ç”¨äºä½ çš„åº”ç”¨](https://dev.to/westbrook/not-another-to-do-app-part-9-10j3)
*   [å¯é‡ç”¨å’Œå¯æ‰©å±•çš„æ•°æ®ç®¡ç†/æœ€ç»ˆ...](https://dev.to/westbrook/not-another-to-do-app-part-10-mp6)
*   [æŸ¥çœ‹è¿è¡Œä¸­çš„åº”ç”¨](https://gifted-lamport-70b774.netlify.com/)

* * *

ç‰¹åˆ«æ„Ÿè°¢ [Open Web Components](https://open-wc.org/) çš„å›¢é˜Ÿï¼Œä»–ä»¬æä¾›äº†å¤§é‡çš„å·¥å…·å’Œå»ºè®®ï¼Œä»¥æ”¯æŒä¸æ–­å¢é•¿çš„å·¥ç¨‹å¸ˆå’Œå…¬å¸ç¤¾åŒºï¼Œå°†é«˜è´¨é‡çš„ Web ç»„ä»¶å¸¦å…¥è¡Œä¸šã€‚[åœ¨ GitHub](https://github.com/open-wc/open-wc) ä¸Šè®¿é—®ä»–ä»¬ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªé—®é¢˜ï¼Œæäº¤ä¸€ä»½ PRï¼Œæˆ–ç­¾ç½²ä¸€ä»½å›è´­åè®®æ¥å‚ä¸è¡ŒåŠ¨ï¼