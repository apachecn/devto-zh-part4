# Kentico 12:è®¾è®¡æ¨¡å¼ç¬¬ 6 éƒ¨åˆ†â€”â€”åœ¨ Kentico 12 MVC ä¸­å‘ˆç°å…ƒæ ‡ç­¾

> åŸæ–‡ï¼š<https://dev.to/seangwright/kentico-12-design-patterns-part-6-rendering-meta-tags-in-kentico-12-mvc-e0l>

<figure>

[![](img/ac214356de47a7e6117e82242f842acb.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--VDquYM7d--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/ea4ihs7myvmhiahzfii3.jpg)

<figcaption>Photo by [Sai Kiran Anagani](https://unsplash.com/@_imkiran) on [Unsplash](https://unsplash.com)</figcaption>

</figure>

## Meta æ ‡ç­¾çš„é‡è¦æ€§

HTML å…ƒæ ‡ç­¾ä¸å‘æˆ‘ä»¬çš„è®¿é—®è€…æ˜¾ç¤ºä¿¡æ¯ï¼Œè€Œæ˜¯å‘å…¶ä»–ç³»ç»Ÿæˆ–ç½‘ç»œçˆ¬è™«æ˜¾ç¤ºä¿¡æ¯ï¼Œè¿™æ˜¯ä¸€ç§æœ‰ç”¨çš„æç¤ºï¼Œå¯ä»¥æ˜¾ç¤ºå…³äºç½‘ç«™å’Œç½‘é¡µå†…å®¹çš„ä¿¡æ¯ã€‚

å¦‚æœæˆ‘ä»¬æƒ³è¦ä¸ºæˆ‘ä»¬çš„ç«™ç‚¹ç®¡ç†æ˜¾ç¤ºåœ¨æœç´¢å¼•æ“ç»“æœä¸­çš„å†…å®¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨å…ƒæ ‡ç­¾æ¥æä¾›å°½å¯èƒ½å¥½çš„æè¿°ã€‚

å¦‚æœæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ç½‘ç«™èƒ½å¤Ÿé€šè¿‡ç¤¾äº¤åª’ä½“æ–¹ä¾¿ã€å‡†ç¡®åœ°åˆ†äº«ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é¡µé¢ä¸Šæ·»åŠ æ­£ç¡®çš„å…ƒæ ‡ç­¾ï¼Œå‘Šè¯‰é‚£äº›ç¤¾äº¤å¹³å°(ä¾‹å¦‚:[è„¸ä¹¦](https://developers.facebook.com/docs/sharing/webmasters)ã€ [Pinterest](https://developers.pinterest.com/docs/rich-pins/overview/) å’Œ [Twitter](https://developer.twitter.com/en/docs/tweets/optimize-with-cards/guides/getting-started) )æ­£åœ¨åˆ†äº«ä»€ä¹ˆã€‚

å¥½çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ç¡®ä¿è¿™äº› meta æ ‡ç­¾è¢«æ­£ç¡®åœ°åº”ç”¨åˆ°ç”±æˆ‘ä»¬çš„ Kentico 12 MVC åº”ç”¨ç¨‹åºå‘ˆç°çš„é¡µé¢ä¸Šå‘¢ï¼ŸğŸ¤”

## ç®€å•çš„æ–¹æ³•

æˆ‘ä»¬çš„`<meta>`æ ‡ç­¾éœ€è¦æ·»åŠ åˆ° HTML æ–‡æ¡£çš„`<head>`ä¸­ã€‚åœ¨ ASP.NET MVC ä¸­ï¼Œ`<head>`é€šå¸¸ä½äº`Views\_Layout.cshtml`æ–‡ä»¶ä¸­ã€‚

èˆè¹ˆèˆ¹æ ·æœ¬ç½‘ç«™å‘æˆ‘ä»¬å±•ç¤ºäº†è¿™æ ·çš„ä¸œè¥¿:

```
<!DOCTYPE html>

<html>
<head id="head">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="UTF-8" />
    <title>@ViewBag.Title - Dancing Goat</title>
    <link rel="icon" href="@Url.Content("~/conteimg/favicon.png")" type="image/png" />
    <link href="@Url.Content("~/Content/Styles/Site.css")" rel="stylesheet" type="text/css" />
    @RenderSection("styles", required: false)

    <!-- We can add some meta tags -->
    <meta name="description" content="A description of the page!" />
</head> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯¥æ–‡ä»¶å®é™…ä¸Šæ˜¯ç«™ç‚¹çš„â€œæ¯ç‰ˆé¡µâ€,æ‰€æœ‰é¡µé¢ç‰¹å®šçš„å†…å®¹éƒ½å‘ˆç°åœ¨å…¶ä¸­çš„ä¸€ä¸ªéƒ¨åˆ†ä¸­ã€‚

æˆ‘ä»¬æƒ³åœ¨ä¸Šé¢çš„`<head>`ä¸­æ·»åŠ `<meta>`æ ‡ç­¾ï¼Œä½†æ˜¯æˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ã€‚

æˆ‘ä»¬æƒ³è¦æ”¾å…¥`<meta>`æ ‡ç­¾çš„ä¿¡æ¯æ¥è‡ªæ¯ä¸ªç‰¹å®šçš„é¡µé¢ï¼Œä½†æ˜¯è¿™ä¸ªå¸ƒå±€è¢«æ‰€æœ‰çš„é¡µé¢ä½¿ç”¨ã€‚ğŸ¤¨

æˆ‘ä»¬éœ€è¦æ ¹æ®è¯·æ±‚åŠ¨æ€åœ°è®¾ç½®è¿™äº›ä¿¡æ¯ã€‚

MVC ä»¥[è§†å›¾åŒ…](https://www.tutorialsteacher.com/mvc/viewbag-in-asp.net-mvc)çš„å½¢å¼å‘æˆ‘ä»¬å±•ç¤ºäº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚

`ViewBag`æ˜¯ä¸€ä¸ªåŠ¨æ€(è¯»å–:éç±»å‹åŒ–)çš„æ•°æ®é›†åˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è§†å›¾ä¸­è®¿é—®å®ƒï¼Œå¹¶ä¸”å¯ä»¥åœ¨ MVC ç®¡é“ä¸­çš„ä»»ä½•åœ°æ–¹ä¸ºå®ƒèµ‹å€¼ã€‚

å®ƒåœ¨æˆ‘ä»¬çš„æ‰€æœ‰è§†å›¾ä¸­éƒ½æ˜¯å…¨çƒå¯ç”¨çš„ï¼ŒåŒ…æ‹¬`_Layout.cshtml`ã€‚

å› æ­¤ï¼Œæ ‡å‡†çš„æ–¹æ³•æ˜¯ç»™ä¸€ä¸ª`Controller`ç±»ä¸­çš„`ViewBag`èµ‹å€¼ï¼Œç„¶åè®¿é—®å¸ƒå±€ä¸­çš„æ•°æ®:

```
// ProductsController.cs

public class ProductController
{
    public ActionResult Index()
    {
         ViewBag.OGTitle = "Acme Products ğŸ‚";
         ViewBag.OGImage = "https://acme-products.com/logo.png";
         ViewBag.Description = "A description of the page!";

         return View();
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
<!-- _Layout.cshtml -->

<head>
   <!-- ... -->
   <meta name="og:title" content="@ViewBag.OGTitle" />
   <meta name="og:image" content="@ViewBag.OGImage" />
   <meta name="description" = content="@ViewBag.Description" />
</head> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯æœ‰å‡ ä¸ªé—®é¢˜...

*   âŒ:åœ¨æ•´ä¸ªä»£ç ä¸­ï¼Œæˆ‘ä»¬æœ€ç»ˆæ‰§è¡Œç›¸åŒç±»å‹çš„èµ‹å€¼ï¼Œå°±åƒæˆ‘ä»¬åœ¨ç¤ºä¾‹æ§åˆ¶å™¨ä¸­ä¸€æ ·â€”â€”é™¤äº†æ²¡æœ‰å¯¹æ‰€æœ‰å¿…éœ€çš„`ViewBag`é”®éƒ½è¢«èµ‹å€¼çš„æ•°æ®æˆ–éœ€æ±‚è¿›è¡ŒéªŒè¯
*   âŒæ˜¯åŠ¨æ€çš„ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥è¾“å…¥ä¸€ä¸ªå±æ€§åï¼Œè€Œä¸éœ€è¦ä»»ä½•æˆ‘ä»¬é€šå¸¸ä» C#ä¸­å¾—åˆ°çš„ç¼–è¯‘å™¨æ”¯æŒ
*   âŒ `ViewBag`é€šå¸¸ä¸é¼“åŠ±åœ¨è§„æ¨¡è¶…è¿‡æ¼”ç¤ºçš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œåœ¨è¿™é‡Œä½¿ç”¨è¿™ä¸ª`ViewBag`å¯èƒ½ä¼šé¼“åŠ±æ›´å¤šçš„ä½¿ç”¨ï¼Œä¸Šé¢çš„è­¦å‘Šä¼šæˆå€å¢åŠ ã€‚
*   âŒ:å•å…ƒçœŸçš„ä¸å¯æµ‹è¯•å—...è‹...ğŸ˜£

æˆ‘ä»¬æŒ‡å°–æœ‰ C#å’Œ MVC çš„åŠ›é‡ï¼Œè®©æˆ‘ä»¬ç”¨å®ƒä»¬æ¥è§£å†³è¿™ä¸ªå›°å¢ƒå§ï¼

## è®¾è®¡å›¾æ¡ˆæ•‘åœº

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‡ ç§å¸¸è§çš„è½¯ä»¶è®¾è®¡æ¨¡å¼æ¥å¸®åŠ©æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªæ›´åŠ ä¼˜é›…å’Œå¥å£®çš„è§£å†³æ–¹æ¡ˆã€‚ğŸ˜

### é¢†åŸŸé©±åŠ¨è®¾è®¡(DDD) -ä¿æŠ¤ä¸å˜é‡

é¦–å…ˆï¼Œè®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç±»å‹æ¥è¡¨ç¤ºé¡µé¢ä¸­æˆ‘ä»¬æƒ³è¦çš„â€œå…ƒâ€ä¿¡æ¯ã€‚

```
public class SiteMeta
{
    public const string OGImage = "og:image";
    public const string OGSiteName = "og:site_name";

    private readonly Dictionary<string, string> metas;

    public string Title { get; } = "";

    public IReadOnlyDictionary<string, string> Metas => metas;

    public SiteMeta(
        string title,
        Dictionary<string, string> metas = null)
    {
        Guard.Against.NullOrWhiteSpace(title, nameof(title));

        Title = title;

        this.metas = metas is null
            ? new Dictionary<string, string>()
            : metas;
    }

    public void SetOGImage(string value)
    {
        Guard.Against.NullOrWhiteSpace(value, nameof(value)); 

        metas[OGImage] = value;       
    }

    public void AddMeta(string key, string value)
    {
        Guard.Against.NullOrWhiteSpace(key, nameof(key));
        Guard.Against.NullOrWhiteSpace(value, nameof(value));

        metas[key] = value;
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬å·²ç»å®šä¹‰äº†ä¸€ä¸ªç±»ï¼Œ[é€šè¿‡å¯¹æ„é€ å‡½æ•°å’Œæ–¹æ³•è°ƒç”¨ä½¿ç”¨](https://softwareengineering.stackexchange.com/a/32755/87445)[ä¿æŠ¤å­å¥](https://deviq.com/guard-clause/)æ¥ä¿æŠ¤å®ƒçš„ä¸å˜é‡ã€‚ğŸ‘

æˆ‘ä»¬è¿˜ç”¨`SetOGImage()`æ·»åŠ äº†ä¸€äº›å¼ºç±»å‹ï¼Œè§£å†³äº†åŠ¨æ€`ViewBag`çš„é—®é¢˜ã€‚ğŸ˜„

è¿™æ˜¯ç¡®ä¿æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæŒ‰ç…§æˆ‘ä»¬æœŸæœ›çš„æ–¹å¼å·¥ä½œçš„è‰¯å¥½çš„ç¬¬ä¸€æ­¥(è€Œä¸”å®ƒä¹Ÿæ˜¯éå¸¸å•å…ƒå¯æµ‹è¯•çš„ä»£ç ï¼)

### ã€ä¾èµ–æ³¨å…¥(DI)ã€‘-æ„æˆå›¾å±‚

ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»ä½œä¸º`SiteMeta`ç±»å‹çš„å­˜å‚¨ï¼Œå…è®¸åº”ç”¨ç¨‹åºçš„ä¸€éƒ¨åˆ†è®¾ç½®å€¼ï¼Œå¦ä¸€éƒ¨åˆ†æ£€ç´¢å®ƒã€‚

```
public interface ISiteMetaService
{
    SiteMeta Get();
    void Set(SiteMeta siteMeta);
}

public class SiteMetaService : ISiteMetaService
{
    private SiteMeta currentSiteMeta;

    public SiteMeta Get() => currentSiteMeta ?? new SiteMeta("Default");

    public void Set(SiteMeta siteMeta)
    {
        Guard.Against.Null(siteMeta, nameof(siteMeta));

        currentSiteMeta = siteMeta;
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬å¯ä»¥ç”¨æˆ‘ä»¬çš„æ§åˆ¶åè½¬(IoC)å®¹å™¨æ³¨å†Œè¿™ä¸ªç±»å‹ï¼Œç„¶ååœ¨éœ€è¦ä½¿ç”¨å®ƒçš„åœ°æ–¹å°†å®ƒä½œä¸ºæ„é€ å‡½æ•°å‚æ•°æä¾›â€”â€”æ¯”å¦‚åœ¨`Controller` ( [æ³¨å…¥æˆ‘ä»¬çš„ä¾èµ–](https://en.wikipedia.org/wiki/Dependency_injection))ä¸­ã€‚

> æˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„`ISiteMetaService`åœ¨æˆ‘ä»¬çš„ IoC å®¹å™¨ä¸­æœ‰ä¸€ä¸ªç»ˆç”Ÿçš„â€œæ¯è¯·æ±‚â€ã€‚è¿™æœ‰åŠ©äºç¡®ä¿å‰ä¸€ä¸ªè¯·æ±‚ä¸­çš„`SiteMeta`ä¸ä¼šæ„å¤–åœ°ç”¨åœ¨åä¸€ä¸ªè¯·æ±‚ä¸­ã€‚

```
public class ProductController
{
    private readonly ISiteMetaService service;

    public ProductController(ISiteMetaService service)
    {
         Guard.Against.Null(service, nameof(service));

         this.service = service;
    }

    public ActionResult Index()
    {
         // These values could also come from a custom Kentico PageType

         var meta = new SiteMeta("Acme Products ğŸ‚");

         meta.SetOGImage("https://acme-products.com/logo.png");

         service.Set(meta);

         return View();
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡ DI å±æ€§æ³¨å…¥è€Œä¸æ˜¯æ„é€ å‡½æ•°æ³¨å…¥æ¥è®¿é—®è¿™ä¸ªæœåŠ¡â€”â€”åœ¨`ActionFilterAttribute` :
ä¸­

```
public class SiteMetaActionFilterAttribute : ActionFilterAttribute
{
    public ISiteMetaService SiteMetaService { get; set; }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        filterContext.Controller.ViewBag.SiteMeta = SiteMetaService.Get();

        base.OnActionExecuted(filterContext);
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨æˆ‘ä»¬çš„`_Layout.cshtml`ä¸­ï¼Œæˆ‘ä»¬ä¿è¯åœ¨ç±»å‹ä¸º`SiteMeta` :
çš„`ViewBag`ä¸Šæœ‰ä¸€ä¸ª`SiteMeta`å±æ€§

```
<head>
   @{
       var siteMeta = ViewBag.SiteMeta as SiteMeta;
   }
   <title>@siteMeta.Title</title>

   @foreach(var meta in siteMeta.Metas)
   {
       <meta name="@meta.Key" content="@meta.Value" />
   }
</head> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é‚£ä¸æ˜¯å¾ˆå¥½å—ï¼ğŸ‘ğŸ‘

ä¿¡ä¸ä¿¡ç”±ä½ ï¼Œå³ä½¿æœ‰è¿™ä¹ˆå¥½çš„ C#ï¼Œæˆ‘ä»¬ä»ç„¶æœ‰æ²¡æœ‰å¤„ç†çš„ç”¨ä¾‹ã€‚ğŸ˜®

å¦‚æœæˆ‘ä»¬æƒ³ä¸ºæ•´ä¸ªç«™ç‚¹è®¾ç½®ç±»ä¼¼äº`og:site_name`çš„ä¸œè¥¿ï¼Œä½†åˆæƒ³ä»é…ç½®ä¸­è·å–è¿™ä¸ªå€¼ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ

æˆ–è€…ï¼Œæˆ‘ä»¬å¯èƒ½æƒ³æä¾›ä¸€ä¸ªåå¤‡å›¾åƒï¼Œä»¥é˜²åœ¨`SiteMeta`ä¸­æ²¡æœ‰è®¾ç½®ï¼Ÿ

æˆ‘ä»¬ç”šè‡³ä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯:ä¸€ä¸ª`SiteMeta`ä»æœªè¢«ä¼ é€’ç»™`SiteMetaService.Set()`è°ƒç”¨ï¼Œè¿™æ„å‘³ç€å½“æˆ‘ä»¬è¯•å›¾è®¿é—®å®ƒçš„å±æ€§æ—¶ï¼Œæˆ‘ä»¬ä¼šåœ¨è¿è¡Œæ—¶å¾—åˆ°ä¸€ä¸ª`NullReferenceException`ï¼ğŸ˜¨

### å•ä¸€è´£ä»»åŸåˆ™(SRP)

æˆ‘ä»¬å¯ä»¥å°†ç”Ÿæˆ`SiteMeta`çš„éªŒè¯å’Œé…ç½®æ”¾åœ¨`SiteMetaService`ä¸­ï¼Œä½†æ˜¯å¢åŠ çš„å¤æ‚æ€§å°†ä½¿æµ‹è¯•æ›´åŠ å›°éš¾ã€‚

ç›¸åï¼Œè®©æˆ‘ä»¬ä¸“æ³¨äºæˆ‘ä»¬æ¯ä¸ªç±»çš„è§’è‰²ï¼Œç¡®ä¿éµå®ˆ[å•ä¸€è´£ä»»åŸåˆ™](https://en.wikipedia.org/wiki/Single_responsibility_principle)ã€‚ğŸ¤—

ä¸‹é¢çš„è¿™ä¸ªç±»å¸®åŠ©æˆ‘ä»¬åŸºäºä¸Šé¢çš„éœ€æ±‚æ ‡å‡†åŒ–æˆ‘ä»¬çš„`SiteMeta`çš„å€¼:

```
public interface ISiteMetaStandardizer
{
    SiteMeta Standardize(SiteMeta siteMeta);
}

public class SiteMetaStandardizer : ISiteMetaStandardizer
{
    private readonly Dictionary<string, string> defaultMeta;

    public SiteMetaStandardizer(string defaultSiteName, string defaultImage)
    {
        Guard.Against.NullOrWhiteSpace(defaultSiteName, nameof(defaultSiteName));
        Guard.Against.NullOrWhiteSpace(defaultImage, nameof(defaultImage));

        defaultMeta = new Dictionary<string, string>
        {
            { SiteMeta.OGImage, defaultImage },
            { SiteMeta.OGSiteName, defaultSiteName }
        };
    }

    public SiteMeta Standardize(SiteMeta siteMeta)
    {
        if (siteMeta is null)
        {
            return new SiteMeta(defaultMeta[SiteMeta.OGSiteName], defaultMeta);
        }

        foreach (var meta in defaultMeta)
        {
            if (!siteMeta.Metas.ContainsKey(meta.Key))
            {
                siteMeta.AddMeta(meta.Key, meta.Value);
            }
        }

        return siteMeta;
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬å¯ä»¥åœ¨ IoC å®¹å™¨ä¸­å°†è¿™ç§ç±»å‹çš„å®ä¾‹æ³¨å†Œä¸ºå•ä¾‹ï¼Œç”¨æ¥è‡ª Kentico çš„`SettingsKeyInfoProvider`æˆ–`AppSettings`çš„å€¼æ¥æ„é€ å®ƒã€‚

ç°åœ¨æˆ‘ä»¬åªéœ€è¦æ›´æ–°æˆ‘ä»¬çš„`SiteMetaService`æ¥ä½¿ç”¨`ISiteMetaStandardizer` :

```
public class SiteMetaService : ISiteMetaService
{
    private SiteMeta currentSiteMeta;
    private readonly standardizer;

    public SiteMetaService(ISiteMetaStandardizer standardizer)
    {
        Guard.Against.Null(standardizer, nameof(standardizer));

        this.standardizer = standardizer;
    }

    public SiteMeta Get() => standardizer.Standardize(currentSiteMeta);

    public void Set(SiteMeta siteMeta)
    {
        Guard.Against.Null(siteMeta, nameof(siteMeta));

        currentSiteMeta = siteMeta;
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä½ ä¸€ç›´åœ¨ç¼–ç ï¼Œç°åœ¨ä½ åº”è¯¥èƒ½å¤Ÿåœ¨ä½ çš„ä¸€äº› MVC è·¯çº¿ä¸­ä½¿ç”¨`ISiteMetaService`ï¼Œä»ä½ ä»æ•°æ®åº“è·å–çš„ Kentico é¡µé¢ä¸­æå–æ•°æ®ã€‚ğŸ˜‰

## æ€»ç»“èµ·æ¥

è¿™æ˜¯å¤§é‡çš„ç¼–ç å·¥ä½œï¼Œå¸Œæœ›å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©å’Œå¯å‘ã€‚

æˆ‘ä»¬å®Œæˆäº†ä»€ä¹ˆï¼Ÿ

*   âœ…:æˆ‘ä»¬ç°åœ¨æœ‰äº†ä¸€ç§ç±»å‹å®‰å…¨ä¸”ç»è¿‡éªŒè¯çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹è®¾ç½®å’Œè®¿é—®æˆ‘ä»¬çš„`SiteMeta`å€¼ã€‚
*   æˆ‘ä»¬åˆ©ç”¨ ASP.NET MVC çš„ç®¡é“å°†æˆ‘ä»¬çš„`SiteMeta`å€¼åº”ç”¨äºæ¯ä¸ªå“åº”çš„`ViewBag`ã€‚
*   âœ…:æˆ‘ä»¬åˆ›å»ºäº†é›†ä¸­çš„ã€å¯æµ‹è¯•çš„ç±»ï¼Œè¿™äº›ç±»ç»„æˆäº†ä¸€ä¸ªçµæ´»çš„ã€å¼ºå¤§çš„ç³»ç»Ÿã€‚

æƒ³è¦å¢å¼ºæˆ‘ä»¬åœ¨è¿™é‡Œå»ºç«‹çš„ä¸œè¥¿å—ï¼Ÿ

ä½ å¯ä»¥å°è¯•ç»™`SiteMeta`ç±»æ·»åŠ é¢å¤–çš„æ–¹æ³•æ¥è®¾ç½®ç‰¹å®šçš„`<meta>`æ ‡ç­¾ï¼Œæ¯”å¦‚`og:image`ã€‚

ä½ å¯ä»¥ç»™`SiteMetaStandardizer`æ·»åŠ æ›´å¤šçš„é€»è¾‘ï¼Œæ ¹æ®å½“å‰çš„ urlã€æ§åˆ¶å™¨æˆ– Kenticoã€ASP.NET å’Œ MVC æä¾›ç»™æˆ‘ä»¬çš„ä»»ä½•ä¸œè¥¿æ¥è®¾ç½®é»˜è®¤å€¼ã€‚

æˆ‘è¿˜åœ¨è€ƒè™‘ç»™ Kentico çš„`*Info`æˆ–`PageType`ç±»æ·»åŠ æ‰©å±•æ–¹æ³•ï¼ŒæŠŠå®ƒä»¬å˜æˆ`SiteMeta`(ä¾‹å¦‚:`skuInfo.ToSiteMeta();`)

å¦‚æœä½ æœ‰ä»€ä¹ˆå»ºè®®ï¼Œæˆ‘å¾ˆæƒ³å¬å¬ã€‚ä¹Ÿè®¸æˆ‘ä»¬å¯ä»¥æŠŠå®ƒå˜æˆä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œä¾›å…¶ä»– Kentico å¼€å‘è€…ä½¿ç”¨ï¼Ÿï¼ğŸ’ª

* * *

å¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾æ›´å¤šçš„ Kentico å†…å®¹ï¼Œè¯·åœ¨ DEV:

## # [è‚¯è’‚ç§‘](https://dev.to/t/kentico) <button name="button" type="button" data-info="{&quot;className&quot;:&quot;Tag&quot;,&quot;style&quot;:&quot;full&quot;,&quot;id&quot;:5339,&quot;name&quot;:&quot;kentico&quot;}" class="crayons-btn follow-action-button whitespace-nowrap c-btn--secondary fs-base " aria-label="Follow tag: kentico" aria-pressed="false">è·Ÿéš</button>

æˆ–è€…æˆ‘çš„ [Kentico 12:è®¾è®¡æ¨¡å¼](https://dev.to/search?q=Kentico%2012%20-%20Design%20Patterns)ç³»åˆ—ã€‚