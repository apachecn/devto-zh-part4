# ç°ä»£ Web ç»„ä»¶

> åŸæ–‡:[https://dev.to/samthor/modern-web-components-37hf](https://dev.to/samthor/modern-web-components-37hf)

æˆ‘æ˜¯[åœ£è¯è€äººè¿½è¸ªè€…](https://santatracker.google.com)çš„ä¸»è§’ã€‚æ˜¯çš„ï¼Œæˆ‘çŸ¥é“ç°åœ¨æ˜¯å…­æœˆâ€”â€”ç¦»å‡æœŸéå¸¸è¿œã€‚ğŸ’¼

æˆ‘æƒ³è°ˆè°ˆ Web ç»„ä»¶ã€‚å¿«é€Ÿå¤ä¹ ä¸€ä¸‹:è¿™äº›è‡ªå®šä¹‰å…ƒç´ å¯èƒ½ä¼šä½¿ç”¨ Shadow DOMï¼Œå…è®¸æ‚¨è‡ªå·±å‘½åçš„å…ƒç´ åŒ…å«è‡ªå·±çš„ CSSã€æ ·å¼å’Œ DOM:

```
<div>
  <my-custom-element></my-custom-element>
  <p>Mixed with regular HTML!</p>
</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#polymer-away)èšåˆç‰©æ‰äº†ğŸ‘‹

æˆ‘ä»¬æ›´æ–° Santa çš„æ ¸å¿ƒ UI ä»¥*ç§»é™¤*[èšåˆç‰©](https://github.com/Polymer/polymer)ç½‘ç»œç»„ä»¶åº“çš„åŸå› ä¹‹ä¸€æ˜¯å› ä¸ºèšåˆç‰©æ˜¯*ç²˜æ€§çš„*ã€‚èšåˆç‰©åªæœ‰åœ¨ä¸å®ƒç›¸äº’ä½œç”¨çš„æ‰€æœ‰å…¶ä»–å…ƒç´ éƒ½æ˜¯èšåˆç‰©æ—¶æ‰çœŸæ­£èµ·ä½œç”¨:å®ƒæ¥è§¦çš„ä»»ä½•ä¸œè¥¿ä¹Ÿéœ€è¦ä»¥åŒæ ·çš„æ–¹å¼èµ·ä½œç”¨ã€‚

è¿™æ˜¯ä¸å¯æ‰©å±•çš„ï¼Œä¹Ÿæ²¡æœ‰ç»™æˆ‘ä»¬å°†æ¥ç§»åŠ¨çš„ç©ºé—´ã€‚åƒ[WebComponents.org](https://www.webcomponents.org/)è¿™æ ·çš„ç½‘ç«™ï¼Œåœ¨è°·æ­Œå¯¹èšåˆç‰©çš„å®£ä¼ è¾¾åˆ°é«˜æ½®æ—¶å‘å¸ƒï¼Œå®£ç§°#UseThePlatformï¼Œä½†æˆ‘æ€€ç–‘é‚£é‡Œçš„å¤§å¤šæ•°å…ƒç´ éƒ½ä»¥åŒæ ·çš„æ–¹å¼å…·æœ‰ç²˜æ€§ã€‚

## [](#smooth-elements)å¹³æ»‘å…ƒç´ ğŸ˜

æˆ‘ä»¬ç”¨`lit-element`é‡å†™åœ£è¯è€äººè¿½è¸ªå™¨æ ¸å¿ƒç”¨æˆ·ç•Œé¢çš„ä¸€ä¸ªä¸»è¦åŸå› æ˜¯å› ä¸ºä¸åƒèšåˆç‰©ï¼ŒLit æ˜¯*è€Œä¸æ˜¯*ç²˜æ€§çš„ã€‚å®ƒåªæ˜¯ä¸€ä¸ªåŠ©æ‰‹åº“ï¼Œå¯ä»¥ä¸é¡µé¢ä¸Šçš„ä»»ä½•å…¶ä»–å…ƒç´ äº’æ¢ä½¿ç”¨ã€‚ğŸ¤

å› æ­¤ï¼Œåœ¨é‡å†™åœ£è¯è€äººè·Ÿè¸ªå™¨æ—¶ï¼Œæˆ‘ä»¬å‘ç°è®¸å¤šå…ƒç´ ä¸éœ€è¦ç»§æ‰¿å†…ç½®`HTMLElement`ç±»ä»¥å¤–çš„ä»»ä½•ä¸œè¥¿ï¼Œå› ä¸ºå®ƒä»¬åªæ˜¯ç®€å•çš„æ„å»ºå—ã€‚æˆ‘ä»¬ç§°è¿™äº›ä¸ºâ€œé¦™è‰â€å…ƒç´ ã€‚ğŸ¨

é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å„ç§å„æ ·çš„å°å‹æˆ–å¤§å‹ Web ç»„ä»¶åº“å……å½“åŠ©æ‰‹ã€‚æˆ‘çš„ IRL å¥½å‹ Trey å†™äº† [SkateJS](https://skatejs.netlify.com/) ï¼Œåªè¦åœ¨ dev.to ä¸Šæœç´¢ [#webcomponents](https://dev.to/t/webcomponents) æ ‡ç­¾ï¼Œå°±ä¼šå‘ç°ä¸€å †å€™é€‰äººã€‚ğŸ”

å½“ç„¶ï¼Œæ‚¨å¯èƒ½ä¸åº”è¯¥å‘å¸ƒå‡ ä¸ªä¸åŒçš„åº“:è¿™æ ·åšå¾ˆæ˜æ™ºï¼Œæ—¢å¯ä»¥èŠ‚çœå­—èŠ‚ï¼Œåˆä¸ä¼šä½¿ä»£ç è¿‡äºå¤æ‚ã€‚ä½†æ˜¯å¦‚æœä½ æŸä¸€å¤©ä½¿ç”¨ Litï¼Œä½†å¦ä¸€å¤©ä½¿ç”¨ Skate é‡å†™(ä¹Ÿæœ‰ä¸€ç‚¹é¦™è‰å‘³)ï¼Œä½ å¯ä»¥å®‰å…¨åœ°è®©è¿™äº›åº“åœ¨è¿ç§»è¿‡ç¨‹ä¸­å…±å­˜ï¼Œè¿™æ ·ä½ çš„ç«™ç‚¹æ°¸è¿œä¸ä¼šä¸å¯ç”¨ã€‚ğŸ¤—

### [](#an-example)ä¸¾ä¸ªä¾‹å­ğŸ”¥

ä¸ºäº†å®Œæ•´èµ·è§ï¼Œè®©æˆ‘ä»¬å±•ç¤ºä¸€ä¸ªå…ƒç´ åœ¨ Lit ä¸­çš„æ ·å­:

```
class SimpleGreeting extends LitElement {
  static get properties() {
    return { name: { type: String } };
  }

  constructor() {
    super();
    this.name = 'World';
  }

  render() {
    return html`<p>Hello, ${this.name}!</p>`;
  }
}
customElements.define('simple-greeting', SimpleGreeting); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¾ˆç®€å•ï¼Œå¯¹å§ï¼ŸSkateJS æœ‰ä¸€ä¸ªç±»ä¼¼çš„ï¼Œç®€å•çš„ï¼Œ[å…¥é—¨ç¤ºä¾‹](https://skatejs.netlify.com/docs/element)ã€‚ğŸ›¹

### [](#vanilla-example)é¦™è‰ç¤ºä¾‹ğŸ¦

æ²¡æœ‰ä»»ä½•åº“ï¼Œä»…ä»…ä½¿ç”¨å¹³å°
ï¼Œä¸€ä¸ªç®€å•çš„å…ƒç´ çœ‹èµ·æ¥ä¼šæ˜¯ä»€ä¹ˆæ ·å­

```
class SantaChoiceElement extends HTMLElement {
  constructor() {
    super();

    const template = Object.assign(document.createElement('template'), {
      innerHTML: `
<style>/* CSS here */</style>
<div class="wrap">
  <!-- more HTML -->
</div>
`,
    });

    // polyfill for CSS in Shadow DOM
    if (self.ShadyCSS) {
      self.ShadyCSS.prepareTemplate(template, 'santa-choice');
    }
    this.attachShadow({mode: 'open'});
    this.shadowRoot.appendChild(document.importNode(template.content, true));
  }
}
customElements.define('santa-choice', SantaChoiceElement); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¯¹äºä¸æ”¯æŒ Shadow DOM çš„ [~10%çš„ç”¨æˆ·](https://caniuse.com/#feat=shadowdomv1)ï¼Œè¿™æ®µä»£ç çœ‹èµ·æ¥å¾ˆå¤æ‚(å¯¹äº Shady CSS æœ‰å¤šç§å¡«å……)ã€‚Lit æ­£åœ¨â€œå…è´¹â€åŒ…æ‹¬è¿™ä¸ªã€‚ğŸ†“

<small>ä½œä¸ºæ—ç™½ï¼›`<santa-choice>`æ˜¯ä¸€ä¸ªæˆ‘éå¸¸è‡ªè±ªçš„å…ƒç´ ï¼Œå®ƒé©±åŠ¨ç€[ç²¾çµåˆ¶é€ è€…ğŸ§](https://santatracker.google.com/elfmaker.html) åº•éƒ¨çš„é€‰æ‹©å™¨ã€‚æˆ‘å¸Œæœ›æœ‰ä¸€å¤©èƒ½å†™å‡ºå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</small>

## [](#thanks)è°¢è°¢ï¼

æˆ‘å¸Œæœ›è¿™èƒ½è®©ä½ å¯¹ WCs (Web ç»„ä»¶)æœ‰æ‰€äº†è§£ã€‚å¯¹æˆ‘æ¥è¯´ï¼Œç»å¯¹æ·±åˆ»çš„æ—¶åˆ»æ˜¯å½“æˆ‘æ„è¯†åˆ°ä½¿ç”¨ Lit æˆ–å…¶ä»–åº“çš„å¥½å¤„æ˜¯å®ƒä¸æ˜¯å…¨åŒ…çš„:å®ƒä»¬ä¸ç”Ÿæ€ç³»ç»Ÿçš„ä»»ä½•å…¶ä»–éƒ¨åˆ†éƒ½å¾ˆå¥½åœ°é…åˆï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½ä½¿ç”¨å®ƒã€‚ğŸ‘

Sixteen