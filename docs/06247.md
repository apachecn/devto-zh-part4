# RxJs ç®€ä»‹

> åŸæ–‡ï¼š<https://dev.to/osamaqarem/a-brief-intro-to-rxjs-egb>

è¿™ç¯‡æ–‡ç« æœ€åˆå‘è¡¨åœ¨æˆ‘çš„åšå®¢ä¸Šã€‚

* * *

[RxJs](https://rxjs.dev/) æ˜¯é’ˆå¯¹ Javascript çš„[ååº”å¼æ‰©å±•](http://reactivex.io/)çš„å®ç°ã€‚è¿™äº›æ‰©å±•æ˜¯å·¥å…·çš„é›†åˆï¼Œå…è®¸æˆ‘ä»¬ç¼–å†™å£°æ˜æ€§çš„ååº”å¼ä»£ç ï¼Œè€Œä¸æ˜¯å‘½ä»¤å¼ä»£ç (ä¾‹å¦‚ï¼Œ`do this when x`è€Œä¸æ˜¯`if x is this right now, then do the following...`)ã€‚åŸºæœ¬ä¸Šï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›äº†å¯ä»¥å¢å¼ºåŸºäºäº‹ä»¶çš„é€»è¾‘å¤„ç†çš„æ“ä½œç¬¦(å‡½æ•°)ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤šä¸ªç›¸å…³äº‹ä»¶æ—¶ã€‚

Rx è‚¯å®šæ˜¯æœ‰å­¦ä¹ æ›²çº¿çš„ã€‚æ–°çš„æ¦‚å¿µå’Œæœ¯è¯­åœ¨å¼€å§‹æ—¶ä¼šè®©äººä¸çŸ¥æ‰€æªã€‚ä½†æ˜¯ä¸€æ—¦ä½ å°è¯•äº†è¶³å¤Ÿå¤šçš„æ¬¡æ•°ï¼Œæœ€ç»ˆä½ ä¼šå¾ˆå¿«å­¦ä¼šæ‰€æœ‰çš„ wizzabanga å•è¯å’Œæ¦‚å¿µã€‚æˆ‘ä¼šå°½é‡è®©è¿™ç¯‡æ–‡ç« ç®€å•ï¼Œä½†æ˜¯ä½ è‚¯å®šéœ€è¦ç†Ÿæ‚‰ promises APIã€‚

## æ‰¿è¯º vs å¯è§‚

æƒ³è±¡ä¸€ä¸‹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæè¿°æˆ‘ä»¬æ€æƒ³çš„å­—ç¬¦ä¸²æ•°ç»„ã€‚

```
const thoughts = ["food", "sleep", "code"]; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### è®¸è¯º

å½“æˆ‘ä»¬åœ¨ JavaScript ä¸­å¤„ç†äº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ Promise APIã€‚å¯¹äºä¸€ä¸ªæ‰¿è¯ºï¼Œæœ‰ä¸¤ç§æƒ…å†µä¼šå‘ç”Ÿ:

1-å®ƒä½¿ç”¨å•ä¸ªå€¼è¿›è¡Œè§£æã€‚

2-å®ƒç”¨ä¸€ä¸ªå€¼æ‹’ç»ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯ã€‚

1 å’Œ 2 éƒ½è¡¨ç¤ºä¸€ä¸ªæ‰¿è¯ºçš„å®Œæˆã€‚

```
const thoughtsPromise = () => {
  return new Promise((resolve, reject) => {
    resolve(thoughts);
  });
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### å¯è§‚å¯Ÿçš„

ä¸€ä¸ªå¯è§‚å¯Ÿå¯¹è±¡æ˜¯ä¸€ä¸ªæ•°æ®æµï¼Œä»ä¸­æˆ‘ä»¬å¯ä»¥å¾—åˆ°å¸¦æœ‰å€¼çš„é€šçŸ¥ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸‰ç§ä¸åŒçš„åœºæ™¯ä¸­è·å¾—è¿™äº›é€šçŸ¥:

1-å½“æµä¸­æœ‰æ–°å€¼æ—¶ã€‚

2-å½“é”™è¯¯å‘ç”Ÿæ—¶ç»™å‡ºé”™è¯¯å€¼ã€‚

3-å½“æµå®Œæˆã€‚

ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå¯è§‚å¯Ÿå€¼ ***å¯ä»¥ç”¨æ–°å€¼*** è§£æå¤šæ¬¡ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æƒ³åœ¨ä½ çš„åº”ç”¨ä¸Šå‘ç”¨æˆ·å±•ç¤ºä¸€ä¸ªè§†é¢‘ã€‚è®©ç”¨æˆ·ä¸€æ¬¡ä¸‹è½½æ•´ä¸ªè§†é¢‘å¥½ï¼Œè¿˜æ˜¯ä¸€ç‚¹ä¸€ç‚¹åœ°æ’­æ”¾å¥½ï¼Ÿå¯è§‚æµ‹é‡å¯ä»¥å¸®åŠ©ä½ å¯¹æ•°æ®è¿›è¡Œæµå¼å¤„ç†ã€‚

è®©æˆ‘ä»¬åˆ›é€ ä¸€ä¸ªå¯è§‚å¯Ÿçš„ã€‚

`from`æ“ä½œç¬¦å¯ä»¥å°†æ•°ç»„æˆ–æ‰¿è¯ºä¹‹ç±»çš„æ•°æ®è½¬æ¢æˆæ•°æ®æµã€‚

```
import { from } from "rxjs";

// The trailing $ sign is a naming convention for observables in JS
const thoughts$ = from(thoughts); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°±æ˜¯è¿™æ ·ï¼

### è·å–æ•°æ®

å›åˆ°æˆ‘ä»¬çš„æ‰¿è¯ºã€‚ä½ è®¤ä¸ºå½“`thoughtsPromise`è§£å†³æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ

```
const getValue = async () => {
  try {
    const thoughtsArray = await thoughtsPromise();
    console.log(thoughtsArray);
    // Output: ["food", "sleep", "code"]
  } catch (err) {
    // handle error
  }
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬ä¸€ä¸‹å­å¾—åˆ°äº†æ•°ç»„ã€‚ä½ è®¤ä¸ºå½“æˆ‘ä»¬å¼€å§‹å€¾å¬ä»·å€¼æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œæ¢å¥è¯è¯´å°±æ˜¯`subscribe`åˆ°æˆ‘ä»¬çš„`thoughts$`å¯è§‚å¯Ÿå€¼ï¼Ÿ

```
// We subscribe to an observable to get values from it
thoughts$.subscribe(
  value => console.log(value),
  err => null, //handle error,
  () => null // handle completion,
);
// Output:
//    food
//    sleep
//    code 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬ä»æ•°ç»„ä¸­ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°è·å–å€¼ã€‚æ•°æ®æµã€‚é…·æ¯™äº†ã€‚

[ç©è¿™ä¸ªä¾‹å­(React)](https://codesandbox.io/embed/sharp-wing-vfuqn?fontsize=14&expanddevtools=1)

## æˆ‘ä¸€å®šè¦çŸ¥é“ Rx å—ï¼Ÿ

æ²¡æœ‰ã€‚ä½†æ˜¯è¿™é‡Œæœ‰ä¸€äº›ç”¨ä¾‹éœ€è¦è€ƒè™‘:

1-å¦‚æœä½ å› ä¸ºæŸç§åŸå› ä¸èƒ½ä½¿ç”¨`async await`ï¼Œåœ¨ JS ä¸­ä¿æŒä»£ç æ‰å¹³ã€‚

2-å¤„ç†å¤æ‚çš„åŸºäºäº‹ä»¶çš„é€»è¾‘ï¼Œæ— è®ºæ˜¯ç½‘ç»œç›¸å…³çš„è¿˜æ˜¯ UI ç›¸å…³çš„(ä¾‹å¦‚ websockets /æ‹–æ”¾)ã€‚

3-å¦‚æœä½ çš„é˜Ÿå‹æ¥è‡ªä¸åŒçš„è¯­è¨€ï¼Œä½†ä½ ä»¬éƒ½çŸ¥é“ Rxï¼Œå¯¹ä»–ä»¬æ¥è¯´ï¼Œä½¿ç”¨ RxJs å¯èƒ½æ¯”ä½¿ç”¨`promises`å’Œ`async await`æ›´å®¹æ˜“ã€‚

4-åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼ŒRx å¯¹äºå¤„ç†å¤šçº¿ç¨‹éå¸¸æœ‰ç”¨ã€‚

å¦‚æœä½ å–œæ¬¢ååº”å¼ç¼–ç¨‹ï¼Œå¹¶ä¸”æƒ³æŠŠå®ƒåº”ç”¨åˆ°ä»»ä½•åœ°æ–¹ï¼Œé‚£å°±å»å§ğŸ™‚ã€‚

[å»æŠ–åŠ¨ç”¨æˆ·è¾“å…¥(ååº”)](https://codesandbox.io/embed/pensive-resonance-z5qci?fontsize=14)

## æœ‰ç”¨é“¾æ¥:

*   Rx æ“ä½œå‘˜åˆ—è¡¨

[http://reactivex.io/documentation/operators.html](http://reactivex.io/documentation/operators.html)

*   Fireship å…³äº RxJs è¿è¥å•†çš„ç²¾å½©è§†é¢‘

[https://www.youtube.com/watch?v=ewcoEYS85Co](https://www.youtube.com/watch?v=ewcoEYS85Co)

*   ååº”å¼ç¼–ç¨‹

[https://en.wikipedia.org/wiki/Reactive_programming](https://en.wikipedia.org/wiki/Reactive_programming)

*   å‘½ä»¤å¼ç¼–ç¨‹

[https://en.wikipedia.org/wiki/Imperative_programming](https://en.wikipedia.org/wiki/Imperative_programming)

*   å£°æ˜å¼ç¼–ç¨‹

[https://en.wikipedia.org/wiki/Declarative_programming](https://en.wikipedia.org/wiki/Declarative_programming)

*   è§‚å¯Ÿè€…æ¨¡å¼

[https://en.wikipedia.org/wiki/Observer_pattern](https://en.wikipedia.org/wiki/Observer_pattern)