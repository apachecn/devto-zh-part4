# æ„å»º React & Firebase åšå®¢ç«™ç‚¹:ç¬¬ 1 éƒ¨åˆ†

> åŸæ–‡ï¼š<https://dev.to/ashleemboyer/build-a-react-firebase-blog-site-part-1-4gn0>

*è¿™ç¯‡æ–‡ç« æœ€åˆå‘è¡¨äº[æˆ‘çš„ä¸ªäººåšå®¢ç½‘ç«™](https://ashleemboyer.com/react-firebase-blog-01)ã€‚*

æ¬¢è¿å…‰ä¸´ï¼è¿™æ˜¯æ•™ä½ å¦‚ä½•ä½¿ç”¨ React å’Œ Firebase å»ºç«‹åšå®¢ç½‘ç«™çš„ç³»åˆ—æ–‡ç« ä¸­çš„ç¬¬ä¸€ç¯‡ã€‚è¿™ä¸€ä¸ªå¯èƒ½æ˜¯æœ€é•¿çš„ï¼Œå› ä¸ºå‡ ä¹æ²¡æœ‰ä»€ä¹ˆäº‹æƒ…è¦åšæ¥è®¾ç½®ä¸€åˆ‡ã€‚

åœ¨è¿™ç¯‡æ–‡ç« çš„æœ€åï¼Œä½ å°†å­¦ä¼šå¦‚ä½•å°†ä½ çš„åº”ç”¨ç¨‹åºè¿æ¥åˆ° Firebaseï¼Œå¹¶ä» Firebase çš„å®æ—¶æ•°æ®åº“ä¸­æå–ä¸€äº›æ•°æ®ã€‚ä¸‹ä¸€æ¬¡ï¼Œæˆ‘ä»¬å°†å¼€å§‹ç”¨â€œåˆ›å»º Postâ€ç‰¹æ€§æ¥è®¾ç½®æˆ‘ä»¬çš„ CRUD å‡½æ•°ã€‚åœ¨é‚£ä¹‹åï¼Œæˆ‘ä»¬å°†çœ‹çœ‹æˆ‘ä»¬èƒ½åšäº›ä»€ä¹ˆæ¥åœ¨å‰ç«¯åˆ›å»ºä¸€ä¸ªæ¥å£ï¼Œä½¿å¾—è°ƒç”¨æˆ‘ä»¬çš„ CRUD å‡½æ•°å’Œåˆ›å»ºæ›´æœ‰è¶£çš„å‡½æ•°å˜å¾—å®¹æ˜“ã€‚

å‡†å¤‡å¥½å¼€å§‹äº†å—ï¼Ÿ:)

## ç›®å½•

1.  æ³¨å†Œ Firebase
2.  åˆ›å»ºé¡¹ç›®
3.  å…‹éš†å¯åŠ¨ä»£ç 
4.  å°† Firebase è¿æ¥åˆ°åº”ç”¨ç¨‹åº
5.  å‘æ•°æ®åº“æ·»åŠ æ•°æ®
6.  ä»æ•°æ®åº“ä¸­è¯»å–
7.  åŒ…æ‰

* * *

## 1ã€‚æ³¨å†Œ Firebase

è¿™ä¸ªå¾ˆç®€å•ï¼å‰å¾€ [Firebase çš„ç½‘ç«™](https://firebase.google.com/)ï¼Œç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®ã€‚é¡µé¢çœ‹èµ·æ¥åƒè¿™æ ·:

[![Firebase's home page with a "Get started" button.](img/41fe112aeff41e4eab445df4cbbe8f81.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--zs_18Sy1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://firebasestorage.googleapis.com/v0/b/ashleemboyer-2018.appspot.com/o/images%252Freact-firebase-blog%252Fpart-01%252Ffirebase-home.png%3Falt%3Dmedia%26token%3D44402b1f-339f-4343-817d-952bc6c3bbe4)

å¦‚æœæ‚¨å°šæœªç™»å½•ï¼Œç³»ç»Ÿä¼šæç¤ºæ‚¨é€‰æ‹©ä¸€ä¸ª Google å¸æˆ·ã€‚ç™»å½•åï¼Œæ‚¨å¯ä»¥åˆ›å»ºé¡¹ç›®ã€‚å¦‚æœæ‚¨æ˜¯ Firebase çš„æ–°æ‰‹ï¼Œè¿™ä¸ªé¡µé¢çœ‹èµ·æ¥ä¼šæ˜¯è¿™æ ·çš„:

[![The Firebase console where a project can be created.](img/1e24966efde47712330141fde4257d12.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Bc4OfShE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://firebasestorage.googleapis.com/v0/b/ashleemboyer-2018.appspot.com/o/images%252Freact-firebase-blog%252Fpart-01%252Ffirebase-welcome.png%3Falt%3Dmedia%26token%3D8433b1fc-49ff-42a3-8bb1-21e52cb966be)

## 2ã€‚åˆ›å»ºé¡¹ç›®

å•å‡»â€œåˆ›å»ºé¡¹ç›®â€æŒ‰é’®å¼€å§‹ä¸‰æ­¥æµç¨‹ã€‚é¦–å…ˆï¼Œç³»ç»Ÿä¼šæç¤ºæ‚¨è¾“å…¥é¡¹ç›®åç§°ã€‚æˆ‘å°†æˆ‘çš„é¡¹ç›®å‘½åä¸º`react-firebase-blog`ã€‚å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥æ”¹å˜ä½ çš„é¡¹ç›® IDï¼Œä½†æ˜¯ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„ä¹Ÿå¯ä»¥ã€‚

[![Step 1 of the process.](img/c9d704c10bf61905ff682e215ade6aee.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--rVjWYkXE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://firebasestorage.googleapis.com/v0/b/ashleemboyer-2018.appspot.com/o/images%252Freact-firebase-blog%252Fpart-01%252Fcreate-project-01.png%3Falt%3Dmedia%26token%3Dc238d4b6-3580-4f3d-9a92-4651cd01662d)

ç¬¬ 2 æ­¥è¯¢é—®æˆ‘ä»¬æ˜¯å¦è¦ä¸ºè¯¥é¡¹ç›®è®¾ç½®è°·æ­Œåˆ†æã€‚æˆ‘é€‰æ‹©äº†â€œç°åœ¨ä¸è¡Œâ€ã€‚å¦‚æœæ‚¨é€‰æ‹©æ­¤é€‰é¡¹ï¼Œæµç¨‹å°†åœ¨æ­¤ç»“æŸã€‚å¦åˆ™ï¼Œè¿˜æœ‰å¦ä¸€ä¸ªæ­¥éª¤

[![Step 2 of the process.](img/643c9d2818eab280142a096777c3f2f0.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--gO7lfyyA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://firebasestorage.googleapis.com/v0/b/ashleemboyer-2018.appspot.com/o/images%252Freact-firebase-blog%252Fpart-01%252Fcreate-project-02.png%3Falt%3Dmedia%26token%3Dfb748ae2-44fb-4626-ada7-f2b31e73a510)

ç‚¹å‡»â€œåˆ›å»ºé¡¹ç›®â€ï¼Œä½ ä¼šè¢«å¸¦åˆ°ä¸€ä¸ªåŠ è½½å±å¹•ã€‚å½“å®ƒè¯´ï¼Œâ€œä½ çš„æ–°é¡¹ç›®å‡†å¤‡å¥½äº†ï¼Œâ€ç‚¹å‡»â€œç»§ç»­â€æŒ‰é’®ã€‚

[![](img/85685816d60cb4729d22fadeae2f5064.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--VYlfxMZF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://firebasestorage.googleapis.com/v0/b/ashleemboyer-2018.appspot.com/o/images%252Freact-firebase-blog%252Fpart-01%252Fcreate-project-ready.png%3Falt%3Dmedia%26token%3D3f419470-28e2-4a07-8b36-92b32f8a5b3a)

## 3ã€‚å…‹éš†å¯åŠ¨ä»£ç 

æ‚¨å¯ä»¥é€šè¿‡åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å…‹éš†å¯åŠ¨ä»£ç :

```
git clone https://github.com/ashleemboyer/react-firebase-blog-starter.git 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬æœ‰ä»€ä¹ˆï¼è¿›å…¥`react-firebase-blog-starter`ç›®å½•ï¼Œè¿è¡Œ`npm install`ï¼Œç„¶åè¿è¡Œ`npm run start`ï¼Œè®©é¡¹ç›®å¼€å§‹è¿è¡Œã€‚ä»¥ä¸‹æ˜¯æ‚¨åº”è¯¥çœ‹åˆ°çš„å†…å®¹:

[![](img/6e4b7ccbfc6063b3a716930146933a2a.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--LOz0a96J--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://firebasestorage.googleapis.com/v0/b/ashleemboyer-2018.appspot.com/o/images%252Freact-firebase-blog%252Fpart-01%252Fstarter-site.png%3Falt%3Dmedia%26token%3Da0e21d1e-a951-4871-a98f-a9c42f588697)

ä¸‡å²ï¼ç»§ç»­æ¢ç´¢è¿™ä¸ªé¡¹ç›®ã€‚æˆ‘å°†é‡ç‚¹ä»‹ç»å‡ ä¸ªé¢†åŸŸä¾›æ‚¨å¼€å§‹ã€‚

### `src/App.js`

æˆ‘ä»¬æœ‰ 4 ä¸ª`Routes`:ä¸»é¡µã€404 å’Œå¦ä¸€ä¸ªç”¨äºå¤„ç†åšå®¢æ–‡ç« çš„ slugs(åˆå URL)ã€‚æ‚¨å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆæ²¡æœ‰ä¸€ç§æ–¹æ³•æ¥å¤„ç†ä¸åŒ¹é…çš„è·¯å¾„ã€‚æ¥å¾—å¥½ï¼æˆ‘ä»¬å®é™…ä¸Šåœ¨`Post`ç»„ä»¶(`src/pages/post.js`)ä¸­å¤„ç†å®ƒã€‚è®©æˆ‘ä»¬ç»§ç»­çœ‹é‚£ä¸€ä¸ªã€‚

### `src/pages/post.js`

å› ä¸ºæˆ‘ä»¬åœ¨`src/App.js`(æ¥è‡ª`react-router-dom`)ä¸­ä½¿ç”¨è·¯ç”±å™¨ï¼Œæˆ‘ä»¬åœ¨`Route`å…ƒç´ ä¸­å‘½åçš„ç»„ä»¶å°†æœ‰ä¸€ä¸ª [`match`](https://reacttraining.com/react-router/web/api/match) ä¼ é€’åˆ°å®ƒä»¬çš„é“å…·ä¸­ã€‚æˆ‘ä»¬å¯ä»¥ä»å¸¦æœ‰`match.params.slug`çš„ URL æ ä¸­è·å–å¸–å­çš„ slugï¼Œç„¶åå°†å…¶ä¸æˆ‘ä»¬åœ¨ç½‘ç«™ä¸Šæ”¯æŒçš„ slug åˆ—è¡¨è¿›è¡Œæ¯”è¾ƒã€‚ç°åœ¨è¿™äº›éƒ½è¢«ç¡¬ç¼–ç åˆ°ä¸€ä¸ª`postSlugs`å˜é‡ä¸­ã€‚å¦‚æœ slug ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬è¿”å›ä¸€ä¸ª`Redirect`åˆ°æˆ‘ä»¬çš„ 404 é¡µé¢ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬å°†æ˜¾ç¤ºæ­£ç¡®çš„å¸–å­ã€‚

### `src/pages/home.js`

é¦–å…ˆï¼Œæ‚¨å°†è°ƒç”¨`blogPosts`å˜é‡ã€‚æˆ‘ä»¬æ­£åœ¨å¯¹æˆ‘ä»¬çš„å¸–å­è¿›è¡Œç¡¬ç¼–ç ï¼Œç›´åˆ°æˆ‘ä»¬å°†åº”ç”¨ç¨‹åºè¿æ¥åˆ° Firebaseã€‚è¿™ä¸ªé¡µé¢æ‰€åšçš„å°±æ˜¯åœ¨`blogPosts`æ•°ç»„ä¸­ä¸ºæ¯ç¯‡åšå®¢æ–‡ç« è¿”å›ä¸€ä¸ª`section`å…ƒç´ ã€‚åœ¨è¿™ä¸ªç³»åˆ—ä¸­ï¼Œæ‚¨ä¸éœ€è¦åœ¨`return`è¯­å¥ä¹‹ååšä»»ä½•ä¿®æ”¹ã€‚

## 4ã€‚å°† Firebase è¿æ¥åˆ°åº”ç”¨ç¨‹åº

é¦–å…ˆï¼Œé€šè¿‡è¿è¡Œé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„`npm install firebase`æ¥å®‰è£… [`firebase`](https://www.npmjs.com/package/firebase) åŒ…ã€‚

ç°åœ¨ï¼Œåœ¨é¡¹ç›®çš„`src`ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª JavaScript æ–‡ä»¶ï¼Œå¹¶å°†å…¶å‘½åä¸º`firebase.js`ã€‚è¿™æ˜¯æˆ‘ä»¬å®šä¹‰ Firebase é…ç½®å’Œåˆå§‹åŒ– Firebase å¯¹è±¡çš„åœ°æ–¹ã€‚

åœ¨æˆ‘ä»¬å‘è¿™ä¸ªæ–‡ä»¶æ·»åŠ ä¸€äº›ä»£ç ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆè·å– Firebase é¡¹ç›®æ‰€éœ€çš„é…ç½®æ•°æ®ã€‚é€šè¿‡ç‚¹å‡»å·¦ä¾§å·¥å…·æ¡ä¸­çš„è®¾ç½®é½¿è½®å¹¶ä»èœå•ä¸­é€‰æ‹©â€œé¡¹ç›®è®¾ç½®â€,è¿›å…¥ Firebase é¡¹ç›®è®¾ç½®ã€‚å‘ä¸‹æ»šåŠ¨åˆ°é¡µé¢çš„â€œæ‚¨çš„åº”ç”¨â€éƒ¨åˆ†ã€‚å¤§æ¦‚åœ¨åº•éƒ¨ã€‚å®ƒåº”è¯¥è¯´ï¼Œâ€œä½ çš„é¡¹ç›®ä¸­æ²¡æœ‰åº”ç”¨ç¨‹åºã€‚â€

[![Screenshot of the 'Your apps' section of the project settings.](img/e481b80e6da61905c9d74316bf5f0add.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--2B1buRM---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://firebasestorage.googleapis.com/v0/b/ashleemboyer-2018.appspot.com/o/images%252Freact-firebase-blog%252Fpart-01%252Fproject-settings.png%3Falt%3Dmedia%26token%3D63cb601f-0eb7-49eb-a7c9-dbb5f6bf53ac)

ç‚¹å‡»ç±»ä¼¼`</>`çš„åœ†åœˆï¼Œå°† Firebase æ·»åŠ åˆ° web åº”ç”¨ç¨‹åºä¸­ã€‚ç³»ç»Ÿä¼šæç¤ºæ‚¨è¾“å…¥åº”ç”¨ç¨‹åºçš„æ˜µç§°ã€‚æˆ‘å«æˆ‘çš„`React Firebase Blog`ã€‚

[![Screenshot of the prompt for the app's nickname.](img/a33e076c5a8868a024628ba63af86fd3.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--d9DtK04p--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://firebasestorage.googleapis.com/v0/b/ashleemboyer-2018.appspot.com/o/images%252Freact-firebase-blog%252Fpart-01%252Fapp-nickname.png%3Falt%3Dmedia%26token%3D513f98b4-37ef-42aa-b45f-f793e5e37c6c)

ç‚¹å‡»â€œRegister appâ€æŒ‰é’®ï¼Œé¡µé¢åŠ è½½å®Œæˆåï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸€äº› HTML ä»£ç ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªåä¸º`firebaseConfig`çš„å˜é‡ã€‚ä»è¯¥å˜é‡ä¸­å¤åˆ¶ JSON å±æ€§ï¼Œå¹¶ä¿å­˜åœ¨æˆ‘ä»¬çš„`firebase.json`æ–‡ä»¶ä¸­ã€‚å•å‡»â€œç»§ç»­åˆ°æ§åˆ¶å°â€æŒ‰é’®è¿”å›åˆ°æ‚¨çš„é¡¹ç›®è®¾ç½®ã€‚å¦‚æœæ‚¨ä¸¢å¤±äº†ä¹‹å‰å¤åˆ¶çš„ JSON å±æ€§ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®ƒä»¬ï¼Œåœ¨â€œæ‚¨çš„åº”ç”¨ç¨‹åºâ€éƒ¨åˆ†ï¼Œç°åœ¨å·²ç»åˆ—å‡ºäº†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚

è®©æˆ‘ä»¬å›åˆ°æˆ‘ä»¬çš„`firebase.js`ã€‚å‡†å¤‡å¥½æ‚¨çš„é…ç½®æ•°æ®ï¼Œå¹¶å°†å…¶æ’å…¥ä»¥ä¸‹ä»£ç :

```
import firebase from "firebase/app";
import database from "firebase/database";

const config = {
  apiKey: "<YOUR-API-KEY>",
  authDomain: "<YOUR-AUTH-DOMAIN>",
  databaseURL: "<YOUR-DATABASE-URL>",
  projectId: "<YOUR-PROJECT-ID>",
  storageBucket: "<YOUR-STORAGE-BUCKET>",
  messagingSenderId: "<YOUR-MESSAGE-SENDER-ID>",
  appId: "<YOUR-APP-ID>",
};

let firebaseCache;

export const getFirebase = () => {
  if (firebaseCache) {
    return firebaseCache;
  }

  firebase.initializeApp(config);
  firebaseCache = firebase;
  return firebase;
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`getFirebase()`å‡½æ•°å°†ç¡®ä¿æˆ‘ä»¬åªè°ƒç”¨`initializeApp`ä¸€æ¬¡ã€‚

## 5ã€‚å‘æ•°æ®åº“æ·»åŠ æ•°æ®

æˆ‘ä»¬ä¸èƒ½ä»æˆ‘ä»¬çš„æ•°æ®åº“ä¸­è¯»å–ä»»ä½•æ•°æ®ï¼Œç›´åˆ°æˆ‘ä»¬å®é™…æ·»åŠ åˆ°å®ƒï¼å›åˆ°ä½ çš„ Firebase é¡¹ç›®ï¼Œç‚¹å‡»ä¾§è¾¹æ â€œå¼€å‘â€æ ‡é¢˜ä¸‹çš„â€œæ•°æ®åº“â€é€‰é¡¹ã€‚ä½ å¿…é¡»å‘ä¸‹æ»šåŠ¨é¡µé¢ä¸€ç‚¹ï¼Œç›´åˆ°ä½ æ‰¾åˆ°â€œå®æ—¶æ•°æ®åº“â€éƒ¨åˆ†ã€‚

[![Screenshot of the Realtime Database section.](img/49b984e1407f3736400557097a09d880.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Y9N3yvAG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://firebasestorage.googleapis.com/v0/b/ashleemboyer-2018.appspot.com/o/images%252Freact-firebase-blog%252Fpart-01%252Frealtime-database.png%3Falt%3Dmedia%26token%3D2bc78aa3-e902-46fd-a775-95042cd5cc0e)

å•å‡»æ­¤éƒ¨åˆ†ä¸­çš„â€œåˆ›å»ºæ•°æ®åº“â€æŒ‰é’®ã€‚æ‚¨å°†çœ‹åˆ°ä¸€ä¸ªæ¨¡å¼å‡ºç°ï¼Œè¯¢é—®æ‚¨æ•°æ®åº“çš„å®‰å…¨è§„åˆ™ã€‚

[![The 'security rules' modal.](img/79dde7fd74352b2b20d8336662692e23.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--PK63MAZd--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://firebasestorage.googleapis.com/v0/b/ashleemboyer-2018.appspot.com/o/images%252Freact-firebase-blog%252Fpart-01%252Fsecurity-rules.png%3Falt%3Dmedia%26token%3Dfbd9e6fc-63ac-41d3-b8c9-779a9224c598)

é€‰æ‹©â€œåœ¨**æµ‹è¯•æ¨¡å¼**ä¸‹å¯åŠ¨â€å¹¶ç‚¹å‡»â€œå¯ç”¨â€æŒ‰é’®ã€‚ä½ çš„æ•°æ®åº“å°†æ˜¯ç©ºçš„ï¼Œè¯»èµ·æ¥åƒ:

```
<YOUR-PROJECT-ID>: null 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœæ‚¨è¿˜ä¸çŸ¥é“ï¼Œå®æ—¶æ•°æ®åº“åªæ˜¯ä¸€ä¸ª JSON å¯¹è±¡ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œé˜…è¯»æ›´å¤šå…³äºé‚£ä¸ª[çš„å†…å®¹ã€‚](https://firebase.google.com/docs/database)

æœ€å¿«çš„å…¥é—¨æ–¹æ³•æ˜¯ä½¿ç”¨ JSON æ–‡ä»¶å¯¼å…¥æ•°æ®ã€‚æˆ‘ä¹Ÿä¸ºä½ æä¾›è¿™ä¸ªï¼Œä»¥é˜²ä½ æ­£åœ¨å¯†åˆ‡å…³æ³¨ï¼Œå¹¶å¸Œæœ›æœ‰å’Œæˆ‘è¿™é‡Œä¸€æ ·çš„ä¸œè¥¿å±•ç¤ºã€‚æ‚¨å¯ä»¥åœ¨èµ·å§‹é¡¹ç›®çš„æ ¹ç›®å½•ä¸­æ‰¾åˆ°è¯¥æ–‡ä»¶ã€‚ç‚¹å‡»ä¸‰ç‚¹èœå•å¹¶é€‰æ‹©â€œå¯¼å…¥ JSONâ€æ¥ä¸Šä¼ æ–‡ä»¶ã€‚æµè§ˆæ‚¨çš„æ–‡ä»¶ï¼Œç„¶åå•å‡»â€œå¯¼å…¥â€æŒ‰é’®ã€‚

ç°åœ¨æ‚¨åº”è¯¥æœ‰ä¸€äº›å¯ä»¥æ‰©å±•å’Œæ¢ç´¢çš„æ•°æ®å±æ€§äº†ï¼

[![The data imported into the Realtime Database.](img/d7f02033dd86b77ed53250bf7c278853.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--WhXqSPyp--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://firebasestorage.googleapis.com/v0/b/ashleemboyer-2018.appspot.com/o/images%252Freact-firebase-blog%252Fpart-01%252Fdata.png%3Falt%3Dmedia%26token%3D70461f67-df46-41b4-b15a-c53fc343d3b4)

## 6ã€‚ä»æ•°æ®åº“ä¸­è¯»å–

ç»ˆäºï¼æˆ‘ä»¬æœŸå¾…å·²ä¹…çš„æ—¶åˆ»ã€‚è®©æˆ‘ä»¬å»`src/home.js`çœ‹çœ‹æˆ‘ä»¬æ˜¯å¦èƒ½ä»æ•°æ®åº“ä¸­å¾—åˆ°ä¸€äº›ä¸œè¥¿ï¼

é¦–å…ˆï¼Œåœ¨æ–‡ä»¶çš„é¡¶éƒ¨æ·»åŠ ä¸€äº›å¯¼å…¥:

```
// You only need to add the `{ useState }` portion here.
import React, { useState } from "react";

// This is new.
import { getFirebase } from "../firebase"; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œè®©æˆ‘ä»¬è®©`blogPosts`è¿›å…¥ä¸€ç§çŠ¶æ€ï¼Œå¹¶å°è¯•ä»æ•°æ®åº“ä¸­è¯»å–å®ƒä»¬ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œé˜…è¯»æ›´å¤šå…³äº`useState`é’©ä½[çš„å†…å®¹ã€‚æˆ‘ä»¬è¿˜å°†æ·»åŠ ä¸€ä¸ª`loading`å·ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åšä¸¤ä»¶äº‹:](https://reactjs.org/docs/hooks-state.html)

1.  ç¡®ä¿æˆ‘ä»¬åªè°ƒç”¨`getFirebase`ä¸€æ¬¡
2.  å½“æˆ‘ä»¬ç­‰å¾…æ•°æ®æ—¶ï¼Œå‘ç”¨æˆ·æ˜¾ç¤ºåŠ è½½å±å¹•

ç”¨ä»¥ä¸‹ä»£ç æ›¿æ¢`blogPosts`å¸¸é‡:

```
const [loading, setLoading] = useState(true);
const [blogPosts, setBlogPosts] = useState([]);

if (loading && !blogPosts.length) {
  getFirebase()
    .database()
    .ref("/posts")
    .orderByChild("date")
    .once("value")
    .then(snapshot => {
      let posts = [];
      const snapshotVal = snapshot.val();
      for (let slug in snapshotVal) {
        posts.push(snapshotVal[slug]);
      }

      const newestFirst = posts.reverse();
      setBlogPosts(newestFirst);
      setLoading(false);
    });
}

if (loading) {
  return <h1>Loading...</h1>; } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

Tadaï¼ä½ åº”è¯¥çœ‹çœ‹æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„ä¸€æ ·çš„ä¸œè¥¿ã€‚ğŸ‰

## 7ã€‚åŒ…æ‰

è¿™é‡Œæœ‰å¾ˆå¤šä¸œè¥¿ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–æ‹…å¿ƒï¼Œè¯·[ç»™æˆ‘å‘ç”µå­é‚®ä»¶](//mailto:hello@ashleemboyer.com)æˆ–[åœ¨ Twitter ä¸Šç»™æˆ‘å‘æ¶ˆæ¯](https://twitter.com/ashleemboyer)ï¼å¦‚æœä½ æ„Ÿåˆ°å›°éš¾æˆ–ä¸çŸ¥æ‰€æªï¼Œæˆ‘ä¼šå°½åŠ›å¸®åŠ©ä½ ã€‚è¯·ç»§ç»­å…³æ³¨æ˜å¤©çš„å¸–å­ï¼Œåœ¨é‚£é‡Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•ä¸ºæˆ‘ä»¬æ–°çš„ã€åˆ«è‡´çš„åšå®¢ç½‘ç«™ç¼–å†™ CRUD å‡½æ•°ï¼å¦‚æœä½ è§‰å¾—å¥‡æ€ªï¼Œæƒ³åœ¨é‚£ä¹‹å‰å°è¯•ä¸€ä¸‹ï¼Œæˆ‘é¼“åŠ±ä½ çœ‹çœ‹ [Firebase æ–‡æ¡£](https://firebase.google.com/docs/database/web/start)ã€‚

* * *

ä½ çŸ¥é“æˆ‘æœ‰æ—¶äº‹é€šè®¯å—ï¼ŸğŸ“¬

å¦‚æœä½ æƒ³åœ¨æˆ‘å‘å¸ƒæ–°çš„åšå®¢å¸–å­æˆ–å®£å¸ƒé‡å¤§é¡¹ç›®æ—¶å¾—åˆ°é€šçŸ¥ï¼Œè¯·è”ç³» https://ashleemboyer.com/newsletterã€‚