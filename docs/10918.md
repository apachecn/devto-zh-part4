# åœ¨ JavaScript ä¸­ä½¿ç”¨ Array.flat()å±•å¹³æ•°ç»„

> åŸæ–‡:[https://dev . to/Samantha Ming/flatten-array-using-array-flat-in-JavaScript-1 IEG](https://dev.to/samanthaming/flatten-array-using-array-flat-in-javascript-1ieg)

[![CodeTidbit by SamanthaMing.com](../Images/4b271fe6bb8efacf5e7384b0068dcb19.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--y1GIj3gF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/pgj0iqvm5nuuksuok6i8.png)

åœ¨#JavaScript ä¸­å±•å¹³æ•°ç»„æ€»æ˜¯å¾ˆå¤æ‚ã€‚ä¸å†æ˜¯äº†ï¼ES2019 å¼•å…¥äº†ä¸€ç§å±•å¹³é˜µåˆ—çš„æ–°æ–¹æ³•ã€‚è¿˜æœ‰ä¸€ä¸ªâ€œæ·±åº¦â€å‚æ•°ï¼Œæ‰€ä»¥ä½ å¯ä»¥ä¼ é€’ä»»ä½•å±‚æ¬¡çš„åµŒå¥—ã€‚ä»¤äººæƒŠå¼‚çš„ğŸ¤©

```
const nested = [ ['ğŸ“¦', 'ğŸ“¦'], ['ğŸ“¦']];

const flattened = nested.flat();

console.log(flattened);
// ['ğŸ“¦', 'ğŸ“¦', 'ğŸ“¦'] 
```

## [](#setting-raw-depth-endraw-parameter)è®¾ç½®`depth`å‚æ•°

ä¸‹é¢æ˜¯è¿™ä¸ªæ–¹æ³•çš„è¯­æ³•:

```
array.flat(<depth>); 
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`flat()`åªä¼šå±•å¹³ä¸€å±‚æ·±åº¦ã€‚æ¢å¥è¯è¯´ï¼Œ`depth`å°±æ˜¯`1`ã€‚

```
array.flat();

// Same as

array.flat(1); 
```

## [](#deeper-nested-arrays)æ›´æ·±å±‚æ¬¡çš„åµŒå¥—æ•°ç»„

æœ€æ£’çš„æ˜¯ï¼Œè¿™ç§æ–¹æ³•ä¹Ÿé€‚ç”¨äº 1 çº§ä»¥ä¸Šçš„æ·±åº¦ã€‚æ‚¨åªéœ€è®¾ç½®é€‚å½“çš„`depth`å‚æ•°æ¥å±•å¹³æ›´æ·±çš„åµŒå¥—æ•°ç»„ã€‚

```
const twoLevelsDeep = [[1, [2, 2], 1]];

// depth = 1
twoLevelsDeep.flat()
// [1, [2, 2], 1]

// depth = 2
twoLevelsDeep.flat(2)
// [1, 2, 2, 1] 
```

## [](#infinitely-nested-arrays)æ— é™åµŒå¥—çš„æ•°ç»„

æ¯”æ–¹è¯´ï¼Œä½ æƒ³æ— é™æ·±å…¥ã€‚æ²¡é—®é¢˜ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½åšåˆ°ã€‚åˆšè¿‡`Infinity`ã€‚

```
const veryDeep = [[1, [2, 2, [3,[4,[5,[6]]]]], 1]];

veryDeep.flat(Infinity);
// [1, 2, 2, 3, 4, 5, 6, 1] 
```

## [](#array-with-empty-slots)ç©ºæ§½é˜µåˆ—

`flat()`å¯ä»¥åšçš„å¦ä¸€ä»¶å¾ˆé…·çš„äº‹æƒ…æ˜¯ç§»é™¤æ•°ç»„ä¸­çš„ç©ºæ§½ã€‚

```
const missingNumbers = [1, ,3, ,5];

missingNumbers.flat();
// [1, 3, 5]; 
```

## [](#browser-support)æµè§ˆå™¨æ”¯æŒ

`flat`æ˜¯ ES2019 ä¸­å¼•å…¥çš„è¶…çº§æ–°åŠŸèƒ½ï¼Œæ‰€ä»¥å¿˜è®° Internet Explorer æˆ– Edge å§ã€‚ä½†è¿™å¹¶ä¸å¥‡æ€ªğŸ˜…

[æµè§ˆå™¨æ”¯æŒ:å¹³é¢](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat#Browser_compatibility)

## [](#alternative-solution)å¤‡é€‰æ–¹æ¡ˆ

æ—¢ç„¶æ”¯æŒåŠ›åº¦ä¸å¤§ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æ›¿ä»£è§£å†³æ–¹æ¡ˆã€‚

### [](#es6-solution)ES6 è§£å†³æ–¹æ¡ˆ

è¿™é‡Œæœ‰ä¸€ä¸ª ES6 è§£å†³æ–¹æ¡ˆã€‚è¿™åªå¯¹ä¸€çº§åµŒå¥—æ•°ç»„æœ‰æ•ˆã€‚

```
const oneLevelDeep = [ [1, 2], [3]];

const flattened = [].concat(...oneLevelDeep);
// [1, 2, 3,] 
```

### [](#older-browser-solution)æ—§ç‰ˆæµè§ˆå™¨è§£å†³æ–¹æ¡ˆ

è¿™é‡Œæœ‰ä¸€ä¸ªæ˜¯ç»™è€æµè§ˆå™¨å’Œ ES6 ä¹‹å‰çš„ã€‚åŒæ ·ï¼Œè¿™åªé€‚ç”¨äºä¸€çº§åµŒå¥—æ•°ç»„ã€‚

```
const oneLevelDeep = [ [1, 2], [3]];

const flattened = [].concat.apply([], oneLevelDeep);
// [1, 2, 3,] 
```

### [](#recursion)é€’å½’

å¯¹äºåµŒå¥—æ›´æ·±çš„æ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨é€’å½’ã€‚ä¸‹é¢æ˜¯æ¥è‡ª [MDN ç½‘ç»œæ–‡æ¡£](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat#Alternative) :
çš„è§£å†³æ–¹æ¡ˆ

```
var arr1 = [1,2,3,[1,2,3,4, [2,3,4]]];

function flattenDeep(arr1) {
   return arr1.reduce((acc, val) => Array.isArray(val) ? acc.concat(flattenDeep(val)) : acc.concat(val), []);
}
flattenDeep(arr1);// [1, 2, 3, 1, 2, 3, 4, 2, 3, 4] 
```

## [](#community-input)ç¤¾åŒºè¾“å…¥

ğŸ’¬Array.flat()æœ‰ä»€ä¹ˆæœ‰è¶£çš„ç”¨ä¾‹å—ï¼Ÿ

*   *[@ hocine _ Abdel Latif](https://www.instagram.com/hocine_abdellatif/):*æœ‰ç‚¹è¿œçš„ç”¨ä¾‹ä½†å¯èƒ½å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨æœºå™¨å­¦ä¹ ä¸­å¦‚æœä½ æœ‰ä¸€ä¸ªä¸–ä»£æ•°ç»„ï¼Œæ¯ä¸ªä¸–ä»£éƒ½æ˜¯ä¸€ä¸ªå­¦ç”Ÿæ•°ç»„ï¼Œå¦‚æœä½ æƒ³è®©æ¯ä¸ªä¸–ä»£çš„æ¯ä¸ªå­¦ç”Ÿï¼Œè¿™ä¸ªæ–¹æ³•ä¼šéå¸¸å®ç”¨ã€‚

*   *[@devjacks](https://twitter.com/devjacks/status/1155273208595021825?s=20) :* å‡ å‘¨å‰æˆ‘ç”¨è¿™æ ·çš„é—®é¢˜å†™äº†ä¸€ä¸ªä»£ç æµ‹è¯•ã€‚è¿™ä¼šè®©æˆ‘çš„ç”Ÿæ´»å˜å¾—å®¹æ˜“å¾—å¤šï¼ğŸ˜‚

```
// Please write a function to search for 213

function search(needle, haystack) {}

const haystack =[1, 4, [5,6,7, [8, 18, [34,177,[98,[210,[213]]]]]]];
const needle = 213; 
```

## [](#resources)èµ„æº

*   [MDN ç½‘ç»œæ–‡æ¡£:](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)
*   [é³„é±¼:ç”¨ flat å’Œ flatMap åœ¨æ™®é€š JavaScript ä¸­å±•å¹³æ•°ç»„](https://alligator.io/js/flat-flatmap/)
*   [ç”¨ JavaScript å±•å¹³æ•°ç»„çš„æ•°ç»„](http://joelabrahamsson.com/flatten-array-of-arrays-with-javascript/)
*   [å †æ ˆæº¢å‡º:åˆå¹¶/å±•å¹³æ•°ç»„çš„æ•°ç»„](https://stackoverflow.com/questions/10865025/merge-flatten-an-array-of-arrays)
*   [åœ¨ JavaScript ä¸­å±•å¹³å¤šç»´æ•°ç»„](https://www.jstips.co/en/javascript/flattening-multidimensional-arrays-in-javascript/)
*   [ç”¨ flat å’Œ flatMap åœ¨ JavaScript ä¸­å±•å¹³æ•°ç»„](https://davidtang.io/2019/03/09/flattening-arrays-in-javascript-with-flat-and-flatMap.html)

* * *

**æ„Ÿè°¢é˜…è¯»â¤**
é—®å¥½ï¼[insta gram](https://www.instagram.com/samanthaming/)|[Twitter](https://twitter.com/samantha_ming)|[è„¸ä¹¦](https://www.facebook.com/hisamanthaming) | [åšå®¢](https://www.samanthaming.com/blog)|[SamanthaMing.com](https://www.samanthaming.com/)