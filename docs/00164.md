# å¦‚ä½•ä½¿ç”¨ refs åœ¨ FlatList ä¸Šè®¾ç½®å›žè°ƒï¼Ÿ

> åŽŸæ–‡ï¼š<https://dev.to/technoplato/how-can-i-use-refs-to-set-callbacks-on-a-flatlist-3fcj>

[StackOverflow Post](https://stackoverflow.com/questions/58106958/how-can-i-use-refs-to-set-callbacks-on-a-flatlist)

æˆ‘æ­£åœ¨å°è¯•ä½¿ç”¨`refs`æ¥å¼ºåˆ¶è®¾ç½®æˆ‘çš„ FlatList çš„`onEndReached`å±žæ€§ã€‚æœ‰åŠžæ³•åšåˆ°è¿™ä¸€ç‚¹å—ï¼Ÿ

æˆ‘ä¿®æ”¹äº† PR ä¸­çš„ä¸€ä¸ªä¾‹å­ï¼Œå¢žåŠ äº†`setNativeProps`æ¥é—´éš”åœ°å°†é¢œè‰²ä»Žé»‘è‰²åˆ‡æ¢åˆ°ç™½è‰²ï¼Œä½†æ˜¯ä¸èƒ½è®©`onEndReached`æˆ–`onScroll`è¢«è°ƒç”¨ã€‚

æœ‰æ²¡æœ‰äººèƒ½å¸®æˆ‘ç†è§£ä¸€ä¸‹æˆ‘åšé”™äº†ä»€ä¹ˆï¼Ÿ

```
export default class Testing extends React.Component {
  componentDidMount() {
    let tick = 0
    this.list.setNativeProps({
      onEndReached: info => {
        // NEVER CALLED ðŸ˜¢
        console.log('L231 on Scroll info ===', info)
      },

      onScroll: info => {
        // NEVER CALLED ðŸ˜¢
        console.log('L250 info ===', info)
      },

      // Background DOES flash red on load... ðŸ¤” 
      style: { backgroundColor: 'red' }
    })
    setInterval(() => {
      this.list.setNativeProps({
        onEndReached: info => {
          console.log('L231 on Scroll info ===', info)
        },

        // Background DOES toggle black and white... ðŸ¤” 
        style: { backgroundColor: tick++ & 2 ? 'white' : 'black' }
      })
    }, 1000)
  }

  render() {
    return (
      <View style={styles.container}>
        <FlatList
          ref={component => (this.list = component)}
          style={{ backgroundColor: 'black' }}
          data={[{ key: 'a' }, { key: 'b' }]}
          renderItem={({ item }) => <Text>{item.key}</Text>}
        />
      </View>
    )
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>