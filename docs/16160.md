# è®¾ç½® Jest+React-Testing-åº“

> åŸæ–‡:[https://dev . to/aromanarguello/getting-started-with-jest-react-testing-library-4nga](https://dev.to/aromanarguello/getting-started-with-jest-react-testing-library-4nga)

åœ¨è¿‡å»çš„å‡ ä¸ªæœˆé‡Œï¼Œæˆ‘éå¸¸é«˜å…´èƒ½å¤Ÿåœ¨ React + Friends ç¯å¢ƒä¸­ä½¿ç”¨æˆ‘æœ€å–œæ¬¢çš„åº“ react-testing-libraryã€‚è¿™ä¸ªå›¾ä¹¦é¦†æ˜¯ä¸€ä»¶è‰ºæœ¯å“ã€‚

æ²¡æœ‰ä¸€ä¸ªåº“æ¯”å®ƒæ›´ç›´è§‚ã€æ›´å®¹æ˜“è®¾ç½®ã€å¯¹åˆå­¦è€…æ›´å‹å¥½ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ç”šè‡³æ˜¯è®©å¼€å‘äººå‘˜è¿›å…¥æ–°é¡¹ç›®çš„å¥½æ–¹æ³•ã€‚é€šè¿‡è¿™ç¯‡æŒ‡å—ï¼Œæˆ‘çš„ç›®çš„æ˜¯åˆ†äº«æˆ‘åœ¨ä¸ºä¸åŒé¡¹ç›®é…ç½®å·¥å…·çš„è¿‡ç¨‹ä¸­å­¦åˆ°çš„ä¸œè¥¿ï¼Œä»¥åŠæˆ‘ä¸ªäººé‡‡ç”¨çš„ä¸€äº›æœ€ä½³å®è·µã€‚æˆ‘ä»¬å°†é€æ­¥ä»‹ç»å¦‚ä½•ä½¿ç”¨ create-react-app è®¾ç½®æ‚¨çš„ç¯å¢ƒï¼Œå¹¶ä»å¤´å¼€å§‹è®¾ç½® react é¡¹ç›®(jest*ã€web-packã€babel ç­‰)ã€‚æœ¬æŒ‡å—ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå¦‚ä½•æµ‹è¯•çš„æŒ‡å—ï¼Œè€Œæ˜¯ä¸€ä¸ªå¦‚ä½•åœ¨ React åº”ç”¨ç¨‹åºä¸­è®¾ç½®æµ‹è¯•ç¯å¢ƒçš„é€æ­¥æ¼”ç»ƒã€‚å¯¹äºå­¦ä¹ å¦‚ä½•ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œæœ‰å¾ˆå¤šæ¯”æˆ‘æ›´æœ‰çŸ¥è¯†çš„äººæä¾›çš„æŒ‡å¯¼æ¥è®¨è®ºè¿™ä¸ªè¯é¢˜ã€‚ç„¶è€Œï¼Œæˆ‘è¦è¯´çš„æ˜¯ï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œå˜å¾—æ›´æ“…é•¿æµ‹è¯•çš„æœ€å¥½æ–¹æ³•æ˜¯å®é™…ç¼–å†™æµ‹è¯•ã€‚æˆ‘çœ‹åˆ°çš„æ²¡æœ‰å†™è¿‡æµ‹è¯•çš„æ–°è€å¼€å‘äººå‘˜æœ€å¤§çš„å›°éš¾ä¹‹ä¸€ï¼Œå°±æ˜¯äº†è§£ Jest çš„è§’è‰²å’Œ react-testing åº“çš„è§’è‰²ä¹‹é—´çš„åŒºåˆ«ã€‚ä»¥æˆ‘è‡ªå·±çš„ç»éªŒï¼Œå­¦ä¹ è¿™ç§åŒºåˆ«çš„æ–¹æ³•æ˜¯é€šè¿‡é‡å¤ï¼Œé™·å…¥å›°å¢ƒï¼Œåšç ”ç©¶ï¼Œåå¤ã€‚

æ¸´æœ›å¬åˆ°æ¥è‡ªç¤¾åŒºçš„åé¦ˆï¼

## [](#index)æŒ‡æ ‡:

*   æˆ‘å­¦åˆ°çš„ç›®å½•æ–‡ä»¶ç»“æ„å’Œæƒ¯ä¾‹
*   Jest + RTL å’Œ create-react-app å…¥é—¨
*   ä»é›¶å¼€å§‹ä½¿ç”¨ Jest + RTL
*   ä½¿ç”¨ Typescript è®¾ç½®
*   ä¾‹å­
*   å¸®åŠ©æ‚¨å¼€å§‹äº†è§£ RTL çš„ç²¾é€‰èµ„æº

## [](#file-structure)æ–‡ä»¶ç»“æ„:

æˆ‘å†™çš„å…³äºå¦‚ä½•æ„å»ºæˆ‘çš„ React åº”ç”¨ç¨‹åº(ä¸ä½¿ç”¨é’©å­)çš„æ–‡ç« :
[https://blog . use journal . com/How-I-structure-my-React-Apps-86e 897054593](https://blog.usejournal.com/how-i-structure-my-react-apps-86e897054593)

æœ€ä½³å®è·µå’Œæƒ¯ä¾‹å·²ç»å­˜åœ¨å¾ˆé•¿æ—¶é—´äº†ï¼Œç”šè‡³åœ¨ react å‡ºç°ä¹‹å‰ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹`__ test __`å¹¶æŠŠä½ çš„æµ‹è¯•æ–‡ä»¶æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚æˆ‘åšäº‹æƒ…æœ‰ç‚¹ä¸åŒï¼Œè¿™ç»å¯¹åªæ˜¯ä¸ªäººå–œå¥½ã€‚å½“æˆ‘ç»§ç»­ä½¿ç”¨ä¸‹é¢çš„ç³»ç»Ÿæ—¶ï¼Œå®ƒæœ‰ç‚¹å¡ä½äº†ï¼Œæˆ‘çš„å›¢é˜Ÿå’Œæˆ‘è‡ªå·±éƒ½éå¸¸å–œæ¬¢å®ƒ(æˆ‘æƒ³ï¼).

## [](#the-typical-file-structure-in-my-projects)æˆ‘çš„é¡¹ç›®ä¸­å…¸å‹çš„æ–‡ä»¶ç»“æ„:

```
- node_modules
- public
- src
  - components
    - MyComponent
      - MyComponent.jsx
      - MyComponent.styles.js
      - MyComponent.test.js      // here is what I do different
    - index.js            // source of truth for component export
  - utils
    - helpers.js
  - pages
  - App.jsx
  - App.test.jsx
  - App.styles.js
  - index.js 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ­£å¦‚æˆ‘åœ¨ä¸Šé¢çš„è¯„è®ºä¸­æŒ‡å‡ºçš„ã€‚è¿™æ˜¯æˆ‘ä¸ªäººæœ€å¤§çš„ä¸€æ¬¡ä¸å¤§ä¼—æƒ¯ä¾‹çš„èƒŒç¦»ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œåœ¨ç»„ä»¶é©±åŠ¨å¼€å‘çš„æ—¶ä»£ï¼Œä¸ºä½ çš„ç»„ä»¶åˆ›å»ºè¿™ç§å°è£…çš„ç¯å¢ƒå¯¹æˆ‘æ¥è¯´æ›´æœ‰æ„ä¹‰(æœ€é‡è¦çš„æ˜¯ä¿æŒä¸€è‡´ï¼Œå¹¶ä½¿ç”¨è®©ä½ èˆ’æœçš„ä¸œè¥¿ğŸ˜).ä¸ºä½ æ‹¥æœ‰çš„æ¯ä¸ªç»„ä»¶æ·»åŠ ä¸€ä¸ª**æµ‹è¯•**æ–‡ä»¶å¤¹ï¼Œè¿™åœ¨ä¸€ä¸ªå¤§çš„ä»£ç åº“ä¸­ï¼Œæœ‰è®¸å¤šç»„ä»¶å’Œç»„ä»¶å˜ä½“ï¼Œçœ‹èµ·æ¥å°±åƒæ˜¯æ²¡æœ‰å¹²çš„äº‹æƒ…ã€‚æ­¤å¤–ï¼Œæˆ‘æ²¡æœ‰å‘ç°æ·»åŠ è¯¥æ–‡ä»¶å¤¹å¯¹ä¸ªäººæœ‰ä»»ä½•å¥½å¤„ã€‚æ­¤å¤–ï¼Œå½“ jest æŠ“å–ä½ çš„æ ¹ç›®å½•å¹¶å¯»æ‰¾è¦è¿è¡Œçš„æ–‡ä»¶æ—¶ï¼Œå®ƒå¹¶ä¸ç‰¹åˆ«å¯»æ‰¾ä¸€ä¸ªæ–‡ä»¶å¤¹(å—¯ï¼Œå–å†³äºä½ çš„ jest çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼)ã€‚

## [](#naming-and-casing-conventions)å‘½åå’Œå¤§å°å†™çº¦å®š:

```
- PascalCase for component file name and folder name
- Generally, I want to indicate if my components are container or component.
  Containers will usually be class components that contain state and logic,
  whereas components will house the actual content, styling and receive props from the container. 
  Example:
  - `MyComponent.container.js`
  - `MyComponent.component.js`
  - `MyComponent.jsx`          // if no container
  - `MyComponent.styles.js`
- lowerCamelCase for Higher Order Component file and folder name
- lowercase for all other root directory folders. For example: `src`, `components`, `assets` 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

* * *

## [](#some-conventions-worth-noting)ä¸€äº›å€¼å¾—æ³¨æ„çš„çº¦å®š

## [](#describe-method)å½¢å®¹æ–¹æ³•:

```
describe('My component', () => {
  // group of test()
}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

Describe æ–¹æ³•æ˜¯ jest æ‰€è°“çš„å…¨å±€æ–¹æ³•ä¹‹ä¸€ï¼Œæ‚¨ä¸å¿…å¯¼å…¥æˆ–è¦æ±‚ä½¿ç”¨å®ƒã€‚describe è¯­å¥å°¤å…¶ç”¨äºå°†ç›¸ä¼¼æµ‹è¯•åˆ†ç»„åœ¨ä¸€èµ·ã€‚

## [](#test-method)æµ‹è¯•æ–¹æ³•

```
test('some useful message', () => {
   // logic
}, timeout) // timeout is optional 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æµ‹è¯•åŠŸèƒ½æ˜¯é¢åŒ…å’Œé»„æ²¹ã€‚è¿™æ˜¯å®é™…è¿è¡Œæµ‹è¯•çš„å‡½æ•°ã€‚æ ¹æ® Jest çš„æ–‡æ¡£ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµ‹è¯•çš„åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ·»åŠ æµ‹è¯•é€»è¾‘(æ–­è¨€ç­‰)çš„å›è°ƒã€‚)ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå³è¶…æ—¶ã€‚

æµ‹è¯•å‡½æ•°è¿˜æœ‰ä¸€ä¸ªåˆ«åï¼Œå¯ä»¥äº’æ¢ä½¿ç”¨å®ƒ():`it('test', () => {})`

* * *

## [](#getting-started-jest-and-rtl-with-cra)ã€Šç©ç¬‘è¯å…¥é—¨ã€‹å’Œ RTL ä¸ CRA:

å®Œå…¨å…¬å¼€ã€‚æˆ‘å–œæ¬¢ä½¿ç”¨ CRA it ä¸ºæ‚¨è®¾ç½®ä¸€åˆ‡ï¼Œå¹¶å‡å°‘éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæ‚¨å°†è·å¾—çš„ä¾èµ–ç‰ˆæœ¬è½åçš„æŠ€æœ¯å¼€é”€ã€‚ä½¿ç”¨ react-scriptsï¼Œæ‚¨å‡ ä¹åªéœ€è¦æ‹…å¿ƒè¿™ä¸€éƒ¨åˆ†ã€‚

`npx create-react-app ProjectName`

`npx create-react-app ProjectName --typescript`

æˆ‘é©¬ä¸Šåšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯å®‰è£…æ‰€éœ€çš„ä¾èµ–é¡¹:

`npm install --save-dev @testing-library/jest-dom`

`npm install --save-dev @testing-library/react`

åœ¨`package.json`æ–‡ä»¶ä¸­ï¼Œæˆ‘æ·»åŠ äº†ä»¥ä¸‹è„šæœ¬:

```
"test": "jest -c jest.config.js --watch" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¿«é€Ÿæç¤º:å½“æˆ‘å¼€å§‹ä¸€ä¸ªæ–°çš„ react é¡¹ç›®æ—¶ï¼Œç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ·»åŠ é‚£äº›ä¾èµ–+ `styled-components`å’Œæˆ‘çš„`types`(å¦‚æœéœ€è¦çš„è¯)ã€‚

æµ‹è¯•åº“æ–‡æ¡£å°† jest-dom å®šä¹‰ä¸º React æµ‹è¯•åº“çš„é…å¥—åº“ï¼Œä¸º jest æä¾›å®šåˆ¶çš„ dom å…ƒç´ åŒ¹é…å™¨ã€‚æœ¬è´¨ä¸Šï¼Œæ˜¯ä¾èµ–å…³ç³»æä¾›äº†åƒ`toHaveStyles`æˆ–`toHaveAttribute`è¿™æ ·çš„è¯­å¥(æˆ–åŒ¹é…å™¨*)ã€‚

ä¾‹å­:
`expect(Component).toBeInTheDocument()`<â€”â€”åŒ¹é…è€…

ä¸€æ—¦ä½ çš„é¡¹ç›®è¢«åˆ›å»ºï¼Œåœ¨æˆ‘çš„ src æ–‡ä»¶å¤¹ä¸­æˆ‘ä¼šæ·»åŠ ä¸€ä¸ªåä¸º`setupTests.js`çš„æ–‡ä»¶ã€‚

```
- src
  - components
  - App.js
  - setupTests.js 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ç¯å¢ƒä¸­å®‰è£…æµ‹è¯•æ¡†æ¶ä¹‹å‰æ‰§è¡Œ`setupFiles`ã€‚å¯¹äºæˆ‘ä»¬çš„ä¾‹å­ï¼Œè¿™å°¤å…¶é‡è¦ï¼Œå› ä¸ºå®ƒå…è®¸æˆ‘ä»¬åœ¨æµ‹è¯•æ‰§è¡Œä¹‹å‰è¿è¡Œæ­£ç¡®çš„å¯¼å…¥ã€‚è¿™ç»™äº†æˆ‘ä»¬å¢åŠ å‡ ä¸ªè¿›å£çš„æœºä¼šã€‚

æ‰€ä»¥åœ¨ä½ çš„ setupTests.js æ–‡ä»¶ä¸­:

```
import '@testing-library/jest-dom/extend-expect' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é‚£ä¸ªæ–‡ä»¶å°±è¿™æ ·äº†:)ã€‚

è¿™å°±æ˜¯ä½ ä½¿ç”¨`jest`å’Œ`react-testing-library`å¼€å§‹è¿è¡Œæ‰€éœ€è¦çš„ä¸€åˆ‡ï¼

* * *

## [](#getting-started-on-jest-and-rtl-with-a-react-app-from-scratch)ä»å¤´å¼€å§‹ä½¿ç”¨ React åº”ç”¨ç¨‹åºä½¿ç”¨ jest å’Œ RTL:

è¿™ä¸€éƒ¨åˆ†ä¼šç¨å¾®é•¿ä¸€ç‚¹ï¼Œå› ä¸ºæœ‰æ›´å¤šçš„å·¥å…·è¦ä»‹ç»å’Œé…ç½®ã€‚åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œæˆ‘ä»¬å°†ä¸€æ­¥ä¸€æ­¥åœ°ä»å¤´å¼€å§‹æ„å»º react åº”ç”¨ç¨‹åºã€‚ç¡®å®æŠ½è±¡äº†å¾ˆå¤šé…ç½®å¤æ‚æ€§ï¼Œè€Œä¸”åšå¾—å¾ˆå¥½ï¼Œç°åœ¨æˆ‘ä»¬å¿…é¡»é…ç½®æˆ‘ä»¬çš„å·´åˆ«å¡”ï¼Œå¯¹äºæˆ‘ä»¬çš„æƒ…å†µï¼Œæœ€é‡è¦çš„æ˜¯ jest é…ç½®ã€‚jest é…ç½®è´Ÿè´£ç¡®ä¿`jest`çŸ¥é“åœ¨å“ªé‡Œå¯»æ‰¾ã€å¯»æ‰¾ä»€ä¹ˆä»¥åŠå¦‚ä½•æ‰§è¡Œå®ƒã€‚

ä»å¤´å¼€å§‹è®¾ç½® React åº”ç”¨ç¨‹åºçš„ç»ä½³èµ„æº:
[https://blog . bitsrc . io/setting-a-React-project-from-scratch-using-babel-and-web pack-5f 26 a 525535d](https://blog.bitsrc.io/setting-a-react-project-from-scratch-using-babel-and-webpack-5f26a525535d)

## [](#directory-structure)ç›®å½•ç»“æ„

```
- node_modules`
- public
  - index.html
- src
  - components
    - MyComponent
      - MyComponent.jsx
      - MyComponent.styles.js
      - MyComponent.test.js      // here is what I do different
    - index.js             // source of truth for component export
  - utils
  - pages
  - App.jsx
  - App.test.jsx
  - App.styles.js
  - store.js
  - index.js
- webpack.config.js
- jest.config.js
- .gitignore
- .eslintrc
- .prettierrc 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#indexhtml)index.html:

```
<!DOCTYPE html>
  <html lang="en">    
    <head>        
      <meta charset="UTF-8" />        
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />        
      <meta http-equiv="X-UA-Compatible" content="ie=edge" />                                    
      <title>React JS + Webpack</title>
    </head>    
    <body>        
      <div id="root"></div>    
    </body>
  </html> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#appjs)App.js

```
import React from 'react';

const App = () => <h1>Hi World</h1>;

export default App; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#indexjs)index.js

```
import React from "react";
import ReactDOM from "react-dom";
import App from "./App";

ReactDOM.render(<App />, document.getElementById("root")); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#webpackconfigjs)webpack.config.js:

```
const webpack = require("webpack");

// plugins
const HtmlWebpackPlugin = require("html-webpack-plugin");

module.exports = {
  entry: "./src/index.js",
  output: {
    filename: "./main.js"
  },
  module: {
    rules: [
      {
        test: /\.(js|jsx)$/,
        exclude: /node_modules/,
        use: {
          loader: "babel-loader"
        }
      },
      {
        test: /\.(png|svg|jpg|gif)$/,
        use: ["file-loader"]
      },
      { test: /\.jsx$/, loader: "babel-loader", exclude: /node_modules/ },
      { test: /\.css$/, use: ["style-loader", "css-loader"] }
    ]
  },
  devServer: {
    contentBase: "./dist",
    hot: true
  },
  plugins: [
    new HtmlWebpackPlugin({
      template: "./public/index.html",
      filename: "./index.html"
    }),
    new webpack.HotModuleReplacementPlugin()
  ]
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#jestconfigjs)jest.config.js:

```
module.export = {
  roots: ['<rootDir>/src'],
  transform: {
    '\\.(js|jsx)?$': 'babel-jest',
  },
  testMatch: ['<rootDir>/src/**/>(*.)test.{js, jsx}'], // finds test
  moduleFileExtensions: ['js', 'jsx', 'json', 'node'],
  testPathIgnorePatterns: ['/node_modules/', '/public/'],
  setupFilesAfterEnv: [
    '@testing-library/jest-dom/extend-expect'', '@testing-library/react/cleanup-after-each' ] // setupFiles before the tests are ran
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

* * *

## [](#mycomponentjs)MyComponent.js:

```
import React from 'react'
import styled from 'styled-components'

const MyComponent = props => {

  return (
    <h1>`Hi ${props.firstName + '  ' + props.lastName}!`</h1>
  )
}
export default MyComponent 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [T1ã€‘my component . test . js:](#mycomponenttestjs)

```
import React from 'react'
import { render, cleanup } from '@testing-library/react'
import MyComponent from './MyComponent'

afterEach(cleanup)

describe('This will test MyComponent', () => {
  test('renders message', () => {
     const { getByText }= render(<Mycomponent 
                                 firstName="Alejandro"
                                 lastName="Roman"
                              />)

     // as suggested by Giorgio Polvara a more idiomatic way:
     expect(getByText('Hi Alejandro Roman')).toBeInTheDocument()
}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#input-example)è¾“å…¥ç¤ºä¾‹:

```
import React from 'react'
import { render, fireEvent } from '@testing-library/react'
import Input from './Input'

test('accepts string', () => {
  // I try to avoid using data-testid as that is not something a user would
  // use to interact with an element. There are a lot of great query and get 
  // methods
  const { getByPlaceholderText } = render(<Input placeholder="Enter
                                           Text" />);
  const inputNode = getByPlaceholderText('Search for a problem or application name');

  expect(inputNode.value).toMatch('') //tests input value is empty

  // if you need to perform an event such as inputing text or clicking
  // you can use fireEvent
  fireEvent.change(inputNode, { target: { value: 'Some text' } }));

  expect(inputNode.value).toMatch('Some text'); // test value 
                                                // is entered
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# [](#typescript-config)æ‰“å­—ç¨¿é…ç½®

## [](#tsconfigjson)tsconfig.json:

```
{
  "include": [
    "./src/*"
  ],
  "compilerOptions": {
    "lib": [
      "dom",
      "es2015"
    ],
  "jsx": "preserve",
  "target": "es5",
  "allowJs": true,
  "skipLibCheck": true,
  "esModuleInterop": true,
  "allowSyntheticDefaultImports": true,
  "strict": true,
  "forceConsistentCasingInFileNames": true,
  "module": "esnext",
  "moduleResolution": "node",
  "resolveJsonModule": true,
  "isolatedModules": true,
  "noEmit": true
  },
  "include": ["./src/**/*"],    
  "exclude": ["./node_modules", "./public", "./dist", "./.vscode"]
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#jest-config)jest é…ç½®:

```
module.exports = {
  roots: ['<rootDir>/src'],
  transform: {
    '\\.(ts|tsx)?$': 'babel-jest',
  },
  testMatch: ['<rootDir>/src/**/?(*.)test.{ts,tsx}'],   // looks for your test
  moduleFileExtensions: ['ts', 'tsx', 'js', 'jsx', 'json', 'node'],
  testPathIgnorePatterns: ['/node_modules/', '/public/'],
  setupFilesAfterEnv: [
    'jest-dom/extend-expect',
    '@testing-library/react/cleanup-after-each'
  ]  // sets ut test files
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#webpack-config)ç½‘é¡µåŒ…é…ç½®:

```
const path = require('path')

// Plugins
const HtmlWebpackPlugin = require('html-webpack-plugin')

module.exports = {
    entry: {
        dev: './src/index.tsx',
    },
    output: {
        path: path.resolve(__dirname, 'dist'),
        filename: 'js/[name].bundle.js',
    },
    devServer: {
        compress: true,
        port: 3000,
        hot: true,
    },
    devtool: 'source-map',
    resolve: {
        extensions: ['.ts', '.tsx', '.js', '.jsx'],
    },
    module: {
        rules: [
            /**
             * Gets all .ts, .tsx, or .js files and runs them through eslint
             * and then transpiles them via babel.
             */
            {
                test: /(\.js$|\.tsx?$)/,
                exclude: /(node_modules|bower_components)/,
                use: ['babel-loader'],
            },

            /**
             * All output '.js' files will have any sourcemaps re-processed by
             * source-map-loader.
             */
            { test: /\.js$/, enforce: 'pre', loader: 'source-map-loader' },
        ],
    },
    plugins: [
        new HtmlWebpackPlugin({
            template: './public/index.html',
        }),
    ],
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

* * *

é¢å¤–èµ„æº:

ä¸€äº›èµ„æºå¸®åŠ©æˆ‘å­¦ä¹ ä½¿ç”¨ React æµ‹è¯•åº“çš„ä¸åŒéƒ¨åˆ†:

æ–‡æ¡£:

[https://testing-library . com/docs/react-testing-library/intro](https://testing-library.com/docs/react-testing-library/intro)

åˆ›å»º-ååº”-åº”ç”¨:[https://www.youtube.com/watch?v=Yx-p3irizCQ&t = 266s](https://www.youtube.com/watch?v=Yx-p3irizCQ&t=266s)

æµ‹è¯•å†—ä½™:[https://www.youtube.com/watch?v=h7ukDItVN_o&t = 375s](https://www.youtube.com/watch?v=h7ukDItVN_o&t=375s)

ç»„ä»¶å•å…ƒæµ‹è¯•:[https://www.youtube.com/watch?v=KzeqeI046m0&t = 330s](https://www.youtube.com/watch?v=KzeqeI046m0&t=330s)

å˜²è®½å’Œæ›´å¤šç»„ä»¶æµ‹è¯•:[https://www.youtube.com/watch?v=XDkSaCgR8g4&t = 580s](https://www.youtube.com/watch?v=XDkSaCgR8g4&t=580s)

ä¼ é€é—¨:[https://www.youtube.com/watch?v=aejwiTIBXWI&t = 1s](https://www.youtube.com/watch?v=aejwiTIBXWI&t=1s)

å˜²è®½:[https://www.youtube.com/watch?v=9Yrd4aZkse8&t = 567s](https://www.youtube.com/watch?v=9Yrd4aZkse8&t=567s)

æµ‹è¯•å¼‚æ­¥ç»„ä»¶:[https://www.youtube.com/watch?v=uo0psyTxgQM&t = 915s](https://www.youtube.com/watch?v=uo0psyTxgQM&t=915s)