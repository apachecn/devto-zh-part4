# aria-liveï¼Œæ— éšœç¢æç¤ºâ™¿

> åŸæ–‡:[https://dev.to/yashints/aria-live-accessibility-tips-2bmp](https://dev.to/yashints/aria-live-accessibility-tips-2bmp)

ä¸Šå‘¨æˆ‘åœ¨æ¾³æ´²å¢¨å°”æœ¬çš„ [ComponentsConf](https://www.componentsconf.com.au/) è°ˆè®ºäº†ä½¿ç”¨ Tensorflow.js çš„ [JavaScript å’Œ AIã€‚æ’é˜Ÿæ˜¯ä¸€ä¸ªæ€æ‰‹ï¼Œæˆ‘å¬åˆ°äº†ä¸€äº›æƒŠäººçš„æ¼”è®²ï¼Œå…¶ä¸­ä¸€ä¸ªè®©æˆ‘ç€è¿·ã€‚è¿™æ˜¯å…³äºå¯è®¿é—®æ€§ï¼Œä»¥åŠæˆ‘ä»¬å¦‚ä½•é€šè¿‡åœ¨æˆ‘ä»¬è¿™è¾¹åšå¾ˆå°‘çš„äº‹æƒ…æ¥å˜å¾—æ›´å…·åŒ…å®¹æ€§ã€‚](https://www.componentsconf.com.au/schedule)

## [](#background)èƒŒæ™¯

æˆ‘ä»¬éƒ½åˆ›å»ºäº†ç½‘ç«™æˆ–åº”ç”¨ç¨‹åºï¼Œè®¸å¤šäººå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„é¡µé¢ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬æ²¡æœ‰æ„è¯†åˆ°è¿™äº›ä¹Ÿæ˜¯ç”±é‚£äº›çœ‹ä¸åˆ°å®ƒä»¬çš„äººä½¿ç”¨çš„ï¼Œä»–ä»¬ä½¿ç”¨è¾…åŠ©æŠ€æœ¯ï¼Œå¦‚å±å¹•é˜…è¯»å™¨ã€‚

æˆ‘è¿™é‡Œè¯´çš„ä¸æ˜¯é™æ€é¡µé¢ï¼Œæˆ‘ä»¬å¤„ç†çš„æ˜¯åŠ¨æ€é¡µé¢ï¼Œç”±äºæˆ‘ä»¬çš„æœ‹å‹ JavaScriptï¼Œé¡µé¢ä¸­çš„æŸä¸ªåŒºåŸŸå‘ç”Ÿäº†å˜åŒ–ï¼Œè€Œæ— éœ€åˆ·æ–°æ•´ä¸ªé¡µé¢ã€‚è¿™å¯ä»¥æ˜¯æ›´æ–°æœºç¥¨çš„ä»·æ ¼åˆ—è¡¨ï¼Œæˆ–è€…å³æ—¶æ›´æ–°æœç´¢ç»“æœã€‚

å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œå±å¹•è¯»è€…é€šå¸¸ä¸ä¼šæ„è¯†åˆ°ï¼Œé™¤éæˆ‘ä»¬è®©ä»–ä»¬çŸ¥é“é¡µé¢ä¸Šæœ‰æ›´æ–°ï¼Œè€Œè¿™æ­£æ˜¯`aria-live`åŒºåŸŸæ¥æ•‘æ´çš„åœ°æ–¹ã€‚

## `aria-live`æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

`aria-live`è®©æˆ‘ä»¬å°†é¡µé¢çš„ä¸€éƒ¨åˆ†æ ‡è®°ä¸ºâ€œæ´»åŠ¨â€ï¼Œè¿™æ„å‘³ç€æ— è®ºç”¨æˆ·å…³æ³¨é¡µé¢çš„å“ªä¸ªä½ç½®ï¼Œå¯¹è¯¥åŒºåŸŸçš„æ›´æ–°éƒ½åº”è¯¥é€šçŸ¥ç”¨æˆ·ï¼Œè€Œä¸æ˜¯è¦æ±‚ç”¨æˆ·åœ¨æ›´æ–°å‘ç”Ÿæ—¶åœ¨è¯¥åŒºåŸŸã€‚è¿™æ„å‘³ç€ä»–ä»¬ä¸ä¼šé”™è¿‡æ›´æ–°ï¼Œå³ä½¿ä»–ä»¬ç›®å‰æ­£åœ¨å®¡æŸ¥é¡µé¢çš„å…¶ä»–éƒ¨åˆ†ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·ç‚¹å‡»äº†ä¸€ä¸ªæŒ‰é’®ï¼Œä¸€ä¸ªåŠ¨ä½œå®Œæˆäº†ï¼Œä½œä¸ºç»“æœå‡ºç°çš„çŠ¶æ€æ¶ˆæ¯åº”è¯¥è¢«ä¼ è¾¾ç»™ä»–ä»¬ã€‚

æœ€ç®€å•çš„å½¢å¼æ˜¯ï¼Œ`aria-live`çœ‹èµ·æ¥åƒè¿™æ ·:

```
<div class="status" aria-live="polite">Thanks for your feedback.</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æœ‰ä¸‰ä¸ªå€¼å¯ä»¥ä¸`aria-live`å±æ€§ä¸€èµ·ä½¿ç”¨ï¼Œ`polite`ã€`assertive`å’Œ`off`ã€‚

## [](#it-doesnt-make-sense-lets-see-it-in-action)æ²¡æ„ä¹‰ï¼Ÿè®©æˆ‘ä»¬çœ‹çœ‹å®ƒçš„å®é™…æ•ˆæœ

ä¸ºäº†æ¼”ç¤ºå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ‘ä¸ºä¸Šé¢çš„æ¯ä¸ªå€¼åˆ›å»ºäº†ä¸€ä¸ªå¸¦æœ‰ä¸‰ä¸ªåŒºåŸŸçš„ CodePenã€‚

ä¸‹é¢æ˜¯ä»£ç :

```
<h1>Polite</h1>

<button onclick="updateContent('msg')">To view the updates, click this button!</button>
<br/> <br/>

<div id="msg" role="region" aria-live="polite" id="msg"></div>

<h1>Assertive</h1>

<button onclick="updateContent('msg2')">To view the updates immediately, click this button!</button>
<br/> <br/>

<div id="msg2" role="region" aria-live="assertive"  id="msg"></div>
<h1>Off</h1>

<button onclick="updateContent('msg3')">No updates will be announced, so don't click this button ğŸ˜‚!</button>
<br/> <br/>

<div id="msg3" role="region" aria-live="off" id="msg"></div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä»¥åŠæ¨¡æ‹Ÿå†…å®¹å˜åŒ–çš„ç®€å•å‡½æ•°:

```
function updateContent(id) {  
  document.querySelector(`#${id}`).textContent = 'Content changed: ' + Math.random()
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#lets-be-polite)è®©æˆ‘ä»¬ä¿æŒç¤¼è²ŒğŸ˜Š

`aria-live="polite"`å‘Šè¯‰è¾…åŠ©æŠ€æœ¯åœ¨å®Œæˆå½“å‰æ­£åœ¨åšçš„ä»»ä½•äº‹æƒ…æ—¶æé†’ç”¨æˆ·è¿™ä¸€å˜åŒ–ã€‚å¦‚æœäº‹æƒ…å¾ˆé‡è¦ä½†ä¸ç´§æ€¥ï¼Œå¹¶ä¸”å äº†`aria-live`ä½¿ç”¨çš„å¤§éƒ¨åˆ†ï¼Œé‚£ä¹ˆä½¿ç”¨å®ƒå¾ˆå¥½ã€‚

ä½ å¯ä»¥åœ¨ä¸‹é¢çš„è§†é¢‘ä¸­çœ‹åˆ°å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä½¿ç”¨çš„æ˜¯æˆ‘åœ¨ [CodePen](https://codepen.io/yashints/pen/jONKgMw) ä¸Šåˆ›å»ºçš„ä¸€ä¸ªæ¼”ç¤ºã€‚åœ¨è¿™ä¸ªæ¼”ç¤ºä¸­ï¼Œæˆ‘ç”¨ä¸€ä¸ªéšæœºæ•°æ¥æ”¹å˜æ¯æ¬¡ç‚¹å‡»æ¶ˆæ¯æ¡†çš„å†…å®¹ã€‚æ‚¨å¯ä»¥çœ‹åˆ° windows è®²è¿°äººåœ¨é˜…è¯»ä¸‹ä¸€æ¡æ¶ˆæ¯ä¹‹å‰å…ˆé˜…è¯»äº†å½“å‰æ¶ˆæ¯ï¼Œå°½ç®¡è¯¥æ¶ˆæ¯å·²ç»æ›´æ”¹ã€‚

[https://www.youtube.com/embed/kcHXxOzGsU8](https://www.youtube.com/embed/kcHXxOzGsU8)

## [](#holly-molly-something-urgent-happened)éœåˆ©Â·è«åˆ©ï¼Œâš ï¸å‘ç”Ÿäº†æ€¥äº‹

å‘Šè¯‰è¾…åŠ©æŠ€æœ¯ä¸­æ–­æ­£åœ¨å‘ç”Ÿçš„ä»»ä½•äº‹æƒ…ï¼Œå¹¶ç«‹å³æé†’ç”¨æˆ·è¿™ä¸€å˜åŒ–ã€‚è¿™ä»…é€‚ç”¨äºé‡è¦å’Œç´§æ€¥çš„æ›´æ–°ï¼Œä¾‹å¦‚ç±»ä¼¼â€œæœåŠ¡å™¨å‡ºé”™ï¼Œæ‚¨çš„æ›´æ”¹æœªä¿å­˜ï¼›è¯·åˆ·æ–°é¡µé¢â€ï¼Œæˆ–è€…ä½œä¸ºç”¨æˆ·æ“ä½œçš„ç›´æ¥ç»“æœçš„è¾“å…¥å­—æ®µçš„æ›´æ–°ï¼Œä¾‹å¦‚æ­¥è¿›å™¨éƒ¨ä»¶ä¸Šçš„æŒ‰é’®ã€‚

ä½ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ–­è¨€`aria-live`åŒºåŸŸï¼Œè®²è¿°è€…åœ¨ä¸‹ä¸€æ¡ä¿¡æ¯ä¸€å‡ºç°å°±é˜…è¯»å®ƒï¼Œå³ä½¿è¿™æ„å‘³ç€å®ƒåˆ‡æ–­äº†å‰ä¸€æ¡ä¿¡æ¯ã€‚

[https://www.youtube.com/embed/upvYxYOIgQQ](https://www.youtube.com/embed/upvYxYOIgQQ)

## [](#turn-it-off-and-save-energy)å…³æœºèŠ‚èƒ½ğŸ˜

`aria-live="off"`å‘Šè¯‰è¾…åŠ©æŠ€æœ¯æš‚æ—¶ä¸­æ­¢`aria-live`ä¸­æ–­ã€‚å¦‚æœæ›´æ–°å®Œæˆäº†ï¼Œä½ ä¸€å®šè¦æŠŠ`aria-live`åœ°åŒºè®¾ç½®ä¸ºå…³é—­ã€‚è¿™å°†æœ‰åŠ©äºè¾…åŠ©æŠ€æœ¯åœæ­¢è·Ÿè¸ªåŠ¨æ€å†…å®¹çš„å˜åŒ–ã€‚

## [](#making-sure-the-raw-arialive-endraw-regions-work-effectively)ç¡®ä¿`aria-live`åŒºåŸŸæœ‰æ•ˆå·¥ä½œ

è¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œä½†ä½ çŸ¥é“è¿™å¥è°šè¯­:

> æƒåŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§ã€‚

### [](#include-the-area-from-beginning)åŒ…æ‹¬ä»å¼€å§‹çš„åŒºåŸŸ

é¦–å…ˆè¦è€ƒè™‘çš„æ˜¯ï¼Œæ‚¨å¿…é¡»ç¡®ä¿è¯¥åŒºåŸŸåœ¨é¡µé¢åŠ è½½æ—¶æ˜¯å­˜åœ¨çš„ï¼Œå¹¶ä¸”æ˜¯ç©ºçš„ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªç¡¬æ€§è§„å®šï¼Œä½†å¦‚æœè¯¥åœ°åŒºæœ€åˆä¸åœ¨é‚£é‡Œï¼Œè®¸å¤šé—®é¢˜å¯èƒ½ä¼šå‘ç”Ÿã€‚

âŒä¸åš:

```
<div class="dynamic-content"></div>

<script>
document.querySelector(".dynamic-content").innerHTML = `<div id="msg" aria-live="polite">
    Content changed!
</div>`
<script> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

çˆ±å› æ–¯å¦:
çš„

```
<div class="dynamic-content">
  <div id="msg" aria-live="polite"></div>
</div>

<script>
  document.querySelector('#msg').textContent = 'Content changed!'
</script> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#want-to-hide-the-text-but-get-it-announced-)æƒ³è¦éšè—æ–‡æœ¬å´å¾—åˆ°å®ƒçš„å…¬å¸ƒğŸ˜²ï¼Ÿ

å¦‚æœä½ æƒ³è®©å±å¹•é˜…è¯»å™¨å®£å¸ƒä½ çš„æ›´æ–°ï¼Œä½†åˆæƒ³åœ¨è§†è§‰ä¸Šéšè—å±å¹•ä¸Šçš„æ–‡æœ¬ï¼Œé‚£ä¹ˆåƒ`display: none`æˆ–`visibility: hidden`è¿™æ ·çš„æ™®é€š wat å°±æœ‰ç‚¹é—®é¢˜äº†ã€‚è¿™ä¸¤ç§æƒ…å†µéƒ½ä¼šå¯¼è‡´æ›´æ–°ä¸¢å¤±ã€‚

å¦ä¸€ä¸ªä¼ ç»Ÿçš„æ–¹æ³•æ˜¯å°†`text-indent: -9999px`æ·»åŠ åˆ°ä½ çš„å…ƒç´ ä¸­ï¼Œä½†è¿™æœ‰ä¸€äº›æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºæµè§ˆå™¨ä¼šåœ¨ä½ çš„å…ƒç´ ä¸Šç”»ä¸€ä¸ª 9999 åƒç´ çš„æ–¹æ¡†(åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ›´ç³Ÿç³•)ã€‚

é‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹:

ä½¿ç”¨`overflow: hidden`å’Œå°å®½åº¦å’Œé«˜åº¦:

```
.hide-text { 
  position: absolute;
  width: 1px;
  height: 1px;
  overflow: hidden;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ–è€…ä½¿ç”¨`overflow: hidden`å’Œ`text-indent: 100%` :

```
.hide-text {
  text-indent: 100%;
  white-space: nowrap;
  overflow: hidden;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™äº›æ˜¯åœ¨å±å¹•ä¸Šéšè—æ–‡æœ¬çš„æœ€æœ‰æ•ˆçš„æ–¹æ³•ï¼ŒåŒæ—¶ä¿æŒæ£€æŸ¥æ€§èƒ½ã€‚

## [](#-raw-ariaatomic-endraw-)`aria-atomic`

è¯¥å±æ€§è¡¨ç¤ºåœ¨ä¼ é€’æ›´æ–°æ—¶ï¼Œåº”è¯¥å°†æ•´ä¸ªåŒºåŸŸè§†ä¸ºä¸€ä¸ªæ•´ä½“ã€‚æƒ³è±¡ä¸€ä¸ªç”±æ—¥ã€æœˆå’Œå¹´ç»„æˆçš„æ—¥æœŸå°éƒ¨ä»¶ï¼Œå®ƒæœ‰`aria-live=assertive`å’Œ`aria-atomic=true`ã€‚å½“ç”¨æˆ·æ›´æ”¹æ—¥æœŸå€¼æ—¶ï¼Œå°†å†æ¬¡è¯»å–æ•´ä¸ªæ—¥æœŸã€‚

```
<input type="number" value="02" onchange="updateDate('day', event)"/>/
<input type="number" value="12" onchange="updateDate('month', event)"/>/
<input type="number" value="1983" onchange="updateDate('year', event)"/>

<div class="user-date" aria-live="assertive" aria-atomic="true">  
  <span id="day">02</span>/
  <span id="month">12</span>/
  <span id="year">1983</span>
</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è€Œå¯¹äºå®ƒçš„ JavaScript:

```
function updateDate(type, event) {
  if(event && event.target && event.target.value) {
    document.querySelector(`#${type}`).textContent = event.target.value;
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œå¦‚æœæ‚¨æ›´æ”¹ä»»ä½•è¾“å…¥ä¸­çš„æ­¥è¿›å™¨ï¼Œåº”è¯¥ä¼šè¯»å–æ•´ä¸ªæ—¥æœŸã€‚

**âš ï¸è­¦å‘Š**:ä»¥ä¸Šä¸é€‚ç”¨äº windows è®²è¿°äººã€‚ç„¶è€Œï¼Œ [ChromeVox](https://chrome.google.com/webstore/detail/chromevox-classic-extensi/kgejglhpjiefppelpmljglcjbhoiplfn) ï¼Œä¸€ä¸ªæˆ‘ç”¨æ¥è¿›è¡Œå¯è®¿é—®æ€§æµ‹è¯•çš„ Chrome æ‰©å±•ï¼Œå·¥ä½œæ­£å¸¸ã€‚

## [](#what-else)è¿˜æœ‰ä»€ä¹ˆï¼Ÿ

æ‚¨å¯èƒ½è¿˜æƒ³çœ‹çœ‹å…¶ä»–æœ‰ç”¨çš„å±æ€§:

*   `aria-relevant`:è¡¨ç¤ºåº”è¯¥å‘ç”¨æˆ·å‘ˆç°ä»€ä¹ˆç±»å‹çš„å˜æ›´ã€‚
*   `aria-busy`:è®©ä½ é€šçŸ¥è¾…åŠ©æŠ€æœ¯åº”è¯¥æš‚æ—¶å¿½ç•¥ä¸€ä¸ªå…ƒç´ çš„å˜åŒ–ï¼Œæ¯”å¦‚åŠ è½½ä¸œè¥¿çš„æ—¶å€™ã€‚

## [](#summary)æ€»ç»“

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»è®¨è®ºäº†`aria-live`çš„å†…å®¹ã€æ–¹å¼å’ŒåŸå› ã€‚æˆ‘ä»¬è¿˜çœ‹åˆ°äº†å¦‚ä½•éšè—æ–‡æœ¬è€Œä¸å¤±å»ä¸ç”¨æˆ·äº¤æµæ›´æ–°çš„èƒ½åŠ›ï¼Œæ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜çœ‹åˆ°äº†å¦‚ä½•ä½¿ç”¨`aria-atomic`è®©æ•´ä¸ªåŒºåŸŸåŸå­åœ°æ´»èµ·æ¥ã€‚

å¸Œæœ›è¿™æœ‰åŠ©äºä½ çš„æ—…ç¨‹ï¼Œè®©ç½‘ç»œæˆä¸ºä¸€ä¸ªå¯¹æ¯ä¸ªäººéƒ½æ›´åŒ…å®¹çš„åœ°æ–¹ï¼Œç¥ä½ ç¼–ç æ„‰å¿«ã€‚