# ä½¿ç”¨æ•°æ®æµå°†æ•°æ®ä»ä¸çŸ¥ä½•å¤„è½¬ç§»åˆ° SSIS çš„ Neo4j

> åŸæ–‡ï¼š<https://dev.to/cskardon/using-a-data-flow-to-move-data-from-who-knows-where-to-neo4j-in-ssis-4fd7>

åœ¨è¿…é€Ÿæˆä¸ºä¸€ç³»åˆ—çš„å¸–å­ä¸­ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ Neo4j çš„ SSIS ç»„ä»¶åŒ…ä¸­çš„å¦ä¸€ä¸ªç»„ä»¶ã€‚[ä¸Šä¸€ç¯‡æ–‡ç« ](https://dev.to/cskardon/neo4j-ssis-connecting-and-executing-cypher-in-a-control-flow-5f60-temp-slug-8430168)ç€çœ¼äºåœ¨æ§åˆ¶æµä¸­ä½¿ç”¨â€œæ‰§è¡Œå¯†ç ä»»åŠ¡â€,ä½†è¿™å¹¶ä¸å¤ªæœ‰ç”¨ï¼Œæˆ‘çš„æ„æ€æ˜¯â€”â€”å®ƒå¯¹äºåˆ é™¤æ•°æ®åº“ã€æ·»åŠ ç´¢å¼•ç­‰æ“ä½œæ¥è¯´å¾ˆæ£’,ä½†å½“æˆ‘ä»¬æƒ³è¦ä»ä¸€ä¸ªæ•°æ®æºåˆ°å¦ä¸€ä¸ªæ•°æ®æºè·å–æ•°æ®æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»è®©æ‰€æœ‰çš„æ•°æ®æµåŠ¨èµ·æ¥ã€‚

æˆ‘çš„åŸåˆ™æ˜¯ï¼Œä½ å·²ç»çœ‹å®Œäº†ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘å°†ä»æˆ‘ä»¬åœæ­¢çš„åœ°æ–¹ç»§ç»­ï¼Œæˆ‘ä¸ä¼šä¸ºæˆ‘çš„å‡è®¾é“æ­‰ã€‚

## æ¸…é™¤ DB

æˆ‘åº”è¯¥æåˆ°â€”â€”è¯·æ£€æŸ¥æ‚¨è¿æ¥åˆ°å“ªä¸ªæ•°æ®åº“å®ä¾‹â€”â€”æ²¡æœ‰ä»€ä¹ˆæ¯”åˆ é™¤æ‚¨çš„ç”Ÿäº§æ•°æ®åº“æ›´èƒ½è¯´æ˜â€œé—®é¢˜â€äº†ã€‚

è®©æˆ‘ä»¬é¦–å…ˆå°† Neo4j å®ä¾‹æ¸…ç©ºå›ç©ºçŠ¶æ€ï¼Œè¿è¡Œ:

```
MATCH (n) DETACH DELETE n 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨æµè§ˆå™¨ä¸­ã€‚

## æ¸…é™¤åŒ…è£¹

æˆ‘ä»¬ä¸å†éœ€è¦æ‰§è¡Œå¯†ç ä»»åŠ¡ï¼Œæ‰€ä»¥é€‰æ‹©å®ƒâ€”â€”æŒ‰ Delete é”®ï¼Œæˆ–è€…é¼ æ ‡å³é”®â€”â€”è¿™æ˜¯ä½ çš„é€‰æ‹©

<figure>[![](img/d3122ffc5035a90f72677c4fc88db47f.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--RA8RXF-g--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://xclave.co.uk/wp-content/uploads/2019/07/image-14.png) 

<figcaption>åˆ é™¤é¼ æ ‡æ–¹å¼</figcaption>

</figure>

## å’±ä»¬æ•°æ®æµ(ä»»åŠ¡)ï¼

å°†æ•°æ®æµä»»åŠ¡æ‹–åˆ°æ§åˆ¶æµå·¥ä½œåŒºä¸Š:

[![](img/9c060af2ffaab1c624d8362f2a152023.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--fIZc_6jf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://xclave.co.uk/wp-content/uploads/2019/07/image-15.png)

åŒå‡»è¦å¸¦åˆ°æ•°æ®æµå·¥ä½œåŒºçš„ä»»åŠ¡ï¼Œè¯¥å·¥ä½œåŒºå°†æ˜¯ç©ºçš„ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬å°†â€œå¹³é¢æ–‡ä»¶æºâ€æ‹–åˆ°ç©ºé—´ä¸­:

[![](img/c29c18c0e8614f9f5687f2a4bf642e3d.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--XYrGwlZn--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://xclave.co.uk/wp-content/uploads/2019/07/image-16.png)

åŒå‡»å¹³é¢æ–‡ä»¶æºï¼Œç¼–è¾‘å™¨å°±ä¼šå¼¹å‡ºã€‚æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªæ–°çš„è¿æ¥ç®¡ç†å™¨ï¼Œæ‰€ä»¥è¯·æŒ‰â€œæ–°å»ºâ€¦â€

[![](img/047449683514f19bebff593f8eb25287.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--luwlX0NN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://xclave.co.uk/wp-content/uploads/2019/07/image-17.png)

ç°åœ¨ï¼Œæˆ‘ä»¬æƒ³ä½¿ç”¨ä¸€ä¸ª CSV æ–‡ä»¶ï¼Œä½ å¯ä»¥é€šè¿‡ä»[ä¸‹è½½è¿™ä¸ªé“¾æ¥](https://anabranch-my.sharepoint.com/%E2%9D%8C/g/personal/cskardon_anabranch_co_uk/EdRCjAVnCmxCk_JiJRMbOfwBkTiCbrL3FDSskFVyQxJbNg?e=8Nn1sh)æ¥ä½¿ç”¨æˆ‘æ‰€ä½¿ç”¨çš„æ–‡ä»¶ï¼Œææ€•å®ƒä¸æ˜¯å¾ˆä»¤äººå…´å¥‹ï¼Œåªæ˜¯ä¸€äº›åå­— [![ğŸ™‚](img/c1766ba8b46615e3a821a99042b0d85a.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--2EAkP1Kt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s.w.oimg/core/emoji/12.0.0-1/72x72/1f642.png) æ— è®ºå¦‚ä½•â€”â€”å¡«å†™ä¸ä½ çš„æ–‡ä»¶ç›¸åŒ¹é…çš„ç»†èŠ‚(è¿™å¼ å›¾ç‰‡ä¸­çš„é‚£äº›ä¸æˆ‘çš„æ–‡ä»¶ç›¸åŒ¹é…ï¼Œæˆ‘å”¯ä¸€æ”¹å˜çš„æ˜¯ä»£ç é¡µæ˜¯ 65001 (UTF-8))

[![](img/5085d6103cfde650f837caecd3839395.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--h1E8TNS6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://xclave.co.uk/wp-content/uploads/2019/07/image-18.png)

ç„¶åç‚¹å‡»å·¦ä¾§çš„â€œåˆ—â€ä½ï¼Œç¡®ä¿ä¸€åˆ‡æ­£å¸¸ï¼Œç„¶åæŒ‰â€œç¡®å®šâ€ã€‚æ‚¨å°†è¿”å›åˆ°â€œå¹³é¢æ–‡ä»¶æºç¼–è¾‘å™¨â€ï¼Œç°åœ¨æ‚¨ä¹Ÿåº”è¯¥å•å‡»æ­¤å¤„çš„â€œåˆ—â€éƒ¨åˆ†:

[![](img/7e12a5b109290c264ed4e0584fe6368c.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--sJfKTXzR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://xclave.co.uk/wp-content/uploads/2019/07/image-19.png)

ç¡®ä¿è‡³å°‘åœ¨è¿™é‡Œæ£€æŸ¥äº†åå­—/å§“æ°â€”â€”æ˜¾ç„¶ï¼Œå¦‚æœæ‚¨ä½¿ç”¨è‡ªå·±çš„æ–‡ä»¶â€”â€”é€‰æ‹©æ‚¨çš„åˆ—ï¼æŒ‰ç¡®å®šå¹¶è¿”å›å·¥ä½œåŒºã€‚

ç°åœ¨å°†â€œæ‰§è¡Œå¯†ç ç›®æ ‡â€ä»»åŠ¡æ‹–åˆ°å·¥ä½œåŒº:

[![](img/353b1467582ec16ece1c1d4a57ac269f.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--d2QE09uu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://xclave.co.uk/wp-content/uploads/2019/07/image-20-1024x363.png)

ä»å¹³é¢æ–‡ä»¶æºæ‹–åŠ¨â€œè“è‰²ç®­å¤´â€,å¹¶å°†å…¶é™„åŠ åˆ°æ‰§è¡Œå¯†ç ä»»åŠ¡:

[![](img/c5d3a3bcac3fc941f05bf8ce5f30971a.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Kf8w6Au---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://xclave.co.uk/wp-content/uploads/2019/07/image-22.png)

ç„¶åï¼Œå³é”®å•å‡»æ‰§è¡Œå¯†ç ä»»åŠ¡ï¼Œå¹¶é€‰æ‹©â€œæ˜¾ç¤ºé«˜çº§ç¼–è¾‘å™¨â€¦â€

[![](img/e8b0dcf932f5e36f80de7ad35c459293.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--6Im57ecF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://xclave.co.uk/wp-content/uploads/2019/07/image-21.png)

é¦–å…ˆï¼Œè®¾ç½®è¿æ¥ç®¡ç†å™¨ï¼Œæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨ç°æœ‰çš„ Neo4j è¿æ¥ç®¡ç†å™¨

[![](img/9b2d364a2c45778c1c4cb5d678ea6bf8.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--nIBSgHjM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://xclave.co.uk/wp-content/uploads/2019/07/image-23.png)

ç„¶åï¼Œæˆ‘ä»¬è¦é€‰æ‹©â€œè¾“å…¥åˆ—â€ï¼Œç°åœ¨åªéœ€é€‰æ‹©å®ƒä»¬:

[![](img/45607ef3918d87d01ee3444d632ad013.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--EDPmYpHP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://xclave.co.uk/wp-content/uploads/2019/07/image-24.png)

æŒ‰ OKï¼Œç„¶ååŒå‡»æ‰§è¡Œå¯†ç ä»»åŠ¡ï¼Œä»¥è·å¾—å¯†ç ç¼–è¾‘å™¨

[![](img/eb5a0b25661b7ac893b2f7f536d8d141.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--9x65SqzX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://xclave.co.uk/wp-content/uploads/2019/07/image-25-1024x598.png)

æ·»åŠ æˆ‘ä¸Šé¢çš„å¯†ç :

```
CREATE (:User {First: $FirstName, Last: $LastName}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶åæŒ‰ç¡®å®šã€‚

## åšä¸€äº› SSISingï¼

ç°åœ¨ï¼Œå‰©ä¸‹è¦åšçš„å°±æ˜¯æŒ‰ä¸‹ Start(æˆ–å³é”®-æ‰§è¡Œä»»åŠ¡),è¿™æ˜¯ä½ çš„å–œå¥½ï¼

[![](img/61782115489a83834c8bb32c836a8dba.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--UP0urkcz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://xclave.co.uk/wp-content/uploads/2019/07/image-26.png)

å®ƒå°†è¿è¡Œï¼Œå¹¶ä¸ºæ‚¨æä¾›ä»¥ä¸‹å†…å®¹:

[![](img/ad741c2c0bba8801bd165c73aa8250ef.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--hwX7WjpR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://xclave.co.uk/wp-content/uploads/2019/07/image-27.png)

æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œ:
åœ¨æ‚¨çš„æ•°æ®åº“ä¸­æ£€æŸ¥å®ƒ

```
MATCH (n) RETURN COUNT(n) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

[![](img/a9574d9072a080f12ae9d485324ee662.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--zzywRojo--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://xclave.co.uk/wp-content/uploads/2019/07/image-28.png)

ç°åœ¨äº‹æƒ…å˜å¾—æ›´æœ‰è¶£äº†ï¼Œå› ä¸ºæˆ‘ä»¬ä»ä¸åŒçš„æ¥æºæå–æ•°æ®å¹¶æ”¾å…¥æ•°æ®åº“ï¼Œæ˜¾ç„¶ SSIS æ”¯æŒæ¥æºçš„*åŠ è½½*â€”

è¿™äº›æ§ä»¶ç›®å‰å¤„äºå…¬å¼€æµ‹è¯•é˜¶æ®µï¼Œè¦æ³¨å†Œè·å¾—è¿™äº›æ§ä»¶ï¼Œè¯·å‰å¾€:[http://bit.ly/neo4jssis](http://bit.ly/neo4jssis)