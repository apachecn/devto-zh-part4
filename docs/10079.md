# Marie Kondo æ‚¨çš„å¸¦å‡½æ•°çš„ Javascript ä»£ç 

> åŸæ–‡ï¼š<https://dev.to/raddevon/marie-kondo-your-javascript-code-with-functions-45ja>

*ä¸Šå‡å½¢æ€çš„å°é¢å›¾åƒ*

åœ¨æœ¬ç³»åˆ—çš„å‰ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œ[æˆ‘ä»¬æ¢è®¨äº†å›è°ƒå‡½æ•°](https://raddevon.com/articles/javascript-callback-functions/)ã€‚å¦‚æœæ‚¨å·²ç»é˜…è¯»äº†æ•´ä¸ªç³»åˆ—ï¼Œé‚£ä¹ˆæ‚¨å·²ç»å¾ˆå¥½åœ°æŒæ¡äº† Javascript ä¸­çš„å‡½æ•°ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„ç”¨é€”ã€å¦‚ä½•å£°æ˜å®ƒä»¬ä»¥åŠå¦‚ä½•ä¼ é€’å®ƒä»¬ã€‚

æˆ‘åœ¨ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« ä¸­æåˆ°è¿‡ï¼Œä½ åº”è¯¥åŠªåŠ›äº‰å–é‚£äº›**åšä¸€ä»¶äº‹æƒ…**çš„å‡½æ•°ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†æŸ¥çœ‹æˆ‘åœ¨ Github ä¸Šçš„ä¸€äº›æ—§ä»£ç ï¼Œçœ‹çœ‹æˆ‘ä»¬æ˜¯å¦å¯ä»¥é‡æ„å®ƒï¼Œä»¥ä¾¿å‡½æ•°éµå¾ªè¿™ä¸€åŸåˆ™ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹ä¸€äº›æ¡ˆä¾‹ï¼Œåœ¨è¿™äº›æ¡ˆä¾‹ä¸­ï¼Œæ‚¨å¯èƒ½æƒ³è¦é‡æ„ä»£ç ä»¥ä½¿ç”¨æ‚¨æ‰€äº†è§£çš„å‡½æ•°ã€‚

## ä½•æ—¶é‡æ„ä¸ºå‡½æ•°

### ç•™ä¸‹æ¥

D.R.Y .æ˜¯ä¸€ä¸ªé‡è¦çš„è½¯ä»¶åŸåˆ™ã€‚å®ƒä»£è¡¨â€œä¸è¦é‡å¤è‡ªå·±ã€‚â€å¦‚æœä½ å‘ç°è‡ªå·±åœ¨ä»£ç ä¸­ä¸€éåˆä¸€éåœ°é‡å¤ä¸€ä¸ªå€¼ï¼Œé‚£å°±æ˜¯ä½¿ç”¨å˜é‡çš„å¥½æ—¶æœºã€‚å¦‚æœä½ å‘ç°è‡ªå·±åœ¨ä¸åŒçš„åœ°æ–¹é‡å¤äº†å‡ è¡Œä»£ç ï¼Œé‚£å°±æ˜¯ä½ å¼€å§‹æ‰§è¡Œä¸€ä¸ªå‡½æ•°çš„æ—¶å€™äº†ã€‚

ä¸è¦é‡å¤ä½ çš„ä»£ç è¡Œï¼Œå†™ä¸€ä¸ªåŒ…å«ç›¸åŒä»£ç è¡Œçš„å‡½æ•°ï¼Œå¹¶åœ¨æ¯æ¬¡éœ€è¦æ—¶è°ƒç”¨å®ƒã€‚è¿™ä½¿å¾—ä½ çš„ä»£ç æ›´å®¹æ˜“é˜…è¯»ï¼Œå› ä¸ºä½ çš„å‡½æ•°ååº”è¯¥åæ˜ ä»£ç è¡Œçš„è¡Œä¸ºã€‚è¿™ä¹Ÿä½¿æ‚¨çš„ä»£ç æ›´å®¹æ˜“é‡æ„ã€‚å¦‚æœæ‚¨åœ¨ä»£ç è¡Œä¸­å‘ç°ä¸€ä¸ª bugï¼Œæ‚¨å¯ä»¥åœ¨å‡½æ•°ä¸­æ›´æ”¹å®ƒä»¬ï¼Œç°åœ¨å¯¹å‡½æ•°çš„æ¯ä¸ªè°ƒç”¨éƒ½è¢«ä¿®å¤äº†ã€‚

### ä¸ºå¯è¯»æ€§

è€ƒè™‘ä½¿ç”¨â€œforâ€å¾ªç¯æ¥å¤„ç†æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹ã€‚åä¸º`movies`çš„æ•°ç»„çš„â€œforâ€å¾ªç¯å°†åƒè¿™æ ·å¼€å§‹:

```
for (var i = 0; i < movies.length; i++) {â€¦ 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å¯¹æˆ‘æ¥è¯´ä¸€ç›´æ˜¯ä¸å¯æ€è®®çš„ã€‚å…¶å®å¹¶æ²¡æœ‰ä¼ è¾¾ä»€ä¹ˆæ„æ€ã€‚è¿™åªæ˜¯ä½ ä½œä¸ºç¨‹åºå‘˜è¦è®°ä½çš„ä¸œè¥¿ï¼Œä½†æ˜¯**æˆ‘è®¨åŒæˆ‘çš„ç¨‹åºâ€œå¯è¯»â€çš„æƒ³æ³•ï¼Œä»…ä»…å› ä¸ºæˆ‘è®°ä½äº†ä¸€äº›æƒ¯ä¾‹**ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œ`i`æ˜¯ä¸€ä¸ªå¯æ€•çš„å˜é‡åï¼Œæˆ‘ä»¬è¢«æ•™å¯¼è¦é¿å…å®ƒâ€¦â€¦*é™¤äº†*åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™æ˜¯ä¹ æƒ¯ã€‚é‚£ä¸é€‚åˆæˆ‘ã€‚

æˆ‘æ›´å–œæ¬¢è°ƒç”¨æ•°ç»„çš„`forEach`æ–¹æ³•å¹¶ä¼ å…¥ä¸€ä¸ªå‡½æ•°ã€‚

```
movies.forEach(function(movie) {â€¦ 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ ä»ç„¶éœ€è¦è®°ä½ä¸€äº›ä¸œè¥¿æ¥å†™è¿™æ®µä»£ç ï¼Œä½†æ˜¯å®ƒæ¯” for å¾ªç¯æ›´å®¹æ˜“é˜…è¯»å’Œæ¨ç†ä½ åœ¨åšä»€ä¹ˆã€‚ä½œä¸ºä¸€ä¸ªé¢å¤–çš„å¥½å¤„ï¼Œä½ ç°åœ¨å¯ä»¥åœ¨è¿­ä»£æ—¶å°†æ¯ä¸ªæ•°ç»„é¡¹ç§°ä¸º`movie`(å› ä¸ºè¿™æ˜¯æˆ‘ä»¬ç»™å›è°ƒå‡½æ•°çš„å‚æ•°èµ·çš„åå­—),è€Œä¸æ˜¯æ¯«æ— æ„ä¹‰çš„`movies[i]`ã€‚

### å½“ä½ çš„åŠŸèƒ½åšå¾—å¤ªå¤šçš„æ—¶å€™

è¿™å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦çœ‹çš„ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç›´æ¥è·³åˆ°ä¾‹å­ä¸­ï¼Œå¼€å§‹åˆ†è§£è¿™ä¸ª Voltronã€‚

[![Kids splitting Voltron back into his component robot tigers](img/bfb9341c7ee68f28a0068a2d360ff2f0.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--hJx0SzDk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://raddevon.com/wp-content/uploads/2019/07/splitting-voltron.gif)

## é‡æ„èƒ¡èŒ¨å…‹å‹’æ‰£è±†èŒ

å‡ å¹´å‰ï¼Œå½“æˆ‘å†³å®šè½¬è¡Œçš„æ—¶å€™ï¼Œæˆ‘å†™äº†ä¸€ä¸ªçŒœæ•°å­—æ¸¸æˆ ( [å›è´­é“¾æ¥](https://github.com/raddevon/huckle-buckle-beanstalk))ä½œä¸ºä¸€ä¸ªè®­ç»ƒè¥çš„é¡¹ç›®ã€‚å¤§éƒ¨åˆ†é€»è¾‘éƒ½è¢«é”åœ¨ä¸€ä¸ªåä¸º compareGuess çš„å‡½æ•°ä¸­(è§ç¬¬ 20 è¡Œ)ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘æƒ³è¦å…³æ³¨çš„ã€‚è®©æˆ‘ä»¬æŠŠå®ƒåˆ†æˆå‡ ä¸ªä¸åŒçš„åŠŸèƒ½ï¼Œæ¯ä¸ªåŠŸèƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„èŒè´£ã€‚

```
// Generate random number for guessing
var number = Math.floor(Math.random()*101);

// Global for previous guess
var previousGuess;

// Global for number of guesses
var numGuesses = 1;

function isNormalInteger(str) {
    return (/^[1-9]\d*$/).test(str);
}

// Checks to see if the guess is within the parameters given
function validGuess(guess) {
    return isNormalInteger(guess) && +guess <= 100 && +guess >= 1;
}

// Compare the guess to the number and previous guess. Place feedback on the page for the player.
function compareGuess(event) {
    event.preventDefault();
    // Grab the guess from the text input field
    var guess = $('#guess').val();

    if (validGuess(guess)) {
        // Turn off any error messages
        $('.error').addClass('off').removeClass('on');

        // Convert guess value to an integer for comparison
        guess = parseInt(guess, 10);
        // Feedback for a correct guess. Show the reset button to start a new game.
        if (guess === number) {
            $('#guess-vs-number').text('You got it! The number was ' + number + '.');
            $('#guess-vs-guess').hide();
            $('#num-guesses').text('You made ' + numGuesses + ' guesses.');
            $('#reset').removeClass('off');
        // Feedback for a low guess
        } else if (number > guess) {
            $('#guess-vs-number').text('Higher than ' + guess);
        // Feedback for a high guess
        } else {
            $('#guess-vs-number').text('Lower than ' + guess);
        }

        // Blank out the guess input field and return focus to it
        $('#guess').val('').focus();
        // Increment number of guesses
        numGuesses++;

        if (previousGuess) {
            // Find distances of the current and previous guesses from the actual number
            var previousDistance = Math.abs(number - previousGuess);
            var currentDistance = Math.abs(number - guess);

            // Feedback for guess versus previous guess comparison
            if (guess === previousGuess) {
                $('#guess-vs-guess').text("Same guess!");
            } else if (currentDistance < previousDistance){
                $('#guess-vs-guess').text("Getting warmer...");
            } else if (currentDistance > previousDistance) {
                $('#guess-vs-guess').text("Getting colder...");
            } else {
                $('#guess-vs-guess').text("Same distance...");
            }
        }
        // Set new previous guess
        previousGuess = guess;

        // Display the response
        $('.response').removeClass('off');
    } else {
        // Give error for invalid guess. Blank out the guess field and return focus.
        $('.error').removeClass('off').addClass('on');
        $('#guess').val('').focus();
    }
}

// Bind a click of the reset button to browser reload
$('#guess-form').on('click', '#reset', function(event) {
    event.preventDefault();
    location.reload();
});

// Bind form submission to the compareGuess function
$('#guess-form').submit(compareGuess);

// Bind enter key to the compareGuess function for browsers that don't always interpret an enter press as a form submission.
$('#guess').keypress(function(e) {
    if (e.which == 13) {
    compareGuess();
    }
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`compareGuess`çš„å‰å‡ è¡Œå®é™…ä¸Šæ˜¯æ¯”è¾ƒçŒœæµ‹çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯ï¼Œåœ¨æˆ‘æ£€æŸ¥ç¬¬ 32 è¡Œçš„çŒœæµ‹æ˜¯å¦æ­£ç¡®ä¹‹åï¼Œæˆ‘ç»™å‡ºæ­£ç¡®çš„ç­”æ¡ˆåé¦ˆï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°ã€‚è¯¥å‡½æ•°å¯èƒ½å¦‚ä¸‹æ‰€ç¤º:

```
function showCorrectFeedback() {
  $('#guess-vs-number').text('You got it! The number was ' + number + '.');
  $('#guess-vs-guess').hide();
  $('#num-guesses').text('You made ' + numGuesses + ' guesses.');
  $('#reset').removeClass('off');
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘å¯ä»¥åœ¨è¿™é‡Œåšå¾ˆå¤šé‡æ„ï¼Œæ¯”å¦‚æŠŠæ­£ç¡®çš„ç­”æ¡ˆå­—ç¬¦ä¸²æ¢æˆæ¨¡æ¿å­—ç¬¦ä¸²ï¼Œè®©å®ƒçœ‹èµ·æ¥æ›´å¥½ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰è¿™ä¹ˆåšï¼Œå› ä¸ºè¿™æ®µä»£ç æ˜¯ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ï¼Œè€Œæ—§çš„æµè§ˆå™¨ä¸æ”¯æŒ ES6ã€‚ç›¸åï¼Œæˆ‘å°†ä¸»è¦å…³æ³¨åˆ†è§£å¤§å‹å‡½æ•°ã€‚

ç°åœ¨ï¼Œæˆ‘éœ€è¦å›åˆ°è¿™æ®µä»£ç åŸæ¥çš„åœ°æ–¹ï¼Œè°ƒç”¨æ–°çš„å‡½æ•°ã€‚

```
if (guess === number) {
  showCorrectFeedback();
// Feedback for a low guess
} else if (number > guess) {
  â€¦ 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä½ å·²ç»åœ¨ä»£ç ä¸­å‘å‰çœ‹äº†ï¼Œä½ å¯èƒ½èƒ½å¤Ÿé¢„æµ‹æˆ‘æ‰“ç®—åšçš„ä¸‹ä¸€ä¸ªé‡æ„ã€‚æˆ‘å‡ ä¹æ²¡æœ‰å°†æ˜¾ç¤ºä½çŒœæµ‹æˆ–é«˜çŒœæµ‹åé¦ˆçš„ä»£ç ç§»åŠ¨åˆ°å®ƒä»¬è‡ªå·±çš„å‡½æ•°ä¸­ï¼Œå› ä¸ºæ¯ä¸€ä¸ªéƒ½æ˜¯å•ç‹¬çš„ä¸€è¡Œï¼Œä½†æ˜¯ä¸ºäº†ä¸€è‡´æ€§ï¼Œæˆ‘å†³å®šè¿™æ ·åšã€‚

```
function showLowGuessFeedback(guess) {
  $('#guess-vs-number').text('Higher than ' + guess);
}
function showHighGuessFeedback(guess) {
  $('#guess-vs-number').text('Lower than ' + guess);
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘å¿…é¡»æ”¹å˜è¿™ä¸¤ä¸ªå‚æ•°ä¸­çš„ä¸€ä¸ª:æˆ‘å¿…é¡»æ·»åŠ ä¸€ä¸ªæˆ‘ç§°ä¸º`guess`çš„å‚æ•°ã€‚æˆ‘åœ¨æ¯ä¸ªå‡½æ•°ä¸­å¼•å…¥çš„å•è¡Œä»£ç å·²ç»å¼•ç”¨äº†`guess`ï¼Œä½†æ˜¯è¿™ç§çŒœæµ‹ä¸åœ¨è¿™äº›æ–°å‡½æ•°çš„èŒƒå›´å†…ã€‚ç›¸åï¼Œæˆ‘ä»¬å¿…é¡»å°†çŒœæµ‹ä¼ é€’ç»™åé¦ˆå‡½æ•°ã€‚æˆ‘ä»¬ä¸å¿…ä¸ºç¬¬ä¸€ä¸ªå‡½æ•°è¿™ä¹ˆåšï¼Œå› ä¸ºå®ƒåªæ˜¾ç¤ºäº†`number`ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ã€‚

ç°åœ¨ï¼Œæˆ‘å°†ç”¨æ–°çš„å‡½æ•°è°ƒç”¨æ›¿æ¢æ—§çš„ä»£ç ã€‚

```
â€¦
} else if (number > guess) {
  showLowGuessFeedback(guess);
// Feedback for a high guess
} else {
  showHighGuessFeedback(guess);
}
â€¦ 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¯¹æˆ‘æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªæ–°åŠŸèƒ½çš„é—®é¢˜æ˜¯å®ƒä»¬**æœ‰ç‚¹å¤ªç›¸ä¼¼äº†**ã€‚äº‹å®ä¸Šï¼Œé™¤äº†ä¸€ä¸ªå•è¯ï¼Œå®ƒä»¬å®Œå…¨ä¸€æ ·ã€‚æˆ‘æƒ³æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå‡½æ•°æ¥ä»£æ›¿ã€‚

æˆ‘éœ€è¦ä¼ å…¥æˆ‘æƒ³è¦ä½¿ç”¨çš„å•è¯(æˆ–è€…â€œæ›´é«˜â€ï¼Œæˆ–è€…â€œæ›´ä½â€)ã€‚ä¹Ÿè®¸è¿™ç±»è¯æœ‰ä¸€ä¸ªåç§°ï¼Œä½†æˆ‘ä¸çŸ¥é“ã€‚æˆ‘å°±ç§°å®ƒä»¬ä¸ºâ€œæ¯”è¾ƒå™¨â€

```
function showGuessFeedback(comparator, guess) {
  $('#guess-vs-number').text(comparator + ' than ' + guess);
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ„å‘³ç€ï¼Œæˆ‘ä¹Ÿéœ€è¦æ”¹å˜ç”µè¯ã€‚

```
â€¦
} else if (number > guess) {
  showGuessFeedback('Higher', guess);
// Feedback for a high guess
} else {
  showGuessFeedback('Lower', guess);
}
â€¦ 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘æƒ³é‡æ„çš„ä¸‹ä¸€ä¸ªä»£ç å—åœ¨ç¬¬ 50 è¡Œã€‚

```
â€¦
if (previousGuess) {
  // Find distances of the current and previous guesses from the actual number
  var previousDistance = Math.abs(number - previousGuess);
  var currentDistance = Math.abs(number - guess);

  // Feedback for guess versus previous guess comparison
  if (guess === previousGuess) {
    $('#guess-vs-guess').text("Same guess!");
  } else if (currentDistance < previousDistance){
    $('#guess-vs-guess').text("Getting warmer...");
  } else if (currentDistance > previousDistance) {
    $('#guess-vs-guess').text("Getting colder...");
  } else {
    $('#guess-vs-guess').text("Same distance...");
  }
}
â€¦ 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ®µä»£ç ä¸å†æ˜¯æ£€æŸ¥çŒœæµ‹æ˜¯å¦æ­£ç¡®ï¼›å®ƒå‘Šè¯‰ç”¨æˆ·ä»–ä»¬æ˜¯å˜æš–äº†(ä»–ä»¬çš„çŒœæµ‹æ¯”å‰ä¸€ä¸ªæ›´æ¥è¿‘)è¿˜æ˜¯å˜å†·äº†(ä»–ä»¬çš„çŒœæµ‹æ¯”å‰ä¸€ä¸ªæ›´è¿œ)ã€‚è®©æˆ‘ä»¬æŠŠå®ƒæ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°ä¸­ã€‚

```
function showDistanceFeedback(guess) {
  if (previousGuess) {
    // Find distances of the current and previous guesses from the actual number
    var previousDistance = Math.abs(number - previousGuess);
    var currentDistance = Math.abs(number - guess);

    // Feedback for guess versus previous guess comparison
    if (guess === previousGuess) {
      $('#guess-vs-guess').text("Same guess!");
    } else if (currentDistance < previousDistance){ $('#guess-vs-guess').text("Getting warmer..."); } else if (currentDistance > previousDistance) {
      $('#guess-vs-guess').text("Getting colder...");
    } else {
      $('#guess-vs-guess').text("Same distance...");
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬ä¹Ÿè®¸èƒ½è¿›ä¸€æ­¥åˆ†è§£è¿™ä¸ªï¼Œä½†è¿™å·²ç»æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„è¿›æ­¥äº†ã€‚ç°åœ¨æˆ‘ä»¬ç§°ä¹‹ä¸ºã€‚

```
â€¦
// Blank out the guess input field and return focus to it
$('#guess').val('').focus();
// Increment number of guesses
numGuesses++;

showDistanceFeedback(guess);

// Set new previous guess
previousGuess = guess;
â€¦ 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä»ç„¶ä¸æ˜¯ä»¤äººæƒŠå¥‡çš„ä»£ç ï¼Œä½†æ˜¯åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ¯ä¸ªå‡½æ•°ç°åœ¨éƒ½åœ¨åšä¸€é¡¹å·¥ä½œã€‚æˆ‘ä»¬ç»™è¿™äº›å‡½æ•°èµ·çš„åå­—ä¹Ÿå¯ä»¥è®©æˆ‘ä»¬åœ¨å‡ ä¸ªæœˆåå›åˆ°è¿™æ®µä»£ç æ—¶æ›´å®¹æ˜“ç†è§£è¿™ä¸ªå‡½æ•°ã€‚ä»¥ä¸‹æ˜¯è¯¥åº”ç”¨çš„æ‰€æœ‰é‡æ„ Javascript:

```
// Generate random number for guessing
var number = Math.floor(Math.random()*101);

// Global for previous guess
var previousGuess;

// Global for number of guesses
var numGuesses = 1;

function isNormalInteger(str) {
    return (/^[1-9]\d*$/).test(str);
}

// Checks to see if the guess is within the parameters given
function validGuess(guess) {
    return isNormalInteger(guess) && +guess <= 100 && +guess >= 1;
}

function showCorrectFeedback() {
  $('#guess-vs-number').text('You got it! The number was ' + number + '.');
  $('#guess-vs-guess').hide();
  $('#num-guesses').text('You made ' + numGuesses + ' guesses.');
  $('#reset').removeClass('off');
}

function showGuessFeedback(comparator, guess) {
  $('#guess-vs-number').text(comparator + ' than ' + guess);
}

function showDistanceFeedback(guess) {
  if (previousGuess) {
    // Find distances of the current and previous guesses from the actual number
    var previousDistance = Math.abs(number - previousGuess);
    var currentDistance = Math.abs(number - guess);

    // Feedback for guess versus previous guess comparison
    if (guess === previousGuess) {
      $('#guess-vs-guess').text("Same guess!");
    } else if (currentDistance < previousDistance){ $('#guess-vs-guess').text("Getting warmer..."); } else if (currentDistance > previousDistance) {
      $('#guess-vs-guess').text("Getting colder...");
    } else {
      $('#guess-vs-guess').text("Same distance...");
  }
}

// Compare the guess to the number and previous guess. Place feedback on the page for the player.
function compareGuess(event) {
    event.preventDefault();
    // Grab the guess from the text input field
    var guess = $('#guess').val();

    if (validGuess(guess)) {
        // Turn off any error messages
        $('.error').addClass('off').removeClass('on');

        // Convert guess value to an integer for comparison
        guess = parseInt(guess, 10);
        // Feedback for a correct guess. Show the reset button to start a new game.
        if (guess === number) {
            showCorrectFeedback();
        // Feedback for a low guess
        } else if (number > guess) {
            showGuessFeedback('Higher', guess);
        // Feedback for a high guess
        } else {
            showGuessFeedback('Lower', guess);
        }

        // Blank out the guess input field and return focus to it
        $('#guess').val('').focus();
        // Increment number of guesses
        numGuesses++;

        showDistanceFeedback(guess);

        // Set new previous guess
        previousGuess = guess;

        // Display the response
        $('.response').removeClass('off');
    } else {
        // Give error for invalid guess. Blank out the guess field and return focus.
        $('.error').removeClass('off').addClass('on');
        $('#guess').val('').focus();
    }
}

// Bind a click of the reset button to browser reload
$('#guess-form').on('click', '#reset', function(event) {
    event.preventDefault();
    location.reload();
});

// Bind form submission to the compareGuess function
$('#guess-form').submit(compareGuess);

// Bind enter key to the compareGuess function for browsers that don't always interpret an enter press as a form submission.
$('#guess').keypress(function(e) {
    if (e.which == 13) {
    compareGuess();
    }
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## é‡æ„ä½ è‡ªå·±çš„ä»£ç 

å¦‚æœæ‚¨å·²ç»é˜…è¯»äº†è¿™ä¸ª Javascript å‡½æ•°ç³»åˆ—ï¼Œæ‚¨åº”è¯¥å¯¹å‡½æ•°æœ‰è¶³å¤Ÿçš„äº†è§£ï¼Œå¯ä»¥å¼€å§‹å¯»æ‰¾æœºä¼šé€šè¿‡ä½¿ç”¨å®ƒä»¬æ¥æ”¹è¿›æ‚¨è‡ªå·±çš„ä»£ç ã€‚å¦‚æœä½ æœ‰ä¸€äº›æ—§ä»£ç ä½ å·²ç»æœ‰ä¸€æ®µæ—¶é—´æ²¡çœ‹äº†ï¼Œ**é€šè¿‡æŠŠå®ƒæ‹¿å‡ºæ¥å¹¶ä½¿ç”¨å‡½æ•°æ¥ç»ƒä¹ ä½ æ‰€å­¦åˆ°çš„ä¸œè¥¿ï¼Œè¿™äº›å‡½æ•°ä¼šä½¿ä½ çš„ä»£ç å˜å¾—æ›´å¥½ã€‚**

å­¦ä¹ å†™ä»£ç çœŸçš„å¾ˆæœ‰è¶£â€¦â€¦ä½†æ˜¯å…‰é **ä»£ç ä¸ä¼šè®©ä½ å·¥ä½œ**ã€‚ğŸ˜¢æŠ¥åå‚åŠ **å…è´¹è¾…å¯¼ä¼šè®®**ğŸ“åœ¨ [Rad Devon](https://raddevon.com/) å¦‚æœä½ æƒ³è·å¾—å¸®åŠ©ï¼Œå°†ä½ æ‰€çŸ¥é“çš„ä»£ç è½¬åŒ–ä¸ºå®é™…çš„èŒä¸šç”Ÿæ¶¯ã€‚ğŸ’°

## æœ¬ç³»åˆ—æ–‡ç« 

1.  [ä½ çš„åº”ç”¨æ‰‹å†Œ:ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Javascript å‡½æ•°](https://raddevon.com/articles/your-apps-playbook-why-use-functions-in-javascript/)
2.  [å£°æ˜ Javascript å‡½æ•°](https://raddevon.com/articles/declaring-javascript-functions/)
3.  [äº†è§£ Javascript å›è°ƒå‡½æ•°](https://raddevon.com/articles/javascript-callback-functions/)
4.  Marie Kondo æ‚¨çš„å¸¦å‡½æ•°çš„ Javascript ä»£ç 