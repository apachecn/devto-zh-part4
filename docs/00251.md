# CS åŸºç¡€:å¦‚ä½•é‡æ„å¸ƒå°”è¡¨è¾¾å¼

> åŸæ–‡:[https://dev . to/Jose/cs-basics-how-to-refactor-a-boolean-expression-4p ja](https://dev.to/jose/cs-basics-how-to-refactor-a-boolean-expression-4pja)

# [](#intro-to-series)ç³»åˆ—ä»‹ç»

è®¡ç®—æœºç§‘å­¦å¬èµ·æ¥å¦‚æ­¤æ¯ç‡¥ï¼Œå¦‚æ­¤å­¦æœ¯ï¼Œä»¥è‡³äºæœ‰æ—¶å¾ˆéš¾çŸ¥é“æ˜¯å¦æœ‰ä»»ä½•å¯¹æˆ‘ä»¬æ„å»ºå®é™…è½¯ä»¶çš„å·¥ä½œæœ‰ç”¨çš„çŸ¥è¯†ã€‚

å½“ç„¶ï¼Œæˆ‘æ˜¯åŠå¼€ç©ç¬‘ã€‚è®¡ç®—æœºç§‘å­¦å¯¹äºç†è§£è®¡ç®—æœºä¸­å‘ç”Ÿçš„äº‹æƒ…éå¸¸é‡è¦ï¼Œä½†æˆ‘çŸ¥é“è¿™å¬èµ·æ¥ä¸å¦‚å­¦ä¹ è¡Œä¸šä¸­éœ€è¦çš„ç‰¹å®šæŠ€æœ¯æœ‰å¸å¼•åŠ›ã€‚

é€šè¿‡è¿™ä¸€ç³»åˆ—çš„æ–‡ç« ï¼Œæˆ‘å°†è¯•ç€ä»é‚£äº›å†—é•¿ä¹å‘³çš„ä¹¦ä¸­æå–ä¸€äº›æˆ‘ä»¬å¯ä»¥é©¬ä¸Šå¼€å§‹åº”ç”¨çš„ä¸œè¥¿ï¼Œæˆ‘å¸Œæœ›ä½ ä¼šè§‰å¾—æœ‰ç”¨ã€‚

æˆ‘æ€»æ˜¯ä»æœ€ç›´æ¥çš„å®é™…éƒ¨åˆ†å¼€å§‹ï¼Œç„¶åæˆ‘ä¼šè§£é‡Šæ›´å¤šçš„æ½œåœ¨åŸå› å’Œæœ¯è¯­ã€‚

ä»Šå¤©è®©æˆ‘ä»¬ä»ä¸€äº›å¸ƒå°”è¡¨è¾¾å¼å¼€å§‹ã€‚

# [](#why-is-it-useful-to-refactor-a-boolean-expression)é‡æ„ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ä¸ºä»€ä¹ˆæœ‰ç”¨ï¼Ÿ

åœ¨æˆ‘èº«ä¸Šå‘ç”Ÿè¿‡å¾ˆå¤šæ¬¡ï¼Œå½“é‡æ„ä¸€ä¸ªæ¡ä»¶æ—¶ï¼Œæˆ‘å¿…é¡»æ”¹å˜å®ƒæ¥åˆ›å»ºä¸€ä¸ªåœ¨ç±»ä¸­æœ‰æ„ä¹‰çš„æ–¹æ³•ã€‚è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚

å‡è®¾æˆ‘ä»¬æœ‰ä¸‹é¢çš„ç±»(åœ¨ Javascript ä¸­ï¼Œä½†å‡ ä¹å¯ä»¥åº”ç”¨äºä»»ä½•è¯­è¨€):

```
class Person {
  constructor(name, active, email = null) {
    this.name = name;
    this.active = active;
    this.email = email;
  }

  hasEmail() {
    return this.email !== null;
  }

  isActive() {
    return this.active;
  }

  sendEmail() {
    if (!this.isActive() || !this.hasEmail()) {
      return false;
    }
    // ... send email ...
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œæˆ‘ä»¬æ„è¯†åˆ°æ‹¥æœ‰ä¸€ä¸ªå†…éƒ¨æ–¹æ³•æ¥å‘Šè¯‰æˆ‘ä»¬ç”¨æˆ·æ˜¯å¦å¯ä»¥æ¥æ”¶ç”µå­é‚®ä»¶å¯èƒ½æ›´å®¹æ˜“ã€‚æ ¹æ®ä»£ç ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªæ´»è·ƒçš„ç”¨æˆ·ï¼Œå¹¶æœ‰ä¸€ä¸ªç”µå­é‚®ä»¶è®¾ç½®ã€‚

æˆ‘ä»¬å¯ä»¥è¿™æ ·åš:

```
 canReceiveEmail() {
    return ; // What do we return here? ğŸ¤”
  }

  sendEmail() {
    if (!this.canReceiveEmail()) {
      return false;
    }
    // ...
  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚ä½ æ‰€è§ï¼Œ*sendmeil*æ–¹æ³•ç°åœ¨å¯è¯»æ€§æ›´å¥½äº†ï¼Œ**ä½†æ˜¯æˆ‘ä»¬åº”è¯¥åœ¨ *canReceiveEmail()* æ–¹æ³•**ä¸­æ”¾ä»€ä¹ˆå‘¢ï¼Ÿ

æˆ‘è®©ä½ æƒ³ä¸€ä¼šå„¿...ğŸ™‚

ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”

ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤¨ğŸ¶ğŸ¤¨ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”

ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”

ä½ æƒ³é€šäº†å—ï¼Ÿ

æˆ‘ä»¬éœ€è¦çš„æ˜¯æ¡ä»¶çš„ç›¸åå€¼:

```
!this.isActive() || !this.hasEmail(); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯¥è¡¨è¾¾å¼çš„å¦å®šå½¢å¼æ˜¯:

```
this.isActive() && this.hasEmail(); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘æƒ³å‡­ç›´è§‰æˆ‘ä»¬å¯ä»¥ç†è§£ï¼Œå¦‚æœæˆ‘ä»¬è¦æ‰¾çš„æ˜¯:

*   ç”¨æˆ·æœªæ¿€æ´»*æˆ–*æ²¡æœ‰ç”µå­é‚®ä»¶ï¼›

ç›¸åçš„æƒ…å†µæ˜¯:

*   ç”¨æˆ·æ˜¯æ´»è·ƒçš„*å¹¶ä¸”*æœ‰ç”µå­é‚®ä»¶ã€‚

æ‰€ä»¥æœ€åä¸€ä¸ªç±»åº”è¯¥æ˜¯è¿™æ ·çš„:

```
class Person {
  constructor(name, active, email = null) {
    this.name = name;
    this.active = active;
    this.email = email;
  }

  hasEmail() {
    return this.email !== null;
  }

  isActive() {
    return this.active;
  }

  canReceiveEmail() {
    return this.isActive() && this.hasEmail();
  }

  sendEmail() {
    if (!this.canReceiveEmail()) { // Notice negation of the method with !
      return false;
    }
    // ... send email ...
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

[(å‚è§ JSbin)](https://jsbin.com/lusafuv/edit?js,console)

æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºè´Ÿç‰ˆæœ¬ *cannotReceiveEmail* ï¼Œä½†æ˜¯æˆ‘æ›´å–œæ¬¢ä½¿ç”¨â€œæ­£â€æ–¹æ³•åï¼Œå› ä¸ºå®ƒä»¬åœ¨ä»£ç çš„å…¶ä»–åœ°æ–¹æ›´æœ‰ç”¨ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬è¿™æ ·åšäº†ï¼Œç»“æœå°†æ˜¯:

```
cannotReceiveEmail() {
  return !(this.isActive() && this.hasEmail());
}

sendEmail() {
  if (this.cannotReceiveEmail()) {
    return false;
  }
  // ... send email ...
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# [](#computer-science-behind-solution)è®¡ç®—æœºç§‘å­¦èƒŒåçš„è§£å†³æ–¹æ¡ˆ

ä½ åˆšæ‰çœ‹åˆ°çš„å¹¶ä¸æ˜¯æœ€è¿‘æ‰å‘ç°çš„ï¼Œæå‡ºè¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„æ•°å­¦å®¶å¥¥å¤æ–¯éƒ½Â·å¾·Â·æ‘©æ ¹äº 1871 å¹´å»ä¸–ã€‚

è¿™æ¡è§„åˆ™ï¼Œè¿åŒæˆ‘ä»¬ç¨åä¼šçœ‹åˆ°çš„å¦ä¸€æ¡ï¼Œè¢«ç§°ä¸ºâ€œå¾·æ‘©æ ¹å®šå¾‹â€ã€‚å®ƒä»¬æ˜¯ä¸€ä¸ªæ›´å¤§çš„æ•°å­¦é¢†åŸŸçš„ä¸€éƒ¨åˆ†ï¼Œåœ¨ä»»ä½•è®¡ç®—æœºç§‘å­¦è¯¾ç¨‹ä¸­éƒ½æœ‰å­¦ä¹ ï¼Œå«åšå¸ƒå°”ä»£æ•°ã€‚

å¦ä¸€æ¡è§„åˆ™å¦‚ä¸‹ã€‚å¦‚æœæˆ‘ä»¬æœ‰è¿™ä¸ªè¡¨è¾¾å¼:

```
const willDieSoon = !this.isYoung && !this.worksOut 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç›¸å½“äº:

```
const willDieSoon = !(this.isYoung || this.worksOut) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä½ æ²¡æœ‰å¾—åˆ°è¿™ä¸ªï¼Œæƒ³æƒ³åœ¨æ‰€æœ‰å¯èƒ½çš„æƒ…å†µä¸‹ä¼šå‘ç”Ÿä»€ä¹ˆ:

è€ƒè™‘*æ˜¯å¹´è½»çš„*æ˜¯çœŸ/å‡å’Œ*å·¥ä½œå‡º*æ˜¯çœŸ/å‡ã€‚è¡¨è¾¾å¼çš„ç»“æœä¼šæ˜¯ä»€ä¹ˆï¼Ÿè¿™å’Œç¬¬ä¸€ç§æƒ…å†µä¸ä¸€æ ·å—ï¼Ÿ

ä¸ºäº†çœŸæ­£ç†è§£è¿™ä¸€ç‚¹ï¼Œåˆ›å»ºä¸€ä¸ªå¯èƒ½æ€§çš„å°è¡¨æ ¼é€šå¸¸æ˜¯æœ‰ç”¨çš„ã€‚æœ€åä¸€åˆ—ä»£è¡¨: *willDieSoon* ã€‚

| å¹´è½»çš„ | å·¥ä½œåŒº | *å¹´è½»æˆ–ä¸å·¥ä½œ* | *ï¼(å¹´è½»æˆ–å·¥ä½œæ—¶é—´)* |
| --- | --- | --- | --- |
| é”™è¯¯çš„ | é”™è¯¯çš„ | é”™è¯¯çš„ | çœŸå®çš„ |
| çœŸå®çš„ | é”™è¯¯çš„ | çœŸå®çš„ | é”™è¯¯çš„ |
| é”™è¯¯çš„ | çœŸå®çš„ | çœŸå®çš„ | é”™è¯¯çš„ |
| çœŸå®çš„ | çœŸå®çš„ | çœŸå®çš„ | é”™è¯¯çš„ |

åŒæ ·çš„è¡¨å¯ä»¥åº”ç”¨äºç¬¬ä¸€ä¸ªè¡¨è¾¾å¼:

| å¹´è½»çš„ | å·¥ä½œåŒº | *ï¼isYoung å’Œï¼å·¥ä½œæ—¶é—´* |
| --- | --- | --- |
| é”™è¯¯çš„ | é”™è¯¯çš„ | çœŸå®çš„ |
| çœŸå®çš„ | é”™è¯¯çš„ | é”™è¯¯çš„ |
| é”™è¯¯çš„ | çœŸå®çš„ | é”™è¯¯çš„ |
| çœŸå®çš„ | çœŸå®çš„ | é”™è¯¯çš„ |

## [](#the-morgans-laws)æ‘©æ ¹å®šå¾‹

å› æ­¤ï¼Œä»¥æ­£å¼æ–¹å¼ç¼–å†™çš„ä¸¤æ¡è§„åˆ™æ˜¯:

[![De Morgan's Laws](img/af5129d594eddaec6d08acf171d77e57.png "De Morgan's Laws")T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--OYnPDA3V--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://josemdev.cimg/morgan_laws.png)

è¿™å¼ å›¾ç‰‡æ¥è‡ªç»´åŸºç™¾ç§‘ï¼Œå› ä¸ºæˆ‘ä¸çŸ¥é“å¦‚ä½•åœ¨ dev.to ä¸­æ·»åŠ æ•°å­¦ç¬¦å·ğŸ˜ã€‚

æ‰€ä»¥åœ¨ Javascript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·è¯´:

```
!(P || Q) == !P && !Q

!(P && Q) == !P || !Q 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬ä½¿ç”¨äº†ç¬¬äºŒç§æ–¹æ³•æ¥é‡æ„æˆ‘ä»¬çš„ä»£ç ã€‚

æˆ‘ä»¬ä»*å¼€å§‹ï¼P ||ï¼é—®*å¹¶ä»¥*ç»“æŸï¼(P & & Q)* ã€‚ç°åœ¨å°±æ¥å›é¡¾ä¸€ä¸‹:

```
// we started with this condition to check before sending the email:
!this.isActive() || !this.hasEmail()

// Then, we moved the logic to canReceiveEmail()
this.isActive() && this.hasEmail()

// And used the negation of that:
!this.isActive() || !this.hasEmail() == !(this.canReceiveEmail())

// Which is:
!this.isActive() || !this.hasEmail() == !(this.isActive() && this.hasEmail());

// So:
!P || !Q == !(P && B) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#other-boolean-algebra-laws)å…¶ä»–å¸ƒå°”ä»£æ•°æ³•åˆ™

å¦‚æœä½ ä¸çŸ¥é“å¸ƒå°”ä»£æ•°å®šå¾‹ï¼Œä¸è¦æ‹…å¿ƒï¼ä½ å¯èƒ½åœ¨åº”ç”¨å…¶ä»–çš„ï¼Œæ¯”å¦‚:

[![Commutativity](img/7faae9133df33be3e67de76e9513b719.png "Commutativity")T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--MaW3QMt0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://josemdev.cimg/commutativity.png)

é‚£äº›æ„å‘³ç€:

```
(weAreInChrome() || weAreInFirefox()) === (weAreInFirefox() || weAreInChrome())

(isRaining() && isCloudy()) === (isCloudy() && isRaining()) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‰€ä»¥ï¼Œä¹Ÿè®¸å‡­ç›´è§‰ï¼Œä½ çŸ¥é“æœ‰ä¸¤ä¸ªå€¼çš„å¸ƒå°”æ¡ä»¶å¯ä»¥æŒ‰é¡ºåºäº¤æ¢ï¼Œç»“æœæ˜¯ä¸€æ ·çš„(ğŸ¤“ğŸ—¯ï¸ *è¿™å°±æ˜¯äº¤æ¢æ€§ï¼*)ã€‚

è¿˜æœ‰è®¸å¤šå…¶ä»–æœ‰ç”¨çš„å¸ƒå°”å®šå¾‹ï¼Œæ‰€ä»¥æˆ‘å¯èƒ½ä¼šåœ¨åé¢çš„ç³»åˆ—æ–‡ç« ä¸­ç”¨ä¸é‚£ä¹ˆç›´è§‚çš„å¸ƒå°”é€»è¾‘åšç¬¬äºŒéƒ¨åˆ†ã€‚

ä½ è§‰å¾—è¿™ä¸ªæœ‰ç”¨å—ï¼Ÿè¯·åœ¨ Twitter ä¸Šå‘Šè¯‰æˆ‘[ï¼ğŸ‘‹ ğŸ™‚](https://twitter.com/jmgilgado)

## [](#references)å‚è€ƒæ–‡çŒ®

*   [å¸ƒå°”ä»£æ•°](https://en.wikipedia.org/wiki/Boolean_algebra)
*   [å¾·æ‘©æ ¹å®šå¾‹](https://en.wikipedia.org/wiki/De_Morgan%27s_laws)