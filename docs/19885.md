# å­¦ä¹ æ‰“å­—ç¨¿æ—æŒº

> åŸæ–‡:[https://dev.to/ethanarrowood/learn-typescript-linting-3igo](https://dev.to/ethanarrowood/learn-typescript-linting-3igo)

> è¿™ç¯‡æ–‡ç« æ”¹ç¼–è‡ªæˆ‘çš„ä¸ªäººåšå®¢[å±±é¡¶](https://blog.matterhorn.dev)ä¸Šçš„ä¸€ä¸ªæ›´è¯¦ç»†çš„ç‰ˆæœ¬ã€‚å»ºè®®æ‚¨é˜…è¯»åŸå§‹çš„ [Learn TypeScript æ—æŒº](https://blog.matterhorn.dev/posts/learn-typescript-linting-part-1)æ–‡ç« ç³»åˆ—ï¼Œå› ä¸ºå®ƒæœ‰æ›´è¯¦ç»†çš„ç»†èŠ‚ã€ç¤ºä¾‹ï¼Œç”šè‡³è¿˜æœ‰åç»­çš„çŸ¥è¯†åº“ã€‚

## [](#eslint)ESLint

### 1ã€‚å®‰è£…æ–¯æ‹‰å¤«è¯­&@ typescript-æ–¯æ‹‰å¤«è¯­

```
npm i -D eslint @typescript-eslint/{eslint-plugin,parser} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#2-create-eslint-configuration-file)2ã€‚åˆ›å»º eslint é…ç½®æ–‡ä»¶

```
touch .eslintrc.json 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°†ä»¥ä¸‹æ–‡æœ¬å¤åˆ¶åˆ°æ–°çš„`eslintrc`æ–‡ä»¶

```
{  "extends":  ["eslint:recommended",  "plugin:@typescript-eslint/recommended"],  "parser":  "@typescript-eslint/parser",  "plugins":  ["@typescript-eslint"],  "env":  {  "node":  true  },  "parserOptions":  {  "ecmaVersion":  5,  "sourceType":  "module"  },  "rules":  {}  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#3-add-lint-npm-script)3ã€‚æ·»åŠ  lint npm è„šæœ¬

åœ¨ package.json ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªæ–°è„šæœ¬:

```
{  "scripts":  {  "lint":  "eslint 'src/**/*.ts'"  }  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#4-run)4ã€‚å¿«è·‘ï¼

è¿è¡Œæ–°çš„æ—æŒºå‘½ä»¤:

```
npm run lint 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœæ‚¨æƒ³è‡ªåŠ¨ä¿®å¤æ—æŒºé—®é¢˜ï¼Œè¯·ä¼ é€’`--fix`æ ‡å¿—:

```
npm run lint -- --fix 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#5-congrats)5ã€‚ç¥è´ºğŸ‰

å¹²å¾—å¥½ï¼æ‚¨çš„ TypeScript ç°åœ¨é…ç½®äº† ESLintã€‚

å¦‚æœä½ æœ‰å…´è¶£è¿›ä¸€æ­¥é…ç½® ESLint å¹¶å­¦ä¹ åœ¨`.eslintrc.json`ä¸­æ‰¾åˆ°çš„ä¸€äº›ç‰¹å®šå±æ€§ï¼Œè¯·æŸ¥çœ‹å±±é¡¶åšå®¢ä¸Šçš„[ç¬¬ 1 éƒ¨åˆ†](https://blog.matterhorn.dev/posts/learn-typescript-linting-part-1)çš„å­¦ä¹ ç±»å‹è„šæœ¬æ—æŒºç³»åˆ—ã€‚è¿™ç¯‡æ–‡ç« æ·±å…¥è®¨è®ºäº†è¯¸å¦‚æŒ‡å®šç¯å¢ƒ& ecmaVersionã€é…ç½®åˆ†å·ç”¨æ³•å’Œç¼©è¿›æ ·å¼ä¹‹ç±»çš„è§„åˆ™ç­‰ç»†èŠ‚ï¼Œå¹¶æ¶µç›–äº†å°† JavaScript é¡¹ç›®è½¬æ¢ä¸º TypeScript æ—¶æœ€å¸¸è§çš„é—®é¢˜ä¹‹ä¸€(`no-unused-vars`é”™è¯¯)ã€‚

æ¥ä¸‹æ¥æ˜¯å…³äºå°†æµè¡Œçš„ formatters Standard å’Œ Prettier ä¸ ESLint é›†æˆçš„éƒ¨åˆ†ã€‚

* * *

## [](#standard)æ ‡å‡†

æœ¬èŠ‚å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨æµè¡Œçš„[æ ‡å‡†](https://standardjs.com/)è‡ªä»¥ä¸ºæ˜¯çš„æ ¼å¼åŒ–ç¨‹åºæ¥å®‰è£…å’Œé…ç½®æ–°çš„ ESLintã€‚

å…³äºæ ‡å‡†åº“ï¼Œæˆ‘æœ€å–œæ¬¢åˆ†äº«çš„äº‹æƒ…ä¹‹ä¸€æ˜¯ä»–ä»¬å¯¹ [*æˆ‘èƒ½é…ç½®è§„åˆ™ x*](https://standardjs.com/index.html#i-disagree-with-rule-x-can-you-change-it) é—®é¢˜çš„å›åº”:

> ä¸ã€‚æ ‡å‡†çš„å…¨éƒ¨æ„ä¹‰æ˜¯é€šè¿‡é¿å…å…³äºä»£ç é£æ ¼çš„[è‡ªè¡Œè½¦è„±è½](https://www.freebsd.org/doc/en/books/faq/misc.html#bikeshed-painting)æ¥èŠ‚çœä½ çš„æ—¶é—´ã€‚ç½‘ä¸Šæœ‰å¾ˆå¤šå…³äºåˆ¶è¡¨ç¬¦å’Œç©ºæ ¼çš„äº‰è®ºã€‚é‚£å°†æ°¸è¿œæ— æ³•è§£å†³ã€‚è¿™äº›äº‰è®ºåªä¼šåˆ†æ•£å®Œæˆå·¥ä½œçš„æ³¨æ„åŠ›ã€‚åœ¨ä¸€å¤©ç»“æŸçš„æ—¶å€™ï¼Œä½ å¿…é¡»â€œéšä¾¿æŒ‘ç‚¹ä»€ä¹ˆâ€ï¼Œè¿™å°±æ˜¯æ ‡å‡†çš„å…¨éƒ¨å“²å­¦â€”â€”å®ƒæ˜¯ä¸€å †æ˜æ™ºçš„â€œéšä¾¿æŒ‘ç‚¹ä»€ä¹ˆâ€çš„æ„è§ã€‚å¸Œæœ›ç”¨æˆ·çœ‹åˆ°ä¸ºè‡ªå·±çš„è§‚ç‚¹è¾©æŠ¤çš„ä»·å€¼ã€‚

### [](#1-install-standard)1ã€‚å®‰è£…æ ‡å‡†

```
npm i -D eslint-config-standard eslint-plugin-{standard,promise,import,node} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#2-modify-eslint-configuration)2ã€‚ä¿®æ”¹ eslint é…ç½®

åœ¨`.eslintrc.json`ä¸­ï¼Œå°†`"standard"`æ·»åŠ åˆ°`"extends"`åˆ—è¡¨çš„æœ«å°¾ã€‚

```
{  "extends":  ["eslint:recommended",  "plugin:@typescript-eslint/recommended",  "standard"],  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#3-run-and-evaluate-the-new-output)3ã€‚è¿è¡Œå¹¶è¯„ä¼°æ–°çš„è¾“å‡º

ä½¿ç”¨`npm`è¿è¡Œ`lint`å‘½ä»¤ã€‚è¾“å‡ºåº”è¯¥ç•¥æœ‰ä¸åŒï¼Œå› ä¸ºç°åœ¨å·²ç»é…ç½®äº†æ–°çš„è§„åˆ™ï¼Œåˆå¹¶äº†æ ‡å‡†çš„è‡ªä»¥ä¸ºæ˜¯çš„æ ¼å¼ã€‚è®°å¾—ä½¿ç”¨`--fix`é€‰é¡¹æ¥è‡ªåŠ¨ä¿®å¤æŸäº›é—®é¢˜ã€‚

* * *

## [](#prettier)æ¼‚äº®äº›

è¿™ä¸€èŠ‚å°†ä»‹ç»å¦‚ä½•å®‰è£…å’Œè®¾ç½®éå¸¸æµè¡Œçš„[beautiful](https://prettier.io/)åº“ã€‚

> æˆ‘å»ºè®®ä½¿ç”¨æ ‡å‡†æˆ–æ¼‚äº®ï¼Œä½†ä¸è¦åŒæ—¶ä½¿ç”¨ä¸¤è€…ï¼

### [](#1-install-prettier)1ã€‚å®‰è£…æ›´æ¼‚äº®

```
npm i -D prettier eslint-config-prettier eslint-plugin-prettier 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#2-update-eslint-configuration)2ã€‚æ›´æ–° eslint é…ç½®

é¦–å…ˆå°†`"plugin:prettier/recommended"`æ·»åŠ åˆ°`"extends"`åˆ—è¡¨ï¼Œç„¶åå°†`"prettier"`æ·»åŠ åˆ°`"plugins"`åˆ—è¡¨ã€‚

```
{
- "extends": ["eslint:recommended", "plugin:@typescript-eslint/recommended"],
+ "extends": ["eslint:recommended", "plugin:@typescript-eslint/recommended", "plugin:prettier/recommended"],
  "parser": "@typescript-eslint/parser",
- "plugins": ["@typescript-eslint"], + "plugins": ["@typescript-eslint", "prettier"],
  "env": { "node": true },
  "parserOptions": {
    "ecmaVersion": 5,
    "sourceType": "module"
  },
  "rules": {
    "no-console": "warn",
    "@typescript-eslint/indent": ["error", 2]
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#3-run-evaluate-and-fix)3ã€‚è¿è¡Œã€è¯„ä¼°å’Œä¿®å¤

å°±åƒå‰ä¸¤èŠ‚ä¸€æ ·ï¼Œä½¿ç”¨ npm è„šæœ¬`lint`æ¥å°è¯•æ–°çš„æ—æŒºè§„åˆ™ã€‚ä½¿ç”¨`--fix`æ ‡å¿—è‡ªåŠ¨ä¿®å¤é”™è¯¯ã€‚

* * *

ğŸ‰å†æ¬¡ç¥è´ºï¼ç°åœ¨ï¼Œæ‚¨çš„ TypeScript é¡¹ç›®ä¸ä»…é…ç½®äº† ESLintï¼Œè¿˜é…ç½®äº†ä¸€ä¸ªæ—¶é«¦çš„æ ¼å¼åŒ–ç¨‹åºã€‚

å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºé›†æˆæ ¼å¼åŒ–å™¨ç”šè‡³é…ç½®æ›´æ¼‚äº®çš„ç‰¹å®šè§„åˆ™çš„çŸ¥è¯†ï¼Œè¯·æŸ¥çœ‹ Mountain Top åšå®¢ä¸Šçš„å­¦ä¹  TypeScript æ—æŒºç³»åˆ—çš„ç¬¬ 2 éƒ¨åˆ†ã€‚

* * *

æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼›æˆ‘å¸Œæœ›ä½ å–œæ¬¢å®ƒï¼æˆ‘å¾ˆä¹æ„åœ¨ Twitter ( [@ArrowoodTech](https://twitter.com/ArrowoodTech) )ä¸‹é¢æˆ–ä¸Šé¢çš„è¯„è®ºä¸­è°ˆè®ºæ—æŒºå’Œæ ¼å¼åŒ–è€…ã€‚