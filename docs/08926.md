# Sequelize å’Œ Postgres å…¥é—¨

> åŸæ–‡:[https://dev . to/nedsoft/getting-started-with-sequelize-and-postgres-EMP](https://dev.to/nedsoft/getting-started-with-sequelize-and-postgres-emp)

[Sequelize](https://github.com/sequelize/sequelize#sequelize) æ˜¯ä¸€ä¸ªåŸºäº promise çš„ Node.js ORMï¼Œé€‚ç”¨äº Postgresã€MySQLã€MariaDBã€SQLite å’Œ Microsoft SQL Serverã€‚å®ƒå…·æœ‰å¯é çš„äº‹åŠ¡æ”¯æŒã€å…³ç³»ã€æ€¥åˆ‡åŠ è½½å’Œå»¶è¿ŸåŠ è½½ã€è¯»å–å¤åˆ¶ç­‰ç‰¹æ€§ã€‚

> ORM åº“æ˜¯ç”¨ä½ é€‰æ‹©çš„è¯­è¨€ç¼–å†™çš„å®Œå…¨æ™®é€šçš„åº“ï¼Œå®ƒå°è£…äº†æ“çºµæ•°æ®æ‰€éœ€çš„ä»£ç ï¼Œæ‰€ä»¥ä½ ä¸å†ä½¿ç”¨ SQL ä½ å¯ä»¥ç”¨ä½ æ­£åœ¨ä½¿ç”¨çš„åŒä¸€ç§è¯­è¨€ç›´æ¥ä¸ä¸€ä¸ªå¯¹è±¡äº¤äº’- [stackoverflow](https://stackoverflow.com/questions/1279613/what-is-an-orm-how-does-it-work-and-how-should-i-use-one)

å°½ç®¡ Sequelize æ”¯æŒå…¶ä»–å‡ ç§æ•°æ®åº“å®¢æˆ·æœºï¼Œä½†æœ¬æ–‡ä¸»è¦è®¨è®ºå¦‚ä½•å°† Sequelize ä¸ Postgres ç»“åˆä½¿ç”¨ã€‚æˆ‘ä»¬å°†å»ºç«‹ä¸€ä¸ªç®€å•çš„åšå®¢ï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºå¸–å­ï¼ŒæŸ¥çœ‹å¸–å­å’Œæ·»åŠ è¯„è®ºã€‚

æœ¬æ–‡åˆ†ä¸ºä¸¤éƒ¨åˆ†:

*   ç¬¬ä¸€éƒ¨åˆ†-é¡ºåºè®¾ç½®ã€é…ç½®ã€è¿ç§»å’Œæ’­ç§ã€‚
*   ç¬¬äºŒéƒ¨åˆ†-ç”¨åºåˆ—æ‰§è¡Œ CRUDã€‚

### [](#requirements)è¦æ±‚

*   å·²å®‰è£…çš„èŠ‚ç‚¹
*   å®‰è£…äº† npm æˆ–çº±çº¿

## [](#part-one)ç¬¬ä¸€éƒ¨åˆ†

å¦‚æœæ‚¨å°šæœªåˆ›å»º express é¡¹ç›®ï¼Œè¯·å¿«é€Ÿåˆ›å»ºå¹¶åœ¨ç»ˆç«¯ä¸­æ‰“å¼€è¯¥é¡¹ç›®ã€‚åœ¨é¡¹ç›®çš„æ ¹æ–‡ä»¶å¤¹ä¸­ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…å¿…è¦çš„ä¾èµ–é¡¹:

```
npm install sequelize sequelize-cli pg pg-hstore 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸Šé¢å‘½ä»¤ä¸­å®‰è£…çš„åº“çš„ç®€è¦è¯´æ˜:

**åºåˆ—**æ˜¯åºåˆ—åº“æœ¬èº«ã€‚

 æ˜¯ä¸€ä¸ªè½¯ä»¶åŒ…ï¼Œå®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿä» cli é€šè¿‡`sequelize`ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ã€‚

[**pg**](https://www.npmjs.com/package/pg)postgres çš„ç®€ç§°æ˜¯ Node.js çš„ Postgres å®¢æˆ·ç«¯

[**pg-hstore**](https://www.npmjs.com/package/pg-hstore) æ˜¯å°† JSON æ•°æ®åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¸º hstore æ ¼å¼çš„èŠ‚ç‚¹åŒ…ã€‚

æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬åˆ›å»ºåºåˆ—é…ç½®ï¼Œä¸ºæ­¤ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤åˆ›å»ºä¸€ä¸ªåä¸º`.sequelizerc`
çš„æ–‡ä»¶

```
touch .sequelizerc 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°†ä¸‹é¢çš„ä»£ç å¤åˆ¶åˆ°`.seqluelizerc`æ–‡ä»¶:

```
const path = require('path')

module.exports = {
  config: path.resolve('./database/config', 'config.js'),
  'models-path': path.resolve('./database/models'),
  'seeders-path': path.resolve('./database/seeders'),
  'migrations-path': path.resolve('./database/migrations'),
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

Sequelize ä½¿ç”¨æŒ‡å®šçš„è·¯å¾„ä½¿ç”¨`.sequelizerc`æ–‡ä»¶æ¥ç”Ÿæˆé…ç½®å’Œæ¨¡å‹ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥ç”Ÿæˆé…ç½®:

```
sequelize init 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œæ‚¨åº”è¯¥æœ‰ä¸€ä¸ªåä¸º`database`çš„æ–°ç›®å½•ï¼Œå¸¦æœ‰å¦‚ä¸‹æ‰€ç¤ºçš„è„šæ‰‹æ¶:

[![](../Images/d988ac5eb0e5b301aebf4365c744a229.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--BcI7VKl2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/v1/./db-folder-struct.png)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥ç¼–è¾‘ä¸€ä¸‹`database/config/config.js`ã€‚
ç”¨ä¸‹é¢çš„ä»£ç æ›¿æ¢`database/config/config.js`çš„å†…å®¹:

```
require('dotenv').config()

module.exports = {
  development: {
    url: process.env.DEV_DATABASE_URL,
    dialect: 'postgres',
  },
  test: {
    url: process.env.TEST_DATABASE_URL,
    dialect: 'postgres',
  },
  production: {
    url: process.env.DATABASE_URL,
    dialect: 'postgres',
  },
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å› ä¸ºæˆ‘ä»¬çš„é‡ç‚¹æ˜¯åœ¨ Postgres ä¸­ä½¿ç”¨ Sequelizeï¼Œæ‰€ä»¥æˆ‘ä»¬ç®€åŒ–äº† Postgres çš„é…ç½®ã€‚

å› ä¸ºæˆ‘ä»¬ä½¿ç”¨ Postgresï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ä½¿ç”¨è¿æ¥å­—ç¬¦ä¸²æ¥è¿æ¥æ•°æ®åº“ã€‚åˆ›å»ºä¸¤ä¸ª Postgres æ•°æ®åº“ï¼Œä¸€ä¸ªç”¨äºå¼€å‘ï¼Œä¸€ä¸ªç”¨äºæµ‹è¯•(å¦‚æœæ‚¨çš„é¡¹ç›®éœ€è¦æµ‹è¯•)ã€‚

### [](#how-to-create-a-postgres-database-connection-string)å¦‚ä½•åˆ›å»º Postgres æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²

å¦‚æœæ‚¨å·²ç»åˆ›å»ºäº†æ•°æ®åº“ï¼Œå¯ä»¥è·³åˆ°ä¸‹ä¸€éƒ¨åˆ†ã€‚

*æ–¹æ³• 1*

å¦‚æœæ‚¨åœ¨æœ¬åœ°å®‰è£…äº† Postgresï¼Œè¯·æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤åˆ›å»ºä¸€ä¸ªæ•°æ®åº“å¹¶ç”Ÿæˆè¿æ¥å­—ç¬¦ä¸²ã€‚æ‰“å¼€ç»ˆç«¯å¹¶è¿è¡Œä¸‹é¢çš„å‘½ä»¤:

```
createdb dev_db -U <db_user>
createdb test_db -U <db_user> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸Šè¿°æ•°æ®åº“çš„è¿æ¥å­—ç¬¦ä¸²å°†æ˜¯:

```
postgres://<db_user>:<db_password>@127.0.0.1:5432/dev_db
postgres://<db_user>:<db_password>@127.0.0.1:5432/test_db 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œåˆ›å»ºä¸€ä¸ª`.env`æ–‡ä»¶ï¼Œå¹¶å°†ä¸‹é¢çš„ä»£ç ç‰‡æ®µå¤åˆ¶åˆ°å…¶ä¸­ã€‚

```
DATABASE_URL=
DEV_DATABASE_URL=postgres://<db_user>:<db_password>@127.0.0.1:5432/dev_db
TEST_DATABASE_URL=postgres://<db_user>:<db_password>@127.0.0.1:5432/test_db 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨ä½¿ç”¨ Heroku è¿›è¡Œç”Ÿäº§ï¼Œä¸€æ—¦æ‚¨æ·»åŠ äº† Postgres é™„åŠ ç»„ä»¶ï¼ŒHeroku å°†ç”Ÿæˆä¸€ä¸ªè¿æ¥å­—ç¬¦ä¸²å¹¶æ³¨å…¥åˆ°ç¯å¢ƒå˜é‡`DATABASE_URL`ä¸­ã€‚

*æ–¹æ³•äºŒ*

å¦‚æœæœ¬åœ°æ²¡æœ‰å®‰è£… Postgresï¼Œå¯ä»¥ä½¿ç”¨ [ElephantSQL](https://www.elephantsql.com/) æ¥åˆ›å»ºæ•°æ®åº“ã€‚

### [](#creating-models-and-migrations)åˆ›å»ºæ¨¡å‹å’Œè¿ç§»

æˆ‘ä»¬éœ€è¦åˆ›å»ºç”¨æˆ·ã€å¸–å­å’Œè¯„è®ºæ¨¡å‹ã€‚ä¸ºæ­¤ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤:

```
sequelize model:generate --name User --attributes name:string,email:string

sequelize model:generate --name Post --attributes title:string,content:text,userId:integer

sequelize model:generate --name Comment --attributes postId:integer,comment:text,userId:integer 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸Šé¢çš„æ¯ä¸ªå‘½ä»¤å°†åˆ†åˆ«åœ¨`/database/migrations`å’Œ`database/models`ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªè¿ç§»å’Œä¸€ä¸ªæ¨¡å‹ã€‚

**æ³¨æ„**ï¼Œç¡®ä¿`--attributes`å®šä¹‰ä¹‹é—´æ²¡æœ‰ç©ºæ ¼ã€‚

ä¾‹å¦‚ï¼Œ`--attributes postId:integer, comment:text, userId:integer`ä¼šå› ä¸ºå±æ€§ä¹‹é—´çš„ç©ºç™½è€ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯`ERROR: Attribute '' cannot be parsed: Cannot read property 'dataType' of undefined`ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è¿ç§»å’Œæ¨¡å‹è¿›è¡Œä¸€äº›æ›´æ”¹ã€‚
é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å‘`FOREIGN_KEY`å±æ€§(userIdï¼ŒpostId)æ·»åŠ `NOT NULL`çº¦æŸã€‚æˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨ Sequelize æ—¶ï¼Œæˆ‘ä¸çŸ¥é“è¿™ä¸€ç‚¹ï¼Œè€Œä¸”æ€¥åˆ‡åŠ è½½çš„æ¨¡å‹ä¸å·¥ä½œã€‚åœ¨è¿ç§»ä¸­ç¼–è¾‘å¦‚ä¸‹æ‰€ç¤ºçš„`FOREIGN_KEY`å±æ€§:

```
userId: {
      type: Sequelize.INTEGER,
      allowNull: false,
    },

postId: {
      type: Sequelize.INTEGER,
      allowNull: false,
    }, 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç¼–è¾‘`models/index.js`æ–‡ä»¶å¦‚ä¸‹:

```
 const fs = require('fs');
const path = require('path');
const Sequelize = require('sequelize');
const envConfigs =  require('../config/config');

const basename = path.basename(__filename);
const env = process.env.NODE_ENV || 'development';
const config = envConfigs[env];
const db = {};

let sequelize;
if (config.url) {
  sequelize = new Sequelize(config.url, config);
} else {
  sequelize = new Sequelize(config.database, config.username, config.password, config);
}

fs
  .readdirSync(__dirname)
  .filter(file => {
    return (file.indexOf('.') !== 0) && (file !== basename) && (file.slice(-3) === '.js');
  })
  .forEach(file => {
    const model = sequelize['import'](path.join(__dirname, file));
    db[model.name] = model;
  });

Object.keys(db).forEach(modelName => {
  if (db[modelName].associate) {
    db[modelName].associate(db);
  }
});

db.sequelize = sequelize;
db.Sequelize = Sequelize;

module.exports = db;

//models/index.js 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#defining-the-model-relationships)å®šä¹‰æ¨¡å‹å…³ç³»

æˆ‘ä»¬æœ‰ä¸‰ä¸ªç›¸äº’å…³è”çš„æ¨¡å‹ï¼Œå¦‚ä¸‹æ‰€ç¤º

*   ä¸€ä¸ªç”¨æˆ·æœ‰å¾ˆå¤šå¸–å­ï¼Œä¸€ä¸ªå¸–å­å±äºä¸€ä¸ªç”¨æˆ·(1:n)
*   ä¸€ä¸ªç”¨æˆ·æœ‰å¾ˆå¤šè¯„è®ºï¼Œä¸€ä¸ªè¯„è®ºå±äºä¸€ä¸ªç”¨æˆ·(1:n)
*   ä¸€ä¸ªå¸–å­æœ‰å¾ˆå¤šè¯„è®ºï¼Œä¸€ä¸ªè¯„è®ºå±äºä¸€ä¸ªå¸–å­(1:n)

ä¸ºäº†å®ç°ä»¥ç¼–ç¨‹æ–¹å¼å»ºç«‹ä¸Šè¿°å…³ç³»ï¼Œè®©æˆ‘ä»¬ç¼–è¾‘æ¨¡å‹å¦‚ä¸‹:

```
module.exports = (sequelize, DataTypes) => {
  const User = sequelize.define('User', {
    name: DataTypes.STRING,
    email: DataTypes.STRING
  }, {});
  User.associate = function(models) {
    // associations can be defined here
    User.hasMany(models.Post, {
      foreignKey: 'userId',
      as: 'posts',
      onDelete: 'CASCADE',
    });

    User.hasMany(models.Comment, {
      foreignKey: 'userId',
      as: 'comments',
      onDelete: 'CASCADE',
    });
  };
  return User;
};

// database/models/user.js 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
module.exports = (sequelize, DataTypes) => {
  const Post = sequelize.define('Post', {
    title: DataTypes.STRING,
    content: DataTypes.TEXT,
    userId: DataTypes.INTEGER
  }, {});
  Post.associate = function(models) {
    // associations can be defined here
    Post.hasMany(models.Comment, {
      foreignKey: 'postId',
      as: 'comments',
      onDelete: 'CASCADE',
    });

    Post.belongsTo(models.User, {
      foreignKey: 'userId',
      as: 'author',
      onDelete: 'CASCADE',
    })
  };
  return Post;
};

// database/models/post.js 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
module.exports = (sequelize, DataTypes) => {
  const Comment = sequelize.define('Comment', {
    postId: DataTypes.INTEGER,
    comment: DataTypes.TEXT,
    userId: DataTypes.INTEGER
  }, {});
  Comment.associate = function(models) {
    // associations can be defined here
    Comment.belongsTo(models.User, {
      foreignKey: 'userId',
      as: 'author'
    });
    Comment.belongsTo(models.Post, {
      foreignKey: 'postId',
      as: 'post'
    });
  };
  return Comment;
};

// database/models/comment.js 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ˜¯æ—¶å€™è¿è¡Œè¿ç§»äº†ï¼Œå®ƒä¼šå°†è¿ç§»è½¬æ¢æˆæ•°æ®åº“ä¸­çš„è¡¨ã€‚è¿è¡Œ

```
sequelize db:migrate 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œè¡¨æ ¼å°±ä¼šç”Ÿæˆï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å°†æ•°æ®å­˜å…¥æ•°æ®åº“äº†ã€‚

### [](#seeding-data-to-the-database)å°†æ•°æ®æ’­ç§åˆ°æ•°æ®åº“

è®©æˆ‘ä»¬ç”¨ä¸€äº›è™šæ‹Ÿæ•°æ®å¡«å……æ•°æ®åº“ã€‚è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥ä¸ºæ¨¡å‹ç”Ÿæˆç§å­æ–‡ä»¶ã€‚

```
sequelize seed:generate --name User

sequelize seed:generate --name Post

sequelize seed:generate --name Comment 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä»¥ä¸Šå‘½ä»¤å°†åˆ†åˆ«ä¸º`User`ã€`Post`å’Œ`Comment`å‹å·ç”Ÿæˆä¸‰ä¸ªæ–‡ä»¶`xxxx-User.js`ã€`xxxx-Post.js`å’Œ`xxxx-Comment.js`ã€‚

ç¼–è¾‘ç§å­æ–‡ä»¶å¦‚ä¸‹:

```
module.exports = {
  up: (queryInterface, Sequelize) => queryInterface.bulkInsert(
    'Users',
    [
      {
        name: 'Jane Doe',
        email: 'janedoe@example.com',
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        name: 'Jon Doe',
        email: 'jondoe@example.com',
        createdAt: new Date(),
        updatedAt: new Date(),
      },
    ],
    {},
  ),

  down: (queryInterface, Sequelize) => queryInterface.bulkDelete('Users', null, {}),
};

// database/seeds/xxxx-User.js 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
module.exports = {
  up: (queryInterface, Sequelize) =>
    queryInterface.bulkInsert(
      "Posts",
      [
        {
          userId: 1,
          title: "hispotan de nu",
          content:
            "Nulla mollis molestie lorem. Quisque ut erat. Curabitur gravida nisi at nibh.",
          createdAt: new Date(),
          updatedAt: new Date()
        },
        { 
          userId: 2,
          title: 'some dummy title',
          content:
            "Maecenas tincidunt lacus at velit. Vivamus vel nulla eget eros elementum pellentesque. Quisque porta volutpat erat.",
          createdAt: new Date(),
          updatedAt: new Date()
        }
      ],

      {}
    ),

  down: (queryInterface, Sequelize) =>
    queryInterface.bulkDelete("Posts", null, {})
};
// database/seeds/xxxx-Post.js 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
module.exports = {
  up: (queryInterface, Sequelize) =>
    queryInterface.bulkInsert(
      "Comments",
      [
        {
          userId: 1,
          postId: 2,
          comment:
            "Nulla mollis molestie lorem. Quisque ut erat. Curabitur gravida nisi at nibh.",
          createdAt: new Date(),
          updatedAt: new Date()
        },
        {
          userId: 2,
          postId: 1,
          comment:
            "Maecenas tincidunt lacus at velit. Vivamus vel nulla eget eros elementum pellentesque. Quisque porta volutpat erat.",
          createdAt: new Date(),
          updatedAt: new Date()
        }
      ],
      {}
    ),

  down: (queryInterface, Sequelize) =>
    queryInterface.bulkDelete("Comments", null, {})
};

// database/seeds/xxxx-Comment.js 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥æ’­ç§æ•°æ®åº“:

```
sequelize db:seed:all 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> ä½ å¯ä»¥åœ¨è¿™é‡Œå…‹éš†è¿™ç¯‡æ–‡ç« [çš„å®Œæ•´ä»£ç ](https://github.com/oriechinedu/sequelize-with-postgres-tutorial.git)

å“Ÿï¼æš‚æ—¶å°±è¿™æ ·äº†ã€‚åœ¨æœ¬æ–‡çš„ç¬¬äºŒéƒ¨åˆ†ï¼Œæˆ‘å°†åœ¨è¿™ç¯‡æ–‡ç« çš„åŸºç¡€ä¸Šå®ç°åšå®¢çš„ CRUDã€‚æ•¬è¯·æœŸå¾…ï¼ğŸ“Œ

#### [](#suggested-resources)å»ºè®®çš„èµ„æº

*   [å¯¹æ–‡ä»¶è¿›è¡Œæ’åº](https://sequelize.org/)
*   [ä»€ä¹ˆæ˜¯ ORMï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒ](https://blog.bitsrc.io/what-is-an-orm-and-why-you-should-use-it-b2b6f75f5e2a)

*æœ¬æ–‡æœ€åˆå‘è¡¨åœ¨æˆ‘çš„[åšå®¢](https://www.oriechinedu.com/posts/getting-started-with-sequelize-and-postgres/)T3 ä¸Š*