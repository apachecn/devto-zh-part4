# ä¸æ˜¯å¦ä¸€ä¸ªå¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åº:ç¬¬ 3 éƒ¨åˆ†

> åŸæ–‡ï¼š<https://dev.to/westbrook/not-another-to-do-app-2m9a>

#### ç”¨ Open Web ç»„ä»¶æ¨èå¼„è„ä½ çš„æ‰‹å’Œè„š...ç®—æ˜¯å§ã€‚

> *è¿™æ˜¯ 2019 å¹´ 2 æœˆ 26 æ—¥æ¥è‡ª [Medium](https://medium.com/@westbrook/not-another-to-do-app-f038fc658d76) çš„ä¸€ç¯‡æ–‡ç« çš„äº¤å‰å¸–å­ï¼Œåˆ©ç”¨äº†æˆ‘æœ€è¿‘å†³å®šåœ¨æˆ‘çš„å†™ä½œä¸­ä½¿ç”¨è¯­æ³•çš„ä¼˜åŠ¿(å› æ­¤ï¼Œåœ¨è¿™é‡Œå’Œé‚£é‡Œåšäº†ä¸€äº›å°ç¼–è¾‘)ï¼Œå¦‚æœä½ åœ¨é‚£é‡Œçœ‹åˆ°å®ƒï¼Œæ„Ÿè°¢å†æ¬¡æŸ¥çœ‹ğŸ™‡ğŸ½â€â™‚ï¸:å¦‚æœè¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡é˜…è¯»ï¼Œæ¬¢è¿ï¼*

*æ¬¢è¿æ¥åˆ°â€œä¸è¦å†åšä¸€ä¸ªåº”ç”¨ç¨‹åºâ€ï¼Œè¿™æ˜¯ä¸€ç¯‡å†—é•¿çš„ç»¼è¿°ï¼Œè®²è¿°äº†æ¯ä¸ªå¼€å‘äººå‘˜åœ¨æŸä¸ªæ—¶å€™éƒ½ä¼šç¼–å†™çš„æœ€å°çš„åº”ç”¨ç¨‹åºä¹‹ä¸€ã€‚å¦‚æœä½ æ˜¯æ¥å­¦ä¹ ç¼–å†™åº”ç”¨ç¨‹åºçš„ç‰¹å®šæŠ€æœ¯çš„ï¼Œæˆ–è€…æ˜¯ä»ä»¥å‰çš„å®‰è£…ä¸­èµ°å‡ºæ¥çš„ï¼Œé‚£ä¹ˆä½ å¯èƒ½æ¥å¯¹åœ°æ–¹äº†ï¼Œåº”è¯¥ç»§ç»­è¯»ä¸‹å»ï¼å¦‚æœæ²¡æœ‰ï¼Œä½ å¯èƒ½æƒ³[ä»å¤´å¼€å§‹](https://dev.to/westbrook/not-another-to-do-app-2kj9)ï¼Œè¿™æ ·ä½ ä¹Ÿå¯ä»¥çŸ¥é“[æˆ‘ä»¬æ‰€æœ‰è§’è‰²çš„èƒŒæ™¯æ•…äº‹...](https://github.com/Westbrook/to-do-app)*

å¦‚æœä½ å·²ç»åšåˆ°äº†è¿™ä¸€æ­¥ï¼Œä¸ºä»€ä¹ˆç°åœ¨å°±æ”¾å¼ƒå‘¢ï¼Ÿ

* * *

# æ—©è€ƒï¼Œå¸¸è€ƒ

<figure>

[![Testing...](img/aa5a6a870f75cceb728f47d104a0f687.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--cYvfvcwZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/1krqpwdvmted8u143q6s.jpeg)

<figcaption>Photo by [ShareGrid](https://unsplash.com/@sharegrid?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com/)</figcaption>

</figure>

å¯¹æˆ‘æ¥è¯´ï¼Œåœ¨æˆ‘çš„åº”ç”¨ç¨‹åºä¸­ä»ä¸€å¼€å§‹å°±æœ‰ä¸€ä¸ªåƒ Karma è¿™æ ·çš„å·¥å…·æœ€æ£’çš„éƒ¨åˆ†æ˜¯ï¼Œæˆ‘å¯ä»¥å‡è£…æˆ‘çŸ¥é“å¦‚ä½•åš [TDD](https://en.wikipedia.org/wiki/Test-driven_development) (æµ‹è¯•é©±åŠ¨å¼€å‘)ã€‚ä¸è¦è¯¯è§£æˆ‘ï¼Œæˆ‘å¹¶ä¸æ˜¯ä¸çŸ¥é“è¿™æ„å‘³ç€ä»€ä¹ˆï¼Œæˆ–è€…å¦‚ä½•å»åšï¼Œæˆ‘çš„é—®é¢˜æ›´å¤šçš„æ˜¯ä¸€ä¸ªä¿¡å¿µã€‚å½“è¿›å…¥é…å¯¹ç¼–ç ä¼šè¯æ—¶ï¼Œæˆ‘å–œæ¬¢ä¸€è½®[ä¹’ä¹“é…å¯¹](http://wiki.c2.com/?PairProgrammingPingPongPattern)ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å®‰æ’æ—¶é—´çš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥å¾ˆå¿«è®©ä½ ä»¬ä¸¤ä¸ªå¼€å§‹çš„å…³äºé¡¹ç›®/åŠŸèƒ½çš„é‡è¦å¯¹è¯å˜å¾—æ¸…æ™°èµ·æ¥ã€‚åœ¨æˆ‘å›åˆ°è‡ªå·±çš„åŠå…¬æ¡Œåï¼Œäº‹æƒ…å¼€å§‹å˜å¾—ä¸å¯æ”¶æ‹¾ã€‚ç¼–å†™ä¸€ä¸ªæµ‹è¯•ï¼Œæ·»åŠ ä¸€ä¸ªç‰¹æ€§ï¼Œç¼–å†™ç¬¬äºŒä¸ªæµ‹è¯•ï¼Œç¼–å†™ç¬¬äºŒä¸ªç‰¹æ€§...å°±åœ¨é‚£é‡Œï¼Œä¸€åˆ‡éƒ½åˆ†å´©ç¦»æäº†ã€‚åœ¨è¿™ç§é£æ°”ä¸‹ï¼Œæˆ‘å¯åŠ¨äº†æˆ‘çš„å¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åºï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
it('has a title', async () => {
    const el = await fixture(html`<open-wc-app></open-wc-app>`);
    const title = el.shadowRoot.querySelector('h1').textContent;
    expect(title).to.equal('open-wc');
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¥½å§ï¼Œå¥½å§ï¼Œä½ è¯´å¯¹äº†ï¼Œæˆ‘ä¸æ˜¯é‚£æ ·å¼€å§‹çš„ã€‚è¿™æ˜¯æˆ‘ä»¬åœ¨å…¬å¼€èµ›ä¸Šçš„æœ‹å‹å…è´¹é€çš„ã€‚åœ¨æˆ‘é”®å…¥ä¸€ä¸ªé”®ä¹‹å‰æµ‹è¯•è¦†ç›–ç‡ï¼Œè€¶ï¼ä½†æ˜¯ï¼Œæˆ‘è¿˜æ˜¯åšäº†ä¸€ä¸ªæµ‹è¯•ï¼Œå®ƒçœ‹èµ·æ¥åƒ:

```
const el = await fixture(html`<open-wc-app></open-wc-app>`);
expect(el.todos.length).to.equal(0); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å“ªä¸ªå½“ç„¶å¤±è´¥(TDDï¼Œä»€ä¹ˆï¼Ÿï¼).åœ¨ true LitElement è¡¨å•ä¸­ï¼Œä»¥ä¸‹å†…å®¹ä½¿æµ‹è¯•å˜å›ç»¿è‰²:

```
class OpenWcApp extends LitElement {
    static get properties() {
        return {
            todos: { type: Array }
        };
    }
    constructor() {
        super();
        this.todos = [];
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*è®¤è¯†åˆ°è¿™åªæ˜¯è¡¥å……(ç”¨å‰é¢çš„ä¸€äº›ä»£ç æ¥æ”¯æŒå®ƒä»¬)ï¼Œè€Œä¸æ˜¯æ›¿æ¢æ‰€æä¾›çš„ [`src/open-wc-app.js`](https://github.com/Westbrook/to-do-app/blob/master/src/open-wc-app.js) çš„ä»£ç ã€‚*

ç°åœ¨æˆ‘ä»¬çš„åˆå§‹æµ‹è¯•å°†é€šè¿‡ï¼Œæ‰€ä»¥æ˜¯æ—¶å€™æ·»åŠ å¦ä¸€ä¸ª:

```
const el = await fixture(html`<open-wc-app></open-wc-app>`);
expect(el.todos.length).to.equal(0);
el.dispatchEvent(new CustomEvent('todo-new', {
    detail: 'New To Do',
    bubbles: true,
    composed: true
}));
expect(el.todos.length).to.equal(1); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬ä¹‹å‰æµ‹è¯•çš„æ‰©å±•å°†å¸¦æˆ‘ä»¬è¶…è¶Šåˆå§‹åŒ–è¿‡ç¨‹ï¼Œç›´æ¥è¿›å…¥åŸºäºäº‹ä»¶çš„çŠ¶æ€ç®¡ç†ã€‚è¿™æ„å‘³ç€æˆ‘çš„åº”ç”¨ç¨‹åºå°†é€šè¿‡ [`dispatchEvent()`](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent) è§¦å‘çš„ [`new CustomEvent()`](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent) æ¥ä¼ é€’æ•°æ®å’ŒåŠ¨ä½œã€‚ç”±äºæœ€è¿‘å‰ç«¯å·¥ç¨‹ä¸­çš„è®¸å¤šå·¥ä½œéƒ½æ˜¯åŸºäºè™šæ‹Ÿ DOM çš„ï¼Œè¿™é€šå¸¸æ˜¯æµè§ˆå™¨çš„ä¸€ä¸ªä»¤äººæƒŠè®¶çš„â€œæ–°â€ç‰¹æ€§ï¼Œæ‰€ä»¥å¦‚æœä½ ä¹‹å‰æ²¡æœ‰æœºä¼šä½¿ç”¨è¿™ä¸ª APIï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ [æ›´æ·±å…¥åœ°äº†è§£ä¸€ä¸‹](https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events)ã€‚çŸ¥é“è¿™æ˜¯æ€ä¹ˆå›äº‹ä¹‹åï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æ·»åŠ ä»£ç ï¼Œå†æ¬¡æ·»åŠ åˆ° [`src/open-wc-app.js`](https://github.com/Westbrook/to-do-app/blob/master/src/open-wc-app.js) ï¼Œä»¥ä¾¿è®©æˆ‘ä»¬çš„æµ‹è¯•å†æ¬¡é€šè¿‡ã€‚

```
constructor() {
    super();
    this.addEventListener('todo-new', (e) => {
        let todo = e.detail;
        if (todo === null) return;
        this.todos = [
            ...this.todos,
            todo,
        ];
    });
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“è¿›è¡Œ TDD æ—¶ï¼Œæˆ‘çš„ç›®æ ‡æ˜¯ç¼–å†™é€šè¿‡æµ‹è¯•çš„ä»£ç ï¼Œä¸ä¸€å®šæ˜¯æœ€æ¼‚äº®çš„ä»£ç ï¼Œä¹Ÿä¸ä¸€å®šæ˜¯æ€§èƒ½æœ€å¥½çš„ä»£ç ï¼Œæ‰€ä»¥å¦‚æœäº‹æƒ…æ²¡æœ‰â€œå¦‚å…¶æ‰€æ„¿â€be"â„¢ï¸.ï¼Œæˆ‘ä¸ä¼šå¤ªæ‹…å¿ƒè®©æˆ‘ä»¬åŒæ„ç¨åä¸ºå…¶è…¾å‡ºç©ºé—´ï¼Œå¹¶åœ¨æ­¤æœŸé—´çœ‹çœ‹è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆã€‚æˆ‘ä»¬æ­£åœ¨é’ˆå¯¹æˆ‘ä»¬çš„æµ‹è¯•æ­£åœ¨è°ƒåº¦çš„`todo-new`äº‹ä»¶çš„å…ƒç´ æ³¨å†Œä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ã€‚å½“å¬åˆ°ä¸€ä¸ªè¿™æ ·çš„äº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬å°†æŠŠæˆ‘ä»¬å·²ç»ç¡®è®¤çš„å¾…åŠäº‹é¡¹æ‰“åŒ…åˆ°äº‹ä»¶çš„è¯¦ç»†ä¿¡æ¯(`e.detail`)ä¸­ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ç°æœ‰çš„å¾…åŠäº‹é¡¹åˆ—è¡¨ä¸­ã€‚æ­¤å¤–ï¼Œæ‚¨å°†çœ‹åˆ°æˆ‘ä»¬ä½¿ç”¨ spread æ“ä½œç¬¦æ¥ç»´æŠ¤æˆ‘ä»¬ä¸ªäººå¾…åŠäº‹é¡¹çš„èº«ä»½ï¼ŒåŒæ—¶æ›´æ–°æˆ‘ä»¬çš„`todos`å±æ€§çš„èº«ä»½ï¼Œè¿™å°†é€šçŸ¥`LitElement`å¯åŠ¨æ¸²æŸ“ç®¡é“ï¼ŒåŒæ—¶ä»ç„¶èƒ½å¤Ÿæ¯”è¾ƒæˆ‘ä»¬ä¸ªäººå¾…åŠäº‹é¡¹ã€‚

éšç€æˆ‘ä»¬çš„æµ‹è¯•å†æ¬¡é€šè¿‡ï¼Œæ˜¯æ—¶å€™å›åˆ°é‚£é‡Œï¼Œå®Œæˆåˆ›å»ºä¸€ä¸ªæ–°ä»»åŠ¡çš„å¾€è¿”æ—…ç¨‹äº†ã€‚è¯·æ³¨æ„æˆ‘ä»¬æ˜¯å¦‚ä½•é€šè¿‡ç¡®è®¤æ–°çš„å¾…åŠäº‹é¡¹çš„å†…å®¹ä»¥åŠä¹‹å‰å¯¹æ•´ä¸ª`todos`æ•°ç»„çš„æ›´æ”¹æµ‹è¯•æ¥å®Œæˆæ•°æ®å¤„ç†æµ‹è¯•çš„ã€‚è¿˜æœ‰ä¸€ä¸ªæµ‹è¯•ï¼Œæµ‹è¯•è¿™äº›å˜åŒ–æ˜¯å¦åæ˜ åœ¨å®é™…çš„æ¸²æŸ“ç»“æœä¸­ã€‚

```
it('adds a to do in response to a `todo-new` event', async () => {
    const newTodo = 'New To Do';
    const el = await fixture(html`<open-wc-app></open-wc-app>`);
    expect(el.shadowRoot.querySelectorAll('to-do').length)
        .to.equal(0);
    el.dispatchEvent(new CustomEvent('todo-new', {
        detail: newTodo,
        bubbles: true,
        composed: true
    }));
    await nextFrame();
    expect(el.todos.length).to.equal(1);
    expect(el.todos[0]).to.equal(newTodo);
    expect(el.shadowRoot.querySelectorAll('to-do').length)
        .to.equal(1);    
    expect(el.shadowRoot.querySelectorAll('to-do')[0].textContent)
        .to.equal(newTodo);
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨å°†çœ‹åˆ°ï¼Œéšç€å¯¹æ¸²æŸ“è¾“å‡ºçš„æµ‹è¯•çš„å¢åŠ ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è®¸å¤š open-wc å·¥å…·ä¸­çš„ç¬¬ä¸€ä¸ªï¼Œè¿™å°†æœ‰åˆ©äºæ„å»ºæ‚¨çš„åº”ç”¨ç¨‹åºã€‚`import { nextFrame } from â€˜@open-wc/testing';`è·å¾—çš„`nextFrame`æ˜¯ä¸€ä¸ªå¸®åŠ©å™¨æ–¹æ³•ï¼Œæ”¯æŒä¸`LitElement`çš„å¼‚æ­¥æ¸²æŸ“è¿‡ç¨‹ä¸€èµ·å·¥ä½œã€‚å› ä¸ºä½¿ç”¨`LitElement`çš„æ¸²æŸ“æ˜¯åœ¨å¾®ä»»åŠ¡è®¡æ—¶çš„æƒ…å†µä¸‹å‘ç”Ÿçš„ï¼Œæ‰€ä»¥æ‚¨æ— æ³•åŒæ­¥æµ‹è¯• DOM çš„å˜åŒ–ï¼Œæ‰€ä»¥`nextFrame`åŠ©æ‰‹ä¼šå°†æ‚¨çš„æµ‹è¯•å»¶è¿Ÿåˆ°ä¸‹ä¸€å¸§ï¼Œè¿™æ ·é’ˆå¯¹ DOM çš„æµ‹è¯•å°†ä¼šæœ‰æ–°çš„æ¸²æŸ“ç»“æœæ¥æµ‹è¯•ã€‚ä¸ºäº†å®ç°æ‰€éœ€çš„æ›´æ”¹ï¼Œéœ€è¦å¯¹`render()`æ–¹æ³•è¿›è¡Œä»¥ä¸‹æ›´æ–°:

```
render() {
    return html` ${this.todos.map(todo => html`
            <to-do>${todo}</to-do>
        `)} `;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç§ï¼Œæ‚¨å·²ç»å®Œå…¨æµ‹è¯•äº†å¾…åŠäº‹é¡¹æ·»åŠ æµç¨‹çš„åŸºäºè‡ªå®šä¹‰äº‹ä»¶çš„ç®¡ç†ã€‚

ä¸ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰åˆ›å»º UI æˆ–æµ‹è¯•å¯èƒ½åˆ†æ´¾è¿™æ ·ä¸€ä¸ªäº‹ä»¶çš„å…ƒç´ ã€‚ç„¶è€Œï¼Œè¦æŸ¥çœ‹æˆ‘ä»¬çš„ä»£ç ç›®å‰åœ¨å®é™…æµè§ˆå™¨ä¸­çš„å·¥ä½œæƒ…å†µï¼Œè¯·è®¿é—®æ§åˆ¶å°å¹¶è¿è¡Œç±»ä¼¼äºæ‚¨åœ¨æµ‹è¯•ä¸­çœ‹åˆ°çš„ä»£ç ï¼Œå°†å¾…åŠäº‹é¡¹å‘å¸ƒåˆ°é¡µé¢:

```
$0.dispatchEvent(new CustomEvent('todo-new', {
    detail: 'Fancy Console Created To Do',
    bubbles: true,
    composed: true
})); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

[*$0 æ˜¯å…ƒç´ é¢æ¿ä¸­å½“å‰é€‰ä¸­çš„èŠ‚ç‚¹ã€‚*T3ã€‘](https://willd.me/posts/0-in-chrome-dev-tools)

æ˜¯çš„ï¼Œè¿˜æœ‰å¾ˆå¤šä¸œè¥¿éœ€è¦æµ‹è¯•å’Œæ„å»ºï¼Œä½†æ˜¯æ­£å¦‚æˆ‘ä¹‹å‰æåˆ°çš„ï¼Œè¿™ä¸æ˜¯ä¸€ç¯‡â€œå¦‚ä½•åˆ¶ä½œå¾…åŠäº‹é¡¹åº”ç”¨â€çš„æ–‡ç« ã€‚æˆ‘åªæ˜¯ä»‹ç»äº†ä»ç¬¬ä¸€å¤©å¼€å§‹å°†æµ‹è¯•æ„å»ºåˆ°æ‚¨çš„é¡¹ç›®ä¸­çš„å¥½å¤„ã€‚ä¸ç®¡ä½ æ˜¯é€šè¿‡åº”ç”¨æµ‹è¯•é©±åŠ¨å¼€å‘çš„ç§Ÿæˆ·æ¥åˆ©ç”¨å®ƒï¼Œè¿˜æ˜¯ä¸€äº›å…¶ä»–çš„å“²å­¦ï¼Œæˆ‘å¾ˆä¹æ„å¬åˆ°æ›´å¤š...è¯·åœ¨è¯„è®ºä¸­ç»™æˆ‘ç•™è¨€ã€‚åœ¨æ‚¨çš„é¡¹ç›®ä¸­æœ‰äº†è¿™ç§èƒ½åŠ›ï¼Œæˆ‘å°†å‘ä¸–ç•Œä¼ é€’ä¸€ç§è‰¯å¥½çš„æ°›å›´ï¼Œåœ¨ç¼–ç çš„å…´å¥‹æˆ˜èƒœæ‚¨å¯¹è¿‡ç¨‹çš„ä¿¡å¿µä¹‹å‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ‚¨é€‰æ‹©çš„ä»»ä½•æ–¹æ³•å–å¾—æ›´å¤§çš„è¿›æ­¥ã€‚

æ³¨æ„:åœ¨å˜å¾—æ— æ³•ä¿æŒ TDD çš„ä¸¥æ ¼æ€§ä¹‹å‰ï¼Œæˆ‘é€šè¿‡äº†ä¸‰ä¸ªå®Œæ•´çš„æµ‹è¯•ï¼Œä¸Šé¢æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚æˆ‘éå¸¸è‡ªè±ªï¼Œç‰¹åˆ«æ˜¯è¿™ä¸‰ä¸ªæµ‹è¯•æ¶µç›–äº†åº”ç”¨ç¨‹åºçš„å¤§éƒ¨åˆ†ä¸»è¦ç‰¹æ€§ã€‚æœ€ç»ˆï¼Œæˆ‘èŠ±äº† 20+æ¬¡æµ‹è¯•ï¼Œè¿™å¯èƒ½æ˜¯ç»å¯¹å¿…è¦çš„ï¼Œä»¥æ”¯æŒæœ€ç»ˆå¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åºçš„ 100%ä»£ç è¦†ç›–ç‡ã€‚

## äº²æç¤º

å½“æˆ‘æµ‹è¯•æˆ‘çš„åº”ç”¨ç¨‹åºæ—¶(æˆ‘ä¿è¯æˆ‘ä¼šå°½å¯èƒ½åœ°åš)ï¼Œæœ€ç»ˆç›®æ ‡æ€»æ˜¯è¿™æ ·:

<figure>

[![All the lines are covered!](img/0717829d4e9b0d7192c0455bb87b5a3d.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--GHVhU-WZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/18wpyx2tifusshaxlxcc.png)

<figcaption>All the lines are covered!</figcaption>

</figure>

ä½†æ˜¯ï¼Œopen-wc Starter åº”ç”¨ç¨‹åºé»˜è®¤æä¾›ä»¥ä¸‹æŠ¥å‘Šæ ·å¼:

<figure>

[![I wanna be covered, but I donâ€™t know whatâ€™s showing...](img/cdf1552c7e053ae56feea4119cb532de.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--x4UxMJD2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/6xtolht42ohru3rji3hx.png)

<figcaption>I wanna be covered, but I donâ€™t know whatâ€™s showing...</figcaption>

</figure>

æˆ‘è¿›å…¥äº†æˆ‘çš„æµ‹è¯•ç»“æœï¼Œæˆ‘ç«‹åˆ»è¢«â€œæˆ‘è¿˜æ²¡æœ‰æµ‹è¯•ä»€ä¹ˆâ€çš„é—®é¢˜æ‰€éœ‡æƒŠä»¥åŠâ€œæˆ‘æ€ä¹ˆçŸ¥é“å®ƒåœ¨å“ªé‡Œï¼Ÿâ€ã€‚æˆ‘åªæƒ³çœ‹çœ‹æˆ‘è£¸éœ²çš„çº¿æ¡ã€‚æˆ‘åªæƒ³è¿™æ ·:

<figure>

[![Yay! I know what Iâ€™ve got on my to-do list still. (See what I did there?)](img/4ff6d59520eec5e3b6696aba239bdec7.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--wBO_Agfy--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/6q9yilovoq5o90y3pvl3.png)

<figcaption>Yay! I know what Iâ€™ve got on my to-do list still. (See what I did there?)</figcaption>

</figure>

æˆ‘å¤ªæƒ³è¦å®ƒäº†ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥æ‰¾åˆ°äº†æºå¤´ï¼Œåˆ¶é€ äº†ä¸€ä¸ªé—®é¢˜ã€‚(é—®é¢˜å¯ä»¥æ˜¯æ„Ÿè°¢ä½ æ‰€ä¾èµ–çš„å¼€æºé¡¹ç›®çš„ä¸€ä¸ªå¾ˆå¥½çš„æ–¹å¼ã€‚å®ƒä¸ä»…å»ºç«‹äº†ä»–ä»¬çš„çŸ¥è¯†åº“ï¼Œæœ‰æ—¶ä¹Ÿå»ºç«‹äº†ä½ çš„çŸ¥è¯†åº“ï¼Œå®ƒå¼€å§‹äº†æ¦‚è¿°é¡¹ç›®å¯ä»¥æ¥å—çš„ PRs ç§ç±»æ‰€éœ€çš„å¯¹è¯ï¼Œä»¥è§£å†³ä½ çš„é—®é¢˜æˆ–è®°å½•ä¸ºä»€ä¹ˆæŸäº›äº‹æƒ…æ˜¯çœŸçš„)ã€‚å¦‚æœä½ ä¹Ÿæƒ³çœ‹åˆ°è¦†ç›–ç‡çº¿ï¼Œåœ¨ä½ æ–°çš„ open-wc Starter åº”ç”¨ä¸Šè¿è¡Œä¸€äº›`yarn test && yarn start`ï¼Œç„¶åæ£€æŸ¥`localhost:8080/coverage`ï¼Œè®©ä½ å¤§åƒä¸€æƒŠï¼Œä¸ä»…æ¯”æˆ‘ä»¥å‰è§è¿‡çš„æ›´å®Œæ•´çš„è¦†ç›–ç‡æŠ¥å‘Šï¼Œè€Œä¸”è¿˜æœ‰ä½ çš„ä»£ç è¿˜æœ‰å“ªäº›éƒ¨åˆ†å°šæœªæµ‹è¯•çš„äº¤äº’å¼åˆ†è§£ã€‚æ˜¯çš„ï¼Œæˆ‘æ¥å—å¯¹æˆ‘å¯èƒ½å·²ç»çŸ¥é“çš„äº‹æƒ…çš„è¯„è®º(å¦‚ä¸‹),ä»¥åŠå¯¹æˆ‘çš„ç³Ÿç³•ç¬‘è¯çš„è¯„è®ºã€‚

å¦‚æœæ‚¨ä»ç„¶å¸Œæœ›åœ¨æ‚¨çš„ç»ˆç«¯ä¸­æŠ¥å‘Šæœªè¦†ç›–çš„çº¿è·¯ï¼Œ[å°è¯•ä»¥ä¸‹æ›´æ”¹:](https://open-wc.org/testing/testing-karma.html#manual-setup)åˆ° [`karma.config.js`](https://github.com/Westbrook/to-do-app/blob/master/karma.conf.js) :

```
module.exports = config => {
    config.set(
        merge.strategy(
            {
                'coverageIstanbulReporter.reports': 'replace',
            }
        )(defaultSettings(config), {
            files: [
                // allows running single tests with the --grep flag
                config.grep ? config.grep : 'test/**/*.test.js',
            ],
            // your custom config
            coverageIstanbulReporter: {
                reports: ['html', 'lcovonly', 'text']
            }
        })
    );
    return config;
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ³¨æ„`'coverageIstanbulReporter.reports'`å±æ€§ä¸­`'replace'`çš„ç”¨æ³•ï¼Œè¿™å…è®¸æ‚¨è¦†ç›–(è€Œä¸æ˜¯â€œåˆå¹¶â€ï¼Œè¿™æ˜¯ä»£ç é»˜è®¤è®¾ç½®è¦åšçš„)ï¼Œè¿™æ ·æ‚¨å°±ä¸ä¼šå¾—åˆ°ä¸¤ç§ç±»å‹çš„æŠ¥å‘Šã€‚å½“ç„¶ï¼Œé™¤éä½ å¯¹è¿™ç±»äº‹æƒ…æ„Ÿå…´è¶£...è¯´åˆ°åº•ï¼Œå¤šå…¶å®å°±æ˜¯å¤šã€‚

* * *

# çŸ­æ¸¸æˆ

æ­£å¦‚è®¸å¤šå¯¹æ­¤ç±»è¯é¢˜æœ‰æ„è§çš„äººæ‰€æŠ•ç¥¨çš„é‚£æ ·ï¼Œä¸€ç¯‡ 9000 å¤šå­—çš„æ–‡ç« æ˜¯ä¸è¡Œçš„ã€‚

> ![WestbrookJ profile image](img/c68b7eeba8c71652bba77a02b2b5f5eb.png)WestbrookJ@ WestbrookJ![twitter logo](img/4c8a2313941dda016bf4d78d103264aa.png)æ‰€ä»¥ï¼Œæˆ‘åœ¨å†™åšæ–‡...æˆ‘æ³¨æ„åˆ°ï¼Œå½“æˆ‘ä¸çœ‹çš„æ—¶å€™ï¼Œå®ƒå˜å¾—ç›¸å½“é•¿ï¼Œä¸€æ¬¡å®Œæˆå¯èƒ½æœ‰ 7000 ä¸ªå•è¯ã€‚æˆ‘æƒ³è¯´æˆ‘ä¼šå¾ˆå¹¸è¿åœ°æŠŠå®ƒç¼–è¾‘ä¸‹æ¥ï¼Œä½†æ˜¯ä¸€äº›æŠ€å·§æˆ‘è¿˜åœ¨æé«˜...æˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ2019 å¹´ 2 æœˆ 20 æ—¥ 12 ç‚¹ 22 åˆ†[![Twitter reply action](img/44d8b042100e231770330321e5b63d65.png)](https://twitter.com/intent/tweet?in_reply_to=1098196160613896192)[![Twitter retweet action](img/93d9c70ccc54851d2e8e881b53c21dae.png)](https://twitter.com/intent/retweet?tweet_id=1098196160613896192)[![Twitter like action](img/2e93f7775eadefab8bcd34a4542cc5a7.png)](https://twitter.com/intent/like?tweet_id=1098196160613896192)

æ‰€ä»¥ï¼Œæ€€ç€å¯¹ä½ æœ€æ·±çš„æ•¬æ„ï¼Œæˆ‘äº²çˆ±çš„è¯»è€…ï¼Œæˆ‘æŠŠå³å°†åˆ°æ¥çš„å¯¹è¯åˆ†æˆäº†å¾®ä¸è¶³é“çš„åä¸ªéƒ¨åˆ†ã€‚æ­å–œä½ ï¼Œä½ å·²ç»æ¥è¿‘ç¬¬ä¸€åœºæ¯”èµ›çš„å°¾å£°äº†ï¼å¦‚æœä½ åˆ°ç›®å‰ä¸ºæ­¢è¿˜å¾ˆäº«å—ï¼Œæˆ–è€…æ˜¯é‚£ç§ä¼šç»™ä¸€éƒ¨æ–°çš„æƒ…æ™¯å–œå‰§åŠ å‡ é›†å°±èƒ½è®©å®ƒå¤§æ”¾å¼‚å½©çš„äººï¼Œè¿™é‡Œæœ‰ä¸€ä»½å…¶ä»–äººçš„åå•ï¼Œä½ å¯ä»¥æŠŠå®ƒä»¬æ”¾åœ¨ä½ çš„ç½‘é£åå•ä¸Š:

*   [ä¸æ˜¯å¦ä¸€ä¸ªå¾…åŠåº”ç”¨](https://dev.to/westbrook/not-another-to-do-app-2kj9)
*   [å…¥é—¨](https://dev.to/westbrook/not-another-to-do-app-3jem)
*   æ—©ç‚¹æµ‹è¯•ï¼Œç»å¸¸æµ‹è¯•(ä½ åœ¨è¿™é‡Œ)
*   [æµ‹é‡ä¸¤æ¬¡ï¼Œçš®æ£‰ä¸€æ¬¡](https://dev.to/westbrook/not-another-to-do-app-part-4-58cd)
*   [ä½¿å…¶æˆä¸ºç»„ä»¶](https://dev.to/westbrook/not-another-to-do-app-part-5-5d7o)
*   [ä½¿å…¶æˆä¸ºå¯é‡å¤ä½¿ç”¨çš„éƒ¨ä»¶](https://dev.to/westbrook/not-another-to-do-app-part-6-an)(ä¸ºä»€ä¹ˆè¿™ä¸ªç³»åˆ—çš„è£…ç½®ä¸èƒ½é‡å¤ä½¿ç”¨ï¼Ÿé‚£çœŸæ˜¯ä¸ªå¥½ä¸»æ„ï¼)
*   ä½ çš„ç»„ä»¶çœŸçš„éœ€è¦çŸ¥é“è¿™äº›å—ï¼Ÿ
*   [å°½æ—©ã€ç»å¸¸ã€åªåœ¨éœ€è¦çš„æ—¶å€™æŠŠä¸œè¥¿åˆ†å¼€](https://dev.to/westbrook/not-another-to-do-app-part-8-3lic)
*   [æœ‰äº›æŠ½è±¡å¹¶ä¸(ä»…ä»…)é€‚ç”¨äºä½ çš„åº”ç”¨](https://dev.to/westbrook/not-another-to-do-app-part-9-10j3)
*   [å¯é‡ç”¨å’Œå¯æ‰©å±•çš„æ•°æ®ç®¡ç†/æœ€ç»ˆ...](https://dev.to/westbrook/not-another-to-do-app-part-10-mp6)
*   [æŸ¥çœ‹è¿è¡Œä¸­çš„åº”ç”¨](https://gifted-lamport-70b774.netlify.com/)

* * *

ç‰¹åˆ«æ„Ÿè°¢ [Open Web Components](https://open-wc.org/) çš„å›¢é˜Ÿï¼Œä»–ä»¬æä¾›äº†å¤§é‡çš„å·¥å…·å’Œå»ºè®®ï¼Œä»¥æ”¯æŒä¸æ–­å¢é•¿çš„å·¥ç¨‹å¸ˆå’Œå…¬å¸ç¤¾åŒºï¼Œå°†é«˜è´¨é‡çš„ Web ç»„ä»¶å¸¦å…¥è¡Œä¸šã€‚[åœ¨ GitHub](https://github.com/open-wc/open-wc) ä¸Šè®¿é—®ä»–ä»¬ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªé—®é¢˜ï¼Œæäº¤ä¸€ä»½ PRï¼Œæˆ–ç­¾ç½²ä¸€ä»½å›è´­åè®®æ¥å‚ä¸è¡ŒåŠ¨ï¼