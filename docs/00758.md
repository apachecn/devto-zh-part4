# React Native + Typescriptï¼Œä¸€è§é’Ÿæƒ…ã€‚åœ¨ç°æœ‰åº”ç”¨ç¨‹åºä¸­è®¾ç½®

> åŸæ–‡:[https://dev . to/chicio/react-native-type script-love-at-first-sight-setup-in-an-existing-app-576](https://dev.to/chicio/react-native-typescript-love-at-first-sight-setup-in-an-existing-app-576)

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•åœ¨ç°æœ‰çš„åº”ç”¨ç¨‹åºä¸­è®¾ç½® React Native + Typescriptã€‚

åœ¨è¿‡å»çš„å‡ ä¸ªæœˆé‡Œï¼Œæˆ‘åœ¨ lastminute.com é›†å›¢(T1)å‚ä¸äº†(T2)çš„ä»¥ä¸‹é¡¹ç›®:ç”¨æ–°çš„ç•Œé¢å’Œæ–°çš„åŠŸèƒ½é‡æ–°æ„å»ºä¸»è¦å“ç‰Œ(lastminute.comã€T4ã€æ²ƒå°”æ²ƒã€å…°åšå’Œ T7)çš„åŸç”Ÿç§»åŠ¨åº”ç”¨ã€‚
æˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹ lastminute.com app çš„æ–°æ—§ä¸»åœºã€‚è¿™äº›å˜åŒ–ä»¤äººå°è±¡æ·±åˆ»ğŸ˜ã€‚

[![compare home app lastminute.com](img/88b5aa87590f15ea33414375ac6355de.png "compare home app lastminute.com")T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--yyVTU-S4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.fabrizioduroni.it/asseimg/posts/compare-homes-lastminute.jpg)

å¯¹äºè¿™ä¸ªâ€œåº”ç”¨é‡æ–°å¯åŠ¨â€é¡¹ç›®ï¼Œæˆ‘ä»¬å†³å®šä½¿ç”¨ React Native(æˆ‘å·²ç»åœ¨ä»¥å‰çš„ä¸€äº›å¸–å­ä¸­è°ˆåˆ°è¿‡è¿™ä¸ªæ¡†æ¶ï¼Œä½ å¯ä»¥åœ¨[å­˜æ¡£éƒ¨åˆ†](https://dev.to/blog/archive)ä¸­æ‰¾åˆ°)ã€‚æˆ‘ä»¬æ²¡æœ‰ä»å¤´å¼€å§‹é‡å†™åº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬å†³å®šåœ¨ç°æœ‰ä»£ç åº“ä¸­é›†æˆ React Nativeï¼Œå¹¶:

*   ä½¿ç”¨[åŸç”Ÿæ¨¡å—](https://facebook.github.io/react-native/docs/native-modules-ios.html)æ¥é‡ç”¨æˆ‘ä»¬å·²ç»ä¸ºä¸€äº›ç‰¹æ€§å‡†å¤‡å¥½çš„ä¸€äº›åŸç”Ÿä»£ç (ä¾‹å¦‚ç™»å½•)ã€‚
*   å°½å¯èƒ½ç”¨ React Native å®Œæ•´åœ°ç¼–å†™æ–°å†…å®¹ã€‚

å½“æˆ‘ä»¬å¼€å§‹è¿™ä¸ªé¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬è¿˜åšäº†å¦ä¸€ä¸ªé‡è¦çš„å†³å®š:æˆ‘ä»¬é€‰æ‹© TypeScript è€Œä¸æ˜¯ Javascript ä½œä¸ºä¸»è¦è¯­è¨€æ¥ç¼–å†™æˆ‘ä»¬çš„ React æœ¬æœºå†…å®¹ã€‚ä»€ä¹ˆæ˜¯ TypeScriptï¼Ÿå®ƒæ˜¯ç”±å¾®è½¯å¼€å‘å’Œç»´æŠ¤çš„å¼€æºç¼–ç¨‹è¯­è¨€ã€‚ä»–ä»¬åœ¨å…¶å®˜æ–¹ç½‘ç«™ä¸Šç”¨ä»¥ä¸‹å®šä¹‰æ¥æè¿°å®ƒ:

> Typescript æ˜¯ Javascript çš„ç±»å‹åŒ–è¶…é›†ï¼Œå®ƒç¼–è¯‘æˆæ™®é€š Javascriptã€‚ä»»ä½•æµè§ˆå™¨ã€‚ä»»ä½•ä¸»æœºã€‚ä»»ä½•æ“ä½œç³»ç»Ÿã€‚æ‰“å¼€
> ä¿¡å·æºã€‚

è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿè¿™æ„å‘³ç€ TypeScript åŸºæœ¬ä¸Šæ˜¯*â€œç±»å›ºé†‡ä¸Šçš„ Javascriptâ€*:å®ƒåœ¨ç¼–è¯‘æ—¶æä¾›å¯é€‰çš„é™æ€ç±»å‹æ£€æŸ¥ã€‚å› ä¸ºå®ƒæ˜¯ JavaScript çš„è¶…é›†ï¼Œæ‰€ä»¥æ‰€æœ‰ JavaScript ä»£ç éƒ½æ˜¯æœ‰æ•ˆçš„ç±»å‹è„šæœ¬ä»£ç ã€‚
å¦‚æœä½ æ˜¯æ¥è‡ªå…¶ä»–å¼ºç±»å‹è¯­è¨€çš„å¼€å‘äººå‘˜ï¼Œå¹¶ä¸”å¯¹é¢å‘å¯¹è±¡ç¼–ç¨‹æœ‰å¾ˆå¼ºçš„äº†è§£ï¼Œé‚£ä¹ˆ TypeScript æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ï¼Œå› ä¸ºå®ƒè®©ä½ å¯ä»¥é‡ç”¨å¾ˆå¤šä½ å·²ç»çŸ¥é“çš„ç¼–ç¨‹æŠ€æœ¯ã€‚

React Native å®˜æ–¹æ”¯æŒ Javascriptã€‚å¦‚ä½•è®¾ç½® React Native + Typescriptï¼Ÿåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•åœ¨ç°æœ‰çš„åº”ç”¨ç¨‹åºä¸­é›†æˆ React Native å’Œ Typescriptï¼Œæˆ‘ä»¬å°†åœ¨ React Native ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„å±å¹•ï¼Œåœ¨é‚£é‡Œæˆ‘ä»¬å°†æ˜¾ç¤ºæˆ‘ä»¬å°†ä» [Nasa å¼€æ”¾ API](https://api.nasa.gov/) ä¸­è¯»å–çš„å½“å¤©ç…§ç‰‡ã€‚ä¸‹é¢ä½ å¯ä»¥æ‰¾åˆ°æˆ‘ä»¬å°†å®ç°çš„ç›®æ ‡ã€‚ç¬¬ä¸€ä¸ªå±å¹•æ˜¯æ ‡å‡†çš„æœ¬åœ°å±å¹•ã€‚ç¬¬äºŒä¸ªæ˜¯ React åŸç”Ÿå±ã€‚

[![react native typescript app](img/3c728d27f604512f3b4daf16209da08e.png "compare home app lastminute.com")T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--bB7oq_O3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.fabrizioduroni.it/asseimg/posts/react-native-typescript-app-screens.jpg)

è®©æˆ‘ä»¬å¼€å§‹ä¸º React Native å’Œ TypesScript è®¾ç½®é¡¹ç›®ã€‚é¦–å…ˆï¼Œååº”åŸç”Ÿé›†æˆã€‚å¯¹äºè¿™é¡¹ä»»åŠ¡ï¼Œæˆ‘ä»¬åªéœ€éµå¾ª [React æœ¬åœ°æ–‡æ¡£ä¸­å…³äºä¸ç°æœ‰åº”ç”¨](https://facebook.github.io/react-native/docs/integration-with-existing-apps.html)é›†æˆçš„å†…å®¹ã€‚
ç„¶åæˆ‘ä»¬å¯ä»¥å¼€å§‹æ•´åˆ TypeScriptã€‚æˆ‘ä»¬å°†ä½¿ç”¨ [yarn](https://yarnpkg.com/lang/en/) ä½œä¸ºä¾èµ–é¡¹ç®¡ç†å™¨ï¼Œè€Œä¸æ˜¯ npm(æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒæ¥å®‰è£…åœ¨ç°æœ‰åº”ç”¨ç¨‹åºä¸­è®¾ç½® React Native æ‰€éœ€çš„ä¾èµ–é¡¹)ã€‚Yarn æ˜¯è„¸ä¹¦äº 2016 å¹´ 10 æœˆå‘å¸ƒçš„ä¸€æ¬¾å¿«é€Ÿã€å¯é ã€å®‰å…¨çš„ä¾èµ–ç®¡ç†å™¨ã€‚
æˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ç»“æ„å°†åŒ…å«åœ¨ä¸‹é¢çš„æˆªå›¾ä¸­ã€‚ç°æœ‰çš„æœ¬åœ°ä»£ç åº“åŒ…å«åœ¨`ios`å’Œ`android`æ–‡ä»¶å¤¹ä¸­ã€‚

[![react native typescript app](img/38c0baaaf0e682b81175727f9a5ee637.png "react native typescript directories")T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--HAPdAt9J--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.fabrizioduroni.it/asseimg/posts/react-native-typescript-directories.jpg)

æ‰€ä»¥è®©æˆ‘ä»¬ä»å®‰è£… TypeScript å’Œ React Native çš„ç±»å‹å¼€å§‹ã€‚æˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥åšåˆ°è¿™ä¸€ç‚¹:

```
yarn add --dev typescript
yarn add --dev @types/react @types/react-native 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­é…ç½® TypeScriptã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œä¸‹é¢çš„å‘½ä»¤å¼€å§‹è¿™æ ·åš:

```
yarn tsc --init --pretty --jsx react 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æˆ‘ä»¬åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æœ‰äº†ä¸€ä¸ªæ–°æ–‡ä»¶:`tsconfig.json`æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶æ˜¯ TypeScript ç¼–è¯‘å™¨`tsc`çš„é…ç½®æ–‡ä»¶ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å®šåˆ¶(React)ã€‚ç‰¹åˆ«æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦å¯ç”¨é€‰é¡¹`allowSyntheticDefaultImports`æ¥å…è®¸ä»æ²¡æœ‰é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­è¿›è¡Œé»˜è®¤å¯¼å…¥ã€‚æˆ‘ä»¬è¿˜å®šåˆ¶äº†`baseUrl`å’Œ`paths`é€‰é¡¹ã€‚é€šè¿‡ä»¥è¿™ç§æ–¹å¼è®¾ç½®å®ƒä»¬ï¼Œå¹¶é€šè¿‡ä½¿ç”¨`name: "app"`åœ¨`app`æ–‡ä»¶å¤¹ä¸­æ·»åŠ ä¸€ä¸ª`package.json`æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰çš„æºä»£ç æ”¾åœ¨`app`æ–‡ä»¶å¤¹ä¸­ï¼Œå½“æˆ‘ä»¬éœ€è¦å¯¼å…¥ä¸€ä¸ªç±»æ—¶ï¼Œæˆ‘ä»¬å°†è®¾ç½®ä»`app`åŸºæœ¬æ–‡ä»¶å¤¹å¼€å§‹çš„è·¯å¾„(å› æ­¤åŸºæœ¬ä¸Šæˆ‘ä»¬ä»¥ä¸€ç§å¾ˆå¥½çš„æ–¹å¼ä¸ºæˆ‘ä»¬çš„å¯¼å…¥å®šä¹‰äº†æºä»£ç çš„æ ¹)ã€‚ä¸‹é¢çš„

ä½ å¯ä»¥æ‰¾åˆ°ä¸ºæˆ‘ä»¬çš„éœ€æ±‚é…ç½®çš„å®Œæ•´çš„`tsconfig.json`æ–‡ä»¶ã€‚

```
{  "compilerOptions":  {  "target":  "es2015",  "module":  "es2015",  "allowJs":  true,  "checkJs":  true,  "jsx":  "react-native",  "removeComments":  true,  "strict":  true,  "noUnusedLocals":  true,  "noUnusedParameters":  true,  "noImplicitReturns":  true,  "moduleResolution":  "node",  "baseUrl":  "app",  "paths":  {  "app/*":  [  "./*"  ]  },  "allowSyntheticDefaultImports":  true  },  "typeRoots":  [  "./node_modules/@types"  ],  "types":  [  "react",  "react-native",  "jasmine",  "jest"  ],  "exclude":  [  "node_modules",  "app/__tests__",  "rn-cli.config.js"  ]  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…[React Native type script Transformer](https://github.com/ds300/react-native-typescript-transformer)ã€‚
è¿™ä¸ªè½¬æ¢å™¨å°†å…è®¸ React Native cli æ ¹æ®éœ€è¦è‡ªåŠ¨å°†æˆ‘ä»¬çš„ç±»å‹è„šæœ¬ä»£ç è½¬æ¢æˆ Javascriptã€‚è¿™æ˜¯å®‰è£…å˜å‹å™¨çš„å‘½ä»¤:

```
yarn add --dev react-native-typescript-transformer 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡å°†ä»¥ä¸‹é…ç½®æ·»åŠ åˆ°`rn-cli.config.js`æ–‡ä»¶(åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»ºå®ƒ)æ¥é…ç½® React Native cli ä»¥å®é™…ä½¿ç”¨è½¬æ¢å™¨ã€‚è¯¥æ–‡ä»¶æ˜¯ React æœ¬æœºé…ç½®æ–‡ä»¶ã€‚

```
module.exports = {
  getTransformModulePath() {
    return require.resolve('react-native-typescript-transformer');
  },
  getSourceExts() {
    return ['ts', 'tsx'];
  },
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°±æ˜¯ä¸»è¦æºä»£ç è®¾ç½®çš„å…¨éƒ¨å†…å®¹ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥å¼€å§‹å»ºç«‹æµ‹è¯•åŸºç¡€è®¾æ–½äº†ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ [jest](https://jestjs.io/) ï¼Œä¸€ä¸ªæ¥è‡ªè„¸ä¹¦çš„æµ‹è¯•æ¡†æ¶ï¼Œä»¥åŠ [typemoq](https://github.com/florinn/typemoq) ï¼Œä¸€ä¸ªç‰¹å®šäº TypeScript çš„æ¨¡ä»¿åº“ã€‚
ä¸ºäº†åœ¨ TypeScript ä¸­ä½¿ç”¨ jestï¼Œæˆ‘ä»¬å°†å®‰è£… [ts-jest](https://github.com/kulshekhar/ts-jest) ï¼Œè¿™æ˜¯ä¸€ä¸ª TypeScript é¢„å¤„ç†å™¨ï¼Œæ”¯æŒ Jest çš„æºä»£ç æ˜ å°„ï¼Œå…è®¸æˆ‘ä»¬ä½¿ç”¨ Jest æ¥æµ‹è¯•ç”¨ Typescript ç¼–å†™çš„é¡¹ç›®ã€‚

```
yarn add --dev ts-jest
yarn add --dev typemoq 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ­£å¦‚æ‚¨ä»æˆ‘ä¸Šé¢å±•ç¤ºçš„ç›®å½•ç»“æ„ä¸­æ‰€è®°å¾—çš„ï¼Œ`__tests__`æ–‡ä»¶å¤¹ä¸åœ¨é€šå¸¸çš„ React æœ¬åœ°é¡¹ç›®ä½ç½®ã€‚å®ƒè¢«æ”¾ç½®åœ¨åº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹ä¸­ã€‚ä¸ºäº†èƒ½å¤Ÿå°†æˆ‘ä»¬çš„æµ‹è¯•æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å‘å…¶ä¸­æ·»åŠ ä¸€ä¸ª`jest.config.js`æ–‡ä»¶ï¼Œå¹¶è®¾ç½®ä¸€äº›ä¸æ¨¡å—åˆ†è¾¨ç‡ç›¸å…³çš„è‡ªå®šä¹‰é€‰é¡¹ã€‚ä¸‹é¢ä½ å¯ä»¥æ‰¾åˆ°æ•´ä¸ªæ–‡ä»¶çš„æ‰€æœ‰ç»†èŠ‚ã€‚

```
module.exports = {
    'preset': 'react-native',
    'moduleFileExtensions': [
        'ts',
        'tsx',
        'js',
    ],
    'rootDir': '../..',
    'transform': {
        '^.+\\.(js)$': '<rootDir>/node_modules/babel-jest',
        '\\.(ts|tsx)$': '<rootDir>/node_modules/ts-jest/preprocessor.js',
    },
    'testMatch': ['**/__tests__/**/*.(ts|tsx|js|jsx)?(x)', '**/?(*.)(spec|test).(ts|tsx|js|jsx)?(x)'],
    'testPathIgnorePatterns': [
        '\\.snap$',
        '<rootDir>/node_modules/',
        'jest.config.js',
    ],
    'moduleDirectories': [
        'node_modules',
        '../',
    ],
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬ç°åœ¨å‡†å¤‡ç¼–å†™æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚åŸºæœ¬ä¸Šæ˜¾ç¤ºç¾å›½å®‡èˆªå±€ç…§ç‰‡çš„å±å¹•æ˜¯`NasaPhotoViewerScreen`ã€‚è¿™ä¸ªç»„ä»¶ä½¿ç”¨`NasaPhotoInformationComponent`å’Œä¸€äº› React æœ¬åœ°æ ‡å‡†ç»„ä»¶æ¥æ˜¾ç¤ºæ¥è‡ª API çš„ä¿¡æ¯ã€‚ä½¿ç”¨`NasaPhotoService`è·å–ä¿¡æ¯ã€‚ä½¿ç”¨`NasaPhotoComponentPresenter`ä¸­çš„[æ¨¡å‹-è§†å›¾-å±•ç¤ºè€…](///2017/08/11/model-view-presenter-architecture-ios-swift-unit-test.html)æ¶æ„å°†`NasaPhotoViewerScreen`å’Œ`NasaPhotoService`ç²˜åˆåœ¨ä¸€èµ·ã€‚ä»ä¸‹é¢çš„ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼ŒTypeScript çš„è¯­æ³•ç±»ä¼¼äºå…¶ä»–è¯­è¨€ï¼Œå¦‚ Javaã€C#(ä»¥åŠè®¸å¤šå…¶ä»–è¯­è¨€ğŸ˜).

```
export class NasaPhotoService {
  async retrieve(): Promise<any> {
    return fetch('https://api.nasa.gov/planetary/apod?api_key=1cygunHJsSwDug6zJjF3emev3QAP8yFLppohLuxb')
      .then((response) => response.json())
  }
}

...

export class NasaPhotoComponentPresenter {
  private nasaPhotoRepository: NasaPhotoRepository
  private nasaPhotoView: NasaPhotoView

  constructor(nasaPhotoView: NasaPhotoView, nasaPhotoRepository: NasaPhotoRepository) {
    this.nasaPhotoRepository = nasaPhotoRepository
    this.nasaPhotoView = nasaPhotoView
  }

  async onStart(): Promise<void> {
    try {
      const nasaPhoto = await this.nasaPhotoRepository.load();
      this.nasaPhotoView.showValid(nasaPhoto);
    } catch (_) {
      this.nasaPhotoView.showAn("Network error")
    }
  }
}

...

export class NasaPhotoViewerScreen extends React.Component<Props, State> implements NasaPhotoView {
  private readonly presenter: NasaPhotoComponentPresenter

  constructor(props: Props) {
    super(props)
    this.state = {
      photo: NasaPhoto.empty()
    }
    this.presenter = new NasaPhotoComponentPresenter(
      this,
      new NasaPhotoRepository(new NasaPhotoService(), new NasaPhotoAdapter())
    )
  }

  componentWillMount() {
    this.presenter.onStart()
  }

  showAn(error: string): void {
    alert(error)
  }

  showValid(photo: NasaPhoto): void {
    this.setState({photo})
  }

  render() {
    return (
      <ScrollView style={styles.container}>
        <Image
          style={styles.image}
          {% raw %}source={{uri: this.state.photo.url}}{% endraw %}
        />
        <NasaPhotoInformationComponent
          title={this.state.photo.title}
          date={this.state.photo.date}
          description={this.state.photo.description}
        />
      </ScrollView>
    );
  }
}

interface Props {
  name: string
}

interface State {
  photo: NasaPhoto
}

const styles = StyleSheet.create({
  container: {
    width: "100%",
    height: "100%"
  },
  image: {
    width: "100%",
    height: 220,
    resizeMode: "cover",
  }
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ å¯ä»¥åœ¨ [this github repository](https://github.com/chicio/React-Native-Typescript-Existing-App) ä¸­æŸ¥çœ‹ä¸Šè¿°ç¤ºä¾‹çš„æ‰€æœ‰ä»£ç ï¼Œå¹¶æŸ¥çœ‹æˆ‘ä¸ºä¸Šé¢å±•ç¤ºçš„åº”ç”¨ç¨‹åºåˆ›å»ºçš„æ‰€æœ‰ TypeScript ç»„ä»¶ã€‚å°±æ˜¯è¿™æ ·ï¼ï¼ï¼ååº”åŸç”Ÿ+æ‰“å­—ç¨¿:â™¥ï¸å¯¹â™¥ï¸.ä¸€è§é’Ÿæƒ…

*åŸè½½äº[https://www . fabrizioduroni . it](https://www.fabrizioduroni.it/2018/07/04/react-native-typescript-existing-app.html)2018 å¹´ 7 æœˆ 4 æ—¥ã€‚*