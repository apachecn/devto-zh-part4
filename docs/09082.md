# useEffect ä¸ useLayoutEffectï¼Œä½¿ç”¨ç®€å•æ˜“æ‡‚çš„è¯­è¨€

> åŸæ–‡ï¼š<https://dev.to/bnevilleoneill/useeffect-vs-uselayouteffect-in-plain-approachable-language-1943>

**ç”±[ohan Emmanuel](https://blog.logrocket.com/author/ohansemmanuel/)**ç¼–å†™

åœ¨ä½ è®¤ä¸ºè¿™æ˜¯å¦ä¸€ç¯‡â€œåŸºæœ¬çš„â€React æ–‡ç« ä¹‹å‰ï¼Œæˆ‘å»ºè®®ä½ æ…¢ä¸€ç‚¹ã€‚

å‡è®¾ä½ çœŸçš„ç†è§£äº†`useEffect`å’Œ`useLayoutEffect`çš„åŒºåˆ«ï¼Œä½ èƒ½ç®€å•è§£é‡Šä¸€ä¸‹è¿™ä¸ªåŒºåˆ«å—ï¼Ÿä½ èƒ½ç”¨å…·ä½“ã€å®é™…çš„ä¾‹å­æè¿°å®ƒä»¬çš„ç»†å¾®å·®åˆ«å—ï¼Ÿ

[![Eintstein Quote](img/3a4ec8d59a7b28fd565857b0fb7da64e.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--v2qQwSko--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/einstein-explain-six-year-old.png%3Fresize%3D730%252C386%26ssl%3D1)

å¯ä»¥å—ï¼Ÿ

ä½ å°†è¦é˜…è¯»çš„å†…å®¹å¯ä»¥è¯´æ˜¯ä½ åœ¨äº’è”ç½‘ä¸Šä»»ä½•åœ°æ–¹éƒ½èƒ½æ‰¾åˆ°çš„æœ€ç®€å•çš„ä¸»é¢˜ã€‚æˆ‘å°†ç”¨å…·ä½“çš„ä¾‹å­æ¥æè¿°`useEffect`å’Œ`useLayoutEffect`ä¹‹é—´çš„åŒºåˆ«ï¼Œè¿™å°†å¸®åŠ©ä½ åœ¨éœ€è¦çš„æ—¶å€™å·©å›ºä½ çš„ç†è§£ã€‚

è®©æˆ‘ä»¬å¼€å§‹å§ã€‚

[![LogRocket Free Trial Banner](img/4aa67f42a82d61c79b61acb13eae9479.png)](https://logrocket.com/signup/)

## `useEffect`å’Œ`useLayoutEffect`çš„å®é™…åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

æ•£å¸ƒåœ¨å®˜æ–¹[é’©å­ API å‚è€ƒ](https://reactjs.org/docs/hooks-reference.html)ä¸Šçš„æ˜¯æŒ‡å‘`useEffect`å’Œ`useLayoutEffect`åŒºåˆ«çš„æŒ‡é’ˆã€‚

ä¹Ÿè®¸å…¶ä¸­æœ€çªå‡ºçš„æ˜¯åœ¨ç¬¬ä¸€æ®µ[ä¸­å‘ç°çš„](https://reactjs.org/docs/hooks-reference.html#uselayouteffect)è¯¦ç»†æè¿°äº†`useLayoutEffect`é’©å­:

> "ç­¾åä¸`useEffect`ç›¸åŒï¼Œä½†æ˜¯å®ƒåœ¨æ‰€æœ‰ DOM çªå˜ååŒæ­¥è§¦å‘."

ä¸Šé¢å¥å­ä¸­çš„ç¬¬ä¸€ä¸ªä»å¥å¾ˆå®¹æ˜“ç†è§£ã€‚ä¸¤ä¸ªé’©å­çš„ç­¾åæ˜¯ä¸€æ ·çš„ã€‚`useEffect`çš„ç­¾åå¦‚ä¸‹æ‰€ç¤º:

```
useEffect(() => {
  // do something
}, ) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`useLayoutEffect`çš„ç­¾åå®Œå…¨ä¸€æ ·ï¼

```
useLayoutEffect(() => {
  // do something
}, ) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

äº‹å®ä¸Šï¼Œå¦‚æœä½ éå†ä¸€ä¸ªä»£ç åº“ï¼Œç”¨`useLayoutEffect`æ›¿æ¢æ¯ä¸€ä¸ª`useEffect`è°ƒç”¨ï¼Œè™½ç„¶ä¸åŒï¼Œä½†è¿™åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½ä¼šèµ·ä½œç”¨ã€‚

ä¾‹å¦‚ï¼Œæˆ‘ä»[çš„ React Hooks Cheatsheet](https://react-hooks-cheatsheet.com/examples/fetching-data) ä¸­å–äº†ä¸€ä¸ªä¾‹å­ï¼Œå®ƒä»ä¸€ä¸ªè¿œç¨‹æœåŠ¡å™¨è·å–æ•°æ®ï¼Œå¹¶å°†å®ç°æ”¹ä¸ºä½¿ç”¨`useLayoutEffect`è€Œä¸æ˜¯`useEffect`ã€‚

[![Data Fetching With useLayoutEffect](img/80cfdf2f7115f8292906d4bc56f73844.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--cKt5LzAB--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/data-fetching-example.gif%3Fresize%3D730%252C378%26ssl%3D1)

è¿˜èƒ½ç”¨ï¼

å› æ­¤ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå»ºç«‹äº†ç¬¬ä¸€ä¸ªé‡è¦çš„äº‹å®:`useEffect`å’Œ`useLayoutEffect`å…·æœ‰ç›¸åŒçš„ç­¾åã€‚å› æ­¤ï¼Œå¾ˆå®¹æ˜“å‡è®¾è¿™ä¸¤ä¸ªé’©å­çš„è¡Œä¸ºæ–¹å¼ç›¸åŒã€‚ç„¶è€Œï¼Œä¸Šè¿°å¼•æ–‡çš„ç¬¬äºŒéƒ¨åˆ†å¯¹å¤§å¤šæ•°äººæ¥è¯´æœ‰ç‚¹æ¨¡ç³Š:

> â€œâ€¦å®ƒä¼šåœ¨æ‰€æœ‰ DOM çªå˜ååŒæ­¥è§¦å‘ã€‚â€

`useEffect`å’Œ`useLayoutEffect`çš„åŒºåˆ«ä»…ä»…åœ¨äºè¢«è§£é›‡æ—¶çš„*ã€‚*

è¯·ç»§ç»­é˜…è¯»ã€‚

## ä¸€ä¸ª 5 å²å­©å­çš„è§£é‡Š

è€ƒè™‘ä»¥ä¸‹äººä¸ºçš„ååº”ç”¨:

```
function Counter() {
    const [count, setCount] = useState(0)
    useEffect(() => {
      // perform side effect
      sendCountToServer(count)
    }, [count])
    <div>
        <h1> {`The current count is ${count}`} </h1>
        <button onClick={() => setCount(count => count + 1)}>
            Update Count
        </button>
</div> }
// render Counter
<Counter /> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“ç»„ä»¶è¢«å®‰è£…æ—¶ï¼Œä»¥ä¸‹å†…å®¹è¢«ç»˜åˆ¶åˆ°ç”¨æˆ·çš„æµè§ˆå™¨:

```
// The current count is 0 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

éšç€æŒ‰é’®çš„æ¯ä¸€æ¬¡ç‚¹å‡»ï¼Œè®¡æ•°å™¨çŠ¶æ€è¢«æ›´æ–°ï¼ŒDOM çªå˜è¢«æ‰“å°åˆ°å±å¹•ä¸Šï¼Œå¹¶ä¸”æ•ˆæœå‡½æ•°è¢«è§¦å‘ã€‚

æˆ‘æƒ³è¯·ä½ æ‹“å±•ä¸€ä¸‹ä½ çš„è§†è§‰æƒ³è±¡åŠ›ï¼Œä½†äº‹å®æ˜¯è¿™æ ·çš„:

**1ã€‚ç”¨æˆ·æ‰§è¡Œä¸€ä¸ªåŠ¨ä½œï¼Œå³ç‚¹å‡»æŒ‰é’®ã€‚**

**2ã€‚React åœ¨å†…éƒ¨æ›´æ–°è®¡æ•°çŠ¶æ€å˜é‡ã€‚**

**3ã€‚React å¤„ç† DOM å˜å¼‚ã€‚**

éšç€ç‚¹å‡»è€Œæ¥çš„æ˜¯çŠ¶æ€æ›´æ–°ï¼Œè¿™åˆè§¦å‘äº† DOM çªå˜ï¼Œå³ï¼Œå¯¹ DOM çš„æ”¹å˜ã€‚`h1`å…ƒç´ çš„æ–‡æœ¬å†…å®¹å¿…é¡»ä»â€œå½“å‰è®¡æ•°æ˜¯ ***å…ˆå‰å€¼*** â€æ›´æ”¹ä¸ºâ€œå½“å‰è®¡æ•°æ˜¯ ***æ–°å€¼*** â€

[![State Update Illustration](img/5bf5c9fc9b85a39e5d49dcce93010ff4.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--eCqnFMl3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/state-update-illustration.png%3Fresize%3D730%252C290%26ssl%3D1)

**4ã€‚æµè§ˆå™¨å°†è¿™ä¸ª DOM æ›´æ”¹ç»˜åˆ¶åˆ°æµè§ˆå™¨çš„å±å¹•ä¸Šã€‚**

ä¸Šé¢çš„æ­¥éª¤ 1ã€2 å’Œ 3*æ²¡æœ‰*å‘ç”¨æˆ·æ˜¾ç¤ºä»»ä½•è§†è§‰å˜åŒ–ã€‚åªæœ‰åœ¨æµè§ˆå™¨æç»˜äº† DOM çš„å˜åŒ–/çªå˜ä¹‹åï¼Œç”¨æˆ·æ‰çœŸæ­£çœ‹åˆ°å˜åŒ–ï¼›æ²¡æœ‰æµè§ˆå™¨ç»˜ç”»ï¼Œæ²¡æœ‰å¯¹ç”¨æˆ·çš„è§†è§‰æ”¹å˜ã€‚

React å°†å…³äº DOM å˜åŒ–çš„ç»†èŠ‚äº¤ç»™æµè§ˆå™¨å¼•æ“ï¼Œæµè§ˆå™¨å¼•æ“è®¡ç®—å‡ºå°†å˜åŒ–ç»˜åˆ¶åˆ°å±å¹•ä¸Šçš„æ•´ä¸ªè¿‡ç¨‹ã€‚ç†è§£ä¸‹ä¸€æ­¥å¯¹è®¨è®ºçš„ä¸»é¢˜è‡³å…³é‡è¦ã€‚

**5ã€‚åªæœ‰åœ¨æµè§ˆå™¨ç»˜åˆ¶äº† DOM å˜åŒ–ä¹‹åï¼Œæ‰ä¼šè§¦å‘`useEffect`å‡½æ•°ã€‚**

è¿™é‡Œæœ‰ä¸€ä¸ªæ’å›¾å¯ä»¥å¸®åŠ©ä½ è®°ä½æ•´ä¸ªè¿‡ç¨‹ã€‚

[![Browser Painting Illustration](img/c8cbd33149b6a11576b037e302ca0d3a.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--R1d5mZ2k--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/browser-painting-illustration.png%3Fresize%3D730%252C582%26ssl%3D1)

è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œä¼ é€’ç»™`useEffect`çš„å‡½æ•°å°†åœ¨ DOM æ”¹å˜è¢«ç»˜åˆ¶åˆ°å±å¹•ä¸Šä¹‹åï¼Œåªåœ¨è¢«è§¦å‘*ã€‚*

ä½ ä¼šå‘ç°å®˜æ–¹æ–‡æ¡£æ˜¯è¿™æ ·å†™çš„:ä¼ é€’ç»™`useEffect`çš„å‡½æ•°å°†åœ¨æ¸²æŸ“æäº¤ç»™å±å¹•åè¿è¡Œ*ã€‚*

[![useEffect Function Illustration](img/9af479a6a21bac3cc95ea879587c9e11.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--LQWGvXnB--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/useeffect-function-illustration.png%3Fresize%3D730%252C193%26ssl%3D1)

ä»æŠ€æœ¯ä¸Šè®²ï¼Œeffect å‡½æ•°æ˜¯å¼‚æ­¥è§¦å‘çš„ï¼Œä¸ä¼šé˜»å¡æµè§ˆå™¨çš„ç»˜åˆ¶è¿‡ç¨‹ã€‚ä»ä¸Šå›¾ä¸­ä¸æ˜æ˜¾çš„æ˜¯ï¼Œå¯¹äºå¤§å¤šæ•° DOM çªå˜æ¥è¯´ï¼Œè¿™ä»ç„¶æ˜¯ä¸€ä¸ªéå¸¸å¿«çš„æ“ä½œã€‚å¦‚æœ`useEffect`å‡½æ•°æœ¬èº«è§¦å‘äº†å¦ä¸€ä¸ª DOM çªå˜ï¼Œè¿™å‘ç”Ÿåœ¨ç¬¬ä¸€ä¸ªä¹‹åï¼Œä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹é€šå¸¸éå¸¸å¿«ã€‚

**æ³¨æ„:**è™½ç„¶`useEffect`è¢«æ¨è¿Ÿåˆ°æµè§ˆå™¨å®Œæˆç»˜åˆ¶ä¹‹åï¼Œä½†å®ƒè‚¯å®šä¼šåœ¨ä»»ä½•æ–°çš„æ¸²æŸ“ä¹‹å‰è§¦å‘ã€‚React å°†æ€»æ˜¯åœ¨å¼€å§‹æ–°çš„æ›´æ–°ä¹‹å‰åˆ·æ–°ä»¥å‰çš„æ¸²æŸ“æ•ˆæœã€‚

ç°åœ¨ï¼Œè¿™å’Œ`useLayoutEffect`é’©å­æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ

ä¸`useEffect`ä¸åŒï¼Œä¼ é€’ç»™`useLayoutEffect`é’©å­çš„å‡½æ•°åœ¨æ‰€æœ‰ DOM çªå˜ä¹‹åè¢«åŒæ­¥**è§¦å‘**ã€‚

[![useLayoutEffect Function Illustration](img/335f1e92439bfae51fe688569f2d5a9f.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--o2DF6dCu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/uselayouteffect-function-illustration.png%3Fresize%3D730%252C193%26ssl%3D1)

ç®€å•æ¥è¯´ï¼Œ`useLayoutEffect`å¹¶ä¸çœŸæ­£å…³å¿ƒæµè§ˆå™¨æ˜¯å¦ç”»å‡ºäº† DOM çš„å˜åŒ–ã€‚å®ƒåœ¨è®¡ç®—å‡º DOM çªå˜åç«‹å³è§¦å‘è¯¥å‡½æ•°ã€‚

è™½ç„¶è¿™çœ‹èµ·æ¥ä¸å¤ªç†æƒ³ï¼Œä½†æ˜¯åœ¨ç‰¹å®šçš„ç”¨ä¾‹ä¸­éå¸¸é¼“åŠ±è¿™æ ·åšã€‚ä¾‹å¦‚ï¼Œå¿…é¡»å¯¹ç”¨æˆ·å¯è§çš„ DOM çªå˜åº”è¯¥åœ¨ä¸‹ä¸€æ¬¡ç»˜åˆ¶ä¹‹å‰åŒæ­¥è§¦å‘ã€‚è¿™ä½¿å¾—ç”¨æˆ·ä¸ä¼šæ„Ÿè§‰åˆ°è§†è§‰ä¸Šçš„ä¸ä¸€è‡´ã€‚æˆ‘å°†åœ¨æœ¬æ–‡çš„åé¢ç»™å‡ºä¸€ä¸ªä¾‹å­ã€‚

è®°ä½ï¼Œåœ¨æµè§ˆå™¨æœ‰æœºä¼šç»˜åˆ¶ä¹‹å‰ï¼Œ`useLayoutEffect`ä¸­å®‰æ’çš„æ›´æ–°å°†è¢«åŒæ­¥åˆ·æ–°ã€‚

## ä¾‹é¢˜ä¸­`useEffect`ä¸`useLayoutEffect`çš„åŒºåˆ«

å¦‚ä»¥ä¸Šç« èŠ‚æ‰€è¿°ï¼Œ`useEffect`å’Œ`useLayoutEffect`çš„åŒºåˆ«åœ¨äºå®ƒä»¬è¢«è§¦å‘æ—¶çš„**ã€‚å³ä¾¿å¦‚æ­¤ï¼Œå¦‚æœæ²¡æœ‰å…·ä½“çš„ä¾‹å­ï¼Œä¹Ÿå¾ˆéš¾é‡åŒ–è¿™ç§å·®å¼‚ã€‚**

åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘å°†é‡ç‚¹ä»‹ç»ä¸‰ä¸ªä¾‹å­ï¼Œå®ƒä»¬çªå‡ºäº†`useEffect`å’Œ`useLayoutEffect`ä¹‹é—´çš„å·®å¼‚ã€‚

### 1ã€‚æ‰§è¡Œæ—¶é—´

ç°ä»£æµè§ˆå™¨å¾ˆå¿«â€”â€”éå¸¸å¿«ã€‚æˆ‘ä»¬å°†è¿ç”¨ä¸€äº›åˆ›é€ æ€§æ¥çœ‹çœ‹`useEffect`å’Œ`useLayoutEffect`çš„æ‰§è¡Œæ—¶é—´æœ‰ä»€ä¹ˆä¸åŒã€‚

åœ¨æˆ‘ä»¬å°†è¦è®¨è®ºçš„[ç¬¬ä¸€ä¸ªä¾‹å­](https://codesandbox.io/s/useeffect-uselayouteffect-time-of-execution-gtrvg?fontsize=14)ä¸­ï¼Œæˆ‘æœ‰ä¸€ä¸ªç±»ä¼¼äºæˆ‘ä»¬ä¹‹å‰è€ƒè™‘çš„è®¡æ•°å™¨ã€‚

[![useEffect Count Example](img/b9b8487e135769bf8ab9c418abfd5c24.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--rCMB7Ge4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/useeffect-count-example-1.png%3Fresize%3D730%252C497%26ssl%3D1)

è¯¥è®¡æ•°å™¨çš„ä¸åŒä¹‹å¤„åœ¨äºå¢åŠ äº†ä¸¤ä¸ª`useEffect`è°ƒç”¨ã€‚

```
useEffect(() => {
    console.log("USE EFFECT FUNCTION TRIGGERED");
});
useEffect(() => {
    console.log("USE SECOND EFFECT FUNCTION TRIGGERED");
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯·æ³¨æ„ï¼Œæ•ˆæœè®°å½•ä¸åŒçš„æ–‡æœ¬å–å†³äºå“ªä¸ªè¢«è§¦å‘ï¼Œæ­£å¦‚æ‰€æ–™ï¼Œç¬¬ä¸€ä¸ªæ•ˆæœåŠŸèƒ½åœ¨ç¬¬äºŒä¸ªä¹‹å‰è¢«è§¦å‘ã€‚

[![useEffect Count Example, Part 2](img/1331898778a1c7a621fb8428e7303624.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--ACcwjYXz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/useeffect-count-example-2.png%3Fresize%3D730%252C521%26ssl%3D1)

å½“ä¸€ä¸ªç»„ä»¶ä¸­æœ‰å¤šä¸ª`useEffect`è°ƒç”¨æ—¶ï¼Œæ•ˆæœè°ƒç”¨çš„é¡ºåºä¿æŒä¸å˜ã€‚ç¬¬ä¸€ä¸ªè¢«è§¦å‘ï¼Œç„¶åæ˜¯ç¬¬äºŒä¸ªâ€”â€”å¦‚æ­¤å¾ªç¯å¾€å¤ã€‚

ç°åœ¨ï¼Œå¦‚æœç¬¬äºŒä¸ª`useEffect`é’©å­è¢«æ›¿æ¢æˆä¸€ä¸ª`useLayoutEffect`é’©å­ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ

```
useEffect(() => {
    console.log("USE EFFECT FUNCTION TRIGGERED");
});
useLayoutEffect(() => {
    console.log("USE LAYOUT EFFECT FUNCTION TRIGGERED");
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°½ç®¡`useLayoutEffect`æŒ‚é’©è¢«æ”¾ç½®åœ¨`useEffect`æŒ‚é’©ä¹‹åï¼Œä½†æ˜¯`useLayoutEffect`æŒ‚é’©é¦–å…ˆè¢«è§¦å‘ï¼

[![useEffect Count Example, Part 3](img/637ee45121b35dbc2c871be8558123ae.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Ifby9siU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/useeffect-count-example-3.png%3Fresize%3D730%252C520%26ssl%3D1)

è¿™å¯ä»¥ç†è§£ã€‚åœ¨ç»˜åˆ¶ DOM çªå˜ä¹‹å‰ï¼ŒåŒæ­¥è§¦å‘`useLayoutEffect`å‡½æ•°ã€‚ç„¶è€Œï¼Œ`useEffect`å‡½æ•°åœ¨ DOM çªå˜è¢«æç»˜åè¢«è°ƒç”¨*ã€‚*

è¿™æœ‰æ„ä¹‰å—ï¼Ÿ

å…³äº`useEffect`å’Œ`useLayoutEffect`é’©å­çš„æ‰§è¡Œæ—¶é—´ï¼Œæˆ‘è¿˜æœ‰ä¸€ä¸ªæ›´æœ‰è¶£çš„ä¾‹å­ã€‚

åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘å°†å¸¦ä½ å›åˆ°å¤§å­¦æ—¶ä»£ï¼Œæˆ–è€…ä»»ä½•ä½ æ›¾ç»ç»˜åˆ¶å›¾è¡¨çš„è‹¦ä¹å‚åŠçš„ç»å†ã€‚[![ğŸ™‚](img/c1766ba8b46615e3a821a99042b0d85a.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--2EAkP1Kt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s.w.oimg/core/emoji/12.0.0-1/72x72/1f642.png)

ç¤ºä¾‹åº”ç”¨ç¨‹åºæœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œç”¨äºåˆ‡æ¢æ ‡é¢˜çš„å¯è§†çŠ¶æ€â€”â€”æ˜¯å¦æ™ƒåŠ¨ã€‚è¿™æ˜¯æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åº:

[![Title Shake Example App](img/d37f83aa429a6cbed8d266b2ce0caae4.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--wtOn1_Ya--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://i0.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/title-shake-example-app.gif%3Fresize%3D730%252C577%26ssl%3D1)

æˆ‘é€‰æ‹©è¿™ä¸ªä¾‹å­çš„åŸå› æ˜¯ç¡®ä¿å½“æŒ‰é’®è¢«ç‚¹å‡»æ—¶ï¼Œæµè§ˆå™¨å®é™…ä¸Šæœ‰ä¸€äº›æœ‰è¶£çš„å˜åŒ–è¦ç”»ï¼Œå› æ­¤æœ‰åŠ¨ç”»ã€‚

æ ‡é¢˜çš„å¯è§†çŠ¶æ€åœ¨`useEffect`å‡½æ•°è°ƒç”¨ä¸­åˆ‡æ¢ã€‚å¦‚æœä½ æ„Ÿå…´è¶£ï¼Œä½ å¯ä»¥[æŸ¥çœ‹å®ç°](https://codesandbox.io/s/useeffect-uselayouteffect-time-of-execution-2-kqnqp?fontsize=14)ã€‚

ç„¶è€Œï¼Œé‡è¦çš„æ˜¯ï¼Œæˆ‘é€šè¿‡æ¯ç§’åˆ‡æ¢è§†è§‰çŠ¶æ€ï¼Œå³é€šè¿‡ç‚¹å‡»æŒ‰é’®ï¼Œæ”¶é›†äº†é‡è¦çš„æ•°æ®ã€‚è¿™æ˜¯é€šè¿‡`useEffect`å’Œ`useLayoutEffect`å®Œæˆçš„ã€‚

ä½¿ç”¨`performance.now`ï¼Œæˆ‘æµ‹é‡äº†`useEffect`å’Œ`useLayoutEffect`ç‚¹å‡»æŒ‰é’®å’Œè§¦å‘æ•ˆæœåŠŸèƒ½ä¹‹é—´çš„å·®å¼‚ã€‚

ä»¥ä¸‹æ˜¯æˆ‘æ”¶é›†çš„æ•°æ®:

[![Time Of Evaluation Data Sheet](img/a39ed9507e4524c8415d1934858ea8ac.png)](https://res.cloudinary.com/practicaldev/image/fetch/s---3_hO8d_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/time-of-evaluation-data-sheet.png%3Fresize%3D730%252C644%26ssl%3D1)

æ— æ³•è§£é‡Šçš„æ•°å­—å¯¹è§†è§‰æ€ç»´æ¯«æ— æ„ä¹‰ã€‚æ ¹æ®è¿™äº›æ•°æ®ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªå›¾è¡¨æ¥ç›´è§‚åœ°è¡¨ç¤º`useEffect`å’Œ`useLayoutEffect`çš„æ‰§è¡Œæ—¶é—´ã€‚ç»™ä½ :

[![Time Of Evaluation Graph](img/828227f5b17c16cb6aeefcbf888d54c4.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--y-_Ohr4K--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/time-of-evaluation-graph.png%3Fresize%3D730%252C330%26ssl%3D1)

çœ‹çœ‹`useEffect`æ¯”`useLayoutEffect`æ™šå‘å°„äº†å¤šå°‘ï¼Ÿ

èŠ±ç‚¹æ—¶é—´æ¥è§£é‡Šä¸Šé¢çš„å›¾è¡¨ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå®ƒä»£è¡¨äº†è§¦å‘`useEffect`å’Œ`useLayoutEffect`æ•ˆæœå‡½æ•°ä¹‹é—´çš„æ—¶é—´å·®â€”â€”åœ¨æŸäº›æƒ…å†µä¸‹è¶…è¿‡ 10 å€ã€‚

æ‚¨å°†çœ‹åˆ°è¿™ç§æ—¶é—´å·®å¦‚ä½•åœ¨è¯¸å¦‚ DOM åŠ¨ç”»ç­‰ç”¨ä¾‹ä¸­å‘æŒ¥å·¨å¤§ä½œç”¨ï¼Œä¸‹é¢çš„ç¤ºä¾‹ 3 å¯¹æ­¤è¿›è¡Œäº†è§£é‡Šã€‚

### 2ã€‚å—è¿‡è®­ç»ƒä¼šç©æŠŠæˆçš„

æ˜‚è´µçš„è®¡ç®—æ˜¯éå¸¸æ˜‚è´µçš„ã€‚å¦‚æœå¤„ç†ä¸å½“ï¼Œè¿™äº›ä¼šå¯¹åº”ç”¨ç¨‹åºçš„æ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ã€‚

å¯¹äºåœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œæ‚¨å¿…é¡»å°å¿ƒä¸è¦ä»…ä»…å› ä¸ºæ‚¨åœ¨åå°è¿è¡Œç¹é‡çš„è®¡ç®—å°±é˜»æ­¢ç”¨æˆ·æŸ¥çœ‹å¯è§†åŒ–æ›´æ–°ã€‚

åœ¨å¦‚ä½•å¤„ç†ç¹é‡çš„è®¡ç®—æ–¹é¢ï¼Œ`useEffect`å’Œ`useLayoutEffect`çš„è¡Œä¸ºæ˜¯ä¸åŒçš„ã€‚å¦‚å‰æ‰€è¿°ï¼Œ`useEffect`ä¼šå°†æ•ˆæœå‡½æ•°çš„æ‰§è¡Œæ¨è¿Ÿåˆ° DOM çªå˜å®Œæˆä¹‹åï¼Œè¿™æ˜¯ä¸¤è€…ä¸­æ˜¾è€Œæ˜“è§çš„é€‰æ‹©ã€‚(é¡ºä¾¿è¯´ä¸€å¥ï¼Œæˆ‘çŸ¥é“`useMemo`å¯¹äºè®°å¿†ç¹é‡çš„è®¡ç®—éå¸¸æœ‰ç”¨ã€‚è¿™ç¯‡æ–‡ç« å¿½ç•¥äº†è¿™ä¸ªäº‹å®ï¼Œåªæ˜¯æ¯”è¾ƒäº†`useEffect`å’Œ`useLayoutEffect`ã€‚)

æˆ‘æœ‰æ”¯æŒæˆ‘åˆšæ‰è§‚ç‚¹çš„ä¾‹å­å—ï¼Ÿä½ æ‰“èµŒï¼

ç”±äºå¤§å¤šæ•°ç°ä»£è®¡ç®—æœºéƒ½éå¸¸å¿«ï¼Œæˆ‘è®¾ç½®äº†ä¸€ä¸ªä¸å®ç”¨çš„åº”ç”¨ç¨‹åºï¼Œä½†è¶³ä»¥æ»¡è¶³æˆ‘ä»¬çš„ç”¨ä¾‹ã€‚

åº”ç”¨ç¨‹åºå‘ˆç°äº†ä¸€ä¸ªçœ‹ä¼¼æ— å®³çš„åˆå§‹å±å¹•:

[![Initial App Render](img/3ad3432e9e0ff649edfbd2fcc93102f8.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--_Pl6BADn--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/initial-app-render.png%3Fresize%3D730%252C503%26ssl%3D1)

ç„¶è€Œï¼Œå®ƒæœ‰ä¸¤ä¸ªå¯ç‚¹å‡»çš„æŒ‰é’®ï¼Œå¯ä»¥è§¦å‘ä¸€äº›æœ‰è¶£çš„å˜åŒ–ã€‚ä¾‹å¦‚ï¼Œç‚¹å‡» **200 æ¡**æŒ‰é’®å°†è®¡æ•°çŠ¶æ€è®¾ç½®ä¸º 200ã€‚

[![App Rendering With Count State of 200](img/8996e2e4a87437c3572416cd55d3987b.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--wGY85dp3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/app-render-count-state-200.png%3Fresize%3D730%252C504%26ssl%3D1)

ä½†è¿™è¿˜ä¸æ˜¯å…¨éƒ¨ã€‚å®ƒè¿˜è¿«ä½¿æµè§ˆå™¨åœ¨å±å¹•ä¸Šç»˜åˆ¶ 200 ä¸ªæ–°çš„æ¡å½¢ã€‚

[![App After Having Rendered 200 Bars](img/214669fdeea91fa6c035432879210bd5.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--rLNx9v5Y--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i1.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/app-render-200-bars.png%3Fresize%3D730%252C504%26ssl%3D1)

ä¸‹é¢æ˜¯æ–¹æ³•:

```
... 
return (
...
   <section
        style={{
            display: "column",
            columnCount: "5",
            marginTop: "10px" }}>
        {new Array(count).fill(count).map(c => (
          <div style={{
                height: "20px",
                background: "red",
                margin: "5px"
         }}> {c}
         </div> ))}
   </section>
) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¸æ˜¯ä¸€ç§è¡¨ç° 200 ä¸ªæ¡å½¢çš„éå¸¸æœ‰æ•ˆçš„æ–¹æ³•ï¼Œå› ä¸ºæˆ‘æ¯æ¬¡éƒ½åœ¨åˆ›å»ºæ–°çš„æ•°ç»„ï¼Œä½†è¿™æ˜¯å…³é”®:è®©æµè§ˆå™¨å·¥ä½œã€‚

å“¦ï¼Œè¿™è¿˜ä¸æ˜¯å…¨éƒ¨ã€‚ç‚¹å‡»ä¹Ÿè§¦å‘äº†ç¹é‡çš„è®¡ç®—ã€‚

```
...
useEffect(() => {
    // do nothing when count is zero
    if (!count) {
      return;
}
    // perform computation when count is updated.
    console.log("=== EFFECT STARTED === ");
    new Array(count).fill(1).forEach(val => console.log(val));
    console.log(`=== EFFECT COMPLETED === ${count}`);
}, [count]); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ effect å‡½æ•°ä¸­ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªé•¿åº¦ç­‰äºè®¡æ•°çš„æ–°æ•°ç»„â€”â€”åœ¨æœ¬ä¾‹ä¸­æ˜¯ä¸€ä¸ªåŒ…å« 200 ä¸ªå€¼çš„æ•°ç»„ã€‚æˆ‘å¯¹æ•°ç»„è¿›è¡Œå¾ªç¯ï¼Œå¹¶ä¸ºæ•°ç»„ä¸­çš„æ¯ä¸ªå€¼å‘æ§åˆ¶å°æ‰“å°ä¸€äº›å†…å®¹ã€‚

å°½ç®¡å¦‚æ­¤ï¼Œæ‚¨ä»éœ€è¦å…³æ³¨å±å¹•æ›´æ–°å’Œæ—¥å¿—æ§åˆ¶å°ï¼Œçœ‹çœ‹è¿™æ˜¯å¦‚ä½•è¡¨ç°çš„ã€‚

å¯¹äº`useEffect`ï¼Œåœ¨æ—¥å¿—è¢«è§¦å‘ä¹‹å‰ï¼Œæ‚¨çš„**å±å¹•ç”¨æ–°çš„è®¡æ•°å€¼**æ›´æ–°**ã€‚**

è¿™æ˜¯ä¸€ä¸ªå®é™…æ“ä½œçš„æˆªå±:

[![Logs Triggered With useEffect](img/cf26f3f2261d1427f13cb9c260604016.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--gMSrhCB9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://i1.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/logs-triggered-useeffect.gif%3Fresize%3D730%252C506%26ssl%3D1)

å¦‚æœä½ æœ‰ä¸€åŒé¹°çœ¼ï¼Œä½ å¯èƒ½ä¼šå‘ç°ï¼å¯¹äºæˆ‘ä»¬å…¶ä½™çš„äººæ¥è¯´ï¼Œè¿™æ˜¯åŒæ ·çš„æ…¢é•œå¤´ã€‚åœ¨ç¹é‡çš„è®¡ç®—ä¹‹å‰ï¼Œä½ ä¸å¯èƒ½é”™è¿‡å±å¹•æ›´æ–°ï¼

é‚£ä¹ˆè¿™ç§è¡Œä¸ºå’Œ`useLayoutEffect`ä¸€æ ·å—ï¼Ÿä¸è¦ï¼è¿œéå¦‚æ­¤ã€‚

ä½¿ç”¨`useLayoutEffect`ï¼Œè®¡ç®—å°†åœ¨æµè§ˆå™¨ç»˜åˆ¶æ›´æ–°ä¹‹å‰è¢«è§¦å‘ã€‚ç”±äºè®¡ç®—éœ€è¦ä¸€äº›æ—¶é—´ï¼Œè¿™ä¼šæ¶ˆè€—æµè§ˆå™¨çš„ç»˜åˆ¶æ—¶é—´ã€‚

ä¸‹é¢æ˜¯ç”¨`useLayoutEffect`æ›¿æ¢`useEffect`è°ƒç”¨åæ‰§è¡Œçš„ç›¸åŒæ“ä½œ:

[![Logs Triggered With useLayoutEffect](img/2c4b08b258afcc273c32fa40878156f3.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--kXgNN0J3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://i1.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/logs-triggered-uselayouteffect.gif%3Fresize%3D730%252C507%26ssl%3D1)

è¿™æ˜¯åœ¨[æ…¢é•œå¤´](https://youtu.be/irUvYd39k4c)ã€‚æ‚¨å¯ä»¥çœ‹åˆ°`useLayoutEffect`æ˜¯å¦‚ä½•é˜»æ­¢æµè§ˆå™¨ç»˜åˆ¶ DOM å˜åŒ–çš„ã€‚ä½ å¯ä»¥ç©ä¸€ä¸‹æ¼”ç¤ºç‰ˆï¼Œä½†æ˜¯å°å¿ƒä¸è¦è®©ä½ çš„æµè§ˆå™¨å´©æºƒã€‚

ä¸ºä»€ä¹ˆå¤„ç†ç¹é‡è®¡ç®—çš„ä¸åŒå¾ˆé‡è¦ï¼Ÿåœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œé€‰æ‹©`useEffect`é’©å­ï¼Œä»¥é¿å…åœ¨æµè§ˆå™¨ç”»å›¾è¿‡ç¨‹ä¸­ä¸å¼•äººæ³¨ç›®ã€‚åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œè¿™é€šå¸¸æ˜¯å¤§å¤šæ•°æ—¶å€™ï¼å—¯ï¼Œé™¤äº†å½“ä½ ä» DOM ä¸­è¯»å–å¸ƒå±€æˆ–è€…åšä¸€äº›ä¸ DOM ç›¸å…³çš„äº‹æƒ…éœ€è¦å°½å¿«ç»˜åˆ¶çš„æ—¶å€™ã€‚

ä¸‹ä¸€èŠ‚å°†å±•ç¤ºä¸€ä¸ªå®é™…ä¾‹å­ã€‚

### 3ã€‚ä¸ä¸€è‡´çš„è§†è§‰å˜åŒ–

è¿™æ˜¯`useLayoutEffect`çœŸæ­£é—ªè€€çš„åœ°æ–¹ã€‚æƒ³å‡ºä¸€ä¸ªè¿™æ ·çš„ä¾‹å­ä¹Ÿæœ‰ç‚¹æ£˜æ‰‹ã€‚

ä½†æ˜¯ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹æˆªå±ã€‚ç”¨`useEffect`:

[![Visual Changes With useEffect](img/45fc82d6600a903a476b3fd42c160070.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Ay35pr9b--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://i0.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/visual-changes-useeffect.gif%3Fresize%3D730%252C447%26ssl%3D1)

ç”¨`useLayoutEffect`:

[![Visual Changes With useLayoutEffect](img/a166ddf2bdc9d06db7117e55a922f257.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--ZirOUyOw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://i0.wp.com/blog.logrocket.com/wp-content/uploads/2019/08/visual-changes-uselayouteffect.gif%3Fresize%3D730%252C447%26ssl%3D1)

è¿™äº›æ˜¯æˆ‘åœ¨ç”¨ React é’©å­å¼€å‘é«˜çº§æ¨¡å¼æ—¶ï¼Œåœ¨æˆ‘å³å°†å‘å¸ƒçš„ Udemy è§†é¢‘è¯¾ç¨‹ä¸­å‘ç°è‡ªå·±çš„çœŸå®åœºæ™¯ã€‚

è¿™é‡Œçš„é—®é¢˜æ˜¯ï¼Œä½¿ç”¨`useEffect`ï¼Œåœ¨ DOM æ”¹å˜è¢«ç»˜åˆ¶ä¹‹å‰ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªé—ªçƒã€‚è¿™ä¸ refs å¦‚ä½•ä¼ é€’ç»™å®šåˆ¶é’©å­(å³ä½ å†™çš„é’©å­)æœ‰å…³ã€‚æœ€åˆï¼Œåœ¨å‘ˆç°é™„åŠ çš„ DOM èŠ‚ç‚¹æ—¶ï¼Œè¿™äº› refs åœ¨å®é™…è®¾ç½®ä¹‹å‰ä»¥`null`å¼€å§‹ã€‚

å¦‚æœç»„ä»¶ä¸€æŒ‚è½½ï¼Œä½ å°±ä¾èµ–è¿™äº›å¼•ç”¨æ¥æ‰§è¡ŒåŠ¨ç”»ï¼Œé‚£ä¹ˆä½ ä¼šå‘ç°åœ¨ä½ çš„åŠ¨ç”»å¼€å§‹ä¹‹å‰ï¼Œæµè§ˆå™¨ä¼šæœ‰ä¸æ„‰å¿«çš„é—ªçƒã€‚`useEffect`æ˜¯è¿™ç§æƒ…å†µï¼Œè€Œ`useLayoutEffect`ä¸æ˜¯ã€‚

å³ä½¿æ²¡æœ‰è¿™ç§é—ªçƒï¼Œæœ‰æ—¶ä½ å¯èƒ½ä¼šå‘ç°`useLayoutEffect`åˆ¶ä½œçš„åŠ¨ç”»çœ‹èµ·æ¥æ¯”`useEffect`æ›´é»„æ²¹ã€æ›´å¹²å‡€ã€æ›´å¿«ã€‚åœ¨å¤„ç†å¤æ‚çš„ç”¨æˆ·ç•Œé¢åŠ¨ç”»æ—¶ï¼Œä¸€å®šè¦æµ‹è¯•è¿™ä¸¤ä¸ªé’©å­ã€‚

## ç»“è®º

å”·ï¼è¿™æ˜¯å¤šä¹ˆé•¿çš„ä¸€æ®µè¯å•Šï¼ä¸ç®¡æ€æ ·ï¼Œä½ å·²ç»æŒæ¡äº†è¶³å¤Ÿçš„ä¿¡æ¯ã€‚å»æ„å»ºé«˜æ€§èƒ½çš„åº”ç”¨ç¨‹åºï¼Œå¹¶åœ¨éœ€è¦çš„åœ°æ–¹ä½¿ç”¨æœŸæœ›çš„é’©å­ã€‚

æƒ³çœ‹çœ‹æˆ‘çš„(æ–°)å¸¦é’©å­çš„é«˜çº§ååº”æ¨¡å¼å—ï¼ŸæŠ¥å[ç­‰å€™åå•](https://forms.gle/Qd6yZC1Lhcosnc2f8)ï¼

* * *

**ç¼–è€…æŒ‰:**çœ‹åˆ°è¿™ä¸ªå¸–å­æœ‰é—®é¢˜ï¼Ÿä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ­£ç¡®çš„ç‰ˆæœ¬ã€‚

## Plug: [LogRocket](https://logrocket.com/signup/) ï¼Œä¸€æ¬¾é€‚ç”¨äºç½‘ç»œåº”ç”¨çš„ DVR

[![LogRocket Dashboard Free Trial Banner](img/0abf868fe5ccbed99d71cb8d9e81ed98.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--6FG5kvEL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png%3Fresize%3D1200%252C677%26ssl%3D1)

[log rocket](https://logrocket.com/signup/)æ˜¯ä¸€ä¸ªå‰ç«¯æ—¥å¿—å·¥å…·ï¼Œè®©ä½ é‡æ”¾é—®é¢˜ï¼Œå°±åƒå®ƒä»¬å‘ç”Ÿåœ¨ä½ è‡ªå·±çš„æµè§ˆå™¨ä¸­ä¸€æ ·ã€‚LogRocket ä¸éœ€è¦çŒœæµ‹é”™è¯¯å‘ç”Ÿçš„åŸå› ï¼Œä¹Ÿä¸éœ€è¦å‘ç”¨æˆ·è¯¢é—®æˆªå›¾å’Œæ—¥å¿—è½¬å‚¨ï¼Œè€Œæ˜¯è®©æ‚¨é‡æ”¾ä¼šè¯ä»¥å¿«é€Ÿäº†è§£å“ªé‡Œå‡ºé”™äº†ã€‚å®ƒå¯ä»¥ä¸ä»»ä½•åº”ç”¨ç¨‹åºå®Œç¾é…åˆï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆæ¡†æ¶ï¼Œå¹¶ä¸”æœ‰æ’ä»¶å¯ä»¥è®°å½•æ¥è‡ª Reduxã€Vuex å’Œ@ngrx/store çš„é¢å¤–ä¸Šä¸‹æ–‡ã€‚

é™¤äº†è®°å½• Redux åŠ¨ä½œå’ŒçŠ¶æ€ï¼ŒLogRocket è¿˜è®°å½•æ§åˆ¶å°æ—¥å¿—ã€JavaScript é”™è¯¯ã€stacktracesã€å¸¦æœ‰å¤´+ä½“çš„ç½‘ç»œè¯·æ±‚/å“åº”ã€æµè§ˆå™¨å…ƒæ•°æ®ã€è‡ªå®šä¹‰æ—¥å¿—ã€‚å®ƒè¿˜ä½¿ç”¨ DOM æ¥è®°å½•é¡µé¢ä¸Šçš„ HTML å’Œ CSSï¼Œç”šè‡³ä¸ºæœ€å¤æ‚çš„å•é¡µé¢åº”ç”¨ç¨‹åºé‡æ–°åˆ›å»ºåƒç´ çº§å®Œç¾è§†é¢‘ã€‚

[å…è´¹è¯•ç”¨](https://logrocket.com/signup/)ã€‚

* * *

ç”¨ç®€å•æ˜“æ‡‚çš„è¯­è¨€å†™çš„å¸–å­[use effect vs . useLayoutEffect](https://blog.logrocket.com/useeffect-vs-uselayouteffect/)é¦–å…ˆå‡ºç°åœ¨[åšå®¢](https://blog.logrocket.com)ä¸Šã€‚