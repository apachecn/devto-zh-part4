# ä½¿ç”¨ Gremlin å’Œ Grafana äº†è§£æ‚¨çš„ Kubernetes é›†ç¾¤å¦‚ä½•å“åº”æ•…éšœ

> åŸæ–‡:[https://dev . to/loop delicious/learn-how-your-kubernetes-clusters-respond-to-failure-using-gremlin-and-grafana-2l 76](https://dev.to/loopdelicious/learn-how-your-kubernetes-clusters-respond-to-failure-using-gremlin-and-grafana-2l76)

åˆ©ç”¨æ··æ²Œå·¥ç¨‹æ„å»ºå¼¹æ€§ APIã€‚

æˆ‘ä¸å–„äºå¤„ç†å¤±è´¥ã€‚ä½†æ˜¯æˆ‘è¶Šæ¥è¶Šæ“…é•¿äº†ï¼Œå› ä¸ºæˆ‘å¤±è´¥äº†å¾ˆå¤šæ¬¡ã€‚äº‹å®ä¸Šï¼Œæˆ‘å¤±è´¥å¾—è¶Šå¤šï¼Œæˆ‘å°±è¶Šèƒ½æ›´å¥½åœ°é¢„è§åˆ°æˆ‘å¯èƒ½å´©æºƒå’Œçƒ§æ¯çš„æ‰€æœ‰æ–¹å¼ï¼Œå¹¶æ”¯æ’‘èµ·è¿™äº›å¼±ç‚¹ã€‚

è¿™ç§æœŸå¾…å¯èƒ½ä¼šè®©æˆ‘å¤œä¸èƒ½å¯ï¼Œä½†æˆ‘åè€Œå› æ­¤å˜å¾—æ›´åŠ åšå¼ºã€‚

[![](../Images/54d7fd03190c48fb7ab2fdade9fec70e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--pfC1ZbGs--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AYeu19v1w20PpePBBPISaJQ.jpeg)

åœ¨[æ›´å¥½çš„å®è·µ](https://medium.com/better-practices)ä¸­ï¼Œæˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡éšç€å›¢é˜Ÿç»§ç»­é‡‡ç”¨å¾®æœåŠ¡å’Œåˆ†å¸ƒå¼æ¶æ„ï¼Œåœ¨äº‘ä¸­å·¥ä½œå˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€‚ä¸€äº›æ–¹æ³•æ˜¯[é€šè¿‡ API ä¼˜å…ˆçš„æ–¹æ³•](https://medium.com/better-practices/api-first-software-development-for-modern-organizations-fdbfba9a66d3)å®ç°çµæ´»æ€§ï¼Œæˆ–è€…[é€šè¿‡ä½¿ç”¨å®¹å™¨å’Œç¼–æ’å¼•æ“](https://dev.to/loopdelicious/deploying-a-scalable-web-application-with-docker-and-kubernetes-2p0k-temp-slug-5480716)æé«˜é€Ÿåº¦ã€‚

å¦ä¸€ç§æ–¹æ³•æ˜¯æ··æ²Œå·¥ç¨‹ã€‚

åˆ†å¸ƒå¼ç³»ç»Ÿæœ¬è´¨ä¸Šæ˜¯æ··ä¹±çš„ï¼Œè®¸å¤šç»„ç»‡åœ¨å‘äº‘è¿ç§»æ—¶éƒ½åœ¨æ‹¥æŠ±è¿™ç§æ··ä¹±ã€‚ä»–ä»¬æ•…æ„å°†å¤±è´¥æ³¨å…¥ä»–ä»¬çš„ç³»ç»Ÿï¼Œä»¥ä¾¿è¯†åˆ«ä»¥å‰æœªçŸ¥çš„æ¼æ´ã€‚

<figure>[![](../Images/06b7bb65344105c4dc9b3090d51167dc.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--xHhFSATf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2A-z-zoW1bHmA6NOScjpdyeg.png) 

<figcaption>å½“ä½ çš„ä¸€ä¸ªä¾èµ–å¤±æ•ˆæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</figcaption>

</figure>

å½“æ‚¨çš„ä¸€ä¸ªä¾èµ–é¡¹å¤±è´¥æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿé€šè¿‡ä¸»åŠ¨æ§åˆ¶æ•…éšœæ¡ä»¶ï¼Œæ‚¨å¯ä»¥æ ¹æ®è‡ªå·±çš„æ¡ä»¶ä»ç³»ç»Ÿçš„å“åº”ä¸­å­¦ä¹ ï¼Œè€Œä¸æ˜¯åœ¨æ„å¤–åœæœºæœŸé—´ã€‚

### [](#what-is-chaos-engineering)ä»€ä¹ˆæ˜¯æ··æ²Œå·¥ç¨‹ï¼Ÿ

å½“ç½‘é£ä»å•ä¸€æ¶æ„è¿‡æ¸¡åˆ°åˆ†å¸ƒå¼äº‘æ¶æ„æ—¶ï¼Œä»–ä»¬æ‹…å¿ƒæ½œåœ¨çš„åœæœºæ—¶é—´ä¼šå¦‚ä½•å½±å“ä»–ä»¬çš„ç”¨æˆ·ã€‚ç½‘é£å›¢é˜Ÿå¼•å…¥äº†[æ··æ²ŒçŒ´](https://github.com/Netflix/chaosmonkey)æ¥ä¼ªéšæœºæ€æ­»å®ä¾‹ï¼Œä»¥æ¨¡æ‹ŸéšæœºæœåŠ¡å™¨æ•…éšœã€‚

ä»–ä»¬å¸Œæœ›ç¡®ä¿èƒ½å¤Ÿç»å—ä½è¿™ç§ç±»å‹çš„å¤±è´¥ï¼Œå¹¶æ›´å¥½åœ°äº†è§£è¿™ç§å¤±è´¥å¯¹å®¢æˆ·çš„å½±å“ã€‚ç›®æ ‡æ˜¯å·©å›ºä»–ä»¬çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä»¥é¢„æœŸå’Œå®¹å¿æ¥è‡ªä»–ä»¬æ‰€ä¾èµ–çš„å…¶ä»–ç³»ç»Ÿçš„æ•…éšœã€‚

[![](../Images/86039131615929bd35e3b2b3c37e424f.png)T2ã€‘](https://www.oreilly.com/ideas/chaos-engineering)

> [ã€æ··æ²Œå·¥ç¨‹ã€‘æ¿€åŠ±å·¥ç¨‹å¸ˆæ„å»ºä»–ä»¬çš„æœåŠ¡ï¼Œä»¥é¢„æœŸä¸€äº›æœåŠ¡å™¨ä¼šçªç„¶æ¶ˆå¤±â€¦å› æ­¤ä»–ä»¬å¿…é¡»æ„å»ºå†—ä½™ã€é«˜å¯ç”¨æ€§å’Œå®¹é”™çš„æœåŠ¡ã€‚](https://youtu.be/9MvcXO4L4Tk)
> 
> [â€”â€”å‡¯è¥¿Â·ç½—æ£®å¡”å°”](https://twitter.com/caseyrosenthal?),[å¨ç‘å¡](https://www.verica.io/)çš„é¦–å¸­æ‰§è¡Œå®˜

æ­¤åä¸ä¹…ï¼Œç½‘é£å›¢é˜Ÿå¼•å…¥äº†ä¸€ä¸ªè™šæ‹Ÿçš„çŒ¿çŒ´éƒ¨é˜Ÿï¼Œæ¯åªæ–°çŒ´å­çš„ä»»åŠ¡éƒ½æ˜¯å¼•å‘å¦ä¸€ç§ç±»å‹çš„å¤±è´¥â€”â€”æ¯”å¦‚é™ä½æœåŠ¡è´¨é‡æˆ–æ€æ­»æ•´ä¸ªåŒºåŸŸã€‚ä»é‚£ä»¥åï¼Œæ··ä¹±ç¤¾åŒºå·²ç»å¼€å‘äº†[è®¸å¤šå·¥å…·](https://github.com/dastergon/awesome-chaos-engineering)æ¥æ›´ç²¾ç¡®åœ°ä»¥å¯æ§çš„æ–¹å¼åˆ¶é€ æ··ä¹±ã€‚

ä»Šå¤©ï¼Œæœ‰è®¸å¤šå…¬å¸å·²ç»æ¥å—äº†æ··æ²Œå·¥ç¨‹çš„åŸåˆ™ã€‚ä¸€äº›å›¢é˜Ÿå¯èƒ½ä¸“æ³¨äºå¤±è´¥æ³¨å…¥æµ‹è¯•æˆ–ç¾éš¾æ¢å¤åŸ¹è®­ï¼Œè€Œåªé‡‡ç”¨ä¸ºä»–ä»¬çš„ç‰¹å®šç›®æ ‡å·¥ä½œçš„å·¥å…·å’Œå®è·µã€‚

åœ¨æ‰€æœ‰è¿™äº›é¡¹ç›®ä¸­ï¼Œä¸€ç§è®­ç»ƒæœ‰ç´ çš„æ–¹æ³•æ•™ä¼šä»–ä»¬å¦‚ä½•æ”¹è¿›ä»–ä»¬çš„ç³»ç»Ÿï¼Œä»¥ä¾¿ä»–ä»¬èƒ½å¤Ÿæ›´å¥½åœ°å®¹å¿æœªæ¥çš„ã€*è®¡åˆ’å¤–çš„*æ•…éšœã€‚

> ä¸ºä»€ä¹ˆè¦æ‹…å¿ƒä¸ä¼šå‘ç”Ÿçš„äº‹æƒ…å‘¢ï¼Ÿ
> 
> *   [HBO è¿·ä½ å‰§ã€Šåˆ‡å°”è¯ºè´åˆ©ã€‹](https://www.hbo.com/chernobyl)

### [](#why-look-for-trouble)ä½•å¿…è‡ªæ‰¾éº»çƒ¦ï¼Ÿ

æ··æ²Œå®éªŒå°±åƒè¿›è¡Œæ¶ˆé˜²æ¼”ä¹ ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä½ å·²ç»åˆ¶å®šäº†ä¸€ä¸ªç«ç¾åº”æ€¥æ–¹æ¡ˆï¼Œå‘ç»™æ¯ä¸ªäººï¼Œå¹¶ä¸”ä½ æ¯ä¸ªæœˆæµ‹è¯•ä¸€æ¬¡ç«è­¦ä»¥ç¡®ä¿å®ƒæ­£å¸¸å·¥ä½œã€‚

[![](../Images/a6acb341fb54c65266dc72af963e3420.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--LmLK9y4M--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2A1N9OdZBqgzEgbBg0O6Mu3Q.jpeg)

å½“ä½ è¿›è¡Œæ¶ˆé˜²æ¼”ä¹ æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä½ å¯èƒ½ä¼šå‘ç°æœ‰å‡ ä¸ªæˆ¿é—´å¬ä¸åˆ°è­¦æŠ¥ï¼Œå¤§å¤šæ•°äººä¸è®°å¾—ä»–ä»¬åº”è¯¥åœ¨å“ªé‡Œè§é¢ï¼Œè€Œå…¶ä»–äººåˆ™æ— è§†è®­ç»ƒï¼Œå‘†åœ¨è‡ªå·±çš„åŠå…¬æ¡Œå‰ã€‚

é€šè¿‡ä¸»åŠ¨æµ‹è¯•ç³»ç»Ÿå¦‚ä½•å“åº”æ•…éšœæ¡ä»¶ï¼Œæ‚¨å¯ä»¥åœ¨æ•…éšœå˜æˆé¢å‘å…¬ä¼—çš„åœæœºä¹‹å‰è¯†åˆ«å¹¶ä¿®å¤æ•…éšœã€‚ç”Ÿäº§ä¸­çš„å¤±è´¥ä»£ä»·é«˜æ˜‚ï¼Œæ‰€ä»¥æ··æ²Œå·¥ç¨‹è®©ä½ ç”¨ç³»ç»Ÿä¸­å®é™…å‘ç”Ÿçš„äº‹æƒ…æ¥éªŒè¯ä½ è®¤ä¸ºä¼šå‘ç”Ÿçš„äº‹æƒ…ã€‚

ä¸ºäº†å»ºç«‹æ›´æœ‰å¼¹æ€§çš„ç³»ç»Ÿï¼Œâ€œæ•…æ„æ‰“ç ´å¸¸è§„â€æ˜¯ä¸ºäº†è®©ä½ çš„å›¢é˜Ÿåœ¨åœ°éœ‡ã€åƒµå°¸è¢­å‡»æˆ–å…¶ä»–ä»»ä½•æƒ…å†µä¸‹åšå¥½å‡†å¤‡ã€‚

### [](#who-is-responsible-for-chaos-engineering)è°è´Ÿè´£æ··æ²Œå·¥ç¨‹ï¼Ÿ

åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œæ„å»ºæœåŠ¡çš„å·¥ç¨‹å¸ˆé€šå¸¸è´Ÿè´£éƒ¨ç½²å’Œæ­£å¸¸è¿è¡Œæ—¶é—´ã€‚åœ¨æ‹¥æœ‰ä¼ ç»Ÿå¼€å‘è¿ç»´å›¢é˜Ÿçš„ç»„ç»‡ä¸­ï¼Œè¿™äº›å¼€å‘è¿ç»´å·¥ç¨‹å¸ˆå¯èƒ½æ‹¥æœ‰è¿™äº›æœåŠ¡çº§åˆ«ã€‚ä¸€äº›å…¬å¸æœ‰ä¸“é—¨çš„ç°åœºå¯é æ€§å·¥ç¨‹å¸ˆ(SRE)æˆ–ç”Ÿäº§å·¥ç¨‹å¸ˆ(PE)å›¢é˜Ÿï¼Œè´Ÿè´£æŒç»­æ”¹è¿›å’Œç”Ÿäº§æ”¯æŒã€‚

æœ€åˆï¼Œæœ€æœ‰åŠ¨åŠ›å®æ–½æ··æ²Œå·¥ç¨‹çš„äººæ˜¯é‚£äº›æ„Ÿå—åˆ°ç”Ÿäº§å¤±è´¥çš„ç—›è‹¦çš„äººï¼Œæ¯”å¦‚é‚£äº›éšå«éšåˆ°çš„äººã€‚

> æˆ‘å¼€å§‹åš[æ··æ²Œå·¥ç¨‹]ï¼Œè¿™æ ·æˆ‘å°±ä¸ä¼šåœ¨åŠå¤œè¢«åµé†’ï¼Œä¹Ÿèƒ½æ›´å¥½åœ°ç†è§£æˆ‘çš„è½¯ä»¶ã€‚
> 
> å½’ç»“èµ·æ¥å°±æ˜¯è°è¢«ä¼ å‘¼äº†â€”â€”å¦‚æœæ˜¯ SRE æˆ–è¿è¥å›¢é˜Ÿï¼Œä»–ä»¬æœ€æœ‰åŠ¨åŠ›å¼€å§‹åšè¿™é¡¹å·¥ä½œï¼Œè®©ä»–ä»¬çš„ç”Ÿæ´»å˜å¾—æ›´å¥½ã€‚
> 
> â€” [ç§‘å°”é¡¿Â·å®‰å¾·é²æ–¯](https://twitter.com/koltonandrus),[å°ç²¾çµ](https://www.gremlin.com/)çš„é¦–å¸­æ‰§è¡Œå®˜

å…¶ä»–æœ‰æ—¢å¾—åˆ©ç›Šçš„äººè´Ÿè´£äº‹æ•…ç®¡ç†æˆ–äº‹ååˆ†æã€‚è¿™é‡Œçš„åŒºåˆ«åœ¨äºï¼Œäº‹ä»¶ç®¡ç†æ˜¯ä¸€ä¸ªè¢«åŠ¨çš„è¿‡ç¨‹ï¼Œé‡‡å–æªæ–½é˜²æ­¢äº‹ä»¶å†æ¬¡å‘ç”Ÿã€‚æœ‰äº†æ··æ²Œå·¥ç¨‹ï¼Œä½ çš„å®éªŒå¯ä»¥é€šè¿‡é¢„æµ‹ä»€ä¹ˆå¯èƒ½ä¼šå‡ºé”™æ¥ä¸»åŠ¨è¿›è¡Œã€‚

[![](../Images/e310dc586d5a3482382b5c88ef6a7335.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--2o2kfi3d--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2A0CaYOqTQndarPsYONHAjYQ.jpeg)

ç°åœ¨ï¼Œç»å¤§å¤šæ•°å®æ–½æ··æ²Œå·¥ç¨‹çš„äººå€¾å‘äºè´¨é‡é©±åŠ¨å’Œç”Ÿäº§ä¸ºä¸­å¿ƒçš„æ“ä½œå·¥ç¨‹å¸ˆã€‚

ç„¶è€Œï¼Œåœ¨å¼€å‘å‘¨æœŸçš„æ—©æœŸå¼•å…¥å¼¹æ€§çš„è´£ä»»ä¹Ÿæ˜¯æœ‰æ„ä¹‰çš„ï¼Œæ­¤æ—¶ bug çš„æˆæœ¬æœ€ä½ï¼Œä»¥å‡å°‘ç”Ÿäº§ä¸­çš„è´¢åŠ¡å’Œå…¶ä»–åæœã€‚å› æ­¤ï¼Œé™¤äº†ä¼ ç»Ÿçš„é¢„å‘å¸ƒæµ‹è¯•ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§æµ‹è¯•äººå‘˜å…³æ³¨äº§å“æµ‹è¯•çš„è¶‹åŠ¿ã€‚

é‚£ä¹ˆè°æ‹¥æœ‰æ··æ²Œï¼Ÿ

*   **ä¸“ä¸šè§’è‰²** â€”ç°åœºå¯é æ€§å·¥ç¨‹å¸ˆ(SRE)ã€ç”Ÿäº§å·¥ç¨‹å¸ˆ(PE)
*   èŒèƒ½å›¢é˜Ÿ â€”å¼€å‘ã€æµ‹è¯•å’Œè´¨é‡ä¿è¯(QA)ã€ç ”å‘(R & D)
*   **é¢†åŸŸçŸ¥è¯†ä¸“å®¶** â€”æµé‡ã€æ•°æ®åº“ã€æ•°æ®ã€å­˜å‚¨

æ··æ²Œå·¥ç¨‹çš„æœ€åˆæ‰€æœ‰è€…å°†ç”±ä½ çš„å›¢é˜Ÿå½“å‰çš„åŸºç¡€è®¾æ–½ã€å¤©èµ‹å’Œç›®æ ‡å†³å®šã€‚æ­¤å¤–ï¼Œéšç€è¶Šæ¥è¶Šå¤šçš„ç»„ç»‡è¿ç§»åˆ°äº‘ï¼Œè¿™ç§è´£ä»»å¯èƒ½ä¼šè½¬ç§»ï¼Œæ··æ²Œå·¥ç¨‹å˜å¾—æ›´åŠ ä¸»æµï¼Œå¹¶å¼€å§‹å¢å¼ºä¼ ç»Ÿæµ‹è¯•ã€‚

### [](#how-can-you-start-a-chaos-program)æ€ä¹ˆèƒ½å¯åŠ¨æ··æ²Œç¨‹åºï¼Ÿ

ä½ ä¸éœ€è¦ä¸€ä¸ªç‰¹æ®Šçš„å¤´è¡”ï¼Œç”šè‡³ä¸éœ€è¦ç½‘é£çº§åˆ«çš„æµé‡å°±å¯ä»¥å¼€å§‹æ¶‰è¶³æ··æ²Œã€‚æ··æ²Œç¤¾åŒºå·²ç»å¼€å‘äº†[æ•°é‡çš„å…±äº«èµ„æº](https://github.com/dastergon/awesome-chaos-engineering)æ¥å¸®åŠ©æ¨è¿›è¿™ä¸ªæ–°å…´å­¦ç§‘ã€‚åƒ[è°·æ­Œ](https://cloud.google.com/solutions/dr-scenarios-planning-guide)ã€ [Twilio](https://www.twilio.com/blog/2017/11/chaos-engineering-ratequeue-ha.html) ã€ [PagerDuty](https://www.pagerduty.com/blog/chaoscat-automating-fault-injection/) ç­‰ç»„ç»‡å·²ç»é‡‡ç”¨äº†ä»–ä»¬è‡ªå·±çš„æ··æ²Œå·¥ç¨‹æ–¹æ³•ã€‚

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ˜¯ä¸€ä¸ªå¥½å¥‡çš„æµ‹è¯•è€…åœ¨é€šçŸ¥äº†å›¢é˜Ÿçš„å…¶ä»–æˆå‘˜åå¼€å§‹äº†ä¸€ä¸ªæ··æ²Œå®éªŒã€‚ä¹Ÿè®¸æ˜¯å‡ ä¸ªå·¥ç¨‹å¸ˆæŒ¤åœ¨ä¸€èµ·è®¡åˆ’ä»–ä»¬åœ¨[æ¯”èµ›æ—¥](https://aws.amazon.com/gameday/)çš„å¤±è´¥ã€‚æˆ–è€…è¿™æ˜¯é«˜çº§ç®¡ç†å±‚åœ¨ä¸€æ¬¡ä»£ä»·ç‰¹åˆ«é«˜çš„åœæœºåå‘å‡ºçš„æ‰©å¤§æ··ä¹±è®¡åˆ’èŒƒå›´çš„æŒ‡ä»¤ã€‚

[![](../Images/873e3b637bf7068a3eb8cc3eb978505d.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--8ipwvmhb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AbwtXA4A_ntUSEGHKtLaMZA.jpeg)

åŒæ ·ï¼Œæ‚¨é€‰æ‹©çš„å®ç°å°†ç”±æ‚¨å›¢é˜Ÿå½“å‰çš„åŸºç¡€è®¾æ–½ã€äººæ‰å’Œç›®æ ‡å†³å®šã€‚

> æˆ–è®¸ä»ä¸åŒçš„[å¼¹æ€§å·¥ç¨‹]æ¡†æ¶ä¸­æ”¶é›†ä¸€äº›ä½ æ„Ÿå…´è¶£çš„ç‰‡æ®µï¼Œç„¶åå›´ç»•å®ƒåˆ›å»ºä¸€ä¸ªå®è·µã€‚ä½ å¾ˆå¯èƒ½æ˜¯ç¬¬ä¸€ä¸ªåœ¨ä½ çš„ç‰¹å®šç¯å¢ƒä¸‹åˆ›é€ ç±»ä¼¼å®è·µçš„äººã€‚
> 
> æˆ‘ç¥ä½ åœ¨é‚£é¡¹äº‹ä¸šä¸­å¥½è¿ï¼Œä½†æˆ‘ä¸æ•¢ä¿è¯ä½ ç¬¬ä¸€æ¬¡å°è¯•å°±èƒ½æˆåŠŸã€‚æˆ–è€…ä½ çš„ç¬¬äºŒä¸ªã€‚
> 
> - [å‡¯è¥¿Â·ç½—æ£®å¡”å°”](https://twitter.com/caseyrosenthal?),[å¨ç‘å¡](https://www.verica.io/)çš„é¦–å¸­æ‰§è¡Œå®˜

ä¸€ä¸ªå¸¸è§çš„é™·é˜±æ˜¯æ²¡æœ‰æ¸…æ¥šåœ°ä¼ è¾¾ä½ ä¸ºä»€ä¹ˆé¦–å…ˆé‡‡ç”¨æ··æ²Œå·¥ç¨‹å®è·µçš„åŸå› ã€‚å½“ç»„ç»‡ä¸­çš„å…¶ä»–äººè¿˜ä¸ç†è§£æˆ–ä¸ç›¸ä¿¡è¿™ç§å¥½å¤„æ—¶ï¼Œå°±ä¼šäº§ç”Ÿææƒ§å’Œå›°æƒ‘ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œäººä»¬è®¤ä¸ºä½ åªæ˜¯åœ¨éšæ„ç ´åä¸œè¥¿ï¼Œæ²¡æœ‰åˆç†çš„å‡è®¾ã€‚

### [](#how-do-you-run-a-chaos-experiment)å¦‚ä½•è¿›è¡Œæ··æ²Œå®éªŒï¼Ÿ

è™½ç„¶æœ‰è®¸å¤šæ–¹æ³•æ¥è¿è¡Œä½ çš„æ··æ²Œå®éªŒï¼Œä½†å¤§å¤šæ•°è¿‡ç¨‹éƒ½æ˜¯ç”¨å‡è®¾å’Œå®éªŒçš„è¿ç»­å¾ªç¯æ¥å‘¼åº”ç§‘å­¦æ–¹æ³•ã€‚

<figure>[![](../Images/b231ee22ab0c6970d88a3b611a5a3bf1.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--V0tC1EYM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AwdrHw9NmGHE38TkaeiOMJw.png) 

<figcaption>åšå‡ºæ”¹è¿›ï¼Œå¹¶ä½¿å®éªŒè‡ªåŠ¨è¿ç»­è¿è¡Œ</figcaption>

</figure>

è®¡åˆ’ä¸€ä¸ªå®éªŒã€‚é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªå…³äºç³»ç»Ÿç¨³æ€è¡Œä¸ºçš„å‡è®¾ã€‚å…³æ³¨ä½ çš„ç³»ç»Ÿ*æ˜¯å¦èƒ½*å·¥ä½œï¼Œè€Œä¸æ˜¯*å®ƒä»¬å¦‚ä½•*å·¥ä½œã€‚ç„¶åæƒ³æƒ³å¯èƒ½ä¼šå‡ºä»€ä¹ˆé—®é¢˜ã€‚ä¹Ÿè®¸ä¸€å°æœåŠ¡å™¨åœæœºäº†(å°±åƒä»–ä»¬é‚£æ ·)ã€‚å¯èƒ½æ˜¯æ‚¨çš„ç¬¬ä¸‰æ–¹æ”¯ä»˜ç³»ç»Ÿã€ç‰¹å®šçš„é›†ç¾¤æˆ–æ•´ä¸ªåœ°åŒºå‡ºç°äº†æ•…éšœã€‚

**å¼€å§‹å°**ã€‚å‘èµ·ä¸€æ¬¡è¶³å¤Ÿå°çš„æ”»å‡»ï¼Œè®©æ‚¨äº†è§£æ‚¨çš„ç³»ç»Ÿåœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„ååº”ã€‚ä½ ä¸èƒ½æ€»æ˜¯é¢„æµ‹ç”¨æˆ·çš„è¡Œä¸ºã€‚[ä¸æ˜¯åœ¨ä¸€ä¸ªå­¤ç«‹çš„ç¯å¢ƒä¸­æµ‹è¯•ä»£ç ï¼Œè€Œæ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æµ‹è¯•ä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿ](https://techbeacon.com/app-dev-testing/test-production-yes-you-can-you-should)ï¼Œå®ƒåŒ…æ‹¬ç”¨æˆ·ã€ä»£ç ã€ç¯å¢ƒã€åŸºç¡€è®¾æ–½ã€ä¸€ä¸ªæ—¶é—´ç‚¹ç­‰ç­‰ã€‚

**æµ‹é‡å†²å‡»åŠ›**ã€‚é€šè¿‡å°†å…¶ä¸æ‚¨çš„ç¨³å®šçŠ¶æ€æŒ‡æ ‡è¿›è¡Œæ¯”è¾ƒï¼Œè§‚å¯Ÿæ”»å‡»çš„å½±å“ï¼Œä»¥æ­ç¤ºä»»ä½•å·²çŸ¥å’ŒæœªçŸ¥çš„é—®é¢˜ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œå¦‚æœæœ‰æ„æƒ³ä¸åˆ°çš„å’Œæ½œåœ¨çš„æœ‰å®³å‰¯ä½œç”¨ï¼Œä½ å¯ä»¥å¢åŠ æ”»å‡»çš„èƒ½é‡æˆ–è€…å‡å°‘æ”»å‡»ã€‚

**äº†è§£æœ‰å…³æ‚¨çš„ç³»ç»Ÿçš„æ›´å¤šä¿¡æ¯ã€‚**éªŒè¯æˆ–æ›´æ–°ä½ çš„å‡è®¾ï¼Œå·©å›ºä½ çš„å¼±ç‚¹ã€‚è¿›è¡Œè¿™äº›æ”¹è¿›ï¼Œç„¶åå‡†å¤‡å¥½è®©æ‚¨çš„å®éªŒè‡ªåŠ¨è¿ç»­è¿è¡Œã€‚

[![](../Images/f43d73d58b7ec18dd66667ec8945f5cb.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--XajpLqsf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AEuRFRJQ0iqf216oYYIyr_w.png)

å°±åƒæ¶ˆé˜²æ¼”ä¹ ä¸€æ ·ï¼Œä½ çš„å›¢é˜Ÿæ­£åœ¨é€šè¿‡ç»ƒä¹ å¦‚ä½•åœ¨é£é™©å¯æ§æ—¶åšå‡ºååº”æ¥å‘å±•è‚Œè‚‰è®°å¿†ï¼Œè€Œä¸æ˜¯åœ¨å®é™…ç´§æ€¥æƒ…å†µä¸‹è¿›è¡Œç»ƒä¹ ã€‚é€šè¿‡ç³»ç»Ÿåœ°æ‰§è¡Œè¿™äº›è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæ‚¨å¯ä»¥æ›´å¤šåœ°äº†è§£æ‚¨çš„ç³»ç»Ÿçš„çœŸå®è¡Œä¸ºã€‚

å¦‚æœä½ åˆšåˆšæ¥è§¦æ··æ²Œå·¥ç¨‹ï¼Œè€ƒè™‘ä»ä½ çš„ API å¼€å§‹ã€‚æˆ‘ä»¬ä¹‹å‰å·²ç»è®¨è®ºè¿‡ä½¿ç”¨ API[æ¥åˆ›å»ºé¢å¤–çš„è´Ÿè½½](https://dev.to/loopdelicious/don-t-get-techcrunched-performance-testing-for-your-http-apis-396a-temp-slug-6713183)æˆ–[å®‰å…¨æ³¨å…¥å’Œå…¶ä»–ç”¨æˆ·è¡Œä¸º](https://dev.to/loopdelicious/reverse-engineering-an-api-3e3-temp-slug-4060600)ã€‚ç°åœ¨ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ¨¡æ‹Ÿå¤–éƒ¨ç¬¬ä¸‰æ–¹ API çš„ä¸­æ–­æˆ–ç»ˆæ­¢æ‚¨è‡ªå·±çš„å†…éƒ¨ API æ¥æµ‹è¯•æ‚¨çš„å›é€€ã€‚

> å½“ä¸€ä¸ªå…¬å¸è¡¡é‡ä»–ä»¬çš„å…³é”®æœåŠ¡æ—¶ï¼ŒAPI é€šå¸¸è¢«è®¤ä¸ºæ˜¯äºŒç­‰å…¬æ°‘ã€‚
> 
> ä½†æ˜¯ API æ˜¯ç»„ç»‡åŸºç¡€è®¾æ–½çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œä¸äº†è§£å®ƒä»¬çš„å¼±ç‚¹ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜å’Œåœæœºã€‚
> 
> *   [Tammy Butow](https://twitter.com/tammybutow) ï¼ŒGremlin[çš„é¦–å¸­ç°åœºå¯é æ€§å·¥ç¨‹å¸ˆ](https://www.gremlin.com/)

ä½“éªŒ API ä¸­æ–­çš„ä¸€ç§æ–¹æ³•æ˜¯ç®€å•åœ°æ‹”æ‰æœåŠ¡å™¨çš„æ’å¤´ã€‚ä½†æ˜¯å¦‚æœæœåŠ¡å™¨ä¸æ˜¯ä½ çš„ï¼Œæˆ–è€…å¾ˆéš¾åˆ°è¾¾å‘¢ï¼Ÿæˆ–è€…ä½ æ„è¯†åˆ°ä½ æ‹”é”™äº†ç”µæºï¼Ÿå“å‘€ã€‚ä½ ä¸èƒ½åªæ˜¯æ’ä¸Šç”µæºå°±æŒ‡æœ›æœåŠ¡é©¬ä¸Šæ¢å¤ã€‚ä¸è¦é‚£æ ·åšã€‚

ä½“éªŒ API ä¸­æ–­çš„å¦ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨[ä¸€ä¸ªé‚®é€’å‘˜æ¨¡æ‹Ÿ](https://learning.getpostman.com/docs/postman/mock_servers/intro_to_mock_servers)è¿”å›ä¸€ä¸ª 500 å†…éƒ¨æœåŠ¡å™¨é”™è¯¯ã€‚è¿™æ˜¯å¯è¡Œçš„ï¼Œä½†å®ƒä»ç„¶åªæ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿã€‚è™½ç„¶æˆ‘ä»¬å¯ä»¥åœ¨æµ‹è¯•ç¯å¢ƒä¸­æ¨¡æ‹Ÿåœæœºï¼Œä½†åªæœ‰ä¸€ç§æ–¹æ³•å¯ä»¥æ•æ‰æ— æ³•åœ¨éš”ç¦»çš„æµ‹è¯•ç¯å¢ƒä¸­å¤åˆ¶çš„ä¸å¯é‡åŒ–çš„æƒ…å†µã€‚

æœ€ç»ˆæˆ‘ä»¬æƒ³åœ¨ç”Ÿäº§ä¸­æ‰“ç ´ä¸€äº›ä¸œè¥¿ğŸ˜ˆ

### [](#a-postman-recipe-for-creating-chaos-with-amazon-eks-and-gremlin)ç”¨äºšé©¬é€Š EKS å’Œå°å¦–ç²¾åˆ¶é€ æ··ä¹±çš„é‚®å·®ç§˜æ–¹

[![](../Images/d99ed7046cdd1f8c846b20b718071f24.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--IHllOgbq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2A17uoCPDXzuaT3pLtLaZKnw.png)

è®©æˆ‘ä»¬ä»ä¸€ä¸ªç¤ºä¾‹ç”µå­å•†åŠ¡åº”ç”¨ç¨‹åºå¼€å§‹ï¼Œç”¨æˆ·å¯ä»¥æµè§ˆå•†å“ï¼Œå°†å®ƒä»¬æ·»åŠ åˆ°è´­ç‰©è½¦ï¼Œç„¶åè´­ä¹°å®ƒä»¬ã€‚ç„¶åæˆ‘ä»¬å°†å…³é—­ä¸€ä¸ªå®¹å™¨ï¼Œçœ‹çœ‹æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆã€‚

*   **è§¦å‘:** [Gremlin](https://www.gremlin.com/) æ˜¯ä¸€ä¸ªå¤±è´¥å³æœåŠ¡ï¼Œæä¾›æœ‰é™æ”»å‡»ç±»å‹çš„å…è´¹ç‰ˆæœ¬ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ Postman å’Œ Gremlin API æ¥è§¦å‘æˆ‘ä»¬çš„æ”»å‡»ã€‚*å‰§é€è­¦æŠ¥*ã€‚ã€‚ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒç»­é›†æˆç®¡é“è½»æ¾åœ°è‡ªåŠ¨åŒ–è¿™äº›æ··æ²Œæµ‹è¯•ã€‚
*   **ç›®æ ‡:**æˆ‘ä»¬ä¹‹å‰å·²ç»è®¨è®ºè¿‡[ä½¿ç”¨ Docker å’Œ Kubernetes](https://dev.to/loopdelicious/deploying-a-scalable-web-application-with-docker-and-kubernetes-2p0k-temp-slug-5480716) éƒ¨ç½²å¯æ‰©å±•åº”ç”¨ã€‚[äºšé©¬é€Š EKS](https://aws.amazon.com/eks/) æ˜¯è¿è¡Œåœ¨ AWS ä¸Šçš„æ‰˜ç®¡ Kubernetes æœåŠ¡ã€‚è¿™ä¸ä¾¿å®œã€‚å¦‚æœæ‚¨å·²ç»åœ¨ä¸»æœºã€å®¹å™¨æˆ–å¦ä¸€ä¸ªäº‘å¹³å°ä¸Šè¿è¡Œï¼Œè¯·ç”¨æ‚¨è‡ªå·±çš„ç›®æ ‡æ›¿æ¢ EKSã€‚
*   å¯è§‚å¯Ÿæ€§:æˆ‘ä»¬å°†ä½¿ç”¨[æ™®ç½—ç±³ä¿®æ–¯](https://prometheus.io/)ä½œä¸ºæˆ‘ä»¬çš„æ—¶é—´åºåˆ—æ•°æ®åº“ï¼Œä½¿ç”¨[æ ¼æ‹‰æ³•çº³](https://grafana.com/)æ¥å¯è§†åŒ–æˆ‘ä»¬æ”»å‡»çš„æ•ˆæœã€‚ä¸¤è€…éƒ½æ˜¯å¼€æºçš„ï¼Œéƒ½æœ‰å…è´¹ç‰ˆæœ¬ã€‚å¦‚æœæ‚¨å·²ç»åœ¨ä½¿ç”¨å…¶ä»–å·¥å…·è¿›è¡Œç¨³æ€ç›‘æ§ï¼Œè¯·ç”¨æ‚¨è‡ªå·±çš„å·¥å…·é›†æ›¿æ¢ Prometheus å’Œ Grafanaã€‚

<figure>[![](../Images/8f0b87df644f12fbcbff457ce2a02a32.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--SQSsSQMZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2A80dJwHJuggQp4G3W_Oh31A.png) 

<figcaption>ä¸€ä¸ªåˆ¶é€ æ··ä¹±çš„é‚®é€’å‘˜</figcaption>

</figure>

#### [](#set-up-gremlin-and-create-a-kubernetes-cluster-on-eks)åœ¨ EKS å»ºç«‹ Gremlin å¹¶åˆ›å»º Kubernetes é›†ç¾¤

å¦‚æœä½ æƒ³è·³åˆ°æœ€åï¼Œç»§ç»­[å…‹éš†è¿™ä¸ªä¾‹å­](https://github.com/postmanlabs/kubernetes-chaos)ã€‚å¦åˆ™ï¼Œè®©æˆ‘ä»¬ä»[è¿™æœ¬æœ‰ç”¨çš„æŒ‡å—å¼€å§‹ï¼Œå®‰è£… Gremlinï¼Œä¸äºšé©¬é€Š EKS](https://www.gremlin.com/community/tutorials/how-to-install-and-use-gremlin-with-eks/) ä¸€èµ·ä½¿ç”¨ã€‚æ‚¨éœ€è¦ä¸€ä¸ª AWS å¸æˆ·ã€é…ç½®ä¸ºä½¿ç”¨ eksctl åˆ›å»º EKS é›†ç¾¤çš„ AWS CLI å’Œä¸€ä¸ª Gremlin å¸æˆ·ã€‚

*   æ­¥éª¤ 0 â€” [éªŒè¯æ‚¨çš„å¸æˆ· AWS CLI å®‰è£…](https://www.gremlin.com/community/tutorials/how-to-install-and-use-gremlin-with-eks/#step-0---verify-your-account-aws-cli-installation)
*   æ­¥éª¤ 1 â€” [ä½¿ç”¨ eksctl](https://www.gremlin.com/community/tutorials/how-to-install-and-use-gremlin-with-eks/#step-1---create-an-eks-cluster-using-eksctl) åˆ›å»ºä¸€ä¸ª EKS é›†ç¾¤
*   æ­¥éª¤ 2 â€” [ä¸ºé›†ç¾¤](https://www.gremlin.com/community/tutorials/how-to-install-and-use-gremlin-with-eks/#step-2---load-up-the-kubeconfig-for-the-cluster)åŠ è½½ kubeconfig
*   æ­¥éª¤ 3 â€” [éƒ¨ç½² Kubernetes ä»ªè¡¨æ¿](https://www.gremlin.com/community/tutorials/how-to-install-and-use-gremlin-with-eks/#step-2---deploy-kubernetes-dashboard)
*   æ­¥éª¤ 4 â€” [éƒ¨ç½²å¾®æœåŠ¡æ¼”ç¤ºåº”ç”¨](https://www.gremlin.com/community/tutorials/how-to-install-and-use-gremlin-with-eks/#step-4---deploy-a-microservice-demo-application)
*   æ­¥éª¤ 5 â€” [ä½¿ç”¨ Gremlin](https://www.gremlin.com/community/tutorials/how-to-install-and-use-gremlin-with-eks/#step-5---run-a-shutdown-container-attack-using-gremlin) è¿è¡Œå…³é—­å®¹å™¨æ”»å‡»(è·³è¿‡)

ä¹‹åï¼Œæ‚¨åº”è¯¥æœ‰ä¸€ä¸ªéƒ¨ç½²åœ¨ AWS EKS å’Œ Gremlin ä¸Šçš„ç¤ºä¾‹åº”ç”¨ç¨‹åºè¿è¡Œåœ¨æ‚¨çš„ [Kubernetes dashboard](https://github.com/kubernetes/dashboard) ä¸Šã€‚

[![](../Images/3be750455e2a86bda09cbd065ad475fd.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--PRtUbmLz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AbDCR1rpyKYAq5BPATleIGQ.png)

<figure>[![](../Images/a8cc0de9ed20a328d4153102ed68c955.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Z1kmaRYm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AJczM0UeTBIDNk3BDKuacOQ.png) 

<figcaption>1)éƒ¨ç½²åœ¨ EKS çš„ç¤ºä¾‹åº”ç”¨ç¨‹åºï¼Œä»¥åŠ 2)ä½¿ç”¨ Kubernetes Dashboard å®‰è£…çš„ Gremlin</figcaption>

</figure>

#### [](#set-up-grafana-and-prometheus)æˆç«‹æ ¼æ‹‰å¤«çº³å’Œæ™®ç½—ç±³ä¿®æ–¯

å¦‚æœä½ è¿˜åœ¨ï¼Œè®©æˆ‘ä»¬ç”¨ Grafana è®¾ç½®[ç›‘æ§ Kubernetes é›†ç¾¤ã€‚è¿™ä¸ªç‰¹åˆ«çš„æŒ‡å—ä» Google Kubernetes Engine (GKE)å¼€å§‹ï¼Œè€Œä¸æ˜¯ä» EKS å¼€å§‹ï¼Œä½†æ˜¯åœ¨åˆ›å»ºé›†ç¾¤ä¹‹åï¼Œå‰©ä¸‹çš„å¤§éƒ¨åˆ†æ­¥éª¤éƒ½æ˜¯ä¸€æ ·çš„ã€‚](https://medium.com/htc-research-engineering-blog/monitoring-kubernetes-clusters-with-grafana-e2a413febefd)

*   æ­¥éª¤ 0 â€”åˆ›å»º GKE é›†ç¾¤(è·³è¿‡)
*   æ­¥éª¤ 1 â€”è®¸è®¸å¤šå¤šçš„ yaml é…ç½®
*   æ­¥éª¤ 2 â€”åœ¨ Grafana ä¸Šé…ç½®é›†ç¾¤è®¾ç½®(è·³è¿‡)

å¦‚æœæ‚¨çš„ç›‘æ§å·¥å…·æ­£åœ¨æ‚¨çš„é›†ç¾¤ä¸Šè¿è¡Œï¼Œæ‚¨å¯ä»¥ç®€å•åœ°å¯¼å…¥ç°æœ‰çš„ä»ªè¡¨æ¿ï¼Œè€Œä¸æ˜¯åœ¨ Grafana ä¸Šé…ç½®æ‚¨çš„é›†ç¾¤è®¾ç½®ã€‚æŸ¥çœ‹ç¤ºä¾‹æŠ¥å‘Šä¸­çš„è‡ªè¿°æ–‡ä»¶ï¼Œäº†è§£å¦‚ä½•ç®¡ç†å¯¹é›†ç¾¤å†…éƒ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºçš„å¤–éƒ¨è®¿é—®çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚

ä¹‹åï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿè§‚å¯Ÿé›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„ç¨³å®šçŠ¶æ€æŒ‡æ ‡ã€‚

[![](../Images/2622f4bf8897923ea114db33b993c367.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--w2sTHfAh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2A5D-3PXllhDYbXKUk2uVISQ.png)

<figure>[![](../Images/bdb270ae6a2dc4211955a54778127e51.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--1Tfh40IJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2ACCFCxwesY3vRLlHHg4jS7g.png) 

<figcaption>1)æ·»åŠ ä¸€ä¸ªæ™®ç½—ç±³ä¿®æ–¯ç±»å‹çš„æ•°æ®æºï¼Œ2)å¯¼å…¥ä»ªè¡¨æ¿ 3131 ä»¥æŸ¥çœ‹é›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„æ¦‚å†µ</figcaption>

</figure>

#### [](#programmatically-manage-your-chaos-experiments)ç¨‹åºåŒ–åœ°ç®¡ç†ä½ çš„æ··æ²Œå®éªŒ

Kubernetes pod ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå…±äº«ç½‘ç»œå †æ ˆçš„å®¹å™¨ç»„æˆã€‚å¦‚æœæˆ‘ä»¬æ”»å‡»ä¸€ä¸ªå®¹å™¨ä¸­çš„ä¸€ä¸ªå®¹å™¨ï¼Œé‚£ä¹ˆåº”è¯¥è§‚å¯Ÿè¿™ä¸ªå®¹å™¨ä¸­æ‰€æœ‰å®¹å™¨çš„å½±å“ã€‚æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æŒ‡å®šå®¹å™¨ç«¯å£æ¥é™åˆ¶æ”»å‡»çš„å½±å“ã€‚

åœ¨ Gremlin æ•™ç¨‹çš„æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ Gremlin çš„ UI å…³é—­äº†ä¸€ä¸ªå®¹å™¨ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ API æ¥è¿è¡Œæˆ‘ä»¬çš„æ”»å‡»ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æœ‰è®¡åˆ’åœ°ç®¡ç†æˆ‘ä»¬çš„æ··æ²Œå®éªŒã€‚

è®©æˆ‘ä»¬ä½¿ç”¨ Postman é€šè¿‡ [Gremlin API](https://www.gremlin.com/docs/api-reference/overview/) å…³é—­å•ä¸ªå®¹å™¨ã€‚

åœ¨ Postman app ä¸­ï¼Œ[å¯¼å…¥æ¨¡æ¿](https://learning.getpostman.com/docs/postman/launching_postman/newbutton/#templates)æ··æ²Œå·¥ç¨‹ï¼Œå…¶ä¸­åŒ…å«ç›¸åº”çš„ç¯å¢ƒæ··æ²Œå·¥ç¨‹ã€‚æŸ¥çœ‹[æ··æ²Œå·¥ç¨‹æ–‡æ¡£](https://documenter.getpostman.com/view/1559645/SVfH1sqD)è·å¾—åˆ†æ­¥è¯´æ˜ã€‚

<figure>[![](../Images/b5db756650c35b5b2f7ce9ea77ee7c16.png)](https://app.getpostman.com/run-collection/b07acbdc8e6f2d2b59f8#?env%5BchaosEngineering%5D=W3sia2V5IjoibW9ja191cmwiLCJ2YWx1ZSI6Imh0dHBzOi8vYmQwMTVmMWUtNjQwMS00MzdkLTliYjYtYTk4NDg4MmVlMzNlLm1vY2sucHN0bW4uaW8iLCJlbmFibGVkIjp0cnVlfSx7ImtleSI6ImdyZW1saW5fYXBpIiwidmFsdWUiOiJodHRwczovL2FwaS5ncmVtbGluLmNvbS92MSIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoiZ3JlbWxpbl9hcGlfa2V5IiwidmFsdWUiOiJ5b3VyLWdyZW1saW4tYXBpLWtleSIsImVuYWJsZWQiOnRydWV9LHsia2V5IjoieW91cl9kZXBsb3llZF9hcHBfVVJMIiwidmFsdWUiOiJ5b3VyLWRlcGxveWVkLWFwcC11cmwiLCJlbmFibGVkIjp0cnVlfV0=) 

<figcaption>ç‚¹å‡»è¿™ä¸ªè¯±äººçš„æŒ‰é’®å¯¼å…¥æ¨¡æ¿</figcaption>

</figure>

ä½ é¦–å…ˆéœ€è¦[ç”¨ä½ çš„`gremlin_api_key`å’Œ`your_deployed_app_url`æ›´æ–°é‚®é€’å‘˜ç¯å¢ƒ](https://learning.getpostman.com/docs/postman/environments_and_globals/manage_environments/#editing-an-active-environment)ã€‚ç„¶åæŸ¥æ‰¾åä¸ºâ€œå…³é—­å®¹å™¨â€çš„æ–‡ä»¶å¤¹ã€‚

1.  è·å–æˆ‘ä»¬çš„æ´»åŠ¨å®¹å™¨åˆ—è¡¨
2.  å…³é—­æŒ‡å®šçš„å®¹å™¨
3.  éªŒè¯æˆ‘ä»¬åº”ç”¨çš„è¿è¡ŒçŠ¶å†µ
4.  åœæ­¢æ”»å‡»(å¦‚æœéœ€è¦çš„è¯)

æˆ‘ä»¬çš„å‡è®¾æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å…³é—­è¿è¡Œ cartservice çš„å®¹å™¨ï¼ŒEKS ä¼šç»™æˆ‘ä»¬ä¸€ä¸ªæ–°çš„ï¼Œæˆ‘ä»¬ä¸ä¼šé­å—ä»»ä½•åœæœºæ—¶é—´ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬ç»å†äº†æ„æƒ³ä¸åˆ°çš„å½±å“ï¼Œè®©æˆ‘ä»¬å‡†å¤‡å¥½åœæ­¢æ”»å‡»ã€‚

[![](../Images/8b50cf4174c6023291aa941ca6b70826.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ihAIQ_uh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2Ajh3Qb2fo7KHKsDtwcCdWbw.png)

<figure>[![](../Images/7a58f84931925ef5b47fae35caabdbb9.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--8GSPHDsL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2A02i86pPFsxs3kCgFyfxH4Q.png) 

<figcaption>1)ä½¿ç”¨ Gremlin API å…³é—­å®¹å™¨ï¼Œ2)åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹æ•ˆæœ</figcaption>

</figure>

å‘€ï¼å½“æˆ‘ä»¬å…³é—­ cartservice å®¹å™¨æ—¶ï¼Œæˆ‘ä»¬åœ¨è´­ç‰©è½¦é¡µé¢ä¸Šçœ‹åˆ°ä¸€ä¸ª 500 é”™è¯¯ã€‚å¦‚æœæˆ‘ä»¬å‘éƒ¨ç½²çš„åº”ç”¨ç¨‹åºçš„ URL å‘å‡º GET è¯·æ±‚ï¼Œæˆ‘ä»¬ä¼šåœ¨æµè§ˆå™¨å’Œ Postman ä¸­çœ‹åˆ°è¿™ç§æƒ…å†µã€‚

å¦‚æœä½ å®Œæˆäº† Gremlin æ•™ç¨‹çš„æœ€åä¸€æ­¥ï¼Œä½ å·²ç»çŸ¥é“è¿™æ˜¯å› ä¸º cartservice [ä½¿ç”¨ Redis](https://github.com/GoogleCloudPlatform/microservices-demo/blob/master/kubernetes-manifests/cartservice.yaml) è€Œä¸æ˜¯ Redis Clusterã€‚ç°åœ¨æˆ‘ä»¬å·²ç»æ­ç¤ºäº†è¿™ä¸ªæ¼æ´ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å…¶ä»–å›¢é˜Ÿæˆå‘˜å°±æ‚¨çš„æ•°æ®è§£å†³æ–¹æ¡ˆè¿›è¡Œæ›´å¹¿æ³›çš„è®¨è®ºã€‚

ä¸æ­¤åŒæ—¶ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ Gremlin API å‘å‡ºä¸€ä¸ªåˆ é™¤è¯·æ±‚æ¥é˜»æ­¢æˆ‘ä»¬çš„æ”»å‡»ï¼Œå¹¶å‘ Postman æ·»åŠ ä¸€äº›ä»£ç ï¼Œä»¥ä¾¿åœ¨æˆ‘ä»¬çœ‹åˆ° 500 å†…éƒ¨æœåŠ¡å™¨é”™è¯¯æ—¶ *only* åœæ­¢æˆ‘ä»¬çš„æ”»å‡»ã€‚

[![](../Images/741ac5c6986930d1f4e6a39faf7d0984.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--AeiSv_Uu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AVkhq2tkRf81EnJaTPl-SVQ.png)

<figure>[![](../Images/a039d0f09d8a815e45e128f19a852922.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--9tPmRjUy--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AE44EAGKik4Bzd-Nmqrru9A.png) 

<figcaption>1)å¦‚æœæˆ‘ä»¬åœ¨ Postman ä¸­çœ‹åˆ° 500 å†…éƒ¨æœåŠ¡å™¨é”™è¯¯ï¼Œåˆ™åœæ­¢æ”»å‡»ï¼Œ2)åœ¨ collection runner ä¸­è‡ªåŠ¨è¿è¡Œæˆ‘ä»¬çš„æ··æ²Œæµ‹è¯•</figcaption>

</figure>

ä»¥è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Postman å’Œ Gremlin API æ¥æ¢ç´¢å½“æˆ‘ä»¬ç ´åç³»ç»Ÿçš„ç‰¹å®šéƒ¨åˆ†æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ç„¶è€Œï¼Œé™¤äº†æ‰‹å·¥æµ‹è¯•ï¼Œæˆ‘ä»¬è¿˜çœ‹åˆ°äº†å¦‚ä½•ä½¿ç”¨æ”¶é›†è¿è¡Œå™¨å’Œä¸€ç‚¹ä»£ç è‡ªåŠ¨è¿è¡Œæˆ‘ä»¬çš„é›†æˆæµ‹è¯•[ã€‚](https://learning.getpostman.com/docs/postman/collection_runs/starting_a_collection_run)

> ğŸ“**é«˜çº§æŒ‘æˆ˜:**ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•ä½¿ç”¨ Postman åº”ç”¨ç¨‹åºæ¥ç®¡ç†æˆ‘ä»¬çš„æ··æ²Œå®éªŒï¼Œæˆ‘ä»¬å¦‚ä½•åˆ©ç”¨æˆ‘ä»¬çš„æŒç»­é›†æˆ(CI)ç®¡é“æˆ–æŒç»­æµ‹è¯•æµç¨‹æ¥è‡ªåŠ¨åŒ–æ··æ²Œæµ‹è¯•ï¼Ÿè¿™é‡Œæœ‰ä¸€æ¡çº¿ç´¢[ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªæ›´å¥½çš„çº¿ç´¢](https://gph.is/1sFFzLq)[ã€‚](https://medium.com/better-practices/deploying-a-scalable-web-application-with-docker-and-kubernetes-a5000a06c4e9#ed88)

### [](#a-final-thought-about-chaos-engineering)å…³äºæ··æ²Œå·¥ç¨‹çš„æœ€åä¸€ç‚¹æ€è€ƒ

é‚£ä¹ˆï¼Œå½“æ‚¨çš„ä¸€ä¸ªä¾èµ–é¡¹å¤±è´¥æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿä¸€æ¬¡æœ‰ä»·å€¼çš„æ··æ²Œæµ‹è¯•ä¸ä»…ä¼šè®©ä½ äº†è§£ä½ çš„ç³»ç»Ÿï¼Œè¿˜ä¼šè®©ä½ äº†è§£ä½ çš„äººã€‚äººçš„ååº”ç»å¸¸æ˜¯ä»¥ä¸»åŠ¨å’Œç³»ç»Ÿçš„æ–¹å¼æµ‹è¯•çš„æ›´å›°éš¾çš„æ–¹é¢ä¹‹ä¸€ã€‚æµ‹è¯•æœåŠ¡å™¨å´©æºƒçš„å½±å“å¯èƒ½æ›´å®¹æ˜“ã€‚

å½“æ··æ²Œå®éªŒå½±å“ç°å®ç”Ÿæ´»ä¸­çš„ç”Ÿäº§æµé‡å’Œç”¨æˆ·æ—¶ï¼Œå…¶ä»–å›¢é˜Ÿä¹Ÿä¼šå—åˆ°å½±å“ï¼Œå¸Œæœ›åœ¨ä»»ä½•å®éªŒå¼€å§‹ä¹‹å‰å¾—åˆ°é€šçŸ¥ã€‚æ‚¨å›¢é˜Ÿçš„æ²Ÿé€šå’Œåä½œèƒ½åŠ›å°†ä¸å¯é¿å…åœ°å½±å“æ‚¨ç³»ç»Ÿçš„å¼¹æ€§ã€‚

[![](../Images/b4231d529d0977608a0d2407766f2548.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s---W5SL_Oh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AoGoUT4CZ9CQlQOi5TfCsZw.jpeg)

> æ‹…å¿ƒæ›´å¿«åœ°äº¤ä»˜è½¯ä»¶çš„æœ€å¤§é™åˆ¶æ˜¯å…³æ³¨å¢åŠ æ›´å¤šçš„é¢„å‘å¸ƒæµ‹è¯•ã€‚
> 
> æ··æ²Œå·¥ç¨‹å°±æ˜¯è¦å»ºç«‹å¯¹æˆ‘ä»¬çš„å¼¹æ€§å’Œå¹³å‡æ¢å¤æ—¶é—´çš„ä¿¡ä»»ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæˆ‘ä»¬ä¸å†æ‹…å¿ƒä»»ä½•ä¸€ä¸ªå˜åŒ–ä¼šä½¿æˆ‘ä»¬çš„äº§å“å´©æºƒï¼Œå½“é—®é¢˜ç¡®å®å‘ç”Ÿæ—¶ï¼Œæˆ‘ä»¬ä¼šæ›´å¿«åœ°è¿›è¡Œåˆ†ç±»å’Œéƒ¨ç½²ä¿®å¤ï¼Œå»ºç«‹æˆ‘ä»¬ä¸è„†å¼±çš„ä¿¡å¿ƒã€‚
> 
> *   [Abby Bangser](https://twitter.com/a_bangser) ï¼Œ [MOO](https://www.moo.com) çš„å¹³å°æµ‹è¯•å·¥ç¨‹å¸ˆ

å¯¹äºè®¸å¤šå›¢é˜Ÿæ¥è¯´ï¼Œæ··æ²Œå·¥ç¨‹å°†éœ€è¦åœ¨ç»„ç»‡ä¸­å¦‚ä½•çœ‹å¾…å¤±è´¥çš„æ€æƒ³è½¬å˜ã€‚å‘ç°å¤±è´¥å¹¶è®©å›¢é˜Ÿä¸­çš„å…¶ä»–äººæ³¨æ„åˆ°å®ƒæ˜¯ä¸€ä»¶å¾ˆæ£’çš„äº‹æƒ…ã€‚ç„¶è€Œï¼Œæ›´å¥½çš„åšæ³•æ˜¯åˆ›å»ºä¸€ä¸ªæµç¨‹ï¼Œé¢„æµ‹æ½œåœ¨çš„å¤±è´¥ï¼Œç„¶åæ­ç¤ºæ–°çš„ä¿¡æ¯æ¥å¸®åŠ©æ”¯æ’‘æ‚¨çš„æ¼æ´ã€‚

æ··æ²Œå·¥ç¨‹ä¸ä»…ä»…æ˜¯æ„å»ºæ›´å…·å¼¹æ€§çš„è½¯ä»¶ï¼Œä¹Ÿæ˜¯åœ¨ä¸€ä¸ªç»„ç»‡å†…å»ºç«‹ä¸€ç§å¼¹æ€§æ–‡åŒ–ã€‚ä¸€ä¸ªçœŸæ­£åº†ç¥å¤±è´¥è€Œä¸æ˜¯éšè—å¤±è´¥çš„å›¢é˜Ÿï¼Œå°†ä½¿æ›´å¹¿æ³›çš„ç»„ç»‡èƒ½å¤Ÿä»è¿™äº›ç»å†ä¸­å­¦ä¹ å¹¶å˜å¾—æ›´å¼ºå¤§ã€‚

* * *