# WebGL æœˆä»½ã€‚ç¬¬ 25 å¤©ã€‚å°è´´å›¾

> åŸæ–‡:[https://dev.to/lesnitsky/webgl-month-day-25-mipmaps-33i](https://dev.to/lesnitsky/webgl-month-day-25-mipmaps-33i)

è¿™æ˜¯ä¸€ç³»åˆ—ä¸ WebGL ç›¸å…³çš„åšæ–‡ã€‚æ¯å¤©éƒ½ä¼šæœ‰æ–°å¸–å­

[![GitHub stars](../Images/8806495b741c28f20124c350a1f0c19a.png)](https://github.com/lesnitsky/webgl-month)
[![Twitter Follow](../Images/29a212e295f7b2984df06dc6b659369d.png)T6ã€‘](https://twitter.com/lesnitsky_a)

[åŠ å…¥é‚®ä»¶åˆ—è¡¨](http://eepurl.com/gwiSeH),è®©æ–°é‚®ä»¶ç›´æ¥è¿›å…¥ä½ çš„æ”¶ä»¶ç®±

[æ­¤å¤„æä¾›æºä»£ç ](https://github.com/lesnitsky/webgl-month)

å»ºé€ äº

[![Git Tutor Logo](../Images/4a5fcbd1126401b65ca7fbe362404aa0.png)T2ã€‘](https://github.com/lesnitsky/git-tutor)

* * *

å˜¿ğŸ‘‹

æ¬¢è¿æ¥åˆ°ç½‘ç»œåšå®¢æœˆ

ä»Šå¤©æˆ‘ä»¬å°†å­¦ä¹ å¦ä¸€ä¸ª webgl æ¦‚å¿µï¼Œå®ƒå¯èƒ½ä¼šæé«˜æœ€ç»ˆæ¸²æŸ“å›¾åƒçš„è´¨é‡

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è®¨è®ºé¢œè‰²æ˜¯å¦‚ä½•ä»çº¹ç†ä¸­è¯»å–çš„ã€‚

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª 1024x1024 çš„å›¾åƒï¼Œä½†æ˜¯åœ¨ç”»å¸ƒä¸Šåªæ¸²æŸ“äº†ä¸€ä¸ª 512x512 çš„åŒºåŸŸã€‚å› æ­¤ï¼Œç»“æœå›¾åƒä¸­çš„æ¯ä¸ªåƒç´ ä»£è¡¨åŸå§‹çº¹ç†ä¸­çš„ 4 ä¸ªåƒç´ ã€‚

è¿™å°±æ˜¯`gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filter)`å‘æŒ¥ä½œç”¨çš„åœ°æ–¹

å…³äºå¦‚ä½•ä»çº¹ç†ä¸­è¯»å–é¢œè‰²ï¼Œæœ‰å‡ ç§ç®—æ³•

*   è¿™ä¸ªå°†è¯»å–åŸå§‹å›¾åƒçš„ 4 ä¸ªåƒç´ å¹¶æ··åˆ 4 ä¸ªåƒç´ çš„é¢œè‰²æ¥è®¡ç®—æœ€ç»ˆçš„åƒç´ é¢œè‰²

*   `gl.NEARETS`å°†ä»åŸå§‹å›¾åƒä¸­å–æœ€è¿‘çš„åƒç´ åæ ‡å¹¶ä½¿ç”¨è¯¥é¢œè‰²ã€‚è™½ç„¶æ€§èƒ½æ›´é«˜ï¼Œä½†è¿™ç§æ–¹æ³•çš„è´¨é‡è¾ƒä½

è¿™ä¸¤ç§æ–¹æ³•éƒ½æœ‰å…¶å±€é™æ€§ï¼Œå°¤å…¶æ˜¯å½“éœ€è¦ç»˜åˆ¶çº¹ç†çš„åŒºåŸŸæ¯”åŸå§‹çº¹ç†å°å¾—å¤šæ—¶

åœ¨å¤„ç†çº¹ç†æ—¶ï¼Œæœ‰ä¸€ç§ç‰¹æ®Šçš„æŠ€æœ¯å¯ä»¥æé«˜æ¸²æŸ“çš„è´¨é‡å’Œæ€§èƒ½ã€‚è¿™ç§ç‰¹æ®Šçš„çº¹ç†è¢«ç§°ä¸º[MIP maps]â€“é¢„å…ˆè®¡ç®—çš„å›¾åƒåºåˆ—ï¼Œå…¶ä¸­æ¯ä¸ªä¸‹ä¸€ä¸ªå›¾åƒçš„åˆ†è¾¨ç‡éƒ½é€æ¸å˜å°ã€‚å› æ­¤ï¼Œå½“ç‰‡æ®µç€è‰²å™¨ä»çº¹ç†ä¸­è¯»å–é¢œè‰²æ—¶ï¼Œå®ƒé‡‡ç”¨å¤§å°æœ€æ¥è¿‘çš„çº¹ç†ï¼Œå¹¶ä»ä¸­è¯»å–é¢œè‰²ã€‚

åœ¨ WebGL 1.0 ä¸­ï¼Œåªèƒ½ä¸ºâ€œ2 çš„å¹‚â€å¤§å°çš„çº¹ç†(256x256ã€512x512ã€1024x1024 ç­‰)ç”Ÿæˆ mipmapsã€‚)

è¿™å°±æ˜¯æˆ‘ä»¬çš„æ±¡å¢ç«‹æ–¹ä½“çš„ mipmap çš„æ ·å­

[![Mipmap](../Images/6d7f73a745b81e2906d158796e72ed99.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--iti9rFkE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://git-tutor-assets.s3.eu-west-2.amazonaws.com/mipmap.jpg)

ä¸è¦æ‹…å¿ƒï¼Œä½ ä¸éœ€è¦ä¸ºä½ æ‰€æœ‰çš„çº¹ç†ç”Ÿæˆè¿™æ ·çš„åºåˆ—ï¼Œå¦‚æœä½ çš„çº¹ç†å¤§å°æ˜¯ 2 çš„å¹‚ï¼Œè¿™å¯ä»¥è‡ªåŠ¨å®Œæˆ

ğŸ“„src/minecraft-terrain.js

```
 const State = {};

+ /**
+  *
+  * @param {WebGLRenderingContext} gl
+  */
  export async function prepare(gl) {
      const vShader = gl.createShader(gl.VERTEX_SHADER);
      const fShader = gl.createShader(gl.FRAGMENT_SHADER);
      await loadImage(textureSource).then((image) => {
          const texture = createTexture(gl);
          setImage(gl, texture, image);
+ 
+         gl.generateMipmap(gl.TEXTURE_2D);
      });

      setupAttributes(gl); 
```

è€Œä¸ºäº†è®© GPU ä» mipmap ä¸­è¯»å–ä¸€ä¸ªåƒç´ é¢œè‰²ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®š`TEXTURE_MIN_FILTER`ã€‚

ğŸ“„src/minecraft-terrain.js

```
 setImage(gl, texture, image);

          gl.generateMipmap(gl.TEXTURE_2D);
+         gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST_MIPMAP_LINEAR);
      });

      setupAttributes(gl); 
```

`NEAREST_MIPMAP_LINEAR`å°†é€‰æ‹©æœ€æ¥è¿‘å°ºå¯¸çš„å°ä¸­è§å¤§è´´å›¾ï¼Œå¹¶æ’å…¥ 4 ä¸ªåƒç´ ä»¥è·å¾—æœ€ç»ˆé¢œè‰²

ä»Šå¤©åˆ°æ­¤ä¸ºæ­¢ï¼

æ„Ÿè°¢é˜…è¯»ï¼Œæ˜å¤©è§ğŸ‘‹

* * *

[![GitHub stars](../Images/8806495b741c28f20124c350a1f0c19a.png)](https://github.com/lesnitsky/webgl-month)
[![Twitter Follow](../Images/29a212e295f7b2984df06dc6b659369d.png)T6ã€‘](https://twitter.com/lesnitsky_a)

[åŠ å…¥é‚®ä»¶åˆ—è¡¨](http://eepurl.com/gwiSeH),è®©æ–°é‚®ä»¶ç›´æ¥è¿›å…¥ä½ çš„æ”¶ä»¶ç®±

[æ­¤å¤„æä¾›æºä»£ç ](https://github.com/lesnitsky/webgl-month)

å»ºé€ äº

[![Git Tutor Logo](../Images/4a5fcbd1126401b65ca7fbe362404aa0.png)T2ã€‘](https://github.com/lesnitsky/git-tutor)