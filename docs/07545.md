# ç†è§£ JavaScript ä¸­çš„ç±»(ES5)å’ŒåŸå‹ç»§æ‰¿

> åŸæ–‡:[https://dev . to/_ hridaysharma/understanding-classes-es5-and-prototypal-injavascript-n8d](https://dev.to/_hridaysharma/understanding-classes-es5-and-prototypal-inheritance-in-javascript-n8d)

```
function Person(name, age) {
    this.name = name;
    this.age = age;
}

const me = new Person('Joe', 20);

console.log(me); // {name: 'Joe', age: 20} 
```

ç®€å•åœ°è¯´ï¼Œä¸Šé¢çš„ä»£ç ç‰‡æ®µåˆ›å»ºäº†ä¸€ä¸ªå¯ä»¥æœ‰å¤šä¸ªå®ä¾‹çš„ Person ç±»ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œjavascript ä¸­çš„å‡½æ•°ç±»ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚

### [](#lets-dig-deeper-into-whats-going-on-here-how-a-normal-function-can-be-used-for-classess)æˆ‘ä»¬æ¥æ·±å…¥æŒ–æ˜ä¸€ä¸‹è¿™åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿï¼Ÿä¸€ä¸ªæ™®é€šçš„å‡½æ•°å¦‚ä½•ç”¨äºç±»ï¼Ÿï¼ŸğŸ¤”ğŸ¤”

`Person`å‡½æ•°å°±åƒä»»ä½•å…¶ä»–å‡½æ•°ä¸€æ ·ï¼Œå½“è¢«ç›´æ¥è°ƒç”¨æ—¶åªè¿”å›`undefined`,å› ä¸ºæˆ‘ä»¬æ²¡æœ‰æ˜¾å¼åœ°ä»å®ƒè¿”å›ä»»ä½•ä¸œè¥¿ã€‚ä½†æ˜¯çœŸæ­£çš„é­”åŠ›åœ¨äºç¬¬`var me = new Person('Joe', 20)`è¡Œçš„`new`å…³é”®è¯ã€‚
**è®©æˆ‘ä»¬ç†è§£ä¸€ä¸‹è¿™ç§é­”åŠ›â€”â€”å½“æˆ‘ä»¬ä½¿ç”¨`new`å…³é”®å­—åˆå§‹åŒ–å‡½æ•°æ—¶ï¼Œä¼šå‘ç”Ÿå‡ ä¸ªæ­¥éª¤:**

1.  åˆ›å»ºäº†ä¸€ä¸ªç©ºå¯¹è±¡`{}`ã€‚
2.  `Person`é€šè¿‡å°†å¯¹è±¡çš„å¼•ç”¨ä¼ é€’ç»™å®ƒæ¥è°ƒç”¨:`Person.call({}, 'Joe', 20)`
3.  `Person`å†…`this`ç°åœ¨æŒ‡çš„æ˜¯ä¸Šä¸€æ­¥ä¼ é€’çš„å¯¹è±¡ã€‚
4.  ä½¿ç”¨`{}.__proto__ = Person.prototype.`å°†å¯¹è±¡çš„åŸå‹è®¾ç½®ä¸ºå‡½æ•°çš„åŸå‹
5.  æœ€åè¿”å›å¯¹è±¡ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¿›å…¥`me`

*æŠ›å¼€æ¦‚å¿µ*:JavaScript ä¸­çš„æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªå¯ç”¨çš„åŸå‹å¯¹è±¡ã€‚`Array.prototype.map`å°±æ˜¯è¿™ä¹ˆç”¨çš„ã€‚è€Œä¸”æ¯ä¸ªå¯¹è±¡ä¸Šé¢éƒ½æœ‰ä¸€ä¸ª`__proto__`å¯¹è±¡ã€‚è¿›ä¸€æ­¥è§‚çœ‹è¿™ä¸ªä¼Ÿå¤§çš„è§†é¢‘[å‘ç° JavaScript](https://www.youtube.com/watch?v=ZUHyZHwZtUY) ã€‚

å› ä¸º`prototype`å’Œ`__proto__`æŒ‡çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ¯å½“ä½ åœ¨`prototype`ä¸Šæ·»åŠ ä¸€ä¸ªæ–°å‡½æ•°æ—¶ï¼Œå®ƒåœ¨æ‰€æœ‰å®ä¾‹ä¸Šéƒ½å¯ç”¨ã€‚

```
Person.prototype.greet = function() {
  console.log('Hi', this.name);
}

me.greet(); // Hi Joe

const you = new Person('Alice', 22);
you.greet(); // Hi Alice 
```

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰ç†è§£åœ¨ javascript ä¸­å¦‚ä½•åˆ›å»ºç±»ã€‚è®©æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹å¦‚ä½•åœ¨ javascript ä¸­ç»§æ‰¿ç±»ã€‚

**è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸º Employee çš„æ–°ç±»ï¼Œå®ƒç»§æ‰¿äº† Person ç±»**

```
function Employee(name, age, title) {
  Person.call(this, name, age);
  this.title = title;
}

// create Employee prototype from Person prototype
Employee.prototype = Object.create(Person.prototype);

const joe = new Employee('Joe', 22, 'Developer');
console.log(joe.name); // Joe
joe.greet(); // Hi Joe 
```

å“‡ï¼Œæˆ‘ä»¬ç»ˆäºç»§æ‰¿äº†æˆ‘ä»¬çš„ Person ç±»æ¥åˆ›å»ºä¸€ä¸ª Employee ç±»ï¼Œè€Œä¸”æˆ‘ä»¬ä¸å¿…é‡å†™`greet`å‡½æ•°ã€‚

è®©æˆ‘ä»¬çœ‹çœ‹åˆšåˆšå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼Ÿ

1.  æˆ‘ä»¬åˆ›å»ºäº†æˆ‘ä»¬çš„`Employee`ç±»ï¼Œå°±åƒæˆ‘ä»¬åˆ›å»º`Person`ç±»ä¸€æ ·ã€‚
    *   åœ¨æˆ‘ä»¬çš„ employee ç±»ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä¼ é€’å¼•ç”¨æ¥è°ƒç”¨ Person ç±»ã€‚è¿™å°±åƒåœ¨ ES6 ç±»ä¸­ä½¿ç”¨`super`å…³é”®å­—ä¸€æ ·ã€‚
2.  è¿™æ˜¯*æœ€é‡è¦çš„éƒ¨åˆ†*ã€‚æˆ‘ä»¬æ­£åœ¨ä»*äººçš„åŸå‹*ä¸­é‡æ–°åˆ›å»º*é›‡å‘˜åŸå‹*ï¼Œä»¥è®¿é—®`Person`ç±»ä¸­æ‰€æœ‰å¯ç”¨çš„æ–¹æ³•ã€‚

**ç°åœ¨ä½ å¯èƒ½ä¼šé—®è‡ªå·±*ä¸ºä»€ä¹ˆè¦ä½¿ç”¨`Object.create`è€Œä¸ä»…ä»…æ˜¯å°†äººå‘˜åŸå‹åˆ†é…ç»™å‘˜å·¥*ã€‚**
è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä¸å¸Œæœ› Person å’Œ Employee å…±äº«åŒä¸€ä¸ªåŸå‹ï¼Œå› ä¸º javascript ä¸­çš„å¯¹è±¡æ˜¯è¢«å¼•ç”¨çš„ã€‚è¿™å°±æ˜¯ç»§æ‰¿ Person çš„å…¨éƒ¨æ„ä¹‰ã€‚

è¿™å°±æ˜¯æˆ‘ä»¬å¦‚ä½•åœ¨ javascript ä¸­ä½¿ç”¨åŸå‹ç»§æ‰¿ã€‚æ–°çš„ ES6 ç±»åŸºæœ¬ä¸Šæ˜¯å®ƒä¸Šé¢çš„ä¸€ä¸ªè¯­æ³•ç³–ã€‚åŸºæœ¬ä¸Šè¿™å°±æ˜¯å¼•æ“ç›–ä¸‹å®é™…å‘ç”Ÿçš„äº‹æƒ…ã€‚

PS:ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®Œæ•´çš„ä»£ç  [GitHub Repo](https://github.com/vyasriday/js-snippets/blob/master/src/js-concepts/prototypalInheritance.js)