# ä½¿ç”¨ Illustratorï¼ŒReact & Emotion ä»å¤´å¼€å§‹åˆ¶ä½œé—ªçƒçš„éœ“è™¹ç¯ SVG åŠ¨ç”»

> åŸæ–‡:[https://dev . to/ninjasodels/make-a-flicking-neon-SVG-animation-from-scratch-w-illustrator-react-emotion-39gm](https://dev.to/ninjasoards/make-a-flickering-neon-svg-animation-from-scratch-w-illustrator-react-emotion-39gm)

è¿™æ˜¯ä¸€ä¸ªç®€çŸ­ç³»åˆ—çš„ç¬¬äºŒéƒ¨åˆ†ï¼Œåœ¨è¿™é‡Œæˆ‘å°†è¯¦ç»†ä»‹ç»æˆ‘åœ¨è®¾è®¡å’Œå¼€å‘ä¸€ä¸ªç½‘ç«™æ¥æ¨å¹¿ AIGA è·¯æ˜“æ–¯ç»´å°”çš„å¹´åº¦è®¾è®¡å‘¨æ—¶å­¦åˆ°çš„ä¸œè¥¿ã€‚

[louisvilledesignweek.com](https://louisvilledesignweek2019.netlify.app/)

å·çœ‹æˆ‘çš„[æºä»£ç ](https://github.com/davidysoards/louisville-design-week)ğŸ‘€

[ç¬¬ 1 éƒ¨åˆ†:å¤œé—´æ¨¡å¼åˆ‡æ¢](https://dev.to/ninjasoards/make-a-custom-night-mode-toggle-w-react-css-variables-272o)

## [](#create-amp-export-the-svg)åˆ›å»º&å¯¼å‡º SVG

æˆ‘åœ¨ **Adobe Illustrator** ä¸­å¼€å§‹ä½¿ç”¨**é’¢ç¬”å·¥å…·**æç»˜æˆ‘ä»¬åœ¨è®¾è®¡å‘¨çš„ä¸€å¼ å®£ä¼ å›¾ç‰‡ï¼Œå¹¶ä¸ºæ‹¬å·æ·»åŠ äº†ä¸€äº›åœ†è§’çŸ©å½¢ã€‚

[![pen tool tracing neon sign](img/1596c886ffb53e17d185fda07fdf1b28.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--EgirzRIg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/gvbe37wlna43oy3009p1.png)

ç„¶åæˆ‘è°ƒé«˜ç¬”ç”»å€¼ï¼Œç›´åˆ°å®ƒä¸å›¾åƒä¸­çš„ç¬¦å·å¤§è‡´åŒ¹é…ï¼Œå¹¶å°†ç¬”å¸½è®¾ç½®ä¸º**åœ†å½¢ç¬”å¸½**ã€‚

[![Select Round Cap in Illustrator](img/c3a59e23e6c6e8edfc2977489fca3ec6.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--QJyxw6nN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/1c8y2949r6tj32famdx7.png)

æˆ‘ç”¨ç‰©ä½“>è·¯å¾„>å‹¾å‹’å‡ºç¬”ç”»

[![Outline Stroke in Illustrator](img/e6e2db557922d0fde6a51ba36457c8fc.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--fwV-FHDq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/u4bq2xhscelmz82dbr7r.png)

ç„¶åæˆ‘ä½¿ç”¨**æ¢è·¯è€…**ä¸­çš„**åˆå¹¶**å½¢çŠ¶æ¨¡å¼å°†é‡å çš„å…ƒç´ åˆå¹¶æˆä¸€ä¸ªå½¢çŠ¶ã€‚

[![Pathfinder Unite](img/ff1297475eee94d57bb57d887de5153a.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--HBdIIewP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/jnd4sye33w4j2vwa7y3h.png)

æˆ‘æ·»åŠ äº†é»‘è‰²å¡«å……ï¼Œ**ä½¿ç”¨**å‘ˆç°å±æ€§**è®¾ç½®å°†æ•´ä¸ªç”»æ¿**å¯¼å‡ºä¸º SVGï¼Œç¡®ä¿é€‰ä¸­**å“åº”**(è¿™ç»™äº†ä½ ä¸€ä¸ªè§†å›¾æ¡†ï¼Œè€Œä¸æ˜¯å›ºå®šçš„é«˜åº¦å’Œå®½åº¦)ã€‚

[![SVG export settings](img/ae93f40976f39320dfe5b868b556627e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--aBz4xcWj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/5uma637jab9vfs3d3q6k.png)

ä½ å¦‚ä½•ç”¨**å±‚**å’Œ**ç»„**ç»„ç»‡ä½ çš„ Illustrator æ–‡ä»¶ä¸­çš„å…ƒç´ ä¹Ÿå°†å†³å®š**ä½ å¯¼å‡ºçš„ä»£ç çœ‹èµ·æ¥å¦‚ä½•**ã€‚

æˆ‘ä½¿ç”¨äº†ä¸€ä¸ªåä¸ºâ€œå§‹ç»ˆæ‰“å¼€â€çš„å±‚å’Œä¸¤ä¸ªåä¸ºâ€œå§‹ç»ˆâ€å’Œâ€œæ‰“å¼€â€çš„ç»„ã€‚å°†å®ƒå¯¼å‡ºä¸ºä¸€ä¸ª**ç”»æ¿**è€Œä¸ä»…ä»…æ˜¯ä¸€ç»„èµ„æºï¼Œä¼šä½¿æ‚¨çš„**è§†æ¡†**å…·æœ‰æ‚¨é€‰æ‹©çš„ç²¾ç¡®é«˜åº¦å’Œå®½åº¦ï¼Œè¿˜ä¼šä¸ºæ‚¨çš„å›¾åƒæä¾›ä¸€äº›å¡«å……ã€‚

[![layers in Illustrator](img/94ddf2acbb1a3375b83a79815aa05ae8.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--8U8BNny6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/gfrpa2oj66he2uwdgbng.png)

å¯¼å‡ºäº§ç”Ÿä»¥ä¸‹ä»£ç ã€‚(æˆ‘å·²ç»ä» SVG è·¯å¾„ä¸­åˆ é™¤äº†å®é™…æ•°å­—ï¼Œå› ä¸ºå®ƒä½¿è¿™ç¯‡æ–‡ç« æ³¨å†Œä¸ºâ€œ28 åˆ†é’Ÿè¯»å–â€ï¼Œä½†æ˜¯ä½ å¯ä»¥åœ¨ github ä¸Šçš„[æºä»£ç ](https://github.com/davidysoards/louisville-design-week/blob/master/src/components/SvgAlwaysOpen.js)ä¸­çœ‹åˆ°å®ƒä»¬ã€‚)

```
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1280 1080">
  <title>
    always-open
  </title>
  <g id="always-open">
    <g id="open">
      <path d="######"/>
      <path d="######"/>
      <path d="######"/>
    </g>
    <g id="always">
      <path d="######"/>
      <path d="######"/>
      <path d="######"/>
    </g>
  </g>
</svg> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘è¿‡å»æ€»æ˜¯è¿è¡Œæˆ‘é€šè¿‡ SVGOMG å¯¼å‡ºçš„ä»»ä½• SVGï¼Œä½†æ˜¯æ®æ¯”æˆ‘èªæ˜å¾—å¤šçš„äººè¯´ï¼ŒIllustrator çš„å¯¼å‡ºå·²ç»å˜å¾—å¦‚æ­¤ä¹‹å¥½ï¼Œä»¥è‡³äºè¿™ä¸å†æ˜¯çœŸæ­£å¿…è¦çš„äº†ã€‚

> ![Sara Soueidan profile image](img/6d7a9136b90530bc0237525ab87a0598.png)è¨æ‹‰è‹ä¼Šä¸¹@è¨æ‹‰è‹ä¼Šä¸¹![twitter logo](img/4c8a2313941dda016bf4d78d103264aa.png)è¿™ä¸ªã€‚è¿™ä¸ª [@Illustrator](https://twitter.com/Illustrator) SVG å¯¼å‡ºéå¸¸å¹²å‡€ï¼Œæˆ‘åœ¨å¤„ç†ä»å®ƒå¯¼å‡ºçš„ SVG æ—¶å†ä¹Ÿä¸ç”¨ SVGO äº†ã€‚[twitter.com/DmitryBaranovsâ€¦](https://t.co/1uDRpMBxqh)2019 å¹´ 8 æœˆ 31 æ—¥ä¸‹åˆ 14:34Dmitry Baranovskiy@ DmitryBaranovsk@ pugson @ SaraSoueidan @ dirkschulze ä¸ç¡®å®šä¸ºä»€ä¹ˆéœ€è¦ SVGO ä¸æ–°çš„æ’ç”»å¸ˆå¯¼å‡ºã€‚ï¼›)[![Twitter reply action](img/44d8b042100e231770330321e5b63d65.png)](https://twitter.com/intent/tweet?in_reply_to=1167807788707450880)[![Twitter retweet action](img/93d9c70ccc54851d2e8e881b53c21dae.png)](https://twitter.com/intent/retweet?tweet_id=1167807788707450880)[![Twitter like action](img/2e93f7775eadefab8bcd34a4542cc5a7.png)](https://twitter.com/intent/like?tweet_id=1167807788707450880)

å½“è°ˆåˆ° SVG(å’Œ a11y)æ—¶ï¼ŒSara *çœŸçš„*çŸ¥é“å¥¹çš„ä¸œè¥¿ã€‚å¦‚æœè¿™æ˜¯ä¸€ä¸ªä½ æœ‰å…´è¶£äº†è§£æ›´å¤šå…³äºæˆ‘*é«˜åº¦*æ¨èå¥¹çš„[å†™ä½œ](https://www.sarasoueidan.com/blog/)æˆ–æ¼”è®²çš„ä¸»é¢˜ã€‚Dmitry æ˜¯è®¾è®¡æ–°çš„ SVG å¯¼å‡ºåŠŸèƒ½çš„å‘å¯¼ä¹‹ä¸€ï¼

ä¸ºäº†å°†æˆ‘çš„ SVG è½¬æ¢æˆ React ç»„ä»¶ï¼Œæˆ‘ä½¿ç”¨äº†å¦ä¸€ä¸ªåä¸º [SVGR Playground](https://www.smooth-code.com/open-source/svgr/playground/) çš„åœ¨çº¿å·¥å…·ã€‚åªéœ€å°†æ‚¨çš„ SVG ä»£ç ç²˜è´´åˆ°å·¥å…·çš„å·¦ä¾§ï¼Œå®ƒå°±ä¼šä¸ºæ‚¨åˆ›å»ºä¸€ä¸ªå‡½æ•°ç»„ä»¶ã€‚

[![SVGR](img/11fa4237d4270499edd96344617033c1.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--yGg370Ue--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/pyzj31f6rexfwavyegpl.png)

æ–°çš„ **SVG React ç»„ä»¶**çœ‹èµ·æ¥åƒè¿™æ ·:

```
import React from 'react'

const SvgAlwaysOpen = props => (
  <svg viewBox="0 0 1280 1080" {...props}>
    <g id="always-open">
      <g id="open">
        <path d="######" />
        <path d="######" />
        <path d="######" />
      </g>
      <g id="always">
        <path d="######" />
        <path d="######" />
        <path d="######" />
      </g>
    </g>
  </svg>
)

export default SvgAlwaysOpen; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#customizing-the-svg-component)å®šåˆ¶ SVG ç»„ä»¶

è¿™ä¸ªæ•ˆæœä½¿ç”¨äº†ä¸¤ä¸ª **SVG æ»¤é•œ**ã€‚ä¸€ä¸ªæ˜¯**äº®æ¨¡å¼**çš„**æŠ•å½±**ï¼Œå¦ä¸€ä¸ªæ˜¯**æš—æ¨¡å¼**çš„**è¾‰å…‰**ã€‚è¿‡æ»¤å™¨éœ€è¦åœ¨ **< defs >å…ƒç´ **å†…å®šä¹‰ã€‚

ä»€ä¹ˆæ˜¯ defs å…ƒç´ ï¼Ÿæˆ‘ä¼šè®©èæ‹‰Â·è‹ä¼Šä¸¹è§£é‡Š:

*<defs>å…ƒç´ ç”¨æ¥å®šä¹‰ä½ ä»¥åæƒ³è¦é‡ç”¨çš„å…ƒç´ ã€‚ä½¿ç”¨< defs >å®šä¹‰å…ƒç´ å¯¹äºåˆ›å»ºæŸç§åœ¨æ•´ä¸ªæ–‡æ¡£ä¸­å¤šæ¬¡ä½¿ç”¨çš„â€œæ¨¡æ¿â€éå¸¸æœ‰ç”¨ã€‚åœ¨< defs >å…ƒç´ ä¸­å®šä¹‰çš„å…ƒç´ ä¸ä¼šå‘ˆç°åœ¨ç”»å¸ƒä¸Šï¼Œé™¤éæ‚¨åœ¨æ–‡æ¡£ä¸­çš„æŸä¸ªåœ°æ–¹â€œè°ƒç”¨â€å®ƒä»¬ã€‚*

```
<defs>
  <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
    <feGaussianBlur
      result="blurred"
      in="SourceGraphic"
      stdDeviation={blur}
    />
  </filter>

  <filter id="shadow" x="0" y="0" width="200%" height="200%">
    <feOffset result="offOut" in="SourceAlpha" dx="20" dy="20" />
    <feColorMatrix
      result="matrixOut"
      in="offOut"
      type="matrix"
      values="1 0 0 0 0
              0 1 0 0 0
              0 0 1 0.05 0
              0 0 0 0.2 0"
    />
    <feGaussianBlur result="blurOut" in="matrixOut" stdDeviation="10" />
  </filter>
</defs> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸ºäº†å¤šæ¬¡é‡ç”¨è·¯å¾„ï¼Œä½†æ ¹æ®éœ€è¦ç»™å®ƒä»¬åˆ†é…ä¸åŒçš„æ»¤é•œã€å¡«å……å’Œè¿‡æ¸¡ï¼Œæˆ‘å°†å®ƒä»¬æ”¾åœ¨ **< defs >å…ƒç´ **ä¸­ï¼Œç„¶ååœ¨ **< use >å…ƒç´ **ä¸­é€šè¿‡å®ƒä»¬çš„ id è°ƒç”¨å®ƒä»¬ã€‚å¡«å……è¢«åˆ†é…ç»™ CSS å˜é‡ï¼Œå•å‡»æ ‡é¢˜ä¸­çš„åˆ‡æ¢å¼€å…³ï¼Œé¢œè‰²ä¼šæ”¹å˜ã€‚**è½¬åœºçš„é•¿åº¦**å’Œ**ç¼“åŠ¨**å€¼ç”±**æ ·å¼å±æ€§**è®¾ç½®ã€‚å˜é‡å’Œé»‘æš—æ¨¡å¼å¼€å…³çš„è®¾ç½®åœ¨æœ¬ç³»åˆ—ç¬¬ 1 éƒ¨åˆ†çš„[ä¸­æè¿°ã€‚](https://dev.to/ninjasoards/make-a-custom-night-mode-toggle-w-react-css-variables-272o) 

```
<use xlinkHref="#always-open" filter="url(#shadow)" />
<use
  xlinkHref="#always-open"
  fill="var(--color-neon-glow)"
  filter="url(#glow)"
  style={{
    transition: 'fill 0.5s ease-in',
  }}
/>
<use
  xlinkHref="#always-open"
  fill="var(--color-neon-fill)"
  style={{
    transition: 'fill 0.3s ease-in',
  }}
/> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸ºäº†æ§åˆ¶å‘å…‰æ•ˆæœï¼Œæˆ‘ä½¿ç”¨äº†æœ¬Â·å°¼ä¼¯æ ¼çš„[ä»£ç ç¬”](https://codepen.io/clickblipclick/pen/zdpMgY)ä¸­çš„ä¸€ä¸ªå‡½æ•°ã€‚ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘å¯ä»¥é€šè¿‡å¢åŠ æˆ–å‡å°‘å‘å…‰æ•ˆæœçš„é“å…·æ¥ä¼ é€’ä¸€ä¸ªå¼ºåº¦å€¼ã€‚

```
function addIntensity(num) {
  const arr = [];
  while (num) {
    arr.push(<feMergeNode in="blurred" key={num} />);
    num--;
  }
  return arr;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*<feMerge>SVG å…ƒç´ å…è®¸åŒæ—¶åº”ç”¨æ»¤é•œæ•ˆæœï¼Œè€Œä¸æ˜¯é¡ºåºåº”ç”¨ã€‚* - [MDN](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feMerge)

**add intensity å‡½æ•°**è·å–é€šè¿‡ props ä¼ é€’çš„å¼ºåº¦å€¼ï¼Œå¹¶åœ¨ **< feMerge >å…ƒç´ **ä¸­æ·»åŠ è®¸å¤šæ¨¡ç³Šæ»¤é•œã€‚æˆ‘é€‰å®šäº† 4 çš„**å¼ºåº¦ï¼Œè¿™æ„å‘³ç€æˆ‘åœ¨ä¸€ä¸ªæ¨¡ç³Šæ»¤é•œä¸ŠåŠ ä¸Šä¸€ä¸ªæ¨¡ç³Šæ»¤é•œï¼Œåˆ›å»ºäº†ä¸€ä¸ªæåº¦æ¨¡ç³Šçš„**ã€‚**** 

```
 <feGaussianBlur
    result="blurred"
    in="SourceGraphic"
    stdDeviation={blur}
  />
+  <feMerge>{addIntensity(intensity)}</feMerge> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘è¿˜ä¼ å…¥äº†ä¸€ä¸ª**å®½åº¦**é“å…·å’Œä¸€ä¸ª**æ¨¡ç³Š**é“å…·ç”¨äºè®¾ç½®è´¹é«˜æ–¯æ¨¡ç³Šæ•ˆæœçš„**æ ‡å‡†åå·®**ã€‚ **< feGaussianBlur >** æ˜¯ä¸€ä¸ªåŸç”Ÿçš„ SVG è¿‡æ»¤å™¨åŸè¯­ã€‚å¦‚æœæ‚¨æœ‰å…´è¶£äº†è§£æ›´å¤šå…³äº SVG è¿‡æ»¤å™¨çš„çŸ¥è¯†ï¼Œè¯·æŸ¥çœ‹æœ¬ç³»åˆ—çš„ [codrops](https://tympanus.net/codrops/2019/01/15/svg-filters-101/) ã€‚

```
//SvgAlwaysOpen.js
const SvgAlwaysOpen = ({ width, intensity, blur }) => (
  <svg viewBox="0 0 1280 1080" width={width}>
  {/* ... */}
) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
// in Parent Component
<SvgAlwaysOpen width="100%" intensity={4} blur={20} /> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#making-it-flicker)ç¥æ ‘é—ªçƒä¸å®š

é—ªçƒåŠ¨ç”»æ˜¯ä¸é€æ˜åº¦å€¼ä¸Šçš„ç®€å• **CSS å…³é”®å¸§**åŠ¨ç”»ã€‚åŒä¸€ç»„å…³é”®å¸§ç”¨äº**é—ªçƒ 1** å’Œ**é—ªçƒ 2** ã€‚ä¸¤è€…çš„åŒºåˆ«åœ¨äºå®ƒä»¬çš„**æŒç»­æ—¶é—´**ï¼Œè€Œé—ªçƒ 2 åœ¨å¼€å§‹å‰è¢«**å»¶è¿Ÿäº† 3s** ã€‚ä¸¤è€…éƒ½è®¾ç½®ä¸º**çº¿æ€§**(æ— ç¼“å’Œ)å’Œ**æ— é™**ï¼Œè¿™æ„å‘³ç€åŠ¨ç”»å°†åœ¨**å¾ªç¯ä¸­è¿ç»­æ’­æ”¾**ã€‚æˆ‘ä½¿ç”¨äº†æ¥è‡ª **@emotion/core** çš„**å…³é”®å¸§**åŠ©æ‰‹æ¥è®¾ç½® JS æ–‡ä»¶ä¸­çš„ CSS å…³é”®å¸§ã€‚

```
//SvgAlwaysOpen.js
import styled from '@emotion/styled';
import { keyframes } from '@emotion/core';

// ...

// right under the function component
const flicker = keyframes`
  from  { opacity: 0; }
  0%    { opacity: 1; }
  3%    { opacity: 0.4; }
  6%    { opacity: 1; }
  7%    { opacity: 0.4; }
  8%    { opacity: 1; }
  9%    { opacity: 0.4; }
  10%   { opacity: 1; }
  89%   { opacity: 1; }
  90%   { opacity: 0.4; }
  100%  { opacity: 0.4; }
  to    { opacity: 1; }
`;

const AlwaysOpen = styled.g`
  .flicker1 {
    animation: ${flicker} 5s linear infinite;
  }
  .flicker2 {
    animation: ${flicker} 6s linear 3s infinite;
  }
`; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ ·å¼é€šè¿‡ **@emotion/styled** åº“åº”ç”¨äº SVG ç»„ä»¶ï¼Œå°±åƒåº”ç”¨äºä»»ä½•å…¶ä»– JSX HTML å…ƒç´ ä¸€æ ·ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œid ä¸ºâ€œalways-openâ€çš„ **< g >** æ ‡ç­¾å·²è¢«é‡å‘½åä¸º **< AlwaysOpen >** ï¼Œå¹¶ä¸”**ç±»å**â€˜é—ªçƒ 1â€™å’Œâ€˜é—ªçƒ 2â€™å°†è¢«**åº”ç”¨äº AlwaysOpen ç»„å†…çš„ç‰¹å®šè·¯å¾„**ã€‚

```
- <g id="always-open"> + <AlwaysOpen id="always-open">
   <g id="open">
     <path d="######" />
     <path
+      className={mode === 'dark' ? 'flicker1' : ''}
       d="######"
     />
     <path d="######" />
   </g>
   <g id="always">
     <path
+      className={mode === 'dark' ? 'flicker2' : ''}
       d="######"
     />
     <path d="######" />
     <path d="######" />
   </g>
- </g> + </AlwaysOpen> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç±»åçš„**æ¡ä»¶é€»è¾‘**é˜»æ­¢åŠ¨ç”»æ’­æ”¾ï¼Œé™¤éæ¨¡å¼è®¾ç½®ä¸ºâ€œé»‘æš—â€ã€‚ **currentMode** å˜é‡ä½äº layout.js ä¸­ï¼Œå®ƒæ˜¯ SvgAlwaysOpen ç»„ä»¶çš„**ç¬¬ 4 å±‚**ã€‚

ä¸ºäº†ä» SVG ç»„ä»¶å†…éƒ¨**è®¿é—®å½“å‰æ¨¡å¼å˜é‡**,æˆ‘ä½¿ç”¨äº† React çš„**ä¸Šä¸‹æ–‡** APIã€‚

```
// layout.js
import React, { useState, useEffect, createContext } from 'react';

// ...

export const ModeContext = createContext('light');

export default function Layout({ children }) {
  const [currentMode, setCurrentMode] = useState('light');

// ...

  return (
    <>
      <ModeContext.Provider value={currentMode}>
        <Header/>
        <main>{children}</main>
        <Footer />
      </ModeContext.Provider>
    </>
  );
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
// SvgAlwaysOpen.js
import React, { useContext } from 'react';
import { ModeContext } from './layout';

// ...

export default function SvgAlwaysOpen({ width, intensity, blur }) {
  const mode = useContext(ModeContext);

// ...

} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸Šä¸‹æ–‡æ˜¯ç›¸å½“æ–°çš„ååº”ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹,**å–ä»£äº† Redux** çš„éœ€è¦ã€‚ä½ å¯ä»¥åœ¨ [React æ–‡æ¡£](https://reactjs.org/docs/context.html)ä¸­äº†è§£æ›´å¤šä¿¡æ¯

## [](#wtf-ios)WTF iOSï¼Ÿï¼

æˆ‘å¿…é¡»å¤„ç†çš„æœ€åä¸€ä¸ªé—®é¢˜æ˜¯ SVG **ä¸­åº”ç”¨çš„åŠ¨ç”»ä¼¼ä¹ä¸èƒ½åœ¨ iOS** ä¸Šå·¥ä½œã€‚å®ƒä»¬å¯ä»¥åœ¨æ‰€æœ‰ç°ä»£æ¡Œé¢æµè§ˆå™¨ä¸Šè¿è¡Œï¼Œç”šè‡³å¯ä»¥åœ¨å®‰å“æ‰‹æœºä¸Šè¿è¡Œï¼Œä½†ä¸èƒ½åœ¨ iPhones ä¸Šè¿è¡Œã€‚

æˆ‘åœ¨æˆ‘çš„ Macbook ä¸Šä½¿ç”¨äº†**æ¨¡æ‹Ÿå™¨**åº”ç”¨ç¨‹åºæ¥ä¸ºè¿™ä¸ªé—®é¢˜åˆ›å»ºä¸€ä¸ªå˜é€šåŠæ³•ï¼Œè€Œä¸å¿…ä¸ºäº†åœ¨æˆ‘çš„æ‰‹æœºä¸Šæ£€æŸ¥å®ƒè€Œå®é™…ä¸Šé‡å¤éƒ¨ç½²åˆ°ç½‘ç»œä¸Šã€‚éå¸¸æ–¹ä¾¿ã€‚

[![simulator and code editor](img/f50aee9ecb4bdf6b71ed4a0ba6559a0c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--elE4Q5CG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/rtpkujxn0hgaub2tix6o.png)

æˆ‘æƒ³åˆ°çš„è§£å†³æ–¹æ¡ˆæ˜¯åˆ›å»ºä¸€ä¸ª**åŒ…è£…ç»„ä»¶**å¹¶å‘å…¶æ·»åŠ ä¸€ä¸ªé¢å¤–çš„åŠ¨ç”»ã€‚å°†åŠ¨ç”»ç›´æ¥æ·»åŠ åˆ° index.js ä¸­çš„åŒ…è£…å™¨ div ä¹Ÿä¸èµ·ä½œç”¨ï¼Œå› ä¸ºåœ¨ Gatsby é¡µé¢æ¨¡æ¿ä¸­æ›´æ–°ä¸Šä¸‹æ–‡å˜é‡å­˜åœ¨ä¸€ä¸ªæœªè§£å†³çš„é—®é¢˜ã€‚ğŸ¤·ğŸ»â€â™‚ï¸

æ–°çš„é—ªçƒæ›´åŠ å¾®å¦™ï¼Œå½±å“æ•´ä¸ª SVGï¼Œè€Œä¸ä»…ä»…æ˜¯æŸäº›å­—æ¯ã€‚æˆ‘è®¤ä¸ºå®ƒæ—¢å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä¸å…¶ä»–ä¸¤ä¸ªåŠ¨ç”»ç»“åˆä½¿ç”¨ã€‚å…³é”®å¸§ç›¸ä¼¼ä½†ç•¥æœ‰ä¸åŒï¼Œ**æŒç»­æ—¶é—´ä¸º 10 ç§’**ï¼Œåˆå§‹**å»¶è¿Ÿä¸º 5 ç§’**ã€‚

```
// HeroImage.js
import React, { useContext } from 'react';
import styled from '@emotion/styled';
import { keyframes } from '@emotion/core';
import SvgAlwaysOpen from './SvgAlwaysOpen';
import { ModeContext } from './layout';

export default function HeroImage() {
  const mode = useContext(ModeContext);
  return (
    <SvgWrapper className={mode === 'dark' ? 'flickering' : ''}>
      <SvgAlwaysOpen width="100%" intensity={4} blur={20} />
    </SvgWrapper>
  );
}

const flicker = keyframes`
  from  { opacity: 0; }
  0%    { opacity: 1; }
  2%    { opacity: 0.8; }
  4%    { opacity: 1; }
  7%    { opacity: 0.6; }
  8%    { opacity: 1; }
  to    { opacity: 1; }
`;

const SvgWrapper = styled.div`
  max-width: 540px;
  width: 100%;
  margin: 20px auto;
  @media screen and (min-width: 1024px) {
    margin: 40px auto;
    flex-shrink: 0;
  }
  &.flickering {
    animation: ${flicker} 10s linear 5s infinite;
  }
`; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°±æ˜¯è¿™æ ·ï¼å¦‚æœæœ‰äººçŸ¥é“ä¸ºä»€ä¹ˆ iOS ä¸­çš„åŠ¨ç”»ä¸èƒ½åƒé¢„æœŸçš„é‚£æ ·å·¥ä½œï¼Œæˆ–è€…æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œè¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ã€‚

æ„Ÿè°¢é˜…è¯»ï¼

æŸ¥çœ‹ç¬¬ 1 éƒ¨åˆ†ğŸ‘‡

[![ninjasoards](img/e2f45280c3274ac2307a36916294a19b.png)](/ninjasoards) [## è‡ªå®šä¹‰å¤œé—´æ¨¡å¼åˆ‡æ¢ w/React & CSS å˜é‡

### å¤§å«Â·ç´¢å…¹ 8 æœˆ 25 æ—¥ 195 åˆ†é’Ÿé˜…è¯»

#react #css #javascript #darkmode](/ninjasoards/make-a-custom-night-mode-toggle-w-react-css-variables-272o)