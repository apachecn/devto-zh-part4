# åŸºäºä½¿ç”¨ javaScript çš„å”¯ä¸€å€¼åˆå¹¶ä¸–ç•Œçš„ javaScript ä¸­å¯¹è±¡çš„è”åˆ

> åŸæ–‡:[https://dev . to/param Harrison/union-of-objects-in-JavaScript-based-on-unique-value-merging-worlds-using-JavaScript-40g 7](https://dev.to/paramharrison/union-of-objects-in-javascript-based-on-unique-value-merging-worlds-using-javascript-40g7)

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°

*   ä¸¤ä¸ªæˆ–å¤šä¸ªå¯¹è±¡çš„åˆå¹¶
*   å°†å¯¹è±¡åˆå¹¶åˆ°æ•°ç»„ä¸­
*   åˆå¹¶ä¸¤ä¸ªæ•°ç»„
*   åŸºäºå”¯ä¸€é”®çš„å¯¹è±¡è”åˆ
*   åŸºäºå”¯ä¸€é”®å€¼çš„æ•°ç»„ä¸­å¯¹è±¡çš„å¹¶é›†

### [](#merging-of-two-or-more-objects-using-object-destructuring)ä½¿ç”¨å¯¹è±¡ææ„åˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ªå¯¹è±¡

ä½¿ç”¨ es6 å¯¹è±¡é”€æ¯ï¼Œå¾ˆå®¹æ˜“åˆå¹¶ä¸¤ä¸ªå¯¹è±¡ã€‚

```
const firstObj = { name: 'Vennila' };
const secondObj = { age: 26 };
// object destructuring to merge two objects
const mergedObj = { ...firstObj, ...secondObj };
console.log(mergedObj);
// result - { name: 'Vennila', age: 26 } 
```

å¦‚æœä¸¤ä¸ªå¯¹è±¡æœ‰ç›¸åŒçš„é”®å€¼ï¼Œé‚£ä¹ˆå®ƒåªæ˜¯åˆå¹¶æœ€åä¸€ä¸ªå¯¹è±¡çš„å€¼ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªé”®å€¼ã€‚

```
const firstObjWithSameKey = { name: 'Vennila', age: 26 };
const secondObjWithSameKey = { name: 'Param', city: 'Tallinn' };

const mergedObjWithSameKey = {
  ...firstObjWithSameKey,
  ...secondObjWithSameKey,
};
console.log(mergedObjWithSameKey);
// result - { name: 'Param', age: 26, city: 'Tallinn' } 
```

### [](#merge-objects-into-an-array-of-objects)å°†å¯¹è±¡åˆå¹¶æˆä¸€ä¸ªå¯¹è±¡æ•°ç»„

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†åŸºæœ¬çš„ä¾‹å­ï¼Œç°åœ¨è®©æˆ‘ä»¬æ›´æ·±å…¥ä¸€æ­¥ã€‚å¦‚ä½•å°†å¯¹è±¡åˆå¹¶åˆ°å¯¹è±¡æ•°ç»„ä¸­ï¼Ÿå®ƒä½¿ç”¨äº†ç›¸åŒçš„ææ„æŠ€æœ¯ï¼Œä½†æ˜¯ä½¿ç”¨äº†æ•°ç»„ã€‚

```
const arrayOfObj = [
  {
    name: 'Ironman',
  },
  {
    name: 'Spiderman',
  },
];
const objToMergeInArray = {
  name: 'Captain America',
  from: 'Marvel Universe',
};
const mergedArrayOfObj = [...arrayOfObj, objToMergeInArray];
console.log(mergedArrayOfObj);
/* result
[ 
  { name: 'Ironman' },
  { name: 'Spiderman' },
  { name: 'Captain America', from: 'Marvel Universe' } 
] 
*/ 
```

### [](#merging-two-arrays)åˆå¹¶ä¸¤ä¸ªæ•°ç»„

åˆå¹¶ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡æ•°ç»„åŒä¸Šï¼Œå”¯ä¸€çš„ä¸åŒæ˜¯ï¼Œä½ éœ€è¦ææ„ä¸¤ä¸ªæ•°ç»„ã€‚

```
[...arrayOfFirstObj, ...arrayOfSecondObj]; 
```

### [](#union-of-two-objects-based-on-key)åŸºäºé”®çš„ä¸¤ä¸ªå¯¹è±¡çš„å¹¶é›†

æˆ‘ä»¬å·²ç»è®¨è®ºè¿‡äº†ï¼Œå°±è¿™ä¹ˆç®€å•ã€‚å¦‚æœå€¼è‡ªåŠ¨åŒ¹é…ï¼Œå¯¹è±¡å°†é‡‡ç”¨æœ€åä¸€ä¸ªå€¼å¹¶åˆå¹¶å¯¹è±¡ã€‚å‚è§`mergedObjWithSameKey`çš„ç¤ºä¾‹ã€‚å®ƒåˆå¹¶äº† name å±æ€§å¹¶æ˜¾ç¤ºæœ€åä¸€ä¸ªå¯¹è±¡çš„åç§°å€¼ã€‚

### [](#union-of-objects-in-an-array-based-on-unique-key-value)åŸºäºå”¯ä¸€é”®å€¼çš„æ•°ç»„ä¸­å¯¹è±¡çš„å¹¶é›†

è¿™å°±æ˜¯æœ‰è¶£çš„åœ°æ–¹ã€‚ä¸¾è¿™ä¸ªä¾‹å­

```
const firstArr = [
  {
    id: 'marvel',
    winner: 'Captain America',
  },
  {
    id: 'DC',
    winner: 'Aquaman',
  },
];

const secondArr = [
  {
    id: 'freelancer',
    winner: 'Wonder women',
  },
  {
    id: 'marvel',
    winner: 'Param', //why not
    strenths: ['fly', 'fight', 'speed'],
  },
]; 
```

å¦‚æœä½ æ£€æŸ¥ä¸¤ä¸ªæ•°ç»„ï¼Œå®ƒä»¬éƒ½æœ‰é”®å€¼`id: marvel`ã€‚å¦‚ä½•åˆå¹¶è¿™ä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶æ˜¾ç¤ºè¿™æ ·çš„ç»“æœ

```
// expected result

const mergedArray = [
  {
    id: 'marvel',
    winner: 'Param', //why not
    strenths: ['fly', 'fight', 'speed'],
  },
  {
    id: 'DC',
    winner: 'Aquaman',
  },
  {
    id: 'freelancer',
    winner: 'Wonder women',
  },
]; 
```

è®©æˆ‘ä»¬ä½¿ç”¨ç°ä»£çš„ javascript æŠ€æœ¯æ¥å®ç°å®ƒã€‚

åœ¨è¿™æ ·åšä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£ä¸€ç§å«åš`Set`çš„ javascript å¯¹è±¡ç±»å‹ã€‚

> Set æ˜¯ es6 ä¸­å¼•å…¥çš„æ–°å¯¹è±¡ç±»å‹ï¼Œç”¨äºåˆ›å»ºä¸åŒå€¼çš„é›†åˆã€‚

æˆ‘ä»¬å°†ä½¿ç”¨ Set æ¥åˆå¹¶æˆ‘ä»¬çš„æ•°ç»„ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

> Set æ˜¯ es6 ä¸­å¼•å…¥çš„æ–°å¯¹è±¡ç±»å‹ï¼Œç”¨äºåˆ›å»ºä¸åŒå€¼çš„é›†åˆã€‚

#### [](#simple-example-for-set)è®¾å®šçš„ç®€å•ä¾‹å­

```
// Simple example for Set
const a = [44, 33, 22];
const b = [33, 22, 11];
const AandB = [...a, ...b];
console.log(AandB); // [44, 33, 22, 33, 22, 11]
const distinctValuesInAandBSet = new Set(AandB);
console.log(distinctValuesInAandBSet); // Set { 44, 33, 22, 11 }
const setToArray = [...distinctValuesInAandBSet];
console.log(setToArray); // [44, 33, 22, 11] 
```

è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬åªæ˜¯åˆå¹¶äº†ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œå¹¶ä½¿ç”¨`Set`åˆ›å»ºäº†ä¸€ç»„ä¸åŒçš„å€¼ã€‚

è®©æˆ‘ä»¬å¯¹æˆ‘ä»¬çš„å¯¹è±¡æ•°ç»„ä½¿ç”¨ç›¸åŒçš„åŸç†ã€‚

```
const mergedArray = [...secondArr, ...firstArr];
// mergedArray have duplicates, lets remove the duplicates using Set
let set = new Set();
let unionArray = mergedArray.filter(item => {
  if (!set.has(item.id)) {
    set.add(item.id);
    return true;
  }
  return false;
}, set);
console.log(unionArray);
/*
[ { id: 'freelancer', winner: 'Wonder women' },
  { id: 'marvel',
    winner: 'Param',
    strenths: ['fly', 'fight', 'speed'] },
  { id: 'DC', winner: 'Aquaman' } ]
*/ 
```

åœ¨`mergedArray`ä¸­ï¼Œç¬¬äºŒä¸ªæ•°ç»„é¦–å…ˆè¢«ææ„ï¼Œå› ä¸ºå¦‚æœ`id`å€¼å·²ç»å­˜åœ¨äºç¬¬äºŒä¸ªæ•°ç»„ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ filter ä»ä¸€ä¸ªæ•°ç»„ä¸­è¿‡æ»¤å‡ºå€¼ã€‚

æˆ‘å¬åˆ°äº†ï¼Œè¿™ä¸æ˜¯çº¯ç²¹çš„è”ç›Ÿæ‰€æœ‰çš„å†…å®¹ã€‚å®ƒä¸ä¼šæ·±åº¦åˆå¹¶ä¸¤ä¸ªæ•°ç»„ä¸­çš„æ‰€æœ‰é”®å€¼ã€‚

å³ä½¿æ˜¯`id`çš„`unionBy`å€¼ã€‚è¿™ä¸ªä¾‹å­å¹¶ä¸é€‚ç”¨äºæ‰€æœ‰çš„ç”¨ä¾‹ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ä»…é€šè¿‡`id`å€¼æ¥åˆå¹¶ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ã€‚è¿™ä¸ªä¾‹å­å°†åªè¿”å›ç¬¬äºŒä¸ªæ•°ç»„å¯¹è±¡çš„ç»“æœï¼Œä½†æ˜¯å®ƒä¸ä¼šä»ç¬¬ä¸€ä¸ªæ•°ç»„å¯¹è±¡
ä¸­è·å–å±æ€§

```
const firstArray = [
  {
    id: 'marvel',
    winner: 'Captain America',
    weakness: ['emotion'],
  },
];

const secondArray = [
  {
    id: 'marvel',
    name: 'Param',
  },
]; 
```

çœŸæ­£çš„`unionBy`å€¼åº”è¯¥è¿”å›

```
/* expected result
  [
    {
      id: "marvel",
      winner: "Captain America",
      weakness: ["emotion"],
      name: "Param",
    }
  ]
  */

/* Our actual result
  [
    {
      id: "marvel",
      name: "Param",
    }
  ]
  */ 
```

æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€è¯¾ä¸­çœ‹åˆ°å¦‚ä½•å¤„ç†`unionBy`é”®å€¼ï¼Œä»¥åŠå¦‚ä½•æ·±åº¦åˆå¹¶ä¸¤ä¸ªæ•°ç»„ä¸­çš„å¯¹è±¡ã€‚

å¯¹äºæœ¬æ–‡ï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†å¦‚ä½•åˆå¹¶å¯¹è±¡ä»¥åŠå¦‚ä½•åŸºäº javascript ä¸­çš„é”®å€¼è”åˆå¯¹è±¡æ•°ç»„ã€‚

ä½†æ˜¯è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯ï¼Œ

*   å®ƒä»ç¬¬ä¸€ä¸ªæ•°ç»„ä¸­è¿‡æ»¤å‡ºå”¯ä¸€çš„é”®å€¼
*   å®ƒè¿˜æ”¹å˜äº†æ•°ç»„å†…éƒ¨çš„æ’åºï¼Œä¸å®Œå…¨ä¸ç›¸åŒçš„æ’åºåˆå¹¶

æ•¬è¯·æœŸå¾…ï¼Œå¸Œæœ›ä½ å–œæ¬¢è¿™ä¸ªæ•™ç¨‹ğŸ˜‹