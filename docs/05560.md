# CSS é¢„è®¾ç¯å¢ƒ:CSS çš„å·´åˆ«å¡”

> åŸæ–‡ï¼š<https://dev.to/adrianbdesigns/postcss-preset-env-babel-for-css-12hp>

åœ¨è¿‡å»çš„ä¸€å¹´åŠæ—¶é—´é‡Œï¼Œåœ¨æ‰€æœ‰ç”¨äºç¼–å†™ CSS çš„å·¥å…·(æˆ–é£æ ¼)ä¸­ï¼ŒPostCSS æ˜¯æˆ‘ä¸ªäººæœ€å–œæ¬¢çš„ã€‚è®¾ç½®çœŸçš„å¾ˆç®€å•ï¼Œå®ƒæœ‰å¤§é‡éå¸¸æœ‰ç”¨çš„æ’ä»¶ï¼Œè€Œä¸”æ€§èƒ½å¾ˆå¥½ã€‚æˆ‘æœ€å–œæ¬¢çš„ä¸€ä¸ªæ’ä»¶ç»å¯¹æ˜¯`postcss-preset-env`ã€‚

## ä»€ä¹ˆæ˜¯ postcss-preset-envï¼Ÿ

åŸºæœ¬ä¸Šï¼Œå®ƒæ˜¯ CSS çš„é€šå¤©å¡”ã€‚å®ƒå…è®¸å¼€å‘äººå‘˜ä½¿ç”¨ç°ä»£å’Œæœªæ¥çš„è¯­æ³•ç¼–å†™ CSSï¼Œå¹¶å°†ä»£ç è½¬æ¢ä¸º CSSï¼Œè¿™å¾—åˆ°äº†å¤§å¤šæ•°æµè§ˆå™¨çš„å¹¿æ³›æ”¯æŒã€‚å¬èµ·æ¥å¾ˆç®€å•ï¼Œå¯¹å§ï¼Ÿ

ä¾‹å¦‚ï¼Œè¿™å…è®¸å¼€å‘äººå‘˜åœ¨ä»–ä»¬çš„å¸¸è§„ CSS ä»£ç ä¸­ä½¿ç”¨ CSS å˜é‡ã€‚æ ¹æ®é…ç½®çš„ä¸åŒï¼Œ`postcss-preset-env`åœ¨ CSS å˜é‡æ—è¾¹åŒ…å«å¸¸è§„å€¼ï¼Œä½œä¸ºä¸æ”¯æŒ CSS å˜é‡çš„æµè§ˆå™¨çš„åå¤‡ã€‚

**ä»£å·**

```
.cta:hover {
  background-color: var(--color__cta--darker);
  color: var(--color__secondary);
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

**æˆç»©**
[![Alt Text](img/b15c80aaac814fec69af17dc8ad277e9.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--8f4_85a---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/u68aqybwbyc3ux5ncl6n.JPG)

## å®‰è£…

1.  ä½¿ç”¨ npm å®‰è£…å®ƒ:`npm install postcss-preset-env --save-dev`
2.  æŠŠå®ƒæ·»åŠ åˆ°ä½ çš„ postcss æ’ä»¶é…ç½®æ–‡ä»¶:gulpï¼Œwebpackï¼ŒPostCSS é…ç½®æ–‡ä»¶ç­‰ã€‚ä¾‹å¦‚ï¼Œåœ¨`postcss.config.js`ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åŒ…å«å®ƒ:

```
module.exports = {
  plugins: {
    "postcss-preset-env": { /* Options */ },
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨é»˜è®¤é…ç½®ä¸‹ï¼Œ`postcss-preset-env`ä½¿ç”¨ Stage 2 CSS ç‰¹æ€§(æˆ‘ä»¬å°†åœ¨åé¢è§£é‡Š)å¹¶é¢å‘æ‰€æœ‰æµè§ˆå™¨(å¦‚æœé¡¹ç›®ä¸­æ²¡æœ‰è®¾ç½®`browsers`é€‰é¡¹)ã€‚

## åŸºæœ¬é…ç½®

æˆ‘åªæƒ³ä»‹ç»æœ€å¸¸ç”¨å’Œæœ€é‡è¦çš„é…ç½®é€‰é¡¹ï¼Œå®ƒä»¬æ˜¯**é˜¶æ®µ**ã€**ç‰¹æ€§**å’Œ**æµè§ˆå™¨**ã€‚æ‚¨å¯ä»¥åœ¨[æ–‡æ¡£](https://www.npmjs.com/package/postcss-preset-env)ä¸­æŸ¥çœ‹æ‰€æœ‰é€‰é¡¹çš„åˆ—è¡¨ã€‚

### é˜¶æ®µ

è¿™ç±»ä¼¼äºå·´åˆ«å¡”ä¸­ä½¿ç”¨çš„ ECMAScript æè®®ã€‚è¿™äº›é˜¶æ®µä»£è¡¨äº† CSS ä¸­çš„æ¯ä¸ªç‰¹æ€§(æˆ–æè®®)æˆä¸º CSS æ ‡å‡†çš„ä¸€éƒ¨åˆ†æ‰€å¿…é¡»ç»å†çš„æ­¥éª¤ã€‚å®ƒåŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µ:

*   é˜¶æ®µ 0:æŠ±è´Ÿ-ä¸€ä¸ªæƒ³æ³•æˆ–æ—©æœŸè‰æ¡ˆã€‚éå¸¸ä¸ç¨³å®šä¸”æ˜“å˜
*   ç¬¬ä¸€é˜¶æ®µ:å®éªŒæ€§çš„â€”â€”ä¹Ÿéå¸¸ä¸ç¨³å®šï¼Œå¹¶ä¸”å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†æ˜¯è¯¥ææ¡ˆå¾—åˆ°äº† W3C æˆå‘˜çš„è®¤å¯ã€‚
*   ç¬¬äºŒé˜¶æ®µ:å¯å…è®¸çš„â€”â€”ä¹Ÿéå¸¸ä¸ç¨³å®šï¼Œå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†å®ƒæ­£åœ¨ç§¯æåœ°å·¥ä½œã€‚
*   ç¬¬ä¸‰é˜¶æ®µ:æ‹¥æŠ±-ç¨³å®šä¸”å˜åŒ–ä¸å¤§ã€‚è¿™ä¸ªç‰¹æ€§å¾ˆå¯èƒ½ä¼šæˆä¸ºä¸€ä¸ªæ ‡å‡†ã€‚
*   é˜¶æ®µ 4:æ ‡å‡†åŒ–-æœ€ç»ˆå·¥ä½œè§£å†³æ–¹æ¡ˆã€‚æ‰€æœ‰ä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒã€‚

é€šè¿‡è®¾ç½®ä¸€ä¸ª`stage`é€‰é¡¹ï¼Œæˆ‘ä»¬é€‰æ‹©äº†*ç»„ CSS ç‰¹æ€§*ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¼–å†™ CSS æ—¶ä½¿ç”¨è¿™äº›ç‰¹æ€§:

```
 "postcss-preset-env": {
      stage: 3
    } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç”¨äºè·Ÿè¸ªå“ªäº› CSS åŠŸèƒ½å¤„äºå“ªä¸ªé˜¶æ®µçš„æœ‰ç”¨é“¾æ¥:

*   [https://cssdb.org/](https://cssdb.org/)
*   [https://preset-env.cssdb.org/features](https://preset-env.cssdb.org/features)

## ç‰¹æ€§

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`feature`é…ç½®æ¥ä»…å¯ç”¨ç‰¹å®šçš„ CSS ç‰¹æ€§ï¼Œè€Œä¸ç®¡å·²ç»è®¾ç½®äº†å“ªä¸ª`stage`é€‰é¡¹ã€‚

æ‰€æœ‰çš„ç‰¹å¾å˜é‡éƒ½å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°:[https://preset-env.cssdb.org/features](https://preset-env.cssdb.org/features)

åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ‰€æœ‰çš„`stage 3+`ç‰¹å¾ï¼Œå¹¶ä¸”æˆ‘ä»¬åŒ…æ‹¬`nesting-rules`ç‰¹å¾ï¼Œå®ƒæ˜¯**é˜¶æ®µ 1** ç‰¹å¾ã€‚

```
 "postcss-preset-env": {
      stage: 3,
      features: {
        "nesting-rules": true
      }
    } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## æµè§ˆå™¨

è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„æµè§ˆå™¨åˆ—è¡¨é…ç½®ï¼Œè¢«å„ç§å·¥å…·å’Œæ’ä»¶ä½¿ç”¨ï¼Œæ¯”å¦‚ Autoprefixerã€‚

åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åªé’ˆå¯¹æµè§ˆå™¨çš„æœ€åä¸¤ä¸ªç‰ˆæœ¬ã€‚

```
 "postcss-preset-env": {
      browsers: "last 2 versions",
      stage: 3,
      features: {
        "nesting-rules": true
      }
    } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## å®Œæ•´é…ç½®å’Œæ–‡æ¡£

è¿™å‡ ä¸ªé€‰é¡¹è¶³ä»¥è®©æ‚¨å¼€å§‹ä½¿ç”¨`postcss-preset-env`å¹¶ç¼–å†™ç°ä»£ CSS è¯­æ³•ï¼Œå°†å…¶è½¬æ¢æˆå¹¿æ³›æ”¯æŒçš„ CSS è¯­æ³•ã€‚æœ‰å…³é…ç½®é€‰é¡¹å’Œç‰¹æ€§çš„å®Œæ•´åˆ—è¡¨ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹ä»¥ä¸‹é“¾æ¥

*   [https://github.com/csstools/postcss-preset-env](https://github.com/csstools/postcss-preset-env)
*   [https://preset-env.cssdb.org/](https://preset-env.cssdb.org/)

* * *

æ„Ÿè°¢ä½ èŠ±æ—¶é—´é˜…è¯»è¿™ç¯‡æ–‡ç« ã€‚å¦‚æœä½ è§‰å¾—è¿™å¾ˆæœ‰ç”¨ï¼Œè¯·ç»™å®ƒä¸€ä¸ªâ¤ï¸æˆ–ğŸ¦„ï¼Œåˆ†äº«è¯„è®ºã€‚