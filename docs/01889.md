# ä½¿ç”¨ Formik å’Œ Yup åœ¨ React Native ä¸­æ„å»ºå’ŒéªŒè¯è¡¨å•

> åŸæ–‡ï¼š<https://dev.to/amanhimself/build-and-validate-forms-in-react-native-using-formik-and-yup-54oc>

[![cover_image](img/f5dec2788c3e865b649aa56f08b82257.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--vnC_vW0u--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/nmJGbVp.jpg)

Formik å’Œ yup æ˜¯å¾ˆæ£’çš„å¼€å‘å·¥å…·ï¼Œå¯ä»¥æ ¹æ®æ‚¨çš„ React åŸç”Ÿåº”ç”¨ç¨‹åºéœ€æ±‚æ„å»ºéå¸¸æ£’çš„ UI è¡¨å•ã€‚åœ¨æœ¬æ•™ç¨‹ç»“æŸæ—¶ï¼Œæˆ‘å°†å¸¦æ‚¨æµè§ˆè¿™ç¯‡æ–‡ç« ï¼Œä¸ºç™»å½•å’Œæ³¨å†Œå±å¹•æ„å»ºä¸¤ä¸ªè¡¨å•ï¼Œå¹¶å±•ç¤ºä½¿ç”¨ Formik å’Œ Yup ç­‰åº“çš„ç»„åˆæ¥éªŒè¯å®ƒä»¬æ˜¯å¤šä¹ˆå®¹æ˜“ï¼Œæ‚¨å°†ä¼šäº†è§£è¿™ç§è¯´æ³•çš„å®Œæ•´ä¸Šä¸‹æ–‡ã€‚

> æœ¬æ•™ç¨‹å°†ä½¿ç”¨ä¸€äº›å·²ç»å®‰è£…å¥½çš„æºä»£ç ï¼Œä» [**åˆ°**](https://github.com/amandeepmittal/expo-firebase/releases/tag/0.1.0) çš„ Github repo releaseã€‚

è¯·åŠ¡å¿…ä¸‹è½½æºä»£ç ï¼Œä»¥ä¾¿å¯†åˆ‡å…³æ³¨è¿™ç¯‡æ–‡ç« ï¼Œå¹¶æ›´å¥½åœ°ç†è§£ Formik å’Œ yup ç­‰åº“ã€‚æ‚¨æ­£åœ¨ä¸‹è½½çš„æºä»£ç æ–‡ä»¶åŒ…å«ä½¿ç”¨å¯¼èˆªæ¨¡å¼ï¼Œå¦‚ Stack å’Œ Switchï¼Œä»¥æ»¡è¶³åœ¨ React æœ¬æœºåº”ç”¨ç¨‹åºä¸­æ¨¡æ‹Ÿèº«ä»½éªŒè¯æµç¨‹çš„è¦æ±‚ã€‚å®ƒè¿˜åŒ…å«ä¸‰ä¸ªå±å¹•çš„æœ€å°‘ä»£ç :

*   æ³¨å†Œ
*   ç­¾çº¦é›‡ç”¨
*   ä¸»é¡µ

ä½ å°†ç»§ç»­åœ¨å®ƒä»¬çš„åŸºç¡€ä¸Šå‘å±•ã€‚å…³äºæˆ‘å¦‚ä½•è®¾ç½®è¿™ä¸ªè®¤è¯æµç¨‹çš„å®Œæ•´ç»†èŠ‚ï¼Œè¯·å…³æ³¨ä¸Šä¸€ç¯‡æ–‡ç« [è®¤è¯æµç¨‹å¦‚ä½•åœ¨ä½¿ç”¨ React Navigation 4.x](https://heartbeat.fritz.ai/how-authentication-flow-works-in-react-native-apps-using-react-navigation-4-x-a30bb4d9e5d6) çš„ React åŸç”Ÿåº”ç”¨ä¸­å·¥ä½œã€‚

## ç›®å½•

*   è¦æ±‚
*   å®‰è£…åº“
*   åˆ›å»ºå¯é‡ç”¨ç»„ä»¶
*   åˆ›å»ºç™»å½•è¡¨å•
*   å°† Formik æ·»åŠ åˆ°ç™»å½•è¡¨å•
*   å¤„ç†è¡¨å•æäº¤
*   ç”¨â€œæ˜¯â€éªŒè¯è¡¨å•
*   é‡æ„é”™è¯¯æ¶ˆæ¯
*   è¡¨å•æ— æ•ˆæ—¶ç¦ç”¨æŒ‰é’®
*   ä»…å½“è§¦æ‘¸æŒ‡å®šå­—æ®µæ—¶æ˜¾ç¤ºé”™è¯¯
*   æäº¤æ—¶åœ¨ç™»å½•æŒ‰é’®ä¸Šæ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨
*   å¯¹ä½ çš„æŒ‘æˆ˜ğŸ’ª
*   ç»“è®º

## è¦æ±‚

å¦‚æœæ‚¨æ‰“ç®—å•ç‹¬ç¼–å†™ä»£ç ï¼Œè¯·ç¡®ä¿æ‚¨å·²ç»å®‰è£…äº†ä»¥ä¸‹è½¯ä»¶:

*   å®‰è£…äº† npm/yarn çš„ Nodejs (>= `10.x.x`)ã€‚
*   expo-cli (>= `3.x.x`)ï¼Œä»¥å‰ç§°ä¸º create-react-native-appã€‚
*   Mac ç”¨æˆ·å¯ä»¥ä½¿ç”¨ iOS æ¨¡æ‹Ÿå™¨ã€‚
*   Windows/Linux ç”¨æˆ·å¿…é¡»è¿è¡Œ Android æ¨¡æ‹Ÿå™¨ã€‚

è¦äº†è§£æ›´å¤šå…³äºå¦‚ä½•åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­è®¾ç½®å’Œè¿è¡Œæ¨¡æ‹Ÿå™¨æˆ–ä»¿çœŸå™¨çš„ä¿¡æ¯ï¼Œè¯·è®¿é—® React Native çš„å®˜æ–¹æ–‡æ¡£[è¿™é‡Œ](https://facebook.github.io/react-native/docs/getting-started)ã€‚

## å®‰è£…åº“

ç°åœ¨ï¼Œå‰ä¸€ç¯‡æ–‡ç« ä¸­çš„`package.json`æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºã€‚å®ƒåŒ…å«ä¸€ä¸ªåŸºæœ¬çš„ Expo ç©ºç™½æ¨¡æ¿å’Œå¯¹`react-navigation`åº“çš„ä¾èµ–ã€‚

```
"dependencies":  {  "expo":  "^34.0.1",  "react":  "16.8.3",  "react-dom":  "^16.8.6",  "react-native":  "https://github.com/expo/react-native/archive/sdk-34.0.0.tar.gz",  "react-native-gesture-handler":  "~1.3.0",  "react-native-reanimated":  "~1.1.0",  "react-native-screens":  "1.0.0-alpha.22",  "react-native-web":  "^0.11.4",  "react-navigation":  "4.0.0",  "react-navigation-stack":  "1.5.1"  }, 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å®‰è£…å°†ç”¨äºåˆ›å»ºç™»å½•å’Œæ³¨å†Œè¡¨å•çš„åº“ã€‚æ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£å¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚

```
yarn add formik yup react-native-elements 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

UI åº“`react-native-elements`æ˜¯ä¸€ä¸ªâ€œè·¨å¹³å° React åŸç”Ÿ UI å·¥å…·åŒ…â€,å®ƒä½¿å¾—åœ¨ React åŸç”Ÿåº”ç”¨ä¸­æ„å»ºå„ç§å…·æœ‰é™„åŠ åŠŸèƒ½çš„ç•Œé¢ç»„ä»¶å˜å¾—å®¹æ˜“ã€‚è¿™å°†åŠ å¿«è¿™ä¸ªæ¼”ç¤ºçš„å¼€å‘è¿‡ç¨‹ã€‚

## åˆ›å»ºå¯é‡ç”¨ç»„ä»¶

åœ¨`components/`ç›®å½•ä¸‹åˆ›å»ºä¸¤ä¸ªåä¸º`FormButton.js`å’Œ`FormInput.js`çš„æ–°æ–‡ä»¶ã€‚è¿™ä¸¤ä¸ªç»„ä»¶éƒ½æ˜¯è¡¨ç¤ºæ€§çš„ï¼Œå¯ä»¥åœ¨å±å¹•ç»„ä»¶ä¸­é‡ç”¨ã€‚æ‰“å¼€`FormButton.js`æ–‡ä»¶ï¼Œå¯¼å…¥`Button`ç»„ä»¶`react-native-elements`åº“ã€‚

å®ƒæ˜¯ä¸€ä¸ªå¯è§¦æ‘¸çš„å…ƒç´ ï¼Œå…è®¸ç”¨æˆ·ä¸è®¾å¤‡çš„å±å¹•è¿›è¡Œäº¤äº’å¹¶æ‰§è¡Œä¸‹ä¸€ä¸ªæ“ä½œã€‚è¯¥è‡ªå®šä¹‰ç»„ä»¶å°†æ¥æ”¶ç”¨äºæ ·å¼åŠå…¶é£æ ¼çš„é“å…·ã€‚ç»„ä»¶åº“`react-native-elements`æœ‰ä¸åŒçš„æ–¹å¼[æ ·å¼ä¸€ä¸ªæŒ‰é’®](https://react-native-training.github.io/react-native-elements/docs/button.html#buttonstyle)ã€‚

```
//FormButton.js
import React from 'react'
import { Button } from 'react-native-elements'

const FormButton = ({ title, buttonType, buttonColor, ...rest }) => (
  <Button
    {...rest}
    type={buttonType}
    title={title}
    buttonStyle={{ borderColor: buttonColor, borderRadius: 20 }}
    titleStyle={{ color: buttonColor }}
  /> )

export default FormButton 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ¥ä¸‹æ¥ï¼Œæ‰“å¼€`FormInput.js`æ–‡ä»¶ã€‚åŒæ ·ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªæ–‡æœ¬è¾“å…¥å­—æ®µçš„è‡ªå®šä¹‰ç»„ä»¶ã€‚ä»`react-native-elements`ä¸­å¯¼å…¥ [`Input`](https://react-native-training.github.io/react-native-elements/docs/input.html#docsNav) å…ƒç´ ã€‚å®ƒå…è®¸ç”¨æˆ·åœ¨è¡¨å• UI ä¸­è¾“å…¥æ–‡æœ¬ã€‚å®ƒä¹Ÿæ¥æ”¶é“å…·ï¼Œå› ä¸ºä½¿ç”¨ Expoï¼Œ`vector-icons`å¯ä»¥è¢«å¯¼å…¥ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨å®‰è£…ç¬¬ä¸‰æ–¹ä¾èµ–é¡¹ã€‚

æœ€åï¼Œæ³¨æ„å‰©ä½™çš„é“å…·æ˜¯å¦‚ä½•ä½¿ç”¨ rest æ“ä½œç¬¦ä¼ é€’ç»™å¯¹è±¡çš„ã€‚è¿™ä¹Ÿè¢«ç§°ä¸º [rest å‚æ•°è¯­æ³•](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters)ã€‚ç¡®ä¿é“å…·çš„é¡ºåºå’Œä¸‹é¢ä¸€æ ·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ`...rest`å‡ºç°åœ¨`FormInput`ç»„ä»¶çš„å…¶ä»–å±æ€§ä¹‹å‰ï¼Œå› ä¸ºå®ƒä¸èƒ½è¦†ç›–å…¶ä»–å±æ€§ã€‚

```
import React from 'react'
import { Input } from 'react-native-elements'
import { StyleSheet, View } from 'react-native'
import { Ionicons } from '@expo/vector-icons'

const FormInput = ({
  iconName,
  iconColor,
  returnKeyType,
  keyboardType,
  name,
  placeholder,
  value,
  ...rest
}) => (
  <View style={styles.inputContainer}>
    <Input
      {...rest}
      leftIcon={<Ionicons name={iconName} size={28} color={iconColor} />}
      leftIconContainerStyle={styles.iconStyle}
      placeholderTextColor="grey"
      name={name}
      value={value}
      placeholder={placeholder}
      style={styles.input}
    />
  </View> )

const styles = StyleSheet.create({
  inputContainer: {
    margin: 15
  },
  iconStyle: {
    marginRight: 10
  }
})

export default FormInput 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## åˆ›å»ºç™»å½•è¡¨å•

æ—¢ç„¶å®šåˆ¶ç»„ä»¶éƒ½å·²ç»è®¾ç½®å¥½äº†ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç™»å½•å±å¹•ç»„ä»¶ã€‚æ‰“å¼€`screens/Login.js`æ–‡ä»¶ï¼Œå¯¼å…¥æ‰€æœ‰éœ€è¦çš„è¯­å¥ã€‚ç„¶åï¼Œåœ¨ä¸æ”¹å˜æ‚¨ä¸‹è½½çš„ä¸Šä¸€ä¸ªåŸºæœ¬ repo çš„çŠ¶æ€æˆ–ä»»ä½•å¤„ç†å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œè®©æˆ‘ä»¬ç›´æ¥è¿›å…¥`Login`ç»„ä»¶çš„ render æ–¹æ³•ã€‚

```
import React from 'react'
import { StyleSheet, SafeAreaView, View } from 'react-native'
import { Button } from 'react-native-elements'
import FormInput from '../components/FormInput'
import FormButton from '../components/FormButton'

export default class Login extends React.Component {
  state = {
    email: '',
    password: ''
  }

  handleEmailChange = email => {
    this.setState({ email })
  }

  handlePasswordChange = password => {
    this.setState({ password })
  }

  onLogin = async () => {
    const { email, password } = this.state
    try {
      if (email.length > 0 && password.length > 0) {
        this.props.navigation.navigate('App')
      }
    } catch (error) {
      alert(error)
    }
  }

  goToSignup = () => this.props.navigation.navigate('Signup')
  render() {
    const { email, password } = this.state

    return (
      <SafeAreaView style={styles.container}>
        <FormInput
          name="email"
          value={email}
          placeholder="Enter email"
          autoCapitalize="none"
          onChangeText={this.handleEmailChange}
          iconName="ios-mail"
          iconColor="#2C384A"
        />
        <FormInput
          name="password"
          value={password}
          placeholder="Enter password"
          secureTextEntry
          onChangeText={this.handlePasswordChange}
          iconName="ios-lock"
          iconColor="#2C384A"
        />
        <View style={styles.buttonContainer}>
          <FormButton
            buttonType="outline"
            onPress={this.handleOnLogin}
            title="LOGIN"
            buttonColor="#039BE5"
          />
        </View>
        <Button
          title="Don't have an account? Sign Up"
          onPress={this.goToSignup}
          titleStyle={{
            color: '#F57C00'
          }}
          type="clear"
        />
      </SafeAreaView>
    )
  }
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#fff'
  },
  buttonContainer: {
    margin: 25
  }
}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ³¨æ„ï¼Œåœ¨`SafeAreaView`ä¸­æœ‰ä¸¤ä¸ª`FormInput`å­—æ®µå’Œä¸¤ä¸ªæŒ‰é’®ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯ä¹‹å‰åˆ›å»ºçš„è‡ªå®šä¹‰æŒ‰é’®ã€‚è¾“å…¥å­—æ®µä¸Šçš„å±æ€§ï¼Œå¦‚`secureTextEntry`å’Œ`autoCapitalize`ï¼Œå¯¹äºæ¯ä¸ªè¾“å…¥å­—æ®µéƒ½æ˜¯å”¯ä¸€çš„ã€‚å› æ­¤ï¼Œè¿™å°±æ˜¯`rest`å‚æ•°è¯­æ³•æ´¾ä¸Šç”¨åœºçš„åœ°æ–¹ã€‚å¦å¤–ï¼Œè¯·æ³¨æ„è¿™ä¸¤ä¸ªæŒ‰é’®çš„ç±»å‹å°†å¦‚ä½•åœ¨ä¸‹é¢çš„è¾“å‡ºä¸­äº§ç”Ÿ UI å·®å¼‚ã€‚

[![1](img/5768ba56a796ebcfee04fa88c790d170.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--DYhNUHNZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2AK-r4nW6kke_tsxLgp_BvKA.png)

## å°† Formik æ·»åŠ åˆ°ç™»å½•è¡¨å•

Formik æ˜¯ä¸€ä¸ªå°å‹çš„åº“ï¼Œå®ƒå¸®åŠ©è¡¨å•åœ¨ React å’Œ React Native ä¸­è¿›è¡Œç»„ç»‡ï¼ŒåŒ…æ‹¬ä»¥ä¸‹å†…å®¹:

*   å®ƒè·Ÿè¸ªè¡¨å•çš„çŠ¶æ€
*   é€šè¿‡å¯é‡ç”¨çš„æ–¹æ³•å’Œå¤„ç†ç¨‹åº(*å¦‚`handleChange`ã€`handleBlur`å’Œ`handleSubmit`ã€*)å¤„ç†è¡¨å•æäº¤
*   å¤„ç†ç°æˆçš„éªŒè¯å’Œé”™è¯¯æ¶ˆæ¯

æœ‰æ—¶å¾ˆéš¾ç®¡ç†å’Œå®ç°ä»¥ä¸Šå‡ ç‚¹ã€‚ä½¿ç”¨ Formikï¼Œæ‚¨å¯ä»¥ç†è§£è¡¨å•ä¸­åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Œå¹¶ç¼–å†™æ›´å°‘çš„ä»£ç è¡Œã€‚ç”±[è´¾é‡Œå¾·Â·å¸•å°”é»˜](https://twitter.com/jaredpalmer)åˆ›å»ºçš„å®ƒæœ‰ä¸€ä¸ªå¾ˆæ£’çš„ [API](https://jaredpalmer.com/formik/docs/overview) å¯ä»¥å‚è€ƒã€‚

é¦–å…ˆï¼Œæ‰“å¼€`Login.js`æ–‡ä»¶å¹¶å¯¼å…¥åº“ã€‚

```
//Login.js

// ... with other import statements
import { Formik } from 'formik' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ¥ä¸‹æ¥ï¼Œåœ¨`SafeAreaView`ä¸­ä½¿ç”¨`Formik`ä½œä¸ºåŒ…è£…å…ƒç´ ã€‚å®ƒå¸¦æœ‰ä¸åŒçš„é“å…·æ¥å¤„ç†è¡¨å•ï¼Œå¦‚`initialValues`å’Œ`onSubmit`å¤„ç†ç¨‹åºæ–¹æ³•ã€‚`initialValues`æ¥å—åŒ…å«è¡¨å•å€¼çš„å¯¹è±¡ã€‚åœ¨å½“å‰è¡¨å•çš„æƒ…å†µä¸‹ï¼Œè¿™äº›å€¼å°†æ˜¯`email`å’Œ`password`ã€‚`onSubmit`æ–¹æ³•æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†è¿™äº›`values`ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°æ¥å¤„ç†è¡¨å•æäº¤ã€‚

æœ€åï¼ŒFormik ä¸­ä½¿ç”¨çš„ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯ render æ–¹æ³•æœ¬èº«ã€‚å®ƒéµå¾ª[æ¸²æŸ“é“å…·æ¨¡å¼](https://reactpatterns.com/#render-prop)ã€‚çœ‹çœ‹ä¸‹é¢çš„ç™»å½•ç»„ä»¶ã€‚

```
export default class Login extends React.Component {
  goToSignup = () => this.props.navigation.navigate('Signup')
  render() {
    return (
      <SafeAreaView style={styles.container}>
        <Formik
          initialValues={{ email: '', password: '' }}
          onSubmit={values => {}}
        >
          {formikProps => (
            <Fragment>
              <FormInput
                name="email"
                value={values.email}
                onChangeText={formikProps.handleChange('email')}
                placeholder="Enter email"
                autoCapitalize="none"
                iconName="ios-mail"
                iconColor="#2C384A"
              />
              <FormInput
                name="password"
                value={values.password}
                onChangeText={formikProps.handleChange('password')}
                placeholder="Enter password"
                secureTextEntry
                iconName="ios-lock"
                iconColor="#2C384A"
              />
              <View style={styles.buttonContainer}>
                <FormButton
                  buttonType="outline"
                  onPress={formikProps.handleSubmit}
                  title="LOGIN"
                  buttonColor="#039BE5"
                />
              </View>
            </Fragment>
          )}
        </Formik>
        <Button
          title="Don't have an account? Sign Up"
          onPress={this.goToSignup}
          titleStyle={{
            color: '#F57C00'
          }}
          type="clear"
        />
      </SafeAreaView>
    )
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸Šè¿°æ¯ä¸ªè¾“å…¥å­—æ®µä¸­çš„`value`å±æ€§è¢«èµ‹äºˆæ¥è‡ª`formikProps`çš„åˆå§‹å€¼ã€‚å®ƒé€šè¿‡æ¯ä¸ª render å‡½æ•°ä¼ é€’ï¼Œè¯¥å‡½æ•°æä¾›å¯¹è¡¨å•çŠ¶æ€çš„è®¿é—®ï¼Œå¦‚`initialValues`ã€‚æ‚¨å¿…é¡»åƒåœ¨ç±»ç»„ä»¶çš„çŠ¶æ€ä¸­ä¸€æ ·å®šä¹‰è¿™äº›å€¼ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜æä¾›äº†å¤„ç†æ¯ä¸ªè¾“å…¥å­—æ®µçš„æ›´æ”¹(å½“ç”¨æˆ·é”®å…¥ç”µå­é‚®ä»¶æˆ–å¯†ç æ—¶)çš„æƒé™å’Œæäº¤è¡¨å•çš„æ–¹æ³•:`handleSubmit`ã€‚

æ‚¨å¯ä»¥å°†å½“å‰ç»„ä»¶é‡æ„ä¸ºä»¥ä¸‹å†…å®¹:

```
{({ handleChange, values, handleSubmit }) => (
    <Fragment>
      <FormInput
        name='email'
        value={values.email}
        onChangeText={handleChange('email')}
        placeholder='Enter email'
        autoCapitalize='none'
        iconName='ios-mail'
        iconColor='#2C384A'
      />
      <FormInput
        name='password'
        value={values.password}
        onChangeText={handleChange('password')}
        placeholder='Enter password'
        secureTextEntry
        iconName='ios-lock'
        iconColor='#2C384A'
      />
      <View style={styles.buttonContainer}>
        <FormButton
          buttonType='outline'
          onPress={handleSubmit}
          title='LOGIN'
          buttonColor='#039BE5'
        />
      </View>
    </Fragment>
  )
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å›å¤´çœ‹æ¨¡æ‹Ÿå™¨ï¼Œä½ ä¼šæ³¨æ„åˆ°ç™»å½•è¡¨å•çœ‹èµ·æ¥æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ç°åœ¨ç‚¹å‡»ç™»å½•æŒ‰é’®ï¼Œä»€ä¹ˆä¹Ÿæ²¡æœ‰å‘ç”Ÿã€‚è®©æˆ‘ä»¬è®©å®ƒå‘æŒ¥ä½œç”¨ã€‚`onSubmit` prop å¤„ç†è¡¨å•æäº¤ã€‚ç°åœ¨ï¼Œä¸ºäº†çœ‹åˆ°ä¸¤ä¸ªè¾“å…¥å­—æ®µçš„å€¼éƒ½è¢«è®°å½•ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ª`alert`æ–¹æ³•ã€‚

```
onSubmit={values => { alert(JSON.stringify(values))}} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿”å›ç™»å½•å±å¹•ï¼Œå¡«å†™ä¸¤ä¸ªè¾“å…¥å­—æ®µï¼Œç„¶åå•å‡»ç™»å½•æŒ‰é’®ã€‚æ‚¨å°†çœ‹åˆ°ä¸€ä¸ªå¯¹è¯æ¡†ï¼Œæ˜¾ç¤º`email`å’Œ`password`çš„å€¼ã€‚

[![2](img/cb0e1121345d853e3cc55602331dd862.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--cK-Bfm1n--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2Au5tfp9wdSzcC1C_yXVOpXA.gif)

## å¤„ç†è¡¨å•æäº¤

ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ·»åŠ æ¯å½“ç”¨æˆ·å•å‡»ç™»å½•æŒ‰é’®æ—¶è¿›å…¥åº”ç”¨ç¨‹åºçš„é€»è¾‘ï¼Œè€Œä¸æ˜¯åœ¨å¯¹è¯æ¡†ä¸­æ˜¾ç¤ºä»–ä»¬è¾“å…¥çš„å€¼ã€‚é¦–å…ˆï¼Œåœ¨`Formik`å…ƒç´ çš„`onSubmit`å±æ€§ä¸Šæ·»åŠ ä¸€ä¸ªæ–¹æ³•ã€‚

```
onSubmit={values => {this.handleSubmit(values)}} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ¥ä¸‹æ¥ï¼Œåœ¨`render`å‡½æ•°ä¹‹å‰å®šä¹‰`handleSubmit`æ–¹æ³•ã€‚

```
handleSubmit = values => {
  if (values.email.length > 0 && values.password.length > 0) {
    this.props.navigation.navigate('App')
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é€»è¾‘ä»ç„¶å’Œæ‚¨å¼€å§‹æ„å»ºè¿™ä¸ªç™»å½•è¡¨å•æ—¶ä¸€æ ·ã€‚åªæœ‰å½“`email`å’Œ`password`å­—æ®µä¸ä¸ºç©ºæ—¶ï¼Œç”¨æˆ·æ‰èƒ½ç™»å½•åº”ç”¨ç¨‹åºã€‚å”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸¤ä¸ªå­—æ®µçš„å€¼éƒ½æ˜¯ä»ç»„ä»¶çš„åˆå§‹çŠ¶æ€å¯¼å‡ºçš„ã€‚

[![3](img/af70aeedc84de79e8db633d4321180e5.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--SUq6V1Sc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2AV7tcVyD4usE5LHxmBjWYfQ.gif)

è‡ªå®šä¹‰è¾“å…¥ç»„ä»¶ä¸éœ€è¦å•ç‹¬ä¼ é€’`value`å±æ€§ã€‚

```
//FormInput.js
const FormInput = ({
  iconName,
  iconColor,
  returnKeyType,
  keyboardType,
  name,
  placeholder,
  ...rest
}) => (
  <View style={styles.inputContainer}>
    <Input
      {...rest}
      leftIcon={<Ionicons name={iconName} size={28} color={iconColor} />}
      leftIconContainerStyle={styles.iconStyle}
      placeholderTextColor="grey"
      name={name}
      placeholder={placeholder}
      style={styles.input}
    />
  </View> ) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## ç”¨ yup éªŒè¯è¡¨å•

åœ¨ React æˆ– React æœ¬æœºåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ Formik æ—¶ï¼Œ [`yup`](https://github.com/jquense/yup) åº“æœ‰åŠ©äºç®¡ç†å¤æ‚çš„éªŒè¯ã€‚Formik æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥è¡¨å•éªŒè¯ã€‚å®ƒæ”¯æŒæ¥è‡ª yup çš„åŸºäºæ¨¡å¼çš„è¡¨å•çº§éªŒè¯ã€‚

ç”¨å…¶ä»–å¯¼å…¥è¯­å¥ä»`yup`åº“ä¸­å¯¼å…¥æ‰€æœ‰å†…å®¹ã€‚

```
import * as yup from 'yup' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä½ ç†Ÿæ‚‰ Nodejs å¼€å‘ï¼Œä½ ä¼šå‘ç°`yup`åº“ä¸å¦ä¸€ä¸ªåä¸º`joi`çš„éªŒè¯åº“éå¸¸ç›¸ä¼¼ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬åœ¨åä¸º`validationSchema`çš„`Login`ç±»ç»„ä»¶ä¹‹å‰å®šä¹‰ä¸€ä¸ªæ–°å¯¹è±¡ã€‚

å› ä¸º`initialValues`æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½ å¿…é¡»æŒ‡å®š`yup.object()`å¹¶å®šä¹‰ä¸€ä¸ªå¯¹è±¡çš„`shape`ã€‚æ³¨æ„ï¼Œåœ¨`shape`ä¸­å®šä¹‰è¾“å…¥å­—æ®µæ—¶ï¼Œç¡®ä¿å®ƒä»¬çš„åç§°ä¸`initialValues`ä¸­æè¿°çš„åç§°ä¸€è‡´ã€‚æ¥ä¸‹æ¥ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­çš„æ¯ä¸ªå­—æ®µéƒ½ç”± [yup API](https://github.com/jquense/yup#api) æä¾›çš„ä¸€ç³»åˆ—éªŒè¯æ–¹æ³•æ”¯æŒã€‚å› ä¸ºæ–¹æ³•`onChangeText`è¿”å›å€¼æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥`email`å’Œ`password`çš„ç±»å‹éƒ½æ˜¯å­—ç¬¦ä¸²ã€‚

```
const validationSchema = Yup.object().shape({
  email: Yup.string()
    .label('Email')
    .email('Enter a valid email')
    .required('Please enter a registered email'),
  password: Yup.string()
    .label('Password')
    .required()
    .min(4, 'Password must have at least 4 characters ')
}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½¿ç”¨åƒ Yup è¿™æ ·çš„åº“å¯ä»¥èŠ‚çœå¤§é‡æ—¶é—´ï¼Œå°¤å…¶æ˜¯å½“æ‚¨ä¸éœ€è¦å®šä¹‰è‡ªå®šä¹‰éªŒè¯æ–¹æ³•æ¥æ£€æŸ¥è¾“å…¥å­—æ®µæ—¶ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œä½¿ç”¨ [`.email()`](https://github.com/jquense/yup#stringemailmessage-string--function-schema) è‡ªåŠ¨åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯å®šä¹‰æ­£åˆ™è¡¨è¾¾å¼æ¥æ£€æŸ¥ç”µå­é‚®ä»¶è¾“å…¥å­—æ®µçš„æœ‰æ•ˆæ€§ã€‚

æ­¤å¤–ï¼Œå¯¹äºæ¯ä¸€ä¸ªæœ‰æ•ˆçš„æ–¹æ³•ï¼Œæ‚¨å¯ä»¥è¾“å…¥ä¸€ä¸ªè‡ªå®šä¹‰çš„è¿”å›æ¶ˆæ¯ï¼Œåœ¨å‡ºç°é”™è¯¯æ—¶æ˜¾ç¤ºå‡ºæ¥ã€‚çœ‹çœ‹è¿™ä¸ªã€‚required()å†æ¬¡å‡ºç°åœ¨ä¸Šè¿°ä»£ç ç‰‡æ®µçš„ç”µå­é‚®ä»¶ä¸­ã€‚å®ƒæŒ‡å‡ºï¼Œå½“æ²¡æœ‰æä¾›ç”µå­é‚®ä»¶æ—¶ï¼Œè¿™æ¡ç”¨å¼•å·å¼•èµ·æ¥çš„æ¶ˆæ¯å°†æ˜¾ç¤ºä¸ºé”™è¯¯æ¶ˆæ¯ã€‚åŒæ ·ï¼Œå¯¹äºå¯†ç ï¼Œå½“è¾“å…¥å­—æ®µçš„é•¿åº¦å°‘äºå››ä¸ªå­—ç¬¦æ—¶ï¼Œå®ƒä¼šæ˜¾ç¤ºä¸€æ¡é”™è¯¯æ¶ˆæ¯ã€‚æ·»åŠ  validationSchema çš„æœ€åä¸€æ­¥æ˜¯åœ¨ Formik å…ƒç´ ä¸­æ·»åŠ ä¸€ä¸ªåŒåçš„ propã€‚

```
<Formik
  initialValues={{ email: '', password: '' }}
  onSubmit={values => {
    this.handleSubmit(values)
  }}
  // new line
  validationSchema={validationSchema}>
  {*/ Rest of the code /*}
</Formik> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ¥ä¸‹æ¥ï¼Œ`formikProps`è¿˜æä¾›äº†`errors`æ¥è®¿é—®é”™è¯¯æ¶ˆæ¯ã€‚

```
// pass errors below
{({ handleChange, values, handleSubmit, errors }) => ( 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨æ¯ä¸ªè¾“å…¥å­—æ®µä¹‹åï¼Œæ‚¨å¿…é¡»æ·»åŠ ä¸€ä¸ª`Text`å…ƒç´ æ¥æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚ä»`react-native`å¯¼å…¥ï¼Œç„¶ååœ¨æ¯ä¸ªè¾“å…¥å­—æ®µåæ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚

```
<FormInput
  name='email'
  value={values.email}
  onChangeText={handleChange('email')}
  placeholder='Enter email'
  autoCapitalize='none'
  iconName='ios-mail'
  iconColor='#2C384A'
/>
<Text style={{ color: 'red' }}>{errors.email}</Text> <FormInput
  name='password'
  value={values.password}
  onChangeText={handleChange('password')}
  placeholder='Enter password'
  secureTextEntry
  iconName='ios-lock'
  iconColor='#2C384A'
  />
<Text style={{ color: 'red' }}>{errors.password}</Text> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°è¯•å•å‡»ç™»å½•æŒ‰é’®ï¼Œè€Œä¸åœ¨ä»»ä½•è¾“å…¥å­—æ®µä¸­è¾“å…¥è¯¦ç»†ä¿¡æ¯ã€‚

[![4](img/28e13ae7be3a07a2b3ac7e7e8fc505c0.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--MdmBka_1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2Aexpc7TVHGfERe5bAzqRQyg.gif)

è¯·æ³¨æ„ï¼Œ`email`å­—æ®µçš„è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯å’Œ`password`çš„é»˜è®¤æ¶ˆæ¯æ˜¯å¦‚ä½•æ˜¾ç¤ºçš„ã€‚ç°åœ¨ï¼Œå°è¯•åœ¨ç”µå­é‚®ä»¶ä¸­è¾“å…¥ä¸€ä¸ªæ— æ•ˆå­—ç¬¦ä¸²å’Œä¸€ä¸ªå°‘äºå››ä¸ªå­—ç¬¦çš„å¯†ç ï¼Œç„¶åæäº¤ç™»å½•æŒ‰é’®ã€‚

[![5](img/e07adb93ca9501e071b37062c9e81b16.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--xGwIRFwH--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2AZwUTsbRc712QZ5EKAHfJ5A.gif)

è¯·æ³¨æ„ï¼Œé”™è¯¯æ¶ˆæ¯å‘ç”Ÿäº†å˜åŒ–ï¼Œå¹¶ä¸”æ˜¾ç¤ºäº†æ­£ç¡®çš„é”™è¯¯æ¶ˆæ¯ã€‚

## é‡æ„é”™è¯¯ä¿¡æ¯

åœ¨æœ¬èŠ‚ä¸­ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯é‡ç”¨çš„è¡¨ç¤ºç»„ä»¶æ¥æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚æ‰“å¼€`components/ErrorMessage.js`æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚

```
import React from 'react'
import { View, Text, StyleSheet } from 'react-native'

const ErrorMessage = ({ errorValue }) => (
  <View style={styles.container}>
    <Text style={styles.errorText}>{errorValue}</Text>
  </View> )

const styles = StyleSheet.create({
  container: {
    marginLeft: 25
  },
  errorText: {
    color: 'red'
  }
})

export default ErrorMessage 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ¥ä¸‹æ¥ï¼Œå›åˆ°`Login.js`æ–‡ä»¶ï¼Œå¯¼å…¥è¿™ä¸ªç»„ä»¶ã€‚åœ¨æ¯ä¸ªæœ‰`Text`å…ƒç´ çš„è¾“å…¥å­—æ®µä¸‹é¢ï¼Œç”¨æ–°åˆ›å»ºçš„è‡ªå®šä¹‰`ErrorMessage`æ›¿æ¢å®ƒã€‚

```
<FormInput
  name='email'
  value={values.email}
  onChangeText={handleChange('email')}
  placeholder='Enter email'
  autoCapitalize='none'
  iconName='ios-mail'
  iconColor='#2C384A'
/>
<ErrorMessage errorValue={errors.email} /> <FormInput
  name='password'
  value={values.password}
  onChangeText={handleChange('password')}
  placeholder='Enter password'
  secureTextEntry
  iconName='ios-lock'
  iconColor='#2C384A'
  />
<ErrorMessage errorValue={errors.password} /> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é”™è¯¯æ¶ˆæ¯ç°åœ¨ä¸è¾“å…¥å­—æ®µæ­£ç¡®å¯¹é½ã€‚

[![6](img/4ad90c94b5c9d862a1210a4f351a4392.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--QYJ-qD4P--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2AKwAE5I4ur3B8qaktUhT40Q.png)

## è¡¨å•æ— æ•ˆæ—¶ç¦ç”¨æŒ‰é’®

Formik æä¾›äº†ä¸€ç§æ›´å¿«çš„æ–¹æ³•æ¥ç¦ç”¨ submit æŒ‰é’®ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•è¾“å…¥å­—æ®µæ˜¾ç¤ºé”™è¯¯ã€‚è¿™æ˜¯é€šè¿‡`isValid`çš„å±æ€§å€¼å®Œæˆçš„ï¼Œå½“æ²¡æœ‰é”™è¯¯æ—¶ï¼Œè¯¥å±æ€§å€¼è¿”å›`true`ã€‚`disabled`å±æ€§åŠ åœ¨`FormButton`ä¸Šï¼Œè¿™å°±æ˜¯`react-native-elements`å¤§æ”¾å¼‚å½©çš„åœ°æ–¹ã€‚

```
 {({ handleChange, values, handleSubmit, errors, isValid, isSubmitting }) => (
            <Fragment>
              {*/ Res of the code remains same /*}
              <View style={styles.buttonContainer}>
                <FormButton
                  buttonType='outline'
                  onPress={handleSubmit}
                  title='LOGIN'
                  buttonColor='#039BE5'
                  disabled={!isValid}
                />
              </View>
            </Fragment>
          )} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯·æ³¨æ„ï¼ŒæŒ‰é’®çš„é¢œè‰²å˜æˆäº†ç°è‰²ï¼Œå¹¶ä¸”æ ¹æœ¬ä¸å¯ç‚¹å‡»ã€‚

[![7](img/0198a9dd6394042783ca02a13fd282a8.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--jt-_QrkK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2AQy20v8rNAxUXAfTiGuEF3Q.png)

ä½†æ˜¯åœ¨è¾“å…¥å­—æ®µä¸­è¾“å…¥å€¼ï¼Œå®ƒåˆæ´»äº†è¿‡æ¥ã€‚

[![8](img/1dc801e63f387224f7a8218438fd4e90.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--V2R3ResW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2A5dqPrzK-Kt1jEIZC1GE_UA.png)

## ä»…åœ¨è§¦æ‘¸ç‰¹å®šå­—æ®µæ—¶æ˜¾ç¤ºé”™è¯¯

å¦‚æœæ‚¨æ³¨æ„åˆ°è¡¨å•çš„å½“å‰çŠ¶æ€æ˜¾ç¤ºä¸¤ä¸ªå­—æ®µéƒ½æœ‰é”™è¯¯ï¼Œå³ä½¿ç”¨æˆ·æ­£åœ¨è¾“å…¥ç¬¬ä¸€ä¸ªå­—æ®µï¼Œè¿˜æ²¡æœ‰çœ‹åˆ°ç¬¬äºŒä¸ªå­—æ®µéœ€è¦ä»€ä¹ˆã€‚

[![9](img/cf9e033c6a0b417b8e776a52058633ae.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--MMZ2UGyE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2AC0h4mvUsoWFROF2g46g27A.gif)

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨æ¥è‡ª`formikProps`çš„ä¸¤ä¸ª`touched`å’Œ`handleBlur`ã€‚

```
{({
  handleChange,
  values,
  handleSubmit,
  errors,
  isValid,
  isSubmitting
  touched,
  handleBlur,
}) => () 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`handleBlur`ä½œä¸ºå€¼ä¼ é€’ç»™è¾“å…¥å­—æ®µä¸Šçš„`onBlur`å±æ€§ã€‚è¿™ä¸ªé“å…·ç”¨äºè·Ÿè¸ªç”¨æˆ·æ˜¯å¦è§¦æ‘¸äº†è¾“å…¥å­—æ®µâ€”â€”`touched`è·Ÿè¸ªç”¨æˆ·è§¦æ‘¸äº†å“ªäº›å­—æ®µã€‚ä½¿ç”¨ä¸¤è€…çš„ç»„åˆï¼Œæ‚¨å¯ä»¥è·å¾—ä»¥ä¸‹è¡Œä¸ºã€‚

[![10](img/2da0604732dc6658e1a6e6242621f8e5.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--96tOJnHX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2ARFD3xPeXNZrcRmBfgYG6bA.gif)

ä¸‹é¢æ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ä»£ç ç‰‡æ®µã€‚åœ¨æ¯ä¸ªè¾“å…¥å­—æ®µä¸Šï¼Œæ·»åŠ å¸¦æœ‰ä¼ é€’ç»™`handleBlur`æ–¹æ³•çš„ç›¸åº”å€¼çš„`onBlur`å±æ€§ã€‚

```
// on email
onBlur={handleBlur('email')}

// on password
onBlur={handleBlur('password')} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ¥ä¸‹æ¥ï¼Œå½“æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯æ—¶ï¼Œå¯¹ä¸¤ä¸ªå­—æ®µè¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ã€‚

```
// for email
<ErrorMessage errorValue={touched.email && errors.email} /> 
// for password
<ErrorMessage errorValue={touched.password && errors.password} /> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## æäº¤æ—¶åœ¨ç™»å½•æŒ‰é’®ä¸Šæ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨

æ¥ä¸‹æ¥ï¼Œåœ¨æäº¤ç™»å½•å‡­è¯æ—¶ï¼Œæ‚¨ä¸å¸Œæœ›ç”¨æˆ·æŒ‰ä¸¤æ¬¡æŒ‰é’®ã€‚`formikProps`å¯¹æ­¤ä¹Ÿæœ‰è§£å†³æ–¹æ¡ˆã€‚ä½¿ç”¨`isSubmitting`æ‚¨å¯ä»¥è·Ÿè¸ªè¡¨å•ä½•æ—¶å¤„äºæäº¤é˜¶æ®µã€‚é€šå¸¸ï¼Œåœ¨å®æ—¶åº”ç”¨ä¸­ï¼Œè¿™ä¸ªæäº¤é˜¶æ®µå°†ä¾èµ–äºå¯¹æœåŠ¡å™¨çš„å¼‚æ­¥ç½‘ç»œè°ƒç”¨ã€‚åœ¨`disabled`é“å…·ä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª OR æ¡ä»¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

```
disabled={!isValid || isSubmitting} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸ºäº†æ¨¡æ‹Ÿ API è°ƒç”¨ï¼Œå‘`handleSubmit`æ–¹æ³•æ·»åŠ ä¸€ä¸ª`setTimeout`å‡½æ•°ã€‚

```
handleSubmit = values => {
  if (values.email.length > 0 && values.password.length > 0) {
    setTimeout(() => {
      this.props.navigation.navigate('App')
    }, 3000)
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨è§‚å¯ŸæŒ‰é’®è¢«è§¦æ‘¸æ—¶æ˜¯å¦‚ä½•è¢«ç¦ç”¨çš„ã€‚

[![11](img/4af31d6a7c6c492241eebf91befa9a48.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--t7z8BLQm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2AkIE7F1iAyhq7UGQGajeDnw.gif)

ä½ å¯ä»¥åœ¨æŒ‰é’®ä¸Šæ·»åŠ ä¸€ä¸ªè£…è½½æŒ‡ç¤ºå™¨ï¼Œè¿™è¦æ„Ÿè°¢`react-native-elements`ä¸­æä¾›çš„åŒåé“å…·ã€‚

```
loading = { isSubmitting } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

[![12](img/0bf3b2585b4e80abbcb1df47997415bb.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Oc45Xi3s--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2ABTJ51fiAMYUwO91C3n3xWQ.gif)

## å¯¹ä½ çš„æŒ‘æˆ˜ğŸ’ª

ä½¿ç”¨ä»æœ¬æ•™ç¨‹ä¸­è·å¾—çš„çŸ¥è¯†ï¼Œè®©å®ƒå‘æŒ¥ä½œç”¨ï¼Œå¹¶ä¸ºå››ä¸ªè¾“å…¥å­—æ®µæ„å»ºä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„æ³¨å†Œè¡¨å•:

*   ç”¨æˆ·çš„å§“å
*   ç”µå­é‚®ä»¶
*   å¯†ç 
*   ç¡®è®¤å¯†ç 

è¿™é‡Œçš„æŒ‘æˆ˜æ˜¯ç¡®ä¿ä¸¤ä¸ªå­—æ®µ:`password`å’Œ`confirmPassword`åŒ¹é…ï¼Œå¦‚æœä¸åŒ¹é…ï¼Œåˆ™æ˜¾ç¤ºé€‚å½“çš„é”™è¯¯æ¶ˆæ¯ã€‚è¦æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œè¯·å…³æ³¨ä¸‹ä¸€ç¯‡æ–‡ç« ï¼Œåœ¨é‚£é‡Œæ‚¨å°†è·å¾—è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆä»¥åŠæ›´å¤šçš„åŠŸèƒ½ï¼Œä¾‹å¦‚å½“è¾“å…¥å­—æ®µä¸æ˜¯å­—ç¬¦ä¸²ç±»å‹æ—¶å¤„ç†é”™è¯¯ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜:

[![13](img/5d7aab00e06b20887fb5ef3750d22ef4.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--REq0KGof--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://cdn-images-1.medium.com/max/800/1%2ArzA-V867nUz7llMUWP26Yw.gif)

## ç»“è®º

ç¥è´ºä½ ğŸ‰

æ‚¨åˆšåˆšå­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨ Formik å’Œ Yup åœ¨ React Native ä¸­åˆ›å»ºã€å¤„ç†å’ŒéªŒè¯è¡¨å•ã€‚æˆ‘å¸Œæœ›åœ¨ä½ çš„äº§å“ä¸­ React Native appsï¼Œæœ¬æ•™ç¨‹ä¸­ä½¿ç”¨çš„ä¸€äº›å°æŠ€å·§ï¼Œå¦‚å¤„ç†æŒ‰é’®å’Œä½¿ç”¨åŠ è½½æŒ‡ç¤ºå™¨æœ‰æ‰€å¸®åŠ©ã€‚ä½ å¯ä»¥åœ¨ [this Github repo release](https://github.com/amandeepmittal/expo-firebase/releases/tag/0.2.0) æ‰¾åˆ°æœ¬æ•™ç¨‹çš„ä»£ç ä»¥åŠå®Œæˆçš„æŒ‘æˆ˜ã€‚

**æ’°å†™æœ¬æ•™ç¨‹ä½¿ç”¨çš„é‡è¦èµ„æº**:

*   [T2`react-native-elements`](https://react-native-training.github.io/react-native-elements/docs/button)
*   [Formik å®˜æ–¹æ–‡æ¡£](https://jaredpalmer.com/formik/docs/guides/react-native)
*   [æ˜¯ API](https://github.com/jquense/yup#api)
*   [Bamlab æä¾›äº†å¸¦æœ‰`react-native-formik`çš„ç‰¹è®¾ç»„ä»¶ï¼Œè¿™æ ·ä½ å°±ä¸å¿…ä»å¤´å¼€å§‹ç¼–å†™ä¸€åˆ‡](https://github.com/bamlab/react-native-formik)

* * *

> [æœ€åˆå‘å¸ƒäºå¿ƒè·³](https://heartbeat.fritz.ai/build-and-validate-forms-in-react-native-using-formik-and-yup-6489e2dff6a2)

æˆ‘ç»å¸¸åœ¨ Nodejsã€Reactjs å’Œ React Native ä¸Šå†™ã€‚

ä½ å¯ä»¥è®¿é—®æˆ‘åœ¨ aman his . dev ä¸Šçš„åšå®¢ï¼Œæˆ–è€…ä½ å¯ä»¥è®¢é˜…[å‘¨åˆŠç®€è®¯](https://tinyletter.com/amanhimself)ï¼Œä½ ä¼šç›´æ¥åœ¨æ”¶ä»¶ç®±é‡Œæ”¶åˆ°æ‰€æœ‰æ–°å¸–å­å’Œå†…å®¹çš„æ›´æ–°ğŸ’Œã€‚