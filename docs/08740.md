# æ€ä¹ˆè·‘ã€‚Azure DevOps ç®¡é“ Windows/Ubuntu ä»£ç†ä¸Šçš„ NET Core Selenium UI æµ‹è¯•ï¼ŸğŸš€

> åŸæ–‡ï¼š<https://dev.to/swimburger/how-to-run-net-core-selenium-ui-tests-on-azure-devops-pipelines-windows-ubuntu-agents-3l18>

å‰ä¸€ç¯‡åšæ–‡è®¨è®ºäº†å¦‚ä½•ä½¿ç”¨ã€‚ç½‘èŠ¯ã€‚è¿™ç¯‡æ–‡ç« è®¨è®ºäº†å¦‚ä½•åœ¨ä¸¤ä¸ª Windows & Ubuntu ä»£ç†ä¸Šçš„ Azure DevOps ç®¡é“ä¸­è¿›è¡Œè¿™äº› UI æµ‹è¯•ã€‚ä½¿ç”¨è¿™ä¸ª [GitHub åº“](https://github.com/Swimburger/AzureDevOps_Selenium_DotNet)ï¼Œå®ƒåŒ…å«äº†è¿™ç¯‡æ–‡ç« ä¸­éœ€è¦çš„ UI æµ‹è¯•é¡¹ç›®ã€‚è¯¥ä»£ç å·²ç¨ä½œä¿®æ”¹ï¼Œä»¥åˆ©ç”¨. runsettings æ–‡ä»¶ã€‚

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä½ å°†å­¦åˆ°:

*   å¦‚ä½•åœ¨æŒç»­é›†æˆ(CI)æ„å»ºä¸­äº§ç”Ÿ UI æµ‹è¯•å·¥ä»¶
*   å¦‚ä½•ä½¿ç”¨ UI æµ‹è¯•å·¥ä»¶å°† UI æµ‹è¯•ä½œä¸ºè¿ç»­äº¤ä»˜(CD)ç®¡é“çš„ä¸€éƒ¨åˆ†æ¥è¿è¡Œ

ä½†æ˜¯åœ¨åŠ¨æ‰‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥è°ˆè°ˆ Azure ç®¡é“çš„ä¸¤ç§ä¸åŒä½¿ç”¨æ–¹å¼ã€‚

## ç»å…¸ Azure ç®¡é“ vs YAML Azure ç®¡é“

åœ¨å¼•å…¥ YAML ç®¡é“ä¹‹å‰ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨ç”¨æˆ·ç•Œé¢æ¥ç»„è£…æ„å»ºç®¡é“å’Œå‘å¸ƒç®¡é“ã€‚è¿™äº›ç®¡é“ä½¿ç”¨ JSON å­˜å‚¨åœ¨åå°ï¼Œæ‚¨å¯ä»¥å¯¼å‡ºå’Œå¯¼å…¥ã€‚è¿™ç°åœ¨è¢«ç§°ä¸ºâ€œç»å…¸â€Azure ç®¡é“ã€‚

å¤å…¸å’Œ YAML å„æœ‰åˆ©å¼Šã€‚

**ç»å…¸**:

*   æ›´å®¹æ˜“è¢«æ–°äººæ¥å—
*   ä½ å¯ä»¥å¿«é€Ÿè¿­ä»£
*   ç‰ˆæœ¬æ§åˆ¶å‘ç”Ÿåœ¨å¹•å
*   ä¸éœ€è¦æäº¤/æ¨é€è‡³æºä»£ç æ§åˆ¶
*   æ— éœ€å­¦ä¹ æ–°çš„é…ç½®è¯­è¨€
*   æ›´åŠ æˆç†Ÿ/åŠŸèƒ½æ›´åŠ ä¸°å¯Œ

**YAML** :

*   å°† yaml æ–‡ä»¶å­˜å‚¨ä¸ºæºä»£ç æ§åˆ¶çš„ä¸€éƒ¨åˆ†
*   å¼€æºé¡¹ç›®å¯ä»¥ä½¿ç”¨ yaml æ–‡ä»¶å…±äº«å®ƒä»¬çš„æ„å»º/å‘å¸ƒè¿‡ç¨‹
*   ä½¿ç”¨â€œç»Ÿä¸€ç®¡é“â€,æ‚¨å¯ä»¥åœ¨ä¸€ä¸ª yaml æ–‡ä»¶ä¸­æè¿°æ„å»ºå’Œå‘å¸ƒè¿‡ç¨‹
*   YAML çš„è§†è§‰ç•Œé¢æ„å»ºå¸¦æ¥äº†ç»å…¸çš„ç”¨æˆ·å‹å¥½çš„ç”¨æˆ·ç•Œé¢ï¼Œå¹¶å°†å…¶ä¸ YAML ç›¸ç»“åˆã€‚Releases UI è¿˜æ²¡æœ‰å¾ˆå¥½çš„ YAML æ”¯æŒã€‚

ç»å…¸æ˜¯æœ€å¯Œç‰¹è‰²çš„ï¼ŒYAML æ­£åœ¨æ…¢æ…¢èµ¶ä¸Šã€‚åœ¨è€ƒè™‘ YAML ä¹‹å‰ï¼Œé‡è¦çš„æ˜¯è¯„ä¼° YAML ç®¡é“æ˜¯å¦æ”¯æŒæ‰€æœ‰è¦æ±‚çš„åŠŸèƒ½ã€‚æœ¬å¸–å°†æŒ‡å¯¼æ‚¨åˆ›å»º YAML æ„å»ºç®¡é“ï¼Œä½†å°†ä½¿ç”¨ Classic å‘å¸ƒç®¡é“ï¼Œå› ä¸ºç›®å‰ YAML å¯¹å‘å¸ƒçš„æ”¯æŒè¿˜ä¸å¤Ÿå¼ºã€‚

å¹¸è¿çš„æ˜¯ï¼ŒYAML ç®¡é“è·¯çº¿å›¾ä¸Šæœ‰ä¸€äº›ç¼ºå¤±çš„åŠŸèƒ½ï¼Œä½ å¯ä»¥åœ¨ [MS Dev åšå®¢â€œAzure DevOps å¹´ç¬¬ä¸‰å­£åº¦è·¯çº¿å›¾æ›´æ–°â€](https://devblogs.microsoft.com/devops/azure-devops-roadmap-update-for-2019-q3/)ä¸Šé˜…è¯»ã€‚

è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯æ—¶å€™æ„å»ºæ‚¨çš„æ„å»ºç®¡é“äº†ã€‚

## ä¸º. NET æ ¸å¿ƒ Selenium æµ‹è¯•é¡¹ç›®åˆ›å»ºä¸€ä¸ªæŒç»­é›†æˆç®¡é“

å½“ä½¿ç”¨ YAML ç®¡é“æ—¶ï¼ŒAzure DevOps å°†è¯»å–æ‚¨çš„ YAML é…ç½®æ–‡ä»¶å¹¶æŒ‰ç…§è§„å®šæ‰§è¡Œæ­¥éª¤ã€‚è¦è®¾ç½®è¿™ä¸€ç‚¹ï¼Œæ‚¨é¦–å…ˆéœ€è¦åˆ›å»º yaml æ–‡ä»¶ï¼Œç„¶åå‘Šè¯‰ Azure DevOps åœ¨æ‚¨çš„å­˜å‚¨åº“ä¸­çš„ä½•å¤„å¯ä»¥æ‰¾åˆ°å®ƒã€‚

åœ¨æ‚¨çš„è§£å†³æ–¹æ¡ˆçš„æ ¹ç›®å½•ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹â€œazure-pipelines.ymlâ€æ–‡ä»¶ã€‚

```
# any commit to the master branch will trigger the CI build
trigger:
- master

# use a Windows agent with VS to build the .NET Core MSTest project
# you can replace this with Ubuntu too without changing the tasks
pool:
  name: Hosted Windows 2019 with VS2019

steps:
# install the required .NET Core SDK version
# only necessary if the agent doesn't already have the required SDK
- task: DotNetCoreInstaller@0
  displayName: 'Use  .NET  Core  sdk  2.2.301'
  inputs:
    version: 2.2.301

# restore Nuget packages/dependencies
- task: DotNetCoreCLI@2
  displayName: Restore
  inputs:
    command: restore
    projects: '**/Demo.SeleniumTests.csproj'

# publish the UI test project to the SeleliumTest subfolder in the Artifact Staging Directory
# optionally, you can add more steps to publish your own website alongside your SeleniumTests in another task
- task: DotNetCoreCLI@2
  displayName: Publish
  inputs:
    command: publish
    publishWebProjects: false
    projects: '**/Demo.SeleniumTests.csproj'
    arguments: '--configuration  Release  -o  $(build.artifactstagingdirectory)/SeleniumTests'
    zipAfterPublish: false
    modifyOutputPath: false

# publish all artifacts in the Artifact Stagign Directory
# this will place the UI Test artifacts in Azure DevOps for future use in the deployment pipeline
- task: PublishBuildArtifacts@1
  displayName: 'Publish  Artifact'
  inputs:
    PathtoPublish: '$(build.artifactstagingdirectory)'
  condition: succeededOrFailed() 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯·å‚è€ƒè§£é‡Š yaml æ–‡ä»¶ä¸åŒéƒ¨åˆ†çš„æ³¨é‡Šã€‚æ€»ä¹‹ï¼Œå½“æ‚¨å°†æäº¤æ¨é€åˆ°ä¸»åˆ†æ”¯æ—¶ï¼ŒAzure DevOps å°†:

1.  å®‰è£…ã€‚NET Core SDK
2.  æ¢å¤ MS æµ‹è¯•é¡¹ç›®çš„ NuGet åŒ…
3.  å‘å¸ƒ MS æµ‹è¯•é¡¹ç›®
4.  å°† dotnet å‘å¸ƒç»“æœä½œä¸ºå·¥ä»¶å‘å¸ƒå› Azure DevOps

è¦ä½¿ç”¨ Ubuntuï¼Œè¯·å°†â€œHosted Windows 2019 with VS2019â€æ›¿æ¢ä¸ºâ€œHosted Ubuntu 1604â€ã€‚yaml æ–‡ä»¶ä¸­çš„æ‰€æœ‰æ­¥éª¤éƒ½åº”è¯¥åœ¨ Windows å’Œ Ubuntu ä¸Šè¿è¡Œã€‚ä¹Ÿå¯èƒ½æ˜¯ MacOSï¼Œä½†æˆ‘æ²¡æœ‰è¯å®è¿™ä¸€ç‚¹ã€‚

***é‡è¦æç¤º*:æ‚¨å¯ä»¥ä½¿ç”¨åœ¨ä¸€ä¸ªå¹³å°ä¸Šç”Ÿæˆçš„ DLLï¼Œå¹¶åœ¨å¦ä¸€ä¸ªå¹³å°ä¸Šè¿è¡Œå®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œå½“ä½¿ç”¨ linux å‘è¡Œç‰ˆæ„å»º MS æµ‹è¯•é¡¹ç›®æ—¶ï¼Œæ‚¨å¯ä»¥åœ¨ Windowsã€MacOS å’Œä»»ä½•æ”¯æŒçš„ Linux å‘è¡Œç‰ˆä¸Šæ‰§è¡Œ DLLã€‚**

ç°åœ¨æ‚¨å·²ç»å°†â€œazure-pipelines.ymlâ€æ–‡ä»¶æ·»åŠ åˆ° GIT å­˜å‚¨åº“ä¸­ï¼Œå¯¼èˆªåˆ° DevOps é¡¹ç›®ä¸­çš„ Azure DevOps Build éƒ¨åˆ†ã€‚

[![Navigate to the Builds section in your Azure DevOps project](img/c2cff4c3946d0236a59a19519a5ccabd.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--s6_rm67y--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1160/azure-devops-navigate-to-build-pipelines.png)

ç‚¹å‡»â€œæ–°ç®¡é“â€æŒ‰é’®ã€‚

[![Click the new pipeline button](img/d4f6f1130bcb37f0e72eb81deffcde98.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--8XhboVeR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1159/azure-devops-new-pipeline.png)

GitHub å°†åœ¨æœ¬æ¼”ç»ƒä¸­ä½¿ç”¨ï¼Œä½†æ˜¯åœ¨è¿™ä¸€æ­¥ä¸­é€‰æ‹©å­˜å‚¨æºä»£ç æ§åˆ¶åº“çš„ä½ç½®ã€‚

[![Azure DevOps new pipeline, select code](img/8ea96a65a32ff42f1862f75b40985a4c.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--0x-boteF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1161/azure-devops-new-pipeline-connect-to-code.png)

ä»åˆ—è¡¨ä¸­é€‰æ‹©æ‰€éœ€çš„å­˜å‚¨åº“ã€‚

[![Azure DevOps enw pipeline select a repository](img/9fe4caa8953a80177373b5984f3e9533.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--wkrF_9Ih--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1157/azure-devops-new-pipeline-select-github-repo.png)

æ‚¨å·²ç»æœ‰ä¸€ä¸ªâ€œazure-pipelines.ymlâ€æ–‡ä»¶ï¼Œå› æ­¤ Azure DevOps å°†ä½¿ç”¨è¯¥æ–‡ä»¶ä½œä¸ºâ€œé…ç½®â€æ­¥éª¤ï¼Œå¹¶è·³åˆ°â€œæ£€æŸ¥â€æ­¥éª¤ã€‚å¦‚æœä½ æ²¡æœ‰ yaml æ–‡ä»¶ï¼ŒAzure DevOps ä¼šä¸ºä½ æä¾›ä¸€äº›å¯åŠ¨æ¨¡æ¿ï¼Œå¹¶è‡ªåŠ¨å°†æ–°çš„ yaml æ–‡ä»¶æäº¤åˆ°ä½ çš„ GIT repo ä¸­ã€‚

å•å‡»â€œè¿è¡Œâ€å®Œæˆæ„å»ºç®¡é“çš„åˆ›å»ºã€‚

[![Azure DevOps new pipeline review](img/f8103ffd467e94f42264dd131e903fe4.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--IHx-QFbT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1156/azure-devops-new-pipeline-review.png)

åˆ›å»ºæ„å»ºç®¡é“åï¼Œç®¡é“å°†é¦–æ¬¡è¿è¡Œï¼Œå¹¶æœ‰æœ›æˆåŠŸã€‚ğŸ¤

å¦‚æœæˆåŠŸï¼Œå°†å‡ºç°â€œå·¥ä»¶â€æŒ‰é’®ã€‚ç‚¹å‡»â€œå·¥ä»¶â€æŒ‰é’®ï¼Œç„¶åç‚¹å‡»â€œæ”¾ä¸‹â€æŒ‰é’®ã€‚

[![Azure DevOps Continous Integration Build](img/4b7af2953e224cc093e717a0c18bfe5a.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--xHMwAuVg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1155/azure-devops-continous-integration-build.png)

åœ¨å·¥ä»¶æ¨¡å¼ä¸­ï¼Œæ‚¨å¯ä»¥æ¢ç´¢å’Œä¸‹è½½å·²å‘å¸ƒçš„æ„å»ºå·¥ä»¶:

[![Azure DevOps Continous Integration Build Artifact](img/70fb39a017c144bf42e9e3822ccb2db9.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--8ldCgguX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1154/azure-devops-continous-integration-build-artifact.png)

ç°åœ¨æ‚¨å·²ç»æœ‰äº†ä¸€ä¸ªæ„å»ºå·¥ä»¶ï¼Œæ‚¨å¯ä»¥ç»§ç»­åˆ›å»ºä¸€ä¸ªæŒç»­çš„äº¤ä»˜ç®¡é“æ¥è·å–å·¥ä»¶ã€‚

## ä¸º. NET æ ¸å¿ƒ Selenium æµ‹è¯•é¡¹ç›®åˆ›å»ºä¸€ä¸ªè¿ç»­çš„äº¤ä»˜ç®¡é“

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ‚¨åªä½¿ç”¨äº† YAML ç®¡é“ï¼Œä½†æ˜¯ YAML å¯¹å‘å¸ƒç®¡é“çš„æ”¯æŒæ²¡æœ‰è¿™ä¹ˆå¼ºã€‚å› æ­¤ï¼Œä¸‹é¢çš„æŒ‡å—å°†ä½¿ç”¨ç»å…¸ç®¡é“æ¥åˆ›å»ºå‘å¸ƒç®¡é“ã€‚

### åˆ›å»ºå‘å¸ƒç®¡é“

[![Azure DevOps navigate to Releases tab and click "New pipeline" button](img/a7800197998135773179243b38e30427.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--kYNU7teN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1165/azure-devops-releases-1-new-pipeline.png)

å¯¼èˆªåˆ°â€œå‘å¸ƒâ€é€‰é¡¹å¡ï¼Œç„¶åå•å‡»â€œæ–°ç®¡é“â€æŒ‰é’®ã€‚

[![Azure DevOps Release select Empty Job template](img/2bcf72e74b0a177314f9efe76934aaf4.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--uQmRhztL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1166/azure-devops-releases-2-select-empty-job-template.png)

æ–°çš„å‘å¸ƒç®¡é“å°†æç¤ºæ‚¨é€‰æ‹©ä¸€ä¸ªå¯åŠ¨æ¨¡æ¿ã€‚è¿™äº›æ¨¡æ¿éå¸¸é€‚åˆå¿«é€Ÿå…¥é—¨ã€‚

æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨â€œç©ºä½œä¸šâ€ä»å¤´å¼€å§‹ã€‚å•å‡»â€œç©ºå·¥å•â€é“¾æ¥ã€‚

[![Azure DevOps Release select build artifact from CI build](img/652b4b509aa782be6e1e2bb29a5e65c9.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--JKgTf-s6--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1167/azure-devops-releases-3-select-artifact.png)

å°†ç®¡é“é‡å‘½åä¸ºâ€œå¸¦ UI éªŒè¯çš„å‡éƒ¨ç½²â€ã€‚

ç‚¹å‡»â€œæ·»åŠ ä¸€ä¸ªå·¥ä»¶â€åŒºåŸŸï¼ŒåŒ¹é…ä¸Šé¢æˆªå›¾ä¸­æ˜¾ç¤ºçš„é…ç½®ã€‚

ä»¥ä¸‹æ˜¯è¿™äº›å­—æ®µå«ä¹‰çš„æ¦‚è¿°:

*   **æºç±»å‹**:è¿™å°†è®©ä½ é€‰æ‹©è·å–å·¥ä»¶æ—¶ä½¿ç”¨çš„æºç±»å‹ã€‚
*   **é¡¹ç›®**:è¿™æ˜¯æ‚¨æ·»åŠ  CI æ„å»ºçš„é¡¹ç›®ã€‚
*   **Source** :è¯¥ä¸‹æ‹‰åˆ—è¡¨å°†åˆ—å‡ºæ‰€æœ‰å¯èƒ½çš„ CI æ„å»ºç®¡é“ã€‚é€‰æ‹©ç”Ÿæˆ UI æµ‹è¯•é¡¹ç›®å·¥ä»¶çš„ CI æ„å»ºç®¡é“ã€‚
*   **é»˜è®¤ç‰ˆæœ¬**:æŒ‡å®šå·¥ä»¶ç‰ˆæœ¬åº”è¯¥å¦‚ä½•ç¡®å®šã€‚
*   **æºåˆ«å**:å°†å…¶é‡å‘½åä¸º UI_Test_Artifactã€‚æ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªåˆ«åæ¥å¼•ç”¨ç®¡é“ä¸­çš„å·¥ä»¶ã€‚

é…ç½®åŒ¹é…åï¼Œå•å‡»â€œæ·»åŠ â€æŒ‰é’®ã€‚

### åˆ›å»º QA è™šæ‹Ÿéƒ¨ç½²é˜¶æ®µ

[![Azure DevOps Release select stage 1](img/fe4b42ea0a702483bbe6a7f6b6da9dde.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--NMLycA5D--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1168/azure-devops-releases-4-select-stage-1-job.png)

å•å‡»â€œé˜¶æ®µ 1â€é˜¶æ®µä¸­çš„â€œ1 ä½œä¸šï¼Œ0 ä»»åŠ¡â€é“¾æ¥ï¼Œå¼€å§‹é…ç½®é˜¶æ®µä¸­çš„ä½œä¸š/ä»»åŠ¡ã€‚

[![Azure DevOps Release rename Stage 1 to QA Dummy Deploy](img/ae504dbc6b97f97f8f2a62348a0c4198.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--B1fkHhAQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1169/azure-devops-releases-5-rename-job-1-to-qa-dummy-deploy.png)

å°†â€œé˜¶æ®µåç§°â€é‡å‘½åä¸ºâ€œQA è™šæ‹Ÿéƒ¨ç½²â€ã€‚è¿™ä¸ªé˜¶æ®µå®é™…ä¸Šä¸ä¼šéƒ¨ç½²ä»»ä½•ä¸œè¥¿ï¼Œä½†è®©æˆ‘ä»¬å‡è®¾å®ƒä¼šéƒ¨ç½²ã€‚

[![Azure DevOps Release remove Agent job](img/b361b8428f29aeda2a91b934abc6a232.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--a-M25Brk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1170/azure-devops-releases-6-qa-dummy-deploy-remove-agent-job.png)

é€‰æ‹©â€œä»£ç†ä½œä¸šâ€å¹¶å•å‡»â€œåˆ é™¤â€é“¾æ¥ã€‚

[![Azure DevOps Release Add agentless job](img/bf645dc17f08e33f83ba9738350bf9be.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--augaiu8y--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1171/azure-devops-releases-7-qa-dummy-deploy-add-agentless-job.png)

æœ‰ 3 ç§ç±»å‹çš„ä½œä¸šå¯ä»¥æ·»åŠ åˆ°é˜¶æ®µ:

1.  **ä»£ç†ä½œä¸š**:åœ¨ä»£ç†ä¸Šè¿è¡Œçš„ä½œä¸š
2.  **éƒ¨ç½²ç»„ä½œä¸š**:åœ¨åŠ å…¥éƒ¨ç½²ç»„çš„å¤šä¸ªè™šæ‹Ÿæœºä¸Šè¿è¡Œçš„ä½œä¸š
3.  **æ— ä»£ç†ä½œä¸š**:ä¸éœ€è¦ä»£ç†è¿è¡Œçš„ä½œä¸š

å› ä¸ºè¿™æ˜¯ä¸€ä¸ªè™šæ‹Ÿéƒ¨ç½²é˜¶æ®µï¼Œæ‰€ä»¥æ·»åŠ ä¸€ä¸ªç©ºçš„æ— ä»£ç†ä½œä¸šã€‚è¿™å°†æ˜¯è¿è¡Œæ—¶æœ€å¿«çš„ã€‚

ç‚¹å‡»â€œQA è™šæ‹Ÿéƒ¨ç½²â€ä¸Šçš„ä¸‰ä¸ªç‚¹ï¼Œå¹¶ç‚¹å‡»ä¸Šä¸‹æ–‡èœå•ä¸­çš„â€œæ·»åŠ æ— ä»£ç†ä½œä¸šâ€ã€‚

[![Azure DevOps Release rename job to QA Dummy Deploy](img/0ee59c55cf5177f8e8af03c2850314b3.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--sWA6qRXK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1172/azure-devops-releases-8-qa-dummy-deploy-rename-agentless-job.png)

å°†æ–°ä½œä¸šä¹Ÿé‡å‘½åä¸ºâ€œQA è™šæ‹Ÿéƒ¨ç½²â€ã€‚

### åœ¨ Windows èˆå°ä¸Šåˆ›å»º UI æµ‹è¯•

[![Azure DevOps Release add new stage](img/353375d93fe1a8cebf4bf38864708e6c.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--7hVwdXRU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1173/azure-devops-releases-9-qa-dummy-deploy-add-qa-validation-stage-windows.png)

ç‚¹å‡»â€œPipelineâ€é€‰é¡¹å¡ï¼Œå¯¼èˆªå›â€œPipelineâ€è§†å›¾ã€‚

ç‚¹å‡»â€œQA è™šæ‹Ÿéƒ¨ç½²â€é˜¶æ®µä¸‹æ–¹çš„â€œæ·»åŠ â€æŒ‰é’®ã€‚è¿™å°†æ·»åŠ ä¸€ä¸ªæ–°é˜¶æ®µï¼Œè¯¥é˜¶æ®µå°†åœ¨â€œQA è™šæ‹Ÿéƒ¨ç½²â€é˜¶æ®µä¹‹åè¿è¡Œã€‚

[![Azure DevOps Release rename new stage to 'Verify QA using Windows Agent' and navigate to the tasks](img/bae3a8b736cf3e78a3c75885a9b4ecf4.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--F9YDs4d---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1174/azure-devops-releases-10-create-verify-qa-stage.png)

å°†é˜¶æ®µåç§°é‡å‘½åä¸ºâ€œä½¿ç”¨ Windows ä»£ç†éªŒè¯ QA â€,ç„¶åå•å‡»â€œ1 ä¸ªä½œä¸šï¼Œ0 ä¸ªä»»åŠ¡â€å¯¼èˆªåˆ°é˜¶æ®µçš„â€œä»»åŠ¡â€è§†å›¾ã€‚

[![Azure DevOps Release rename job to 'Verify QA using Windows Agent' and select 'Hosted Windows 2019 with VS2019' agent](img/6d751b955652b963ec31f61bd9e4b4e8.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--811dKWTb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1175/azure-devops-releases-11-verify-qa-setup-windows-agent-job.png)

å°†ç°æœ‰ä½œä¸šé‡å‘½åä¸ºâ€œä½¿ç”¨ Windows ä»£ç†éªŒè¯ QAâ€ã€‚

å°†â€œä»£ç†æ± â€ä¸‹æ‹‰åˆ—è¡¨æ›´æ”¹ä¸ºä½¿ç”¨â€œå¸¦ VS2019 çš„æ‰˜ç®¡ Windows 2019â€ã€‚

ä»£ç†æ± å†³å®šä»»åŠ¡å°†åœ¨å“ªä¸ªä»£ç†ä¸Šè¿è¡Œã€‚å¼€ç®±å³ç”¨ï¼ŒAzure DevOps æœåŠ¡å°†ä¸ºæ‚¨æä¾›å¤šä¸ªé¢„é…ç½®çš„ä»£ç†æ± ã€‚

æ‚¨å¯ä»¥é€šè¿‡å°†æ‚¨çš„æœºå™¨é…ç½®ä¸º Azure DevOps ä»£ç†æ¥æ·»åŠ æ‚¨è‡ªå·±çš„ä»£ç†æ± ã€‚

[![Azure DevOps Release add PowerShell task](img/5ba0a0af54b73aca2960ab7193580163.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--8hWORx2---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1176/azure-devops-releases-12-verify-qa-add-powershell-task.png)

å•å‡»â€œä½¿ç”¨ Windows ä»£ç†éªŒè¯ QAâ€ä½œä¸šä¸Šçš„â€œ+â€å›¾æ ‡ã€‚

æœç´¢â€œPowerShellâ€ï¼Œç‚¹å‡»â€œPowerShellâ€ä»»åŠ¡ä¸Šçš„â€œæ·»åŠ â€æŒ‰é’®ï¼Œæ·»åŠ  PowerShell ä»»åŠ¡ã€‚

è¿™ä¸ª PowerShell ä»»åŠ¡å°†ä» Google ä¸‹è½½ ChromeDriverï¼Œå¹¶å°†å®ƒä»¬æ”¾åœ¨ UI æµ‹è¯• DLL æ—è¾¹ã€‚

[![Azure DevOps Release add PowerShell code to download Windows ChromeDriver](img/c3a5f132e1bbf87ab2e5beea61db3672.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--kEWRqjbX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1177/azure-devops-releases-13-qa-verification-windows-download-chromedriver-using-powershell.png)

å°† PowerShell ä»»åŠ¡é…ç½®ä¸ºä¸ä¸Šé¢çš„å±å¹•æˆªå›¾ç›¸åŒ¹é…:

*   **æ˜¾ç¤ºåç§°**:*ä¸‹è½½ ChromeDriver 75*
*   **ç±»å‹**:å‹¾é€‰*å†…åµŒ*å•é€‰æŒ‰é’®ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å¼•ç”¨ PowerShell è„šæœ¬æ–‡ä»¶çš„â€œæ–‡ä»¶è·¯å¾„â€æ¥è¿è¡Œ PowerShellï¼Œæˆ–è€…ä½¿ç”¨â€œå†…è”â€é€‰é¡¹å°† PowerShell ç®€å•åœ°å¤åˆ¶åˆ°å†…è”â€œè„šæœ¬â€å­—æ®µä¸­ã€‚
*   **è„šæœ¬**:è¿™æ˜¯å°†ç”±ä»£ç†æ‰§è¡Œçš„ PowerShell ä»£ç ã€‚ä»£ç å°†ä¸‹è½½ ChromeDriverï¼Œå¹¶å°†å…¶æ”¾åœ¨ UI æµ‹è¯• DLL çš„æ—è¾¹ã€‚*ä»ä¸‹é¢å¤åˆ¶ä»£ç *:

```
Invoke-WebRequest  -Uri  "https://chromedriver.storage.googleapis.com/75.0.3770.90/chromedriver_win32.zip"  -OutFile  $(System.DefaultWorkingDirectory)/chromedriver_win32.zip;  Expand-Archive  $(System.DefaultWorkingDirectory)/chromedriver_win32.zip  -DestinationPath  $(System.DefaultWorkingDirectory)/chromedriver_win32;  Copy-Item  "$(System.DefaultWorkingDirectory)/chromedriver_win32/chromedriver.exe" -Destination "$(System.DefaultWorkingDirectory)/UI_Test_Artifact/drop/SeleniumTests/" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

[![Azure DevOps Release run dotnet cli vstest command](img/e239b360aec9af6aa6d18b3f7b63bed3.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--VTAhcENN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1178/azure-devops-releases-14-qa-verification-windows-run-selenium-test.png)

å½“æ‚¨æƒ³è¦ä»æºä»£ç è¿è¡Œ UI æµ‹è¯•é¡¹ç›®æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨â€œdotnet testâ€å‘½ä»¤æ¥æŸ¥æ‰¾æ‚¨çš„*ã€‚csproj æ–‡ä»¶ã€‚åœ¨æ‚¨çš„æƒ…å†µä¸‹ï¼Œæ‚¨åªæœ‰ DLL æ–‡ä»¶ï¼Œå¹¶ä¸”â€œdotnet testâ€å‘½ä»¤å°†ä¸èµ·ä½œç”¨ã€‚

å¯¹äºè¿™ä¸ªç”¨ä¾‹ï¼Œä½ å¿…é¡»ä½¿ç”¨[çš„â€˜ç‚¹ç½‘ vs testâ€™å‘½ä»¤](https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-vstest)ã€‚è¯­æ³•ç•¥æœ‰ä¸åŒï¼Œä½†æœ¬è´¨ä¸Šä¸ test å‘½ä»¤çš„å·¥ä½œæ–¹å¼ç›¸åŒã€‚è¦è¿è¡Œ UI æµ‹è¯•ï¼Œæ‚¨éœ€è¦è¿è¡Œå¸¦æœ‰ä¸€äº›é¢å¤–å‚æ•°çš„â€œdotnet vstestâ€æ¥ç”Ÿæˆæµ‹è¯•ç»“æœã€‚

é€šè¿‡å•å‡»â€œ+â€å›¾æ ‡æ·»åŠ å¦ä¸€ä¸ªä»»åŠ¡ã€‚æœç´¢ä¸€ä¸‹â€ã€‚NET Coreâ€ä»»åŠ¡ï¼Œå¹¶å•å‡»â€œæ·»åŠ â€æŒ‰é’®ã€‚

é…ç½®ã€‚NET æ ¸å¿ƒä»»åŠ¡æ¥åŒ¹é…ä¸Šé¢çš„æˆªå›¾:

*   **æ˜¾ç¤ºåç§°**:è¿è¡Œç¡’æµ‹è¯•
*   **å‘½ä»¤**:è‡ªå®šä¹‰
*   **é¡¹ç›®è·¯å¾„** : $(ç³»ç»Ÿã€‚DefaultWorkingDirectory)\ UI _ Test _ Artifact \ drop \ SeleniumTests \ Demoã€‚SeleniumTests.dll
*   **è‡ªå®šä¹‰å‘½ä»¤** : vstest
*   **å‚æ•°** : -è®°å½•å™¨:trx -è®¾ç½®:ã€‚run settings-TestRunParameters/Parameter[contains([@ name](https://dev.to/name)ï¼Œ' web app URL ')]/@ value =[https://dotnet.microsoft.com/](https://dotnet.microsoft.com/)run configurationã€‚TestSessionTimeout=120000
*   **å·¥ä½œç›®å½•** : $(ç³»ç»Ÿã€‚DefaultWorkingDirectory)\ UI _ Test _ Artifact \ drop \ SeleniumTests

è¿™äº›å‚æ•°å°†è¢«ä¼ é€’ç»™â€œdotnet vstestâ€å‘½ä»¤ã€‚è¿™äº›è®ºç‚¹æ˜¯è¿™æ ·çš„:

*   **Logger** :æŒ‡å®šè®°å½•æµ‹è¯•æ‰§è¡Œç»“æœçš„æ ¼å¼ã€‚ **trx** æ˜¯ Visual Studio æµ‹è¯•ç»“æœæ–‡ä»¶æ ¼å¼ã€‚

    ä½¿ç”¨è¯¥å‚æ•°å°†åˆ›å»ºä¸€ä¸ªâ€œæµ‹è¯•ç»“æœâ€æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨æ–‡ä»¶å¤¹å†…åˆ›å»ºä¸€ä¸ª trx æ–‡ä»¶ã€‚

*   **è®¾ç½®**:ä½¿ç”¨è¿™ä¸ªå‚æ•°ä½ å¯ä»¥æŒ‡å®šä¸€ä¸ª. runsettings æ–‡ä»¶ã€‚ä½ å¯ä»¥æ‰¾åˆ°[äº†ã€‚è¿è¡Œ GitHub èµ„æºåº“ä¸­çš„è®¾ç½®æ–‡ä»¶ï¼Œä»¥è·å¾—æœ¬æŒ‡å—](https://github.com/Swimburger/AzureDevOps_Selenium_DotNet/blob/master/Demo.SeleniumTests/.runsettings)ã€‚

*   **-**:â€œ-â€åé¢çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯é¢å¤–çš„å‚æ•°ï¼Œç”¨äºè¦†ç›–ã€‚è¿è¡Œè®¾ç½®æ–‡ä»¶ã€‚

    è¿™å…è®¸ä½ å¾ˆå®¹æ˜“åœ°ä¸ºæ¯ä¸ªé˜¶æ®µ(å¼€å‘/QA/ç™»å°/ç”Ÿäº§/ç­‰)æ”¹å˜ webAppUrlã€‚

    ã€è¿è¡Œé…ç½®ã€‘ã€‚â€œTestSessionTimeoutâ€ä¼šå°†å•ä¸ªæµ‹è¯•çš„è¶…æ—¶æ—¶é—´æŒ‡å®šä¸º 2 åˆ†é’Ÿ(120 ç§’)ã€‚

[![Azure DevOps Release publish test results](img/7f8c37966fe8bb4c4c3c0f6df0a24f9f.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--73dX434x--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1179/azure-devops-releases-15-qa-verification-windows-publish-test-results.png)

æœ€åä¸€æ­¥æ˜¯å‘å¸ƒå­˜å‚¨åœ¨ trx æ–‡ä»¶ä¸­çš„æµ‹è¯•ç»“æœã€‚

æ·»åŠ å¦ä¸€ä¸ªä»»åŠ¡ï¼Œè¿™æ¬¡å¯»æ‰¾â€œå‘å¸ƒæµ‹è¯•ç»“æœâ€ã€‚

é…ç½®ä»»åŠ¡ä»¥åŒ¹é…ä¸Šé¢çš„æˆªå›¾:

*   **æ˜¾ç¤ºåç§°**:å‘å¸ƒæµ‹è¯•ç»“æœ***ã€‚å¤„ç†
*   **æµ‹è¯•ç»“æœæ ¼å¼** : VSTest
*   **æµ‹è¯•ç»“æœæ–‡ä»¶** : ***ã€‚å¤„ç†
*   **æœç´¢æ–‡ä»¶å¤¹** : $(ç³»ç»Ÿã€‚DefaultWorkingDirectory)\ UI _ Test _ Artifact \ drop \ SeleniumTests \ Test results

å¦‚ä¸Šé…ç½®ä»»åŠ¡æ—¶ï¼Œè¯¥ä»»åŠ¡éœ€è¦ VSTest æ ¼å¼çš„ç»“æœæ–‡ä»¶ï¼Œå¹¶å°†ä½¿ç”¨* * * *æœç´¢ trx æ–‡ä»¶ã€‚TestResults æ–‡ä»¶å¤¹ä¸­çš„ trx Regex æ¨¡å¼ã€‚

æµ‹è¯•ç»“æœçš„ä»»ä½•å­æ–‡ä»¶å¤¹ä¹Ÿå°†ä½¿ç”¨* * * *è¿›è¡Œæ‰«æã€‚trx æ¨¡å¼ã€‚ç»“æœæ–‡ä»¶å°†ç”¨äºå¡«å…… Azure DevOps ä¸­çš„æµ‹è¯•ç»“æœæ¥å£ã€‚

ç°åœ¨æ‚¨æœ‰äº†ä¸€ä¸ªå¯ä»¥å·¥ä½œçš„ UI æµ‹è¯•é˜¶æ®µã€‚æ‚¨å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°ç‰ˆæœ¬æ¥å°è¯•è¿™ç§æ–¹æ³•ã€‚ğŸŠ

### åœ¨ Ubuntu èˆå°ä¸Šåˆ›å»º UI æµ‹è¯•

è¦åœ¨ Ubuntu è€Œä¸æ˜¯ Windows ä¸Šè¿è¡Œ UI æµ‹è¯•ï¼Œæ‚¨å¯ä»¥åœ¨ Ubuntu ä¸Šè¿è¡Œç›¸åŒçš„ä»»åŠ¡ï¼Œåªæ˜¯å¹³å°ç•¥æœ‰ä¸åŒã€‚

[![Azure DevOps Release add parallel verification stage](img/1a2ad5541526ed6339673d1080c00f23.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--PDFyt7dt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1180/azure-devops-releases-16-create-verify-qa-stage-using-ubuntu-agent.png)

å•å‡»â€œQA è™šæ‹Ÿéƒ¨ç½²â€é˜¶æ®µä¸‹æ–¹çš„â€œæ·»åŠ â€æŒ‰é’®ã€‚

è¿™å°†åˆ›å»ºå¦ä¸€ä¸ªé˜¶æ®µï¼Œè¯¥é˜¶æ®µå°†åœ¨â€œQA è™šæ‹Ÿéƒ¨ç½²â€ä¹‹åè¿è¡Œï¼Œä½†ä¸ Windows é˜¶æ®µå¹¶è¡Œã€‚

[![Azure DevOps Release rename stage to 'Verify QA using Ubuntu Agent' and navigate to the jobs](img/4a55a4a8830660417616e7c642ac70b5.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--OXi8Tbtk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1181/azure-devops-releases-17-create-verify-qa-stage-using-ubuntu-agent-rename.png)

å°†æ–°é˜¶æ®µé‡å‘½åä¸ºâ€œä½¿ç”¨ Ubuntu ä»£ç†éªŒè¯ QAâ€ï¼Œç„¶åå•å‡»â€œ1 ä½œä¸šï¼Œ0 ä»»åŠ¡â€ã€‚

[![Azure DevOps Release rename job to 'Verify QA using Ubuntu Agent' and set agent to 'Hosted Ubuntu 1604'](img/9a3ffd43f9b35bfdceae4c383cf567bc.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--LnHfihIX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1182/azure-devops-releases-18-verify-qa-stage-using-ubuntu-setup-agent.png)

å°†é»˜è®¤ä½œä¸šé‡å‘½åä¸ºâ€œä½¿ç”¨ Ubuntu ä»£ç†éªŒè¯ QA â€,å¹¶é€‰æ‹©â€œæ‰˜ç®¡ Ubuntu 1604â€ä»£ç†æ± 

[![Azure DevOps Release setup shell script to download ChromeDriver](img/de2568c567cfce4cf523fb234b852dcd.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--aWStR-6D--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1183/azure-devops-releases-19-qa-verification-ubuntu-download-chromedriver.png)

æ·»åŠ ä¸€ä¸ªâ€œBashâ€ä»»åŠ¡ï¼Œå¹¶å°†è¯¥ä»»åŠ¡é…ç½®ä¸ºä¸ä¸Šé¢çš„å±å¹•æˆªå›¾ç›¸åŒ¹é…:

*   **æ˜¾ç¤ºåç§°**:ä¸‹è½½ ChromeDriver 75
*   **ç±»å‹**:å†…åµŒ
*   **è„šæœ¬**:ä»ä¸‹é¢å¤åˆ¶è„šæœ¬ã€‚
*   **å·¥ä½œç›®å½•** : $(ç³»ç»Ÿã€‚DefaultWorkingDirectory)/UI _ Test _ Artifact/drop/SeleniumTests

ä¸‹è½½ ChromeDriver 75 bash è„šæœ¬:

```
wget https://chromedriver.storage.googleapis.com/75.0.3770.140/chromedriver_linux64.zip
unzip chromedriver_linux64.zip
chmod +x chromedriver 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

bash è„šæœ¬çš„é€»è¾‘ä¸ PowerShell è„šæœ¬ç›¸åŒï¼Œåªæ˜¯åœ¨ Linux ä¸Šï¼Œæ‚¨éœ€è¦æ›´æ”¹ chromedriver çš„æƒé™æ‰èƒ½ä½¿ç”¨å®ƒã€‚

**æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ Ubuntu ä¸Šä½¿ç”¨ PowerShellï¼NANIï¼Ÿï¼**ğŸ˜²

Ubuntu ä»£ç†é¢„è£…äº† PowerShell æ ¸å¿ƒã€‚ **PowerShell Core æ˜¯åŸºäºçš„è·¨å¹³å°ç‰ˆ PowerShellã€‚ç½‘èŠ¯ã€‚**

å¦‚æœ PowerShell æ˜¯ä½ çš„æœ€çˆ±ï¼Œä¸‹é¢æ˜¯è„šæœ¬:

```
Invoke-WebRequest  -Uri  "https://chromedriver.storage.googleapis.com/75.0.3770.140/chromedriver_linux64.zip"  -OutFile  $(System.DefaultWorkingDirectory)/chromedriver_linux64.zip;  Expand-Archive  $(System.DefaultWorkingDirectory)/chromedriver_linux64.zip  -DestinationPath  $(System.DefaultWorkingDirectory)/chromedriver_linux64;  Copy-Item  "$(System.DefaultWorkingDirectory)/chromedriver_linux64/chromedriver" -Destination "$(System.DefaultWorkingDirectory)/UI_Test_Artifact/drop/SeleniumTests/"

chmod +x $(System.DefaultWorkingDirectory)/UI_Test_Artifact/drop/SeleniumTests/chromedriver 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ å¯èƒ½ä¼šæ³¨æ„åˆ° PowerShell è„šæœ¬ä¸ Windows è„šæœ¬éå¸¸ç›¸ä¼¼ï¼Œéå¸¸é…·ï¼

[![Azure DevOps Release setup dotnet cli vstest command](img/7d9969073fa8d86e1ef1834c3945ec92.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Ar0-QMCg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1184/azure-devops-releases-20-qa-verification-ubuntu-run-selenium-test.png)

æ·»åŠ ä¸€ä¸ªæ–°çš„â€ã€‚NET Coreâ€ä»»åŠ¡ï¼Œå¹¶å°†é…ç½®ä¸ä¸Šé¢çš„å±å¹•æˆªå›¾è¿›è¡ŒåŒ¹é…:

*   **æ˜¾ç¤ºåç§°**:è¿è¡Œç¡’æµ‹è¯•
*   **å‘½ä»¤**:è‡ªå®šä¹‰
*   **é¡¹ç›®è·¯å¾„** : $(ç³»ç»Ÿã€‚DefaultWorkingDirectory)/UI _ Test _ Artifact/drop/SeleniumTests/Demoã€‚SeleniumTests.dll
*   **è‡ªå®šä¹‰å‘½ä»¤** : vstest
*   **å‚æ•°** : -è®°å½•å™¨:trx -è®¾ç½®:ã€‚run settings-TestRunParameters/Parameter[contains([@ name](https://dev.to/name)ï¼Œ' web app URL ')]/@ value =[https://dotnet.microsoft.com/](https://dotnet.microsoft.com/)run configurationã€‚TestSessionTimeout=120000
*   **å·¥ä½œç›®å½•** : $(ç³»ç»Ÿã€‚DefaultWorkingDirectory)/UI _ Test _ Artifact/drop/SeleniumTests/

æ­¤é…ç½®ä¸ Windows stage çš„é…ç½®å®Œå…¨ç›¸åŒã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒ Windows stageã€‚

[![Azure DevOps Release publish test results](img/6758c9d3f8127d2657309928bab1df11.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--tvwfxL5e--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1185/azure-devops-releases-21-qa-verification-ubuntu-publish-test-results.png)

æ·»åŠ â€œå‘å¸ƒæµ‹è¯•ç»“æœâ€,å¹¶å°†é…ç½®ä¸ä¸Šé¢çš„å±å¹•æˆªå›¾åŒ¹é…:

*   **æ˜¾ç¤ºåç§°**:å‘å¸ƒæµ‹è¯•ç»“æœ**/*ã€‚å¤„ç†
*   **æµ‹è¯•ç»“æœæ ¼å¼** : VSTest
*   **æµ‹è¯•ç»“æœæ–‡ä»¶** : **/*ã€‚å¤„ç†
*   **æœç´¢æ–‡ä»¶å¤¹** : $(ç³»ç»Ÿã€‚DefaultWorkingDirectory)/UI _ Test _ Artifact/drop/SeleniumTests/Test results

æ­¤é…ç½®ä¸ Windows stage çš„é…ç½®å®Œå…¨ç›¸åŒã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒ Windows stageã€‚

### æµ‹è¯•å‘å¸ƒç®¡é“

æ—¢ç„¶å·²ç»åˆ›å»ºäº†å‘å¸ƒç®¡é“ï¼Œæ‚¨å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªå‘å¸ƒæ¥æµ‹è¯•å®ƒã€‚

[![Azure DevOps create release](img/49c2dfb4457a492a75e412d347e7c5c4.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--sd925Xcx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1186/azure-devops-releases-22-create-release.png)

å¯¼èˆªå›å‘å¸ƒæ¦‚è§ˆå±å¹•ï¼Œå¹¶å•å‡»â€œåˆ›å»ºå‘å¸ƒâ€æŒ‰é’®ã€‚

[![Azure DevOps create release details](img/cb226288f5363f5deb559cb97bd1d631.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--pNj9Ap6V--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1187/azure-devops-releases-23-create-release-details.png)

åœ¨å¼¹å‡ºâ€œåˆ›å»ºæ–°ç‰ˆæœ¬â€è¯¦ç»†ä¿¡æ¯å±å¹•åï¼Œå•å‡»â€œåˆ›å»ºâ€æŒ‰é’®ã€‚

[![Azure DevOps Release results](img/5c764acfe26c6a382f03252ee95b2274.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--wmPQEKML--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1188/azure-devops-releases-24-release-results.png)

å½“å‘å¸ƒè¿è¡Œæ—¶ï¼Œæ‚¨å¯ä»¥æ£€æŸ¥è¿›åº¦å¹¶å®æ—¶æŸ¥çœ‹å˜åŒ–ã€‚

[![Azure DevOps release result test details](img/489cb2262313ccf65207c0797e1d10f5.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--t0OBSWTp--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://www.swimburger.net/media/1189/azure-devops-releases-25-release-test-results.png)

å•å‡»æ£€æŸ¥ç‰¹å®šé˜¶æ®µæ—¶ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°åŒ…æ‹¬æµ‹è¯•ç»“æœåœ¨å†…çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚

## æ€»ç»“

åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæ‚¨å­¦ä¹ äº†å¦‚ä½•

*   ä½¿ç”¨ YAML Azure DevOps ç®¡é“åˆ›å»ºæŒç»­é›†æˆç®¡é“
*   ä½¿ç”¨ dotnet CLI å¯ä»¥
    *   å»ºè®¾
    *   ä½¿ç”¨æºä»£ç è¿›è¡Œæµ‹è¯•(ç‚¹ç½‘æµ‹è¯•)
    *   ä½¿ç”¨å·²å‘å¸ƒçš„ DLL è¿›è¡Œæµ‹è¯•(dotnet vstest)
*   ä½¿ç”¨ç»å…¸ Azure DevOps ç®¡é“åˆ›å»ºè¿ç»­éƒ¨ç½²ç®¡é“
*   å¿«è·‘ã€‚Windows å’Œ Ubuntu ä¸Šçš„. NET UI æµ‹è¯•

å¦‚æœæ‰€æœ‰çš„ UI æµ‹è¯•éƒ½æˆåŠŸï¼Œæ‚¨å¯ä»¥æ‰©å±•è¿™ä¸ªç¤ºä¾‹ä»¥éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œç„¶åä½¿ç”¨ç›¸åŒçš„ UI æµ‹è¯•é€»è¾‘éªŒè¯ç”Ÿäº§ç¯å¢ƒã€‚é€šå¸¸ï¼Œè‡ªåŠ¨åŒ–çš„ UI æµ‹è¯•æ˜¯ä¸å¤Ÿçš„ï¼Œæ‰€ä»¥æ·»åŠ ä¸€ä¸ªé¢„éƒ¨ç½²æ‰¹å‡†é—¨æ˜¯ä¸ªå¥½ä¸»æ„ã€‚åœ¨è¿›è¡Œé¢å¤–çš„æ¢ç´¢æ€§æµ‹è¯•åï¼ŒQA å·¥ç¨‹å¸ˆå¯ä»¥æ‰¹å‡†æ‰¹å‡†å…³å¡ã€‚

äº«å—è‡ªåŠ¨åŒ–ï¼ğŸ˜