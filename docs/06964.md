# ğŸ‰å®£å¸ƒé—¸é—¨:React çš„â€œåŠ è½½æ›´å¤šâ€ç»„ä»¶ğŸŒŠ

> åŸæ–‡:[https://dev . to/Geoff/announcing-flood gate-a-load-more-component-for-react-3 LLP](https://dev.to/geoff/announcing-floodgate-a-load-more-component-for-react-3llp)

æˆ‘å¾ˆé«˜å…´åœ°å®£å¸ƒï¼Œç»è¿‡ 2 å¹´å¤šçš„å¼€å‘ï¼Œ [**React æ°´é—¸**](https://github.com/geoffdavis92/react-floodgate) å·²ç»å‘å¸ƒäº† 1.0.0 ç‰ˆæœ¬ï¼

Floodgate æ˜¯ [React.js](https://reactjs.org) çš„â€œåŠ è½½æ›´å¤šâ€ç»„ä»¶ï¼Œå®ƒå°†ç®¡ç†å’Œæ›´æ–°æ’é˜Ÿæ•°æ®çš„å¤æ‚æ€§è½¬åŒ–ä¸ºç›´è§‚çš„ä½“éªŒã€‚å®ƒé‡‡ç”¨äº†ä¸€ç§æç®€çš„é…ç½®æ–¹æ³•:åªéœ€è¦ä¸€ä¸ªé“å…·ï¼Œå¹¶ä½¿ç”¨[æ¸²æŸ“é“å…·æ¨¡å¼](https://reactjs.org/docs/render-props.html)ï¼Œå¼€å‘äººå‘˜å¯ä»¥ç²¾ç¡®æ§åˆ¶æ¸²æŸ“å¤šå°‘å¯ç”¨æ•°æ®ï¼Œä»¥åŠæ¸²æŸ“çš„æ–¹å¼ã€‚

è¦å¿«é€Ÿäº†è§£ Floodgate çš„åŸºæœ¬å®ç°ï¼Œè¯·æŸ¥çœ‹ä¸‹é¢çš„ç¤ºä¾‹:

```
import React from "react";
import Floodgate from "react-floodgate";

export default function LoadMore() {
  const albums = ["For Emma, Forever Ago", "Bon Iver, Bon Iver", "22 a million", "i,i"];
  return (
    <Floodgate data={albums} initial={1} increment={1}>
      {({ items, loadNext, loadComplete }) => (
        <React.Fragment>
          <h1>Bon Iver Albums</h1>
          <ol>
            {items.map(album => <li>{album}</li>)}
          </ol>
          <button onClick={loadNext} disabled={loadComplete}>Add Album</button>
        </React.Fragment>
      )}
    </Floodgate>
  );
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°±æ˜¯åˆ›å»ºä¸€ä¸ªå¯å·¥ä½œçš„â€œåŠ è½½æ›´å¤šâ€ç»„ä»¶æ‰€éœ€è¦çš„å…¨éƒ¨å†…å®¹ï¼

è¦ç«‹å³å¼€å§‹ä½¿ç”¨ Floodgateï¼Œè¯·å°†å…¶å®‰è£…åˆ°æ‚¨çš„ React é¡¹ç›®ä¸­:

```
# using npm
npm i react-floodgate

# using yarn
yarn add react-floodgate 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#features)ç‰¹æ€§

è™½ç„¶ Floodgate å¾ˆç®€å•ï¼Œä½†å®ƒå¯èƒ½éå¸¸å¼ºå¤§ï¼Œè¿™å–å†³äºå®ƒçš„ç‰¹æ€§å¦‚ä½•ä¸å…¶ä»–ç»„ä»¶å’Œæ¨¡å¼ç›¸ç»“åˆã€‚ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹ Floodgate å¯ä»¥åšä»€ä¹ˆï¼›æŸ¥çœ‹[è‡ªè¿°æ–‡ä»¶](https://github.com/geoffdavis92/react-floodgate/blob/master/README.md)ä»¥è·å¾—æ›´æ·±å…¥çš„ç†è§£å’ŒæŠ€æœ¯ç»†èŠ‚ã€‚

#### [](#consume-any-type-of-data)ğŸ“Šæ¶ˆè´¹ä»»ä½•ç±»å‹çš„æ•°æ®

Floodgate çš„`data` prop åªè¦æ±‚ä¼ é€’ä¸€ä¸ªæ•°ç»„ç»™å®ƒï¼›æ•°ç»„å¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ï¼ŒåŒ…æ‹¬ç©ºçš„ï¼å­—ç¬¦ä¸²ã€è§£æçš„ JSON å¯¹è±¡ã€React ç»„ä»¶ï¼Œç”šè‡³ JavaScript å‡½æ•°éƒ½å¯ä»¥ä¼ å…¥ï¼›è¯·è®°ä½ï¼ŒFloodgate å°†è¿™äº›é¡¹ç›®çš„å‘ˆç°å’Œå®ç°ç•™ç»™äº†å¼€å‘äººå‘˜ã€‚

åƒ`data={["hello", "world"]}`ã€`data={[<li>Eggs</li>, <li>cereal</li>, <li>paper towels</li>]}`ã€`data={[]}`è¿™æ ·çš„å€¼éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œå¯ä»¥ä¼ é€’ç»™æ°´é—¸ã€‚æ³¨æ„ï¼Œè™½ç„¶ Floodgate ä¸å…³å¿ƒä»€ä¹ˆç±»å‹çš„é¡¹ç›®ç»„æˆæ•°ç»„ï¼Œä½†å»ºè®®ç¡®ä¿æ‰€æœ‰æ•°ç»„å…ƒç´ çš„ç±»å‹æ˜¯ä¸€è‡´çš„ã€‚

#### [](#determine-the-quantity-of-items-to-render)ğŸ”¢ç¡®å®šè¦æ¸²æŸ“çš„é¡¹ç›®æ•°é‡

å‘Šè¯‰ Floodgate åº”è¯¥ç”¨`initial`é“å…·åœ¨åˆå§‹æ¸²æŸ“ä¸­åŠ è½½å¤šå°‘æ¥è‡ª`data`æ•°ç»„çš„é¡¹ç›®ã€‚`increment`é“å…·å¤„ç†åœ¨æ¸²æŸ“é“å…·å‡½æ•°ä¸­å¯¹`loadNext()`çš„åç»­è°ƒç”¨ä¸­åŠ è½½å¤šå°‘é¡¹ç›®ã€‚

#### [](#%F0%9F%8E%9B-manage-props-from-a-parent-component)ğŸ›ä»çˆ¶ç»„ä»¶ç®¡ç†é“å…·

é€šè¿‡åˆ©ç”¨ React çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å’Œè‡ªå®šä¹‰å›è°ƒå±æ€§ï¼ŒFloodgate çš„å±æ€§å¯ä»¥å®Œå…¨ç”±çˆ¶ç»„ä»¶çš„çŠ¶æ€ç®¡ç†ï¼Œå…è®¸å®ä¾‹çš„æ•°æ®å¼‚æ­¥æ›´æ–°æˆ–æœ€ç»ˆç”¨æˆ·å¯¹åŠ è½½å¤šå°‘é¡¹æœ‰æ›´å¤šçš„æ§åˆ¶ã€‚æˆ‘ç§°ä¹‹ä¸º[æ§åˆ¶é—¸é—¨](https://github.com/geoffdavis92/react-floodgate#controlled-floodgate)æ¨¡å¼ã€‚

#### [](#handle-events-with-eventdriven-callback-props)â˜ï¸ç”¨äº‹ä»¶é©±åŠ¨çš„å›è°ƒé“å…·å¤„ç†äº‹ä»¶

render prop å‡½æ•°å…¬å¼€äº†è®¸å¤šç”±å…¶å­ç»„ä»¶è°ƒç”¨çš„ Floodgate æ–¹æ³•ï¼›å³`loadNext`ã€`loadAll`ã€`reset`å’Œ`exportState`ã€‚å½“è¿™äº›æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼ŒFloodgate è°ƒç”¨æä¾›ç»™`on[MethodName]`é“å…·çš„å‡½æ•°ï¼Œå¦‚æœæä¾›çš„è¯ã€‚

#### [](#leverage-the-context-api)ğŸ”®åˆ©ç”¨ä¸Šä¸‹æ–‡ API

ä» v0.6.0 å¼€å§‹ï¼ŒFloodgate åˆ©ç”¨ React çš„[ä¸Šä¸‹æ–‡ API](https://reactjs.org/docs/context.html) ,é¿å…äº†å¼€å‘äººå‘˜ä½¿ç”¨`FloodgateContext`å¯¼å‡ºå°†æ¸²æŸ“é“å…·ä¸­å…¬å¼€çš„æ–¹æ³•ä¼ é€’åˆ°ä»»ä½•éœ€è¦å®ƒä»¬çš„åœ°æ–¹ã€‚

#### [](#%F0%9F%9B%A0-built-with-typescript)ğŸ› ç”¨æ‰“å­—ç¨¿å»ºæˆ

Floodgate æ˜¯ç”¨ Typescript æ„å»ºçš„ï¼Œå¹¶åˆ†å‘äº†ä¸€ä¸ª[ç±»å‹å®šä¹‰æ–‡ä»¶](https://github.com/geoffdavis92/react-floodgate/blob/master/src/types.d.ts)ï¼Œä»¥å¢å¼ºå¼€å‘äººå‘˜çš„ä½“éªŒã€‚

### [](#examples)ä¾‹å­

ä¸ºäº†æ›´å¥½åœ°ç†è§£ Floodgate å¦‚ä½•å·¥ä½œï¼Œè¯·æŸ¥çœ‹è¿™äº› [Codesandbox.io ç¤ºä¾‹](https://codesandbox.io/search?query=&page=1&configure%5BhitsPerPage%5D=12&refinementList%5Btags%5D%5B0%5D=react-floodgate-examples)ã€‚æ‚¨å¯ä»¥çœ‹åˆ°ä»£ç çš„è®¾ç½®æ–¹å¼ï¼Œä»¥åŠæœ€ç»ˆç”¨æˆ·å°†ä¸ä¹‹äº¤äº’çš„åº”ç”¨ç¨‹åºã€‚

æˆ‘ä¸ªäººç½‘ç«™çš„[å†™ä½œé¡µé¢](https://geoffdavis.info/writing/)ä¸Šå°±æœ‰ä¸€ä¸ªç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­ã€‚

### [](#roadmap)è·¯çº¿å›¾

è¿™ä¸ªé¡¹ç›®éå¸¸ç¯ä¿ï¼Œä½†æ˜¯é™¤äº†è§£å†³é—®é¢˜å’Œæ»¡è¶³ Floodgate ç”¨æˆ·çš„è¿«åˆ‡éœ€æ±‚ä¹‹å¤–ï¼Œæˆ‘è¿˜è®¡åˆ’åœ¨ä¸ä¹…çš„å°†æ¥å®ç°ä¸€äº›åŠŸèƒ½:

*   è¯¯å·®è¾¹ç•Œ
*   æŒ‚é’©æ”¯æ¶(`useFloodgate`)
*   æ–‡æ¡£ç½‘ç«™
*   æ”¹è¿›è‡ªè¿°æ–‡ä»¶ï¼Œå°¤å…¶æ˜¯â€œè´¡çŒ®è€…â€éƒ¨åˆ†

### [](#explore-on-github)æ¢ç´¢ GitHub

Floodgate å¯åœ¨ GitHub çš„[geoffdavis 92/react-flood gate](https://github.com/geoffdavis92/react-floodgate)è·å¾—ã€‚åœ¨é‚£é‡Œï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹ç»„ä»¶çš„è‡ªè¿°æ–‡ä»¶ï¼Œæ£€æŸ¥æºæ–‡ä»¶ï¼Œæäº¤é—®é¢˜ï¼ŒæŸ¥çœ‹æ‰“å¼€çš„é¡¹ç›®ï¼Œå¹¶åšæ‰€æœ‰å¸¸è§çš„ GitHub repo äº‹æƒ…ã€‚

### [](#what-do-you-think)ä½ æ€ä¹ˆçœ‹ï¼Ÿ

ä½ å–œæ¬¢æ°´é—¸å—ï¼Ÿä½ çš„ app æ€¥éœ€è¿™ä¸ªç»„ä»¶å—ï¼Ÿè¯·é€šè¿‡[tweet å‘Šè¯‰æˆ‘](https://twitter.com/intent/tweet?text=%40gdavis92%20%5Byour%20thoughts%20here%5D%20%23reactfloodgate)è¿™ä»¶äº‹ï¼Œæˆ–è€…åœ¨ä¸‹é¢ç•™ä¸‹è¯„è®ºï¼

ğŸ‰å¿«ä¹å‘å±•ï¼ğŸ‰