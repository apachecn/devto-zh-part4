# åœ¨æ²¡æœ‰å·´åˆ«å¡”çš„æµè§ˆå™¨ä¸­è¿è¡Œ JSX

> åŸæ–‡:[https://dev . to/deval nor/running-jsx-in-your-browser-without-babel-1 AGC](https://dev.to/devalnor/running-jsx-in-your-browser-without-babel-1agc)

åªæ˜¯ä¸ºäº†å¥½ç©ï¼Œæˆ‘æƒ³çŸ¥é“æˆ‘æ˜¯å¦å¯ä»¥åœ¨ä¸€ä¸ªç°ä»£çš„æµè§ˆå™¨ä¸­ç›´æ¥è¿è¡Œ React + JSX ä»£ç ï¼Œè€Œä¸éœ€è¦ç¼–è¯‘å’Œæ‰“åŒ…ã€‚

ç­”æ¡ˆä¸æ˜¯ç«ç®­ç§‘å­¦ï¼Œåœ¨[reactjs.org](https://en.reactjs.org/docs/add-react-to-a-website.html)T2ã€ä¸Šè§£é‡Š

```
<script src="https://unpkg.com/react@16/umd/react.production.min.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js" crossorigin></script> 
```

å¯¹äº JSXï¼Œæˆ‘ä»¬ä¹Ÿå¿…é¡»åŠ ä¸Šå·´è´å°”

```
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script> 
```

ç»™ä½ ï¼ğŸ¤—

## [](#but)ä½†æ˜¯ï¼

> è¿™ç§æ–¹æ³•éå¸¸é€‚åˆå­¦ä¹ å’Œåˆ›å»ºç®€å•çš„æ¼”ç¤ºã€‚ç„¶è€Œï¼Œå®ƒä¼šä½¿ä½ çš„ç½‘ç«™è¿è¡Œç¼“æ…¢ï¼Œä¸é€‚åˆç”Ÿäº§ã€‚

æ²¡é”™ï¼Œä½ çš„ä»£ç æ²¡æœ‰ä¼˜åŒ–ï¼ŒåŠ è½½ Babel å¯èƒ½ä¼šå¤ªé‡ã€‚

è®°ä½ï¼Œè¿™æ˜¯ä¸ºäº†**åªæ˜¯ä¸ºäº†å¥½ç©**ã€‚è¿˜æœ‰å¦ä¸€ç§(ä¹Ÿå¯èƒ½æ˜¯æ›´å¥½çš„)æ–¹å¼ï¼Œä½¿ç”¨ Preact çš„åˆ›é€ è€… [@_developit](https://dev.to/_developit) åˆ¶ä½œçš„æ ‡å‡†æ ‡è®°æ¨¡æ¿ï¼Œä½¿ç”¨ [HTM](https://github.com/developit/htm) (Hyperscript æ ‡è®°æ ‡è®°)ä½œä¸º JSX çš„æ›¿ä»£æ–¹æ¡ˆã€‚

å¦‚æœæˆ‘ä»¬ä¸æ˜¯çœŸçš„éœ€è¦å·´åˆ«å¡”ï¼Œä¸‹è½½æƒé‡å·®å¼‚æ˜¯å·¨å¤§çš„ã€‚

| è§£æ”¾è¿åŠ¨ | ç‰ˆæœ¬ | è£…è½½å°ºå¯¸ |
| --- | --- | --- |
| å·´æ¯”ä¼¦å¼çš„åŸå¸‚ | Six point two six | < 195KB |
| html æ–‡ä»¶çš„åç¼€ | 2.2.1 | **> 1KB** |

```
<script src="https://unpkg.com/htm@2.2.1" crossorigin></script>
<script type="module">
// Bind htm with createElement
const html = htm.bind(createElement);
</script> 
```

### [](#its-like-jsx-but-also-lit)è¿™å°±å¥½åƒ JSX è¿˜äº®ç€ä¸€æ ·

ä½¿ç”¨ HTM æ—¶ï¼Œæ‚¨ç¼–å†™çš„è¯­æ³•å°½å¯èƒ½æ¥è¿‘ JSX:

*   ä¼ æ’­é“å…·:`<div ...${props}>`
*   è‡ªç»“æŸæ ‡ç­¾:`<div />`
*   ç»„ä»¶:`<${Foo}>` *(å…¶ä¸­`Foo`ä¸ºç»„ä»¶å‚è€ƒ)*
*   å¸ƒå°”å±æ€§:`<div draggable />`

### JSX ä¸Šç©ºçš„æ”¹è¿›

å®é™…ä¸Šå°† JSX é£æ ¼çš„è¯­æ³•å‘å‰æ¨è¿›äº†å‡ æ­¥ï¼

ä»¥ä¸‹æ˜¯ä¸€äº›ä½ å¯ä»¥å…è´¹è·å¾—çš„äººä½“å·¥ç¨‹å­¦ç‰¹æ€§ï¼Œè¿™äº›ç‰¹æ€§åœ¨ JSX æ˜¯æ²¡æœ‰çš„:

*   **ä¸éœ€è¦è¿è¾“å·¥å…·**
*   HTML çš„å¯é€‰å¼•å·:`<div class=foo>`
*   ç»„ä»¶ç»“æŸæ ‡ç­¾:`<${Footer}>footer content<//>`
*   é€šè¿‡[lit-html VSCode extension]å’Œ[vim-jsx-pretty plugin]æä¾›è¯­æ³•é«˜äº®å’Œè¯­è¨€æ”¯æŒã€‚
*   å¤šä¸ªæ ¹å…ƒç´ (ç‰‡æ®µ):`<div /><div />`
*   æ”¯æŒ HTML é£æ ¼çš„æ³¨é‡Š:`<div><!-- comment --></div>`

### [](#syntax-differences)è¯­æ³•å·®å¼‚

ä½¿ç”¨æ ‡è®°å‡½æ•°`html`
å‡ ä¹æ²¡æœ‰è¯­æ³•å·®å¼‚

```
// JSX syntax
function Header({title}) { return <h1>${title}</h1>} 

function App() {    
  const name="World"
  return (
    <div>
      <Header title="Hello, ${name}!"/>
    </div> 
  );
}

// HTM syntax
function Header({title}) { return html`<h1>${title}</h1>`} 

function App() { 
  const name="World"
  return html`
    <div>
      <${Header} title="Hello, ${name}!"/>
    </div>
  `;
} 
```

### [](#demo)æ¼”ç¤º

äº†è§£äº†è¿™äº›å·®å¼‚ï¼Œæ‚¨å°±å¯ä»¥åœ¨æ²¡æœ‰ä»»ä½• transpiler çš„æƒ…å†µä¸‹åœ¨æµè§ˆå™¨ä¸­äº«å— React(æˆ–è€… Preact)å¸¦æ¥çš„ä¹è¶£äº†ã€‚

[https://jsfiddle.net/Devalnor/aeLupb4t/24/embedded/html,result//dark](https://jsfiddle.net/Devalnor/aeLupb4t/24/embedded/html,result//dark)

### [](#bonus-preact-with-hooks)åŠ æˆ(å¸¦æŒ‚é’©çš„é¢„åŠ¨ä½œ)

å¦‚æœä½ æƒ³åœ¨ Preact 10 ä¸­ä½¿ç”¨é’©å­(ç›®å‰åœ¨å€™é€‰ç‰ˆæœ¬ä¸­)ã€‚

```
<script src="https://unpkg.com/preact@10.0.0-rc.1/dist/preact.umd.js" crossorigin></script>
<script src="https://unpkg.com/preact@10.0.0-rc.1/hooks/dist/hooks.umd.js" crossorigin></script>

<script type="module">
const { useState } = preactHooks;
// ...
</script> 
```

åœ¨ **dev.to** ä¸Šçš„ç¬¬ä¸€ä¸ªå¸–å­ï¼Œå¦‚æœä½ å–œæ¬¢å®ƒå¹¶ä¸”æƒ³è¦æ›´å¤šï¼Œä¸è¦å¿˜è®°å–œæ¬¢â¤ï¸