# Hunky Git å¿«é€ŸæŒ‡å—

> åŸæ–‡:[https://dev . to/Jacob herrington/a-quick-guide-to-hunky-git-49no](https://dev.to/jacobherrington/a-quick-guide-to-hunky-git-49no)

<sup>å°é¢å›¾ç‰‡:[ä¸¤ä¸ªäººæ‹¿ç€ Macbook Pro](https://www.pexels.com/photo/two-people-holding-macbook-pro-1181275/)by[Christina Morillo](https://www.pexels.com/@divinetechygirl)</sup>
è¯´åˆ° gitï¼Œè®¸å¤šå¼€å‘äººå‘˜éƒ½ä¹ æƒ¯äºå¯¹ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œæš‚å­˜è¿™äº›æ–‡ä»¶ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª commitã€‚

é€šå¸¸ï¼Œè¯¥å·¥ä½œæµè¿è¡Œè‰¯å¥½ã€‚ç„¶è€Œï¼Œå¶å°”ä»æ–‡ä»¶çš„è§’åº¦è€ƒè™‘ git å¯èƒ½ä¼šå¯¼è‡´éåŸå­çš„æäº¤ã€‚

æœ‰æ—¶ï¼Œæ‚¨åœ¨å•ä¸ªæ–‡ä»¶ä¸­è¿›è¡Œäº†å¤šæ¬¡æ›´æ”¹ï¼Œè€Œè¿™äº›æ›´æ”¹åº”è¯¥è¢«åˆ†æˆä¸åŒçš„æäº¤ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ­£åœ¨ä¸ºä¸€ä¸ªç±»æ·»åŠ ä¸€äº›åŠŸèƒ½ï¼Œä½†æ˜¯åœ¨å·¥ä½œè¿‡ç¨‹ä¸­å†³å®šé‡æ„å¦ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆå°†è¿™ä¸¤ä¸ªæ›´æ”¹åˆ†æˆä¸¤æ¬¡æäº¤å¯èƒ½æ˜¯æœ‰æ„ä¹‰çš„ã€‚

æ‚¨å¯ä»¥é€šè¿‡æ’¤é”€å’Œé‡æ”¾æ›´æ”¹æ¥è½»æ¾åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯å¦‚æœæ‚¨çš„æ›´æ”¹æ¯”å‡ è¡Œæ›´é‡è¦ï¼Œæˆ–è€…æ‚¨åœ¨å¤šä¸ªæ–‡ä»¶ä¸­è¿™æ ·åšï¼Œé‚£ä¹ˆåœ¨è¿™é‡Œä½¿ç”¨ git ä¼šæ›´æ–¹ä¾¿ã€‚

è¿™æ˜¯`git add --patch`çš„ç”¨ä¾‹ã€‚æ­£å¦‚å¤§å¤šæ•°ä½¿ç”¨ git çš„å¼€å‘äººå‘˜æ‰€çŸ¥,`git add`æ˜¯ä¸ºå°†æ¥çš„æäº¤å‡†å¤‡æ–‡ä»¶çš„å‘½ä»¤ã€‚æˆ‘å‘ç°è®¸å¤šä½¿ç”¨ git çš„å¼€å‘äººå‘˜ä¸å¤ªç†Ÿæ‚‰`--patch`æ ‡å¿—ï¼Œæ‰€ä»¥æˆ‘åœ¨è¿™é‡Œè§£é‡Šä¸€ä¸‹ã€‚

å½“æ‚¨é‡åˆ°ä¸€ä¸ªæ–°çš„ git å‘½ä»¤æˆ–æ ‡å¿—æ—¶ï¼Œæ‚¨åº”è¯¥åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯è¯¢é—® git:

```
git add --help 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`--help`æ ‡å¿—å°†æä¾›ç›¸å½“å¤šçš„æœ‰ç”¨æ–‡æ¡£(æ‚¨åº”è¯¥é˜…è¯»ï¼Œè€Œä¸æ˜¯æµè§ˆ),å‡†ç¡®æè¿°ç»™å®š git å‘½ä»¤çš„åŠŸèƒ½ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å°†çœ‹åˆ°`git add`å‘½ä»¤ï¼Œâ€œä½¿ç”¨å·¥ä½œæ ‘ä¸­çš„å½“å‰å†…å®¹æ›´æ–°ç´¢å¼•ï¼Œä¸ºä¸‹ä¸€æ¬¡æäº¤å‡†å¤‡å†…å®¹ã€‚â€

è¿™åŸºæœ¬ä¸Šè¯å®äº†æˆ‘ä»¬å·²ç»çŸ¥é“çš„ä¸œè¥¿ï¼Œä½†æ˜¯`--patch`å‘¢ï¼Ÿ

å‘ä¸‹æ»šåŠ¨ä¸€ç‚¹ï¼Œä½ ä¼šçœ‹åˆ°å¯¹`--patch`(å¯ä»¥ç®€ç§°ä¸º`-p`)çš„æè¿°:

```
-p, --patch
Interactively choose hunks of patch between the index and the work tree and add them 
to the index. This gives the user a chance to review the difference before adding 
modified contents to the index. 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¸ªæè¿°è§£é‡Šäº†ä¸€ä¸¤ä»¶å…³äºä½¿ç”¨`--patch`æ ‡å¿—çš„é‡è¦äº‹æƒ…ã€‚é¦–å…ˆï¼Œå®ƒå…è®¸ç”¨æˆ·â€œäº¤äº’å¼åœ°é€‰æ‹©è¦ä¸Šæ¼”çš„å¤§ç‰‡â€ã€‚ç¬¬äºŒï¼Œå®ƒâ€œç»™ç”¨æˆ·ä¸€ä¸ªæœºä¼šï¼Œåœ¨å°†ä¿®æ”¹çš„å†…å®¹æ·»åŠ åˆ°ç´¢å¼•ä¸­ä¹‹å‰ï¼ŒæŸ¥çœ‹å®ƒä»¬ä¹‹é—´çš„å·®å¼‚ã€‚â€

è™½ç„¶`git add --patch`çš„ç¬¬ä¸€ä¸ªå¥½å¤„éå¸¸æœ‰ç”¨ï¼Œä½†æˆ‘ä¹Ÿå‘ç°åœ¨åˆ›å»ºæäº¤ä¹‹å‰æ£€æŸ¥æ‚¨æ‰€åšçš„æ›´æ”¹çš„åšæ³•å¾ˆæœ‰ä»·å€¼ã€‚

ä½¿ç”¨`--patch`æ ‡å¿—éå¸¸ç®€å•ã€‚

å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘æƒ³åœ¨ [Solidus](https://solidus.io) gemspec æ–‡ä»¶ä¸­ä¿®æ”¹ä¸€äº›ä¸œè¥¿ã€‚æˆ‘å°†æ›´æ–° gem æè¿°ï¼Œå¹¶åŠ å…¥å¯¹`solidus_graphql_api`çš„ä¾èµ–ã€‚

åœ¨åšäº†è¿™äº›æ›´æ”¹ä¹‹åï¼Œæˆ‘è¿è¡Œ`git add solidus.gemspec --patch`ï¼Œæˆ‘é‡åˆ°äº†ç”¨äºæš‚å­˜å¤§å—çš„ UIã€‚

```
solidus master % git add solidus.gemspec --patch
diff --git a/solidus.gemspec b/solidus.gemspec
index 3d8d40ed4..d585334e1 100644
--- a/solidus.gemspec
+++ b/solidus.gemspec
@@ -7,7 +7,7 @@ Gem::Specification.new do |s|
   s.name        = 'solidus'
   s.version     = Spree.solidus_version
   s.summary     = 'Full-stack e-commerce framework for Ruby on Rails.'
-  s.description = 'Solidus is an open source e-commerce framework for Ruby on Rails.'
+  s.description = 'Solidus is a neat open source e-commerce framework for Ruby on Rails.'

   s.files        = Dir['README.md', 'lib/**/*']
   s.require_path = 'lib'
Stage this hunk [y,n,q,a,d,j,J,g,/,e,?]? 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘æƒ³ç°åœ¨æ˜¯å®šä¹‰å¸…å“¥çš„æ—¶å€™äº†ã€‚

GNU diffutils æ‰‹å†Œç”¨è¿™æ ·çš„è¯­è¨€æè¿°äº†ä¸€ä¸ªå¤§å—å¤´:

> æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶æ—¶ï¼Œdiff ä¼šæ‰¾åˆ°ä¸¤ä¸ªæ–‡ä»¶å…±æœ‰çš„è¡Œåºåˆ—ï¼Œè¿™äº›è¡Œåºåˆ—ä¸­æ•£å¸ƒç€ä¸åŒçš„è¡Œï¼Œç§°ä¸ºå—ã€‚

æ‰€ä»¥ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸€è¡Œæˆ–è€…å¤šè¡Œæ”¹äº†ã€‚æš‚å­˜å¤§å—è€Œä¸æ˜¯æ–‡ä»¶çš„å¥½å¤„åœ¨äºï¼Œå®ƒè®©æ‚¨å¯ä»¥ç²¾ç»†åœ°æ§åˆ¶ä½•æ—¶æš‚å­˜ä»€ä¹ˆã€‚æ‚¨å¯ä»¥åœ¨å‡†å¤‡é˜¶æ®µå®¡æŸ¥æ‚¨çš„ä»£ç ï¼Œå¹¶ä½¿æ‚¨çš„æäº¤æ›´åŠ åŸå­åŒ–ã€‚

å¦‚æœä½ åœ¨è¿™ä¸ªç•Œé¢ä¸­ï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ°æç¤ºæ˜¯ç›¸å½“ä¸é€æ˜çš„ã€‚

```
Stage this hunk [y,n,q,a,d,j,J,g,/,e,?]? 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

[![](../Images/361bb02488beacbec908fdb7588c872f.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--B2JzVvT8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://proxy.duckduckgo.com/iu/%3Fu%3Dhttps%253A%252F%252Fmedia.giphy.com%252Fmedia%252FhyMFaxhuQkZTq%252Fgiphy.gif%26f%3D1)

è°ä¼šè®¤ä¸ºæˆ‘ä»¬éœ€è¦ 11 ä¸ªé€‰é¡¹æ¥å›ç­”ä¸€ä¸ªæ˜¯/å¦çš„é—®é¢˜ï¼ï¼Ÿå¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥è®© git å‘Šè¯‰æˆ‘ä»¬ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Œç”¨ä¸€ä¸ªé—®å·æ¥å›ç­”å®ƒçš„é—®é¢˜:

```
Stage this hunk [y,n,q,a,d,j,J,g,/,e,?]? ?
y - stage this hunk
n - do not stage this hunk
q - quit; do not stage this hunk or any of the remaining ones
a - stage this hunk and all later hunks in the file
d - do not stage this hunk or any of the later hunks in the file
g - select a hunk to go to
/ - search for a hunk matching the given regex
j - leave this hunk undecided, see next undecided hunk
J - leave this hunk undecided, see next hunk
e - manually edit the current hunk
? - print help 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¾ˆæ–¹ä¾¿ï¼Œè°¢è°¢ä½ ï¼Œé¥­æ¡¶ï¼

è¿™äº›é€‰é¡¹ä¸­çš„å¤§å¤šæ•°éƒ½æ˜¯ä¾¿åˆ©çš„ç‰¹æ€§ã€‚æˆ‘ç‰¹åˆ«å–œæ¬¢`e`ï¼Œå› ä¸ºå®ƒèƒ½è®©æˆ‘çœ‹åˆ°é”™è¯¯ï¼Œå¹¶åœ¨é”™è¯¯ä¸Šæ¼”ä¹‹å‰ä¿®å¤å®ƒä»¬ã€‚åˆ©ç”¨è¿™ä¸ªå·¥å…·åº”è¯¥æœ‰åŠ©äºæ¶ˆé™¤æœªæ¥çš„æäº¤ï¼Œå¦‚â€œä¿®å¤ç©ºç™½â€æˆ–â€œæ¶ˆé™¤æ‰“å­—é”™è¯¯â€ï¼Œå› ä¸ºè¿™ç±»äº‹æƒ…å¯ä»¥åœ¨æˆ‘å‡†å¤‡æˆ‘çš„æ›´æ”¹æ—¶å¤„ç†ã€‚

è¿™çœ‹èµ·æ¥ä¸é”™ï¼Œæ‰€ä»¥æˆ‘å°†ç»§ç»­è¿›è¡Œï¼Œå¹¶ä¸`y`é˜¶æ®µè¿™ä¸€ä¸ªã€‚

ç„¶åï¼Œæˆ‘è¿›å…¥äº†ä¸‹ä¸€ä¸ªé˜¶æ®µ:

```
@@ -26,4 +26,5 @@ Gem::Specification.new do |s|
   s.add_dependency 'solidus_core', s.version
   s.add_dependency 'solidus_frontend', s.version
   s.add_dependency 'solidus_sample', s.version
+  s.add_dependency 'solidus_graphql', s.version
 end
Stage this hunk [y,n,q,a,d,K,g,/,e,?]? 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä¸æƒ³å­˜æ”¾è¿™ä¸ªï¼Œå› ä¸ºæˆ‘æƒ³ä¸ºæ·»åŠ æ–°çš„ä¾èµ–é¡¹è¿›è¡Œä¸åŒçš„æäº¤ï¼Œæ‰€ä»¥æˆ‘ç”¨`q`å“åº”æç¤ºï¼Œé€€å‡ºæç¤ºè€Œä¸å­˜æ”¾ä»»ä½•å…¶ä»–ä¸œè¥¿ã€‚

ç°åœ¨æˆ‘æäº¤å¯¹æè¿°çš„ä¿®æ”¹:

```
git commit -m "Update gem description." 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘å¯ä»¥åœ¨ä¸‹ä¸€æ¬¡æäº¤æ—¶å†æ¬¡å¯»æ‰¾åˆé€‚çš„äººé€‰:

```
git add solidus.gemspec --patch 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
@@ -26,4 +26,5 @@ Gem::Specification.new do |s|
   s.add_dependency 'solidus_core', s.version
   s.add_dependency 'solidus_frontend', s.version
   s.add_dependency 'solidus_sample', s.version
+  s.add_dependency 'solidus_graphql', s.version
 end
Stage this hunk [y,n,q,a,d,K,g,/,e,?]? 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘åœ¨è¿™é‡Œçœ‹åˆ°ä¸€ä¸ªé”™è¯¯ã€‚å®çŸ³å…¶å®å«`solidus_graphql_api`ï¼Œæˆ‘éœ€è¦å¿«é€Ÿç¼–è¾‘ä¸€ä¸‹ã€‚ç”¨`e`å›ç­”æç¤ºä¼šè®©æˆ‘è¿›å…¥ Vimï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥å¿«é€Ÿåšå‡ºæ”¹å˜ã€‚

```
# Manual hunk edit mode -- see bottom for a quick guide.
  @@ -26,4 +26,5 @@ Gem::Specification.new do |s|
   s.add_dependency 'solidus_core', s.version
   s.add_dependency 'solidus_frontend', s.version
   s.add_dependency 'solidus_sample', s.version
+  s.add_dependency 'solidus_graphql_api', s.version
  end
# ---
# To remove '-' lines, make them ' ' lines (context).
# To remove '+' lines, delete them.
# Lines starting with # will be removed.
#Â·
# If the patch applies cleanly, the edited hunk will immediately be
# marked for staging.
# If it does not apply cleanly, you will be given an opportunity to
# edit again.  If all lines of the hunk are removed, then the edit is
# aborted and the hunk is left unchanged.
~ 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨åšå‡ºå¹¶ä¿å­˜æ›´æ”¹ä¹‹åï¼Œæˆ‘å›åˆ°äº†æˆ‘çš„ç»ˆç«¯ï¼Œæˆ‘å¯ä»¥åˆ›å»ºä¸€ä¸ªæäº¤:

```
git commit -m "Add solidus_graphql_api dependency" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨å¦‚æœæˆ‘ä»¬è¦æ±‚æ—¥å¿—:

```
commit 2eff835db6807163f395529cfb89643a17b9b817 (HEAD -> test-git-patch)
Author: jacobherrington <redacted@gmail.com>
Date:   Tue Aug 13 10:39:56 2019 -0500

    Add solidus_graphql_api dependency

commit 70c9aab9d7a829042a35ebc9153b1b85c4e35292
Author: jacobherrington <redacted@gmail.com>
Date:   Tue Aug 13 09:30:09 2019 -0500

    Update gem description 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`--patch`æ ‡å¿—å¹¶ä¸æ€»æ˜¯æ­£ç¡®çš„å·¥å…·ï¼Œæœ‰æ—¶åªä¸ºæäº¤å‡†å¤‡æ–‡ä»¶å®Œå…¨æ²¡é—®é¢˜ï¼Œä½†ç‰¹åˆ«æ˜¯åœ¨æ›´å®è´¨æ€§ã€æ›´å¤æ‚çš„æ›´æ”¹çš„æƒ…å†µä¸‹ï¼Œæˆ‘è®¤ä¸ºä½¿ç”¨`--patch`æ ‡å¿—æ˜¯å¯¹è‡ªå·±çš„æ˜æ™ºæ£€æŸ¥ã€‚

é‡‡å–é¢å¤–çš„æ­¥éª¤æ¥éªŒè¯ä½ åšå‡ºäº†æ­£ç¡®çš„å†³å®šæ€»æ˜¯æ˜æ™ºçš„ã€‚

> ä¸€ä¸ªå¥½çš„ç¨‹åºå‘˜æ€»æ˜¯åœ¨ç©¿è¿‡å•è¡Œé“å‰å‘ä¸¤è¾¹çœ‹ã€‚é“æ ¼Â·æ—å¾·

æ¯«æ— å…³ç³»ï¼Œå¦‚æœæœ‰äººèƒ½å‘Šè¯‰æˆ‘é“æ ¼Â·æ—å¾·æ˜¯è°ï¼Œè¿™å¥è¯æœ€åˆæ˜¯ä»å“ªé‡Œæ¥çš„ï¼Œé‚£å°±å¤ªå¥½äº†ã€‚ğŸ¤ 