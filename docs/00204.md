# [é‡å†™]é“¾æŽ¥:Python ä¸­çš„åŒå‘åˆ«å

> åŽŸæ–‡:[https://dev . to/circle on circles/rewrite-link-bidirectional-aliasing-in-python-ekl](https://dev.to/circleoncircles/rewrite-link-bidirectional-aliasing-in-python-ekl)

Hihi~ Devsï¼Œ

é¦–å…ˆï¼Œæˆ‘æƒ³å‘Šè¯‰å¤§å®¶ï¼ŒPython-Ideas æ˜¯ä¸€ä¸ªéžå¸¸å¼€æ”¾çš„åœ°æ–¹ï¼Œæ¬¢è¿Žæ‚¨çš„æƒ³æ³•å’Œè´¡çŒ®ã€‚

äº²çˆ±çš„å‚ä¸Žè®¨è®ºçš„äºº

> è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ¥åˆ° Python æ ¸å¿ƒå¼€å‘è€…çš„åœ°æ–¹ï¼Œåœ¨å‡ ä¹Žæ‰€æœ‰çš„[pep](https://www.python.org/dev/peps/)å¼€å§‹ä¹‹å‰ï¼Œåœ¨è¿™é‡Œæå‡ºä¸€ä¸ªæƒ³æ³•ã€‚è¿™æ˜¯ä¸€æ¬¡éžå¸¸æœ‰å»ºè®¾æ€§çš„(å½“ç„¶ä¹Ÿæ˜¯æŠ€æœ¯æ€§çš„)å¯¹è¯ã€‚è€ƒè™‘åˆ°æˆ‘å¯¹æ ¸å¿ƒè¯­è¨€çš„å¼€å‘å®Œå…¨æ˜¯æ–°æ‰‹ï¼Œæˆ‘å¯¹é‚£äº›ååº”å°è±¡æ·±åˆ»ã€‚åœ¨ 3 å¤©çš„å¯¹è¯ä¸­ï¼Œæˆ‘å­¦åˆ°äº†å¾ˆå¤šè¿™é—¨è¯­è¨€çš„æŠ€æœ¯æ–¹é¢ã€‚è€Œä¸”æˆ‘çŸ¥é“è¿˜æœ‰å¾ˆå¤šè¦å­¦ä¹ çš„ï¼

4 å¤©çš„è®¨è®º(çº¿ç¨‹)çŽ°åœ¨å˜å¾—ä¸æ´»è·ƒï¼Œå¾ˆå¿«å°±ä¼šè¢«æ”¾å¼ƒã€‚æˆ‘æƒ³æŠŠè¿™ä¸ªæƒ³æ³•ç•™ç»™ä½¿ç”¨ä»»ä½•ç¼–ç¨‹è¯­è¨€çš„äººï¼Œä¸ä»…é™äºŽ pythonã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„é‡å»ºææ¡ˆæ‘˜è¦ã€‚åŽŸæ¥çš„æè®®æ˜¯[è¿™é‡Œçš„](https://dev.to/circleoncircles/python-ideas-link-bidirectional-aliasing-in-python-3f20)å’Œ[çº¿ç¨‹](https://mail.python.org/archives/list/python-ideas@python.org/thread/NS5YFU3NLMZ63F3YWAHFKNXIWKHHKHRQ/)ã€‚

**Link** æ˜¯ä¸€ç§è¯­è¨€ç‰¹æ€§ï¼Œå®ƒå…è®¸å¤šä¸ªå˜é‡åæ€»æ˜¯å¼•ç”¨ä¸€ä¸ªåç§°ç©ºé—´ä¸­å®šä¹‰çš„åŒä¸€ä¸ªåº•å±‚å¯¹è±¡ã€‚

## [](#notation-of-link)æ ‡æ³¨çš„çŽ¯èŠ‚

**é“¾æŽ¥**çš„ç¬¦å·ç”šè‡³å¦‚ä½•è°ƒç”¨å®ƒéƒ½æ˜¯å¼€æ”¾çš„ï¼Œå¯ä»¥ä¿®æ”¹ã€‚
çŽ°åœ¨ï¼Œå¦‚æžœå˜é‡ a ä¸Ž b. I é“¾æŽ¥ï¼Œæˆ‘å°†è¡¨ç¤ºä¸º`a >< b`æˆ–`link a, b`ã€‚`unlinks a`è§£é™¤ä¸€åˆ‡è”ç³»ã€‚è¦è§£é™¤å˜é‡çš„é“¾æŽ¥ï¼Œ`unlink a`ã€‚**è¿žæ†**å¯é€šè¿‡`links()`æ£€æŸ¥ï¼Œå¦‚`globals()`å’Œ`locals()`è‡³`del`å’Œ`unlinks`ï¼Œä½¿ç”¨`del_and_unlinks a`ã€‚`@link(a,b)`ä½œä¸ºå‡½æ•°é“¾æŽ¥å‚æ•°çš„è£…é¥°å™¨ã€‚è¦æ£€æŸ¥å˜é‡çš„é“¾æŽ¥ï¼Œä½¿ç”¨`aka(a)`ã€‚

### [](#link-can-be-chained)é“¾æŽ¥å¯ä»¥è¢«é“¾æŽ¥ã€‚

`a >< b >< c`ä¸Ž
ç›¸åŒ

```
a >< b
b >< c 
```

## [](#link-behaviors)é“¾æŽ¥è¡Œä¸º

è¯¥è¡Œä¸ºå¯ä»¥ç®€åŒ–ä¸º

```
a >< b
a = 1
print(b) # 1 b = 2
print(a) # 2 
del a
print(b) # will raise NamedError, both were un-binded. 
a = ['Cat', None]
assert a is b # True, both were rebinded. 
```

æ›´å¤æ‚çš„åœºæ™¯

### [](#link-after-have-assigned)é“¾æŽ¥åŽæœ‰èµ‹å€¼

å½“ä¸€ç»„åç§°æ˜¯é“¾æŽ¥æˆ–é“¾å¼é“¾æŽ¥æ—¶ã€‚ä»¥å‰åªå…è®¸åˆ†é…ä¸€ä¸ªå˜é‡(æˆ–åç§°)ã€‚å¦åˆ™ï¼Œé“¾æŽ¥å°†å¤±è´¥ï¼Œå¹¶å¼•å‘ä¸€ä¸ª`TooManyAssignError`ã€‚å› æ­¤ï¼Œ**é“¾æŽ¥**å¹¶ä¸å…³å¿ƒå˜é‡çš„é¡ºåºã€‚

```
x = 5
x >< y # or `y >< x` would be ok 
a = 1
b = 'foo'
a >< b # raise TooManyAssignError 
```

### [](#free-memory-after-unlinks)è§£é™¤é“¾æŽ¥åŽé‡Šæ”¾å†…å­˜

```
a >< b >< c
a = HighMemObject()

del a # free memory at once 
b = HighMemObject()

unlinks b # unlink all but, all will keep referring to the `HighMemObject`. 
del a # b, c still refer to the `HighMemObject` del b # c still refer to the `HighMemObject` del c # free memory 
```

> **é“¾æŽ¥**æˆ–å¤šæˆ–å°‘æœ‰ç‚¹åƒé‡å­ç‰©ç†ä¸­çš„çº ç¼ æ€§è´¨ã€‚

## [](#rationale)ç†

### [](#language-smooth-shift-newly-added-11032020)è¯­è¨€å¹³æ»‘è½¬ç§»ã€2020 å¹´ 11 æœˆ 3 æ—¥æ–°å¢žã€‘

å‡è®¾ä½ æ¥è‡ªå¦ä¸€ç§è¯­è¨€ï¼Œæ¯”å¦‚ jsã€‚æ‚¨å¯ä»¥é€šè¿‡â€œé“¾æŽ¥â€å°†æ›´å¿«çš„è¿‡æ¸¡å­˜æ¡£ã€‚æˆ‘å°†åœ¨`String` - `str`
ä¸­æä¾›ä¸€äº›ä¾‹å­

```
" Hi dude. ".trim() // "Hi dude."
"COVID-19 symptoms are Fever, Cough, and Shortness of breath".includes("Fever") // true 
```

```
str.trim >< str.strip
"    Hi dude.      ".trim() # "Hi dude." 
str.includes >< str.contains
"COVID-19 symptoms are Fever, Cough, and Shortness of breath".includes("Fever") // True 
```

### [](#alter-the-variable-name-throughout-a-complex-process)åœ¨æ•´ä¸ªå¤æ‚è¿‡ç¨‹ä¸­æ”¹å˜å˜é‡å

æ›´å®¹æ˜“ç†è§£ã€‚å¦‚æžœèƒ½å†åŠ ä¸€ä¸ªæœ‰æ„ä¹‰çš„åå­—ã€‚å‡å°‘ç¼–ç è€…å’Œè¯»è€…çš„è®¤çŸ¥è´Ÿæ‹…ã€‚æˆ‘ä»¬ä¾é æ›´å°‘çš„è¯„è®ºæ¥è·Ÿè¸ªäº‹æƒ…ã€‚

> æˆ‘ç¼–ç æˆ‘çš„æ„æ€ï¼Œæˆ‘ç¼–ç çš„æ„æ€ã€‚

```
students = School.list_students(year=4)
School.gruaduate(students)
students_graduated >< to_be_sentCertificates >< students

...

School.sendCertificates(students_graduated) 
```

> å…è®¸ç‰‡æ®µ/éƒ¨åˆ†è¯»å–ï¼Œæ— éœ€è·Ÿè¸ªä¸Šå±‚å˜é‡çš„å˜åŒ–ã€‚

è¿™ä¹Ÿå¯èƒ½æœ‰åˆ©äºŽä¸€ä¸ªåœ¨äº¤äº’å¼çŽ¯å¢ƒä¸­ç¼–ç çš„äººï¼Œæ¯”å¦‚`jupyter`ã€ **del once å’Œ free memã€‚æ— å¤„ä¸åœ¨**ä¸éœ€è¦è·Ÿè¸ªåŒä¸€ä¸ªå¯¹è±¡çš„å˜é‡ã€‚

```
import pandas as pd

df2train = pd.read_csv('train.csv') # VERY Large DataFrame df >< df2train 

...

df >< df_didEDA

...

df2train >< df_preprocessed

...

df >< df_trained
...

aka(df) # df, df2train, df_didEDA, df_preprocessed, df_trained 
del df # del once and free mem. everywhere! >//< 
```

### [](#simplify-aliasing)ç®€åŒ–èµ°æ ·

è€Œä¸æ˜¯åƒè¿™æ ·ç”¨`@property`å’Œ`@foo.setter`ä¿®é¥°å’Œå®šä¹‰åœ¨`__init__`é‡Œã€‚

```
class PackageManager:
    packages = ['requests', 'loguru']

    @property
    def installed(self):
        return self.packages

    @installed.setter
    def installed(self, value):
        self.packages = value

    def remove(self):
        ...

    def __init__(self, ...)
        ...
        self.uninstall = self.remove

# monkey patching PackageManager.uninstall = lambda x: print('uninstalled')
PackageManager.remove = lambda x: print('uninstalled') 
```

æˆ‘ä»¬å¯ä»¥å°±

```
class PackageManager:
    uninstall >< remove
    installed >< packages
    packages = ['requests', 'loguru']

    def remove(): 
        ...

# Plus >//<, one-stop service monkey patching PackageManager.uninstall = lambda x: print('uninstalled') 
```

### [](#change-unintuitivenonpythonic-naming-to-a-better-name)å°†éžç›´è§‚/éž pythonic åŒ–çš„å‘½åæ”¹ä¸ºæ›´å¥½çš„åç§°

æ¯ä¸ªäººéƒ½æœ‰ä¸åŒçš„è¯æ±‡ã€‚ä»£ç ç”¨æˆ·å¯èƒ½å¾ˆéš¾ç†è§£ç¼–ç äººå‘˜åˆ›é€ çš„æŸäº›ä¸ç†Ÿæ‚‰çš„è¯æ±‡ã€‚é“¾æŽ¥å˜é‡å…è®¸å®ƒä»¬åœ¨ä¿æŒå®Œå…¨å…¼å®¹æ€§çš„åŒæ—¶æ›´æ”¹ä¸ºæ–°åç§°ã€‚

```
from selenium import webdriver

driver = webdriver.Firefox()
webdriver.find_element_by_name >< webdriver.get_element_by_name

elem = driver.get_element_by_name("q") 
```

### [](#multilingual-code)å¤šè¯­ç§ä»£ç 

```
class Human:

    love >< çˆ± >< Ð»ÑŽÐ±Ð¾Ð²ÑŒ >< à¸£à¸±à¸ >< ðŸ’ž

    @link(you, Ð²Ñ‹, à¸„à¸¸à¸“, æ‚¨)
    def love(self, you: 'Human'):
        self.soulmate = soulmate

    def code(self):
        return "import json"

    # link function name of similar term
    program >< code

# link class name of different languages link Human, à¸¡à¸™à¸¸à¸©à¸¢à¹Œ, äººçš„, Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº, ðŸ‘¤

me = Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº()
assert me.program() == me.code() # True 

# monkey patch all at once! äººçš„.program = lambda x: "import this"
assert à¸¡à¸™à¸¸à¸©à¸¢à¹Œ().program() == me.code() # True 
```

## [probablytoambitiousexception]å…è®¸å¯¹æŒ‡å®šå¯¹è±¡çš„ä¸€éƒ¨åˆ†è¿›è¡ŒéžåµŒå¥—å‘½å

æˆ‘ä¸ç¡®å®šè¿™æ˜¯å¦åº”è¯¥æ˜¯ ***é“¾æŽ¥*** çš„ä¸€éƒ¨åˆ†ã€‚å› ä¸ºä¸æ˜¯æ‰€æœ‰çš„å¯¹è±¡éƒ½å¯ä»¥èµ‹å€¼ï¼Œæ‰€ä»¥æ ·æœ¬åº”è¯¥æ˜¯

```
house = {'resident': {'count': 12}}
house['resident']['number'] >< n_resident
n_resident = 3
print(house['resident']['number']) # print 3 
del_and_unlink house 
```

## [](#implementation-idea)å®žçŽ°è®¾æƒ³

å…³äºŽå®ƒæœ‰å‡ ç§è®¨è®ºã€‚å…·ä½“çš„æœºç†æˆ‘æŽŒæ¡ä¸äº†ã€‚è¿™æ˜¯æ¸…å•

1.  åç§°ç©ºé—´çš„ä¸œè¥¿
2.  [*åˆ«å _ æ ‡è¯†ç¬¦*å’Œè®¾å®šè¡Œä¸º](https://mail.python.org/archives/list/python-ideas@python.org/message/RQNPJZXOIGXQTM6CBSMS2MKBWA3QI6NH/)â€”â€”ç†æŸ¥å¾·Â·ç©†è¥¿å°”

æ€»ä¹‹ï¼Œå¯¹æˆ‘æ¥è¯´å¹¶ä¸åƒçœ‹èµ·æ¥é‚£ä¹ˆç®€å•ðŸ˜‚ã€‚è¿˜æ²¡æœ‰è°ˆåˆ°æ€§èƒ½ï¼Œæ²¡æœ‰åšå®žçš„å®žçŽ°è¿™ä¸€ç‚¹ã€‚

# [](#similar-existing)åŒç±»çŽ°æœ‰

1.  æŒ‡å‘åŒä¸€åœ°å€çš„ C++æŒ‡é’ˆ`auto & a = b`
2.  c é¢„å¤„ç†æŒ‡ä»¤(`#define`)ç”¨äºŽå®šä¹‰å®ã€‚
3.  Python èµ‹å€¼/é“¾å¼èµ‹å€¼:å¿«ç…§çž¬é—´çš„åŒä¸€ä¸ªå¯¹è±¡ã€‚

é¸£è°¢:å°é¢ç…§ç‰‡ç”±æ–‡æ£®ç‰¹Â·èŒƒÂ·æ‰Žæž—æ ¼åœ¨ Unsplash ä¸Šæ‹æ‘„