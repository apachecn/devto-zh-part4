# ç«‹ä½“:è§’åº¦ä¸­çš„ä»å±åè½¬åŸç†

> åŸæ–‡:[https://dev . to/philipszdavido/solid-dependency-inversion-principle-in-angular-1h3g](https://dev.to/philipszdavido/solid-dependency-inversion-principle-in-angular-1h3g)

[![](img/6dc5220645eb23fbda0e56e93a8b4211.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--rWIYhgvE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/2560/1%2A_0Qt3IrDReUYROo387OIVg.jpeg)

> å¸–å­æœ€åˆå‘å¸ƒäº [blog.bitsrc.io](https://blog.bitsrc.io/solid-the-dependency-inversion-principle-in-angular-6e4b9c484960?source=---------6------------------)
> 
> # [](#a-highlevel-modules-should-not-depend-upon-lowlevel-modules-both-should-depend-upon-abstractions)*A .é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ã€‚ä¸¤è€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚*
> 
> # [](#b-abstractions-should-not-depend-upon-details-details-should-depend-upon-abstractions)*B .æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ã€‚ç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚*

è¿™ä¸ªåŸåˆ™å£°æ˜ç±»å’Œæ¨¡å—åº”è¯¥ä¾èµ–äºæŠ½è±¡è€Œä¸æ˜¯å…·ä½“åŒ–ã€‚

> # [](#the-dependency-inversion-principle-dip-tells-us-that-the-most-flexible-systems-are-those-in-which-source-code-dependencies-refer-only-to-abstractions-not-to-concretions)*The principle of dependency inversion (DIP) tells us that the most flexible systems are those whose source code dependency only refers to the abstract rather than the concrete.*

### [](#tip-use-bit-to-get-the-most-out-of-your-solid-angular-project)æç¤º:ä½¿ç”¨ Bit æ¥å……åˆ†åˆ©ç”¨æ‚¨çš„ç«‹ä½“è§’é¡¹ç›®

å®ä½“ä»£ç æ˜¯æ¨¡å—åŒ–çš„ï¼Œå¯é‡ç”¨çš„ã€‚æœ‰äº†[* *ä½](https://bit.dev)ï¼Œ**ä½ å°±å¯ä»¥è½»æ¾* *å…±äº«å’Œç»„ç»‡ä½ çš„å¯é‡ç”¨ç»„ä»¶ã€‚**è®©æ‚¨çš„å›¢é˜Ÿçœ‹åˆ°æ‚¨æ‰€åšçš„å·¥ä½œï¼Œè·¨é¡¹ç›®å®‰è£…å’Œé‡ç”¨æ‚¨çš„ç»„ä»¶ï¼Œç”šè‡³åœ¨å•ä¸ªç»„ä»¶ä¸Šè¿›è¡Œåä½œã€‚[è¯•è¯•çœ‹](https://bit.dev)ã€‚
[**å…±äº«å¯é‡ç”¨ä»£ç ç»„ä»¶ä½œä¸ºä¸€ä¸ªå›¢é˜Ÿ Bit**
*è½»æ¾åœ°åœ¨é¡¹ç›®å’Œåº”ç”¨ç¨‹åºä¹‹é—´å…±äº«å¯é‡ç”¨ç»„ä»¶ï¼Œä»¥æ›´å¿«åœ°æ„å»ºä¸€ä¸ªå›¢é˜Ÿã€‚åˆä½œå¼€å‘â€¦*bit.dev](https://bit.dev)

ä»€ä¹ˆæ˜¯æŠ½è±¡ï¼Ÿ

æŠ½è±¡æ˜¯æ¥å£ã€‚æ¥å£å®šä¹‰äº†å®ç°ç±»å¿…é¡»å…·å¤‡çš„ä¸œè¥¿ã€‚å¦‚æœæˆ‘ä»¬åƒç•Œé¢é¤:

```
interface Meal {
    type: string
} 
```

å®ƒä¿å­˜äº†æä¾›ä»€ä¹ˆç±»å‹è†³é£Ÿçš„ä¿¡æ¯ï¼›æ—©é¤ã€åˆé¤æˆ–æ™šé¤ã€‚åƒæ—©é¤ã€åˆé¤å’Œæ™šé¤è¿™æ ·çš„å®ç°ç±»å¿…é¡»å…·æœ‰ type å±æ€§:

```
class BreakFastMeal implements Meal {
    type: string = "Breakfast"
}

class LunchMeal implements Meal {
    type: string = "Lunch"
}

class DinnerMeal implements Meal {
    type: string = "Dinner"
} 
```

æ‰€ä»¥ï¼Œä½ å¯ä»¥çœ‹åˆ° Interface ç»™å‡ºäº†å®ç°å®ƒçš„ç±»å¿…é¡»æ‹¥æœ‰ä»€ä¹ˆå±æ€§å’Œæ–¹æ³•çš„ä¿¡æ¯ã€‚æ¥å£ä¹‹æ‰€ä»¥è¢«ç§°ä¸ºæŠ½è±¡ï¼Œæ˜¯å› ä¸ºå®ƒå…³æ³¨çš„æ˜¯ä¸€ä¸ªç±»çš„ç‰¹å¾ï¼Œè€Œä¸æ˜¯è¿™ä¸ªç±»çš„ä¸€ç»„ç‰¹å¾ã€‚

ä»€ä¹ˆæ˜¯ç»“æ ¸ï¼Ÿ

å…·ä½“åŒ–æ˜¯ç±»ã€‚å®ƒä»¬æ˜¯æŠ½è±¡çš„å¯¹ç«‹é¢ï¼Œå®ƒä»¬åŒ…å«äº†å…¶ç‰¹å¾çš„å®Œæ•´å®ç°ã€‚ä¸Šé¢æˆ‘ä»¬è¯´äº†æ¥å£ Meal æ˜¯ä¸€ä¸ªæŠ½è±¡ï¼Œé‚£ä¹ˆå®ç°å®ƒçš„ç±»ï¼Œæ­£é¤ã€æ—©é¤å’Œåˆé¤æ˜¯å…·ä½“åŒ–ï¼Œå› ä¸ºå®ƒä»¬åŒ…å«äº† Meal æ¥å£çš„å®Œæ•´å®ç°ã€‚é¥­æœ‰ç‰¹è‰²ç±»å‹è¯´åº”è¯¥æ˜¯ä¸²ä¸²ç±»å‹ï¼Œç„¶åæ—©é¤é¥­æ¥äº†è¯´ç±»å‹æ˜¯â€œæ—©é¤â€ï¼Œåˆé¤é¥­è¯´ç±»å‹æ˜¯â€œåˆé¤â€ã€‚

DIP è¯´ï¼Œå¦‚æœæˆ‘ä»¬ä¾èµ–äºå…·ä½“åŒ–ï¼Œå®ƒå°†ä½¿æˆ‘ä»¬çš„ç±»æˆ–æ¨¡å—ä¸ç»†èŠ‚ç´§å¯†è€¦åˆã€‚ç»„ä»¶ä¹‹é—´çš„è€¦åˆå¯¼è‡´äº†ä¸€ä¸ªåƒµåŒ–çš„ç³»ç»Ÿï¼Œå®ƒå¾ˆéš¾æ”¹å˜ï¼Œå¹¶ä¸”åœ¨å¼•å…¥æ”¹å˜æ—¶ä¼šå¤±è´¥ã€‚

## [](#example-copier)ä¾‹å¦‚:å¤å°æœº

è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ä½¿ç”¨ DIP çš„æ•ˆæœã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç¨‹åºï¼Œå®ƒä»ç£ç›˜è·å–è¾“å…¥ï¼Œå¹¶å°†å†…å®¹å¤åˆ¶åˆ°é—ªå­˜é©±åŠ¨å™¨ã€‚

è¯¥ç¨‹åºå°†ä»ç£ç›˜ä¸­è¯»å–ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™å°†å®ƒå†™å…¥é—ªå­˜é©±åŠ¨å™¨çš„æ¨¡å—ã€‚

æºä»£ç å°†å¦‚ä¸‹æ‰€ç¤º:

```
function Copy() {
    let bytes = []
    while(ReadFromDisk(bytes))
        WriteToFlashDrv(bytes)
} 
```

æ˜¯çš„ï¼Œè¿™æ˜¯ä¸€é¡¹å‡ºè‰²çš„å·¥ä½œï¼Œä½†è¿™ä¸ªç³»ç»Ÿæ˜¯åƒµåŒ–çš„ï¼Œè€Œä¸æ˜¯çµæ´»çš„ã€‚ç³»ç»Ÿä»…é™äºä»ç£ç›˜è¯»å–å’Œå‘é—ªå­˜é©±åŠ¨å™¨å†™å…¥ã€‚å½“å®¢æˆ·ç«¯å¸Œæœ›ä»ç£ç›˜è¯»å–æ•°æ®å¹¶å†™å…¥ç½‘ç»œæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿæˆ‘ä»¬å°†çœ‹åˆ°æˆ‘ä»¬è‡ªå·±æ·»åŠ ä¸€ä¸ª if è¯­å¥æ¥æ”¯æŒæ–°æ·»åŠ çš„å†…å®¹

```
function Copy(to) {
    let bytes = []
    while(ReadFromDisk(bytes))
        if(to == To.Net)
            WriteToNet(bytes)
        else
            WriteToFlashDrv(bytes)
} 
```

çœ‹æˆ‘ä»¬*æ‘¸äº†*ä»£ç ï¼Œä¸åº”è¯¥è¿™æ ·ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¶Šæ¥è¶Šå¤šçš„è®¾å¤‡å¿…é¡»å‚ä¸å¤åˆ¶ç¨‹åºï¼Œå¤åˆ¶åŠŸèƒ½å°†å……æ»¡ if/else è¯­å¥ï¼Œå¹¶å°†ä¾èµ–äºè®¸å¤šè¾ƒä½çº§åˆ«çš„æ¨¡å—ã€‚æœ€ç»ˆä¼šå˜å¾—åƒµç¡¬è„†å¼±ã€‚

ä¸ºäº†ä½¿å¤åˆ¶å‡½æ•°å¯é‡ç”¨ä¸”ä¸é‚£ä¹ˆè„†å¼±ï¼Œæˆ‘ä»¬å°†å®ç°æ¥å£ writer å’Œ Readerï¼Œè¿™æ ·æˆ‘ä»¬æƒ³è¦è¯»å–çš„ä»»ä½•åœ°æ–¹éƒ½å°†å®ç° Reader æ¥å£ï¼Œæˆ‘ä»¬æƒ³è¦å†™å…¥çš„ä»»ä½•åœ°æ–¹éƒ½å°†å®ç° Write æ¥å£:

```
interface Writer {
    write(bytes)
}

interface Reader {
    read(bytes)
} 
```

ç°åœ¨ï¼Œæˆ‘ä»¬çš„ç£ç›˜è¯»å–å™¨å°†å®ç°è¯»å–å™¨æ¥å£:

```
class DiskReader implements Reader {
    read(bytes) {
        //.. implementation here
    }
} 
```

ç„¶åï¼Œç½‘ç»œç¼–å†™å™¨å’Œé—ªå­˜é©±åŠ¨å™¨ç¼–å†™å™¨éƒ½å°†å®ç°ç¼–å†™å™¨æ¥å£:

```
class Network implements Writer {
    write(bytes) {
        // network implementation here
    }
}

class FlashDrv implements Writer {
    write(bytes) {
        // flash drive implementation
    }
} 
```

å¤åˆ¶åŠŸèƒ½åº”è¯¥æ˜¯è¿™æ ·çš„:

```
function Copy(to) {
    let bytes = []
    while(ReadFromDisk(bytes))
        if(to == To.Net)
            WriteToNet(bytes)
        else
            WriteToFlashDrv(bytes)
}

|
|
v

function Copy(writer: Writer, reader: Reader) {
    let bytes = []
    while(reader.read(bytes))
        writer.write(bytes)
} 
```

çœ‹ï¼Œæˆ‘ä»¬çš„æ‹·è´è¢«ç¼©çŸ­æˆå‡ ä¸ªä»£ç ã€‚Copy å‡½æ•°ç°åœ¨ä¾èµ–äºæ¥å£ï¼Œå®ƒæ‰€çŸ¥é“çš„æ˜¯ Reader ä¼šè°ƒç”¨ read æ–¹æ³•æ¥å†™å…¥å­—èŠ‚ï¼ŒReader ä¼šè°ƒç”¨ read æ–¹æ³•æ¥è·å–è¦å†™å…¥çš„å­—èŠ‚ï¼Œå®ƒä¸å…³å¿ƒå¦‚ä½•è·å–æ•°æ®ï¼Œè¿™æ˜¯å®ç° Writer çš„ç±»çš„è´£ä»»ã€‚

è¿™ä½¿å¾—å¤åˆ¶åŠŸèƒ½å…·æœ‰é«˜åº¦çš„å¯é‡ç”¨æ€§ï¼Œå¹¶ä¸”ä¸é‚£ä¹ˆè„†å¼±ã€‚æˆ‘ä»¬å¯ä»¥å°†ä»»ä½•è¯»è€…æˆ–ä½œè€…ä¼ é€’ç»™å¤åˆ¶å‡½æ•°ï¼Œå®ƒæ‰€å…³å¿ƒçš„æ˜¯:

```
// read from disk and write to flash drive
Copy(FlasDrvWriter, DiskReader)

// read from flash and write to disk
Copy(DiskWriter, FlasDrvReader)

// read from disk and write to network ie. uploading
Copy(NetworkWriter, DiskReader)

// read from network and write to disk ie. downloading
Copy(DiskWriter, NetworkReader) 
```

## [](#example-nodejs-console-class)ç¤ºä¾‹:Nodejs æ§åˆ¶å°ç±»

Nodejs æ§åˆ¶å°ç±»æ˜¯æœä» DIP çš„çœŸå®åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªä¾‹å­ã€‚æ§åˆ¶å°ç±»äº§ç”Ÿè¾“å‡ºï¼Œæ˜¯çš„ï¼Œä¸»è¦ç”¨äºè¾“å‡ºåˆ°ç»ˆç«¯ï¼Œä½†å®ƒä¹Ÿå¯ä»¥ç”¨äºè¾“å‡ºåˆ°å…¶ä»–åª’ä½“ï¼Œå¦‚:

*   æ–‡ä»¶

*   ç½‘ç»œ

å½“æˆ‘ä»¬åš console.log("Nnamdi ")

Nnamdi è¢«æ‰“å°åˆ°å±å¹•ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åƒä¸Šé¢æ¦‚è¿°çš„é‚£æ ·å°†è¾“å‡ºå¼•å¯¼åˆ°å¦ä¸€ä¸ªåœ°æ–¹ã€‚

æŸ¥çœ‹æ§åˆ¶å°ç±»

```
function Console(stdout, stderr) {
    this.stdout = stdout
    this.stderr = stderr ? stderr : stdout
}

Console.prototype.log = function (whatToWrite) {
    this.write(whatToWrite, this.stdout)
}

Console.prototype.error = function (whatToWrite) {
    this.write(whatToWrite, this.stderr)
}

Console.prototype.write = function (whatToWrite, stream) {
    stream.write(whatToWrite)
} 
```

å®ƒæ¥å—æµå½¢å¼çš„ stdout å’Œ stderrï¼Œå®ƒä»¬æ˜¯é€šç”¨çš„ï¼Œæµå¯ä»¥æ˜¯ç»ˆç«¯ã€æ–‡ä»¶æˆ–ä»»ä½•ç±»ä¼¼ç½‘ç»œçš„æµã€‚stdout æ˜¯å†™é”™è¯¯çš„åœ°æ–¹ï¼Œstderr æ˜¯å†™é”™è¯¯çš„åœ°æ–¹ã€‚æˆ‘ä»¬å…¨å±€æ‹¥æœ‰çš„æ§åˆ¶å°å¯¹è±¡å·²ç»ç”¨è¦å†™å…¥ç»ˆç«¯çš„æµé›†è¿›è¡Œäº†åˆå§‹åŒ–:

```
global.console = new Console(process.stdout, process.stderr) 
```

stdout å’Œ stderr æ˜¯å…·æœ‰ write æ–¹æ³•çš„æ¥å£ï¼Œæ§åˆ¶å°åªçŸ¥é“è°ƒç”¨ stdout å’Œ stderr çš„ write æ–¹æ³•ã€‚

æ§åˆ¶å°ä¾èµ–äºæŠ½è±¡çš„ stdout å’Œ stderrï¼Œç”±ç”¨æˆ·æä¾›è¾“å‡ºæµï¼Œå¹¶ä¸”å¿…é¡»æœ‰ write æ–¹æ³•ã€‚

è¦ä½¿æ§åˆ¶å°ç±»å†™å…¥æ–‡ä»¶ï¼Œæˆ‘ä»¬åªéœ€åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æµ:

```
const fsStream = fs.createWritestream('./log.log') 
```

æˆ‘ä»¬çš„æ–‡ä»¶æ˜¯ log.logï¼Œæˆ‘ä»¬ä½¿ç”¨ fs çš„ createWriteStream API åˆ›å»ºäº†ä¸€ä¸ªå¯å†™çš„æµã€‚

æˆ‘ä»¬å¯ä»¥åˆ›å»ºå¦ä¸€ä¸ªæµæ¥è®°å½•æˆ‘ä»¬çš„é”™è¯¯æŠ¥å‘Š:

```
const errfsStream = fs.createWritestream('./error.log') 
```

æˆ‘ä»¬ç°åœ¨å¯ä»¥å°†è¿™ä¸¤ä¸ªæµä¼ é€’ç»™æ§åˆ¶å°ç±»:

```
const log = new Console(fsStream, errfsStream) 
```

å½“æˆ‘ä»¬è°ƒç”¨ log.log("å°†è¾“å…¥è®°å½•åˆ°ã€‚/log.log ")ï¼Œå®ƒä¸ä¼šå°†å…¶æ‰“å°åˆ°å±å¹•ä¸Šï¼Œè€Œæ˜¯å°†æ¶ˆæ¯å†™å…¥ã€‚/log.log æ–‡ä»¶ã€‚

å¾ˆç®€å•ï¼Œæ§åˆ¶å°ä¸éœ€è¦ä¸€é•¿ä¸²çš„ if/else è¯­å¥æ¥æ”¯æŒä»»ä½•æµã€‚

## [](#angular)æ£±è§’åˆ†æ˜

æ¥åˆ° Angular æˆ‘ä»¬å¦‚ä½•æœä»å€¾è§’ï¼Ÿ

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè®¡è´¹åº”ç”¨ç¨‹åºï¼Œåˆ—å‡ºäººä»¬çš„è®¸å¯è¯å¹¶è®¡ç®—ä»–ä»¬çš„è´¹ç”¨ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¯èƒ½å¦‚ä¸‹æ‰€ç¤º:

```
@Component({
    template: `
        <div>
            <h3>License</h3>
            <div *ngFor="let p of people">
                <p>Name: {{p.name}}</p>
                <p>License: {{p.licenseType}}</p>
                <p>Fee: {{calculateFee(p)}}</p>
            </div>
        </div>    
    `
})
export class App {
    people = [
        {
            name: 'Nnamdi',
            licenseType: 'personal'
        },
        {
            name: 'John',
            licenseType: 'buisness'
        },
        // ...
    ]

    constructor(private licenseService: LicenseService) {}

    calculateLicenseFee(p) {
        return this.licenseService.calculateFee(p)        
    }
} 
```

æˆ‘ä»¬æœ‰ä¸€é¡¹æ ¹æ®è®¸å¯è¯è®¡ç®—è´¹ç”¨çš„æœåŠ¡:

```
@Injectable()
export class LicenseService {
    calculateFee(data) {
        if(data.licenseType == "personal")
             //... calculate fee based on "personal" licnese type
        else
         //... calculate fee based on "buisness" licnese type
    }
} 
```

æ­¤æœåŠ¡ç±»åˆ«è¿åäº† DIPï¼Œå½“å¼•å…¥å¦ä¸€ä¸ªè®¸å¯è¯ç±»å‹æ—¶ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°è‡ªå·±æ·»åŠ å¦ä¸€ä¸ª if è¯­å¥åˆ†æ”¯æ¥æ”¯æŒæ–°æ·»åŠ çš„å†…å®¹:

```
@Injectable()
export class LicenseService {
    calculateFee(data) {
        if(data.licenseType == "personal")
             //... calculate fee based on "personal" licnese type
        else if(data.licenseType == "new license type")
            //... calculate the fee based on "new license type" license type
        else
            //... calculate fee based on "buisness" licnese type
    }
} 
```

ä¸ºäº†ä½¿å®ƒæœä» DIPï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªè®¸å¯æ¥å£:

```
interface License {
    calcFee():
} 
```

ç„¶åæˆ‘ä»¬å¯ä»¥æœ‰å®ç°å®ƒçš„ç±»ï¼Œæ¯”å¦‚:

```
class PersonalLicense implements License {
    calcFee() {
        //... calculate fee based on "personal" licnese type
    }
    // ... other methods and properties
}

class BuisnessLicense implements License {
    calcFee() {
        //... calculate fee based on "buisness" licnese type
    }
    // ... other methods and properties
} 
```

ç„¶åï¼Œæˆ‘ä»¬å°†é‡æ„ LicenseService ç±»:

```
@Injectable()
export class LicenseService {
    calculateFee(data: License) {
        return data.calcFee()
    }
} 
```

å®ƒæ¥å—è®¸å¯è¯ç±»å‹çš„æ•°æ®ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å‘ LicenseService # calculateFee å‘é€ä»»ä½•è®¸å¯è¯ç±»å‹ï¼Œå®ƒä¸å…³å¿ƒè®¸å¯è¯çš„ç±»å‹ï¼Œå®ƒåªçŸ¥é“æ•°æ®æ˜¯è®¸å¯è¯ç±»å‹ï¼Œå¹¶è°ƒç”¨å®ƒçš„ calcFee æ–¹æ³•ã€‚å®ç°è®¸å¯è¯æ¥å£çš„ç±»åœ¨ calcFee æ–¹æ³•ä¸­æä¾›è®¸å¯è¯è´¹ç”¨è®¡ç®—ã€‚

è§’åº¦æœ¬èº«ä¹Ÿæœä»å€¾æ–œï¼Œåœ¨å®ƒçš„æºå¤´ã€‚ä¾‹å¦‚åœ¨ç®¡é“æ¦‚å¿µä¸­ã€‚

## [](#pipe)ç®¡é“

ç®¡é“ç”¨äºåœ¨ä¸å½±å“æºçš„æƒ…å†µä¸‹è½¬æ¢æ•°æ®ã€‚åœ¨é˜µåˆ—ä¸­ï¼Œæˆ‘ä»¬åƒè¿™æ ·è½¬æ¢æ•°æ®:

*   ç»˜å›¾

*   è¿‡æ»¤

*   æ•´ç†

*   æ’æ¥

*   é™å¹…

*   å­ä¸²*çœ¨çœ¼è¡¨æƒ…ç¬¦å·æ­¤å¤„*

*   ç­‰ç­‰

æ‰€æœ‰è¿™äº›éƒ½åŸºäºå®ç°æ¥è½¬æ¢æ•°æ®ã€‚

åœ¨ Angular æ¨¡æ¿ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰ç®¡é“æ¥å£ï¼Œæˆ‘ä»¬å°±ä¼šæœ‰è½¬æ¢æ•°æ®ç®¡é“çš„ç±»ï¼Œå¦‚æ•°å­—ã€æ—¥æœŸã€JSON æˆ–è‡ªå®šä¹‰ç®¡é“ç­‰ã€‚Angular çš„ç®¡é“å®ç°å¦‚ä¸‹:

```
pipe(pipeInstance) {
    if (pipeInstance.type == 'number')
        // transform number
    if(pipeInstance.type == 'date')
        // transform date
} 
```

å¦‚æœ Angular æ·»åŠ æ–°ç®¡é“ï¼Œè¯¥åˆ—è¡¨å°†ä¼šæ‰©å±•ï¼Œå¹¶ä¸”æ”¯æŒè‡ªå®šä¹‰ç®¡é“å°†ä¼šæ›´åŠ å›°éš¾ã€‚

æ‰€ä»¥ Angular åˆ›å»ºäº†ä¸€ä¸ªæ‰€æœ‰ç®¡é“éƒ½ä¼šå®ç°çš„ PipeTransform æ¥å£:

```
interface PipeTransform {
    transform(data: any)
} 
```

ç°åœ¨ï¼Œä»»ä½•ç®¡é“éƒ½å°†å®ç°è¯¥æ¥å£ï¼Œå¹¶åœ¨è½¬æ¢æ–¹æ³•ä¸­æä¾›å…¶ç®¡é“åŠŸèƒ½/ç®—æ³•ã€‚

```
@Pipe(...)
class NumberPipe implements PipeTransform {
    transform(num: any) {
        // ...
    }
}

@Pipe(...)
class DatePipe implements PipeTransform {
    transform(date: any) {
        // ...
    }
}

@Pipe(...)
class JsonPipe implements PipeTransform {
    transform(jsonData: any) {
        // ...
    }
} 
```

ç°åœ¨ï¼ŒAngular å°†è°ƒç”¨è½¬æ¢ï¼Œè€Œä¸å…³å¿ƒç®¡é“çš„ç±»å‹

```
function pipe(pipeInstance: PipeTransform, data: any) {

    return pipeInstance.transform(data)

} 
```

## 
 [T3ã€‘
ç»“è®º](#conclusion) 

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº† DIP æ˜¯å¦‚ä½•è®©æˆ‘ä»¬æ•´ä½“ä¸Šç”¨ Angular å’Œ OOP ç¼–å†™å¯é‡ç”¨å’Œå¯ç»´æŠ¤çš„ä»£ç çš„ã€‚

åœ¨ ***å·¥ç¨‹ç¬”è®°æœ¬çš„ C++æŠ¥å‘Šæ ä¸­*ä¸º**åœ¨*çš„ä¾èµ–å€’ç½®åŸåˆ™*æ ä¸­ï¼Œå®ƒå†™é“:

ä¸€ä¸ªè½¯ä»¶æ»¡è¶³äº†å®ƒçš„éœ€æ±‚ï¼Œå´è¡¨ç°å‡ºä»¥ä¸‹ä¸‰ä¸ªç‰¹å¾ä¸­çš„ä»»ä½•ä¸€ä¸ªæˆ–å…¨éƒ¨ï¼Œè¿™æ˜¯ä¸€ä¸ªç³Ÿç³•çš„è®¾è®¡ã€‚

1.  å¾ˆéš¾æ”¹å˜ï¼Œå› ä¸ºæ¯ä¸€ä¸ªæ”¹å˜éƒ½ä¼šå½±å“åˆ°ç³»ç»Ÿä¸­å¤ªå¤šçš„å…¶ä»–éƒ¨åˆ†ã€‚(åˆšæ€§)

2.  å½“æ‚¨åšå‡ºæ›´æ”¹æ—¶ï¼Œç³»ç»Ÿä¸­æ„æƒ³ä¸åˆ°çš„éƒ¨åˆ†ä¼šä¸­æ–­ã€‚(è„†å¼±æ€§)

3.  å¾ˆéš¾åœ¨å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­é‡ç”¨ï¼Œå› ä¸ºå®ƒæ— æ³•ä»å½“å‰åº”ç”¨ç¨‹åºä¸­åˆ†ç¦»å‡ºæ¥ã€‚(ä¸åŠ¨)

å¦‚æœä½ å¯¹æ­¤æœ‰ä»»ä½•é—®é¢˜ï¼Œæˆ–è€…æˆ‘åº”è¯¥æ·»åŠ ï¼Œçº æ­£æˆ–åˆ é™¤çš„ä»»ä½•å†…å®¹ï¼Œè¯·éšæ—¶è¯„è®ºï¼Œå‘ç”µå­é‚®ä»¶æˆ–å‘çŸ­ä¿¡ç»™æˆ‘

è°¢è°¢ï¼ï¼ï¼

## [](#learn-more)äº†è§£æ›´å¤š

[**å¦‚ä½•åœ¨é¡¹ç›®å’Œåº”ç”¨ä¹‹é—´å…±äº« Angular ç»„ä»¶**
*è·¨é¡¹ç›®å…±äº«å’Œåä½œ NG ç»„ä»¶ï¼Œæ›´å¿«åœ°æ„å»ºæ‚¨çš„åº”ç”¨ã€‚*blog.bitsrc.io](https://blog.bitsrc.io/how-to-share-angular-components-between-project-and-apps-5eb0600d99d2)
[**å®£å¸ƒä¸ Angular å…¬å¼€æµ‹è¯•ç‰ˆ**
*ç‰¹åˆ«æ„Ÿè°¢å‡ºè‰²çš„ Angular å›¢é˜Ÿå…±åŒåŠªåŠ›å®ç°è¿™ä¸€ç›®æ ‡ğŸ‘*blog.bitsrc.io](https://blog.bitsrc.io/announcing-bit-with-angular-public-beta-578cbb173690)