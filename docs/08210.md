# è„¸ä¹¦éå®˜æ–¹ API +èŠå¤©æœºå™¨äººç¬¬ 3 éƒ¨åˆ†:æŠ“èŠå¤©æœºå™¨äºº+é›†æˆ

> åŸæ–‡:[https://dev . to/takunda/Facebook-official-API-chatter bot-bot-part-3-scratching-the-chatter bot-integration-5 AIO](https://dev.to/takunda/facebook-unofficial-api-chatterbot-bot-part-3-scratching-the-chatterbot-integration-5aio)

å¤§å®¶å¥½ï¼Œåœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†åªæ˜¯è·¯è¿‡èŠå¤©æœºå™¨äººçš„åœ°æ–¹ï¼Œå¹¶è¯´ä½ å¥½

#### [](#first-things-first-import-libraries)é¦–å…ˆ:å¯¼å…¥åº“

```
from chatterbot import ChatBot
from chatterbot.trainers import ListTrainer 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¸€è¡Œå°†å¯¼å…¥èŠå¤©æœºå™¨äººç±»å’Œ ListTrainerï¼Œå®ƒä»¬å°†ç”¨äºè®­ç»ƒæœºå™¨äººã€‚

#### [](#create-a-bot)åˆ›å»ºä¸€ä¸ªæœºå™¨äºº

```
chatbot = ChatBot("Adam") 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#get-a-response)å¾—åˆ°å›åº”

```
response = chatbot.get_response("Good morning!") 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#whole-code)æ•´ç 

```
from chatterbot import ChatBot
from chatterbot.trainers import ListTrainer

chatbot = ChatBot("Adam")
response = chatbot.get_response("Good morning!") 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ç»™ä½ ä»¬å±•ç¤ºäº†ä¸€äº›éå¸¸ç®€å•çš„ fbchat å’Œ chatterbot çš„ç‰‡æ®µã€‚æ˜¯æ—¶å€™å°†ä¸¤è€…ç»“åˆèµ·æ¥äº†

### [](#chatterbot-fbchat)èŠå¤©æœºå™¨äºº+ FBChat

[![Thanos joining two stones](../Images/c57a27c3d0c81d2f7f5ec63f66d63384.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--CabQWslT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn.images.express.co.uk/img/dynamic/36/590x/secondary/thanos-time-stone-1494507.jpg%3Fr%3D1536157631599)

æ‰€ä»¥æ¯æ¬¡æœ‰äººç»™æˆ‘ä»¬å‘æ¶ˆæ¯ï¼Œæˆ‘ä»¬éƒ½æƒ³æŠŠå®ƒå‘é€åˆ°èŠå¤©æœºå™¨äººï¼Œç„¶åå‘é€ï¼Œç„¶åå›å¤ç»™ç”¨æˆ·ã€‚é‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ

#### [](#import-libraries)å¯¼å…¥åº“

```
from fbchat import log, Client
from chatterbot import ChatBot
from chatterbot.trainers import ListTrainer
from fb_creds import user_name, user_pass
import pickle 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

fb_creds æ˜¯å­˜å‚¨å‡­è¯çš„æ–‡ä»¶ã€‚pickle åº“å°†ç”¨äºå­˜å‚¨å’Œæ£€ç´¢ä¼šè¯ cookiesã€‚

#### [](#creating-the-bot)åˆ›å»ºæœºå™¨äºº

```
chatbot = ChatBot("Adam") 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#behold-the-new-onmessage)çœ‹æ–°çš„ onMessage

```
def onMessage(self, author_id, message_object, thread_id, thread_type, **kwargs):
        self.markAsDelivered(thread_id, message_object.uid)
        self.markAsRead(thread_id)

        # If you're not the author, echo
        if author_id != self.uid:
            # LINES FOR ECHOING 
            response = chatbot.get_response(message_object.text)
            message_object.text = response
            self.send(message_object, thread_id=thread_id, thread_type=thread_type) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‰€ä»¥ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ message_object æ¥è·å–æ–‡æœ¬æ¶ˆæ¯ï¼Œç„¶åå°†å®ƒä¼ é€’ç»™æˆ‘ä»¬çš„èŠå¤©æœºå™¨äººã€‚åœ¨é‚£é‡Œï¼Œæˆ‘ä»¬å°† message_object æ–‡æœ¬å±æ€§æ›´æ”¹ä¸ºèŠå¤©æœºå™¨äººè¿”å›çš„ä»»ä½•å†…å®¹ï¼Œç„¶åæˆ‘ä»¬å°†å®ƒå‘é€å›å‘é€è€…ã€‚

æˆ‘ä»¬å¾ˆèªæ˜ï¼Œå¯¹å—ï¼Ÿ

[![](../Images/851468080d4b16cf2016f3616bdcd3e1.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--YTDU1Tvq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://reviewonline.co.za/wp-content/uploads/sites/68/2018/10/20180703190744-rollsafe-meme-520x350.jpeg)

ä¸ï¼Œä½ æœºå™¨äººè¿˜æ˜¯è¢«æŠ›å¼ƒäº†ã€‚ä½ ç¡è§‰çš„æ—¶å€™ï¼Œä½ çš„æœºå™¨äººä¸èƒ½ç»™ä½ æ‰¾æ–°çš„å¥³æœ‹å‹ã€‚ğŸ˜”ğŸ˜”ğŸ˜”

æ‹œæ‹œ