# åœ¨ Windows ä¸Šä½¿ç”¨ SQL Server å’Œ XAMPP / WAMP å»ºç«‹ä¸€ä¸ª Laravel é¡¹ç›®

> åŸæ–‡ï¼š<https://dev.to/mr_steelze/setting-up-a-laravel-project-with-sql-server-and-xampp-wamp-on-windows-3n7k>

æ˜¨å¤©æˆ‘èŠ±äº†å¤§éƒ¨åˆ†æ—¶é—´è¯•å›¾å°†ä¸€ä¸ªç°æœ‰çš„ Laravel é¡¹ç›®è¿æ¥åˆ° MsSQLã€‚æˆ‘çŠ¯äº†ä¸€äº›é”™è¯¯ï¼Œä½¿ç”¨äº†ä¸åŒçš„æ•™ç¨‹ï¼Œä½†æˆ‘æœ€ç»ˆå¾—åˆ°äº†å®ƒçš„è®¾ç½®ã€‚

##### **æ³¨æ„:** *æœ¬æ–‡å‡è®¾æ‚¨çš„ç³»ç»Ÿä¸Šå·²ç»æ­£ç¡®å®‰è£…äº† SQL Serverã€xampp æˆ– wamp å’Œ laravelã€‚*

é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ Laravel å®‰è£…ï¼Œå½“å®ƒå®Œæˆæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€è¯¥æ–‡ä»¶å¤¹ã€‚

```
laravel new mssql 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‰“å¼€ config æ–‡ä»¶å¤¹ä¸­çš„ database.php æ–‡ä»¶å¹¶è¿›è¡Œæ›´æ”¹ã€‚

```
 /*
    |--------------------------------------------------------------------------
    | Default Database Connection Name
    |--------------------------------------------------------------------------
    |
    | Here you may specify which of the database connections below you wish
    | to use as your default connection for all database work. Of course
    | you may use many connections at once using the Database library.
    |
    */
    //from
    'default' => env('DB_CONNECTION', 'mysql'),
    //to
    'default' => env('DB_CONNECTION', 'sqlsrv'), 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å¹¶ä¸é‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬ä»ç„¶è¦æ›´æ–°ã€‚env æ–‡ä»¶ï¼Œä½†å˜¿ï¼Œæˆ‘åªæ˜¯æƒ³è¿™æ ·åš:)ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°æˆ‘ä»¬çš„ã€‚ç¯å¢ƒæ–‡ä»¶æ•°æ®åº“å‡­è¯

```
DB_CONNECTION=sqlsrv
DB_HOST=127.0.0.1
DB_PORT=1433
DB_DATABASE=laravel
DB_USERNAME= #SQL Server username
DB_PASSWORD= #SQL Server password 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ migrate artisan å‘½ä»¤æ¥è¿è¡Œæˆ‘ä»¬çš„è¿ç§»ã€‚

```
 php artisan migrate 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬åº”è¯¥å¾—åˆ°ä¸‹é¢çš„é”™è¯¯ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦ä¸º SQL Server ä¸‹è½½å¾®è½¯ PHP é©±åŠ¨ç¨‹åºã€‚*(å¦‚æœæ‚¨çš„è¿ç§»æˆåŠŸè¿è¡Œï¼Œåˆ™æ— éœ€è¿›ä¸€æ­¥è®¾ç½®)*ã€‚

```
 Illuminate\Database\QueryException: could not find driver 
(SQL: select * from sysobjects where type = 'U' and name = migrations) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ å¯ä»¥ä»[å¾®è½¯å•†åº—](https://www.microsoft.com/en-us/download/details.aspx?id=20098)æˆ–è€…[è¿™ä¸ª GitHub é¡µé¢](https://github.com/Microsoft/msphpsql/releases)ä¸‹è½½åˆé€‚çš„é©±åŠ¨ã€‚æˆ‘ä½¿ç”¨äº†åè€…ï¼Œè¿™æ ·æˆ‘å¯ä»¥å¾ˆå®¹æ˜“åœ°ä¸‹è½½æˆ‘çš„ PHP ç‰ˆæœ¬(Windows-7.2.zip)çš„é©±åŠ¨ç¨‹åºã€‚*(æˆ‘ç”¨çš„æ˜¯ PHP 7.2)* ã€‚

æå– zip æ–‡ä»¶çš„å†…å®¹ï¼Œå¤åˆ¶ php_pdo_sqlsrv_7x_ts.dll å’Œ php_sqlsrv_7x_ts.dll æ–‡ä»¶ã€‚

**åœ¨ WAP ä¸Š**

*   å°†æ–‡ä»¶ç²˜è´´åˆ° C:\wamp64\bin\php\php7.x\ext
*   æ‰“å¼€ C:\wamp64\bin\php\php7.x æ–‡ä»¶å¤¹ä¸­çš„ php.ini æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å‡ è¡Œ

```
 extension=php_pdo_sqlsrv_7x_ts.dll
 extension=php_sqlsrv_7x_ts.dll 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*   æ‰“å¼€ C:\ wamp 64 \ bin \ Apache \ Apache 2.4 . xx \ bin æ–‡ä»¶å¤¹ä¸­çš„ php.ini æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å‡ è¡Œ

```
 extension=php_pdo_sqlsrv_7x_ts.dll
 extension=php_sqlsrv_7x_ts.dll 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*   é‡æ–°å¯åŠ¨ WAP æœåŠ¡å™¨ã€‚

**åœ¨ XAMP ä¸Š**

*   å°†æ–‡ä»¶ç²˜è´´åˆ° C:\xampp\php\ext
*   æ‰“å¼€ C:\xampp\php æ–‡ä»¶å¤¹ä¸­çš„ php.ini æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å‡ è¡Œ

```
 extension=php_pdo_sqlsrv_7x_ts.dll
 extension=php_sqlsrv_7x_ts.dll 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*   é‡æ–°å¯åŠ¨ xamppserverã€‚

åœ¨æˆ‘ä»¬çš„ç»ˆç«¯ä¸­è¿è¡Œè¿ç§»å‘½ä»¤ã€‚

```
 php artisan migrate 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿè¿è¡Œæˆ‘ä»¬çš„è¿ç§»äº†ã€‚

```
Migrating: 2014_10_12_000000_create_users_table
Migrated:  2014_10_12_000000_create_users_table (0.01 seconds)
Migrating: 2014_10_12_100000_create_password_resets_table
Migrated:  2014_10_12_100000_create_password_resets_table (0.01 seconds) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

***åŠ æˆ:*** *(æˆ‘åœ¨ SQL Server 2012 ä¸Šé¡ºä¾¿è¯´ä¸€ä¸‹)ä½¿ç”¨`unsignedBigInteger()`ä¼šæŠ›å‡ºé”™è¯¯ï¼Œæ”¹ä¸ºä½¿ç”¨`bigInteger()`ã€‚æ›´å¤šå…³äºè¿™ä¸ª[è¿™é‡Œ](https://laraveldaily.com/be-careful-laravel-5-8-added-bigincrements-as-defaults/)ã€‚*

***æ›´æ–°:*** *æ‚¨å¯èƒ½éœ€è¦ä¸‹è½½ [Microsoft ODBC é©±åŠ¨ç¨‹åº](https://go.microsoft.com/fwlink/?LinkId=163712)æ¥ä¿®å¤æ­¤é—®é¢˜-Illuminate \ Database \ query exception:SQLSTATE[IMSSP]:æ­¤æ‰©å±•éœ€è¦ Microsoft ODBC Driver for SQL Server æ‰èƒ½ä¸ SQL Server é€šä¿¡ã€‚è®¿é—®ä»¥ä¸‹ URL ä¸‹è½½ç”¨äº x64 çš„ SQL Server çš„ ODBC é©±åŠ¨ç¨‹åº:[https://go.microsoft.com/fwlink/?LinkId=163712](https://go.microsoft.com/fwlink/?LinkId=163712)T9ã€‘*

**éƒ½æ˜¯ä¹¡äº²ä»¬ï¼
å¿«ä¹ç¼–ç ğŸ––**