# Elm ä¸­çš„é”®ç›˜å¯è®¿é—®ä¸‹æ‹‰èœå•

> åŸæ–‡ï¼š<https://dev.to/margaretkrutikova/keyboard-accessible-dropdown-in-elm-5gh5>

<sup>*â€”â€”è¿˜æœ‰æˆ‘æ˜¯æ€ä¹ˆå‘ç°æµè§ˆå™¨å¾ˆç‰›é€¼çš„ï¼*ğŸ˜</sup>
è¿™æ˜¯æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« çš„åç»­ï¼Œåœ¨é‚£ç¯‡æ–‡ç« ä¸­æˆ‘å±•ç¤ºäº†å¦‚ä½•[è§£ç æ¥è‡ªäº‹ä»¶å¯¹è±¡çš„ DOM èŠ‚ç‚¹](https://dev.to/margaretkrutikova/elm-dom-node-decoder-to-detect-click-outside-3ioh)æ¥æ£€æµ‹å¤–éƒ¨ç‚¹å‡»ã€‚æˆ‘å°†ä½¿ç”¨è¿™ä¸ªæŠ€å·§å’Œæ›´å¤šçš„æŠ€å·§æ¥åˆ›å»ºä¸€ä¸ªä¸‹æ‹‰èœå•ï¼Œå®ƒå¯ä»¥åªä½¿ç”¨é”®ç›˜ã€‚

æˆ‘å°†è§£é‡Šå¦‚ä½•æ­£ç¡®å¤„ç†é”®ç›˜å’Œç„¦ç‚¹äº‹ä»¶ï¼Œè¿™å°†ä¸ºå¯è®¿é—®çš„ä¸‹æ‹‰èœå•æ‰“ä¸‹è‰¯å¥½çš„åŸºç¡€ã€‚ç„¶è€Œï¼Œæˆ‘ä¸ä¼šè®¨è®ºå¯è®¿é—®æ€§çš„å¦ä¸€ä¸ªé‡è¦æ–¹é¢â€”â€”ARIA å±æ€§ã€‚æœ€ç»ˆç‰ˆæœ¬ä¼šæ˜¯è¿™æ ·çš„:
[![final version](img/8bfefcf0ecb22977474934d3e033a268.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--K369LDUd--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/irrxkspelmt5fj6tty3b.gif)

æ‰€æœ‰æºä»£ç éƒ½åœ¨æˆ‘çš„ [github](https://github.com/MargaretKrutikova/elm-accessible-dropdown) å’Œ[è‰¾è‰](https://ellie-app.com/5PvmxZtNYw9a1)ä¸Šã€‚

## è¦æ±‚

è®©æˆ‘ä»¬æ­£å¼å®šä¹‰æˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½ã€‚ç”¨æˆ·åº”è¯¥èƒ½å¤Ÿ:

*   æŒ‰ tab é”®è¿›å…¥ä¸‹æ‹‰èœå•ï¼Œ
*   ç”¨å›è½¦é”®æˆ–ç©ºæ ¼é”®æ‰“å¼€å®ƒï¼Œ
*   ä½¿ç”¨ç®­å¤´é”®â¬†ï¸å’Œâ¬‡ï¸å¯¼èˆªæ—¶çš„ç„¦ç‚¹é€‰é¡¹ï¼Œ
*   ç”¨ Enter/Space é€‰æ‹©å½“å‰èšç„¦çš„é€‰é¡¹ï¼Œ
*   ç”¨ Escape é”®æˆ– tab é”®é€€å‡ºæ¥å…³é—­ä¸‹æ‹‰èœå•ã€‚

å®æ–½åŒ…æ‹¬:

*   è®¢é˜…`keydown`äº‹ä»¶ï¼Œ
*   è§£ç è¢«æŒ‰ä¸‹çš„é”®ï¼Œ
*   æ ¹æ®æŒ‰ä¸‹çš„é”®æ›´æ–°æ¨¡å‹ï¼Œ
*   ä½¿ç”¨ç®­å¤´é”®å¯¼èˆªæ—¶å°†ç„¦ç‚¹è®¾ç½®åœ¨é€‰é¡¹ä¸Šï¼Œ
*   å¤„ç†ç„¦ç‚¹å…¥/å‡ºä»¥æ‰“å¼€/å…³é—­ä¸‹æ‹‰èœå•ã€‚

## HTML ç»“æ„

è®©æˆ‘ä»¬ä¸ºæ‰“å¼€çš„ä¸‹æ‹‰åˆ—è¡¨æ·»åŠ ä¸€äº›`HTML`æ¥æ›´å¥½åœ°ç†è§£å®ƒçš„ç»“æ„:

```
<div id="dropdown">
  <button id="dropdown-button">Select option</button>
  <div>
    <ul id="dropdown-list">
      <li id="option_1">Option 1</li>
      <li id="option_2">Option 2</li>
      ...
    </ul>
  </div>
</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œæˆ‘ä»¬æƒ³ä¸ºæ ¹èŠ‚ç‚¹`div`(id ä¸º`dropdown`)é™„åŠ ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ç›‘å¬å™¨`keydown`ï¼Œå¹¶æ ¹æ®æŒ‰ä¸‹çš„é”®ï¼Œæ ¹æ®æˆ‘ä»¬ä¸Šé¢å®šä¹‰çš„éœ€æ±‚æ›´æ–°æ¨¡å‹ã€‚

## å‹å·

ä¸ºäº†ä½¿ç”¨å‘ä¸Š/å‘ä¸‹ç®­å¤´å¯¼èˆªé€‰é¡¹åˆ—è¡¨ï¼Œæˆ‘ä»¬éœ€è¦è·Ÿè¸ªå½“å‰èšç„¦çš„é¡¹ç›®ã€‚æˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“
ä¸‹æ‹‰åˆ—è¡¨æ˜¯å¦æ‰“å¼€ï¼Œé€‰æ‹©çš„é€‰é¡¹ idï¼Œä»¥åŠè¦æ˜¾ç¤ºçš„é€‰é¡¹åˆ—è¡¨:

```
type alias Model =
    { open : Bool
    , selectedId : Maybe String
    , focusedId : Maybe String
    , options : List String
    } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## é™„åŠ è‡ªå®šä¹‰æŒ‰é”®äº‹ä»¶

Elm å…è®¸é™„åŠ è‡ªå®šä¹‰äº‹ä»¶ä¾¦å¬å™¨ï¼Œå¹¶ä»äº‹ä»¶å¯¹è±¡ä¸­è§£ç å±æ€§ã€‚`Html.Events`æš´éœ² [`on`](https://package.elm-lang.org/packages/elm/html/latest/Html-Events#on) ï¼Œå®ƒæ¥å—äº‹ä»¶åç§°å’Œä¸€ä¸ª`JSON`è§£ç å™¨ã€‚

ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬åªæ˜¯ç”¨`on`å¬`keydown`ï¼Œå¹¶å°è¯•æŒ‰ä¸‹å‘ä¸Š/å‘ä¸‹ç®­å¤´ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°æ•´ä¸ªé¡µé¢æ»šåŠ¨ï¼Œå› ä¸ºè¿™æ˜¯é»˜è®¤çš„æµè§ˆå™¨è¡Œä¸º(ä½ å¯ä»¥åœ¨è¿™ä¸ªå°[è‰¾è‰](https://ellie-app.com/5PvvT7pXfwBa1)ä¸­è‡ªå·±æ£€æŸ¥)ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨é™„åŠ äº‹ä»¶ç›‘å¬å™¨æ—¶ä½¿ç”¨ [`preventDefaultOn`](https://package.elm-lang.org/packages/elm/html/latest/Html-Events#preventDefaultOn) è€Œä¸æ˜¯`on`æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚`preventDefaultOn`éœ€è¦ä¸€ä¸ªæ¶ˆæ¯çš„å…ƒç»„è§£ç å™¨å’Œä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ˜¯å¦é˜»æ­¢é»˜è®¤ã€‚è®©æˆ‘ä»¬åœ¨è§†å›¾ä¸­å°†å…¶ä¸`keydown`äº‹ä»¶çš„æ¶ˆæ¯ä¸€èµ·ä½¿ç”¨:

```
import Html.Events as Events

type KeyPressed
    = Up
    | Down
    | Escape
    | Enter
    | Space
    | Other

type Msg  =
    ...
    | KeyPress KeyPressed

viewDropdown : Model -> Html Msg
viewDropdown model =
    div
        [ id "dropdown"
        , Events.preventDefaultOn "keydown" keyDecoder
        ]
        [...] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬å®ç°`keyDecoder`æ¥æ¥æ”¶äº‹ä»¶å¯¹è±¡ï¼Œè§£ç å®ƒï¼Œåˆ†æ´¾`KeyPress`å¹¶é˜»æ­¢é»˜è®¤çš„æ»šåŠ¨è¡Œä¸ºã€‚ä¸ºäº†æå–æŒ‰ä¸‹çš„é”®ï¼Œæˆ‘ä»¬å¯ä»¥ä»äº‹ä»¶å¯¹è±¡ä¸­ä½¿ç”¨ [`event.key`](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key) ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºæˆ‘ä»¬çš„è‡ªå®šä¹‰ç±»å‹`KeyPressed` :

```
keyDecoder : Decode.Decoder ( Msg, Bool )
keyDecoder =
    Decode.field "key" Decode.string
        |> Decode.map toKeyPressed
        |> Decode.map
            (\key ->
                ( KeyPress key, preventDefault key )
            )

preventDefault key =
    key == Up || key == Down

toKeyPressed : String -> KeyPressed
toKeyPressed key =
    case key of
        "ArrowUp" -> Up

        "ArrowDown" -> Down

        "Escape" -> Escape

        "Enter" -> Enter

        " " -> Space

        _ -> Other 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*æ³¨æ„:è¿™ä¸æ˜¯ elm æ ¼å¼åŒ–ç¨‹åºçš„åŸå§‹æ ¼å¼ï¼Œä¸ºäº†èŠ‚çœå±å¹•ç©ºé—´ï¼Œå»æ‰äº†ä¸€äº›é¢å¤–çš„æ¢è¡Œç¬¦ã€‚*

å¤„ç†é”®ç›˜äº‹ä»¶çš„ç±»ä¼¼æ–¹æ³•è®°å½•åœ¨ [elm é”®ç›˜æ³¨é‡Š](https://github.com/elm/browser/blob/master/notes/keyboard.md)ä¸­ã€‚

## æ›´æ–°åŠŸèƒ½

åœ¨æ›´æ–°åŠŸèƒ½ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¤„ç†`KeyPress`å¹¶æ ¹æ®ä¸‹æ‹‰èœå•å½“å‰æ˜¯å…³é—­è¿˜æ˜¯æ‰“å¼€å¯¹ä¸€ç»„ç‰¹å®šçš„é”®åšå‡ºååº”ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¼€æ”¾çŠ¶æ€ä¸‹çš„å®ç°æ˜¯ä»€ä¹ˆæ ·å­:

```
handleKeyWhenOpen : Model -> KeyPressed -> ( Model, Cmd Msg )
handleKeyWhenOpen model key =
    case key of
        Enter ->
            ( { model | selectedId = model.focusedId }, Cmd.none )
        Space ->
            ( { model | selectedId = model.focusedId }, Cmd.none )
        Up ->
            ( { model | focusedId = getPrevId model }, Cmd.none )
        Down ->
            ( { model | focusedId = getNextId model }, Cmd.none )
        Escape ->
            ( { model | open = False }, Cmd.none )
        Other ->
            ( model, Cmd.none ) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œ`getPrevId`å’Œ`getNextId`ä»èšç„¦çš„é¡¹ç›®ä¸­æ‰¾åˆ°å·¦è¾¹å’Œå³è¾¹çš„é¡¹ç›®ã€‚ä½ å¯ä»¥åœ¨æˆ‘çš„ [github](https://github.com/MargaretKrutikova/elm-accessible-dropdown/blob/master/src/AccessibleDropdown.elm#L408) ä¸ŠæŸ¥çœ‹ä»–ä»¬çš„å®ç°ã€‚

è®©æˆ‘ä»¬çœ‹çœ‹ç›®å‰ä¸ºæ­¢æˆ‘ä»¬æœ‰ä»€ä¹ˆ:

[![Uh ho! no scroll into focused option](img/8f0504ac69e3a763e9ab63097e2ec86c.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--DWaYE4p9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/6h6ipcc99kiwdd2jsuws.gif)

å“¦å“¦...åˆ—è¡¨ä¸ä¼šæ»šåŠ¨åˆ°èšç„¦çš„é€‰é¡¹ä¸­ï¼Œå¹¶ä¸”ä¼šä»å¯è§åŒºåŸŸä¸­æ¶ˆå¤±ã€‚å› æ­¤ï¼Œå½“ç„¦ç‚¹é¡¹æ”¹å˜æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°æ»šåŠ¨ä½ç½®ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘é¦–å…ˆå·èµ·è¢–å­ï¼Œä½¿ç”¨`Dom.getViewportOf`ã€`Dom.getElement`ã€`Dom.setViewportOf`å¹¶è®¡ç®—åç§»ä½ç½®ï¼Œæå‡ºäº†è‡ªå·±çš„å®ç°ã€‚ğŸ¤¯

æˆ‘ä¸ºæˆ‘çš„*æ™ºèƒ½*è§£å†³æ–¹æ¡ˆæ„Ÿåˆ°éå¸¸è‡ªè±ªï¼Œåæ¥æ‰å‘ç°æµè§ˆå™¨å¯¹èšç„¦å…ƒç´ æœ‰è¿™ç§å†…ç½®çš„è¡Œä¸º**ã€‚ğŸ˜²ğŸ¤¦â€â™€ï¸**

ä» [MDN æ–‡æ¡£ä¸­çš„](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus)ï¼Œ`focus`å…ƒç´ ä¸Šçš„æ–¹æ³•:

> å°†å…ƒç´ æ»šåŠ¨åˆ°æµè§ˆå™¨çª—å£çš„å¯è§åŒºåŸŸ

<sup>**å“‡ï¼æµè§ˆå™¨å¤ªç‰›äº†ï¼**ğŸ’ª</sup>
é€šè¿‡åœ¨ç”¨é”®å¯¼èˆªæ—¶å°†ç„¦ç‚¹è®¾ç½®åœ¨é€‰é¡¹ä¸Šï¼Œæˆ‘ä»¬å°†è‡ªåŠ¨è·å¾—æƒ³è¦çš„æ»šåŠ¨è¡Œä¸ºï¼Œè®©æˆ‘ä»¬å°±è¿™ä¹ˆåšå§ï¼

## èšç„¦å¯¼èˆªé€‰é¡¹

`Browser.Dom`æš´éœ² [`focus`](https://package.elm-lang.org/packages/elm/browser/latest/Browser-Dom#focus) æ¥å—å…ƒç´ çš„ id å¹¶è¯•å›¾èšç„¦å®ƒã€‚æˆ‘ä»¬å°†ä½¿ç”¨ [`Task.attempt`](https://package.elm-lang.org/packages/elm/core/latest/Task#attempt) å°†ä»`focus`è¿”å›çš„`Task`è½¬æ¢æˆå‘½ä»¤:

```
import Task

type Msg
    = KeyPress KeyPressed
    | NoOp

focusOption : String -> Cmd Msg
focusOption optionId =
    Task.attempt (\_ -> NoOp) (Dom.focus optionId) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬æ¯æ¬¡ä½¿ç”¨ç®­å¤´é”®
å¯¼èˆªæ—¶éƒ½ä½¿ç”¨`focusOption`

```
handleKeyWhenOpen model key =
    case key of
        Up ->
            navigateWithKey model (getPrevId model)
        Down ->
            navigateWithKey model (getNextId model)
        ...

navigateWithKey : Model -> Maybe String -> ( Model, Cmd Msg )
navigateWithKey model focusedId =
    ( { model | focusedId = focusedId }
    -- here we use focusOption
    , focusedId |> Maybe.map focusOption |> Maybe.withDefault Cmd.none
    ) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬çš„`html`ä¸­çš„æ¯ä¸ª`li`éƒ½éœ€è¦æœ‰ä¸€ä¸ª id å’Œæ ‡ç­¾ç´¢å¼•æ‰èƒ½è¢«èšç„¦ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬ç›¸åº”åœ°ä¿®æ”¹æˆ‘ä»¬çš„è§‚ç‚¹:

```
import Html.Attributes exposing (id, tabindex)

viewOption : Model -> Option -> Html Msg
viewOption model option =
    li
        [ id option.id, tabindex -1 ]
        [ text option.label ] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘åœ¨è¿™é‡Œä¹Ÿåšäº†ä¸€ç‚¹æ‰‹è„šï¼Œåœ¨æˆ‘çš„`css`ä¸­æ·»åŠ äº†`scroll-behavior: smooth;`æ¥ä½¿æ»šåŠ¨çœ‹èµ·æ¥æ›´å¥½ï¼Œå› ä¸ºä¸ºä»€ä¹ˆä¸å‘¢ï¼Ÿ

ç°åœ¨ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä»¶äº‹è¦åšâ€”â€”å…³é—­ç„¦ç‚¹ä¸Šçš„ä¸‹æ‹‰èœå•ã€‚

## æŠŠæ‰‹èšç„¦å‡ºå»

åœ¨æˆ‘ä¹‹å‰çš„ä¸­ï¼Œæˆ‘å±•ç¤ºäº†å¦‚ä½•è§£ç äº‹ä»¶å¯¹è±¡ä»¥åœ¨ç‚¹å‡»å¤–éƒ¨æ—¶å…³é—­ä¸‹æ‹‰èœå•ã€‚ç®€è€Œè¨€ä¹‹ï¼Œè§£ç å™¨ä½¿ç”¨`event.target`ï¼Œéå† DOM æ ‘ï¼Œæ£€æŸ¥æ¯ä¸ªå…ƒç´ çš„ id æ˜¯å¦ä¸ä¸‹æ‹‰åˆ—è¡¨çš„ id ç›¸åŒ¹é…ï¼Œå¦‚æœæ‰¾åˆ°åŒ¹é…çš„è¯â€”â€”äº‹ä»¶å‘ç”Ÿåœ¨ä¸‹æ‹‰åˆ—è¡¨å†…éƒ¨ã€‚

è®©æˆ‘ä»¬ä½¿ç”¨åŒæ ·çš„æ–¹æ³•ï¼Œä½†æ˜¯å¯¹äºäº‹ä»¶å¯¹è±¡ä¸Šçš„`focusout`äº‹ä»¶å’Œ`relatedTarget`å±æ€§ã€‚ [`relatedTarget`](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/relatedTarget) åœ¨è¿™ç§æƒ…å†µä¸‹å°†è¯¥å…ƒç´ æ¥æ”¶ç„¦ç‚¹ã€‚æˆ‘ä»¬å°†ä½¿ç”¨æ¥è‡ª`Browser.Events` :
çš„`on`é™„åŠ ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ç›‘å¬å™¨

```
viewDropdown : Model -> Html Msg
viewDropdown model =
    div
        [ id "dropdown"
        , Events.preventDefaultOn "keydown" keyDecoder
        , Events.on "focusout" (onFocusOut "dropdown")
        ]
        [...]

onFocusOut : String -> Decode.Decoder Msg
onFocusOut id =
    outsideTarget "relatedTarget" id 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œçš„`outsideTarget`æ˜¯ä¸€ä¸ªè§£ç å™¨ï¼Œå®ƒå°†å›ç­”è¿™ä¸ªé—®é¢˜:**æ˜¯ä¸‹æ‹‰åˆ—è¡¨ä¹‹å¤–çš„ä¸€ä¸ªå…ƒç´ æ¥ç®¡äº†ç„¦ç‚¹å—ï¼Ÿ**å‘é€å…³é—­ä¸‹æ‹‰èœå•çš„æ¶ˆæ¯ã€‚[è¿™é‡Œçš„](https://github.com/MargaretKrutikova/elm-accessible-dropdown/blob/master/src/AccessibleDropdown.elm#L320)æ˜¯è§£ç å™¨çš„æºä»£ç ã€‚

## å¤§ç»“å±€

æˆ‘ä»¬ç°åœ¨å·²ç»ä¸ºä¸‹æ‹‰èœå•å®ç°äº†é”®ç›˜æ”¯æŒã€‚å‰©ä¸‹æ¥è¦æ»¡è¶³å¯è®¿é—®æ€§éœ€æ±‚çš„å°±æ˜¯æ·»åŠ é€‚å½“çš„`ARIA`å±æ€§ï¼Œå¹¶ç”¨å±å¹•é˜…è¯»å™¨æµ‹è¯•ä¸‹æ‹‰èœå•ã€‚

å¯¹äºä¸‹æ‹‰èœå•çš„å®ç°ï¼Œæˆ‘å‚è€ƒäº†ä»¥ä¸‹å…³äºå¯è®¿é—®æ€§çš„èµ„æºï¼Œè¿™äº›èµ„æºå¯èƒ½æœ‰åŠ©äºè¿›ä¸€æ­¥æ”¹è¿›å®ƒ:

*   [åˆ—è¡¨æ¡†çš„é”®ç›˜äº¤äº’](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/listbox_role#Keyboard_interactions)ï¼Œ
*   [å’å¹è°ƒç»ƒä¹ ï¼Œå¯æŠ˜å ä¸‹æ‹‰èœå•](https://www.w3.org/TR/wai-aria-practices/examples/listbox/listbox-collapsible.html)ã€‚

* * *

è°¢è°¢ä½ çš„æ¥è®¿ï¼ğŸ’¨