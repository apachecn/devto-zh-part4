# ä½ èƒ½è§£å†³è¿™ä¸ª JavaScript é—®é¢˜å—ï¼Ÿ

> åŸæ–‡ï¼š<https://dev.to/varundey/can-you-solve-this-javascript-problem-272o>

> ä½ ä¹Ÿå¯ä»¥åœ¨æˆ‘çš„ç½‘ç«™ä¸Šæ‰¾åˆ°è¿™ç¯‡æ–‡ç« çš„å‰¯æœ¬

æˆ‘æœ€è¿‘å¶ç„¶å‘ç°äº†è¿™ä¸ª JavaScript è„‘ç­‹æ€¥è½¬å¼¯ï¼Œæˆ‘æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹ã€‚

> åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ç»„å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶å¯¹å®ƒä»¬æ‰§è¡Œä»å·¦åˆ°å³çš„ç»„åˆã€‚ç„¶åï¼Œå®ƒä»ä¸€ä¸ªå‡½æ•°è¿”å›ç»“æœï¼Œè¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå¹¶å¯¹è¯¥å‚æ•°æ‰§è¡Œåˆæˆã€‚

### ä¸¾ä¾‹:

```
const addOne = num => num + 1;
const substractTwo = num => num - 2;
const multiplyThree = num => num * 3;

const resp = compose(addOne, substractTwo, multiplyThree);
const result = resp(4);
console.log(result);    // 9

/**
This is similar to multiplyThree(substractTwo(addOne(4)));
*/ 
```

å¥½ç©å§ï¼Ÿæˆ‘èŠ±äº†å¤§çº¦ 20 åˆ†é’Ÿæƒ³å‡ºäº†ä¸€ä¸ªæ²¡æœ‰è°·æ­Œ/é…å¯¹ç¼–ç çš„å·¥ä½œè§£å†³æ–¹æ¡ˆã€‚æˆ‘ä½¿ç”¨ç»å…¸çš„æ™®é€š JavaScriptï¼Œæµè§ˆå™¨æ§åˆ¶å°ä½œä¸ºæˆ‘çš„ç¼–è¾‘å™¨ï¼Œconsole.logs/break ç‚¹ç”¨äºè°ƒè¯•ã€‚ğŸ˜…æˆ‘å½“ç„¶å¸Œæœ›ä½ èƒ½åšå¾—æ›´å¥½ã€‚åœ¨è¿›ä¸€æ­¥é˜…è¯»ä¹‹å‰ï¼Œæˆ‘å»ºè®®æ‚¨æå‡ºè‡ªå·±çš„å·¥ä½œå®ç°ã€‚

## å‰§é€è­¦æŠ¥

ä»è¿™ä¸€èŠ‚å¼€å§‹ï¼Œæˆ‘å°†å†™ä¸‹è§£å†³è¿™ä¸ªé—®é¢˜æ–¹æ³•ã€‚è¿™æ˜¯æˆ‘å¦‚ä½•è§£å†³å®ƒçš„æ¼”ç»ƒã€‚è¿™å°†æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç‚¹ï¼Œä»¥ç¼–å†™è‡ªå·±çš„è§£å†³æ–¹æ¡ˆä¹‹å‰ï¼Œé€šè¿‡è¿™äº›æ­¥éª¤ã€‚å¦‚æœä½ è¢«å›°åœ¨æŸä¸ªåœ°æ–¹ï¼Œä½ å¯ä»¥ä»ä¸‹é¢çš„åˆ—è¡¨è·³åˆ°é‚£ä¸ªéƒ¨åˆ†(å‡è®¾ä½ çš„æ–¹æ³•å’Œæˆ‘çš„ä¸€æ ·)ã€‚æˆ‘æƒ³ä½ å·²ç»è¢«è­¦å‘Šè¿‡äº†å§ï¼ŸğŸ¤·â€â™‚ï¸

### è¯†åˆ«é—®é¢˜é™ˆè¿°çš„éƒ¨åˆ†

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œé€šè¿‡ä»”ç»†ç ”ç©¶è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘çŸ¥é“ã€‚æˆ‘éœ€è¦åˆ›å»ºä¸€ä¸ªå‡½æ•°
2ã€‚è¿™ä¸ªå‡½æ•°åº”è¯¥å¸¦ä¸€å †å‡½æ•°å‚æ•°
3ã€‚åº”è¯¥è¿”å›ä¸€ä¸ªå‡½æ•°
4ã€‚è¿™ä¸ªè¿”å›å‡½æ•°åº”è¯¥å–è¾“å…¥å€¼
5ã€‚è¿›è¡Œè®¡ç®—
6ã€‚è¿”å›ç»“æœ

å› ä¸ºå¯¹äºåŸå‹ï¼Œæˆ‘å‘ç°åœ¨ Chrome å¼€å‘å·¥å…·ä¸­åˆ›å»ºä¸€ä¸ªä»£ç ç‰‡æ®µæ˜¯æœ€å®¹æ˜“çš„ã€‚æˆ‘æ‰“å¼€ Chrome æµè§ˆå™¨ï¼Œåœ¨`Sources`æ ‡ç­¾çš„`Snippets`éƒ¨åˆ†åˆ›å»ºäº†ä¸€ä¸ªç‰‡æ®µ`composition.js`ã€‚æˆ‘é€šå¸¸èµ°è¿™æ¡è·¯ï¼Œå› ä¸ºå®ƒå¸®åŠ©æˆ‘è®¾ç½® console.logs å¹¶æ”¾ç½®æ–­ç‚¹ï¼Œè€Œä¸éœ€è¦åˆ›å»ºä¸å¿…è¦çš„ web åº”ç”¨ç¨‹åºã€‚

### 1ã€‚åˆ›å»ºå‡½æ•°

è¿™å¯èƒ½æ˜¯æœ€ç®€å•çš„ä¸€æ­¥ã€‚ä½œä¸ºè¿™ä¸€æ­¥çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘è¿˜å°†è®¾ç½®ç»™å®šçš„ç¤ºä¾‹å‚æ•°

```
const addOne = num => num + 1;
const substractTwo = num => num - 2;
const multiplyThree = num => num * 3;

const compose = () => {} 
```

### 2ã€‚æœªçŸ¥æ•°é‡çš„å‚æ•°

ç°åœ¨æˆ‘å·²ç»æœ‰äº†æˆ‘çš„è™šæ‹Ÿå‡½æ•°ï¼Œæˆ‘éœ€è¦ä¼ å…¥æœªçŸ¥æ•°é‡çš„å‚æ•°ã€‚è¿™å¾ˆç®€å•ã€‚åœ¨ JavaScript å‡½æ•°ä¸­å”¯ä¸€å¯ä»¥ä¼ å…¥æœªçŸ¥æ•°é‡å‚æ•°çš„æ–¹æ³•æ˜¯`...args`ã€‚è¿™å°†è¿”å›ä¸€ä¸ªä¼ é€’çš„å‚æ•°æ•°ç»„ã€‚

```
const compose = (...args) => console.log(args);

compose(1, 2, 3); 
```

### 3ã€‚è¿”å›ä¸€ä¸ªå‡½æ•°

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘å·²ç»å»ºç«‹äº†ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€å †å‚æ•°å¹¶æ‰“å°å‡ºæ¥ã€‚å®ƒä¸€ç›´å·¥ä½œåˆ°ç°åœ¨ã€‚ç°åœ¨ä»ç»™å‡ºçš„ä¾‹å­æ¥çœ‹ï¼Œå¾ˆæ˜æ˜¾ï¼Œæœ€ç»ˆç»“æœå­˜åœ¨äºå¦ä¸€ä¸ªå‡½æ•°é—­åŒ…ä¸­ï¼Œè¿™ä¸ªé—­åŒ…ä¼¼ä¹æ˜¯ä»`compose`å‡½æ•°è¿”å›çš„ã€‚

```
const compose = (...funcs) => {
    return () => console.log(funcs)
}

const result = compose(addOne, substractTwo, multiplyThree);
result(); 
```

### 4ã€‚ä½¿é—­åŒ…æ¥å—è¾“å…¥

ç°åœ¨æˆ‘å·²ç»åˆ›å»ºäº†æˆ‘çš„é—­åŒ…ï¼Œæˆ‘éœ€è¦è®©å®ƒæ¥å—ä¸€ä¸ªè®ºç‚¹ï¼Œæˆ‘å°†éªŒè¯å®ƒåœ¨è¿™ä¸€ç‚¹ä¸Šæ˜¯æ­£ç¡®çš„ã€‚

```
const compose = (...funcs) => {
    return n => console.log(funcs, n)
}

const result = compose(addOne, substractTwo, multiplyThree);
result(4); 
```

### 5ã€‚åšè®¡ç®—

è¿™æ˜¯æˆ‘èŠ±äº†å¤§éƒ¨åˆ†æ—¶é—´çš„æ­¥éª¤ã€‚å¦‚æœä½ æ²¡æœ‰çœ‹ä¸Šé¢çš„ä»»ä½•æ­¥éª¤å°±èµ°åˆ°äº†è¿™é‡Œï¼Œé‚£ä¹ˆæ­å–œä½ ï¼æˆ‘ä»ç„¶å»ºè®®åœ¨è¿›ä¸€æ­¥é˜…è¯»ä¹‹å‰å°½åŠ›è€Œä¸ºã€‚

ç°åœ¨æˆ‘æ‰€æœ‰çš„å‡½æ•°éƒ½å·¥ä½œæ­£å¸¸ï¼Œæˆ‘éœ€è¦åœ¨æŸä¸ªåœ°æ–¹è¿›è¡Œè®¡ç®—ã€‚ä½†æ˜¯åœ¨å“ªé‡Œï¼Ÿå®ƒåº”è¯¥æ”¾åœ¨æ„é€ å‡½æ•°é‡Œé¢å—ï¼Ÿè¿˜æ˜¯åº”è¯¥é©»ç•™åœ¨é—­åŒ…é‡Œï¼ŸğŸ¤”*æƒ³å‡¡è£ï¼Œæƒ³ã€‚*

ä»”ç»†çœ‹çœ‹è¿™ä¸ªä¾‹å­ã€‚`compose`æ¥å—å‡½æ•°å‚æ•°ï¼Œä½†å¦‚æœæ²¡æœ‰è¾“å…¥æ•°å­—ï¼Œå®ƒä»¬å°±æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚ç»“è®ºå°±æ˜¯æˆ‘ä»¬è®¨è®ºçš„åœ°æ–¹ã€‚æ‰€ä»¥è®¡ç®—åº”è¯¥æ˜¯é—­åŒ…å‡½æ•°çš„ä¸€éƒ¨åˆ†ã€‚

é…·æ¯™äº†ã€‚ä½†æ˜¯æˆ‘è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ

å—¯..å› ä¸ºæˆ‘ä»¬æ˜¯ä»å·¦åˆ°å³ç»„åˆå‡½æ•°ï¼Œæ‰€ä»¥æˆ‘éœ€è¦å°†è¾“å…¥ä¼ é€’ç»™ç¬¬ä¸€ä¸ªå‡½æ•°ã€‚å…¶ç»“æœåº”è¯¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™ç¬¬äºŒä¸ªå‡½æ•°ï¼Œä»¥æ­¤ç±»æ¨ã€‚

ä½†æ˜¯æˆ‘è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ

çœ‹èµ·æ¥æˆ‘å·²ç»æœ‰äº†æ•°ç»„åˆ—è¡¨çš„å‡½æ•°ï¼Œå› ä¸ºæˆ‘ä¸éœ€è¦æ”¹å˜æ•°ç»„çš„å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥ä½¿ç”¨ä¸€ä¸ª`forEach`ã€‚

#### è¿­ä»£ 1 æ¬¡

```
const compose = (...funcs) => {
    return n => funcs.forEach(func => console.log(func))
} 
```

#### è¿­ä»£ 2 æ¬¡

```
const compose = (...funcs) => {
    return n => funcs.forEach(func => console.log(func(n)))
} 
```

ç°åœ¨åˆ°äº†æ£˜æ‰‹çš„éƒ¨åˆ†ã€‚æˆ‘éœ€è¦å°†å‡½æ•°çš„ç»“æœä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ã€‚æˆ‘å°†åˆ©ç”¨é—­åŒ…å…·æœ‰å…¶çˆ¶å‡½æ•°çš„ä½œç”¨åŸŸè¿™ä¸€äº‹å®ã€‚

#### è¿­ä»£ 3 æ¬¡

```
const compose = (...funcs) => {
    return n => {
        let result;
        funcs.forEach(func => {
            result = func(n);
        })
    }
} 
```

æˆ‘åœ¨`forEach`é‡Œé¢è®¾ç½®äº†ä¸€ä¸ªæ–­ç‚¹ï¼Œæ„è¯†åˆ°äº†è‡ªå·±çš„é”™è¯¯ã€‚è¿™æ ·ä¸è¡Œã€‚è¿™å°†æ¥å—æ¯ä¸ªå‡½æ•°å‚æ•°çš„ç›¸åŒè¾“å…¥ï¼Œå¹¶å°†æŠŠ`result`èµ‹ç»™è¯¥å‡½æ•°çš„è¿”å›å€¼ã€‚æˆ‘éœ€è¦æŠŠå®ƒä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°çš„è¾“å…¥ï¼Œä»¥åŠå…¶ä½™å‚æ•°çš„ç»“æœã€‚

å—¯ã€‚è¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªç®€å•çš„ if/else æ¡ä»¶ã€‚ä½†æ˜¯è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘è¿˜éœ€è¦ä¸ºå¾ªç¯å»ºç«‹ç´¢å¼•ã€‚å’©ã€‚æˆ‘å¯èƒ½å¯ä»¥ç”¨æ›´å¤šçš„ JavaScript æ–¹å¼æ¥åšè¿™ä»¶äº‹ã€‚

#### è¿­ä»£ 4 æ¬¡

```
const compose = (...funcs) => {
    return n => {
        let result;
        funcs.forEach(func => {
            result = func(result || n);
        });
    }
} 
```

ä»æˆ‘åœ¨æ—©æœŸè¿­ä»£ä¸­è®¾ç½®çš„æ–­ç‚¹ï¼Œæˆ‘å¯ä»¥çœ‹åˆ°å®ƒæ­£åœ¨æŒ‰é¢„æœŸå·¥ä½œã€‚ä½†æ˜¯è®°ä½ï¼Œå¦‚æœä½ æŠŠæ“ä½œç¬¦æ¢æˆ or æ¡ä»¶ï¼Œè¿™æ˜¯è¡Œä¸é€šçš„ã€‚å› ä¸ºæˆ‘ä»¬éœ€è¦çŸ­è·¯ ORï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨è¾“å…¥ä¹‹å‰æ£€æŸ¥ç»“æœæ˜¯å¦å­˜åœ¨ã€‚å¦‚æœæˆ‘ä»¬äº¤æ¢æ“ä½œç¬¦ï¼Œ`n`å°†æ€»æ˜¯å‡ºç°åœ¨`result`ä¹‹å‰ï¼Œæˆ‘ä»¬å°†å›åˆ°è¿­ä»£ 3ã€‚

### 6ã€‚è¿”å›ç»“æœ

æˆ‘ä»¬å·²ç»å°†ç­”æ¡ˆå­˜å‚¨åœ¨`result`å˜é‡ä¸­ã€‚æˆ‘ä»¬åªéœ€è¦æŠŠå®ƒè¿˜ç»™å‘¼å«è€…ã€‚å¦‚æœä½ å·²ç»åˆ°è¾¾è¿™é‡Œï¼Œè¿™åº”è¯¥å¾ˆå®¹æ˜“ï¼Œ

```
const compose = (...funcs) => {
    return n => {
        let result;
        funcs.forEach(func => {
            result = func(result || n);
        });
        return result;
    }
} 
```

æˆ‘ä»¬ç»“æŸäº†ã€‚æˆ‘æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆæ˜¯å»æ‰å¤šä½™çš„æ‹¬å·ï¼Œè®©å®ƒå¯¹ ES8 æ›´å‹å¥½ï¼Œå°±åƒè¿™æ ·ã€‚

```
const compose = (...funcs) => n => {
    let result;
    funcs.forEach(func => result = func(result || n));
    return result;
}

const addOne = num => num + 1;
const substractTwo = num => num - 2;
const multiplyThree = num => num * 3;

const res = compose(addOne, substractTwo, multiplyThree);
res(4);     // 9

// We can also curry it together
compose(addOne, substractTwo, multiplyThree)(5);    // 12 
```

å°±æ˜¯è¿™æ ·ã€‚è¿™ä¸ªä¾‹å­å¾ˆå¥½åœ°æµ‹è¯•äº†æ‚¨çš„ JavaScript é—­åŒ…å’Œ currying æŠ€å·§ã€‚æˆ‘ç›¸å½“è‚¯å®šä½ ä¹Ÿå¯ä»¥ç”¨`.reduce()`æ¥åšè¿™ä»¶äº‹ï¼Œä½†æ˜¯æˆ‘æ€»æ˜¯å€¾å‘äºå¿˜è®° reduce çš„è®ºç‚¹æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå› ä¸ºæˆ‘æŒ‘æˆ˜è‡ªå·±ä¸è¦æ‰“å¼€ Googleï¼Œæ‰€ä»¥æˆ‘æƒ³åˆ°äº†è¿™ä¸ªã€‚è¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ä½ åšå¾—æœ‰å¤šå¥½ã€‚âœŒï¸