# WebGL æœˆä»½ã€‚ç¬¬ä¹å¤©ã€‚å›¾åƒè¿‡æ»¤å™¨

> åŸæ–‡:[https://dev . to/lesnitsky/web GL-month-day-9-image-filters-5g8e](https://dev.to/lesnitsky/webgl-month-day-9-image-filters-5g8e)

## [](#image-filters)å›¾åƒæ»¤é•œ

è¿™æ˜¯ä¸€ç³»åˆ—ä¸ WebGL ç›¸å…³çš„åšæ–‡ã€‚æ¯å¤©éƒ½ä¼šæœ‰æ–°å¸–å­

[![GitHub stars](../Images/89e1d594cccb84fe5f8a93138d1b6fe3.png)](https://github.com/lesnitsky/webgl-month)
[![Twitter Follow](../Images/d81e7c708149489955f5591d1d4e0f78.png)T6ã€‘](https://twitter.com/lesnitsky_a)

[åŠ å…¥é‚®ä»¶åˆ—è¡¨](http://eepurl.com/gwiSeH),è®©æ–°é‚®ä»¶ç›´æ¥è¿›å…¥ä½ çš„æ”¶ä»¶ç®±

[æ­¤å¤„æä¾›æºä»£ç ](https://github.com/lesnitsky/webgl-month)

å»ºé€ äº

[![Git Tutor Logo](../Images/4a5fcbd1126401b65ca7fbe362404aa0.png)T2ã€‘](https://github.com/lesnitsky/git-tutor)

* * *

å˜¿ğŸ‘‹æ¬¢è¿å›åˆ°ç½‘ç»œåšå®¢æœˆ

æ˜¨å¤©æˆ‘ä»¬å·²ç»å­¦ä¹ äº†å¦‚ä½•åœ¨ webgl ä¸­ä½¿ç”¨çº¹ç†ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åˆ©ç”¨è¿™äº›çŸ¥è¯†æ¥åˆ›å»ºä¸€äº›æœ‰è¶£çš„ä¸œè¥¿ã€‚

ä»Šå¤©æˆ‘ä»¬å°†æ¢ç´¢å¦‚ä½•å®ç°ç®€å•çš„å›¾åƒè¿‡æ»¤å™¨

### [](#inverse)é€†

ç¬¬ä¸€ä¸ªä¹Ÿæ˜¯æœ€ç®€å•çš„è¿‡æ»¤å™¨å¯èƒ½æ˜¯åè½¬å›¾åƒçš„æ‰€æœ‰é¢œè‰²ã€‚

æˆ‘ä»¬å¦‚ä½•åè½¬é¢œè‰²ï¼Ÿ

åŸå§‹å€¼åœ¨èŒƒå›´`[0..1]`å†…

å¦‚æœæˆ‘ä»¬ä»æ¯ä¸ªåˆ†é‡ä¸­å‡å»`1`ï¼Œæˆ‘ä»¬å°†å¾—åˆ°è´Ÿå€¼ï¼Œåœ¨ glsl ä¸­æœ‰ä¸€ä¸ª`abs`å‡½æ•°

ä½ ä¹Ÿå¯ä»¥åœ¨ glsl ä¸­å®šä¹‰é™¤äº†`void main`ä¹‹å¤–çš„å…¶ä»–å‡½æ•°ï¼Œå°±åƒåœ¨ C/C++ä¸­ä¸€æ ·ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åˆ›å»º`inverse`å‡½æ•°

ğŸ“„src/shaders/texture.f.glsl

```
 uniform sampler2D texture;
  uniform vec2 resolution;

+ vec4 inverse(vec4 color) {
+     return abs(vec4(color.rgb - 1.0, color.a));
+ }
+ 
  void main() {
      vec2 texCoord = gl_FragCoord.xy / resolution;
      gl_FragColor = texture2D(texture, texCoord); 
```

è®©æˆ‘ä»¬å®é™…ä½¿ç”¨å®ƒ

ğŸ“„src/shaders/texture.f.glsl

```
 void main() {
      vec2 texCoord = gl_FragCoord.xy / resolution;
      gl_FragColor = texture2D(texture, texCoord);
+ 
+     gl_FragColor = inverse(gl_FragColor);
  } 
```

ç§ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåªæœ‰ 4 è¡Œä»£ç çš„åå‘æ»¤æ³¢å™¨

[![Inverse](../Images/6f61dabaa9fbf8c4eec98c3a31daa904.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--KmjTLNAE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://git-tutor-assets.s3.eu-west-2.amazonaws.com/inverse-filter.png)

### [](#black-and-white)é»‘ç™½åˆ†æ˜

æˆ‘ä»¬æ¥æƒ³æƒ³å¦‚ä½•å®ç°é»‘ç™½æ»¤é•œã€‚

ç™½è‰²æ˜¯`vec4(1, 1, 1, 1)`

é»‘è‰²æ˜¯`vec4(0, 0, 0, 1)`

ä»€ä¹ˆæ˜¯ç°è‰²é˜´å½±ï¼Ÿå¦å¤–ï¼Œæˆ‘ä»¬éœ€è¦ç»™æ¯ä¸ªé¢œè‰²åˆ†é‡æ·»åŠ ç›¸åŒçš„å€¼ã€‚

æ‰€ä»¥åŸºæœ¬ä¸Šæˆ‘ä»¬éœ€è¦è®¡ç®—æ¯ä¸ªç»„ä»¶çš„â€œäº®åº¦â€å€¼ã€‚åœ¨éå¸¸ç®€å•çš„å®ç°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰é¢œè‰²åˆ†é‡ç›¸åŠ ï¼Œç„¶åé™¤ä»¥ 3(ç®—æœ¯å¹³å‡å€¼)ã€‚

> æ³¨æ„:è¿™ä¸æ˜¯æœ€å¥½çš„æ–¹æ³•ï¼Œå› ä¸ºä¸åŒçš„é¢œè‰²ä¼šç»™å‡ºç›¸åŒçš„ç»“æœ(ä¾‹å¦‚ vec3(0.5ï¼Œ0ï¼Œ0)å’Œ vec3(0ï¼Œ0.5ï¼Œ0)ï¼Œä½†å®é™…ä¸Šè¿™äº›é¢œè‰²æœ‰ä¸åŒçš„â€œäº®åº¦â€ï¼Œæˆ‘åªæ˜¯è¯•å›¾è®©è¿™äº›ä¾‹å­ç®€å•æ˜“æ‡‚)

å¥½ï¼Œè®©æˆ‘ä»¬è¯•ç€å®ç°å®ƒ

ğŸ“„src/shaders/texture.f.glsl

```
 return abs(vec4(color.rgb - 1.0, color.a));
  }

+ vec4 blackAndWhite(vec4 color) {
+     return vec4(vec3(1.0, 1.0, 1.0) * (color.r + color.g + color.b) / 3.0, color.a);
+ }
+ 
  void main() {
      vec2 texCoord = gl_FragCoord.xy / resolution;
      gl_FragColor = texture2D(texture, texCoord);

-     gl_FragColor = inverse(gl_FragColor);
+     gl_FragColor = blackAndWhite(gl_FragColor);
  } 
```

å“‡å“¦ã€‚çœ‹èµ·æ¥ä¸é”™

[![Black and white](../Images/bfde37a8d3ddb39c93420c0bcb1e5bc0.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--rqU-q2G3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://git-tutor-assets.s3.eu-west-2.amazonaws.com/black-and-white.png)

### [](#sepia)æ£•è¤è‰²

å¥½äº†ï¼Œè¿˜æœ‰ä¸€ä¸ªæ›´èŠ±å“¨çš„æ•ˆæœï¼Œå°±æ˜¯ç”¨æ£•è¤è‰²æ»¤é•œæ‹å‡ºçš„â€œè€å¼â€ç…§ç‰‡ã€‚

[æ£•è¤è‰²æ˜¯çº¢è¤è‰²](https://en.wikipedia.org/wiki/Sepia_%28color%29)ã€‚RGB å€¼ä¸º`112, 66, 20`

è®©æˆ‘ä»¬å®šä¹‰`sepia`åŠŸèƒ½å’Œé¢œè‰²

ğŸ“„src/shaders/texture.f.glsl

```
 return vec4(vec3(1.0, 1.0, 1.0) * (color.r + color.g + color.b) / 3.0, color.a);
  }

+ vec4 sepia(vec4 color) {
+     vec3 sepiaColor = vec3(112, 66, 20) / 255.0;
+ }
+ 
  void main() {
      vec2 texCoord = gl_FragCoord.xy / resolution;
      gl_FragColor = texture2D(texture, texCoord); 
```

ä¸€ä¸ªå¤©çœŸè€Œç®€å•çš„å®ç°å°†æ˜¯é€šè¿‡æŸä¸ªå› å­ç”¨æ£•è¤è‰²æ¥å†…æ’åŸå§‹é¢œè‰²ã€‚ä¸ºæ­¤æœ‰ä¸€ä¸ª`mix`å‡½æ•°

ğŸ“„src/shaders/texture.f.glsl

```
 vec4 sepia(vec4 color) {
      vec3 sepiaColor = vec3(112, 66, 20) / 255.0;
+     return vec4(
+         mix(color.rgb, sepiaColor, 0.4),
+         color.a
+     );
  }

  void main() {
      vec2 texCoord = gl_FragCoord.xy / resolution;
      gl_FragColor = texture2D(texture, texCoord);

-     gl_FragColor = blackAndWhite(gl_FragColor);
+     gl_FragColor = sepia(gl_FragColor);
  } 
```

ç»“æœ:

[![Sepia](../Images/4bec73ca6caca2b408cbe58477245ea0.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--FkJ5kEMO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://git-tutor-assets.s3.eu-west-2.amazonaws.com/sepia.png)

è¿™åº”è¯¥è®©ä½ æ›´å¥½åœ°äº†è§£åœ¨ç‰‡æ®µç€è‰²å™¨ä¸­å¯ä»¥åšäº›ä»€ä¹ˆã€‚

å°è¯•å®ç°ä¸€äº›å…¶ä»–è¿‡æ»¤å™¨ï¼Œå¦‚é¥±å’Œåº¦æˆ–é²œæ˜åº¦

æ˜å¤©è§ğŸ‘‹

* * *

è¿™æ˜¯ä¸€ç³»åˆ—ä¸ WebGL ç›¸å…³çš„åšæ–‡ã€‚æ¯å¤©éƒ½ä¼šæœ‰æ–°å¸–å­

[![GitHub stars](../Images/89e1d594cccb84fe5f8a93138d1b6fe3.png)](https://github.com/lesnitsky/webgl-month)
[![Twitter Follow](../Images/d81e7c708149489955f5591d1d4e0f78.png)T6ã€‘](https://twitter.com/lesnitsky_a)

[åŠ å…¥é‚®ä»¶åˆ—è¡¨](http://eepurl.com/gwiSeH),è®©æ–°é‚®ä»¶ç›´æ¥è¿›å…¥ä½ çš„æ”¶ä»¶ç®±

[æ­¤å¤„æä¾›æºä»£ç ](https://github.com/lesnitsky/webgl-month)

å»ºé€ äº

[![Git Tutor Logo](../Images/4a5fcbd1126401b65ca7fbe362404aa0.png)T2ã€‘](https://github.com/lesnitsky/git-tutor)