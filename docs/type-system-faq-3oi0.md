# ç±»å‹ç³»ç»Ÿå¸¸è§é—®é¢˜

> åŸæ–‡ï¼š<https://dev.to/stereobooster/type-system-faq-3oi0>

> åä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è°ˆè°ˆç±»å‹

è¿™ä¸ªå¸–å­çš„çµæ„Ÿæ¥è‡ª[è¿™ä¸ªå¸–å­](https://dev.to/parkroolucas/typescript-is-a-waste-of-time-change-my-mind-pi8)ã€‚äººä»¬å¯¹ç±»å‹æœ‰å¤ªå¤šçš„è¯¯è§£ï¼Œä½¿ç”¨é”™è¯¯çš„æœ¯è¯­å¹¶å¾—å‡ºé”™è¯¯çš„ç»“è®ºã€‚æˆ‘å¹¶ä¸æå€¡é™æ€ç±»å‹ç³»ç»Ÿï¼Œæˆ‘å”¯ä¸€å…³å¿ƒçš„æ˜¯è®©æˆ‘ä»¬ä½¿ç”¨æ­£ç¡®çš„æœ¯è¯­ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥è¿›è¡Œå»ºè®¾æ€§çš„è®¨è®ºã€‚

æˆ‘è‡ªå‘åœ°å†™äº†è¿™ç¯‡æ–‡ç« ã€‚æˆ‘å¸Œæœ›æ²¡æœ‰é”™è¯¯ï¼Œä½†æ˜¯å¦‚æœä½ å‘ç°ä»€ä¹ˆï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚è¯·éšæ„æå‡ºæ›´å¤šé—®é¢˜ã€‚è®©æˆ‘ä»¬ä¸€åŠ³æ°¸é€¸åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

## åŠ¨æ€ vs æ— ç±»å‹

æœ‰äº›äººè®¤ä¸ºåŠ¨æ€ç±»å‹ç³»ç»Ÿå’Œæ— ç±»å‹ç³»ç»Ÿæ˜¯ä¸€æ ·çš„ã€‚è¿™æ˜¯ä¸æ­£ç¡®çš„ã€‚éç±»å‹åŒ–ç±»å‹ç³»ç»Ÿæ˜¯æ²¡æœ‰æ„ä¹‰åŒºåˆ†ç±»å‹çš„ç³»ç»Ÿã€‚å¦‚æœåªæœ‰ä¸€ç§ç±»å‹ï¼Œé‚£ä¹ˆåŒºåˆ†ç±»å‹æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ä¾‹å¦‚:

*   æ±‡ç¼–è¯­è¨€:å”¯ä¸€çš„ä¸€ç§ç±»å‹æ˜¯ä½ä¸²
*   lambda-calculus:å”¯ä¸€çš„ä¸€ç§ç±»å‹æ˜¯ lambdas

ä½ å¯èƒ½ä¼šè¯´ï¼Œè¿™æ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ï¼Œæ— è®ºæ˜¯åŠ¨æ€çš„è¿˜æ˜¯æ— ç±»å‹çš„ã€‚å®é™…ä¸Šï¼Œè¿™æ˜¯ä¸€ä»¶å¤§äº‹ï¼Œå› ä¸ºå½“ä½ å°†åŠ¨æ€å’Œæ— ç±»å‹åŒ–ç­‰åŒèµ·æ¥æ—¶ï¼Œä½ å°±è‡ªåŠ¨åœ°å°†åŠ¨æ€ä¸é™æ€ç±»å‹ç³»ç»Ÿå¯¹ç«‹èµ·æ¥ï¼Œæ‰€ä»¥äººä»¬åˆ†æˆäº†ä¸¤ä¸ªé˜µè¥åŠ¨æ€ vs é™æ€ç±»å‹(è¿™æ˜¯ä¸æ­£ç¡®çš„ï¼Œå‚è§åŠ¨æ€ vs é™æ€)ã€‚

> ä¸é™åˆ¶å˜é‡èŒƒå›´çš„è¯­è¨€è¢«ç§°ä¸ºæ— ç±»å‹è¯­è¨€:å®ƒä»¬æ²¡æœ‰ç±»å‹ï¼Œæˆ–è€…è¯´ï¼Œåªæœ‰ä¸€ä¸ªåŒ…å«æ‰€æœ‰å€¼çš„é€šç”¨ç±»å‹ã€‚
> 
> - [å‹ç³»ç»Ÿï¼Œå¢å¡Â·å¡ä»£åˆ©](http://lucacardelli.name/papers/typesystems.pdf)

* * *

> æ— ç±»å‹â€”ç¨‹åºç®€å•åœ°ç›´æ¥æ‰§è¡Œï¼›æ²¡æœ‰å°è¯•æ£€æŸ¥â€œå½¢çŠ¶çš„ä¸€è‡´æ€§â€
> 
> ç±»å‹åŒ–â€”åœ¨ç¼–è¯‘æ—¶æˆ–è¿è¡Œæ—¶å°è¯•æ£€æŸ¥å½¢çŠ¶ä¸€è‡´æ€§
> 
> ç¼–ç¨‹è¯­è¨€çš„ç±»å‹ç³»ç»Ÿ

## åŠ¨æ€ vs é™æ€

åŠ¨æ€ç±»å‹ç³»ç»Ÿæ˜¯åŠ¨æ€æ£€æŸ¥ç±»å‹çš„ç³»ç»Ÿ(åœ¨è¿è¡Œæ—¶)ã€‚é™æ€ç±»å‹ç³»ç»Ÿæ˜¯é™æ€æ£€æŸ¥ç±»å‹çš„ç³»ç»Ÿ(åœ¨ç¼–è¯‘æˆ–ä¼ è¾“æ—¶)ã€‚

ä»–ä»¬æ˜¯å¯¹ç«‹çš„å—ï¼Ÿä¸ï¼Œä»–ä»¬ä¸æ˜¯ã€‚å®ƒä»¬éƒ½æ˜¯å…³äºç±»å‹çš„ã€‚ä½ å¯ä»¥ä¸¤è€…å…¼å¾—ï¼Œäº‹å®ä¸Šï¼Œå¤§å¤šæ•°é™æ€ç±»å‹ç³»ç»Ÿä¹Ÿæœ‰åŠ¨æ€ç±»å‹æ£€æŸ¥ã€‚ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–ä»»ä½• IO(è¾“å…¥è¾“å‡º)éªŒè¯ã€‚å‡è®¾æ‚¨éœ€è¦è¯»å–æ¥è‡ªç”¨æˆ·çš„è¾“å…¥ï¼Œå‡è®¾è¾“å…¥æ•°å­—ã€‚æ‚¨å°†åœ¨è¿è¡Œæ—¶æ£€æŸ¥å­—ç¬¦ä¸²çš„è§£ææ˜¯å¦ç»™å‡ºäº†æ•°å­—(å®ƒå¯èƒ½æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸æˆ–è¿”å› NaN)ã€‚å½“ä½ æ£€æŸ¥ç»™å®šçš„è¾“å…¥æ˜¯å¦å¯ä»¥è¢«è®¤ä¸ºæ˜¯æ•°å­—æ—¶ï¼Œä½ åšçš„æ˜¯åŠ¨æ€ç±»å‹æ£€æŸ¥ã€‚

æ‰€ä»¥ï¼Œè¿™ä¸æ˜¯é™æ€ç±»å‹å’ŒåŠ¨æ€ç±»å‹çš„æˆ˜äº‰ã€‚ä¸¤ä¸ªéƒ½å¯ä»¥ç”¨ã€‚

æ›´é‡è¦çš„æ˜¯:é™æ€ç±»å‹æ£€æŸ¥æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼Œæœ‰æ—¶å¾ˆéš¾é™æ€åœ°éªŒè¯ç¨‹åºçš„æŸäº›éƒ¨åˆ†ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç”¨åŠ¨æ€ç±»å‹æ£€æŸ¥æ¥ä»£æ›¿é™æ€ç±»å‹æ£€æŸ¥ã€‚

å°†é™æ€ç±»å‹ç³»ç»Ÿè§†ä¸ºé™æ€æ£€æŸ¥çš„ç±»å‹ã€‚

å°†åŠ¨æ€ç±»å‹ç³»ç»Ÿè§†ä¸ºåŠ¨æ€æ£€æŸ¥çš„ç±»å‹ã€‚

## é™æ€ç±»å‹æ˜¯ä¸æ˜¯åœ¨ç¼–è¯‘æ—¶å°±çŸ¥é“ç±»å‹äº†ï¼Ÿ

ä¸ä¼šã€‚å¦‚æœä½ æ‰“å¼€ä»»ä½•è§£æå™¨(åŒ…æ‹¬ JS)çš„æºä»£ç ï¼Œä½ ä¼šçœ‹åˆ°è§£æå™¨åœ¨è§£ææ—¶çŸ¥é“å€¼çš„ç±»å‹(è¿™æ˜¯ç¼–è¯‘è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†)ã€‚

```
let x = "test"; 
```

è§£æå™¨çŸ¥é“`"test"`æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸æ˜¯è®© JS é™æ€ç±»å‹åŒ–äº†ï¼Ÿå·ç 

## æ¸è¿›å‹ç³»ç»Ÿ

æ¸è¿›ç±»å‹ç³»ç»Ÿæ˜¯ä¸€ä¸ªé™æ€ç±»å‹ç³»ç»Ÿï¼Œå®ƒå…è®¸è·³è¿‡ç¨‹åºéƒ¨åˆ†çš„ç±»å‹æ£€æŸ¥ï¼Œä¾‹å¦‚ typescript ä¸­çš„`any`æˆ–`@ts-ignore`ã€‚

ä»ä¸€ä¸ªæ–¹é¢æ¥è¯´ï¼Œè¿™ä½¿å®ƒä¸å¤ªå®‰å…¨ã€‚ä»å¦ä¸€æ–¹é¢æ¥è¯´ï¼Œæ¸è¿›ç±»å‹ç³»ç»Ÿå…è®¸å‘åŠ¨æ€ç±»å‹è¯­è¨€ä¸­æ¸è¿›åœ°æ·»åŠ ç±»å‹ã€‚

## å¥å…¨ vs ä¸å¥å…¨çš„ç±»å‹ç³»ç»Ÿ

å£°éŸ³ç±»å‹æ£€æŸ¥å™¨æ˜¯ä¸€ä¸ªä¸ä¼šâ€œæ‰¹å‡†â€æœ‰ç±»å‹é”™è¯¯çš„ç¨‹åºçš„æ£€æŸ¥å™¨ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨ä½¿ç”¨ä¸å¥å…¨çš„ç±»å‹æ£€æŸ¥å™¨ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºä¸­ä»ç„¶ä¼šæœ‰ç±»å‹é”™è¯¯ğŸ˜±ã€‚ä¸è¦æƒŠæ…Œã€‚å®é™…ä¸Šï¼Œå¯èƒ½å¯¹ä½ æ²¡æœ‰å½±å“ã€‚åˆç†æ€§æ˜¯ç±»å‹æ£€æŸ¥ç®—æ³•çš„ä¸€ä¸ªæ•°å­¦å±æ€§ï¼Œä½ éœ€è¦è¯æ˜å®ƒã€‚å¤–é¢çš„è®¸å¤šç¼–è¯‘å™¨(å†…éƒ¨çš„ç±»å‹æ£€æŸ¥å™¨)æ˜¯ä¸å¥å…¨çš„ã€‚

å¦‚æœä½ æƒ³ä½¿ç”¨å£°éŸ³ç±»å‹ç³»ç»Ÿï¼Œçœ‹çœ‹ ML-familyï¼Œå®ƒä½¿ç”¨ Hindley-Milner ç±»å‹ç³»ç»Ÿã€‚

ä½ ä¹Ÿéœ€è¦æ˜ç™½ï¼Œå£°éŸ³ç±»å‹ç³»ç»Ÿä¸ä¼šé€šè¿‡æ— æ•ˆçš„ç¨‹åº(å‡é˜³æ€§)ï¼Œä½†ä¹Ÿå¯èƒ½æ‹’ç»æœ‰æ•ˆçš„ç¨‹åº(å‡é˜´æ€§)ã€‚

ä»ä¸æ‹’ç»æœ‰æ•ˆç¨‹åºçš„ç±»å‹ç³»ç»Ÿç§°ä¸ºå®Œå…¨ç³»ç»Ÿã€‚

æˆ‘èƒ½ä¸¤è€…å…¼å¾—å—-å®Œæ•´çš„å’Œå¥å…¨çš„ï¼Ÿæ®æˆ‘æ‰€çŸ¥ï¼Œä»–ä»¬ä¸å­˜åœ¨ã€‚æˆ‘ä¸ç¡®å®šï¼Œä½†æ ¹æ®å“¥å¾·å°”çš„ä¸å®Œå…¨æ€§å®šç†ï¼Œè¿™ä¼¼ä¹æ˜¯æ ¹æœ¬ä¸å¯èƒ½çš„ã€‚

## å¼±å¯¹å¼º

æˆ‘ä¸è®¤ä¸ºè¿™ä¸ªæœ¯è¯­æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå«ç³Šä¸æ¸…ï¼Œä¼šé€ æˆæ›´å¤šçš„æ··ä¹±è€Œä¸æ˜¯æ¸…æ™°:

> è¿™äº›è¯­è¨€å¯ä»¥**å§”å©‰åœ°**ç§°ä¸ºå¼±æ£€æŸ¥(æˆ–å¼±ç±»å‹ï¼Œåœ¨æ–‡çŒ®ä¸­)æ„å‘³ç€ä¸€äº›ä¸å®‰å…¨çš„æ“ä½œè¢«é™æ€åœ°æ£€æµ‹åˆ°ï¼Œè€Œä¸€äº›æ²¡æœ‰è¢«æ£€æµ‹åˆ°ã€‚**è¿™ä¸€ç±»çš„è¯­è¨€åœ¨è–„å¼±ç¨‹åº¦ä¸Šå·®åˆ«å¾ˆå¤§**ã€‚
> 
> - [å‹ç³»ç»Ÿï¼Œå¢å¡Â·å¡ä»£åˆ©](http://lucacardelli.name/papers/typesystems.pdf)

* * *

> ç±»å‹ç³»ç»Ÿæœ€å¸¸è§çš„åˆ†ç±»æ–¹å¼å¯èƒ½æ˜¯â€œå¼ºâ€æˆ–â€œå¼±â€è¿™å¾ˆä¸å¹¸ï¼Œå› ä¸ºè¿™äº›å•è¯å‡ ä¹æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚åœ¨æœ‰é™çš„èŒƒå›´å†…ï¼Œå¯ä»¥æ¯”è¾ƒä¸¤ç§ç±»å‹ç³»ç»Ÿéå¸¸ç›¸ä¼¼çš„è¯­è¨€ï¼Œå¹¶æŒ‡å®šä¸€ç§è¯­è¨€å…·æœ‰è¿™ä¸¤ç§ç³»ç»Ÿä¸­è¾ƒå¼ºçš„ä¸€ç§ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™äº›è¯æ¯«æ— æ„ä¹‰ã€‚
> 
> - [åœ¨è®¨è®ºç±»å‹ç³»ç»Ÿä¹‹å‰è¦çŸ¥é“ä»€ä¹ˆï¼ŒSteve Klabnik](http://blog.steveklabnik.com/posts/2010-07-17-what-to-know-before-debating-type-systems)

* * *

> â€œå¼ºâ€å’Œâ€œå¼±â€è¿™ä¸¤ä¸ªæœ¯è¯­**æå…¶æ¨¡ç³Š**ã€‚ä»¥ä¸‹æ˜¯è¿™äº›æœ¯è¯­çš„ä¸€äº›ç”¨æ³•:
> 
> *   æœ‰æ—¶å€™ï¼Œâ€œå¼ºâ€å°±æ˜¯â€œé™â€ã€‚è¿™å¾ˆç®€å•ï¼Œä½†æœ€å¥½è¯´â€œé™æ€â€ï¼Œå› ä¸ºæˆ‘ä»¬å¤§å¤šæ•°äººéƒ½åŒæ„å®ƒçš„å®šä¹‰ã€‚
> *   æœ‰æ—¶ï¼Œâ€œå¼ºâ€æ„å‘³ç€â€œä¸åœ¨æ•°æ®ç±»å‹ä¹‹é—´éšå¼è½¬æ¢â€ã€‚ä¾‹å¦‚ï¼ŒJavaScript å…è®¸æˆ‘ä»¬è¯´â€œaâ€-1ï¼Œæˆ‘ä»¬å¯ä»¥ç§°ä¹‹ä¸ºâ€œå¼±ç±»å‹â€ã€‚ä½†æ˜¯å‡ ä¹æ‰€æœ‰çš„è¯­è¨€éƒ½æä¾›äº†æŸç§ç¨‹åº¦çš„éšå¼è½¬æ¢ï¼Œå…è®¸åƒ 1 - 1.1 ä¸€æ ·è‡ªåŠ¨è¿›è¡Œæ•´æ•°åˆ°æµ®ç‚¹æ•°çš„è½¬æ¢ã€‚åœ¨å®è·µä¸­ï¼Œå¤§å¤šæ•°ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨â€œå¼ºâ€çš„äººåœ¨â€œå¯æ¥å—çš„â€å’Œâ€œä¸å¯æ¥å—çš„â€è½¬æ¢ä¹‹é—´åˆ’äº†ä¸€æ¡çº¿ã€‚æ²¡æœ‰å…¬è®¤çš„ç•Œçº¿ï¼›å®ƒä»¬éƒ½æ˜¯æ­¦æ–­çš„ï¼Œåªé’ˆå¯¹ä¸ªäººçš„è§‚ç‚¹ã€‚
> *   æœ‰æ—¶ï¼Œâ€œå¼ºâ€æ„å‘³ç€æ— æ³•é€ƒè„±è¯­è¨€çš„ç±»å‹è§„åˆ™ã€‚
> *   æœ‰æ—¶ï¼Œâ€œå¼ºâ€æ„å‘³ç€å†…å­˜å®‰å…¨ã€‚c æ˜¯å†…å­˜ä¸å®‰å…¨è¯­è¨€çš„ä¸€ä¸ªæ˜¾è‘—ä¾‹å­ã€‚å¦‚æœ xs æ˜¯ä¸€ä¸ªç”±å››ä¸ªæ•°å­—ç»„æˆçš„æ•°ç»„ï¼ŒC å°†å¾ˆä¹æ„å…è®¸æ‰§è¡Œ xs[5]æˆ– xs[1000]çš„ä»£ç ï¼Œç»™å‡ºé‚£äº›ç”¨äºå­˜å‚¨ xs çš„å†…å­˜åœ°å€ä¹‹åçš„ä»»ä½•å€¼ã€‚
> 
> - [ç±»å‹-ç¨‹åºå‘˜æ¦‚è¦ï¼ŒåŠ é‡ŒÂ·ä¼¯æ©å“ˆç‰¹](https://www.destroyallsoftware.com/compendium/types?share_key=baf6b67369843fa2)

## é™æ€ç±»å‹è¯­è¨€éœ€è¦ç±»å‹å£°æ˜å—ï¼Ÿ

ä¸æ€»æ˜¯ã€‚æœ‰æ—¶ç±»å‹ç³»ç»Ÿå¯ä»¥æ¨æ–­ç±»å‹(æ ¹æ®ä»£ç ç»“æ„çŒœæµ‹)ã€‚ä¾‹å¦‚(æ‰“å­—ç¨¿)ï¼Œ

```
const x = "test"; 
```

Type system çŸ¥é“`"test"`æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²(å› ä¸ºè§£æè§„åˆ™)ã€‚ç±»å‹ç³»ç»ŸçŸ¥é“`x`æ˜¯å¸¸é‡ï¼Œä¾‹å¦‚å®ƒä¸èƒ½è¢«é‡æ–°èµ‹å€¼ï¼Œæ‰€ä»¥å®ƒå¯ä»¥æ–­å®š`x`æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

å…¶ä»–ç¤ºä¾‹(æµç¨‹):

```
const add = (x, y) => x / y
//                        ^ Cannot perform arithmetic operation because string [1] is not a number.
add(1, "2") 
```

ç±»å‹æ£€æŸ¥å™¨å‘ç°æˆ‘ä»¬ç”¨æ•°å­—å’Œå­—ç¬¦ä¸²è°ƒç”¨äº†`add`,å®ƒå°†å…¶è¿½æº¯åˆ°å®šä¹‰ã€‚ç±»å‹æ£€æŸ¥å™¨çŸ¥é“é™¤æ³•è¿ç®—éœ€è¦æ•°å­—ä½œä¸ºè¾“å…¥ï¼Œæ‰€ä»¥å®ƒè®¤ä¸ºä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºè¾“å…¥ä¹‹ä¸€æ˜¯é”™è¯¯çš„ã€‚

æ²¡æœ‰ç±»å‹å£°æ˜ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åšé™æ€ç±»å‹æ£€æŸ¥ã€‚åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œä½ è¿Ÿæ—©è¦å†™ä¸€äº›ç±»å‹ï¼Œå› ä¸ºç±»å‹ç³»ç»Ÿä¸èƒ½æ¨æ–­ä¸€åˆ‡ã€‚ä½†æ˜¯é™æ€ç±»å‹è¯­è¨€ä¸å£°æ˜æ— å…³ï¼Œå®ƒä»¬ä¸è¿è¡Œå‰çš„ç±»å‹æ£€æŸ¥æœ‰å…³ã€‚

## TypeScript å› ä¸ºå‘ä¸‹ç¼–è¯‘ä¸º JavaScript è€Œä¸å®‰å…¨å—ï¼Ÿ

TypeScript æ˜¯ä¸å¥å…¨çš„ï¼Œæ‰€ä»¥å®ƒå¯ä»¥äº§ç”Ÿä¸å®‰å…¨çš„åº”ç”¨ç¨‹åºï¼Œä½†å®ƒä¸å®ƒç¼–è¯‘æˆä»€ä¹ˆæ— å…³ã€‚

æ¡Œé¢ç‰ˆçš„ç¼–è¯‘å™¨å¤§å¤šç¼–è¯‘æˆæ±‡ç¼–è¯­è¨€ï¼Œå®‰å…¨æ€§ç”šè‡³ä¸å¦‚ JS `Â¯\_(ãƒ„)_/Â¯`ã€‚

ä½ å¯èƒ½ä¼šé—®:ä½†æ˜¯ç¼–è¯‘åçš„ä»£ç åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼ŒJS æ˜¯ä¸å®‰å…¨çš„ï¼Œä¾‹å¦‚ï¼Œå®ƒå¯èƒ½åœ¨éœ€è¦å­—ç¬¦ä¸²æ—¶ç»™å‡ºç©ºå€¼ã€‚

å¥½é—®é¢˜ã€‚å› æ­¤ï¼ŒTS å¯ä»¥ä¿è¯åº”ç”¨ç¨‹åºå†…éƒ¨çš„å®‰å…¨æ€§ï¼Œæ‚¨éœ€è¦åœ¨ TS ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’çš„åœ°æ–¹è®¾ç½®â€œé˜²æŠ¤â€ï¼Œä¾‹å¦‚ï¼Œæ‚¨éœ€è¦éªŒè¯ IO(è¾“å…¥-è¾“å‡º):ç”¨æˆ·è¾“å…¥ã€æœåŠ¡å™¨å“åº”ã€ä»æµè§ˆå™¨å­˜å‚¨è¯»å–ç­‰ã€‚

ä¾‹å¦‚ï¼Œåœ¨ Elm ä¸­ï¼Œä»–ä»¬ä¸ºæ­¤ä½¿ç”¨[â€œç«¯å£â€](https://guide.elm-lang.org/interop/ports.html)ã€‚åœ¨ TS ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ io-ts æˆ–ç±»ä¼¼çš„ã€‚

è¿™ç§â€œé˜²æŠ¤â€åœ¨é™æ€ç±»å‹ç³»ç»Ÿå’ŒåŠ¨æ€ç±»å‹ç³»ç»Ÿä¹‹é—´å»ºç«‹äº†ä¸€åº§æ¡¥æ¢ã€‚

ç®€åŒ–ç¤ºä¾‹:

```
const makeSureIsNumber = (x: any) => {
  const result = parseFloat(x);
  if (isNaN(result)) {
    throw Error("Not a number");
  }
  return result;
}
const read = (input: any) => {
  try {
    const n = makeSureIsNumber(input);
    // in this branch of code, n is for sure number
    // otherwise, we would get into a different branch of code
    // makeSureIsNumber "proofs" that n is number
  } catch (e) { }
} 
```

## åªæœ‰ç¼–è¯‘å™¨æ‰éœ€è¦ç±»å‹å—ï¼Ÿ

> ç±»å‹åªæ˜¯ç»™ä½ çš„ç¼–è¯‘å™¨ä¸€äº›æç¤ºã€‚
> 
> -æƒ³å»ç¾äººé±¼

è¿™æ˜¯ä¸€ä¸ªå“²å­¦é—®é¢˜ã€‚äººéœ€è¦ç±»å‹ï¼Œæœºå™¨ä¸éœ€è¦ç±»å‹ã€‚ç¼–è¯‘å™¨éœ€è¦ç±»å‹ï¼Œå› ä¸ºé‚£äº›æ˜¯äººç±»å†™çš„ç¨‹åºã€‚

ä½œä¸ºç°è±¡çš„ç±»å‹å› äººè€Œå­˜åœ¨ï¼Œæ²¡æœ‰ç±»å‹ï¼Œé™¤éæœ‰äººä¼šè§‚å¯Ÿå®ƒä»¬ã€‚è¿™æ˜¯äººç±»çš„æ€ç»´æŠŠä¸åŒçš„ä¸œè¥¿æ”¾åœ¨ä¸åŒçš„æ¡¶(æˆ–ç±»åˆ«)é‡Œã€‚æ²¡æœ‰è§‚å¯Ÿè€…ï¼Œå®ƒä»¬å°±æ²¡æœ‰æ„ä¹‰ã€‚

è¿™æ˜¯ç»™ä½ çš„ä¸€ä¸ªæ€ç»´å®éªŒã€‚æƒ³æƒ³ã€Šäººç”Ÿçš„æ¸¸æˆã€‹ã€‚ä½ æœ‰ä¸€ä¸ªæ­£æ–¹å½¢ç»†èƒçš„äºŒç»´ç½‘æ ¼ï¼Œæ¯ä¸ªç»†èƒéƒ½å¤„äºä¸¤ç§å¯èƒ½çš„çŠ¶æ€ä¹‹ä¸€ï¼Œæ´»ç€æˆ–æ­»äº†ã€‚æ¯ä¸ªå•å…ƒæ ¼éƒ½ä¸å…¶å…«ä¸ªé‚»å±…äº¤äº’ï¼Œè¿™å…«ä¸ªé‚»å±…æ˜¯æ°´å¹³ã€å‚ç›´æˆ–å¯¹è§’ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åœ¨æ¯ä¸ªæ—¶é—´æ­¥ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹è½¬å˜:

*   ä»»ä½•å°‘äºä¸¤ä¸ªæ´»é‚»å±…çš„æ´»ç»†èƒéƒ½ä¼šæ­»äº¡ï¼Œå¥½åƒæ˜¯ç”±äºäººå£å‡å°‘ã€‚
*   ä»»ä½•æœ‰ä¸¤ä¸ªæˆ–ä¸‰ä¸ªæ´»é‚»å±…çš„æ´»ç»†èƒéƒ½å¯ä»¥å­˜æ´»åˆ°ä¸‹ä¸€ä»£ã€‚
*   ä»»ä½•æœ‰ä¸‰ä¸ªä»¥ä¸Šæ´»é‚»å±…çš„æ´»ç»†èƒéƒ½ä¼šæ­»äº¡ï¼Œå¥½åƒæ˜¯ç”±äºäººå£è¿‡å‰©ã€‚
*   ä»»ä½•ä¸€ä¸ªæ­»ç»†èƒï¼Œåªè¦æœ‰ä¸‰ä¸ªæ´»çš„é‚»å±…ï¼Œå°±ä¼šå˜æˆæ´»ç»†èƒï¼Œå°±åƒé€šè¿‡ç¹æ®–ä¸€æ ·ã€‚

å®ƒæ˜¯ä¸€ä¸²â€œé—ªçƒâ€(æ‰“å¼€å’Œå…³é—­)çš„æ–¹å—ã€‚ç”¨å®ƒç©[åœ¨çº¿](https://bitstorm.org/gameoflife/)ã€‚

ä½†æ˜¯ä½ æœ‰ä¸€äº›ç»“æ„ï¼Œæ¯”å¦‚â€œæ»‘ç¿”æœºâ€:

[![glider.gif](img/55131815f65b87fb08e6cfd44154d492.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--jZiQWcPI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/foro1kmft5fn06q977sz.gif)

ä½ èƒ½çœ‹è§å®ƒå—ï¼Ÿæ˜¯æ»‘ç¿”æœºåœ¨å±å¹•ä¸Šç§»åŠ¨ï¼Œå¯¹å—ï¼Ÿç°åœ¨æš‚åœã€‚å®ƒçœŸçš„å­˜åœ¨å—ï¼Ÿå®ƒåªæ˜¯å°†å‡ºç°å’Œæ¶ˆå¤±çš„æ–¹å—åˆ†å¼€ã€‚ä½†æ˜¯æˆ‘ä»¬çš„å¤§è„‘å¯ä»¥æŠŠè¿™ä¸ªç»“æ„ä½œä¸ºä¸€ä¸ªå®ä½“æ¥è§‚å¯Ÿã€‚

æˆ–è€…æˆ‘ä»¬å¯ä»¥è¯´å®ƒçš„å­˜åœ¨æ˜¯å› ä¸ºæ–¹å—ä¸æ˜¯ç‹¬ç«‹çš„(å®ƒä»¬ä¾èµ–äºé‚»å±…)ï¼Œè€Œä¸”å³ä½¿æ»‘ç¿”æœºæœ¬èº«ä¸å­˜åœ¨ï¼Œä½†æ˜¯æ»‘ç¿”æœºçš„æ¦‚å¿µä½œä¸ºæŸæ‹‰å›¾å¼çš„è§‚å¿µå­˜åœ¨ã€‚

ç°åœ¨è€ƒè™‘ä»»ä½•ç±»å‹åŒ–ç¼–ç¨‹è¯­è¨€ä¸­çš„ç¨‹åºã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç±»å‹ï¼Œå¯¹å—ï¼Ÿä½†å®ƒæ˜¯ç¼–è¯‘ä¸‹æ¥çš„æ±‡ç¼–ä»£ç ã€‚æ±‡ç¼–ä»£ç å’Œç¨‹åºä»£è¡¨åŒæ ·çš„ä¸œè¥¿ï¼ŒåŒæ ·çš„é€»è¾‘(ç¬¬äºŒä¸ªå¯¹äººç±»æ¥è¯´æ›´éš¾è¯»æ‡‚)ã€‚ä»è®¡ç®—æœºçš„è§’åº¦æ¥çœ‹ï¼Œæ²¡æœ‰ç±»å‹ï¼Œåªæœ‰ä½ä¸²â€”â€”0 å’Œ 1(æ­»çš„ã€æ´»çš„ç»†èƒ)çš„é›†åˆã€‚**ç±»å‹å­˜åœ¨äºäºº**ã€‚

## PS

æˆ‘ä»¥å‰å†™ç±»å‹çš„å°è¯•:

*   [https://github.com/stereobooster/pragmatic-types](https://github.com/stereobooster/pragmatic-types)
*   [https://dev.to/t/pragmatictypes](https://dev.to/t/pragmatictypes)

è¿™äº›æ–‡ç« éœ€è¦æ›´æ–°å’Œä¸€äº›è¿”å·¥ï¼Œæˆ‘æƒ³æŠŠå®ƒä»¬çº³å…¥è¿™ä¸ªå¸¸è§é—®é¢˜ã€‚

> å°é¢å›¾ç‰‡ç”± [reddit](https://www.reddit.com/r/Apandah/comments/9yd3t5/posting_funny_cats_until_apondos_posts_funny_cats/)