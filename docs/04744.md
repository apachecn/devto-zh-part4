# package-lock.json vs package . JSON ä½†æ˜¯ package-lock . JSON åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ

> åŸæ–‡ï¼š<https://dev.to/saurabhdaware/but-what-the-hell-is-package-lock-json-b04>

æ‰€ä»¥ï¼Œæ˜¯çš„ï¼Œæˆ‘è¦å†™çš„å¯èƒ½æ˜¯æˆ‘ä»¬ç›®å½•ä¸­æœ€è¢«å¿½ç•¥çš„æ–‡ä»¶ **package-lock.json** ï¼ï¼

package-lock.json æ˜¯ä¸€ä¸ªæå…¶é‡è¦çš„æ–‡ä»¶ï¼Œå®ƒå¯ä»¥å°†æ‚¨ä»å¤§é‡çš„ **boom boom bam bam ä¸­æ‹¯æ•‘å‡ºæ¥ğŸ”¥**åœ¨æ‚¨çš„å­˜å‚¨åº“ä¸­ã€‚

æ‰€ä»¥åœ¨æˆ‘ä»¬è¿›å…¥ package-lock.json ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥è°ˆè°ˆè¯­ä¹‰ç‰ˆæœ¬åŒ–å’Œ package.jsonã€‚

# **1ã€‚**è¯­ä¹‰ç‰ˆæœ¬åŒ–

è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶æ˜¯ç‰ˆæœ¬æ§åˆ¶åŒ…çš„ç†æƒ³æ–¹å¼ã€‚å®ƒä»¬é€šå¸¸è¢«å†™æˆ`1.4.5` (major.minor.patch)

[![Alt Text](img/65b70142faf63f5259b44c58b6750f0f.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--vTMVK06i--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/uyw4yois1mkqr967ufb8.png)

## *1aã€‚* Bug ä¿®å¤/è¡¥ä¸ç‰ˆæœ¬

åŒ…æ‹¬é”™è¯¯ä¿®å¤/æ–‡æ¡£æ‹¼å†™é”™è¯¯ç­‰ã€‚

## *1bã€‚*æ¬¡è¦ç‰ˆæœ¬

åŒ…æ‹¬æ–°å¢åŠ çš„åŠŸèƒ½æˆ– APIï¼Œä¸ä¼šç ´åæ—§ç‰ˆæœ¬çš„ä»»ä½•åŠŸèƒ½ï¼Œå› æ­¤åœ¨ 1.1.0 ç‰ˆä¸Šè¿è¡Œçš„ä»»ä½•åŠŸèƒ½ä¹Ÿå¯ä»¥åœ¨ 1.9.0 ç‰ˆä¸Šè¿è¡Œã€‚

## *1cã€‚*ä¸»è¦ç‰ˆæœ¬

åŒ…æ‹¬ç ´åä¸œè¥¿çš„ç‰ˆæœ¬ã€‚å®ƒå¯èƒ½åŒ…æ‹¬åˆ é™¤ API æˆ–æ›´æ”¹å‡½æ•°åï¼Œå› æ­¤ä»»ä½•åœ¨ 1.0.0 ç‰ˆä¸Šå·¥ä½œçš„ä¸œè¥¿ä¸ä¸€å®šèƒ½åœ¨ 2.0.0 ç‰ˆä¸Šå·¥ä½œ

# **2ã€‚** Package.json

package.json æ˜¯ä¸€ä¸ªåŒ…å«é¡¹ç›®ä¿¡æ¯(åç§°ã€ç‰ˆæœ¬ç­‰)çš„æ–‡ä»¶ï¼Œå®ƒåˆ—å‡ºäº†é¡¹ç›®æ‰€ä¾èµ–çš„åŒ…ã€‚

[![Alt Text](img/8a39168dc55ce62d544aeaf8f2409c47.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--m2oVg4vL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/btvz35yyxvrj4tsbmpzl.png)

æ­£å¦‚ä½ åœ¨ä¸Šé¢çš„å›¾ç‰‡ä¸­çœ‹åˆ°çš„ï¼Œåœ¨ package.json ä¸‹é¢åˆ—å‡ºçš„æ¯ä¸€ä¸ªä¾èµ–é¡¹åé¢éƒ½æœ‰ä¸€ä¸ªç±»ä¼¼äº`^2.20.0`çš„æ•°å­—ï¼Œè¿™æ˜¯é‚£ä¸ªåŒ…çš„ç‰ˆæœ¬ï¼Œä½†æ˜¯åœ¨ç‰ˆæœ¬ä¹‹å‰æœ‰ä¸€ä¸ª`^`ã€‚æ‰€ä»¥^è¿™ä¸ªå°å®¶ä¼™å¯ä»¥æˆä¸ºä½ é¡¹ç›®çš„ç ´åè€…ã€‚

^åœ¨ç‰ˆæœ¬ä¹‹å‰ç­¾åå‘Šè¯‰ npmï¼Œå¦‚æœæœ‰äººå…‹éš†äº†è¿™ä¸ªé¡¹ç›®å¹¶åœ¨ç›®å½•ä¸­è¿è¡Œ npm installï¼Œé‚£ä¹ˆå°±åœ¨ä»–çš„ node_modules ä¸­å®‰è£…è¿™ä¸ªåŒ…çš„æœ€æ–°æ¬¡è¦ç‰ˆæœ¬ã€‚

å‡è®¾æˆ‘åœ¨ package.json ä¸­ä½¿ç”¨äº†å¸¦æœ‰`^2.20.0`çš„ expressï¼Œç„¶å express å›¢é˜Ÿå‘å¸ƒäº† 2.24.0 ç‰ˆæœ¬ï¼Œç°åœ¨å½“æœ‰äººå…‹éš†æˆ‘çš„ repo å¹¶åœ¨é‚£ä¸ªç›®å½•ä¸­è¿è¡Œ`npm install`æ—¶ï¼Œä»–ä»¬å°†è·å¾— 2.24.0 ç‰ˆæœ¬(ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨`~`è€Œä¸æ˜¯`^`ï¼Œå®ƒå°†æ›´æ–°åˆ°æœ€æ–°çš„è¡¥ä¸ç‰ˆæœ¬)

ç„¶è€Œï¼Œå¦‚æœè½¯ä»¶åŒ…å¼€å‘äººå‘˜ç ´åäº†æ¬¡è¦ç‰ˆæœ¬ä¸Šçš„ä»»ä½•åŠŸèƒ½ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªå·¨å¤§çš„é—®é¢˜ï¼Œå› ä¸ºè¿™ä¼šä½¿æ‚¨çš„åº”ç”¨ç¨‹åºå´©æºƒã€‚

æ‰€ä»¥ npm åæ¥å‘å¸ƒäº†ä¸€ä¸ªåä¸º package-lock.json çš„æ–°æ–‡ä»¶æ¥é¿å…è¿™ç§æƒ…å†µ

# **3ã€‚**åŒ…é”

[![package-lock.json meme](img/9c9b2e4f382cf3812a1a21889f05684a.png)](https://res.cloudinary.com/practicaldev/image/fetch/s---AHcHbi0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/do6l6okbr89h5pc666k0.png)
package-lock . JSON å°†ç®€å•åœ°é¿å…è¿™ç§å®‰è£…æ›´æ–°çš„æ¬¡è¦ç‰ˆæœ¬çš„ä¸€èˆ¬è¡Œä¸ºï¼Œæ‰€ä»¥å½“æœ‰äººå…‹éš†ä½ çš„å›è´­å¹¶åœ¨ä»–ä»¬çš„æœºå™¨ä¸Šè¿è¡Œ npm install æ—¶ã€‚NPM å°†æŸ¥çœ‹ package-lock.json å¹¶å®‰è£…ä¸æ‰€æœ‰è€…å®‰è£…çš„è½¯ä»¶åŒ…å®Œå…¨ç›¸åŒçš„ç‰ˆæœ¬ï¼Œå› æ­¤å®ƒå°†å¿½ç•¥ package.json ä¸­çš„`^`å’Œ`~`

æ­¤å¤–ï¼Œå®ƒè¿˜åŒ…å«ä¸€äº›å…¶ä»–å…ƒä¿¡æ¯ï¼Œå¯ä»¥èŠ‚çœæ‚¨åœ¨å®‰è£… npm æ—¶ä» npm è·å–è¿™äº›æ•°æ®çš„æ—¶é—´ã€‚

å…³äº package-lock.json çš„æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒ npm åšå®¢ã€‚

æ„Ÿè°¢æ‚¨é˜…è¯»æœ¬æ–‡ï¼

æˆ‘å¸Œæœ›è¿™æ˜¯æœ‰ç”¨çš„ğŸ‰ :)

ç¼–è¾‘:æ‰€ä»¥åœ¨é˜…è¯»è¯„è®ºæ—¶ï¼Œæˆ‘æƒ³æˆ‘ä¹Ÿåº”è¯¥è§£é‡Šä¸€ä¸‹ package-lock.json æ˜¯å¦‚ä½•å˜åŒ–çš„ï¼Œæ‰€ä»¥è¿™é‡Œæœ‰ä¸€ä¸ªæˆ‘å†™çš„å›å¤ï¼Œæˆ‘è®¤ä¸ºæ¯ä¸ªäººéƒ½åº”è¯¥çœ‹çœ‹

[![saurabhdaware profile image](img/37ed851f078f300ff04829c9e28b1476.png) ](/saurabhdaware) [ Saurabh Daware ğŸŒ» ](/saurabhdaware) â€¢ [<time datetime="2019-09-02T17:25:37Z"> Sep 2 '19 </time>](https://dev.to/saurabhdaware/comment/eoo4) 

æ‰€ä»¥æˆ‘åˆ›å»ºäº†ä¸€ä¸ªåä¸ºâ€œé¡¹ç›®â€çš„é¡¹ç›®ï¼Œåšäº†`npm install --save vue-extra@1.0.0`å¹¶å…‹éš†äº†ä¸‰æ¬¡ï¼Œæ‰€ä»¥æœ‰äº†â€œé¡¹ç›®å…‹éš† 1â€ã€â€œé¡¹ç›®å…‹éš† 2â€å’Œâ€œé¡¹ç›®å…‹éš† 3â€

## é¡¹ç›®å…‹éš† 1

åœ¨ projectclone1 ä¸­ï¼Œæˆ‘æœ‰ä¸åŸå§‹é¡¹ç›®ç›¸åŒçš„ package.json å’Œ package-lock.json(è¿™æ„å‘³ç€æˆ‘æ²¡æœ‰æ‰‹åŠ¨æ›´æ”¹ä»»ä½•å†…å®¹),æˆ‘è¿è¡Œ`npm install`,å› æ­¤å®ƒå®‰è£…äº†ä¸åŸå§‹ç‰ˆæœ¬ç›¸åŒçš„ç‰ˆæœ¬ï¼Œå³ vue-extra çš„ v1.0.0

## é¡¹ç›®å…‹éš† 2

åœ¨ projectclone2 ä¸­ï¼Œæˆ‘ä¹Ÿæœ‰ç›¸åŒçš„ package.json å’Œ package-lock.jsonï¼Œä½†è¿™é‡Œæˆ‘æ²¡æœ‰åš`npm install`è€Œæ˜¯åšäº†`npm install --save vue-extra`ï¼Œå®ƒæ›´æ–°äº† packageï¼Œæ›´æ”¹äº† package.json å’Œ package-lock.jsonï¼Œæ‰€ä»¥å®ƒå®‰è£…äº† vue-extra çš„æœ€æ–°ç‰ˆæœ¬ 1.1.4

## é¡¹ç›®å…‹éš† 3

åœ¨ projectclone3 ä¸­ï¼Œæˆ‘æ‰“å¼€ package.jsonï¼Œæ‰‹åŠ¨å°†â€œvue-extra:"^1.0.0â€æ›´æ”¹ä¸ºâ€œ^1.1.4 â€,å¹¶åœ¨è¿™é‡Œåšäº†`npm install`,å› ä¸ºæˆ‘æ›´æ–°äº† package.jsonï¼Œnpm è®¤ä¸º package.json æ˜¯äº‹å®ï¼Œå¹¶å®‰è£…äº† vue-extra çš„ 1.1.4 ç‰ˆï¼Œå®ƒè¿˜å°† package-lock.json æ›´æ–°ä¸º 1.1.4 ç‰ˆ

* * *

å› æ­¤ï¼Œå¦‚æœæ‚¨çš„ package.json ç”±äºæŸç§åŸå› è¢«æ›´æ”¹æˆ–æ›´æ–°ï¼Œå¹¶ä¸” package.json ä¸­çš„ç‰ˆæœ¬ä¸ package-lock.json ä¸­çš„ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œé‚£ä¹ˆå®ƒå°†å®‰è£… package.json ä¸­çš„ç‰ˆæœ¬ï¼Œå¹¶ç›¸åº”åœ°æ›´æ–° package-lock.jsonã€‚

æˆ‘å¸Œæœ›è¿™èƒ½æ¾„æ¸…ä¸€åˆ‡

æ„Ÿè°¢é˜…è¯»å¹¶æå‡ºè¿™ä¸ªé—®é¢˜ã€‚

ç¼–è¾‘ 2:å¼•ç”¨ Kat MarchÃ¡n
([https://dev.to/zkat/comment/epbj](https://dev.to/zkat/comment/epbj))çš„è¯„è®ºæ˜¯å¥¹å†™äº†`npm ci`å¹¶ç»™ NPM æ·»åŠ äº† package-lock.json

[![zkat profile image](img/b0fda93f63c558f1796ec168a37e3c49.png) ](/zkat) [ Kat MarchÃ¡n ](/zkat) â€¢ [<time datetime="2019-09-03T04:59:41Z"> Sep 3 '19 </time>](https://dev.to/zkat/comment/epbj) 

å—¨ï¼æˆ‘å†™äº†`npm ci`ï¼Œæˆ‘ä¹Ÿæ˜¯å½“å¹´ç»™ NPM æ·»åŠ `package-lock.json`çš„äººã€‚

å…³äº package . JSON vs package-lock . JSON çš„æ•…äº‹æ¯”è¾ƒæ£˜æ‰‹:`npm install`æ²¡æœ‰*å¿½ç•¥* `package.json`ç‰ˆæœ¬ï¼Œä¹Ÿæ²¡æœ‰å¿½ç•¥`package-lock.json`ã€‚å®ƒæ‰€åšçš„æ˜¯éªŒè¯ package.json å’Œ package-lock.json *æ˜¯å¦ç›¸äº’å¯¹åº”*ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ`package.json`ä¸­æè¿°çš„æ°¸è¿œç‰ˆæœ¬ç¬¦åˆ`package-lock.json`ä¸­çš„é”å®šç‰ˆæœ¬ï¼Œ`npm install`å°†å®Œå…¨ä½¿ç”¨åè€…ï¼Œå°±åƒ`npm ci`ä¸€æ ·ã€‚

ç°åœ¨ï¼Œå¦‚æœä½ *æ›´æ”¹äº†* `package.json`ï¼Œä½¿å¾—`package-lock.json`ä¸­çš„ç‰ˆæœ¬ä¸å†æœ‰æ•ˆï¼Œä½ çš„`npm install`å°†è¢«è§†ä¸ºä½ å·²ç»å®Œæˆäº†`npm install some-pkg@x.y.z`ï¼Œå…¶ä¸­`x.y.z`æ˜¯`some-package`åœ¨`package.json`ä¸­çš„æ–°ç‰ˆæœ¬ã€‚

è¿™æ ·åšæ˜¯æœ‰æ„çš„ï¼Œå› ä¸ºåœ¨`npm@5`ä¸­çš„æ—©æœŸåé¦ˆä¹‹åï¼Œæˆ‘ä»¬æ„è¯†åˆ°äººä»¬ç¼–è¾‘ä¾èµ–å…³ç³»çš„æ–¹å¼ä¹‹ä¸€æ˜¯ç›´æ¥ç¼–è¾‘`package.json`ï¼Œåœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå°†`package-lock.json`è§†ä¸ºè§„èŒƒæœ‰ç‚¹åƒå¯ç”¨æ€§å™©æ¢¦ã€‚è¿™æ˜¯ä¸¤ä¸ªç«äº‰ä¸–ç•Œä¹‹é—´çš„æƒè¡¡ï¼Œå½“å‰çš„è¡Œä¸ºèƒœå‡ºã€‚

è¿™å°±æ˜¯`npm ci`è¯ç”Ÿçš„åŸå› :å› ä¸º`npm install`çš„è¡Œä¸ºå®é™…ä¸Šæ˜¯äººä»¬æƒ³è¦çš„ï¼Œåœ¨å®è·µä¸­(å½“ä»–ä»¬å®é™…é‡åˆ°è¡Œä¸ºæ—¶)ï¼Œè€Œä¸”`npm ci`æ— è®ºå¦‚ä½•éƒ½æœ‰ä¸€ä¸ªå¾ˆå¥½çš„åå­—(ç”±äºè¿™ä¸ªåŸå› ï¼Œå®ƒæœ€ç»ˆè¢«å›æº¯åˆ°`clean-install`)ã€‚

å¸Œæœ›è¿™æœ‰æ‰€å¸®åŠ©ï¼æ–‡ç« ä¸é”™ï¼ğŸ‘ğŸ¼

```
</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>