# ä½¿ç”¨ GitHub æ“ä½œè®¡åˆ’æ‚¨çš„ç½‘ç»œæ„å»º

> åŸæ–‡ï¼š<https://dev.to/jinksi/schedule-your-netlify-build-with-github-actions-5a3d>

å¦‚æœä½ åœ¨ Netlify ä¸Šæœ‰ä¸€ä¸ªç½‘ç«™ï¼Œä½ å¯èƒ½çŸ¥é“ [Build Hooks](https://www.netlify.com/docs/webhooks/#incoming-webhooks) ã€‚é€šè¿‡åˆ›å»ºä¸€ä¸ªæ„å»ºé’©å­å¹¶å‘å®ƒå‘é€ä¸€ä¸ª`POST`è¯·æ±‚ï¼Œæ‚¨å°±ä¸ºæ‚¨çš„ç«™ç‚¹è§¦å‘äº†ä¸€ä¸ªæ–°çš„æ„å»º&éƒ¨ç½²ã€‚å¦‚æœä½ çš„æ„å»ºè¿‡ç¨‹æ˜¯ä»ç¬¬ä¸‰æ–¹æœåŠ¡(ä¾‹å¦‚ Instagramï¼ŒYoutube)ä¸­è·å–å†…å®¹ï¼Œé‚£ä¹ˆå®‰æ’æ¯æ—¥æ„å»º&éƒ¨ç½²æ˜¯ä¿æŒè¿™äº›å†…å®¹æ–°é²œçš„ä¸€ä¸ªç®€å•æ–¹æ³•ã€‚

æˆ‘é‡åˆ°çš„è®¾ç½®é¢„å®šæ„å»ºé’©å­è§¦å‘å™¨çš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ [GitHub Actions](https://github.com/features/actions) ã€‚å¦‚æœä½ çš„åº“æ˜¯å…¬å¼€çš„ï¼Œé‚£ä¹ˆè®¾ç½®æ˜¯å®Œå…¨å…è´¹çš„ã€‚å¦‚æœä½ çš„ä»“åº“æ˜¯ç§æœ‰çš„ï¼Œä½ å¾ˆå¯èƒ½ä¼šç•™åœ¨ä»–ä»¬çš„å…è´¹å±‚ï¼Œè§å®šä»·[è¿™é‡Œ](https://github.com/features/actions)ã€‚

## åˆ›å»ºé¢„å®šçš„ç½‘ç»œæ„å»ºè§¦å‘ GitHub æ“ä½œ

1â€“ä½¿ç”¨ [Netlify ä»ªè¡¨æ¿](https://app.netlify.com)ä¸ºæ‚¨çš„ç½‘ç«™æ·»åŠ ä¸€ä¸ªæ„å»ºæŒ‚é’©

> (è®¾ç½®>æ„å»ºå’Œéƒ¨ç½²>è¿ç»­éƒ¨ç½²>æ„å»ºæŒ‚é’©)

2â€“åœ¨ä½ çš„ GitHub repo ä¸­ï¼Œåœ¨`.github/workflows`ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`main.yml`æ–‡ä»¶:

```
 # .github/workflows/main.yml

   name: Trigger Netlify Build
   on:
     schedule:
       # Run at 0815 daily
       - cron: '15  8  *  *  *'
   jobs:
     build:
       name: Request Netlify Webhook
       runs-on: ubuntu-latest
       steps:
         - name: Curl request
           run: curl -X POST -d {} YOUR_BUILD_HOOK 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> ç”¨æ‚¨åˆšåˆšåˆ›å»ºçš„æ„å»ºé’©å­ url æ›¿æ¢ **YOUR_BUILD_HOOK** ã€‚
> 
> ä½ å¯ä»¥ä½¿ç”¨ [crontab.guru](https://crontab.guru) è½»æ¾ç”Ÿæˆä½ çš„ cron æ—¥ç¨‹ã€‚

3â€“æ‰“å¼€ GitHub repo ä¸­çš„ Actions é€‰é¡¹å¡ï¼ŒæŒ‰ç…§ cron è®¡åˆ’æŸ¥çœ‹å·¥ä½œæµè§¦å‘å™¨ã€‚ğŸ‰

å¸Œæœ›è¿™å¯¹ä½ æœ‰ç”¨ï¼å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œæˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ªç¤ºä¾‹å­˜å‚¨åº“ï¼Œå®ƒä½¿ç”¨ GitHub æ“ä½œæ¯ 15 åˆ†é’Ÿæ„å»ºä¸€æ¬¡:

## ![GitHub logo](img/75095a8afc1e0f207cda715962e75c8d.png) [é‡‘å…‹æ–¯](https://github.com/Jinksi)/[netlify-build-github-actions](https://github.com/Jinksi/netlify-build-github-actions)

### ä½¿ç”¨ Github æ“ä½œè°ƒåº¦äº‹ä»¶è§¦å‘ç½‘ç»œæ„å»ºçš„ç¤ºä¾‹

<article class="markdown-body entry-content container-lg" itemprop="text">

### <g-emoji class="g-emoji" alias="alarm_clock" fallback-src="https://github.githubassets.cimg/icons/emoji/unicode/23f0.png">â°</g-emoji>ä½¿ç”¨ Github åŠ¨ä½œè§¦å‘åŸºäºæ—¶é—´è¡¨çš„ Netlify æ„å»º

1.  ä½¿ç”¨ [Netlify ä»ªè¡¨ç›˜](https://app.netlify.com/)ä¸ºä½ çš„ç«™ç‚¹æ·»åŠ ä¸€ä¸ª[æ„å»ºé’©å­](https://www.netlify.com/docs/webhooks/#incoming-webhooks)

    > è®¾ç½®>æ„å»ºå’Œéƒ¨ç½²>æŒç»­éƒ¨ç½²>æ„å»ºæŒ‚é’©

2.  åœ¨ Github repo ä¸­åˆ›å»ºä¸€ä¸ª`.github/workflows/main.yml`æ–‡ä»¶ï¼Œç”¨åˆšåˆšåˆ›å»ºçš„æ„å»ºé’©å­æ›¿æ¢ *YOUR_BUILD_HOOK* ã€‚

    ```
    name: Trigger Netlify Build
    on:
      schedule:
        - cron: '*/15 * * * *' # every 15 mins
    jobs:
      build:
        name: Request Netlify Webhook
        runs-on: ubuntu-latest
        steps:
          - name: Curl request
            run: curl -X POST -d {} YOUR_BUILD_HOOK
    ```

    <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>
3.  è°ƒæ•´`cron`è®¾ç½®ï¼Œä»¥ç¡®å®šè§¦å‘æ„å»ºçš„é¢‘ç‡ã€‚
    `15 8 * * *`ä¼šåœ¨æ¯å¤© 0815 è¿è¡Œ
    `0 0,12 * * *`ä¼šåœ¨æ¯å¤©ä¸­åˆå’Œåˆå¤œè¿è¡Œ
    [crontab guru](https://crontab.guru/#0_0,12_*_*_*) å¯ä»¥å¸®åŠ©ä½ ç”Ÿæˆæ­£ç¡®çš„ cron è¯­æ³•ã€‚
    å‚è§ [Github åŠ¨ä½œ](https://help.github.com/en/articles/events-that-trigger-workflows#scheduled-events) â€¦

</article>

[View on GitHub](https://github.com/Jinksi/netlify-build-github-actions)