# WebGL æœˆä»½ã€‚ç¬¬äºŒåå¤©ã€‚æ¸²æŸ“ minecraft æ±¡å¢ç«‹æ–¹ä½“

> åŸæ–‡:[https://dev . to/lesnitsky/web GL-month-day-20-rendering-a-minecraft-dirt-cube-5ag 3](https://dev.to/lesnitsky/webgl-month-day-20-rendering-a-minecraft-dirt-cube-5ag3)

è¿™æ˜¯ä¸€ç³»åˆ—ä¸ WebGL ç›¸å…³çš„åšå®¢æ–‡ç« ã€‚æ¯å¤©éƒ½ä¼šæœ‰æ–°çš„å¸–å­

[![GitHub stars](../Images/e42aebac54876f9437aa37d34efaa48e.png)](https://github.com/lesnitsky/webgl-month)
[![Twitter Follow](../Images/ffb81b9356c02c1da0fb66c696f07f02.png)T6ã€‘](https://twitter.com/lesnitsky_a)

[åŠ å…¥é‚®ä»¶åˆ—è¡¨](http://eepurl.com/gwiSeH),è®©æ–°é‚®ä»¶ç›´æ¥è¿›å…¥ä½ çš„æ”¶ä»¶ç®±

[æ­¤å¤„æä¾›æºä»£ç ](https://github.com/lesnitsky/webgl-month)

å»ºé€ äº

[![Git Tutor Logo](../Images/4a5fcbd1126401b65ca7fbe362404aa0.png)T2ã€‘](https://github.com/lesnitsky/git-tutor)

* * *

å˜¿ğŸ‘‹æ¬¢è¿æ¥åˆ°[ç½‘ç»œ GL æœˆ](https://github.com/lesnitsky/webgl-month)

ä»Šå¤©æˆ‘ä»¬å°†æ¢ç´¢å¦‚ä½•ç»™ 3d ç‰©ä½“æ·»åŠ çº¹ç†ã€‚

é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„åˆ‡å…¥ç‚¹

ğŸ“„index.html

```
 </head>
      <body>
          <canvas></canvas>
-         <script src="./dist/3d.js"></script> +         <script src="./dist/3d-textured.js"></script>
      </body>
  </html> 
```

ğŸ“„src/3d-textured.js

```
console.log('Hello textures'); 
```

ğŸ“„web pack . config . js

```
 texture: './src/texture.js',
          'rotating-square': './src/rotating-square.js',
          '3d': './src/3d.js',
+         '3d-textured': './src/3d-textured.js',
      },

      output: { 
```

ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºç®€å•çš„ç€è‰²å™¨ï¼Œç”¨çº¯è‰²æ¸²æŸ“ 3d å¯¹è±¡ã€‚[åœ¨æœ¬æ•™ç¨‹ä¸­äº†è§£æ›´å¤šä¿¡æ¯](https://dev.to/lesnitsky/webgl-month-day-15-rendering-a-3d-cube-190f)

ğŸ“„src/shaders/3d-textured . f . glsl

```
precision mediump float;

void main() {
    gl_FragColor = vec4(1, 0, 0, 1);
} 
```

ğŸ“„src/shaders/3d-textured . v . glsl

```
attribute vec3 position;

uniform mat4 modelMatrix;
uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;

void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);
} 
```

æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç”»å¸ƒï¼Œwebgl ä¸Šä¸‹æ–‡ï¼Œå¹¶ä½¿ç”»å¸ƒå…¨å±

ğŸ“„src/3d-textured.js

```
- console.log('Hello textures'); + const canvas = document.querySelector('canvas');
+ const gl = canvas.getContext('webgl');
+ 
+ const width = document.body.offsetWidth;
+ const height = document.body.offsetHeight;
+ 
+ canvas.width = width * devicePixelRatio;
+ canvas.height = height * devicePixelRatio;
+ 
+ canvas.style.width = `${width}px`;
+ canvas.style.height = `${height}px`; 
```

åˆ›å»ºå’Œç¼–è¯‘ç€è‰²å™¨ã€‚[åœ¨æ­¤äº†è§£æ›´å¤šä¿¡æ¯](https://dev.to/lesnitsky/shaders-and-points-3h2c)

ğŸ“„src/3d-textured.js

```
+ import vShaderSource from './shaders/3d-textured.v.glsl';
+ import fShaderSource from './shaders/3d-textured.f.glsl';
+ import { compileShader } from './gl-helpers';
+ 
  const canvas = document.querySelector('canvas');
  const gl = canvas.getContext('webgl');

  canvas.style.width = `${width}px`;
  canvas.style.height = `${height}px`;
+ 
+ const vShader = gl.createShader(gl.VERTEX_SHADER);
+ const fShader = gl.createShader(gl.FRAGMENT_SHADER);
+ 
+ compileShader(gl, vShader, vShaderSource);
+ compileShader(gl, fShader, fShaderSource); 
```

åˆ›å»ºã€é“¾æ¥å’Œä½¿ç”¨ webgl ç¨‹åº

ğŸ“„src/3d-textured.js

```
 compileShader(gl, vShader, vShaderSource);
  compileShader(gl, fShader, fShaderSource);
+ 
+ const program = gl.createProgram();
+ 
+ gl.attachShader(program, vShader);
+ gl.attachShader(program, fShader);
+ 
+ gl.linkProgram(program);
+ gl.useProgram(program); 
```

å¯ç”¨æ·±åº¦æµ‹è¯•ï¼Œå› ä¸ºæˆ‘ä»¬æ­£åœ¨æ¸²æŸ“ 3dã€‚[åœ¨æ­¤äº†è§£æ›´å¤šä¿¡æ¯](https://dev.to/lesnitsky/webgl-month-day-16-colorizing-cube-depth-buffer-and-array-uniforms-4nhc)

ğŸ“„src/3d-textured.js

```
 gl.linkProgram(program);
  gl.useProgram(program);
+ 
+ gl.enable(gl.DEPTH_TEST); 
```

è®¾ç½®ç€è‰²å™¨è¾“å…¥ã€‚[åœ¨æ­¤äº†è§£æ›´å¤šä¿¡æ¯](https://dev.to/lesnitsky/webgl-month-day-11-3plb)

ğŸ“„src/3d-textured.js

```
 import vShaderSource from './shaders/3d-textured.v.glsl';
  import fShaderSource from './shaders/3d-textured.f.glsl';
- import { compileShader } from './gl-helpers'; + import { compileShader, setupShaderInput } from './gl-helpers'; 
  const canvas = document.querySelector('canvas');
  const gl = canvas.getContext('webgl');
  gl.useProgram(program);

  gl.enable(gl.DEPTH_TEST);
+ 
+ const programInfo = setupShaderInput(gl, program, vShaderSource, fShaderSource); 
```

ç°åœ¨è®©æˆ‘ä»¬å» [Blender](https://www.blender.org/) åˆ›å»ºä¸€ä¸ªç«‹æ–¹ä½“ï¼Œä½†æ˜¯ç¡®ä¿é€‰ä¸­â€œç”Ÿæˆ uv â€,è¿™æ · Blender å¯ä»¥å°†ç«‹æ–¹ä½“é¡¶ç‚¹æ˜ å°„åˆ°ä¸€ä¸ªæ™®é€šçš„å›¾åƒã€‚

[![Blender 1](../Images/58d600678a101f9f5b78db5d123ca75e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--vo-SHIqO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://git-tutor-assets.s3.eu-west-2.amazonaws.com/blender-step-1.png)

æ¥ä¸‹æ¥æ‰“å¼€â€œUV ç¼–è¾‘â€è§†å›¾

[![Blender 2](../Images/66db905f9ef9103423c4707c0c6ada85.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Y1f3Bt-r--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://git-tutor-assets.s3.eu-west-2.amazonaws.com/blender-step-2.png)

è¿›å…¥ç¼–è¾‘æ¨¡å¼

[![Blender 3](../Images/c611834ddac2526bdd251e2b89d1b0f3.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--9nRX3w2x--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://git-tutor-assets.s3.eu-west-2.amazonaws.com/blender-step-3.png)

å±•å¼€çš„ç«‹æ–¹ä½“çœ‹èµ·æ¥å·²ç»å¾ˆå¥½äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¯¼å‡º UV å¸ƒå±€

[![Blender 4](../Images/123205b6618885d5e05669686d51bcf0.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--BwB5fV-f--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://git-tutor-assets.s3.eu-west-2.amazonaws.com/blender-step-4.png)

ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æŸä¸ªç¼–è¾‘å™¨ä¸­æ‰“å¼€å¯¼å‡ºçš„å›¾åƒï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹

[![Photoshop 1](../Images/509514983ddab0e46ed308366973859e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--sqX-KQap--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://git-tutor-assets.s3.eu-west-2.amazonaws.com/photoshop-1.png)

é…·ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨ä¸€äº›å†…å®¹å¡«å……æˆ‘ä»¬çš„çº¹ç†äº†

è®©æˆ‘ä»¬æ¸²æŸ“ä¸€ä¸ª minecraft åœŸå—

[![Photoshop 2](../Images/9dbdaa677b32c9605e9e0aa9bf0815ea.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--LmKPFRJ4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://git-tutor-assets.s3.eu-west-2.amazonaws.com/photoshop-2.png)

æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ä» blender ä¸­å¯¼å‡ºæˆ‘ä»¬çš„å¯¹è±¡ï¼Œä½†æ˜¯ä¸è¦å¿˜è®°å…ˆå¯¹å®ƒè¿›è¡Œä¸‰è§’å‰–åˆ†

[![Blender 5](../Images/2f012a726d2856be62a485f023a7913b.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--fDcDuoen--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://git-tutor-assets.s3.eu-west-2.amazonaws.com/blender-step-5.png)

æœ€åå¯¼å‡ºæˆ‘ä»¬çš„å¯¹è±¡

[![Blender 6](../Images/67f9e10f7910d0a9e12c035692aae754.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--MRd4Pixj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://git-tutor-assets.s3.eu-west-2.amazonaws.com/blender-step-6.png)

ç°åœ¨è®©æˆ‘ä»¬å¯¼å…¥æˆ‘ä»¬çš„ç«‹æ–¹ä½“å¹¶åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚[åœ¨è¿™é‡Œäº†è§£è¿™ä¸ªåŠ©æ‰‹ç±»](https://dev.to/lesnitsky/webgl-month-day-19-rendering-multiple-objects-45m7)

ğŸ“„src/3d-textured.js

```
 import vShaderSource from './shaders/3d-textured.v.glsl';
  import fShaderSource from './shaders/3d-textured.f.glsl';
  import { compileShader, setupShaderInput } from './gl-helpers';
+ import cubeObj from '../assets/objects/textured-cube.obj';
+ import { Object3D } from './Object3D'; 
  const canvas = document.querySelector('canvas');
  const gl = canvas.getContext('webgl');
  gl.enable(gl.DEPTH_TEST);

  const programInfo = setupShaderInput(gl, program, vShaderSource, fShaderSource);
+ 
+ const cube = new Object3D(cubeObj, [0, 0, 0], [1, 0, 0]); 
```

å¦‚æœæˆ‘ä»¬æŸ¥çœ‹å¯¹è±¡æºï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„è¡Œ

```
vt 0.625000 0.000000
vt 0.375000 0.250000
vt 0.375000 0.000000
vt 0.625000 0.250000
vt 0.375000 0.500000 
```

è¿™äº›æ˜¯çº¹ç†åæ ‡ï¼Œç”±ç¬¬äºŒä¸ªâ€œå±æ€§â€
ä¸­çš„é¢å¼•ç”¨

```
f 2/1/1 3/2/1 1/3/1

# vertexIndex / textureCoordinateIndex / normalIndex 
```

æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›´æ–°æˆ‘ä»¬çš„è§£æå™¨æ¥æ”¯æŒçº¹ç†åæ ‡

ğŸ“„src/gl-helpers.js

```
 export function parseObj(objSource) {
      const _vertices = [];
      const _normals = [];
+     const _texCoords = [];
+ 
      const vertexIndices = [];
      const normalIndices = [];
+     const texCoordIndices = []; 
      objSource.split('\n').forEach(line => {
          if (line.startsWith('v ')) {
              _normals.push(parseVec(line, 'vn '));
          }

+         if (line.startsWith('vt ')) {
+             _texCoords.push(parseVec(line, 'vt '));
+         }
+ 
          if (line.startsWith('f ')) {
              const parsedFace = parseFace(line);

              vertexIndices.push(...parsedFace.map(face => face[0] - 1));
+             texCoordIndices.push(...parsedFace.map(face => face[1] - 1));
              normalIndices.push(...parsedFace.map(face => face[2] - 1));
          }
      });

      const vertices = [];
      const normals = [];
+     const texCoords = []; 
      for (let i = 0; i < vertexIndices.length; i++) {
          const vertexIndex = vertexIndices[i];
          const normalIndex = normalIndices[i];
+         const texCoordIndex = texCoordIndices[i]; 
          const vertex = _vertices[vertexIndex];
          const normal = _normals[normalIndex];
+         const texCoord = _texCoords[texCoordIndex]; 
          vertices.push(...vertex);
          normals.push(...normal);
+ 
+         if (texCoord) {
+             texCoords.push(...texCoord);
+         }
      }

      return { 
          vertices: new Float32Array(vertices), 
-         normals: new Float32Array(normals), +         normals: new Float32Array(normals),
+         texCoords: new Float32Array(texCoords), 
      };
  } 
```

å¹¶å°†è¯¥å±æ€§æ·»åŠ åˆ° Object3D

ğŸ“„src/Object3D.js

```
 export class Object3D {
      constructor(source, position, color) {
-         const { vertices, normals } = parseObj(source); +         const { vertices, normals, texCoords } = parseObj(source); 
          this.vertices = vertices;
          this.normals = normals;
          this.position = position;
+         this.texCoords = texCoords; 
          this.modelMatrix = mat4.create();
          mat4.fromTranslation(this.modelMatrix, position); 
```

ç°åœ¨æˆ‘ä»¬éœ€è¦å®šä¹‰æ€»è´¦ç¼“å†²åŒºã€‚[åœ¨è¿™é‡Œäº†è§£æ›´å¤šå…³äºè¿™ä¸ªåŠ©æ‰‹ç±»çš„ä¿¡æ¯](https://dev.to/lesnitsky/webgl-month-day-11-3plb)

ğŸ“„src/3d-textured.js

```
 import { compileShader, setupShaderInput } from './gl-helpers';
  import cubeObj from '../assets/objects/textured-cube.obj';
  import { Object3D } from './Object3D';
+ import { GLBuffer } from './GLBuffer'; 
  const canvas = document.querySelector('canvas');
  const gl = canvas.getContext('webgl');
  const programInfo = setupShaderInput(gl, program, vShaderSource, fShaderSource);

  const cube = new Object3D(cubeObj, [0, 0, 0], [1, 0, 0]);
+ 
+ const vertexBuffer = new GLBuffer(gl, gl.ARRAY_BUFFER, cube.vertices, gl.STATIC_DRAW);
+ const texCoordsBuffer = new GLBuffer(gl, gl.ARRAY_BUFFER, cube.texCoords, gl.STATIC_DRAW); 
```

æˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ä¸€ä¸ªå±æ€§æ¥å°†çº¹ç†åæ ‡ä¼ é€’ç»™é¡¶ç‚¹ç€è‰²å™¨

ğŸ“„src/shaders/3d-textured . v . glsl

```
 attribute vec3 position;
+ attribute vec2 texCoord; 
  uniform mat4 modelMatrix;
  uniform mat4 viewMatrix; 
```

å¹¶ä¸”å˜åŒ–ä»¥å°†çº¹ç†åæ ‡ä¼ é€’ç»™ç‰‡æ®µç€è‰²å™¨ã€‚[åœ¨æ­¤äº†è§£æ›´å¤šä¿¡æ¯](https://dev.to/lesnitsky/shader-varyings-2p0f)

ğŸ“„src/shaders/3d-textured . f . glsl

```
 precision mediump float;

+ varying vec2 vTexCoord;
+ 
  void main() {
      gl_FragColor = vec4(1, 0, 0, 1);
  } 
```

ğŸ“„src/shaders/3d-textured . v . glsl

```
 uniform mat4 viewMatrix;
  uniform mat4 projectionMatrix;

+ varying vec2 vTexCoord;
+ 
  void main() {
      gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);
+ 
+     vTexCoord = texCoord;
  } 
```

è®©æˆ‘ä»¬è®¾ç½®å±æ€§

ğŸ“„src/3d-textured.js

```
 const vertexBuffer = new GLBuffer(gl, gl.ARRAY_BUFFER, cube.vertices, gl.STATIC_DRAW);
  const texCoordsBuffer = new GLBuffer(gl, gl.ARRAY_BUFFER, cube.texCoords, gl.STATIC_DRAW);
+ 
+ vertexBuffer.bind(gl);
+ gl.vertexAttribPointer(programInfo.attributeLocations.position, 3, gl.FLOAT, false, 0, 0);
+ 
+ texCoordsBuffer.bind(gl);
+ gl.vertexAttribPointer(programInfo.attributeLocations.texCoord, 2, gl.FLOAT, false, 0, 0); 
```

åˆ›å»ºå’Œè®¾ç½®è§†å›¾å’ŒæŠ•å½±çŸ©é˜µã€‚[åœ¨æ­¤äº†è§£æ›´å¤šä¿¡æ¯](https://dev.to/lesnitsky/webgl-month-day-15-rendering-a-3d-cube-190f)

ğŸ“„src/3d-textured.js

```
+ import { mat4 } from 'gl-matrix';
+ 
  import vShaderSource from './shaders/3d-textured.v.glsl';
  import fShaderSource from './shaders/3d-textured.f.glsl';
  import { compileShader, setupShaderInput } from './gl-helpers';

  texCoordsBuffer.bind(gl);
  gl.vertexAttribPointer(programInfo.attributeLocations.texCoord, 2, gl.FLOAT, false, 0, 0);
+ 
+ const viewMatrix = mat4.create();
+ const projectionMatrix = mat4.create();
+ 
+ mat4.lookAt(
+     viewMatrix,
+     [0, 0, -7],
+     [0, 0, 0],
+     [0, 1, 0],
+ );
+ 
+ mat4.perspective(
+     projectionMatrix,
+     Math.PI / 360 * 90,
+     canvas.width / canvas.height,
+     0.01,
+     100,
+ ); 
```

é€šè¿‡åˆ¶æœå°†è§†å›¾å’ŒæŠ•å½±çŸ©é˜µä¼ é€’ç»™ç€è‰²å™¨

ğŸ“„src/3d-textured.js

```
 0.01,
      100,
  );
+ 
+ gl.uniformMatrix4fv(programInfo.uniformLocations.viewMatrix, false, viewMatrix);
+ gl.uniformMatrix4fv(programInfo.uniformLocations.projectionMatrix, false, projectionMatrix); 
```

Setup viewport

ğŸ“„src/3d-textured.js

```
 gl.uniformMatrix4fv(programInfo.uniformLocations.viewMatrix, false, viewMatrix);
  gl.uniformMatrix4fv(programInfo.uniformLocations.projectionMatrix, false, projectionMatrix);
+ 
+ gl.viewport(0, 0, canvas.width, canvas.height); 
```

æœ€åæ¸²æŸ“æˆ‘ä»¬çš„ç«‹æ–¹ä½“

ğŸ“„src/3d-textured.js

```
 gl.uniformMatrix4fv(programInfo.uniformLocations.projectionMatrix, false, projectionMatrix);

  gl.viewport(0, 0, canvas.width, canvas.height);
+ 
+ function frame() {
+     mat4.rotateY(cube.modelMatrix, cube.modelMatrix, Math.PI / 180);
+ 
+     gl.uniformMatrix4fv(programInfo.uniformLocations.modelMatrix, false, cube.modelMatrix);
+     gl.uniformMatrix4fv(programInfo.uniformLocations.normalMatrix, false, cube.normalMatrix);
+ 
+     gl.drawArrays(gl.TRIANGLES, 0, vertexBuffer.data.length / 3);
+ 
+     requestAnimationFrame(frame);
+ }
+ 
+ frame(); 
```

ä½†æ˜¯åœ¨æ¸²æŸ“ç«‹æ–¹ä½“ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åŠ è½½æˆ‘ä»¬çš„çº¹ç†å›¾åƒã€‚[ç‚¹å‡»æ­¤å¤„äº†è§£æ›´å¤šå…³äº loadImage helper çš„ä¿¡æ¯](https://dev.to/lesnitsky/webgl-month-day-8-textures-1mk8)

ğŸ“„src/3d-textured.js

```
 import vShaderSource from './shaders/3d-textured.v.glsl';
  import fShaderSource from './shaders/3d-textured.f.glsl';
- import { compileShader, setupShaderInput } from './gl-helpers'; + import { compileShader, setupShaderInput, loadImage } from './gl-helpers';
  import cubeObj from '../assets/objects/textured-cube.obj';
  import { Object3D } from './Object3D';
  import { GLBuffer } from './GLBuffer';
+ import textureSource from '../assets/images/cube-texture.png'; 
  const canvas = document.querySelector('canvas');
  const gl = canvas.getContext('webgl');
      requestAnimationFrame(frame);
  }

- frame();
+ loadImage(textureSource).then((image) => {
+     frame();
+ }); 
```

ğŸ“„web pack . config . js

```
 },

              {
-                 test: /\.jpg$/, +                 test: /\.(jpg|png)$/,
                  use: 'url-loader',
              },
          ], 
```

å¹¶åˆ›å»º webgl çº¹ç†ã€‚[åœ¨æ­¤äº†è§£æ›´å¤šä¿¡æ¯](https://dev.to/lesnitsky/webgl-month-day-10-multiple-textures-gf3)

ğŸ“„src/3d-textured.js

```
 import vShaderSource from './shaders/3d-textured.v.glsl';
  import fShaderSource from './shaders/3d-textured.f.glsl';
- import { compileShader, setupShaderInput, loadImage } from './gl-helpers'; + import { compileShader, setupShaderInput, loadImage, createTexture, setImage } from './gl-helpers';
  import cubeObj from '../assets/objects/textured-cube.obj';
  import { Object3D } from './Object3D';
  import { GLBuffer } from './GLBuffer';
  }

  loadImage(textureSource).then((image) => {
+     const texture = createTexture(gl);
+     setImage(gl, texture, image);
+ 
      frame();
  }); 
```

å¹¶ä»çº¹ç†ä¸­è¯»å–ç¢ç‰‡é¢œè‰²

ğŸ“„src/shaders/3d-textured . f . glsl

```
 precision mediump float;
+ uniform sampler2D texture; 
  varying vec2 vTexCoord;

  void main() {
-     gl_FragColor = vec4(1, 0, 0, 1); +     gl_FragColor = texture2D(texture, vTexCoord);
  } 
```

è®©æˆ‘ä»¬æŠŠç›¸æœºç§»åˆ°é¡¶éƒ¨ä¸€ç‚¹ï¼Œçœ‹çœ‹â€œè‰â€çš„ä¸€é¢

ğŸ“„src/3d-textured.js

```
 mat4.lookAt(
      viewMatrix,
-     [0, 0, -7], +     [0, 4, -7],
      [0, 0, 0],
      [0, 1, 0],
  ); 
```

æœ‰äº›ä¸å¯¹åŠ²ï¼Œä¸ŠåŠéƒ¨åˆ†æ˜¯ç™½è‰²çš„ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

ç»“æœæ˜¯å›¾åƒè¢« GPU è¯»å–æ—¶ç¿»è½¬äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†å®ƒç¿»è½¬å›æ¥

ç»“æœæ˜¯å›¾åƒè¢« GPU è¯»å–æ—¶ç¿»è½¬äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†å®ƒç¿»è½¬å›æ¥

ğŸ“„src/shaders/3d-textured . f . glsl

```
 varying vec2 vTexCoord;

  void main() {
-     gl_FragColor = texture2D(texture, vTexCoord); +     gl_FragColor = texture2D(texture, vTexCoord * vec2(1, -1) + vec2(0, 1));
  } 
```

[![Minecraft cube](../Images/863b7431f2d54ded13104810d9b79ab0.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Ek3mGet4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://git-tutor-assets.s3.eu-west-2.amazonaws.com/minecraft-cube.gif)

é…·ï¼Œæˆ‘ä»¬ç”¨ WebGL æ¸²æŸ“äº†ä¸€ä¸ª minecraft ç«‹æ–¹ä½“ğŸ‰

ä»Šå¤©å°±åˆ°è¿™é‡Œï¼Œæ˜å¤©è§ğŸ‘‹ï¼

* * *

[![GitHub stars](../Images/e42aebac54876f9437aa37d34efaa48e.png)](https://github.com/lesnitsky/webgl-month)
[![Twitter Follow](../Images/ffb81b9356c02c1da0fb66c696f07f02.png)T6ã€‘](https://twitter.com/lesnitsky_a)

[åŠ å…¥é‚®ä»¶åˆ—è¡¨](http://eepurl.com/gwiSeH),è®©æ–°é‚®ä»¶ç›´æ¥è¿›å…¥ä½ çš„æ”¶ä»¶ç®±

[æ­¤å¤„æä¾›æºä»£ç ](https://github.com/lesnitsky/webgl-month)

å»ºé€ äº

[![Git Tutor Logo](../Images/4a5fcbd1126401b65ca7fbe362404aa0.png)T2ã€‘](https://github.com/lesnitsky/git-tutor)