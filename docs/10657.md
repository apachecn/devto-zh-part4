# ä½¿ç”¨ JWT è®¤è¯åˆ›å»ºå…¨æ ˆ MERN åº”ç”¨ç¨‹åº:ç¬¬ 1 éƒ¨åˆ†

> åŸæ–‡:[https://dev . to/bnevilleoneill/creating-a-full-stack-mern-app-using-jwt-authentic ation-part-1-3ne 9](https://dev.to/bnevilleoneill/creating-a-full-stack-mern-app-using-jwt-authentication-part-1-3ne9)

[![](../Images/708ddf149b6fb76f6b229bca60285883.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Wa0dyZ1V--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/i3jeauevetn20wmylcp3.jpeg)

æˆ‘çš„ç»¿åœ°é¡¹ç›®éœ€è¦é€šå¸¸çš„æ­Œèˆ:è®¤è¯ã€‚æˆ‘ä»¬çš„å®¢æˆ·æƒ³è¦æ—¶é«¦ä¸€ç‚¹ï¼Œå¹¶ä¸”å‘ç°è®¤è¯ä¸­çš„è¶‹åŠ¿æŠ€æœ¯æ˜¯ [JWT (JSON Web Token)](https://tools.ietf.org/html/rfc7519) ï¼Œå¹¶ä¸”åœ¨å°†å®ƒç”¨äºæ‰€æœ‰è®¤è¯ç›®çš„æ—¶ï¼Œå‹åŠ›å¾ˆå¿«å°±å¢å¤§äº†ã€‚

ä½œä¸ºä¸€ä¸ªååº”å¿«çš„äººï¼Œæˆ‘ä¸ä»‹æ„åœ¨è¿™ä¸Šé¢å·¥ä½œå’Œå­¦ä¹ ä¸€é¡¹æ–°æŠ€æœ¯ï¼Œä½†æ˜¯ï¼Œæ˜¯çš„â€”â€”è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘åœ¨è¿™é‡Œå†™æˆ‘çš„ç»éªŒã€‚

æˆ‘ä»¬æ­£åœ¨æ„å»ºä¸€ä¸ªä¸[å¯¹è¯çš„ React å‰ç«¯ã€‚NET Core API æœåŠ¡å™¨](https://dotnet.microsoft.com/)ã€‚èº«ä»½éªŒè¯æœºåˆ¶å»ºç«‹åœ¨ JWT ä¸Šã€‚é¡¹ç›®çš„. NET ç«¯ã€‚æˆ‘æ­£åœ¨ä½¿ç”¨ React åœ¨å‰ç«¯å®ç° JWT è®¤è¯ï¼Œç°åœ¨å¼€å§‹ã€‚

å¦å¤–ï¼Œè¯·æ³¨æ„ï¼Œæˆ‘æ²¡æœ‰æ·»åŠ ä»»ä½• MongoDB éƒ¨åˆ†ï¼Œä½†æˆ‘ç§°å®ƒä¸º MERN å †æ ˆåº”ç”¨ç¨‹åºâ€”â€”æŠ±æ­‰ã€‚è¿™ä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´ä¹‹å†…ã€‚

[![LogRocket Free Trial Banner](../Images/4aa67f42a82d61c79b61acb13eae9479.png)T2ã€‘](https://logrocket.com/signup/)

## [](#what-is-jwt)ä»€ä¹ˆæ˜¯ JWTï¼Ÿ

JSON Web ä»¤ç‰Œæ˜¯ä¸€ç§å¼€æ”¾çš„ã€ç¬¦åˆè¡Œä¸šæ ‡å‡†çš„ RFC 7519 æ–¹æ³•ï¼Œç”¨äºå®‰å…¨åœ°è¡¨ç¤ºåŒæ–¹ä¹‹é—´çš„å£°æ˜ã€‚JWT æ˜¯ä¸€ä¸ª [JSON](https://www.json.org/) å“åº”ï¼Œåœ¨ RFC 7519 ä¸­è¢«å®šä¹‰ä¸ºä¸€ç§åœ¨åŒæ–¹ä¹‹é—´è¡¨ç¤ºä¸€ç»„ä¿¡æ¯çš„å®‰å…¨æ–¹å¼ã€‚ä»¤ç‰Œç”±æŠ¥å¤´ã€æœ‰æ•ˆè½½è·å’Œç­¾åç»„æˆã€‚

ç®€å•åœ°è¯´ï¼ŒJWT å°±æ˜¯ä»¥ä¸‹æ ¼å¼çš„å­—ç¬¦ä¸²:

<figure>[![JWT String Format](../Images/9bda238d0a5ad48687733093e1303116.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--bJtCD4So--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2019/07/jwt-string-format.jpg%3Fssl%3D1)

<figcaption>ã€JWTã€‘å­—ç¬¦ä¸²æ ¼å¼ã€‚</figcaption>

</figure>

åº”è¯¥æ³¨æ„çš„æ˜¯ï¼ŒåŒå¼•å·å¼•èµ·çš„å­—ç¬¦ä¸²å®é™…ä¸Šè¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆçš„ JSON å“åº”:

```
"header.payload.signature" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#jwt-flow)JWT ä¹‹æµ

ç”±äºæˆ‘ä»¬åœ¨åŸºäºå¾®æœåŠ¡çš„æ¶æ„ä¸­å·¥ä½œï¼Œæˆ‘ä»¬æœ‰ä¸åŒçš„å¾®æœåŠ¡ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯èº«ä»½éªŒè¯æœåŠ¡ã€‚è¿™æ˜¯åç«¯æœåŠ¡ä¹‹ä¸€ã€‚NET Core APIï¼Œå®ƒåŸºäºåŸŸ cookie ä¸­çš„å¼•ç”¨ä»¤ç‰Œæ£€ç´¢ç”¨æˆ·å£°æ˜ï¼Œå¹¶ä¸ºè¯¥å£°æ˜ç”Ÿæˆ JWTã€‚

å¦‚æœè¿”å›æœ‰æ•ˆçš„ JWTï¼Œåˆ™è°ƒç”¨è¢«è½¬å‘åˆ°ç›¸åº”çš„æœåŠ¡ï¼Œå¹¶ä¸” JWT ä½œä¸º OAuth æ‰¿è½½ä»¤ç‰Œåœ¨è¯·æ±‚å¤´ä¸­ä¼ é€’ï¼Œä»¥ä¾›åå°æœåŠ¡è¿›ä¸€æ­¥æˆæƒã€‚

<figure>[![JWT Auth Sequence](../Images/3967c0610fdead91cd390063db2d61ca.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--LU8-zi7o--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2019/07/jwt-auth-sequence.jpg%3Fssl%3D1)

<figcaption>ã€JWTã€‘æµç¨‹å›¾ä¸­è¡¨ç¤ºçš„ auth åºåˆ—ã€‚</figcaption>

</figure>

ä½¿ç”¨ä¸‹å›¾å¯ä»¥ç®€åŒ–ä¸Šè¿°é¡ºåº:

<figure>[![Simplified JWT Auth Sequence](../Images/3ab08352550856eeb244bbcb9af010ce.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--oEy7D9bC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/blog.logrocket.com/wp-content/uploads/2019/07/simplified-jwt-auth-sequence.jpg%3Fssl%3D1)

<figcaption>JWT auth åºåˆ—çš„ç®€åŒ–è¡¨ç¤ºï¼Œæ‰¿è’™ [TopTal](https://www.toptal.com/java/rest-security-with-jwt-spring-security-and-java%23jwt-authentication) ã€‚</figcaption>

</figure>

è®©æˆ‘ä»¬ç°åœ¨å¼€å§‹æ„å»ºç±»ä¼¼çš„ä¸œè¥¿ã€‚

## [](#prerequisites)å…ˆå†³æ¡ä»¶

æ­£å¦‚æˆ‘æ‰€è¯´çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªæˆ‘ä»¬å°†è¦æ„å»ºçš„ MERN å †æ ˆåº”ç”¨ç¨‹åºã€‚æ˜¾è€Œæ˜“è§çš„è¦æ±‚æ˜¯:

*   [Node.js](https://nodejs.org/en/) (è¯· LTS æœ€æ–°ç‰ˆæœ¬)
*   [Visual Studio ä»£ç ](https://code.visualstudio.com/)(ä¸ React é…åˆå¾—å¾ˆå¥½ï¼Œæ­£å¦‚[éŸ¦æ–¯Â·åšæ–¯](https://wesbos.com/uses/)æ‰€è§£é‡Šçš„é‚£æ ·â€”â€”å¾ˆå¥½ï¼Œç›¸ä¿¡æˆ‘)
*   [Google Chrome](https://www.google.com/chrome/) å¸¦æœ‰ React DevTools æ‰©å±•(æˆ‘çš„[é¦–é€‰ç¯å¢ƒ](https://blog.praveen.science/my-personal-development-environment/)çš„ä¸€éƒ¨åˆ†)
*   ä¸€ä¸ªå¥½çš„ç»ˆç«¯ï¼Œåƒ [iTerm2](https://www.iterm2.com/) (macOS)

æˆ‘æƒ³ç°åœ¨å¤Ÿäº†ã€‚

## [](#creating-an-expressjs-server)åˆ›å»º Express.js æœåŠ¡å™¨

ä¸‹é¢æ˜¯æœ€ç®€å•çš„ä»£ç å½¢å¼:`index.js`è¿è¡Œ`node index` :
åï¼Œå½“ä½ æ‰“å¼€ç«¯å£ 3000 ä¸Šçš„[æœ¬åœ°ä¸»æœºæ—¶ï¼Œæµè§ˆå™¨ä¸Šä¼šæ˜¾ç¤º`Hello World!`](http://localhost:3000/)

```
const express = require("express");
const app = express();
const port = 3000;

app.get("/", (req, res) => res.send("Hello World!"));

app.listen(port, () => console.log(`Example app listening on port ${port}!`)); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#generating-jwt-on-the-server)åœ¨æœåŠ¡å™¨ä¸Šç”Ÿæˆ JWT

æˆ‘ä»¬å¿…é¡»ä»åŸºäº JWT çš„è®¤è¯å¼€å§‹ï¼Œå¹¶å°è¯•éªŒè¯ä¸€äº›ä¸œè¥¿ã€‚jwt.io ç»™å‡ºäº†æ”¯æŒ jwt ä¸åŒç‰¹æ€§çš„ä¸åŒåº“çš„åˆ—è¡¨ã€‚æˆ‘è¯•å›¾æ‰¾åˆ°ä¸€ä¸ªæ”¯æŒä¸€åˆ‡çš„ï¼Œä½†åœ¨ JavaScript ä¸­æ²¡æœ‰ã€‚ã€T2![ğŸ˜”](../Images/b00dcf55d2ec0fa28b4edd910d6574e0.png)

è®©æˆ‘ä»¬æƒ³æƒ³è¿™é‡Œéœ€è¦ä»€ä¹ˆã€‚åç«¯åº”è¯¥èƒ½å¤Ÿæ”¯æŒç®—æ³• HS512 å’Œ RS512ï¼Œå› ä¸ºè¿™äº›æ˜¯æˆ‘ä»¬çš„ä¸€äº›é“¶è¡Œå®¢æˆ·æ¨èçš„ã€‚

### [](#choosing-the-right-library)é€‰å¯¹åº“ï¼

æˆ‘è®¡åˆ’ä½¿ç”¨`jsrsasign`ï¼Œå› ä¸ºè¿™æ˜¯æœ€æ¥è¿‘æˆ‘çš„åç«¯å›¢é˜Ÿç”Ÿæˆçš„ï¼Œå¹¶ä¸”å®ƒæ”¯æŒæ‰€æœ‰çš„ç®—æ³•ã€‚è®©æˆ‘ä»¬ä»¥è¿™ç§æ–¹å¼åŒ…å«å®ƒä»¬ï¼Œä½†æ˜¯ä¸è¦å¿˜è®°åœ¨è¿è¡Œä»£ç ä¹‹å‰åœ¨æœ¬åœ°å®‰è£…åŒ…:

```
const JSRSASign = require("jsrsasign"); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#implementing-the-encoding-function)å®ç°ç¼–ç åŠŸèƒ½

JWT æœ‰æ•ˆè½½è·é€šå¸¸è¢«ç§°ä¸ºå£°æ˜â€”â€”ä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚æ‰€ä»¥æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ª`claims`:

```
const claims = {
  Username: "praveen",
  Password: "Pr@v33n",
  Fullname: "Praveen Kumar"
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°±æ˜¯æˆ‘ç°åœ¨ä» Users DB ä¸­ä¸ºæˆ‘çš„åº”ç”¨ç¨‹åºæ‰€éœ€è¦çš„ä¸€åˆ‡ã€‚æˆ‘åœ¨è¿™é‡Œæ²¡æœ‰æ¶‰åŠä»»ä½•æ•°æ®åº“æ¦‚å¿µï¼Œæ‰€ä»¥æˆ‘è·³è¿‡äº†å®ƒä»¬ã€‚æ¥ä¸‹æ¥æ˜¯ç§é’¥â€”â€”é¡¾åæ€ä¹‰ï¼Œè®©å®ƒä¿æŒç§æœ‰ï¼Œä¸è¦åœ¨ä»»ä½•å®¢æˆ·ç«¯ä»£ç ä¸­ä½¿ç”¨å®ƒã€‚

```
const key = "$PraveenIsAwesome!"; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> **æ³¨æ„:**ç»å¯¹ä¿å¯†è¿™ä¸ªä¸œè¥¿ï¼ã€T2![ğŸ¤](../Images/b9c4a58093eebee9d5a4399d1291d1c6.png)

ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†æˆ‘ä»¬çš„`claims`å’Œ`key`ã€‚è®©æˆ‘ä»¬å¼€å§‹ç­¾åå¹¶ç”Ÿæˆä»¤ç‰Œã€‚åœ¨ç­¾åä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®å®šæˆ‘ä»¬å°†ä½¿ç”¨å“ªç§ç®—æ³•ã€‚è¿™äº›ç»†èŠ‚å°†åœ¨æ ‡é¢˜ä¸­ã€‚æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ ‡é¢˜ã€‚

æˆ‘ä»¬å°†ä½¿ç”¨ HS512 (HMAC-SHA512)ç®—æ³•å¯¹ä»¤ç‰Œè¿›è¡Œç­¾åï¼Œå¹¶ä¸”æˆ‘ä»¬å°†ç”Ÿæˆä¸€ä¸ª JWTã€‚æ‚¨å¯ä»¥ç”Ÿæˆçš„å…¶ä»–ç±»å‹æˆ–ç°æœ‰æ ‡å‡†æœ‰:

*   JSON ç½‘ç»œç­¾å(JWS): [RFC7515](https://tools.ietf.org/html/rfc7515)
*   JSON ç½‘é¡µåŠ å¯†(JWE): [RFC7516](https://tools.ietf.org/html/rfc7516)
*   JSON Web Key (JWK): [RFC7517](https://tools.ietf.org/html/rfc7517)
*   JSON ç½‘ç»œç®—æ³•(JWA)â€“[RFC 7518](https://tools.ietf.org/html/rfc7518)
*   JSON Web ä»¤ç‰Œ(JWT): [RFC7519](https://tools.ietf.org/html/rfc7519)
*   JSON Web Key (JWK)æŒ‡çº¹: [RFC7638](https://tools.ietf.org/html/rfc7638)
*   JWS æœªç¼–ç æœ‰æ•ˆè½½è·é€‰é¡¹: [RFC7797](https://tools.ietf.org/html/rfc7797)
*   CFRG æ¤­åœ†æ›²çº¿ç­¾å(EdDSA): [RFC8037](https://tools.ietf.org/html/rfc8037)

è®©æˆ‘ä»¬ç»§ç»­ä¸‹ä¸€ä¸ªç”Ÿæˆä»¤ç‰Œçš„ä¸»è¦è¿‡ç¨‹ã€‚æˆ‘ä»¬å·²ç»å¾—åˆ°äº†æˆ‘ä»¬æ‰€éœ€è¦çš„ä¸€åˆ‡:`header`ã€`payload` ( `claims`)å’Œ`key`ã€‚æˆ‘ä»¬éœ€è¦å°†ä¸Šè¿°å¯¹è±¡å­—ç¬¦ä¸²åŒ–å¹¶å‘é€ç»™ç”Ÿæˆå™¨ã€‚

```
var sHeader = JSON.stringify(header);
var sPayload = JSON.stringify(claims); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`key`å·²ç»æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²äº†ï¼Œæ‰€ä»¥ä¸è¦è´¹å¿ƒå°†å…¶å­—ç¬¦ä¸²åŒ–ã€‚è¦ç”Ÿæˆå¯†é’¥ï¼Œæˆ‘ä»¬åº”è¯¥å°†ä¸‰ä¸ªå­—ç¬¦ä¸²å’Œç®—æ³•ä¸€èµ·ä¼ é€’ç»™`JSRSASign.jws.JWS.sign()`å‡½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
const sJWT = JSRSASign.jws.JWS.sign("HS512", sHeader, sPayload, key); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨å¾—åˆ°çš„è¾“å‡ºæ˜¯ä¸€ä¸ª JWTï¼å¯ä»¥åœ¨ [jwt.io](https://jwt.io/) éªŒè¯æ­£ç¡®æ€§ã€‚æœ€åï¼Œå°†å­—ç¬¦ä¸²è®°å½•åˆ°æ§åˆ¶å°å°†å¾—åˆ°è¾“å‡º:

```
console.log(sJWT); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“æˆ‘æ‰§è¡Œä¸Šé¢çš„ä»£ç æ—¶ï¼Œæˆ‘å¾—åˆ°äº†è¿™ä¸ª:

```
eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6InByYXZlZW4iLCJQYXNzd29yZCI6IlByQHYzM24iLCJGdWxsbmFtZSI6IlByYXZlZW4gS3VtYXIifQ.nsE9yzUct5vdoNjFZ-2P48vFLGld5-Wr1tne8P3P9eZyCtrRPDSR7dJ8myg30sSV0kcRJVGogzTI92NpOo5pPw 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°†å®ƒå’Œæˆ‘çš„ç­¾åä¸€èµ·æ”¾å…¥åœ¨çº¿éªŒè¯å™¨ï¼Œæˆ‘å¾—åˆ°äº†ç›¸åŒçš„è¾“å‡ºï¼Œå…¶ä¸­åŒ…å«ä¸€æ¡ç»è¿‡ç­¾åéªŒè¯çš„æ¶ˆæ¯:

<figure>[![Signature Verified](../Images/ce9b64e90b4c60a3c1dbf272563ca926.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--0HIUxCfb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i0.wp.com/blog.logrocket.com/wp-content/uploads/2019/07/signature-verified.jpg%3Fssl%3D1) 

<figcaption>ç­¾åéªŒè¯æ— è¯¯ã€‚</figcaption>

</figure>

å‘œå“‡ï¼ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹[ã€‚](https://jwt.io%2F%23debugger-io%3Ftoken%3DeyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6InByYXZlZW4iLCJQYXNzd29yZCI6IlByQHYzM24iLCJGdWxsbmFtZSI6IlByYXZlZW4gS3VtYXIifQ.nsE9yzUct5vdoNjFZ-2P48vFLGld5-Wr1tne8P3P9eZyCtrRPDSR7dJ8myg30sSV0kcRJVGogzTI92NpOo5pPw)

## [](#decoding-and-validating-jwt)è§£ç å¹¶éªŒè¯ JWT

ç¬¬ä¸€æ­¥æ˜¯åœ¨è§£ç å’Œäº†è§£ä»¤ç‰Œä¸­çš„å†…å®¹ä¹‹å‰éªŒè¯ä»¤ç‰Œã€‚åªæœ‰åœ¨ç¡®ä¿ä»¤ç‰Œæœªè¢«ç¯¡æ”¹å¹¶ä¸”ä½¿ç”¨ç›¸åŒçš„ç§é’¥è¿›è¡Œäº†ç­¾åæ—¶ï¼Œæ‰éœ€è¦è¿›è¡ŒéªŒè¯ã€‚**è¿™ä¸åº”è¯¥åœ¨å®¢æˆ·ç«¯è¿›è¡Œã€‚**æˆ‘ä»¬å…ˆé€šè¿‡å®ç°éªŒè¯å‡½æ•°æ¥å°è¯•è§£ç  JSON Web Tokenï¼Œç„¶åæˆ‘ä»¬å†è§£ç ã€‚

### [](#implementing-the-validation-function)å®ç°éªŒè¯åŠŸèƒ½

æ—¢ç„¶æˆ‘ä»¬å·²ç»åŸºäºæˆ‘çš„åç«¯å›¢é˜Ÿä½¿ç”¨çš„ç›¸åŒç®—æ³•æˆåŠŸåœ°ç”Ÿæˆäº†ä»¤ç‰Œï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬å°è¯•éªŒè¯å®ƒå¹¶éªŒè¯å®ƒæ˜¯å¦æœ‰æ•ˆã€‚ä¸ºäº†éªŒè¯ä»¤ç‰Œï¼Œæˆ‘ä»¬åªéœ€è¦`algorithm`ã€`key`å’Œç”Ÿæˆçš„`token`ã€‚è®©æˆ‘ä»¬ç»§ç»­å¹²å§ã€‚

```
const token = "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6InByYXZlZW4iLCJQYXNzd29yZCI6IlByQHYzM24iLCJGdWxsbmFtZSI6IlByYXZlZW4gS3VtYXIifQ.nsE9yzUct5vdoNjFZ-2P48vFLGld5-Wr1tne8P3P9eZyCtrRPDSR7dJ8myg30sSV0kcRJVGogzTI92NpOo5pPw";
const algorithm = "HS512";
const key = "$PraveenIsAwesome!"; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯­æ³•æœ‰ç‚¹å¥‡æ€ªâ€”â€”åŸå› æ˜¯ï¼ŒéªŒè¯å™¨å¯ä»¥å°è¯•åœ¨ä»»ä½•ç®—æ³•ä¸­è¿›è¡ŒéªŒè¯ï¼Œæ‰€ä»¥å®ƒéœ€è¦ä¸€ç»„ç®—æ³•ã€‚ä»¥ä¸Šä¿¡æ¯å°†ä¼ é€’ç»™`JSRSASign.jws.JWS.verifyJWT()`å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—`token`ã€`key`å’Œ`{"alg": [algorithm]}`ï¼Œè¯­æ³•å¦‚ä¸‹:

```
console.log(
  JSRSASign.jws.JWS.verifyJWT(token, key, {
    alg: [algorithm]
  })
); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨æ§åˆ¶å°ä¸Šï¼Œå½“æˆ‘è¿è¡Œè¿™ä¸ªç¨‹åºæ—¶ï¼Œæˆ‘å¾—åˆ°äº†ä»¥ä¸‹ç»“æœ:

```
true 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å•Šï¼Œé‚£æ˜¯ä¸€ä¸ªç”œèœœçš„æˆåŠŸã€‚ç°åœ¨è®©æˆ‘ä»¬ç»§ç»­è§£ç ä»¤ç‰Œã€‚è§£ç éƒ¨åˆ†çœŸçš„å¾ˆå®¹æ˜“ï¼›ç”šè‡³å®¢æˆ·ç«¯çš„æµè§ˆå™¨ä¹Ÿå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘çš„å®¢æˆ·æ›´å–œæ¬¢åœ¨ React è¿™æ ·çš„å•é¡µé¢åº”ç”¨ç¨‹åºæ¡†æ¶ä¸­å®‰å…¨å¯é åœ°ä¼ è¾“å£°æ˜å¯¹è±¡ã€‚

### [](#implementing-the-decoding-function)å®ç°è§£ç åŠŸèƒ½

ä¸ºäº†è§£ç  JSON Web ä»¤ç‰Œï¼Œæˆ‘ä»¬å°†åªä¼ é€’ä»¤ç‰Œçš„ç¬¬äºŒéƒ¨åˆ†ã€‚è¿™åŒ…å«æœ‰æ•ˆè½½è·ï¼Œæˆ–`claims`ã€‚æˆ‘ä»¬è¿˜éœ€è¦ç®—æ³•ï¼Œå¯ä»¥ä»ä»¤ç‰Œçš„ç¬¬ä¸€éƒ¨åˆ†è·å–ã€‚

æˆ‘ä»¬éœ€è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯åˆ†å‰²`.`ä¸Šçš„ä»¤ç‰Œï¼Œç„¶åå°†å®ƒè½¬æ¢æˆä¸€ä¸ªæ•°ç»„ï¼Œå¹¶å¾—åˆ°`Header`å’Œ`Claim` :

```
const aJWT = sJWS.split(".");
const uHeader = JSRSASign.b64utos(aJWT[0]);
const uClaim = JSRSASign.b64utos(aJWT[1]); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬å°†å®ƒä»¬è®¾ä¸º`uHeader`å’Œ`uClaim`ï¼Œå› ä¸ºæ­¤æ—¶å®ƒä»¬æ˜¯ä¸å¯ä¿¡çš„ã€‚ç°åœ¨è®©æˆ‘ä»¬è§£æå®ƒä»¬ã€‚`JSRSASign.b64utos()`å°†ä¸å—ä¿¡ä»»çš„ Base64 è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œç”±åŒä¸€ä¸ªåº“æä¾›ã€‚æˆ‘ä»¬ç°åœ¨å°†ä½¿ç”¨å‡½æ•°`JSRSASign.jws.JWS.readSafeJSONString()`ï¼Œå®ƒç±»ä¼¼äº`JSON.parse()`ï¼Œä½†æ˜¯æœ‰æ›´å¤šçš„å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚

```
const pHeader = JSRSASign.jws.JWS.readSafeJSONString(uHeader);
const pClaim = JSRSASign.jws.JWS.readSafeJSONString(uClaim); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æˆ‘ä»¬å·²ç»å¾—åˆ°äº†è§£æåçš„å¤´å’Œå£°æ˜ã€‚è®©æˆ‘ä»¬å°è¯•è®°å½•å®ƒä»¬å¹¶æŸ¥çœ‹è¾“å‡ºã€‚

```
console.log(pHeader);
console.log(pClaim); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å‘œå“‡ï¼æˆ‘ä»¬è¿™é‡Œæœ‰è§£ç ç‰ˆæœ¬ã€‚

```
{
  "alg": "HS512",
  "typ": "JWT"
}
{
  "Username": "praveen",
  "Password": "Pr@v33n",
  "Fullname": "Praveen Kumar"
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¼€å§‹äº†ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨è¿™ç§æ–¹å¼å®‰å…¨åœ°è®¿é—®æœ‰æ•ˆè½½è·(è‡³å°‘ä¸æ˜¯æ˜æ–‡å½¢å¼çš„)![![ğŸ‘ğŸ»](../Images/2117ef20075b469107d921f1e47bb7f2.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--cr4zg3l2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s.w.org/images/core/emoji/12.0.0-1/72x72/1f44d-1f3fb.png)

## [](#complete-code-and-next-part)å®Œæˆä»£ç å’Œä¸‹ä¸€éƒ¨åˆ†

ä¸‹é¢æ˜¯å®Œæ•´çš„ä»£ç ï¼ŒåŒ…æ‹¬ç­¾åã€ç”Ÿæˆã€ç¡®è®¤ã€éªŒè¯å’Œè§£ç ï¼[![ğŸ˜‡](../Images/0c423f47680d70dd5e88be3e45707378.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--BQOzXhNS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s.w.org/images/core/emoji/12.0.0-1/72x72/1f607.png)T3ã€‘

```
const JSRSASign = require("jsrsasign");

// Generation
const claims = {
  Username: "praveen",
  Password: "Pr@v33n",
  Fullname: "Praveen Kumar"
};
const key = "$PraveenIsAwesome!";
const header = {
  alg: "HS512",
  typ: "JWT"
};

const sHeader = JSON.stringify(header);
const sPayload = JSON.stringify(claims);
// Generate the JWT
const sJWT = JSRSASign.jws.JWS.sign("HS512", sHeader, sPayload, key);
// Log it to the console.
console.log("JSON Web Token: ", sJWT);

const token =
  "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6InByYXZlZW4iLCJQYXNzd29yZCI6IlByQHYzM24iLCJGdWxsbmFtZSI6IlByYXZlZW4gS3VtYXIifQ.nsE9yzUct5vdoNjFZ-2P48vFLGld5-Wr1tne8P3P9eZyCtrRPDSR7dJ8myg30sSV0kcRJVGogzTI92NpOo5pPw";
const algorithm = "HS512";

// Log it to the console.
console.log(
  "Verification: ",
  // Validation
  JSRSASign.jws.JWS.verifyJWT(token, key, {
    alg: [algorithm]
  })
);

// Decoding
const sJWS = token;
const aJWT = sJWS.split(".");
const uHeader = JSRSASign.b64utos(aJWT[0]);
const uClaim = JSRSASign.b64utos(aJWT[1]);
const pHeader = JSRSASign.jws.JWS.readSafeJSONString(uHeader);
const pClaim = JSRSASign.jws.JWS.readSafeJSONString(uClaim);
// Decoded objects.
// Log it to the console.
console.log("Header: ", pHeader);
console.log("Claim: ", pClaim); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸Šé¢çš„ä»£ç ä¼šç»™å‡ºè¿™æ ·çš„è¾“å‡º:

```
âœ  MockAPIServer node dec-enc.js
JSON Web Token:  eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJVc2VybmFtZSI6InByYXZlZW4iLCJQYXNzd29yZCI6IlByQHYzM24iLCJGdWxsbmFtZSI6IlByYXZlZW4gS3VtYXIifQ.nsE9yzUct5vdoNjFZ-2P48vFLGld5-Wr1tne8P3P9eZyCtrRPDSR7dJ8myg30sSV0kcRJVGogzTI92NpOo5pPw
Verification:  true
Header: { alg: 'HS512', typ: 'JWT' }
Claim: { Username: 'praveen',
  Password: 'Pr@v33n',
  Fullname: 'Praveen Kumar' } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œæˆ‘æ‰€åšçš„åªæ˜¯ä¸€ä¸ªæœåŠ¡å™¨ç«¯ç”Ÿæˆç»„ä»¶ï¼Œå¹¶ä¸åŒ…æ‹¬ä½¿ç”¨ POST è¯·æ±‚å‘æ‚¨å‘é€ä»¤ç‰Œçš„â€œweb æœåŠ¡å™¨â€ã€‚

ç°åœ¨æˆ‘ä»¬å·²ç»å®Œæˆäº†æœåŠ¡å™¨ç«¯çš„å·¥ä½œï¼Œè®©æˆ‘ä»¬å¼€å§‹æ„å»ºä¾›å®¢æˆ·ç«¯ä½¿ç”¨çš„ REST API ç«¯ç‚¹ã€‚æ•¬è¯·å…³æ³¨ç¬¬äºŒéƒ¨åˆ†â€”â€”å³å°†æ¨å‡ºï¼

* * *

## [](#plug-logrocket-a-dvr-for-web-apps)Plug: [LogRocket](https://logrocket.com/signup/) ï¼Œä¸€æ¬¾é€‚ç”¨äºç½‘ç»œåº”ç”¨çš„ DVR

[![LogRocket Dashboard Free Trial Banner](../Images/0abf868fe5ccbed99d71cb8d9e81ed98.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--6FG5kvEL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i2.wp.com/blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png%3Fresize%3D1200%252C677%26ssl%3D1)

[log rocket](https://logrocket.com/signup/)æ˜¯ä¸€ä¸ªå‰ç«¯æ—¥å¿—å·¥å…·ï¼Œè®©ä½ é‡æ”¾é—®é¢˜ï¼Œå°±åƒå®ƒä»¬å‘ç”Ÿåœ¨ä½ è‡ªå·±çš„æµè§ˆå™¨ä¸­ä¸€æ ·ã€‚LogRocket ä¸éœ€è¦çŒœæµ‹é”™è¯¯å‘ç”Ÿçš„åŸå› ï¼Œä¹Ÿä¸éœ€è¦å‘ç”¨æˆ·è¯¢é—®æˆªå›¾å’Œæ—¥å¿—è½¬å‚¨ï¼Œè€Œæ˜¯è®©æ‚¨é‡æ”¾ä¼šè¯ä»¥å¿«é€Ÿäº†è§£å“ªé‡Œå‡ºé”™äº†ã€‚å®ƒå¯ä»¥ä¸ä»»ä½•åº”ç”¨ç¨‹åºå®Œç¾é…åˆï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆæ¡†æ¶ï¼Œå¹¶ä¸”æœ‰æ’ä»¶å¯ä»¥è®°å½•æ¥è‡ª Reduxã€Vuex å’Œ@ngrx/store çš„é¢å¤–ä¸Šä¸‹æ–‡ã€‚

é™¤äº†è®°å½• Redux åŠ¨ä½œå’ŒçŠ¶æ€ï¼ŒLogRocket è¿˜è®°å½•æ§åˆ¶å°æ—¥å¿—ã€JavaScript é”™è¯¯ã€stacktracesã€å¸¦æœ‰å¤´+ä½“çš„ç½‘ç»œè¯·æ±‚/å“åº”ã€æµè§ˆå™¨å…ƒæ•°æ®ã€è‡ªå®šä¹‰æ—¥å¿—ã€‚å®ƒè¿˜ä½¿ç”¨ DOM æ¥è®°å½•é¡µé¢ä¸Šçš„ HTML å’Œ CSSï¼Œç”šè‡³ä¸ºæœ€å¤æ‚çš„å•é¡µé¢åº”ç”¨ç¨‹åºé‡æ–°åˆ›å»ºåƒç´ çº§å®Œç¾è§†é¢‘ã€‚

[å…è´¹è¯•ç”¨](https://logrocket.com/signup/)ã€‚

* * *

å¸–å­[ä½¿ç”¨ JWT è®¤è¯åˆ›å»ºå…¨æ ˆ MERN åº”ç”¨:ç¬¬ 1 éƒ¨åˆ†](https://blog.logrocket.com/mern-app-jwt-authentication-part-1/)æœ€å…ˆå‡ºç°åœ¨[çš„ LogRocket åšå®¢](https://blog.logrocket.com)ä¸Šã€‚