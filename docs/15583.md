# è®©æˆ‘ä»¬ç”¨ CSS å†™ä¸€ä¸ª SPA

> åŸæ–‡:[https://dev.to/iamschulz/let-s-write-an-spa-in-css-4kck](https://dev.to/iamschulz/let-s-write-an-spa-in-css-4kck)

è®©æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªç½‘ç«™ã€‚è®©æˆ‘ä»¬æ¥è°ˆè°ˆé£Ÿç‰©ï¼Œå› ä¸ºæˆ‘å–œæ¬¢é£Ÿç‰©ã€‚è¿˜æœ‰ï¼Œæˆ‘ä»¬éœ€è¦çŒ«ï¼Œå› ä¸ºäº’è”ç½‘æ˜¯çŒ«åšçš„ã€‚è¿˜æœ‰ï¼Œå› ä¸ºæ˜¯ 2019 å¹´ï¼Œæ‰€ä»¥ä¸èƒ½æœ‰é¡µé¢é‡è½½ã€‚é‚£æ˜¯ä»€ä¹ˆï¼Ÿä½ è¯´ï¼Œæ‰€æœ‰è¿™äº›å°é¡µé¢ä½¿ç”¨äº†å¤ªå¤šçš„ Vue å’Œ React ä»¥åŠæ‰€æœ‰çš„ Javascriptsï¼Ÿå¥½å§ï¼Œè®©æˆ‘ä»¬è¯•ç€ä¸é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬æœ‰ä½ çš„æ–¹å¼ã€‚

ä¸ºäº†æœ‰ä¸€ä¸ªå…³äºé£Ÿç‰©å’ŒçŒ«çš„ç½‘ç«™ï¼Œæˆ‘ä»¬éœ€è¦æœ‰å†…å®¹ã€‚ä¸‹é¢æ˜¯ä¸€äº›:

```
<main class="content">
    <section class="content__section" id="cats">
        <img class="content__entry" src="http://lorempixel.com/500/500/cats/1/">
        <img class="content__entry" src="http://lorempixel.com/500/500/cats/2/">
        <!--[...]-->
        <img class="content__entry" src="http://lorempixel.com/500/500/cats/9/">
    </section>
    <section class="content__section" id="food">
        <img class="content__entry" src="http://lorempixel.com/500/500/food/1/">
        <img class="content__entry" src="http://lorempixel.com/500/500/food/2/">
        <!--[...]-->
        <img class="content__entry" src="http://lorempixel.com/500/500/food/9/">
    </section>
    <section class="content__section" id="foodandcats">
        <img class="content__entry" src="http://lorempixel.com/500/500/food/1/">
        <img class="content__entry" src="http://lorempixel.com/500/500/cats/2/">
        <!--[...]-->
        <img class="content__entry" src="http://lorempixel.com/500/500/food/9/">
    </section>
</main> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å—¯ï¼Œçœ‹çœ‹é‚£ä¸ª Lorem æ±‰å ¡å’Œ Ipsum æ²™æ‹‰ï¼ä½†éƒ½æ˜¯èµ¤è£¸è£¸çš„ HTMLã€‚ä½ ä¸èƒ½è¿™æ ·å‡ºå»ï¼Œç½‘ç«™ï¼Œæ‰“æ‰®ä¸€ä¸‹è‡ªå·±ï¼

```
.content {
    &__section {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        grid-gap: 16px;
        width: 100%;
    }

    &__entry {
        width: 100%;
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ ·æ›´å¥½ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„å†…å®¹ã€‚é‚£ä¸æ˜¯ SPAï¼å¥½å§ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬éšè—æˆ‘ä»¬çš„å†…å®¹ã€‚

```
.content {
    position: relative;

    &__section {
        position: absolute;
        top: 0;
        left: 0;
        //[...]
        pointer-events: none;
        opacity: 0;
        transform: translateX(-5%);
        transition: opacity 0.3s ease-out 0s, transform 0.3s ease-out 0s;

        &:target {
            opacity: 1;
            pointer-events: all;
            transform: translateX(0);
            transition: opacity 0.3s ease-out 0.3s, transform 0.3s ease-out 0.3s;
        }
    }

    &__entry {
        width: 100%;
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¤ªå¥½äº†ã€‚ç°åœ¨ä¸€åˆ‡éƒ½è¿‡å»äº†ã€‚è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ
æˆ‘ä»¬çš„`.content__section`å…ƒç´ ç°åœ¨ç»å¯¹ä½äº`.content`å†…ï¼Œæ‰€ä»¥å®ƒä»¬ç›¸äº’é‡å ã€‚ä½ ä¸èƒ½çœ‹åˆ°æˆ–ç‚¹å‡»å®ƒä»¬ï¼Œå› ä¸ºæˆ‘ä»¬ä¹Ÿåˆ é™¤äº†å®ƒä»¬çš„ä¸é€æ˜åº¦å’Œå®ƒä»¬çš„æŒ‡é’ˆäº‹ä»¶(å°å¿ƒï¼æŒ‡é’ˆäº‹ä»¶æ˜¯å¯é€†çš„ï¼Œæ‰€ä»¥ä»»ä½•å¸¦æœ‰`pointer-events: all;`çš„å­èŠ‚ç‚¹éƒ½å¯ä»¥å†æ¬¡ç‚¹å‡»)ã€‚æˆ‘ä»¬å¯ä»¥ç®€å•åœ°ä½¿ç”¨`display: none`ï¼Œä½†æ˜¯æˆ‘ä»¬çš„æ–¹æ³•å…è®¸æˆ‘ä»¬å°†å†…å®¹éƒ¨åˆ†ç§»å…¥å’Œç§»å‡ºè§†å›¾ã€‚
æˆ‘ä»¬æ¢å¤äº†`:target`ä¼ªç±»ä¸Šçš„ä¸é€æ˜åº¦å’ŒæŒ‡é’ˆäº‹ä»¶ï¼Œæ‰€ä»¥åªè¦æˆ‘ä»¬ç„å‡†ä¸€ä¸ª`.content__section`ï¼Œå®ƒå°±ä¼šå‡ºç°ã€‚
ä½†æ˜¯æ‰€æœ‰çš„è®¨è®ºéƒ½æ²¡æœ‰ä»»ä½•ç»“æœï¼Œå› ä¸ºæˆ‘ä»¬æŠŠå®ƒæ”¾åœ¨äº†é‚£ä¸ª`:target`ä¼ªç±»çš„åé¢ï¼Œç”šè‡³æ²¡æœ‰ä¸€ä¸ªå¯¼èˆªæ¥è§¦å‘å®ƒã€‚è®©ç”¨æˆ·è¾“å…¥æ•£åˆ—ç½‘å€è¿˜ä¸å¤Ÿ UX å¼å—ï¼Ÿ

```
<nav class="navigation">
    <ul class="navigation__list">
        <li class="navigation__item"><a class="navigation__link" href="#cats">ğŸ±</a></li>
        <li class="navigation__item"><a class="navigation__link" href="#food">ğŸ´</a></li>
        <li class="navigation__item"><a class="navigation__link" href="#foodandcats">ğŸ´+ğŸ±</a></li>
    </ul>
</nav>
<main class="content">
    <!--[...]-->
</main> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
.navigation {
    position: fixed;
    top: 0;
    box-sizing: border-box;
    width: 100%;
    margin-bottom: 16px;
    background: rgba(indigo, .95);
    box-shadow: 0 0 5px 0 rgba(black, .5);
    z-index: 2;

    &__list {
        box-sizing: border-box;
        display: flex;
        justify-content: center;
        width: 100%;
        margin: 0;
        padding: 16px;
        list-style: none;
    }

    &__link {
        height: 2em;
        margin: 0 24px;
        padding: 8px;
        font-size: 2em;
        color: white;
        text-decoration: none;
    }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç»™ä½ ã€‚ä¸€ä¸ªæ¼‚äº®çš„é¡¶æ ã€‚å®ƒç”šè‡³æœ‰è¡¨æƒ…ç¬¦å·ï¼Œæ‰€ä»¥å®ƒå¾ˆé…·ï¼
å®ƒæœ‰é’ˆå¯¹ç›¸åº”éƒ¨åˆ†çš„æœ¬åœ°é“¾æ¥ã€‚`:target`ï¼Œè¿˜è®°å¾—å—ï¼Ÿç‚¹å‡»é“¾æ¥ï¼Œå†…å®¹æ˜¾ç¤ºå‡ºæ¥ã€‚
ç¥è´ºä½ ï¼Œä½ ç°åœ¨å¯ä»¥å…³é—­è¿™ç¯‡æ–‡ç« äº†ï¼Œå› ä¸ºä½ å¾—åˆ°äº†æ‰€æœ‰é‡è¦çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬çš„ç½‘ç«™å¯ä»¥å‡è£…è¿™æ˜¯ä¸€ä¸ªæ°´ç–—ä¸­å¿ƒã€‚æˆ–è€…ä½ å¯ä»¥ç•™ä¸‹æ¥è¿›ä¸€æ­¥å®Œå–„å®ƒã€‚
ç°åœ¨ï¼Œæˆ‘ä»¬æ·»åŠ äº†æ‰€æœ‰å†…å®¹ä»¥æ¶ˆé™¤é‡æ–°åŠ è½½çš„éœ€è¦ï¼Œä½†æ˜¯åœ¨ç¬¬ä¸€æ¬¡åŠ è½½æ—¶æˆ‘ä»¬æ²¡æœ‰æ˜¾ç¤ºä»»ä½•æœ‰ç”¨çš„å†…å®¹ã€‚å¤šä¹ˆç²—é²ï¼æ‰“ä¸ªæ‹›å‘¼ã€‚

```
<nav class="navigation">
    <ul class="navigation__list">
        <li class="navigation__item"><a class="navigation__link" href="#hi">âœŒï¸</a></li>
        <!--[...]-->
    </ul>
</nav>
<main>
    <!--[...]-->
    <section class="content__section is--default" id="hi">
        <p class="hi">hi âœŒï¸</p>
    </section>
</main> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
.content {
    &__section {
        //[...]

        &.is--default {
            opacity: 1;
            pointer-events: all;
            transform: translateX(0);
        }

        &:target {
            //[...]

            & ~ .is--default {
                pointer-events: none;
                opacity: 0;
                transform: translateX(-5%);
            }
        }
    }
}

.hi {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 500px;
    font-size: 3em;
    grid-column-start: 2;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸æ™®é€šéƒ¨åˆ†çš„é€»è¾‘ç›¸åï¼Œä½†åªè¦å‰é¢æœ‰ç›®æ ‡éƒ¨åˆ†ï¼Œå°±ä¼šä¿æŒéšè—ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç¼ºç‚¹:è¿™æ„å‘³ç€ï¼Œå®ƒéœ€è¦æˆä¸º`<main>`ä¸­çš„æœ€åä¸€é¡¹ã€‚å˜˜ï¼Œè¯­ä¹‰ï¼Œå˜˜ï¼ä½ å¯èƒ½ä¹Ÿéœ€è¦æ³¨æ„è¿™é‡Œçš„ tabindexã€‚

æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œè®©æˆ‘ä»¬æ›´åŠ å¹³æ»‘é¡µé¢è¿‡æ¸¡ã€‚

```
:root {
    scroll-behavior: smooth;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ¯å½“æˆ‘ä»¬æ”¹å˜è§†å›¾æ—¶ï¼Œå¦ä¸€ä¸ª id å°±ä¼šæˆä¸ºç›®æ ‡ï¼Œå¹¶æç¤ºæµè§ˆå™¨è·³è½¬åˆ°é‚£é‡Œã€‚æ¯•ç«Ÿï¼Œè¿™å°±æ˜¯å†…éƒ¨é“¾æ¥çš„å·¥ä½œæ–¹å¼ã€‚ä¸ºäº†éšè—è·³è½¬ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è½¬æ¢é¡µé¢æ—¶æ…¢æ…¢æ»šåŠ¨åˆ°é¡¶éƒ¨ã€‚

ç°åœ¨ï¼ŒæŠŠå®ƒä»¬ç²˜åœ¨ä¸€èµ·ï¼Œæ”¾å…¥ä¸€ä¸ªç¬”ç­’:
[https://codepen.io/iamschulz/embed/GbdQpz?height=600&default-tab=result&embed-version=2](https://codepen.io/iamschulz/embed/GbdQpz?height=600&default-tab=result&embed-version=2)

å‰å®³ï¼é‚£ä¹ˆä¸ºä»€ä¹ˆäººä»¬è¿˜åœ¨ä½¿ç”¨ Javascript å‘¢ï¼Ÿè¿™ä¸ªæŠ€æœ¯ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ã€‚

*   å®ƒä½¿ç”¨å†…éƒ¨é“¾æ¥åœ¨é¡µé¢ä¹‹é—´å¯¼èˆªï¼Œæ‰€ä»¥ä½ ä¸èƒ½å†æŠŠå®ƒä»¬ç”¨äºå®ƒçš„é¢„æœŸç”¨é€”ï¼Œé¡µé¢å¯¼èˆªã€‚
*   å®ƒå¸¦æ¥äº†ä¸€å¤§å †é—®é¢˜ï¼Œä» tabindex åˆ°å±å¹•é˜…è¯»å™¨ã€‚ç„¶è€Œï¼Œè¿™äº›ä¼¼ä¹æ˜¯å¯ä»¥ç®¡ç†çš„ï¼Œå¹¶ä¸æ¯”é‚£äº›æ™®é€šçš„æ¸©æ³‰å·®ã€‚
*   å› ä¸ºæˆ‘ä»¬åªæ˜¯åœ¨è§†è§‰ä¸Šéšè—çœ‹ä¸è§çš„å†…å®¹ï¼Œè€Œä¸ä¼šå°†å…¶ä»å †å ä¸Šä¸‹æ–‡ä¸­åˆ é™¤ï¼Œæ‰€ä»¥æ–‡æ¡£é«˜åº¦æ˜¯ç”±æœ€é•¿çš„é¡µé¢å®šä¹‰çš„ã€‚ä½ å¯ä»¥åœ¨æˆ‘ä»¬çš„â€œå—¨â€é¡µé¢æ¸…æ¥šåœ°çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨`display: none;`æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½å†è¿‡æ¸¡äº†ã€‚æˆ‘å–œæ¬¢è¿‡æ¸¡ã€‚
*   åªæ˜¯æ„Ÿè§‰æœ‰ç‚¹ä¸èˆ’æœ

ä½†æ˜¯ï¼Œå˜¿ï¼Œå¯¹äºä¸€ä¸ªå°çš„åç‰‡å¼çš„é¡µé¢ï¼Œæˆ–è€…ç‚«è€€ä¸€äº›é£Ÿç‰©å’ŒçŒ«çš„å†…å®¹ï¼Œå®ƒå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ä¸éœ€è¦åœ¨è¿™é‡Œå»ºç«‹ä¸€ä¸ªå®Œæ•´çš„æ„å»ºè¿‡ç¨‹ï¼Œä¸éœ€è¦ä¸‹è½½ä»»ä½•åŒ…ï¼Œä¹Ÿä¸éœ€è¦ JSã€‚