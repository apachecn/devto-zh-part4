# æ‰€æœ‰ä½ éœ€è¦çŸ¥é“çš„å…³äºè§’åº¦åŠ¨ç”»

> åŸæ–‡ï¼š<https://dev.to/mustapha/all-you-need-to-know-about-angular-animations-1c09>

åŠ¨ç”»æ˜¯ä¸€ç§è®¾è®¡å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®©æŠ½è±¡çš„æ•°å­—ä½œå“å˜å¾—æ›´åŠ ç†Ÿæ‚‰å’Œå‹å¥½ï¼Œæ¥èµ‹äºˆå®ƒä»¬å®ä½“æ€§å’Œå¯è§¦æ‘¸æ€§ã€‚è®¸å¤šç»„ä»¶åº“å……åˆ†åˆ©ç”¨åŠ¨ç”»æ¥ä½¿å®ƒä»¬çš„ç»„ä»¶ä¸è§‚ä¼—æ›´ç›¸å…³ã€‚å¥½æ¶ˆæ¯æ˜¯ï¼Œä½œä¸ºä¸€ä¸ª Angular å¼€å‘è€…ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¥æœ‰å‡ ä¹å¼€ç®±å³ç”¨çš„ä¼˜ç§€ç»„ä»¶ã€‚åæ¶ˆæ¯æ˜¯ï¼Œæˆ‘ä»¬å‡ ä¹å®Œå…¨ä¾èµ–è¿™äº›åº“æ¥åˆ¶ä½œåŠ¨ç”»ã€‚è§’åº¦åŠ¨ç”» API æ˜¯ä½¿ç”¨æœ€å°‘çš„è§’åº¦ API ä¹‹ä¸€ï¼Œå¦‚æœä¸æ˜¯æœ€å°‘çš„è¯ã€‚

ä¸ºäº†æ”¹å˜è¿™ä¸€ç‚¹ï¼Œæˆ‘ä¼šå°½æˆ‘æ‰€èƒ½ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œå‘ä½ å±•ç¤ºæ‰€æœ‰ä½ éœ€è¦çŸ¥é“çš„å…³äºè§’åº¦åŠ¨ç”»çš„çŸ¥è¯†ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä¸€èµ·æ„å»ºè¿™ä¸ª[ä»¤äººæƒŠå¹çš„ç»„ä»¶](https://theangularguy.github.io/angularAnimationTutorial/):

[![demo](img/4447bf8a133bf2054ba0e06edeb60e44.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--iJlBySU9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://i.ibb.co/0ctcQXw/final.gif)

æ­£å¦‚ä»–ä»¬æ‰€è¯´çš„ï¼Œç†Ÿèƒ½ç”Ÿå·§ï¼Œæ‰€ä»¥å¦‚æœä½ å–œæ¬¢ï¼Œä½ å¯ä»¥ç»§ç»­å…‹éš†è¿™ä¸ªåº“å¹¶å¼€å§‹è¿è¡Œ(æœ¬æ–‡çš„æ¯ä¸€éƒ¨åˆ†éƒ½ä»£è¡¨äº†åº“çš„ä¸€ä¸ª git åˆ†æ”¯)ã€‚

**æ³¨- >** å¦‚æœä½ å¯¹è·Ÿéšä¸æ„Ÿå…´è¶£ï¼Œä½ å¯ä»¥ç›´æ¥è·³åˆ°ç¬¬ 3 éƒ¨åˆ†ï¼Œåœ¨é‚£é‡Œä½ ä¼šå‘ç°è§’åº¦åŠ¨ç”» API æä¾›ç»™ä½ çš„è¶…èƒ½åŠ›ã€‚

# 1ã€‚åˆ›å»ºä¸»è¦ç»„ä»¶ğŸ“¦

æˆ‘ä»¬å¼€å§‹å§ã€‚åœ¨ç¡®ä¿æ‚¨çš„æœºå™¨ä¸Šå®‰è£…äº†[èŠ‚ç‚¹](https://nodejs.org/en/)ã€ [NPM](https://docs.npmjs.com/about-npm-versions) å’Œ [Angular CLI](https://cli.angular.io/) ä¹‹åï¼Œåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå¹¶å°†å…¶å‘½åä¸ºâ€œawesomeContactsâ€æˆ–æ‚¨æƒ³åˆ°çš„ä»»ä½•å…¶ä»–èªæ˜çš„åç§°ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªâ€œåˆ—è¡¨â€ç»„ä»¶:

```
ng new awesomeContacts --minimal=true --style=scss --routing=false --skip-install
cd awesomeContacts && yarn # or npm i
# wait for the install to finish, then create the 'list' component
ng g c components/list --spec=false && ng serve -o 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å®Œæˆåï¼Œåˆ é™¤ AppComponent æ¨¡æ¿ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œå¹¶æ›¿æ¢ä¸ºæˆ‘ä»¬çš„ ListComponent ( `<app-list></app-list>`)ã€‚

è¿˜æœ‰ä¸€ä»¶äº‹åœ¨æˆ‘ä»¬è·³åˆ°ä¸‹ä¸€éƒ¨åˆ†ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜æœ‰æœ€åä¸€ä»¶äº‹è¦åšã€‚ä¸ºäº†è®©åŠ¨ç”»å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦åœ¨ AppModule å¯¼å…¥ä¸­å¯¼å…¥`BrowserAnimationModule`ã€‚æ‰€ä»¥ä½ åº”è¯¥æœ‰è¿™æ ·çš„:

```
import { BrowserAnimationsModule } from '@angular/platform-browser/animations';
//...

@NgModule({
  declarations: [AppComponent, ListComponent],
  imports: [BrowserModule, BrowserAnimationsModule],
  providers: [],
  bootstrap: [AppComponent],
})
export class AppModule {} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

# 2ã€‚å®ç°åˆ—è¡¨ç»„ä»¶(æš‚æ—¶æ²¡æœ‰åŠ¨ç”»)

ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†åº”ç”¨ç¨‹åºå’Œåˆ—è¡¨ç»„ä»¶ï¼Œè®©æˆ‘ä»¬å¿«é€Ÿå®ç°ç»„ä»¶ã€‚å› ä¸ºè¿™ç¯‡æ–‡ç« æ˜¯å…³äºåŠ¨ç”»çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ä¼šè¿‡å¤šå…³æ³¨è¿™ä¸ªå®ç°ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè”ç³»äººå¯¹è±¡çš„æ¥å£ï¼Œç„¶åæˆ‘ä»¬åˆ›å»ºä¸€ç»„è”ç³»äººæ¥ç©:

```
interface Contact {
  id: number;
  name: string;
  email: string;
  avatarUrl: string;
}

const CONTACTS_MOCK: Contact[] = new Array(5)
  .fill({})
  .map(
    (c: Contact, i: number) =>
      ({
        id: i,
        name: `Contact ${i}`,
        email: `email${i}@provider.com`,
        avatarUrl: `https://api.adorable.io/avatars/100/${~~(Math.random() * 100)}`,
      } as Contact),
  )
  .reverse(); // * to have them sorted in DESC order 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

â„¹ï¸ [å¯çˆ±çš„ io](http://avatars.adorable.io/) æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„å…¬å…± APIï¼Œä¸ºå ä½ç¬¦å¤´åƒæœåŠ¡ã€‚
â„¹ï¸ `~~`(ä¸¤ä¸ªæŒ‰ä½éè¿ç®—ç¬¦)ç­‰ä»·äº Math.floor:)

ä¸€æ—¦å®Œæˆï¼Œå¯¹äº`list.component.ts`çš„å®ç°åº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·:

```
@Component({
  selector: 'app-list',
  templateUrl: './list.component.html',
  styleUrls: ['./list.component.scss'],
})
export class ListComponent {
  contactList: Contact[] = CONTACTS_MOCK;
  selectedContact: Contact;

  onSelectItem(contact: Contact) {
    // * selecting a contact to focus on
    this.selectedContact = contact ? { ...contact } : null;
  }

  onAddItem() {
    const rndNum = Date.now();
    const newContact: Contact = {
      id: this.contactList.length * rndNum,
      name: `Contact ${this.contactList.length}`,
      email: `email${this.contactList.length}@provider.com`,
      avatarUrl: `https://api.adorable.io/avatars/285/${rndNum}`,
    };
    // * adding a new contact to the list
    this.contactList = [newContact, ...this.contactList];
    // * selecting the newly created contact
    this.onSelectItem(newContact);
  }

  onDeleteItem(contact: Contact) {
    // * removing a contact from the list
    this.contactList = this.contactList.filter(c => c.id != contact.id);
    if (this.selectedContact && this.selectedContact.id == contact.id) {
      // * if the removed contact is beaing focused on, then we remove the focus
      this.onSelectItem(null);
    }
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

HTML æ–‡ä»¶:

```
<!-- * side list -->
<aside class="side-list">
  <!-- * side list toolbar -->
  <div class="side-list-toolbar">
    <span class="title">Contacts</span>
    <button class="btn" (click)="onAddItem()">Add</button>
  </div>
  <!-- * side list items-->
  <div class="side-list-items">
    <div
      class="side-list-item"
      *ngFor="let contact of contactList; trackBy: contact?.id"
      [ngClass]="{ 'side-list-item-selected': contact.id == selectedContact?.id }"
      (click)="onSelectItem(contact)"
    >
      <div class="side-list-item-avatar">
        <img [src]="contact.avatarUrl" loading="lazy" alt="profile picture" />
      </div>
      <div class="side-list-item-info">
        <p class="side-list-item-info-name">{{ contact.name }}</p>
        <p class="side-list-item-info-email">{{ contact.email }}</p>
      </div>
    </div>
  </div>
</aside>
<!-- * content wrapper -->
<section class="side-list-content">
  <!-- * content -->
  <div class="side-list-content-data" *ngIf="!!selectedContact">
    <div class="side-list-content-data-inner">
      <div class="side-list-content-data-overview">
        <div class="side-list-content-data-overview-info">
          <h3>{{ selectedContact.name }}</h3>
          <span>{{ selectedContact.email }}</span>
        </div>
        <div class="side-list-content-data-overview-avatar">
          <img [src]="selectedContact.avatarUrl" loading="lazy" alt="profile picture" />
        </div>
      </div>
      <div class="side-list-content-data-separator">
        <h4>Overview</h4>
        <div>
          <button class="btn danger outline" (click)="onDeleteItem(selectedContact)">
            Delete
          </button>
        </div>
      </div>
      <p>Lorem</p>
    </div>
  </div>
  <!-- * empty selection -->
  <div class="side-list-content-empty" *ngIf="!selectedContact">
    <div>
      <img alt="empty-selection" loading="lazy" src="https://img.icons8.com/ios/100/000000/nui2.png" />
      <p>Select an item from the list.</p>
    </div>
  </div>
</section> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œè®©æˆ‘ä»¬å¿«é€Ÿå¤åˆ¶ä¸€äº› CSSï¼Œä½¿æˆ‘ä»¬çš„ç»„ä»¶çœ‹èµ·æ¥å¾ˆæ¼‚äº®:

*   åœ¨`list.component.scss`å¤åˆ¶[è¿™ä¸ª](https://github.com/TheAngularGuy/angularAnimationTutorial/blob/step-2/src/app/components/list/list.component.scss)ã€‚
*   åœ¨`styles.scss`å¤åˆ¶[è¿™ä¸ª](https://github.com/TheAngularGuy/angularAnimationTutorial/blob/step-2/src/styles.scss)ã€‚

å¤ªå¥½äº†ï¼Œæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½å¤„ç†åŠ¨ç”»äº†ï¼

# 3ã€‚åŠ¨ç”»ğŸ§™â€â™‚ï¸

## åˆ—è¡¨ä¸­çš„åŠ¨ç”»å…ƒç´ 

é¦–å…ˆï¼Œæˆ‘ä»¬å°†å¼€å§‹åŠ¨ç”»åˆ—è¡¨å…ƒç´ çš„æ·»åŠ å’Œå–æ¶ˆã€‚ç°åœ¨æˆ‘ä»¬æœ‰è¿™ä¸ª:

[![item list](img/a8287204d728718f8f6f9b10c05aab54.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--8DNHqxsx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://i.ibb.co/L51vrj7/item-list.gif)

æˆ‘ä»¬æƒ³è¦è¿™ä¸ª(å…³æ³¨å·¦è¾¹çš„åˆ—è¡¨):

[![animated item list](img/299bdcdb488360c264b7379c44dd9bfd.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--I6wzEJ3l--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://i.ibb.co/3dv019M/anime-item-list.gif)

åœ¨ç»„ä»¶æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¼å…¥åŠ¨ç”»å‡½æ•°ï¼Œå¹¶åœ¨`@Component()`è£…é¥°å™¨:
ä¸­æ·»åŠ ä¸€ä¸ªåä¸º animations:çš„å…ƒæ•°æ®å±æ€§

```
import { animate, style, group, query, transition, trigger } from '@angular/animations';

@Component({
  selector: 'app-root',
  templateUrl: 'app.component.html',
  styleUrls: ['app.component.css'],
  animations: [
    // we will implement the animations here
  ]
}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬å°†åœ¨è¿™é‡Œä½¿ç”¨çš„åŠ¨ç”» API:

| åŠŸèƒ½ | å®ƒæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ |
| --- | --- |
| è§¦å‘å™¨() | å¯åŠ¨åŠ¨ç”»ï¼Œå¹¶ä½œä¸ºæ‰€æœ‰å…¶ä»–åŠ¨ç”»å‡½æ•°è°ƒç”¨çš„å®¹å™¨ã€‚HTML æ¨¡æ¿ç»‘å®šåˆ° triggerNameã€‚ä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•°å£°æ˜å”¯ä¸€çš„è§¦å‘å™¨åç§°ã€‚ |
| è¿‡æ¸¡() | å®šä¹‰ä¸¤ä¸ªå‘½åçŠ¶æ€ä¹‹é—´çš„åŠ¨ç”»åºåˆ—ã€‚ç‰¹æ®Šå€¼`:enter`å’Œ`:leave`å¯åŠ¨è¿›å…¥å’Œé€€å‡ºçŠ¶æ€çš„è½¬æ¢ |
| æ ·å¼() | å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªåœ¨åŠ¨ç”»ä¸­ä½¿ç”¨çš„ CSS æ ·å¼ã€‚æ§åˆ¶åŠ¨ç”»ä¸­ HTML å…ƒç´ çš„è§†è§‰å¤–è§‚ã€‚ |
| åŠ¨ç”»() | æŒ‡å®šè¿‡æ¸¡çš„è®¡æ—¶ä¿¡æ¯ã€‚å»¶è¿Ÿå’Œç¼“åŠ¨çš„å¯é€‰å€¼ã€‚å¯ä»¥åœ¨ä¸­åŒ…å« style()è°ƒç”¨ã€‚ |
| ç¾¤ç»„() | æŒ‡å®šä¸€ç»„è¦å¹¶è¡Œè¿è¡Œçš„åŠ¨ç”»æ­¥éª¤(å†…éƒ¨åŠ¨ç”»)ã€‚åªæœ‰åœ¨æ‰€æœ‰å†…éƒ¨åŠ¨ç”»æ­¥éª¤å®Œæˆåï¼ŒåŠ¨ç”»æ‰ä¼šç»§ç»­ã€‚ |

æˆ‘ä»¬å°†ä½¿ç”¨`trigger()`å°†æˆ‘ä»¬çš„åŠ¨ç”»ç»‘å®šåˆ°ä¸€ä¸ªåŠ¨ç”»åç§°ï¼Œæˆ‘ä»¬å°†ç§°ä¹‹ä¸ºâ€œlistItemAnimationâ€ã€‚ç„¶åæˆ‘ä»¬å°†ä½¿ç”¨`transition(':enter')`å’Œ`transition(':leave')`å®šä¹‰åŠ¨ç”»åºåˆ—çš„æ·»åŠ å’ŒæŠ‘åˆ¶ã€‚ä¹‹åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨`style()`å®šä¹‰å¼€å§‹æ ·å¼ï¼Œæœ€å wi å°†ä½¿ç”¨`animate()`åˆ¶ä½œé«˜åº¦åŠ¨ç”»ã€‚

åº”è¯¥æ˜¯è¿™æ ·çš„:

```
animations: [
   trigger('listItemAnimation', [
      transition(':enter', [
        style({ height: '0px', overflow: 'hidden' }),
        group([animate('250ms ease-out', style({ height: '!' }))]),
// although group is useless here (since we have only one animation)
// i like to leave it anyway just in case i want to add another 
// parallel animation in the future
      ]),
      transition(':leave', [
        style({ height: '!', overflow: 'hidden' }),
        group([animate('250ms ease-out', style({ height: '0px' }))]),
      ]),
    ]),
] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

â„¹ï¸ `'!'`æ˜¯ä¸€ä¸ªç”¨äºä½¿ç”¨è‡ªåŠ¨æ ·å¼çš„ç‰¹æ®Šæ ‡è®°ï¼Œå…¶ä¸­æ ·å¼æ˜¯ä»è¢«åŠ¨ç”»åŒ–çš„å…ƒç´ ä¸­æ´¾ç”Ÿå‡ºæ¥çš„ï¼Œå¹¶åœ¨åŠ¨ç”»å¼€å§‹æ—¶åº”ç”¨åˆ°åŠ¨ç”»ä¸­ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯åº”ç”¨åŠ¨ç”»ä¹‹å‰çš„çŠ¶æ€ã€‚

ç°åœ¨æˆ‘ä»¬å·²ç»å®ç°äº†åŠ¨ç”»ï¼Œè®©æˆ‘ä»¬å°†å®ƒç»‘å®šåˆ° HTML å…ƒç´ ã€‚å°†`@listItemAnimation`æ·»åŠ åˆ°â€œä¾§åˆ—è¡¨é¡¹â€å…ƒç´ :

```
 <div
      class="side-list-item"
      @listItemAnimation
      ...
    >
...
</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¾ˆå¥½ï¼Œæˆ‘ä»¬å°±è¦å®Œæˆäº†ï¼Œæˆ‘ä»¬çš„è”ç³»äººåˆ—è¡¨å·²ç»åŠ¨ç”»åŒ–äº†ğŸ’ªï¼

**PS:** å¦‚æœä½ æƒ³åœ¨ç¬¬ä¸€æ¬¡æ‰“å°æ—¶ç¦ç”¨è¿™ä¸ªåŠ¨ç”»ï¼Œä½ éœ€è¦åœ¨çˆ¶å…ƒç´ (åˆ—è¡¨å…ƒç´ )ä¸­æ·»åŠ ä¸€ä¸ªç±»ä¼¼äº`trigger('noEnterAnimation', [transition(':enter', [])])`çš„ç©ºçš„`:enter`åŠ¨ç”»ã€‚å½“ä½ æŠŠä¸€ä¸ª`:enter`åŠ¨ç”»æ”¾åœ¨ä¸€ä¸ªç»„ä»¶ä¸Šï¼Œå½“å®ƒè¢«è§¦å‘æ—¶ï¼Œå®ƒå°†ç¦ç”¨å®ƒæ‰€æœ‰çš„å­`:enter`åŠ¨ç”»ã€‚

## åˆ¶ä½œå†…å®¹åŠ¨ç”»

å†…å®¹åŠ¨ç”»æœ‰ç‚¹å¤æ‚ã€‚å¦‚æœæˆ‘ä»¬å°†å†…å®¹å®¹å™¨ä»å·¦åˆ°å³åŠ¨ç”»åŒ–ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªé€‰æ‹©:è¦ä¹ˆåŠ¨ç”»åŒ–å®½åº¦ï¼Œè¦ä¹ˆå¹³ç§»å…ƒç´ ã€‚é—æ†¾çš„æ˜¯ï¼Œè¿™äº›è§£å†³æ–¹æ¡ˆéƒ½ä¸èµ·ä½œç”¨ã€‚å¦‚æœæˆ‘ä»¬æ§åˆ¶å®½åº¦ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°è¿™ä¸ª:

[![width animation](img/d04a03c03e32f3ae57a09c37c2c5c608.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--hrytOgq0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://i.ibb.co/FgS816w/width.gif)

å†…å®¹éšç€å®½åº¦çš„å¢é•¿è€Œå‡ºç°ï¼Œä½†æ„Ÿè§‰ä¸å¯¹ï¼Œå› ä¸ºå†…å®¹ä¸æ˜¯ä»å·¦å‘å³æ»‘åŠ¨çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ä»å·¦å‘å³ç¿»è¯‘å†…å®¹ï¼Œä½†æ˜¯çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆ:

[![translate animation](img/a01818c16e09010ccac3c74e907f4c78.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--j_zroLq---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://i.ibb.co/GTF3CJx/translate.gif)

å®ƒåˆ›å»ºäº†ä¸€ä¸ª flash æ•ˆæœ(ç©ºé€‰æ‹©ç»„ä»¶),å› ä¸ºå½“æˆ‘ä»¬ç¿»è¯‘å†…å®¹å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠ¨ç”»æ˜¾ç¤ºå®ƒçš„å®½åº¦ï¼Œæ‰€ä»¥å®ƒä¼šåœ¨ä¸€çœ¨çœ¼çš„æ—¶é—´å†…ä»å½“å‰å€¼å˜ä¸º 0ã€‚è§£å†³æ–¹æ¡ˆæ˜¯æˆ‘ä»¬å¿…é¡»åœ¨åŠ¨ç”»å®½åº¦çš„åŒæ—¶ç¿»è¯‘å†…å®¹ã€‚

åœ¨ä¸‹å›¾ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªé»‘è‰²çš„å¤–éƒ¨å®¹å™¨å’Œä¸€ä¸ªè“è‰²çš„å†…éƒ¨å®¹å™¨:

[![inner and outer element](img/7be87b3677335e954c56af251a28aec0.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--83N2lFFN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.ibb.co/tm36YjH/inner-outer.png)

å› æ­¤ï¼Œæˆ‘ä»¬å°†åœ¨å¹³ç§»è“è‰²å®¹å™¨çš„åŒæ—¶åˆ¶ä½œé»‘è‰²å®¹å™¨å®½åº¦çš„åŠ¨ç”»ã€‚åº”è¯¥æ˜¯è¿™æ ·çš„:

[![good animation](img/7063674e6dfbb8d449851a21ac0df0d5.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--HizNjIk1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://i.ibb.co/RDsrBKy/widthandtranslate.gif)

ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å°†å†…å®¹å…ƒç´ (é»‘è‰²å®¹å™¨:â€œä¾§è¾¹-åˆ—è¡¨-å†…å®¹-æ•°æ®â€)åŠå…¶å­å…ƒç´ (è“è‰²å®¹å™¨:â€œä¾§è¾¹-åˆ—è¡¨-å†…å®¹-æ•°æ®-å†…éƒ¨â€)åŠ¨ç”»åŒ–ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¦ä¸€ä¸ªè§’åº¦åŠ¨ç”» API:

| åŠŸèƒ½ | å®ƒæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ |
| --- | --- |
| æŸ¥è¯¢() | ç”¨äºåœ¨å½“å‰å…ƒç´ ä¸­æŸ¥æ‰¾ä¸€ä¸ªæˆ–å¤šä¸ªå†…éƒ¨ HTML å…ƒç´ ã€‚ |

åœ¨è¿™ä¸ª API çš„å¸®åŠ©ä¸‹ï¼Œå®ç°åº”è¯¥æ˜¯è¿™æ ·çš„:

```
 trigger('sideContentAnimation', [
      transition(':enter', [
        // we set the width of the outer container to 0, and hide the
        // overflow (so the inner container won't be visible)
        style({ width: '0px', overflow: 'hidden' }),
        group([
          // we animate the outer container width to it's original value
          animate('250ms ease-out', style({ width: '!' })),
          // in the same time we translate the inner element all the
          // way from left to right
          query('.side-list-content-data-inner', [
            style({ transform: 'translateX(-110%)' }),
            group([animate('250ms ease-out', style({ transform: 'translateX(-0%)' }))]),
          ]),
        ]),
      ]),
      transition(':leave', [
        style({ overflow: 'hidden' }),
        group([
          animate('250ms ease-out', style({ width: '0' })),
          query('.side-list-content-data-inner', [
            style({ transform: 'translateX(-0%)' }),
            group([animate('250ms ease-out', style({ transform: 'translateX(-110%)' }))]),
          ]),
        ]),
      ]),
    ]) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®Œæ•´çš„æºæ–‡ä»¶[ã€‚](https://github.com/TheAngularGuy/angularAnimationTutorial/blob/step-3/src/app/components/list/list.component.ts)

ç”¨`sideContentAnimation`åŠ¨ç”»æ›´æ–°çš„ HTML æ–‡ä»¶:

```
 <!-- * content -->
  <div 
      class="side-list-content-data" 
      *ngIf="!!selectedContact" 
      @sideContentAnimation
  >
  ...
  </div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°±è¿™æ ·ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†æƒ³è¦çš„è¡Œä¸ºï¼Œæˆ‘ä»¬å­¦ä¼šäº†å¦‚ä½•ä½¿ç”¨ Angular animation API æ¥åšè¿™äº›ç›¸å½“å¤æ‚çš„åŠ¨ç”»ã€‚

# ç»“è®º

æœ€åï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨`trigger()`æ¥å®šä¹‰åŠ¨ç”»åç§°ï¼Œç„¶åæˆ‘ä»¬ä½¿ç”¨`transition()`æ¥å®šä¹‰ä¸åŒçŠ¶æ€ä¹‹é—´çš„åŠ¨ç”»(ä¾‹å¦‚`:enter`å’Œ`:leave`)ã€‚ä¹‹åï¼Œæˆ‘ä»¬ç”¨`style()`æ¥å®šä¹‰åŠ¨ç”»å¼€å§‹æ—¶çš„é£æ ¼ï¼Œæˆ‘ä»¬ç”¨`animate()`æ¥æ”¹å˜é‚£ä¸ªé£æ ¼ï¼Œæˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº†ç”¨`group()`å¯ä»¥åŒæ—¶åšå¤šä¸ªåŠ¨ç”»ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨`query()`å°†ä¸€ä¸ªåŠ¨ç”»é™„åŠ åˆ°æˆ‘ä»¬æ­£åœ¨åˆ¶ä½œåŠ¨ç”»çš„å­å…ƒç´ ä¸Šã€‚

æˆ‘å¸Œæœ›ä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œä¸‹ä¸€ç¯‡å†è§ã€‚
ç¼–ç å¿«ä¹ï¼

* * *

è¿™ä¸ªå¸–å­åˆ°æ­¤ä¸ºæ­¢ã€‚æˆ‘å¸Œæœ›ä½ å–œæ¬¢å®ƒã€‚å¦‚æœä½ æœ‰ï¼Œè¯·ä¸ä½ çš„æœ‹å‹å’ŒåŒäº‹åˆ†äº«ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ twitter ä¸Šå…³æ³¨æˆ‘ï¼Œåœ°å€æ˜¯ [@theAngularGuy](https://twitter.com/TheAngularGuy) ï¼Œè¿™å¯¹æˆ‘å¸®åŠ©å¾ˆå¤§ã€‚

ç¥ä½ ä»Šå¤©å¼€å¿ƒï¼ç©çš„å¼€å¿ƒï¼

* * *

### æ¥ä¸‹æ¥è¯»ä»€ä¹ˆï¼Ÿ

[![mustapha](img/6bdfdf3b2211f22eadcf26ba89e0b921.png)](/mustapha) [## è§’åº¦å•ä½æµ‹è¯• 101(å¸¦ç¤ºä¾‹)

### ç©†æ–¯å¡”æ³•Â·å¥¥ç“¦æ–¯ 8 æœˆ 29 æ—¥ 198 åˆ†é’Ÿé˜…è¯»

#angular #testing #javascript #webdev](/mustapha/angular-unit-testing-101-with-examples-6mc)