# è‡ªåŠ¨åŒ–æ‚¨çš„èŠ‚ç‚¹ä¾èµ–å…³ç³»æ›´æ–°

> åŸæ–‡:[https://dev . to/Dennis Phil/automate-your-node-dependency-updates-4 aga](https://dev.to/dennismphil/automate-your-node-dependency-updates-4aga)

ä¸€ä¸ªç›¸å½“å¤§çš„èŠ‚ç‚¹åº”ç”¨ç¨‹åºå°†æœ‰ 100 ä¸ªä¾èµ–é¡¹ã€‚ä¿æŒå®ƒä»¬å…¨éƒ¨æ›´æ–°æ˜¯å¼€å‘äººå‘˜åœ¨æŸä¸ªæ—¶å€™éœ€è¦æ‰§è¡Œçš„ğŸ§¹choreã€‚è¦ä¹ˆæ‚¨å¿½ç•¥ä¾èµ–é¡¹æ›´æ–°ï¼Œç›´åˆ°æ‚¨è¢«ä¸€ç»„éå¸¸æ—§çš„ä¾èµ–é¡¹æ‰€å›°ï¼Œè¿™äº›ä¾èµ–é¡¹é˜»ç¢äº†æ‚¨å¤„ç†ğŸ¦¹â€â™‚ï¸å®‰å…¨æ¼æ´çš„è¿›åº¦ï¼Œè¦ä¹ˆæ‚¨å°†å®è´µçš„åº”ç”¨ç¨‹åºå¼€å‘æ—¶é—´èŠ±è´¹åœ¨ä»¥åˆç†çš„èŠ‚å¥æ‰‹åŠ¨æµ‹è¯•æ›´æ–°ä¸Šã€‚

è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨ä¼ä¸šç¯å¢ƒä¸­è‡ªåŠ¨åŒ–è¿™ä¸ªè¿‡ç¨‹ï¼Œå‡è®¾æ‚¨æœ‰æŸç§ CI/CD ç¯å¢ƒå’Œä¸€ä¸ªç§æœ‰ GitHub repoã€‚

## [](#ingredients)ğŸ¥’ä½æ–™

1.  å¯¹æ‚¨çš„ä»£ç è¿›è¡Œå¯é çš„å•å…ƒæµ‹è¯•ã€‚å¦‚æœæ‚¨å¯¹ UI ç»„ä»¶è¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•å’Œå¿«ç…§æµ‹è¯•ï¼Œå°†ä¼šè·å¾—é¢å¤–çš„å¥–åŠ±
2.  `next-update` *ä¸€ä¸ª npm åŒ…ï¼Œæµ‹è¯•æ‚¨çš„ä¾èµ–é¡¹æ˜¯å¦å¯ä»¥åœ¨ä¸ä¸­æ–­æµ‹è¯•çš„æƒ…å†µä¸‹æ›´æ–°ã€‚*
3.  è¿™æ˜¯ä¸€ä¸ªæ¥è‡ª GitHubâ€çš„å‘½ä»¤è¡Œåº”ç”¨ç¨‹åºï¼Œå¯ä»¥ä¸æ‚¨çš„ GitHub repo è¿›è¡Œäº¤äº’ã€‚`hub`ä¸`git` CLI å®Œå…¨ç›¸ä¼¼ï¼Œæ˜¯ä¸€ä¸ªåµŒå…¥å¼æ›¿ä»£å“ï¼Œä½†å¢åŠ äº†ä¸ GitHub äº¤äº’çš„åŠŸèƒ½ã€‚æ–¹ä¾¿åœ¨æ›´æ–°æ“ä½œåæ‰“å¼€ä¸€ä¸ªæ‹‰å–è¯·æ±‚ã€‚

## [](#recipe)ğŸ“ç§˜è¯€

*   `npm install next-update --save-dev`
    *å°†ä¸‹ä¸€æ¬¡æ›´æ–°å®‰è£…ä¸ºå¼€å‘ä¾èµ–é¡¹ã€‚*

*   åœ¨æ‚¨çš„`package.json`è„šæœ¬éƒ¨åˆ†
    ä¸­é…ç½®ä¸€ä¸ª`npm`è„šæœ¬`dep:update`

    ```
    // package.json
    {
      "name": "a-sample-node-project",
      "version": "0.0.1",
      "description": "A sample node project",
      "scripts": {
        "test": "jest",
        "start": "node app.js",
        "dep:update": "next-update" // Configure an npm script
      },
      "devDependencies": {
        "next-update": "^3.6.0"
      },
      "dependencies": {
      },
    } 
    ```

*   `npm run dep:update`
    *è¿è¡Œè„šæœ¬ã€‚`next-update`å°†ç»§ç»­æŸ¥æ‰¾æ‰€æœ‰æ–°åŒ…ã€‚æŒ‰é¡ºåºæ›´æ–°å®ƒä»¬ï¼Œå¦‚æœæµ‹è¯•é€šè¿‡ï¼Œå°±ä¿æŒæ›´æ–°ã€‚*

*   ä¸‹è½½å¹¶å®‰è£…`hub` cli

    ```
    # download-hub.sh
    HUB_CLI=/opt/hub-linux/bin/hub

    if [[ ! -f $HUB_CLI ]]; then wget https://github.com/github/hub/releases/download/v2.12.2/hub-linux-amd64-2.12.2.tgz 
       tar zxvf hub-linux-amd64-2.12.2.tgz 
       rm -rf hub-linux-amd64-2.12.2.tgz /opt/hub-linux
       mv hub-linux-amd64-2.12.2 /opt/hub-linux
    fi 
    ```

*   é…ç½®é›†çº¿å™¨

    ```
    git config --global --replace-all hub.host github.yourdomain.com
    git config --global --replace-all hub.protocol git 
    ```

*   æŒ‡ç¤ºğŸ¤–æ‰“å¼€æ‹‰å–è¯·æ±‚çš„æœºå™¨äºº

    ```
    $HUB_CLI add package.json package-lock.json
    $HUB_CLI commit -m "ğŸ¤– [BOT] Automated dependency update"
    $HUB_CLI pull-request \
        --push \
        -m "Pull Request Subject" \
        -m "Pull Request Description" \
        --no-edit \
        --reviewer user-id1,user-id2 
    ```

*   å°†è¯¥è„šæœ¬æŒ‚æ¥åˆ°æ‚¨çš„ CI/CD ç¯å¢ƒä¸­ï¼Œä»¥ä¾¿æ¯å¤©è¿è¡Œ

[![](../Images/63f80bbc673910b9b35f6ab7e6eee52e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--MSWY6UOK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/3re3uynhyg0kc4jpw7hx.png)

## [](#wrapping-up)åŒ…è£…å®Œæ¯•

æˆ‘ä»¬çœ‹åˆ°äº†å¦‚ä½•æ£€æŸ¥å’Œæ›´æ–°èŠ‚ç‚¹ä¾èµ–å…³ç³»ï¼Œä»¥åŠå¦‚ä½•è‡ªåŠ¨åŒ–æ‰“å¼€ PR çš„è¿‡ç¨‹ã€‚å¦‚æœä½ çš„é¡¹ç›®æ˜¯å¼€æºçš„ï¼Œä½ å¯ä»¥ä½¿ç”¨åƒ Greenkeeper è¿™æ ·çš„æœåŠ¡ã€‚

å¹²æ¯

[![](../Images/e8a4102ace377c2d31a750d203fe8122.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--R-f1g29e--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/src9sniteiq1jdvbxg1z.png)

è¯·æŸ¥æ‰¾æˆ‘ä»¥å‰åœ¨åª’ä½“ä¸Šçš„æ–‡ç« :

1.  [ä½¿ç”¨ SVG çš„å•è¾¹åœ†è§’çŸ©å½¢](https://medium.com/@dennismphil/one-side-rounded-rectangle-using-svg-fb31cf318d90)
2.  [Visual Studio ä»£ç â€”è°ƒè¯•æ¨¡å¼](https://medium.com/@dennismphil/debugging-node-js-using-visual-studio-code-c30e5eeb9e38)
3.  æˆ‘å¸Œæœ› TypeScript æˆåŠŸã€‚
4.  æˆ‘çš„ç¬”è®°æœ¬ç”µè„‘é‡Œæœ‰ä»€ä¹ˆï¼Ÿ
5.  [CoffeeScript æœ€å—æ¬¢è¿çš„ç‰¹æ€§å³å°†åœ¨ JavaScript ä¸­å‡ºç°](https://medium.com/@dennismphil/coffeescripts-most-loved-feature-soon-in-javascript-b2f6740c2dc7)