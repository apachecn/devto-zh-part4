# æ•™ç¨‹:å¦‚ä½•ä¿®å¤å› [androidx.core:core:1.0.0]é—®é¢˜è€Œå¤±è´¥çš„ Android ç‰ˆæœ¬(2019 å¹´ 6 æœˆ)

> åŸæ–‡:[https://dev . to/julietter/tutorial-how-to-fix-a-failing-Android-build-due-androidx-core-core-1-0-0-issues-June-2019-4 hde](https://dev.to/julietter/tutorial-how-to-fix-a-failing-android-build-due-to-androidx-core-core-1-0-0-issues-june-2019-4hde)

[![](../Images/fea5abc91ec117e5f92b754b5e54d483.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--_rohEytb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2ALR5N28VEu0_KgRNsyj_qAw.jpeg) 

<figcaption>ç…§ç‰‡ç”±[çº¦ç¿°å°¼Â·æ²ƒåˆ©æ–¯](https://www.instagram.com/johnnywharris/)</figcaption>

æ‹æ‘„

å¦‚æœä½ æ˜¯åƒæˆ‘ä¸€æ ·çš„ React åŸç”Ÿå¼€å‘è€…ï¼Œä½ å¯èƒ½ä¼šæƒŠè®¶åœ°çœ‹åˆ°ä½ çš„ Android æ„å»ºåˆšåˆšå·¥ä½œï¼Œå¤±è´¥ï¼Œå¤±è´¥ï¼Œå†å¤±è´¥ã€‚

å¦‚æœä½ åœ¨ Android Studio ä¸­ï¼Œé—®é¢˜å¤§æ¦‚æ˜¯è¿™æ ·çš„:

```
Caused by: java.lang.RuntimeException: Manifest merger failed : Attribute application@appComponentFactory value=(android.support.v4.app.CoreComponentFactory) from [com.android.support:support-compat:28.0.0] AndroidManifest.xml:22:18â€“91
 is also present at [androidx.core:core:1.0.0] AndroidManifest.xml:22:18â€“86 value=(androidx.core.app.CoreComponentFactory).
 Suggestion: add â€˜tools:replace=â€android:appComponentFactoryâ€â€™ to \<application\> element at manifestMerger6369655802117611865.xml:7:5â€“9:19 to override. 
```

ä½ æœ‰æ²¡æœ‰å¯¹è‡ªå·±è¯´â€œå—¯ï¼Ÿå®‰å“å…‹æ–¯ï¼Ÿæˆ‘è¿˜ä¸æ”¯æŒè¿™ä¸€ç‚¹ã€‚â€ï¼Œé‚£å°±è·Ÿç€ä¸€èµ·å§ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•åœ¨ä¸æ·»åŠ  AndroidX æ”¯æŒçš„æƒ…å†µä¸‹ä¿®å¤è¯¥é—®é¢˜ã€‚

### [](#what-happened)å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ

è°·æ­Œæ˜¨å¤©(2019 å¹´ 6 æœˆ 17 æ—¥)è€äº†æˆ‘ä»¬ä¸€æŠŠï¼Œåœ¨å…¶`Google Play`å’Œ`Firebase`åº“ä¸Šå‘å¸ƒäº†[ä¸»è¦ç‰ˆæœ¬æ›´æ–°](https://developers.google.com/android/guides/releases)ã€‚è¿™æ„å‘³ç€ï¼Œå¯¼å…¥çš„æ‰€æœ‰ä¾èµ–é¡¹éƒ½è¾¾åˆ°äº†ä»¥ä¸‹ç¨‹åº¦:

```
implementation â€˜com.google.android.gms:play-services-base:+â€™ 
```

â€¦(æ³¨æ„`+`)ä¼šå—åˆ°å½±å“ã€‚

### [](#how-to-fix-it)å¦‚ä½•ä¿®å¤

1)è·³åˆ°æ‚¨çš„`/android/app/build.gradle`æ–‡ä»¶ï¼Œæ£€æŸ¥æ‚¨çš„ä¾èµ–é¡¹ã€‚æœç´¢ä»»ä½•ä¸€ä¸ª`play-services`æˆ–`firebase` *çš„å®ä¾‹ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦æ˜¯æœ€æ–°çš„ç‰ˆæœ¬(`+`)ã€‚

```
dependencies {
  implementation "com.android.support:appcompat-v7...
  implementation "com.facebook.react:react-native:+"
  // found one! vv
  implementation "com.google.android.gms:play-services-base:+"
  // found one! vv
  implementation "com.google.android.gms:play-services-maps:+"
  implementation "com.google.firebase:firebase-core:16.0.1"
} 
```

2)å‰å¾€ [MVNRepository](https://mvnrepository.com/) å¹¶æœç´¢ä»¤äººå¤´ç–¼çš„ä¾èµ–é¡¹ã€‚åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°æ‚¨çš„æ¨¡å—çš„æœ€æ–°å‘å¸ƒç‰ˆæœ¬ã€‚å°†`/android/app/build.gradle`æ›´æ–°åˆ°è¯¥ç‰ˆæœ¬ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªå¼ºåˆ¶æ ‡å¿—æ¥å¤„ç†ä»»ä½•ç‰ˆæœ¬å†²çª:

```
dependencies {
 implementation "com.android.support:appcompat-v7..
 implementation "com.facebook.react:react-native:+"
 implementation ("com.google.android.gms:play-services-base:16.1.0"){ force = true }
 implementation ("com.google.android.gms:play-services-maps:16.1.0"){ force = true }
 implementation "com.google.firebase:firebase-core:16.0.1"
} 
```

3)æ˜¯æ—¶å€™å¤„ç†ä½ çš„`node_modules`äº†ã€‚å¯¼èˆªåˆ°`/android`å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤:

```
./gradlew :app:dependencies 
```

è¿™å°†ä¸ºæ‚¨çš„æ•´ä¸ªé¡¹ç›®ç”Ÿæˆä¸€ä¸ªä¾èµ–æ ‘ã€‚

4)æŠ“å–æ ‘å¹¶ç²˜è´´åˆ°æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ã€‚æœç´¢`play-services`æˆ–`firebase` *çš„ä»»ä½•å®ä¾‹ï¼Œå¹¶æ²¿ç€æ ‘å‘ä¸Šå¯¼èˆªï¼ŒæŸ¥çœ‹æ¨¡å—è¢«ä½¿ç”¨çš„ä½ç½®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`react-native-push-notifications`æœ‰ä¸€ä¸ª`com.google.android.gms:play-services-gcm:+`ä¾èµ–é¡¹ã€‚

```
+ â€” â€” project :react-native-push-notification
 | + â€” â€” com.android.support:appcompat-v7:28.0.0 (\*)
 | + â€” â€” com.facebook.react:react-native:+ -\> 0.59.8 (\*)
 | + â€” â€” com.google.android.gms:play-services-gcm:+ -\> 17.0.0 (\*)
 | + â€” â€” me.leolin:ShortcutBadger:1.1.8 
```

5)ç»™é‚£äº›åŒ…æ‰“è¡¥ä¸ï¼å¦‚æœæˆ‘æ—¶é—´ç´§è¿«ï¼Œæˆ‘ä¼šä½¿ç”¨ [`patch-package`](https://github.com/ds300/patch-package) ï¼Œè¿™æ˜¯ä¸€ä¸ª genius åº“ï¼Œå¯ä»¥è®©ä½ å¯¹åŒ…è¿›è¡Œæ›´æ”¹ï¼Œç„¶åä¸ºä½ çš„é¡¹ç›®åˆ›å»ºä¸€ä¸ªè¡¥ä¸ã€‚è¿™ä¸ªè¡¥ä¸å°†åœ¨ä½ æˆ–ä½ å›¢é˜Ÿä¸­çš„æŸä¸ªäººè¿è¡Œ`npm i`çš„ä»»ä½•æ—¶å€™é€šè¿‡`postinstall`åº”ç”¨ã€‚

åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘å¯¼èˆªåˆ°`react-native-push-notification`çš„`build.gradle`æ–‡ä»¶ï¼Œè¿›è¡Œæ›´æ–°ï¼Œè¿è¡Œ:

```
npx patch-package react-native-push-notification 
```

â€¦ç§ï¼æˆ‘æœ‰è¡¥ä¸ï¼

#### [](#and-youre-done)å¤§åŠŸå‘Šæˆï¼

åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘éœ€è¦å¯¹`react-native-push-notification`å’Œ`react-native-push-notification`éƒ½åº”ç”¨è¡¥ä¸ã€‚

è¯·æ³¨æ„ï¼Œè¿™åªæ˜¯ä¸€ä¸ªåˆ›å¯è´´ï¼Œç›´åˆ°ä½ å‡†å¤‡å¥½æ”¯æŒ AndroidX åŠå…¶æ‰€æœ‰çš„è£è€€ğŸ¤–

å¸Œæœ›è¿™æœ‰æ‰€å¸®åŠ©ï¼

*æœ‰å…³æ›´æ–°çš„ä¾èµ–å…³ç³»çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å¯¼èˆªåˆ°[æ­¤å¤„](https://developers.google.com/android/guides/releases)ã€‚

* * *

ğŸ‘‹å—¨ï¼æˆ‘æ˜¯[æœ±ä¸½å¶](http://www.julietterapala.com)ã€‚æˆ‘åœ¨ [Eventric](https://www.eventric.com/) å·¥ä½œï¼Œæ˜¯ä¸€åè½¯ä»¶å¼€å‘å‘˜ã€‚è¯·åœ¨æ¨ç‰¹ä¸Šå…³æ³¨æˆ‘ï¼Œåœ°å€æ˜¯ [@Juliette](https://twitter.com/JulietteR) ã€‚