# [S4SRD]ç¬¬ä¸€å­£ç¬¬ä¸‰é›†-è¿›åŒ–çš„ä¸Šä¸‹æ–‡(å¯æ›´æ–°çš„ Svelte ä¸Šä¸‹æ–‡)

> åŸæ–‡:[https://dev . to/tiagobnobrega/s4srd-s01e 03-context-evolved-updatable-context-in-svelte-2ah 7](https://dev.to/tiagobnobrega/s4srd-s01e03-context-evolved-updatable-context-in-svelte-2ah7)

è¿™æ˜¯ä¸€ä¸ªå…³äºåœ¨è‹—æ¡èº«æä¸­åº”ç”¨ä¸€äº›å¸¸è§çš„ååº”æ¦‚å¿µå’Œæ¨¡å¼çš„ç³»åˆ—ã€‚è¿™ä¸€å­£æ˜¯å…³äºé’©å­çš„ã€‚ä¸Šä¸€é›†æˆ‘ä»¬å·²ç»è®¾å®šäº†æ¢ç´¢é’©å­çš„ç›®æ ‡ï¼Œä»¥åŠå¦‚ä½•ç”¨ svelte å®ç°å®ƒçš„ä¸€äº›ç‰¹æ€§(å¦‚æœä½ è¿˜æ²¡æœ‰çš„è¯ï¼Œè¯·æŸ¥çœ‹ä¸€ä¸‹)ã€‚åœ¨è¿™ä¸€é›†ä¸­ï¼Œæˆ‘å°†å±•ç¤ºå¦‚ä½•åœ¨ç®€å•çš„ä¸Šä¸‹æ–‡ä¸­æ›´æ–°ä¸€ä¸ªå€¼ã€‚å‡†å¤‡å¥½æ‚¨çš„çˆ†ç±³èŠ±ï¼Œæ¬¢è¿æ¥åˆ°:

<center>

## ğŸ™ƒ

</center>

<center>

## é¡½å›ºçš„ååº”å¼€å‘è€…çš„è‹—æ¡

</center>

### [](#abstract)æ‘˜è¦

ä¸Šä¸€é›†æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªé’©å­æ¥è®¿é—®ä¸Šä¸‹æ–‡ã€‚ç°åœ¨æˆ‘ä»¬æ­£åœ¨ç ”ç©¶å¦‚ä½•ä½¿ç”¨ä¸Šä¸‹æ–‡æ¥æ›´æ–°å®ƒçš„å€¼ã€‚

é—®é¢˜å‡ºç°åœ¨å…³äº *getContext* å’Œ *setContext* å‡½æ•°çš„å£°æ˜ä¸­:

> è¿™é‡Œçš„é—®é¢˜æ˜¯ï¼Œä½ éœ€è¦åœ¨ç»„ä»¶åˆå§‹åŒ–æœŸé—´è°ƒç”¨å®ƒä»¬ï¼Œæ‰€ä»¥**ä¸è¦åœ¨ *onMountã€onDestroyã€clickEvents ç­‰ä¸­è°ƒç”¨å®ƒä»¬***ã€‚

æˆ‘åœ¨ stack overflow ä¸­é—®äº†ä¸€ä¸ªç±»ä¼¼çš„é—®é¢˜ï¼Œ **@Rich_Harris** å¾ˆå‹å¥½åœ°ç»™æˆ‘æŒ‡å‡ºäº†æ­£ç¡®çš„æ–¹å‘ã€‚æˆ‘æ²¡æœ‰åªæ˜¯åˆ—å‡ºç­”æ¡ˆï¼Œè€Œæ˜¯å†³å®šé€šè¿‡è¿™ä¸ªæ¦‚å¿µæ¥æ€»ç»“è¿™ä¸ªæƒ³æ³•ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°ç†è§£*ä¸ºä»€ä¹ˆ*ï¼Œè€Œä¸æ˜¯ä»…ä»…å…³æ³¨*å¦‚ä½•*ã€‚å½“ç„¶ï¼Œå¦‚æœä½ ä¸æƒ³èµ°è¿™æ¡è·¯ï¼Œå°±å»è¯» TLï¼›é€Ÿåº¦ä¸‰è§’å½¢å®šä½æ³•(dead reckoning)ğŸ˜‰ã€‚

### TLï¼›é€Ÿåº¦ä¸‰è§’å½¢å®šä½æ³•(dead reckoning)

å› ä¸ºå¯¹ä¸Šä¸‹æ–‡å€¼çš„å¼•ç”¨ä¸èƒ½è¢«æ›´æ–°ã€‚æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•åœ¨ä¸Šä¸‹æ–‡ä¸­è®¿é—®å¯æ›´æ–°çš„å€¼ã€‚è‹—æ¡çš„å•†åº—éå¸¸é€‚åˆè¿™ä¸€ç‚¹ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥æ›´æ–°å’Œè§‚å¯Ÿã€‚æ‰€ä»¥åŸºæœ¬ä¸Šï¼Œåªè¦ä½¿ç”¨ä¸€ä¸ªå•†åº—ä½œä¸ºå®ƒçš„å€¼çš„ä¸Šä¸‹æ–‡ã€‚

### [](#cant-update-the-reference-now-what-)æ— æ³•æ›´æ–°å¼•ç”¨ï¼Œç°åœ¨æ€ä¹ˆåŠï¼Ÿï¼ï¼Ÿ

å…ˆè¯´æˆ‘ä»¬çš„ç›®æ ‡ã€‚æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿ**å®šä¹‰ä¸€ä¸ªä¸Šä¸‹æ–‡å€¼**ï¼Œç„¶å**æ›´æ–°è¿™ä¸ªå€¼**ï¼Œæœ€å**å¯¹æ­¤åšå‡ºååº”å¹¶ä½¿ç”¨æ–°å€¼**ã€‚ä½†æ˜¯...ç»„ä»¶åˆå§‹åŒ–åï¼Œæˆ‘ä»¬æ— æ³•æ›´æ–°ä¸Šä¸‹æ–‡å€¼å¼•ç”¨ã€‚

æŠŠæˆ‘ä»¬çš„ä¸Šä¸‹æ–‡å€¼æƒ³è±¡æˆä¸€ä¸ªå¸¸é‡ã€‚åœ¨ javascript ä¸­æˆ‘ä»¬ä¸èƒ½æ›´æ–°*å¸¸é‡*å¼•ç”¨ï¼Œå¯¹å—ï¼Ÿ

```
(()=>{
    const a = {value:'initial'};
    a = {value: 'updated'} // â­  TypeError: Assignment to constant variable.
    console.log(a);
})() 
```

ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ª*å¯¹è±¡*åˆ†é…ç»™ä¸€ä¸ª*å¸¸é‡*ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–°å®ƒé‡Œé¢çš„ä»»ä½•å€¼(å˜å¼‚):

```
(()=>{
    const a = {value:'initial'};
    a.value = 'updated'
    console.log(a); // outputs: {value: "updated"}
})() 
```

### [](#isnt-this-episode-about-svelte-)è¿™ä¸€é›†ä¸æ˜¯è®²è‹—æ¡çš„å—ï¼Ÿï¼Ÿ

å¥½çš„...æˆ‘ä»¬å¦‚ä½•åœ¨ svelte çš„ä¸Šä¸‹æ–‡ä¸­åº”ç”¨è¿™ä¸ªæ¦‚å¿µ(æˆ‘çš„æ„æ€æ˜¯ğŸ¤”...çº¤ç»†çš„ä¸Šä¸‹æ–‡è¯­å¢ƒğŸ˜•...ä½ çŒœå¯¹äº†ï¼).è¯•ç€è·Ÿéšè¿™ä¸ª*éå®ç”¨*ä¾‹å­ä¸­çš„æ³¨é‡Š:

```
<!-- App.svelte -->
<script>
    import ContextValue from './ContextValue.svelte';
    import {setContext, getContext} from 'svelte';
    setContext('value',{value:'inital'}); // â­  Create context
</script>
<ContextValue /> <!-- Import component that use the context -->

<!-- ContextValue.svelte -->
<script>
    import {getContext} from 'svelte';
    const contextValue = getContext('value'); // â­  Get context.

    function logContextValue(){ //â­  Function to log current context value
        console.log(contextValue)
    }

    function updateContext(){ // â­  Function to "update" context
        myContext.value = 'updated'
    }
</script>
<button on:click={updateContext} >Update Context</button> <!-- â­  "Updates" context -->
<button on:click={logContextValue}>Log Context Value</button> <!-- â­  Log context --> 
```

é¢„æœŸçš„æƒ³æ³•æ˜¯:
1 -ç‚¹å‡»â€œè®°å½•ä¸Šä¸‹æ–‡å€¼â€æŒ‰é’®â®•è¾“å‡ºåˆå§‹å€¼

2 -å•å‡»â€œæ›´æ–°ä¸Šä¸‹æ–‡â€æŒ‰é’®ï¼›

3 -ç‚¹å‡»â€œè®°å½•ä¸Šä¸‹æ–‡å€¼â€æŒ‰é’®â®•è¾“å‡ºæ›´æ–°å€¼

å’Œ...æœ‰ç”¨ï¼

[![result-1](../Images/ae8401032d6c529ffd17381d26e15c28.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--dqNunnxn--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/jm8bufpy4rnnfvki6w5e.gif)

### [](#still-messy)ä¾æ—§å‡Œä¹±

æ˜¯...è¿˜ä¸å¤ªå¥½ã€‚é€»è¾‘æ— å¤„ä¸åœ¨ï¼Œæˆ‘ä»¬ç”šè‡³æ²¡æœ‰ä¸ºæ­¤åˆ›å»ºä¸€ä¸ªå¯é‡ç”¨çš„å‡½æ•°(æƒ³è±¡ä¸€ä¸‹åœ¨è®¸å¤šç»„ä»¶ä¸­ä½¿ç”¨å®ƒ)ã€‚æˆ‘ä»¬éœ€è¦å‡ ä¸ªå‡½æ•°æ¥ä½¿å®ƒå·¥ä½œã€‚å¾ˆä¹±ã€‚è¿™ä¸ªæ€ä¹ˆæ ·ï¼Ÿ

```
//smartContext.js
import {setContext, getContext} from 'svelte';

export function setSmartContext(contextObject){
    setContext('value',contextObject);
}

export function getSmartContext(){
    const ctx = getContext('value');
    return {
        get:()=>ctx,
        update: newValue => ctx.value = newValue
    }
} 
```

è¾ƒå¥½çš„...å®ƒè¢«éš”ç¦»åœ¨ä¸€ä¸ªæ¨¡å—é‡Œã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ:

```
<!-- App.svelte -->
<script>
    import ContextValue from './ContextValue.svelte';
    import {setSmartContext} from './smartContext.js'
    setSmartContext({value:'inital'}); //â­  Set a smartContext
</script>
<ContextValue />

<!-- ContextValue.svelte -->
<script>
    import {getSmartContext} from './smartContext.js';
        const smartContext = getSmartContext('value'); //â­  get a smartContext
        function updateContext(){
            smartContext.update('updated') //â­  updates smartContext
        }
        function logContextValue(){
            console.log(smartContext.get()) //â­  Set smartContext value
        }
</script>
<button on:click={updateContext} >Update Context</button>
<button on:click={logContextValue}>Log Context Value</button> 
```

ä»ç„¶...å®ƒåªå¯¹å•ä¸ªå€¼æœ‰æ•ˆã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦ä¸¤ä¸ªä¸åŒçš„ä¸Šä¸‹æ–‡å€¼ï¼Œæˆ‘ä»¬éœ€è¦å¤åˆ¶æˆ‘ä»¬çš„ *smartContext.js* (ä¸å¤ªèªæ˜...).

### [](#making-it-more-reusable)ä½¿å…¶æ›´åŠ å¯é‡å¤ä½¿ç”¨

å®é™…ä¸Šï¼Œå¦‚æœä½ æœ‰è¶³å¤Ÿçš„åˆ›é€ åŠ›ï¼Œä½ ä¼šæ„è¯†åˆ° *smartContext* åªæ˜¯ä¸€ä¸ª**å¯¹è±¡ï¼Œå®ƒæ›´æ–°å…¶ä½œç”¨åŸŸ** *(æˆ–ä¸Šä¸‹æ–‡)*ä¸­çš„ä¸€ä¸ªå˜é‡ã€‚ä¸ºæ­¤ï¼Œå¦‚æœæœ‰ä¸€ä¸ª**å†…éƒ¨ä¸Šä¸‹æ–‡** *(æˆ–èŒƒå›´)*ï¼Œå®ƒç”šè‡³ä¸éœ€è¦ä¸€ä¸ª*å¤–éƒ¨ä¸Šä¸‹æ–‡*ã€‚åŸæ¥ javascript ä¸­æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç‰¹æ€§:å‡½æ•°ï¼ï¼ï¼ï¼çœ‹:

```
//smartContext.js
export default (defaultValue)=>{
        let value = defaultValue; //â­  scope value
        return {
            set: newValue=>{
                value=newValue //â­  update scope value
            },
            get: ()=>value,//â­  get scope value
        };
    }; 
```

æœ‰è¶£çš„...ä½†æ˜¯ï¼Œè¿™å¹¶æ²¡æœ‰å¸¦æ¥ä¸€ä¸ªè‹—æ¡çš„èƒŒæ™¯å¿…é¡»æä¾›çš„æ‰€æœ‰åŠŸèƒ½ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬å°†å®ƒä»¬ç»“åˆèµ·æ¥ï¼Œåˆ›å»º 2 ä¸ª smartContextsã€‚

```
<!-- App.svelte -->
<script>
    import ContextValue from './ContextValue.svelte';
    import {setContext} from 'svelte' //â­  import default svelte context
    import smartContext from './smartContext.js' // â­  import smartContext "builder"

    //â®¦Set a context value to a smartContext
    setContext('value', smartContext('initial')) 
    //â®¦Set another context value to a smartContext
    setContext('unused', smartContext('unused'))
</script>
<ContextValue />

<!-- ContextValue.svelte -->
<script>
      import {getContext} from 'svelte';
      const smartContext = getContext('value'); //â­  get a smartContext
      const getUnusedContext = getContext('unused');//â­  get a smartContext
      function updateContext(){
        smartContext.update('updated')//â­  update the smartContext
      }
      function logContextValue(){
        console.log(smartContext.get())//â­  get the smartContext value
      }
</script>
<button on:click={updateContext} >Update Context</button>
<button on:click={logContextValue}>Log Context Value</button> 
```

### [](#adding-reactiveness)å¢åŠ ååº”æ€§

ç°åœ¨å¥½å¤šäº†ï¼æˆ‘çŸ¥é“åˆ°è¾¾åŒä¸€ä¸ªåœ°æ–¹ä¼¼ä¹æ˜¯ä¸€æ¬¡ä¼Ÿå¤§çš„å¾€è¿”æ—…è¡Œï¼Œä½†æ˜¯ç†è§£å’Œåˆ’åˆ†æ¦‚å¿µæ˜¯å¾ˆé‡è¦çš„ã€‚è¯·å®¹å¿æˆ‘ä¸€ä¼šå„¿ã€‚æˆ‘ä»¬å®Œäº‹äº†å—ï¼Ÿä¸å®Œå…¨æ˜¯ã€‚æˆ‘ä»¬éœ€è¦:

> èƒ½å¤Ÿ**å®šä¹‰ä¸€ä¸ªä¸Šä¸‹æ–‡å€¼**ï¼Œç„¶å**æ›´æ–°è¿™ä¸ªå€¼**ï¼Œæœ€å**å¯¹æ­¤åšå‡ºååº”å¹¶ä½¿ç”¨æ–°å€¼**

æˆ‘ä»¬å·²ç»**å®šä¹‰äº†ä¸€ä¸ªä¸Šä¸‹æ–‡å€¼**å¹¶ä¸”**æ›´æ–°äº†è¿™ä¸ªå€¼**ï¼Œä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰**å¯¹è¿™ä¸ªæ›´æ–°**åšå‡ºååº”ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè·å–æ›´æ–°å€¼çš„å”¯ä¸€æ–¹æ³•æ˜¯æ‰§è¡Œä¸€ä¸ªå‘½ä»¤æ€§åŠ¨ä½œ(å› æ­¤ï¼Œâ€œå•å‡»æŒ‰é’®â€)ã€‚å¦‚æœæˆ‘ä»¬è®©è¿™ä¸ªå€¼æ˜¾ç¤ºåœ¨ *ContextValue.svelte* ä¸Šï¼Œå®ƒä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚è®©æˆ‘ä»¬è¯•è¯•:

```
<!-- ContextValue.svelte -->
<script>
      import {getContext} from 'svelte';
      const smartContext = getContext('value'); //â­  get a smartContext
      const getUnusedContext = getContext('unused');//â­  get a smartContext
      function updateContext(){
        smartContext.update('updated')//â­  update the smartContext
      }
      function logContextValue(){
        console.log(smartContext.get())//â­  get the smartContext value
      }
</script>
<button on:click={updateContext} >Update Context</button>
<button on:click={logContextValue}>Log Context Value</button> 
```

ç»“æœæ˜¯:

[![result-2](../Images/39a3ea7c86164df5865711656da0c5d8.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--AxiTfzPi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/xwvw8cfqhdn7e05fjd1y.gif)

### [](#a-better-smartcontext)æ›´å¥½çš„æ™ºèƒ½ä¸Šä¸‹æ–‡

è¯¥å€¼ä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚æœ‰é“ç†ï¼Œä¸ºä»€ä¹ˆä¼šå‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥**å¯¹åº”**æˆ–è€…**è®¢é˜…**è¿™ä¸ªå€¼æ›´æ–°ã€‚åœ¨ç€æ‰‹è§£å†³è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ•´åˆä¸€ä¸‹æˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿:

ä¸€ä¸ªé€”å¾„**å­˜å‚¨**ï¼Œ**æ›´æ–°**ï¼Œä¸€ä¸ª**è®¢é˜…**ä¸€ä¸ª**ä½œç”¨åŸŸå€¼**ã€‚

æ­£å¦‚æˆ‘ä»¬æ‰€è§ï¼ŒèŒƒå›´æ˜¯ç”±ç»†é•¿çš„ä¸Šä¸‹æ–‡ä½¿ç”¨ *getContext* å’Œ *setContext* æ¥å¤„ç†çš„ã€‚æˆ‘ä»¬çš„ *smartContext* å·²ç»**å­˜å‚¨**å¹¶ä¸”**æ›´æ–°**è¯¥å€¼ï¼Œä½†æ˜¯**ä¸æ˜¯å¯è§‚å¯Ÿçš„**ã€‚è‹—æ¡å•†åº—æœ‰ä¸€ä¸ªæ–¹ä¾¿çš„åŠŸèƒ½æ¥å¸®åŠ©æˆ‘ä»¬:**è‹—æ¡å•†åº—**ã€‚

svelte ä¸­çš„å•†åº—æ­£æ˜¯è¿™æ ·åšçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨å®ƒå®Œå…¨å–ä»£*æ™ºèƒ½ä¸Šä¸‹æ–‡*ã€‚ç¬¬ä¸€*app . svelte*T4ã€‘

```
<!-- App.svelte -->
<script>
    import ContextValue from './ContextValue.svelte';
    import {setContext} from 'svelte'; //â­  import svelt context
    import { writable } from 'svelte/store'; //â­  import svelt writable store

    let smartContext = writable('initial');//â­  initialize store
    setContext('value',smartContext);//â­  set context value as the store
</script>
<ContextValue /> 
```

æ­¤æ—¶ï¼Œæˆ‘ä»¬å°†è§‚å¯Ÿå­˜å‚¨æ›´æ–°ï¼Œå¹¶é€šè¿‡æ›´æ–°ç»„ä»¶å˜é‡å¯¹å…¶åšå‡ºååº”ã€‚è¿™ä¸ä¹‹å‰è®¿é—®å­˜å‚¨å€¼çš„æ–¹æ³•ç•¥æœ‰ä¸åŒã€‚å½“å­˜å‚¨å€¼æ”¹å˜æ—¶ï¼Œæˆ‘ä»¬çš„å˜é‡å€¼ä¹Ÿä¼šæ”¹å˜ã€‚

```
<!-- ContextValue.svelte -->
<script>
      import {getContext,onMount} from 'svelte';
        //â®¦ get svelt store(replaced our smartContext)
        let smartContext = getContext('value'); 
        let contextValue;//â­  this variable will hold the store value (context value)
        //â®¦ update our variable whenever the store value get updated
        onMount(()=>smartContext.subscribe(v=>contextValue = v))

        //â®¦ Function to update store value
        function updateContext(){
            smartContext.update(()=>'updated')
        }
       //â®¦ We don't need to access store value, just access our "synced" variable
        function logContextValue(){ 
            console.log(contextValue)
        }
</script>
<h1>{contextValue}</h1> <!-- print out our variable value -->
<button on:click={updateContext} >Update Context</button>
<button on:click={logContextValue}>Log Context Value</button> 
```

ç»“æœæ˜¯:

[![result-3](../Images/ed14906d20fff5a70c2d10f07065df09.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Dup1WyVg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/w3jkesa1vu0ld1kikwye.gif)

ç»™ä½ ã€‚ç°åœ¨æˆ‘ä»¬æ­£åœ¨è°ˆè¯ï¼ï¼

### [](#making-it-even-better-get-me-some-sugar-)å˜å¾—æ›´å¥½...ç»™æˆ‘ä¸€äº›ç³–ï¼

æœ‰ç”¨ï¼æœ€åã€‚ä½†è¿˜æ˜¯å¤ªå†—é•¿äº†ï¼Œä½ ä¸è§‰å¾—å—ï¼Ÿå•†åº—ï¼Œä½œä¸º svelte çš„ä¸€ä¸ªå†…ç½®åŠŸèƒ½ï¼Œå¸¦æœ‰ä¸€ä¸ªæˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„*è¯­æ³•ç³–*:*è‡ªåŠ¨è®¢é˜…*ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯åœ¨ä½ çš„å­˜å‚¨å˜é‡åå‰åŠ ä¸€ä¸ªç¾å…ƒç¬¦å·($)ã€‚å°±è¿™ä¹ˆç®€å•ï¼æˆ‘ä»¬åªéœ€è¦æ”¹å˜æˆ‘ä»¬çš„ *ContextValue.svelte* ç»„ä»¶ã€‚æ¥çœ‹çœ‹:

```
<!-- ContextValue.svelte -->
<script>
      import {getContext,onMount} from 'svelte';
        let smartContext = getContext('value');
        function updateContext(){
            smartContext.update(()=>'updated')
        }
        function logContextValue(){ 
            console.log($smartContext) //â­  auto-subscribed value
        }
</script>
<h1>{$smartContext}</h1> <!-- //â­  auto-subscribed value -->
<button on:click={updateContext} >Update Context</button>
<button on:click={logContextValue}>Log Context Value</button> 
```

ç°åœ¨æ›´å°æ›´ç®€æ´äº†ã€‚å½“ç»„ä»¶è¢«ç ´åæ—¶ï¼Œæˆ‘ä»¬è¿˜èƒ½å¾—åˆ°é¢å¤–çš„å¥½å¤„ï¼Œè®©è‹—æ¡çš„äººä»å•†åº—é€€è®¢ã€‚æˆ‘å¿½ç•¥äº†å‰ä¸€ç‰ˆæœ¬ä»£ç çš„ä¸€ä¸ªå°é—®é¢˜ã€‚

äº‹æƒ…å¼€å§‹å˜å¾—æœ‰è¶£äº†ã€‚æˆ‘å»ºè®®çœ‹ä¸€çœ‹å•†åº—ç¤ºä¾‹([https://svelte.dev/examples#writable-stores](https://svelte.dev/examples#writable-stores))å’Œæ¥è‡ªè‹—æ¡å®˜æ–¹æ–‡ä»¶çš„æ–‡æ¡£([https://svelte.dev/docs#writable](https://svelte.dev/docs#writable))ã€‚ä½¿ç”¨èµ·æ¥æå…¶ç®€å•ã€‚

æˆ‘å¯èƒ½ä¼šåœ¨è¿™ä¸ªé—®é¢˜ä¸ŠåŠ ä¸€ä¸¤é›†ã€‚è°çŸ¥é“å‘¢ï¼Ÿå¦‚æœä½ è§‰å¾—æˆ‘æœ‰è¶£ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼ï¼

â•âš ï¸âš ï¸âš ï¸å‰§é€æé†’âš ï¸âš ï¸âš ï¸â•
æˆ‘ä¿è¯æˆ‘ä¼šå» HOCã€‚å…ˆåšå‡ ä»¶äº‹ï¼

æ‰°æµæ¿è­¦æŠ¥