# æˆ‘çš„æ°´è±šç¬”è®°

> åŸæ–‡:[https://dev.to/n350071/my-capybara-note-2gp3](https://dev.to/n350071/my-capybara-note-2gp3)

# [](#overview)æ¦‚è¿°

æ°´è±šæ˜¯å¾ˆå¥½çš„é“è·¯ E2E(åŠŸèƒ½)æµ‹è¯•ã€‚å®ƒæ¨¡æ‹Ÿç”¨æˆ·åœ¨æµè§ˆå™¨ä¸Šçš„è¡Œä¸ºï¼Œæ¯”å¦‚æ‰¾åˆ°ä¸€ä¸ªæŒ‰é’®å¹¶ç‚¹å‡»å®ƒï¼Œç­‰å¾…ä¸‹ä¸€é¡µã€‚å¯ä»¥é€‰æ‹© Selenium Driver æˆ–è€…å…¶ä»–ä½œä¸º web é©±åŠ¨ã€‚

# [](#setup)è®¾ç½®

[![n350071 image](img/c9dd0fa7ece3b4a6c3e55d373898cd1e.png)](/n350071) [## å»ºç«‹ä¸€ä¸ªæ°´è±š

### n350071ğŸ‡¯ğŸ‡µ9 æœˆ 19 æ—¥ 1911 åˆ†é’Ÿé˜…è¯»

#rails](/n350071/setup-a-capybara-242g)[![n350071 image](img/c9dd0fa7ece3b4a6c3e55d373898cd1e.png)](/n350071) [## ç”¨æ°´è±šåœæ­¢/æš‚åœæ— å¤´ç¡’æµ‹è¯•

### n350071ğŸ‡¯ğŸ‡µ9 æœˆ 10 æ—¥ 191 åˆ†é’Ÿé˜…è¯»

#capybara #rspec #rails](/n350071/stop-pause-headless-selenium-testing-with-capybara-4mc0)

# [](#usage)ç”¨æ³•

## [](#prepare)ğŸ”¨å‡†å¤‡

[![n350071 image](img/c9dd0fa7ece3b4a6c3e55d373898cd1e.png)](/n350071) [## åœ¨æ°´è±šä¸­åˆ¶ä½œå¤æ‚çš„æµ‹è¯•æ•°æ®

### n350071ğŸ‡¯ğŸ‡µ9 æœˆ 19 æ—¥ 1911 åˆ†é’Ÿé˜…è¯»

#rails](/n350071/making-complex-test-data-in-capybara-2ojn)

## [](#%F0%9F%91%81-look-around-your-site)ğŸ‘ç¯é¡¾ä½ çš„ç½‘ç«™

### HTML å†…éƒ¨

[![n350071 image](img/c9dd0fa7ece3b4a6c3e55d373898cd1e.png)](/n350071) [## åœ¨æ°´è±šä¸­å‘ç°

### n350071ğŸ‡¯ğŸ‡µ9 æœˆ 24 æ—¥ 192 åˆ†é’Ÿé˜…è¯»

#rails](/n350071/find-in-capybara-4ohm)[![n350071 image](img/c9dd0fa7ece3b4a6c3e55d373898cd1e.png)](/n350071) [## ç‚¹å‡»æ°´è±šä¸­çš„é“¾æ¥

### n350071ğŸ‡¯ğŸ‡µ9 æœˆ 18 æ—¥ 1911 åˆ†é’Ÿé˜…è¯»

#rails](/n350071/link-in-capybara-336k)[![n350071 image](img/c9dd0fa7ece3b4a6c3e55d373898cd1e.png)](/n350071) [## åœ¨ Capybara Rails æµ‹è¯•ä¸­ä½¿ç”¨â€œåœ¨â€ç¼©å°èŒƒå›´

### n350071ğŸ‡¯ğŸ‡µ9 æœˆ 18 æ—¥ 1911 åˆ†é’Ÿé˜…è¯»

#rails](/n350071/narrow-down-scope-with-within-in-capybara-rails-testing-14hi)

### [](#browser-manipulation)æµè§ˆå™¨æ“ä½œ

[![n350071 image](img/c9dd0fa7ece3b4a6c3e55d373898cd1e.png)](/n350071) [## æ°´è±š::ä¼šè¯é¡µé¢å¯¼èˆª

### n350071ğŸ‡¯ğŸ‡µ10 æœˆ 24 æ—¥ 191 åˆ†é’Ÿé˜…è¯»

#rails](/n350071/capybara-session-page-navigations-12de)

## æ–­è¨€

[![n350071 image](img/c9dd0fa7ece3b4a6c3e55d373898cd1e.png)](/n350071) [## capybara find.text æ–¹æ³•å¿½ç•¥æ¢è¡Œç¬¦(è½¬æ¢ä¸ºç©ºæ ¼)

### n350071ğŸ‡¯ğŸ‡µ9 æœˆ 10 æ—¥ 191 åˆ†é’Ÿé˜…è¯»

#capybara #rspec #rails](/n350071/is-ignored-converted-to-a-space-at-capybara-find-text-3ef7)
[![n350071 image](img/c9dd0fa7ece3b4a6c3e55d373898cd1e.png)](/n350071) [## åœ¨æ°´è±šä¸­æµ‹è¯• css(å›¾æ ‡)

### n350071ğŸ‡¯ğŸ‡µ9 æœˆ 10 æ—¥ 191 åˆ†é’Ÿé˜…è¯»

#capybara #rspec #rails](/n350071/test-css-icon-with-capybara-5fb8)
[![n350071 image](img/c9dd0fa7ece3b4a6c3e55d373898cd1e.png)](/n350071) [## have_selector é€‚åˆæ°´è±šç­‰å¾…æµ‹è¯•

### n350071ğŸ‡¯ğŸ‡µ9 æœˆ 18 æ—¥ 1911 åˆ†é’Ÿé˜…è¯»

#capybara #rspec #rails](/n350071/haveselector-is-good-for-waiting-test-in-capybara-5g5d)
[![n350071 image](img/c9dd0fa7ece3b4a6c3e55d373898cd1e.png)](/n350071) [## ã€æ°´è±šã€‘å–œæ¬¢åˆ†äº« _ ç¤ºä¾‹

### n350071ğŸ‡¯ğŸ‡µ10 æœˆ 8 æ—¥ 192 åˆ†é’Ÿé˜…è¯»

#rails](/n350071/capybara-like-sharedexamples-18be)

```
# get current path
current_path

# spec/rails_helpers/feature_helper.rb
module FeatureHelpers
  def current_path_with_params
    uri = URI.parse(current_url)
    "#{uri.path}?#{uri.query}"
  end
end 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#form)ğŸ“å½¢å¼

[![n350071 image](img/c9dd0fa7ece3b4a6c3e55d373898cd1e.png)](/n350071) [## æ°´è±šä¸­çš„å¤é€‰æ¡†

### n350071ğŸ‡¯ğŸ‡µ9 æœˆ 18 æ—¥ 1911 åˆ†é’Ÿé˜…è¯»

#rails](/n350071/checkbox-in-capybara-3emj)[![n350071 image](img/c9dd0fa7ece3b4a6c3e55d373898cd1e.png)](/n350071) [## åœ¨æ°´è±šä¸­é™„åŠ ä¸€ä¸ªæ–‡ä»¶

### n350071ğŸ‡¯ğŸ‡µ9 æœˆ 19 æ—¥ 1911 åˆ†é’Ÿé˜…è¯»

#rails](/n350071/attach-a-file-in-capybara-52ke)[![n350071 image](img/c9dd0fa7ece3b4a6c3e55d373898cd1e.png)](/n350071) [## ã€æ°´è±šã€‘å¯»æ‰¾(â€˜è¾“å…¥â€™)ã€‚é›†åˆæ„å¿—è¿˜æ²¡æœ‰å®Œæˆï¼

### n350071ğŸ‡¯ğŸ‡µ12 æœˆ 17 æ—¥ 191 åˆ†é’Ÿé˜…è¯»

#capybara #rspec #rails](/n350071/capybara-find-input-set-will-have-not-done-5cpg)

```
# input type=text
fill_in 'nav-search', with: 'n350071 capybara'

# select box
select 'Most Views', from: 'dashhboard_sort'

# submit
page.execute_script("$('form#your-form').submit()") 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#manipulate)ğŸ§™â€â™‚ï¸æ“çºµ

[![n350071 image](img/c9dd0fa7ece3b4a6c3e55d373898cd1e.png)](/n350071) [## è¿è¡Œ Javascript by Capybara åŠŸèƒ½æµ‹è¯•

### n350071ğŸ‡¯ğŸ‡µ9 æœˆ 10 æ—¥ 191 åˆ†é’Ÿé˜…è¯»

#capybara #rspec #rails](/n350071/run-javascript-by-capybara-feature-test-ob8)

```
# Change CSS/Style in Capybara
page.execute_script("$('selector').css('display','block')"); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#opinion)ğŸæ„è§

*   æˆ‘ä»¬åº”è¯¥ä½¿ç”¨ç”¨æˆ·å°†çœ‹åˆ°çš„å†…å®¹ï¼Œè€Œä¸æ˜¯ HTML çš„æºä»£ç ã€‚
*   HTML æ˜¯æµ‹è¯•çš„ä¸€ä¸ªé‡è¦å› ç´ ã€‚
    *   æˆ‘ä»¬åº”è¯¥å¯¹é½ HTML æ ‡ç­¾ï¼ŒCSS è¿›è¡Œæµ‹è¯•ã€‚å¦‚æœå®ƒä¸åŒäºä¸€ä¸ªç›¸ä¼¼çš„é¡µé¢ï¼Œæµ‹è¯•å°±å¾ˆå›°éš¾ã€‚
    *   æˆ‘ä»¬åº”è¯¥åœ¨ HTML ä¸­ä½¿ç”¨æ­£ç¡®çš„åç§°æ¥æ”¯æŒç®€å•çš„æµ‹è¯•ã€‚
*   ä½¿ç”¨`find('label[for="model_attributes"]'`æ¯” XPath æ›´å¥½ï¼Œå› ä¸ºè¿™ç§æ–¹å¼æ˜¯æ¨¡æ‹Ÿç”¨æˆ·çš„æ–¹å¼ã€‚