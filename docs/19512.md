# React ä¸­çš„é«˜é˜¶ç»„ä»¶(hoc)ä»‹ç»

> åŸæ–‡:[https://dev . to/ogwurjohnson/introduction-to-higher-order-components-hocs-in-react-273 f](https://dev.to/ogwurujohnson/introduction-to-higher-order-components-hocs-in-react-273f)

> è¿‡å»çš„ä¸€å‘¨è®©æˆ‘å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ï¼Œå¾ˆå¤šæˆ‘å¾ˆæƒ³åˆ†äº«çš„æ¦‚å¿µã€‚æˆ‘å°†ä»è®¨è®º react ä¸­çš„é«˜é˜¶å‡½æ•°å¼€å§‹ã€‚

ä¸ºäº†èƒ½å¤Ÿç†è§£ react ä¸­çš„é«˜é˜¶ç»„ä»¶ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç†è§£ JavaScript ä¸­çš„é«˜é˜¶å‡½æ•°æ˜¯ä»€ä¹ˆã€‚Javascript ä¸­çš„é«˜é˜¶å‡½æ•°æ˜¯ä»¥å…¶ä»–å‡½æ•°ä¸ºå‚æ•°ï¼Œè¿”å›å¦ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ã€‚é«˜é˜¶å‡½æ•°çš„ä¾‹å­æœ‰:`.map`ã€`.filter`ç­‰ã€‚æˆ‘åœ¨è¿™ç¯‡æ–‡ç« ä¸­æåˆ°äº†å…¶ä¸­çš„ä¸€äº›:

[![ogwurujohnson](../Images/5a9b1758658be88756f92622cacdc96a.png)](/ogwurujohnson) [## ã€‚forEach()ï¼Œã€‚map()ï¼Œã€‚è¿‡æ»¤å™¨()....æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

### çº¦ç¿°é€ŠÂ·å¥¥æ ¼æ­¦é² 5 æœˆ 11 æ—¥ 181 åˆ†é’Ÿé˜…è¯»

#javascript #programming #tutorial](/ogwurujohnson/foreach-map-filter--whats-the-difference-304l)

> éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘å‡è®¾ä½ äº‹å…ˆäº†è§£ Reactï¼Œå¦‚æœä½ ä¸äº†è§£ï¼Œä¸‹é¢æ˜¯ traverse media æä¾›çš„ä¸€ä¸ªå¾ˆæ£’çš„æ•™ç¨‹ã€‚æ’‡å¼€é‚£ä»¶äº‹ï¼Œè®©æˆ‘ä»¬ç›´æ¥å¼€å§‹å§ã€‚

[https://www.youtube.com/embed/sBws8MSXN7A](https://www.youtube.com/embed/sBws8MSXN7A)

é«˜é˜¶ç»„ä»¶æ˜¯å°†å¦ä¸€ä¸ªç»„ä»¶æˆ–å¤šä¸ªç»„ä»¶ä½œä¸ºå‚æ•°å¹¶è¿”å›æ–°ç»„ä»¶çš„ç»„ä»¶ã€‚å¯ä»¥æ¯”ä½œé«˜é˜¶å‡½æ•°ï¼Œè¿™å°±æ˜¯è¿™ä¸ªåå­—çš„ç”±æ¥ã€‚è¿™æ˜¯ react ä¸­é‡ç”¨ç»„ä»¶é€»è¾‘çš„ä¸€ç§é«˜çº§æŠ€æœ¯ã€‚å½“æˆ‘ä»¬æƒ³ä»ç«™ç‚¹çš„å…¶ä»–ç»„ä»¶ä¸­æŠ½è±¡å‡ºä¸€ä¸ªç™»å½•ç»„ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ HOCï¼Œæˆ‘å°†æ¼”ç¤ºå¦‚ä½•å®ç°ã€‚hoc é€šå¸¸ç”¨ä½œé«˜çº§çš„ react æ¨¡å¼ï¼Œç”¨äºè®¾è®¡ä¸€äº›å…±äº«æŸäº›è¡Œä¸ºçš„ç»„ä»¶ï¼Œä½¿å®ƒä»¬çš„è¿æ¥æ–¹å¼ä¸åŒäºæ™®é€šçš„ state-> props æ¨¡å¼ã€‚HOCs ä½œä¸ºä¸€ç§é«˜çº§çš„ react æ¨¡å¼ï¼Œå…è®¸æˆ‘ä»¬é‡ç”¨ç»„ä»¶é€»è¾‘ã€‚æƒ³æƒ³æˆ‘æåˆ°çš„ç™»å½•ç»„ä»¶çš„åŠŸèƒ½ã€‚ç™»å½•å¯èƒ½åªæ˜¯ä¸€ä¸ªè¡¨å•ï¼Œå®ƒå°†ç”¨æˆ·åå’Œå¯†ç ä½œä¸ºå€¼ï¼Œå¹¶æ ¹æ®æ•°æ®åº“æˆ–ä»»ä½•å­˜å‚¨æ–¹å¼æ‰§è¡Œæ£€æŸ¥(å¦‚æœç”¨æˆ·å­˜åœ¨äºç³»ç»Ÿä¸­)ã€‚å¦‚æœç”¨æˆ·å­˜åœ¨ï¼Œå¹¶ä¸”è¾“å…¥çš„å¯†ç æ˜¯æ­£ç¡®çš„ï¼Œé‚£ä¹ˆåº”ç”¨ç¨‹åºç»„ä»¶å°†å‘ˆç°å†…å®¹ç»„ä»¶ï¼Œä½†æ˜¯å¦‚æœç”¨æˆ·ä¸å­˜åœ¨ï¼Œåº”ç”¨ç¨‹åºå°†å‘ˆç°ç™»å½•ç»„ä»¶ï¼Œè¿™åŒæ ·é€‚ç”¨äºæ£€æŸ¥ç«™ç‚¹ä¸Šçš„ç”¨æˆ·æ˜¯å¦ä»ç„¶å…·æœ‰æœ‰æ•ˆçš„èº«ä»½éªŒè¯ã€‚è¯¥ç¤ºä¾‹å¯ä»¥ä½¿ç”¨é«˜é˜¶ç»„ä»¶æ¥æ‰§è¡Œã€‚ä½†æ˜¯å¦‚ä½•ï¼Œä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•ã€‚

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¿™æ ·çš„åº”ç”¨ç»„ä»¶

```
 import React, { Component } from 'react'

   //below is the app component that would render to the DOM
   export default class App extends Component {
     render() {
       return (
          <div>
            <h1> Hello world </h1>
          </div>
       )
     }
   } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¦åˆ›å»ºä¸€ä¸ªæ›´é«˜é˜¶çš„ç»„ä»¶æ¥æ‰§è¡Œæˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½ï¼Œå³æ ¹æ®ç”¨æˆ·ç™»å½•ä¼šè¯çš„çŠ¶æ€æ¥å†³å®šå‘ˆç°å“ªä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬é¦–å…ˆå¿…é¡»åˆ›å»ºä¸¤ä¸ªç»„ä»¶ã€‚

> è¯·æ³¨æ„ï¼Œä¸ºäº†ä½¿è¿™ä¸ªè§£é‡Šå°½å¯èƒ½ç®€å•ï¼Œæˆ‘å°†åœ¨ app.js æ–‡ä»¶ä¸­åˆ›å»ºæ‰€æœ‰ç»„ä»¶ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å°†åˆ©ç”¨åˆ›å»º-ååº”-åº”ç”¨ç¨‹åºï¼Œè¯·è®¾ç½®å®ƒ

ä¸‹é¢ï¼Œæˆ‘ä»¬å°†åˆ›å»ºç™»å½•å’Œå†…å®¹ç»„ä»¶ï¼Œè¿™ä¸¤ä¸ªç»„ä»¶å®é™…ä¸Šéƒ½æ˜¯è™šæ‹Ÿç»„ä»¶ï¼Œåªæ˜¯åœ¨ä¸€ä¸ª`h1`æ ‡ç­¾ä¸­è°ƒç”¨å®ƒä»¬çš„åå­—ã€‚

```
 import React, { Component } from 'react'

   // Login Component
   export default function Login {
      return (
         <div>
           <h1>Hi i'm login</h1>
         </div>
      )
   }

   //Content component
   export default function Content {
       return (
          <div>
            <h1>Hi i'm Content</h1>
          </div>
       )
   }

   //App component
   export default class App extends Component {
     render() {
       return (
          <div>
            //Add component to render here
          </div>
       )
     }
   } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ„å»ºå®Œå„ä¸ªç»„ä»¶åï¼Œæ˜¯æ—¶å€™åˆ›å»ºæˆ‘ä»¬çš„ HOC äº†ã€‚

> è¯·æ³¨æ„ï¼Œæ‚¨å¯ä»¥é€‰æ‹©åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­åˆ›å»ºå®ƒï¼Œä½†æ˜¯ä¸ºäº†ä½¿è¿™ç¯‡æ–‡ç« ç®€å•æ˜äº†ï¼Œæˆ‘å°†ä»ä¸€ä¸ªæ–‡ä»¶ä¸­åšæ‰€æœ‰çš„äº‹æƒ…ã€‚

å°†ä¸‹é¢çš„ä»£ç å¤åˆ¶å¹¶ç²˜è´´åˆ°ç´§æŒ¨ç€`Content`ç»„ä»¶çš„ä¸‹é¢å’Œ`App`ç»„ä»¶çš„å‰é¢ã€‚

```
 const withAuthentication = Component1 => Component2 =>
     class extends Component {
       constructor(props) {
         super(props);
         this.state = {
          isLoggedin: false,
         };
       }

       render(){
          if(this.state.isLoggedin) {
            return <Component1 />
          } else {
            return <Component2 />
          }

       } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸Šé¢æ˜¯æœ€ç®€å•çš„é«˜é˜¶ç»„ä»¶ã€‚

> æˆ‘ä»¬æ³¨æ„åˆ°`HOCs`æ˜¯å¦‚ä½•å‘½åçš„ï¼Œè¿™ä¸€ç‚¹è‡³å…³é‡è¦ï¼Œä¸€èˆ¬è®¤ä¸ºå®ƒä»¬æ˜¯ä»¥`with`å¼€å§‹å‘½åçš„ï¼Œç„¶åä¸ç®¡å®ƒä»¬çš„å…·ä½“å·¥ä½œæ˜¯ä»€ä¹ˆï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯èº«ä»½éªŒè¯ã€‚è¿™æ ·ï¼Œä»»ä½•çœ‹ä½ ä»£ç çš„äººä¸ç”¨çœ‹ä»£ç å°±çŸ¥é“å®ƒæ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œè¿™åœ¨`HOC`æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­æ—¶å°¤å…¶é‡è¦ã€‚

æ¥è§£é‡Šä»£ç ã€‚æˆ‘ä»¬ä½¿ç”¨ JavaScript ä¸­è¢«ç§°ä¸º`curring`çš„ä¸œè¥¿æ¥æ¥æ”¶æä¾›ç»™`HOC`çš„å‚æ•°ã€‚å½“æˆ‘ä»¬æŠŠè¿™ä¸¤ä¸ªå‚æ•°åŸæ ·ä¼ é€’ç»™`HOC`æ—¶ï¼Œæˆ‘ä»¬å°±æ˜¯è¿™æ ·åšçš„ï¼›`Component1 => Component2 =>`ï¼Œå®é™…ä¸Šç›¸å½“äºæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå¹¶ç»™å®ƒä¼ é€’äº†ä¸€ä¸ªå‚æ•°ï¼Œæ­£å¸¸çš„ Javascript æ–¹å¼ã€‚

å†å¾€ä¸‹ï¼ŒHOC è¿”å›ä¸€ä¸ªåŒ¿åç±»ï¼Œè¯¥ç±»æœ‰ä¸€ä¸ª state å¯¹è±¡ï¼ŒåŒ…å«äº†`isLoggedin`å±æ€§ï¼Œåœ¨å¼€å‘åº”ç”¨ç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œæ‚¨å¯ä»¥éšæ„æ“ä½œè¯¥å±æ€§ï¼Œä»¥ç¡®å®šç”¨æˆ·ä½•æ—¶ç™»å½•ï¼Œä½•æ—¶æœªç™»å½•ã€‚

è¿›ä¸€æ­¥æ·±å…¥åˆ°`render()`æ–¹æ³•ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªæ¡ä»¶æ¥æ£€æŸ¥`isLoggedin`çš„å€¼çš„çŠ¶æ€ï¼Œå› æ­¤æ— è®ºå€¼æ˜¯ä»€ä¹ˆï¼Œéƒ½åˆ†åˆ«è¿”å›ä¸€ä¸ªç»„ä»¶ã€‚

ç°åœ¨ï¼Œä½ è„‘æµ·ä¸­çš„é—®é¢˜å¾ˆæ˜æ˜¾æ˜¯ä½ å¦‚ä½•ä½¿ç”¨å®ƒã€‚å¯†åˆ‡æ³¨æ„ã€‚å°†ä¸‹é¢çš„ä»£ç ç›´æ¥å¤åˆ¶ç²˜è´´åˆ°æˆ‘ä»¬åˆšåˆšå†™çš„`HOC withAuthentication()`ä¸‹é¢ã€‚

```
 const DoAuthenticate = withAuthentication(Content, Login); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œé€šè¿‡å°†æˆ‘ä»¬çš„`HOC withAuthenticate`èµ‹å€¼ç»™å‡½æ•°`DoAuthenticate`ï¼Œæˆ‘ä»¬å°†åœ¨ HOC ä¸­è¿”å›çš„å‡½æ•°è®¾ç½®ä¸º`DoAuthenticate`ï¼Œä»å®ƒçš„åå­—æ¥çœ‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªç»„ä»¶ã€‚

> ç”±äºæˆ‘ä»¬çš„ HOC æ˜¯å¦‚ä½•ç»„ç»‡çš„ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿`Content`ç»„ä»¶åœç•™åœ¨`HOC`ä¸­çš„`Component1`ä½ç½®ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›å®ƒåœ¨ç”¨æˆ·ç™»å½•æ—¶è¿”å›ï¼Œå¹¶ä¸”`Login`ç»„ä»¶å æ®`HOC`ä¸­å®šä¹‰çš„`Component2`çš„ä½ç½®ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬ä¸å¿…è€ƒè™‘é€šè¿‡åº”ç”¨ç¨‹åºç»„ä»¶å°†å“ªä¸ªç»„ä»¶å‘ˆç°ç»™`DOM`ï¼Œæˆ‘ä»¬åªéœ€å‘ˆç°`DoAuthenticate`ï¼Œå¹¶è®©`HOC`ä¸ºæˆ‘ä»¬è€ƒè™‘ã€‚æœ€åï¼Œæˆ‘ä»¬çš„ä»£ç åº”è¯¥æ˜¯è¿™æ ·çš„ã€‚

```
 import React, { Component } from 'react'

   // Login Component
   export default function Login {
      return (
         <div>
           <h1>Hi i'm login</h1>
         </div>
      )
   }

   //Content component
   export default function Content {
       return (
          <div>
            <h1>Hi i'm Content</h1>
          </div>
       )
   }

   // Higher order Component
   const withAuthentication = Component1 => Component2 =>
     class extends Component {
       constructor(props) {
         super(props);
         this.state = {
          isLoggedin: false,
         };
       }

       render(){
          if(this.state.isLoggedin) {
            return <Component1 />
          } else {
            return <Component2 />
          }

       }

   const DoAuthenticate = withAuthentication(Content, Login);

   //App component
   export default class App extends Component {
     render() {
       return (
          <div>
            <DoAuthenticate />
          </div>
       )
     }
   } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> å­¦ä¹  HOCs å¯¹æˆ‘æ¥è¯´çœŸçš„å¾ˆæœ‰è¶£ï¼Œæˆ‘åœ¨ä¸€å‘¨å†…ç”³è¯·äº†ä¸¤ä¸ªåº”ç”¨ç¨‹åºï¼Œä»¥åŠ æ·±æˆ‘å¯¹å®ƒçš„ç†è§£ã€‚ä»¥ä¸‹æ˜¯åº”ç”¨ç¨‹åºçš„é“¾æ¥ã€‚

Instagram åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªå…‹éš†(è™½ç„¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„å…‹éš†...lol)å’Œ [LambdaTimeX](https://lambdatimex.netlify.com/) ã€‚ä¼šåœ¨è¯„è®ºåŒºåˆ é™¤ä»–ä»¬çš„å›å¤é“¾æ¥ã€‚

ä¸ºäº†åŠ æ·±ä½ çš„çŸ¥è¯†ï¼Œæˆ‘å»ºè®®ä½ è¯•è¯•è¿™ç¯‡ç”± [Sitepen](https://www.sitepen.com/blog/higher-order-components-in-react/) æ’°å†™çš„å…³äº HOCs çš„æ–‡ç« ã€‚ğŸ¥‚ğŸ¥‚ğŸ¥‚ğŸ¥‚