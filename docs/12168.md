# å­—ç¬¦ç¼–ç å¦‚ä½•æ‹¯æ•‘äº†æˆ‘

> åŽŸæ–‡ï¼š<https://dev.to/herocod3r/how-character-encoding-saved-me-3cef>

*String* æ•°æ®ç±»åž‹æ˜¯æ¯ä¸ªå¼€å‘äººå‘˜éƒ½ä½¿ç”¨çš„ä¸€ç§éžå¸¸åŸºæœ¬ä½†åˆéžå¸¸é‡è¦çš„æ•°æ®ç±»åž‹ï¼Œä½†æ˜¯ç”±äºŽå®ƒéžå¸¸å¸¸è§å’Œæ—¥å¸¸ä½¿ç”¨ï¼Œå¾ˆå®¹æ˜“å¿½ç•¥å®ƒå®žé™…ä¸Šæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šè¦æ„Ÿè°¢æˆ‘ä»¬ä»Šå¤©æ‹¥æœ‰çš„å¤§å¤šæ•°æ–°çš„çŽ°ä»£è¯­è¨€ï¼Œå®ƒä»¬ç»™äº†æˆ‘ä»¬*å­—ç¬¦ä¸²æ•°æ®ç±»åž‹*ã€‚

ç„¶è€Œï¼Œäº†è§£æˆ‘ä»¬ä½¿ç”¨çš„å¤§å¤šæ•°ä¸œè¥¿çš„å†…éƒ¨å·¥ä½œåŽŸç†æ˜¯ä¸€ä»¶éžå¸¸é‡è¦çš„äº‹æƒ…ï¼Œæˆ‘ä»¬æ°¸è¿œä¸çŸ¥é“å®ƒä¼šå¦‚ä½•åœ¨æŸä¸€å¤©ä¸ºæˆ‘ä»¬èŠ‚çœä»£ç è°ƒè¯•çš„æ—¶é—´ã€‚

æ‰€ä»¥æœ€è¿‘æˆ‘åœ¨åšä¸€ä¸ªé¡¹ç›®ï¼Œæ¶‰åŠåˆ°ä½¿ç”¨ *AES* åŠ å¯†ç®—æ³•çš„å¯†ç å­¦ï¼Œä½œä¸ºç³»ç»Ÿéœ€æ±‚çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘éœ€è¦ä½¿ç”¨ä¸¤ä¸ªå¯†é’¥å¯¹æ•°æ®è¿›è¡ŒåŒé‡åŠ å¯†ã€‚åƒå…¶ä»–å¼€å‘äººå‘˜ä¸€æ ·ï¼Œæˆ‘ç»§ç»­æœç´¢ï¼Œåœ¨çº¿å¤åˆ¶äº†ä¸€äº›ä»£ç ðŸ˜…ï¼Œç²˜è´´å®ƒï¼Œå½“ç„¶å®ƒçš„å·¥ä½œï¼Œæˆ–è€…æˆ‘è®¤ä¸º

å½“è¿›è¡Œæµ‹è¯•æ—¶ï¼Œæˆ‘å‘çŽ°ï¼Œå½“æˆ‘åŠ å¯†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶å¼€å§‹è§£å¯†å®ƒæ—¶ï¼Œæˆ‘å¾—åˆ°çš„æ•°æ®å¸¦æœ‰ä¸€äº›é¢å¤–çš„å¥‡æ€ªå­—ç¬¦ï¼Œè¿™å¯¼è‡´æˆ‘çš„ json åºåˆ—åŒ–ä»£ç ä¸­æ–­ã€‚

çŽ°åœ¨ï¼Œå›°éš¾çš„éƒ¨åˆ†ðŸ˜ªæˆ‘å¦‚ä½•ä»Žæˆ‘çš„è§£å¯†æ–¹æ³•ä¸­åˆ é™¤ä¸æƒ³è¦çš„å­—ç¬¦ï¼Œè¿™çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªå°é—®é¢˜ï¼Œä½†æˆ‘èŠ±äº† 3 å¤©æ—¶é—´æ¥æ€è€ƒè¿™ä¸ªé—®é¢˜ã€‚

ç»è¿‡ 3 å¤©çš„æœç´¢ï¼Œæˆ‘ç»ˆäºŽå¼€å§‹æ€€ç–‘è‡ªå·±çš„å­˜åœ¨å’Œäººç”Ÿé€‰æ‹©ðŸ˜‚ï¼Œæˆ‘å¶ç„¶å‘çŽ°äº† stackoverflow çš„ä¸€æ®µä»£ç ï¼Œ

```
 StringBuilder sb = new StringBuilder(s.Length);
            foreach(char c in s)
            {
                if((int)c > 127) // you probably don't want 127 either
                    continue;
                if((int)c < 32)  // I bet you don't want control characters 
                    continue;
                sb.Append(c);
            }
            return sb.ToString(); 
```

äº‹å®žè¯æ˜Žï¼Œç®€å•äº†è§£ä¸€ä¸‹*å­—ç¬¦ç¼–ç *å°±èƒ½è®©æˆ‘é¿å…å‡ ä¸ªå°æ—¶çš„ä¸çœ ä¹‹å¤œã€‚æ‹¯æ•‘æˆ‘çš„æ–¹æ³•å¾ˆç®€å•ï¼Œæ£€æŸ¥ç»„æˆå­—ç¬¦ä¸²çš„å­—ç¬¦ï¼Œæ ¹æ® ASCIIï¼Œä»»ä½•å°äºŽ 32 æˆ–å¤§äºŽ 127 çš„å­—ç¬¦ï¼Œåªéœ€ä¸¢å¼ƒã€‚

è‹±è¯­å­—æ¯è¡¨å’Œå…¶ä»–è¯­è¨€çš„æ¯ä¸ªå­—æ¯éƒ½ç”±å­—èŠ‚è¡¨ç¤ºï¼Œå¤šå¹´æ¥ï¼Œå·²ç»æœ‰äº†ä¸åŒçš„å­—ç¬¦ç¼–ç è§„èŒƒï¼Œè¿™äº›è§„èŒƒæŒ‡å¯¼äº†å­—æ¯çš„è¡¨ç¤ºï¼ŒUTF8ã€UTF16ã€UTF32ã€Unicode ç­‰ã€‚é€‚å½“äº†è§£å­—ç¬¦ç¼–ç ç±»åž‹å’Œä¸åŒçš„è§„èŒƒï¼Œå¯ä»¥è®©æ‚¨æž„å»ºæ›´å¥½çš„ç³»ç»Ÿï¼Œå°¤å…¶æ˜¯åœ¨è¯­è¨€é¢†åŸŸã€‚

### ä½ å¯ä»¥ä»Žä¸­äº†è§£æ›´å¤š

[å…³äºŽ string æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥çŸ¥é“çš„äº‹æƒ…](https://hackernoon.com/what-every-programmer-should-know-about-string-a6611537f84e)

æ¯ä¸ªè½¯ä»¶å¼€å‘äººå‘˜éƒ½å¿…é¡»ç»å¯¹ã€ç»å¯¹åœ°äº†è§£ Unicode å’Œå­—ç¬¦é›†(æ²¡æœ‰å€Ÿå£ï¼)