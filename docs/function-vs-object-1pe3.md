# åŠŸèƒ½ä¸å¯¹è±¡

> åŸæ–‡ï¼š<https://dev.to/stereobooster/function-vs-object-1pe3>

å…³äºé¢å‘å¯¹è±¡ç¼–ç¨‹(OOP)å’Œå‡½æ•°å¼ç¼–ç¨‹(FP)ä¹‹é—´çš„åŒºåˆ«æœ‰ä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„è®¨è®ºã€‚æˆ‘ä»¬æ¥è°ˆè°ˆç›¸ä¼¼ç‚¹ã€‚è®©æˆ‘ä»¬æ¥è°ˆè°ˆä¸»è¦çš„æ„å»ºæ¨¡å—:å‡½æ•°å’Œå¯¹è±¡ã€‚

å¦‚æœæˆ‘ä¸å·æ‡’ï¼Œè¿™å°†æ˜¯ä¸€ç³»åˆ—çš„èŒä½ã€‚

## ä»€ä¹ˆæ˜¯ç‰©ä½“ï¼Ÿ

æˆ‘è¯•å›¾æ‰¾åˆ°ä¸€ä¸ªå¥½çš„å®šä¹‰ï¼Œä½†æ˜¯è¿™æ¯”æˆ‘æƒ³è±¡çš„è¦éš¾å¾ˆå¤šèµ„æ–™éƒ½åœ¨è°ˆè®ºä»€ä¹ˆæ˜¯ OOPï¼Œä½†æ˜¯æ²¡æœ‰äººè´¹å¿ƒå»è§£é‡Šä»€ä¹ˆæ˜¯å¯¹è±¡ã€‚

è®©æˆ‘ä»¬ä» Java ä¸­çš„[å¯¹è±¡å®šä¹‰å¼€å§‹å§ï¼Œæˆ‘çŒœ:](https://docs.oracle.com/javase/tutorial/java/concepts/object.html)

> å¯¹è±¡æ˜¯ç†è§£é¢å‘å¯¹è±¡æŠ€æœ¯çš„å…³é”®ã€‚ç¯é¡¾å››å‘¨ï¼Œä½ ä¼šå‘ç°è®¸å¤šçœŸå®ä¸–ç•Œçš„ä¾‹å­:ä½ çš„ç‹—ï¼Œä½ çš„æ¡Œå­ï¼Œä½ çš„ç”µè§†æœºï¼Œä½ çš„è‡ªè¡Œè½¦ã€‚
> 
> ç°å®ä¸–ç•Œçš„å¯¹è±¡æœ‰ä¸¤ä¸ªå…±åŒçš„ç‰¹å¾:å®ƒä»¬éƒ½æœ‰çŠ¶æ€å’Œè¡Œä¸ºã€‚ç‹—æœ‰çŠ¶æ€(åå­—ã€é¢œè‰²ã€å“ç§ã€é¥¿ä¸é¥¿)å’Œè¡Œä¸º(å«ã€å¼ã€æ‘‡å°¾å·´)ã€‚è‡ªè¡Œè½¦ä¹Ÿæœ‰çŠ¶æ€(å½“å‰æ¡£ä½ã€å½“å‰è¸æ¿èŠ‚å¥ã€å½“å‰é€Ÿåº¦)å’Œè¡Œä¸º(æ¢æ¡£ä½ã€æ¢è¸æ¿èŠ‚å¥ã€è¸©åˆ¹è½¦)ã€‚è¯†åˆ«ç°å®ä¸–ç•Œå¯¹è±¡çš„çŠ¶æ€å’Œè¡Œä¸ºæ˜¯å¼€å§‹è€ƒè™‘é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ã€‚

ç›¸å½“å¹³æ˜“è¿‘äººçš„å®šä¹‰ã€‚æˆ‘å°†ç¨å¾®é‡æ–°æªè¾ä¸€ä¸‹ã€‚å¯¹è±¡æ˜¯ä¸€ç§çŠ¶æ€ï¼Œå¸¦æœ‰é™„åŠ åˆ°å…¶ä¸Šçš„è¡Œä¸ºã€‚

## ä»€ä¹ˆæ˜¯å‡½æ•°ï¼Ÿ

æˆ‘å†™äº†ä¸¤ç¯‡å…³äºå®ƒçš„æ–‡ç« :

*   [ç®€ä»‹:ä»å‡½æ•°åˆ°é—­åŒ…](https://stereobooster.com/posts/from-function-to-closure/)
*   [ä¸æ˜¯å‡½æ•°](https://stereobooster.com/posts/not-a-function/)

è®©æˆ‘ä»¬ç”¨ç®€åŒ–çš„å®šä¹‰(å’Œå¯¹è±¡å®šä¹‰ä¸€æ ·)å¹¶ä¸”è¯´åŠŸèƒ½æ˜¯ä¸€ç§è¡Œä¸º(ç²¾ç¡®çš„å®šä¹‰è§ä¸Šé¢çš„é“¾æ¥)ã€‚

åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œä»–ä»¬å–œæ¬¢å°†å‡½æ•°ä½œä¸ºå€¼æ¥ä¼ é€’ï¼Œä»¥ä¾¿èƒ½å¤Ÿå°†å‡½æ•°â€œè½¬æ¢â€æˆé—­åŒ…(è¿™é‡Œè½¬æ¢ä¸æ˜¯ä¸€ä¸ªç²¾ç¡®çš„è¯ï¼Œå› ä¸ºé—­åŒ…æ˜¯ä¸€ä¸ªå…·æœ‰è‡ªç”±å˜é‡çš„å‡½æ•°ï¼Œä½†æ˜¯è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€åŒ–çš„è§†å›¾æ¥çœ‹)ã€‚

ä»€ä¹ˆæ˜¯[é—­åŒ…](https://stereobooster.com/posts/demystify-closures/)(ç¼–ç¨‹è¯­è¨€ä¸­)ï¼Ÿ

> é—­åŒ…æ˜¯å…·æœ‰ä»£ç å’Œæ•°æ®ç»„ä»¶çš„æ•°æ®ç»“æ„ã€‚
> 
> - [é—­åŒ…è½¬æ¢:å¦‚ä½•ç¼–è¯‘ lambda](http://matt.might.net/articles/closure-conversion/)

æˆ‘å°†ç¨å¾®é‡æ–°æªè¾ä¸€ä¸‹ã€‚é—­åŒ…(æˆ–ä½œä¸ºå€¼çš„å‡½æ•°)æ˜¯ä¸€ç§å¸¦æœ‰çŠ¶æ€çš„è¡Œä¸ºã€‚(Stateï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯**ä¸å¯å˜**ã€‚æˆ‘å°†ä»»ä½•æ•°æ®ç§°ä¸ºçŠ¶æ€)

## ç­‰ä¸€ä¸‹ğŸ¤”

å†æ¬¡æ¯”è¾ƒè¿™ä¸¤ä¸ªå®šä¹‰:

*   å¯¹è±¡æ˜¯ä¸€ç§çŠ¶æ€ï¼Œå¸¦æœ‰é™„åŠ åˆ°å…¶ä¸Šçš„è¡Œä¸º
*   é—­åŒ…(æˆ–ä½œä¸ºå€¼çš„å‡½æ•°)æ˜¯ä¸€ä¸ªé™„åŠ äº†çŠ¶æ€çš„è¡Œä¸º

ä»–ä»¬ä¸æ˜¯ä¸€æ ·çš„å—ï¼Ÿ

### æˆ‘ä¸ä¿¡ã€‚ä½ çš„è¯æ®æ˜¯ä»€ä¹ˆï¼Ÿ

è®©æˆ‘ä»¬å†™ä¸€äº›ä»£ç ã€‚æˆ‘å°†ä½¿ç”¨ JavaScriptï¼Œå› ä¸ºå®ƒæ”¯æŒè¿™ä¸¤ç§èŒƒå¼ã€‚

```
class DogClass {
  #name;
  constructor(name) {
    this.#name = name;
  }
  bark() {
    return `${this.#name} is a good dog!`;
  }
}
const belka = new DogClass('Belka');
belka.bark(); 
```

*æ³¨æ„*:æœ¬ä¾‹ä½¿ç”¨[â€œJavaScript ç±»å­—æ®µå£°æ˜â€](https://github.com/tc39/proposal-class-fields#private-fields)å»ºè®®å£°æ˜ç§æœ‰å­—æ®µåç§°ã€‚ç›®å‰å¼ è´´çš„ä¾‹å­ä½œå“åœ¨é“¬ã€‚

```
const DogFunction = (name) => {
  return {
    bark: () => {
      return `${name} is a good dog!`;
    }
  }
}
const strelka = DogFunction('Strelka');
strelka.bark(); 
```

*æ³¨æ„*:å‡½æ•°è¿”å›è®°å½•æ•°æ®ç»“æ„(åœ¨ JS ä¸­ï¼Œè¿™ä¸ªæ•°æ®ç»“æ„è¢«å‘½åä¸ºâ€œObject â€,ä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ä»»ä½•â€œobjectyâ€ç‰¹æ€§ï¼Œæˆ‘ä»¬æŠŠå®ƒä½œä¸ºä¸€ä¸ªç®€å•çš„é”®å€¼æ•°æ®ç»“æ„)ã€‚å˜é‡`name`ç§æœ‰å­˜å‚¨åœ¨é—­åŒ…çš„ä½œç”¨åŸŸä¸­ï¼Œæ²¡æœ‰åŠæ³•åœ¨å¤–éƒ¨è®¿é—®å®ƒã€‚

## æ²¡æœ‰æ–°æ„

å¦‚æœä½ ä»”ç»†æƒ³æƒ³ï¼Œè¿™å¾ˆæœ‰æ„ä¹‰:æ‰€æœ‰çš„è®¡ç®—æœºéƒ½å¤„ç†çŠ¶æ€(æ•°æ®)å’Œè¡Œä¸ºã€‚è¿™ä¸ªæƒ³æ³•è¢«åå¤å‘ç°:

Lamport æ˜¯è¿™æ ·å®šä¹‰è®¡ç®—çš„:

> æœ‰å‡ ç§æ–¹æ³•æ¥å®šä¹‰è®¡ç®—ã€‚ç°åœ¨ï¼Œæˆ‘ä¸¾ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­:**è®¡ç®—æ˜¯ä¸€ç³»åˆ—çš„æ­¥éª¤ï¼Œæˆ‘ç§°ä¹‹ä¸ºè¡Œä¸º**ã€‚ä¸€ä¸ªæ­¥éª¤æœ‰ä¸‰ç§å¸¸è§çš„é€‰æ‹©ï¼Œå¯¼è‡´**ä¸‰ç§ä¸åŒçš„è¡Œä¸º**:
> 
> *   **åŠ¨ä½œè¡Œä¸º**ã€‚æ­¥éª¤æ˜¯ä¸€ä¸ªåŠ¨ä½œï¼Œå®ƒåªæ˜¯ä¸€ç»„åŠ¨ä½œä¸­çš„ä¸€ä¸ªå…ƒç´ ã€‚åŠ¨ä½œè¡Œä¸ºæ˜¯ä¸€ç³»åˆ—åŠ¨ä½œã€‚
> *   **çŠ¶æ€è¡Œä¸º**ã€‚ä¸€ä¸ªæ­¥éª¤æ˜¯ä¸€å¯¹`(s, t)`çŠ¶æ€ï¼Œå…¶ä¸­ä¸€ä¸ªçŠ¶æ€æ˜¯æŸç»„çŠ¶æ€çš„ä¸€ä¸ªå…ƒç´ ã€‚çŠ¶æ€è¡Œä¸ºæ˜¯çŠ¶æ€çš„åºåˆ—`s1 â†’ s2 â†’ s3 â†’ Â· Â· Â·`ã€‚æ­¥éª¤`(si, si+1)`ä»£è¡¨ä»çŠ¶æ€`si`åˆ°çŠ¶æ€`si+1`çš„è½¬æ¢ã€‚
> *   **çŠ¶æ€-åŠ¨ä½œè¡Œä¸º**ã€‚ä¸€ä¸ªæ­¥éª¤æ˜¯ä¸€ä¸ªä¸‰å…ƒç»„`(s, Î±, ti)`ï¼Œå…¶ä¸­`s`å’Œ`t`æ˜¯çŠ¶æ€ï¼Œ`Î±`æ˜¯åŠ¨ä½œã€‚å›½å®¶è¡Œä¸ºæ˜¯ä¸€ä¸ªåºåˆ—`s1 -Î±1â†’ s2 -Î±2â†’ s3 -Î±3â†’ Â· Â· Â·`ã€‚æ­¥éª¤`(si, Î±i, si+1)`è¡¨ç¤ºç”±åŠ¨ä½œ`Î±i`æ‰§è¡Œçš„ä»çŠ¶æ€`si`åˆ°çŠ¶æ€`si+1`çš„è½¬å˜ã€‚
> 
> - [è®¡ç®—å’ŒçŠ¶æ€æœº](https://lamport.azurewebsites.net/pubs/state-machine.pdf)ã€‚è±æ–¯åˆ©Â·å…°æ³¢ç‰¹ï¼Œ2008 å¹´ 4 æœˆ 19 æ—¥

æ²ƒæ€å†™è¿‡ã€Šç®—æ³•+æ•°æ®ç»“æ„=ç¨‹åºã€‹è¿™æœ¬ä¹¦ã€‚

Ray Toal å†™è¿‡å…³äºç±»å‹çš„æ–‡ç« :ä¸€ä¸ªç±»å‹ç”±ä¸€ç»„å€¼å’Œä¸€ç»„å…è®¸çš„æ“ä½œç»„æˆã€‚

## PS

æˆ‘ä»¬æ²¡æœ‰è§¦åŠçš„é—®é¢˜æ˜¯ä¸€ä¸ªçªå˜ã€‚åœ¨â€œçº¯â€FP ä¸­ï¼Œçªå˜æ˜¯ä¸å…è®¸çš„ã€‚åœ¨ OOP ä¸­å®ƒä»¬æ˜¯è¢«å…è®¸çš„ã€‚å½“æˆ‘è¯´çº¯çš„æ—¶å€™ï¼Œæˆ‘æŒ‡çš„æ˜¯å¸¦æœ‰æƒ°æ€§æ±‚å€¼å’Œ IO monad çš„ lambda æ¼”ç®—ï¼Œè¿™æ˜¯ä¸€ä¸ªç‹­çª„çš„é¢†åŸŸ`Â¯\_(ãƒ„)_/Â¯`ã€‚

> ç…§ç‰‡ç”± unsplash ä¸Šçš„ norwood themes æ‹æ‘„