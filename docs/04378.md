# åœ¨ Angularã€Typescriptã€Javascript ä¸­æ·±åº¦å…‹éš†å¯¹è±¡

> åŸæ–‡:[https://dev . to/leonel ngand/deep-cloning-objects-in-angular-typescript-JavaScript-1 ome](https://dev.to/leonelngande/deep-cloning-objects-in-angular-typescript-javascript-1ome)

Javascript ä¸­å…‹éš†å¯¹è±¡çš„ä¸€äº›æŠ€æœ¯è¦ä¹ˆä½¿ç”¨[å¯¹è±¡ææ„](https://javascript.info/destructuring-assignment)ï¼Œè¦ä¹ˆç»“åˆä½¿ç”¨ [JSON.stringify()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify) å’Œ [JSON.parse()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse) ã€‚

```
const objectA = { foo: { bar: 'baz' } }; // initial value of objectA
const cloneOfObjectA = {...objectA}; // objectA destructured to create cloneOfObjectA

const objectB = { foo: { bar: 'baz' } }; // initial value of objectB
const cloneOfObjectB = JSON.parse(JSON.stringify(objectB)); // create a clone of objectB using JSON.parse() and JSON.stringify() 
```

å¦‚æœä½ æƒ³æ·±åº¦å…‹éš†ä½ çš„å¯¹è±¡ï¼Œä¸Šé¢çš„æ¯ç§æ–¹æ³•éƒ½æœ‰å±€é™æ€§ã€‚

ä½¿ç”¨å¯¹è±¡`const a = {...b}`çš„æ‰©å±•æ“ä½œç¬¦(å³ Object.assign)è¿›è¡Œå¯¹è±¡ææ„åªä¼šå¯¹é‚£äº›å¯¹è±¡è¿›è¡Œæµ…å±‚å¤åˆ¶ï¼ŒåŒæ—¶ä½¿ç”¨ JSON æ–¹æ³•ä¼šè½¬å‚¨åŸå‹é“¾å’Œå¯¹è±¡ä¸Šçš„ä»»ä½•æ–¹æ³•(æ›´å¤š[æ­¤å¤„](http://www.zsoltnagy.eu/cloning-objects-in-javascript/))ã€‚

æˆ‘ç›®å‰æ­£åœ¨å­¦ä¹  Pluralsight ä¸Šçš„[Angular Architecture and Best Practices](https://www.pluralsight.com/courses/angular-architecture-best-practices)è¯¾ç¨‹ï¼Œ [@DanWahlin](https://twitter.com/DanWahlin) (å®ƒçš„ä½œè€…)æåˆ°äº†ä¸€ä¸ªéå¸¸é…·çš„è½»é‡çº§åº“æ¥å®ç°è¿™ä¸€ç‚¹:[å…‹éš†](https://github.com/pvorb/clone)ã€‚

å®ƒæä¾›äº†å¯¹è±¡ã€æ•°ç»„ã€æ•°å­—ã€å­—ç¬¦ä¸²ã€åœ°å›¾ã€é›†åˆã€æ‰¿è¯ºç­‰ç®€å•çš„æ·±åº¦å…‹éš†ã€‚åœ¨ JavaScript ä¸­ï¼Œæœ‰ 0 ä¸ªä¾èµ–é¡¹ï¼Œåœ¨æ’°å†™æœ¬æ–‡æ—¶æœ‰è¶…è¿‡ 6.07 äº¿æ¬¡ä¸‹è½½ï¼

è¦å®‰è£…å®ƒï¼Œåªéœ€è¿è¡Œ`npm install clone`ï¼ŒæŒ‰ç…§[è‡ªè¿°æ–‡ä»¶](https://github.com/pvorb/clone)è·å–æ›´å¤šä½¿ç”¨è¯´æ˜ğŸ™‚ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªåœ¨ä½¿ç”¨ Angular å’Œ Typescript æ—¶ç”¨äºåº“çš„åŒ…è£…å™¨æœåŠ¡:

```
import {Injectable} from '@angular/core';
import * as clone from 'clone';

@Injectable({providedIn: 'root'})
export class ClonerService {

    deepClone<T>(value): T {
        return clone<T>(value);
    }

} 
```

è¿˜æœ‰ä¸€ä¸ª(ç›¸å½“çç¢çš„)ç”¨æ³•ç¤ºä¾‹:

```
 const objectA = { foo: { bar: 'baz' } }; // initial value of objectA
    constructor(private clonerService: ClonerService) {
        const cloneOfObjectA = this.clonerService.deepClone(this.objectA);
    } 
```

å¸Œæœ›è¿™æœ‰åŠ©äºä½ æ·±å…¥çš„å…‹éš†å†’é™©ï¼Œå¿«ä¹ç¼–ç ï¼