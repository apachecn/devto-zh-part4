# Javascript é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡â€”â€”ä½¿ç”¨ CPU çš„ç©ºé—²æ—¶é—´

> åŸæ–‡ï¼š<https://dev.to/canastro/javascript-long-running-tasks-use-cpu-s-idle-periods-58g2>

ä¸ºäº†æä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒï¼Œæµè§ˆå™¨éœ€è¦èƒ½å¤Ÿæ¯ç§’æ¸²æŸ“ 60 å¸§ï¼Œè¿™æ„å‘³ç€æ¯ 16 æ¯«ç§’æ¸²æŸ“ä¸€å¸§ã€‚å¦‚æœæ‚¨æœ‰é•¿æ—¶é—´è¿è¡Œçš„ javascript ä»»åŠ¡ï¼Œé‚£ä¹ˆæ‚¨å°†å¼€å§‹ä¸¢å¸§ï¼Œå¦‚æœç”¨æˆ·æ»šåŠ¨æˆ–æ¸²æŸ“åŠ¨ç”»ï¼Œè¿™å°†å¾ˆæ˜æ˜¾ã€‚

æœ‰ä¸€äº›æŠ€æœ¯å¯ä»¥é¿å…ç¯¡æ”¹ UIï¼Œæœ€å¸¸è§çš„ä¸€ç§æ˜¯å°†è¿™æ ·çš„ä»»åŠ¡è½¬ç§»ç»™ Web å·¥ä½œè€…ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ç ”ç©¶ä¸€ç§ä¸åŒçš„æ–¹æ³•:å¦‚ä½•å°†å·¥ä½œåˆ†æˆå—ï¼Œå¹¶åˆ©ç”¨ CPU çš„ç©ºé—²æ—¶é—´æ¥å¤„ç†å®ƒä»¬ã€‚React çš„å›¢é˜Ÿåœ¨ä»–ä»¬çš„ fiber æ¶æ„ä¸­ä½¿ç”¨äº†è¿™ç§æŠ€æœ¯:æ ‘çš„åè°ƒå¯ä»¥è¢«ä¸­æ–­ï¼Œä»¥ä¾¿ä¸ºæ›´ä¼˜å…ˆçš„å·¥ä½œè®©è·¯ï¼Œä»è€Œæé«˜ç”¨æˆ·çš„[æ„ŸçŸ¥æ€§èƒ½](https://blog.teamtreehouse.com/perceived-performance)ã€‚

æ³¨æ„:è¿™ç¯‡æ–‡ç« ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½å—åˆ° react çš„çº¤ç¨‹æ¶æ„çš„æå¤§å¯å‘(ä½†æ˜¯æ˜¯ä»¥ä¸€ç§éå¸¸ç®€åŒ–çš„æ–¹å¼)ã€‚å¦‚æœæ‚¨è·³è½¬åˆ°å‚è€ƒèµ„æ–™éƒ¨åˆ†ï¼Œæ‚¨å°†è·å¾—ä¸€äº›å¯ä»¥å¸®åŠ©æ‚¨å¼„æ¸…æ¥š react å¦‚ä½•å·¥ä½œçš„èµ„æºã€‚

## æµ‹è¯•ç”¨ä¾‹

åŒ…å« 100 000 ä¸ªèŠ‚ç‚¹çš„åˆ—è¡¨ï¼Œå…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼æ˜¯æ ¹æ®å‰ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼è®¡ç®—çš„â€”â€”å½“ç”¨æˆ·æ›´æ”¹ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå¿…é¡»é‡æ–°è®¡ç®—è¯¥é“¾ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œä»è€Œäº§ç”Ÿ 99 999 ä¸ªæ‰§è¡Œåˆ†å—è®¡ç®—çš„èŠ‚ç‚¹ã€‚

æœ‰ä¸€ä¸ªèŠ‚ç‚¹å¦‚ä¸‹ç•Œé¢:

```
interface INode {
    id: string;
    value: number | null;
    previousId: string | null;
    nextId: string | null;
} 
```

åˆ›å»ºèŠ‚ç‚¹å›¾:

```
const nodes = new Map<INode>();
nodes.set('A1', {
  id: 'A1',
  nextId: 'A2',
  previousId: null,
  value: 99
});
nodes.set('A2', {
  id: 'A2',
  nextId: 'A3',
  previousId: 'A1',
  value: null
});

...

nodes.set('A100000', {
  id: 'A100000',
  nextId: null,
  previousId: 'A99999',
  value: null
}); 
```

## è¦æ±‚

æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆåº”æ”¯æŒä»¥ä¸‹è¦æ±‚:

*   æ²¡æœ‰ä¸¢å¸§ï¼Œç½‘é¡µåº”è¯¥éšæ—¶å“åº”
*   å¤„ç†åº”è¯¥æ˜¯å¯ä¸­æ–­çš„(å› ä¸ºå¼•å…¥äº†æ–°æ•°æ®æˆ–è€…ç”¨æˆ·æƒ³è¦ç¦»å¼€é¡µé¢)
*   åœ¨ç»™å®šå‰é¢çš„çº¦æŸæ¡ä»¶ä¸‹ï¼Œåº”è¯¥å°½å¯èƒ½å¿«(å¦‚æœæˆ‘ä»¬å°†æ‰§è¡Œåˆ†å‰²æˆå—ï¼Œå¤„ç†æ—¶é—´ä¼šç¨é•¿ï¼Œä½†é¡µé¢ä¼šæœ‰å“åº”ï¼Œå› æ­¤æ„Ÿè§‰æ€§èƒ½ä¼šæ›´å¥½)

## å¦‚ä½•è¡¡é‡æˆ‘ä»¬æ–¹æ³•çš„è´¨é‡ï¼Ÿ

*   åˆ›å»ºä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åº-æˆ‘å°†ä½¿ç”¨ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸åˆ›å»ºååº”åº”ç”¨ç¨‹åºï¼›
*   æ·»åŠ ä¸€ä¸ªå¯æ»šåŠ¨åŒºï¼Œå’Œä¸€äº›èƒ½å¤Ÿæµ‹è¯•ç”¨æˆ·äº¤äº’çš„åŠ¨ç”»ï¼›
*   ä½¿ç”¨[async-render-toolbox](https://github.com/sw-yx/async-render-toolbox)chrome æ‰©å±•è·å¾— CPU å»¶è¿Ÿçš„å¯è§†åŒ–æç¤ºï¼›
*   ä½¿ç”¨ devtools è¿›è¡Œä¸€äº›é¢å¤–çš„æ€§èƒ½æ£€æŸ¥ï¼›

æ˜¯çš„ï¼Œè¿™ä¸å¤ªç§‘å­¦...ä½†æˆ‘ä»¬çœŸæ­£æƒ³æ”¹å–„çš„æ˜¯å¯æ„ŸçŸ¥çš„æ€§èƒ½ï¼Œè¿™æ›´å¤šçš„æ˜¯ä¸€ç§æ„Ÿå®˜ä½“éªŒã€‚

## ä½¿ç”¨ CPU çš„ç©ºé—²å‘¨æœŸ

> [window . requestidlecallback()](https://developer.mozilla.org/en-US/docs/Web/API/Window/requestIdleCallback)æ–¹æ³•å°†åœ¨æµè§ˆå™¨ç©ºé—²æœŸé—´è°ƒç”¨çš„å‡½æ•°æ’é˜Ÿã€‚è¿™ä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿåœ¨ä¸»äº‹ä»¶å¾ªç¯ä¸Šæ‰§è¡Œåå°å’Œä½ä¼˜å…ˆçº§å·¥ä½œï¼Œè€Œä¸ä¼šå½±å“å»¶è¿Ÿå…³é”®äº‹ä»¶ï¼Œå¦‚åŠ¨ç”»å’Œè¾“å…¥å“åº”ã€‚å‡½æ•°ä¸€èˆ¬æŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„é¡ºåºè°ƒç”¨ï¼›ä½†æ˜¯ï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥æ— åºè°ƒç”¨æŒ‡å®šäº†è¶…æ—¶çš„å›è°ƒï¼Œä»¥ä¾¿åœ¨è¶…æ—¶ä¹‹å‰è¿è¡Œå®ƒä»¬ã€‚

é€šè¿‡è°ƒç”¨ requestIdleCallbackï¼Œæˆ‘ä»¬ä¸ºä¸‹ä¸€ä¸ª CPU ç©ºé—²å‘¨æœŸå®‰æ’ä¸€ä¸ªå›è°ƒã€‚åœ¨é‚£ä¸ªå›è°ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨`deadline.timeRemaining()`æ¥æ£€æŸ¥åœ¨ç©ºé—²æœŸç»“æŸä¹‹å‰æˆ‘ä»¬è¿˜å‰©å¤šé•¿æ—¶é—´ã€‚ç©ºé—²æ—¶é—´çš„æœ€å¤§å€¼æ˜¯ 50 æ¯«ç§’ï¼Œä½†æ˜¯å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬å¾—åˆ°çš„æ—¶é—´ä¼šæ¯”è¿™å°‘ï¼Œè¿™å–å†³äº CPU æœ‰å¤šå¿™ã€‚

ä½¿ç”¨å‰©ä½™æ—¶é—´å’Œæ¯æ¬¡è®¡ç®—çš„æ’å®šæœ€å¤§æ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥æˆ‘ä»¬æ˜¯å¦æœ‰ç©ºé—²æ—¶é—´æ¥è¿›è¡Œä¸€æ¬¡è®¡ç®—æˆ–é‡æ–°å®‰æ’åˆ°ä¸‹ä¸€ä¸ªç©ºé—²å‘¨æœŸã€‚æˆ‘ä»¬å°†å®‰æ’ä¸€ä¸ªæ–°çš„å›è°ƒï¼Œç›´åˆ°ä¸å†æœ‰ä»»åŠ¡è¦æ‰§è¡Œã€‚é€šè¿‡ä»¥è¿™ç§æ–¹å¼å¤„ç†æˆ‘ä»¬çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ç¡®ä¿ä¸ä¼šä¸­æ–­å»¶è¿Ÿå…³é”®äº‹ä»¶ï¼Œå¹¶æä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚

## å®‰æ’å·¥ä½œ

å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº† CPU çš„ç©ºé—²æ—¶é—´ï¼Œæ‰€ä»¥ç”¨æˆ·å¯ä»¥éšæ—¶ä¸é¡µé¢äº¤äº’å¹¶å®‰æ’æ–°çš„å·¥ä½œã€‚è¿™æ„å‘³ç€æˆ‘ä»¬åº”è¯¥ä¿ç•™ä¸€ä¸ªæœªå®Œæˆå·¥ä½œçš„é˜Ÿåˆ—ã€‚

å¦‚æœæ­£åœ¨å¤„ç†ä¸€ä¸ªç»™å®šçš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”ä¸ºè¯¥èŠ‚ç‚¹å®‰æ’äº†ä¸€ä¸ªæ–°çš„å·¥ä½œï¼Œæˆ‘ä»¬åº”è¯¥ä¸­æ­¢å½“å‰çš„å·¥ä½œï¼Œå¹¶å°†è¯¥èŠ‚ç‚¹å†æ¬¡æ¨åˆ°é˜Ÿåˆ—çš„æœ«å°¾:

```
interface IUnitOfWork {
    triggerNodeId: string;
    node: INode;
}

let workQueue: INode[] = [];
let nextUnitOfWork: IUnitOfWork | null = null;

function scheduleWork(node: INode): void {
    /**
     * Verify if there is already a work being
     * process that was triggered by the same node
     */
    const isInProgress = nextUnitOfWork && nextUnitOfWork.triggerNodeId === node.id;

    if (isInProgress) {
        nextUnitOfWork = null;
    }
    workQueue.push(node);

    requestIdleCallback(performWork);
} 
```

æˆ‘ä»¬çš„æ–¹æ³•åŸºäº CPU çš„å¯ç”¨æ—¶é—´ï¼Œä½†æ˜¯æˆ‘ä»¬å¦‚ä½•çŸ¥é“å¯ç”¨æ—¶é—´è¶³å¤Ÿå®Œæˆä¸€ä¸ªå•ä½çš„å·¥ä½œå‘¢ï¼Ÿå¥½å§ï¼Œé‚£æ˜¯ä¸€å—æ€æƒ³é¥¼å¹²ï¼ç›®å‰è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ˜¯å‡è®¾æˆ‘ä»¬é€šå¸¸å¤„ç†æ¯ä¸ªå·¥ä½œå•å…ƒæ‰€èŠ±è´¹çš„ä¸­é—´æ—¶é—´ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ä¸€ä¸ªå¸¸é‡`ENOUGH_TIME`ä¸­ã€‚è¿™å°†éœ€è¦è°ƒæ•´ï¼Œè¿™å°†æ˜¯éå¸¸å…·ä½“çš„å·¥ä½œï¼Œä½ å¿…é¡»åœ¨ä½ çš„åº”ç”¨ç¨‹åºã€‚

```
const ENOUGH_TIME = 2; // in ms 
```

æ­£å¦‚æˆ‘ä»¬åœ¨å‰é¢çš„ä»£ç ç‰‡æ®µä¸­çœ‹åˆ°çš„ï¼Œå½“æˆ‘ä»¬å®‰æ’å·¥ä½œæ—¶ï¼Œæˆ‘ä»¬è°ƒç”¨äº†`requestIdleCallback`ï¼Œè¿™å°†æœ€ç»ˆè°ƒç”¨æˆ‘ä»¬çš„`performWork`å‡½æ•°ã€‚åœ¨è¿™ä¸ªåŠŸèƒ½ä¸­ï¼Œæˆ‘ä»¬å¯åŠ¨`workLoop`ã€‚

`workLoop`è·å–ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒï¼Œå¦‚æœæ²¡æœ‰ï¼Œå®ƒä»å·¥ä½œé˜Ÿåˆ—ä¸­é€‰å–ä¸€ä¸ªæ–°èŠ‚ç‚¹ã€‚å¹¶å¼€å§‹åœ¨ while å¾ªç¯ä¸­è°ƒç”¨æˆ‘ä»¬çš„`performUnitOfWork`å‡½æ•°ï¼Œç›´åˆ°æˆ‘ä»¬åˆ°è¾¾ä¸€ä¸ªæˆ‘ä»¬è®¤ä¸ºæ²¡æœ‰å‰©ä½™æ—¶é—´æˆ–è€…æ²¡æœ‰æ›´å¤šå·¥ä½œå•å…ƒçš„ç‚¹ã€‚`performUnitOfWork`æ˜¯å¤„ç†æ¯ä¸ªèŠ‚ç‚¹çš„å‡½æ•°(è¿™é‡Œä¸è¯¦ç»†ä»‹ç»è¿™ä¸ªå‡½æ•°ï¼Œå› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ä¸»è¦æ˜¯è™šæ‹Ÿè®¡ç®—)ã€‚

ä¸€æ—¦`workLoop`å®Œæˆï¼Œæˆ‘ä»¬å°±è¿”å›åˆ°`performLoop`å‡½æ•°ï¼Œå¦‚æœåœ¨å·¥ä½œé˜Ÿåˆ—ä¸­è¿˜æœ‰ä¸€ä¸ª nextUnitOfWork æˆ–ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è°ƒåº¦ä¸€ä¸ªæ–°çš„ç©ºé—²å›è°ƒå¹¶é‡æ–°å¼€å§‹è¿™ä¸ªè¿‡ç¨‹ã€‚

```
function resetNextUnitOfWork() {
    const node = workQueue.shift();
    if (!node) return;

    nextUnitOfWork = { triggerNodeId: node.id, node };
}

function workLoop(deadline: number): void {
    if (!nextUnitOfWork) {
        resetNextUnitOfWork();
    }

    while (nextUnitOfWork && deadline.timeRemaining() > ENOUGH_TIME) {
        nextUnitOfWork = performUnitOfWork(nextUnitOfWork);
    }
}

function performWork(deadline: number): void {
    workLoop(deadline);

    if (nextUnitOfWork || workQueue.length > 0) {
        requestIdleCallback(performWork);
    }
} 
```

## ç»“æœ

å—è¿­ä»£æ–¹æ³•æ‰§è¡Œèµ·æ¥æ›´å¿«ï¼Œä½†æ˜¯ï¼Œæ­£å¦‚åœ¨ä¸‹ä¸€å¼  gif ä¸­çœ‹åˆ°çš„ï¼Œå®ƒæœ‰å¾ˆå¤šä¸¢å¸§ã€‚è¯¥é¡µé¢å°†æœ‰ä¸€æ®µæ—¶é—´æ²¡æœ‰å“åº”:

[![Regular version shows periods of janking UI](img/12184ea84efc33d01449ecc975388b64.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--iY6y7X5i--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/jda9ldxexdfq8v39iccg.gif)

ç©ºé—²å›è°ƒæ–¹æ³•éœ€è¦æ›´é•¿çš„æ—¶é—´æ¥æ‰§è¡Œï¼Œå®ƒçš„æ‰§è¡Œæ—¶é—´æ˜¯ä¸å¯é¢„æµ‹çš„ï¼Œå› ä¸ºå®ƒå–å†³äº CPU çš„ç¹å¿™ç¨‹åº¦ï¼Œä½†æ˜¯é¡µé¢åœ¨ä»»ä½•æ—¶å€™éƒ½æ˜¯å“åº”æ€§çš„ï¼Œå› æ­¤æ„Ÿè§‰åˆ°çš„æ€§èƒ½å¯èƒ½ä¼šå¥½å¾—å¤š:

[![Version using idle periods does not show perceivable janking periods](img/251ed33801df3839d09a7a645d17b370.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Gxf97QaO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/po045th4z8ybj4adthyl.gif)

æŸ¥çœ‹[è¿™ä¸ªè§†é¢‘](https://github.com/canastro/blog-offload-computation/raw/master/idle-vs-normal.mp4)ä»¥æŸ¥çœ‹æ’°å†™æœ¬æ–‡æ—¶åˆ›å»ºçš„ç¤ºä¾‹çš„è¾“å‡ºç»“æœã€‚

## ç»“è®º

åœ¨è¿™ä¸ªç‹¬ç«‹çš„æµ‹è¯•ä¸­ï¼Œå¸¦æœ‰ **requestIdleCallback** çš„æ–¹æ³•ä¼¼ä¹æ£€æŸ¥äº†æˆ‘ä»¬çš„éœ€æ±‚ã€‚

å¦‚æœæˆ‘ä»¬å¤„ç† 100 ä¸ª calcssï¼Œidle çš„æ‰§è¡Œæ—¶é—´ä¸å¸¸è§„çš„é˜»å¡æ“ä½œç›¸å·®ä¸å¤§ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å¤„ç† 100 000 ä¸ª calcï¼Œidle æ–¹æ³•å°†èŠ±è´¹æ›´é•¿çš„æ—¶é—´ï¼Œä½†æ˜¯æ›´å¹³æ»‘ã€‚è¿™æ˜¯ä¸€ä¸ªæƒè¡¡ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºè¿™æ˜¯å€¼å¾—çš„ã€‚

ä¸è¿‡ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ[æµè§ˆå™¨æ”¯æŒ](https://caniuse.com/#search=requestIdle)è¿˜ä¸å¤Ÿç†æƒ³...IE Edge å’Œ safari éƒ½ä¸æ”¯æŒå®ƒ...æ€»æ˜¯é‚£ä¸¤ä¸ªï¼Œå¯¹å—ï¼ŸğŸ˜æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥å¡«è¡¥å®ƒï¼Œæ¯”å¦‚è¿™ä¸ªç®€å•çš„[è¦ç‚¹](https://gist.github.com/paullewis/55efe5d6f05434a96c36)å’Œ[ååº”çš„æ–¹æ³•](https://github.com/facebook/react/blob/master/packages/scheduler/src/Scheduler.js#L415)ï¼Œè¿™æ˜¯ä¸€ä¸ªæ›´åŠ å¤æ‚å’Œå¥å£®çš„æ–¹æ³•ã€‚

ä½†æ˜¯ï¼Œæœ‰å‡ ä¸ªä¸»é¢˜éœ€è¦è¿›ä¸€æ­¥æ¢è®¨:

*   è¿™ä¸ react çš„è°ƒåº¦ç¨‹åºé›†æˆå¾—å¦‚ä½•ï¼Ÿ
*   æ ¹æ® [@sebmarkbage](https://twitter.com/sebmarkbage/status/822881464794497024) çš„è¯´æ³•ï¼Œå¤§å¤šæ•° requestIdleCallback å«ç‰‡å¹¶æ²¡æœ‰å‡†ç¡®åœ°è¡¨ç¤º requestIdleCallback åº”è¯¥åšä»€ä¹ˆã€‚æˆ‘ä»¬èƒ½æ‰¾åˆ°ä¸€ä¸ªå¥½çš„å«ç‰‡æˆ–è€…ç”šè‡³ä½¿ç”¨ react ä½¿ç”¨çš„å«ç‰‡å—ï¼Ÿ
*   è¿™ä¸ä½¿ç”¨ webworkers(æˆ–å…¶ä»–å¯èƒ½çš„æ–¹æ³•)ç›¸æ¯”å¦‚ä½•ï¼Ÿ-å¸Œæœ›èƒ½åœ¨ä»¥åçš„æ–‡ç« ä¸­å›ç­”è¿™ä¸ªé—®é¢˜ã€‚

## èµ„æº

*   [Github repo ä¸æœ¬æ–‡ç»™å‡ºçš„ä»£ç ](https://github.com/canastro/blog-offload-computation)
*   [Udacity ç”± Google æä¾›çš„â€œæµè§ˆå™¨æ¸²æŸ“ä¼˜åŒ–â€è¯¾ç¨‹](https://www.udacity.com/course/browser-rendering-optimization--ud860)
*   [æ„ŸçŸ¥ç»©æ•ˆ](https://blog.teamtreehouse.com/perceived-performance)
*   [çº¤ç»´åŸç†:æœ‰åŠ©äºçº¤ç»´](https://github.com/facebook/react/issues/7942)
*   [React åœ¨çº¤ç¨‹ä¸­ä½¿ç”¨é“¾è¡¨éå†ç»„ä»¶æ ‘çš„æ–¹å¼å’ŒåŸå› ](https://medium.com/react-in-depth/the-how-and-why-on-reacts-usage-of-linked-list-in-fiber-67f1014d0eb7)
*   [ä½¿ç”¨ requestIdleCallback](https://developers.google.com/web/updates/2015/08/using-requestidlecallback)

***å…è´£å£°æ˜:**è§‚ç‚¹ä»…ä»£è¡¨æˆ‘ä¸ªäººï¼Œä¸ä»£è¡¨æˆ‘é›‡ä¸»çš„è§‚ç‚¹ã€‚*

å¦‚æœä½ å‘ç°ä»»ä½•é”™è¯¯ï¼Œæ— è®ºæ˜¯æˆ‘ç³Ÿç³•çš„è‹±è¯­è¿˜æ˜¯ä»»ä½•æŠ€æœ¯ç»†èŠ‚ï¼Œè¯·ä¸è¦å®³ç¾ï¼Œåœ¨æ¨ç‰¹ä¸Šå‘Šè¯‰æˆ‘ã€‚æˆ‘ä¼šåŠªåŠ›ä¸æ–­æ”¹è¿›è¿™ç¯‡åšæ–‡ :simple_smile: