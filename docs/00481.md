# å‘æ‚¨çš„ Gatsby å¸–å­æ·»åŠ å‘å¸ƒå­—æ®µä»¥æ§åˆ¶å…¶å¯è§æ€§

> åŸæ–‡:[https://dev . to/mercantate/add-a-published-field-to-your-Gatsby-posts-to-control-they-visibility-1j3o](https://dev.to/mercatante/add-a-published-field-to-your-gatsby-posts-to-control-their-visibility-1j3o)

## [](#the-problem)é—®é¢˜

åœ¨æŠŠæˆ‘çš„ç½‘ç«™è½¬æ¢æˆç›–èŒ¨æ¯”ä¹‹åï¼Œæˆ‘å¾ˆå¿«æ„è¯†åˆ°æˆ‘éœ€è¦ä¸€ç§æ–¹æ³•æ¥ç®¡ç†è‰ç¨¿â€”â€”æˆ‘å¼€å§‹å†™çš„ä¸œè¥¿ï¼Œä½†å‡ºäºæŸç§åŸå› è¿˜æ²¡æœ‰å‡†å¤‡å¥½å…¬å¼€å‘å¸ƒã€‚Gatsby é»˜è®¤å…¬å¼€ä½ çš„å¸–å­â€”â€”ä¸€æ—¦ä½ åˆ›å»ºäº† Markdown æ–‡ä»¶å¹¶å»ºç«‹äº†ä½ çš„ç«™ç‚¹ï¼Œä½ çš„å¸–å­å°±å¯ä¾›æ‰€æœ‰äººæŸ¥çœ‹ã€‚

## [](#the-solution)è§£ï¼Ÿ

è½»æ¾ç‚¹ã€‚åœ¨å¸–å­çš„ frontmatter ä¸­æŠ›å‡ºä¸€ä¸ª`draft: true|false`æ ‡å¿—ï¼Œæ›´æ–°é¡µé¢æŸ¥è¯¢ï¼Œåªè·å–ä½äº`draft === false`çš„é¡µé¢ï¼Œç„¶åå°±åˆ°æ­¤ä¸ºæ­¢ã€‚æˆ–è€…ï¼Œä¹Ÿè®¸ä¸æ˜¯...

## [](#the-real-solution)å®è§£

`draft`æ ‡å¿—çš„é—®é¢˜æ˜¯å®ƒå¯¹äºè¿™ä¸ªç”¨ä¾‹æ¥è¯´ä¸å¤Ÿæ˜ç¡®ã€‚å¦‚æœæˆ‘å¿˜è®°åŒ…å«`draft`æ ‡å¿—ï¼Œæˆ–è€…å¦‚æœå®ƒæœ‰ä¸€ä¸ªé”™åˆ«å­—(ä¾‹å¦‚`dratf: false`ï¼Œè¿™ä¸ªå¸–å­ä»ç„¶ä¼šè¢«å…¬å¼€ã€‚

è®©æˆ‘ä»¬ç¿»è½¬æ¡ä»¶çš„å¤´éƒ¨ï¼Œæ£€æŸ¥ä¸€ä¸ª`published`æ ‡å¿—æ˜¯å¦ä¸º`true`ã€‚å¦‚æœæˆ‘å¿˜è®°æ·»åŠ é‚£ä¸ªæ ‡å¿—ï¼Œæˆ–è€…æœ‰ä¸€ä¸ªæ‰“å°é”™è¯¯(ğŸ‘‹`publisehd`)ï¼Ÿåœ¨æˆ‘ä¿®å¥½æ——å­ä¹‹å‰ï¼Œå¸–å­ä¸ä¼šå‡ºç°ã€‚è¿™æ˜¯ä¸€ä¸ªå°éº»çƒ¦ï¼Œä½†ä¸æˆ‘ä¸å°å¿ƒå‘å¸ƒäº†è¿˜æ²¡å‡†å¤‡å¥½å‘å¸ƒçš„ä¸œè¥¿ç›¸æ¯”ï¼Œè¿˜ä¸ç®—å¤ªç³Ÿç³•ã€‚

## [](#the-code)ä»£ç 

è¿™æ˜¯è¿™ç¯‡æ–‡ç« çš„å‰æ²¿é—®é¢˜â€”â€”æ²¡æœ‰ä»€ä¹ˆç–¯ç‹‚çš„äº‹æƒ…å‘ç”Ÿ:

```
---
title: Manage Draft Posts in Gatsby
slug: '/manage-draft-posts-in-gatsby/'
tags: gatsby
published: false
--- 
```

è¿™æ˜¯æˆ‘çš„é¡µé¢æŸ¥è¯¢:

```
query  {  allMdx(  filter:  {  frontmatter:  {  published:  {  eq:  true  }  }  }  sort:  {  fields:  [frontmatter___date],  order:  DESC  }  )  {  edges  {  node  {  fields  {  slug  }  frontmatter  {  date(formatString:  "MMMM DD, YYYY")  title  }  }  }  }  } 
```

`filter`åŒºå—ä¸­çš„é‚£æ¡`frontmatter: { published: { eq: true } }`çº¿å°±æ˜¯å¥‡è¿¹å‘ç”Ÿçš„åœ°æ–¹ã€‚

æœ‰å‡ ä»¶äº‹è¦è®°ä½:

*   å‘ frontmatter æ·»åŠ æ–°å­—æ®µåï¼Œæ‚¨éœ€è¦é‡æ–°å¯åŠ¨ Gatsby dev æœåŠ¡å™¨ï¼Œç„¶åæ‰èƒ½æŸ¥è¯¢å®ƒä»¬
*   å¦‚æœä½ æœ‰ä¸Šä¸€ç¯‡æ–‡ç« å’Œä¸‹ä¸€ç¯‡æ–‡ç« çš„é“¾æ¥ï¼Œæ·»åŠ ä¸€ä¸ª`published`æ ‡å¿—æ„å‘³ç€:ä½ éœ€è¦ç¡®ä¿ä½ æ²¡æœ‰é“¾æ¥åˆ°æœªå‘è¡¨çš„æ–‡ç« ã€‚æˆ‘å°†åœ¨ä»¥åçš„æ–‡ç« ä¸­å‘æ‚¨å±•ç¤ºæˆ‘æ˜¯å¦‚ä½•å¤„ç†è¿™ä¸ªé—®é¢˜çš„ã€‚æœ‹å‹ä»¬ï¼Œæ•¬è¯·æœŸå¾…ï¼

ğŸ‘‹å–œæ¬¢è¿™ç¯‡æ–‡ç« å—ï¼Ÿ

åŠ å…¥æˆ‘çš„[æ—¶äº‹é€šè®¯](https://stevemerc.com/newsletter/?r=dev)å¹¶åœ¨ Twitter[@ mercantate](https://twitter.com/mercatante)ä¸Šå…³æ³¨æˆ‘ä»¥è·å¾—æ›´å¤šç±»ä¼¼çš„å†…å®¹ã€‚