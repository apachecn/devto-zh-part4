# ä»£ç çš„å‡ºç°â€”â€”çœŸç©ºä¸­å®Œç¾çš„çƒå½¢æˆ¿å±‹â€”â€”è°œé¢˜ 3

> åŸæ–‡:[https://dev . to/10x learner/advent-of-code-perfective-sphere-houses-in-a-vacuum-puzzle-3-n78](https://dev.to/10xlearner/advent-of-code-perfectly-spherical-houses-in-a-vacuum-puzzle-3-n78)

ä½ å¥½ï¼æˆ‘æ˜¯ Xavier Jouvenotï¼Œè¿™æ˜¯å…³äºä»£ç å‡ºç°çš„[ç³»åˆ—çš„ç¬¬ä¸‰éƒ¨åˆ†ã€‚è¿™é‡Œ](https://adventofcode.com)å¯ä»¥æ‰¾åˆ°ä¸Šä¸€éƒ¨åˆ†

å¯¹äºè¿™ä¸ªæ–°å¸–å­ï¼Œæˆ‘ä»¬å°†è§£å†³ 2015 å¹´ 12 æœˆ 3 æ—¥çš„ç¬¬äºŒä¸ªé—®é¢˜ï¼Œåä¸ºâ€œçœŸç©ºä¸­çš„å®Œç¾çƒå½¢æˆ¿å±‹â€ã€‚æˆ‘å°†åœ¨ C++ä¸­æå‡ºè§£å†³æ–¹æ¡ˆï¼Œä½†æ¨ç†å¯ä»¥åº”ç”¨äºå…¶ä»–è¯­è¨€ã€‚

## [](#part-1)ç¬¬ä¸€éƒ¨åˆ†

### [](#the-problem)é—®é¢˜

è¿™ä¸ªé—®é¢˜çš„å®Œæ•´ç‰ˆå¯ä»¥ç›´æ¥åœ¨[é™ä¸´ä»£ç ç½‘ç«™](https://adventofcode.com/2015/day/3)ä¸Šæ‰¾åˆ°ï¼Œæˆ‘åœ¨è¿™é‡Œåªæè¿°é—®é¢˜çš„æœ¬è´¨:

åœ£è¯è€äººæ­£åœ¨ç»™ä¸€ä¸ªæ— é™çš„äºŒç»´æˆ¿å±‹ç½‘æ ¼é€ç¤¼ç‰©ã€‚ä»–é¦–å…ˆåœ¨å‡ºå‘åœ°ç‚¹ç»™æˆ¿å­é€å»ä¸€ä»½ç¤¼ç‰©ï¼Œç„¶ååŒ—æçš„ä¸€ä¸ªç²¾çµé€šè¿‡æ— çº¿ç”µå‘Šè¯‰ä»–ä¸‹ä¸€æ­¥è¯¥å»å“ªé‡Œã€‚ä»–ä¸€æ¬¡ç§»åŠ¨ä¸€ä¸ªæˆ¿å­ï¼Œå‘åŒ—(`^`)ã€å‘å—(`v`)ã€å‘ä¸œ(`>`)æˆ–å‘è¥¿(`<`)ã€‚æ¯æ¬¡åœ£è¯è€äººæ‹œè®¿ä¸€æˆ·äººå®¶ï¼Œä»–éƒ½ä¼šé€ä¸€ä»½ç¤¼ç‰©ï¼Œä½†æ˜¯ï¼Œç»™åœ£è¯è€äººä¸‹è¾¾æŒ‡ç¤ºçš„å°ç²¾çµå–äº†å¤ªå¤šçš„è›‹é…’ï¼Œä½¿å¾—åœ£è¯è€äººä¸æ­¢ä¸€æ¬¡æ‹œè®¿å„å®¶ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¿…é¡»æ‰¾å‡º**æœ‰å¤šå°‘å®¶åº­æ”¶åˆ°è‡³å°‘ä¸€ä»½ç¤¼ç‰©**ã€‚

ä¾‹å¦‚:

*   è®©åœ£è¯è€äººç»™`3`å®¶é€å»ä¸€ä»½ç¤¼ç‰©ï¼Œè¿™æ˜¯ä»–å¼€å§‹çš„é‚£ä¸€å®¶ï¼Œä»¥åŠä»é‚£é‡Œå‘ä¸œçš„ä¸¤å®¶ã€‚
*   è®©åœ£è¯è€äººç»™å„å®¶å„æˆ·é€å»ä¸€å †ç¤¼ç‰©ã€‚

### [](#solution)è§£

åœ¨è¿™é‡Œï¼Œæˆ‘å°†æè¿°æˆ‘ç”¨æ¥å¾—å‡ºè§£å†³æ–¹æ¡ˆçš„æ€è€ƒè¿‡ç¨‹ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»çŸ¥é“åœ£è¯è€äººåœ¨æˆ¿å±‹ç½‘æ ¼ä¸Šçš„ä½ç½®ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦ä»–çš„**åæ ‡**ã€‚

```
struct Coordinate
{
    int x{0};
    int y{0};
};

Coordinate santaPosition; 
```

<svg viewBox="0 0 448 512" class="highlight-action highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg viewBox="0 0 448 512" class="highlight-action highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æˆ‘ä»¬æœ‰äº†åœ£è¯è€äººçš„ä½ç½®ï¼Œæˆ‘ä»¬å¿…é¡»å­˜å‚¨åœ£è¯è€äººèµ°è¿‡çš„è·¯ã€‚æè¿°è¿™æ¡è·¯å¾„æœ€ç®€å•çš„æ–¹å¼æ˜¯ä¸€ä¸ª`Coordinates`çš„**åˆ—è¡¨**ã€‚

```
#include <vector>

using Path = std::vector<Coordinate>
Path santaPath; 
```

<svg viewBox="0 0 448 512" class="highlight-action highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg viewBox="0 0 448 512" class="highlight-action highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬ç»ˆäºæœ‰äº†å¤„ç†è¿™ä¸ªé—®é¢˜çš„æ‰€æœ‰ç»“æ„ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¿…é¡»æ‰¾åˆ°åœ£è¯è€äººèµ°çš„è·¯ã€‚

```
// Adds the house where Santa start to deliver presets
santaPath.emplace_back(santaPosition);

for(auto direction : input)
{
    // Modify Santa's location
    switch (direction)
    {
        case '^': ++santaPosition.y; break;
        case '>': ++santaPosition.x; break;
        case '<': --santaPosition.x; break;
        case 'v': --santaPosition.y; break;
    }
    // Adds the new location to Santa's path
    santaPath.emplace_back(santaPosition);
} 
```

<svg viewBox="0 0 448 512" class="highlight-action highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg viewBox="0 0 448 512" class="highlight-action highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æœ€åï¼Œæˆ‘ä»¬æœ‰åœ£è¯è€äººèµ°è¿‡çš„è·¯ã€‚7 æˆ‘ä»¬ç°åœ¨éœ€è¦åšçš„æ˜¯æ‰¾å‡ºåœ£è¯è€äººèµ°è¿‡çš„è·¯ä¸Šæœ‰å¤šå°‘ä¸åŒçš„æˆ¿å­ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸¤ç§æ ‡å‡†ç®—æ³•: [std::sort](https://en.cppreference.com/w/cpp/algorithm/sort) å’Œ [std::unique](https://en.cppreference.com/w/cpp/algorithm/unique) ã€‚

```
#include <algorithm>

std::sort(std::begin(santaPath), std::end(santaPath));
auto it = std::unique(std::begin(santaPath), std::end(santaPath));
const auto numberOfHousesVisited = std::distance(std::begin(santaPath), it); 
```

<svg viewBox="0 0 448 512" class="highlight-action highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg viewBox="0 0 448 512" class="highlight-action highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ³¨æ„ï¼Œä¸ºäº†èƒ½å¤Ÿä½¿ç”¨é‚£äº›ç®—æ³•ï¼Œæˆ‘ä»¬å¿…é¡»æŒ‡å®šç»“æ„`Coordinate`çš„æ“ä½œç¬¦`==`å’Œ`<`ã€‚

æˆ‘é¼“åŠ±ä½ å»æˆ‘çš„ [GitHub](https://github.com/Xav83/AdventOfCode/tree/2015.03/2015/Day3) ä¸Šçœ‹çœ‹è¿™ä¸ªä»£ç æ ·æœ¬ä¸­ä½¿ç”¨çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚

## [](#part-2)ç¬¬äºŒéƒ¨åˆ†

### [](#problem)é—®é¢˜

è¿™ä¸ªé—®é¢˜å’Œç¬¬ä¸€éƒ¨åˆ†ä¸€æ ·ï¼Œåªæ˜¯ç°åœ¨ï¼Œæœ‰ä¸¤ä¸ªâ€œé€è´§å‘˜â€ï¼Œåœ£è¯è€äººå’Œæœºå™¨äººåœ£è¯è€äººã€‚ä¸¤è€…éƒ½ä»ç›¸åŒçš„ä½ç½®å¼€å§‹ï¼Œå¹¶æ ¹æ® elf çš„æŒ‡ä»¤è½®æµç§»åŠ¨ã€‚æˆ‘ä»¬è¿˜å¾—å¼„æ¸…æ¥šæœ‰å¤šå°‘æˆ¿å­æ”¶åˆ°äº†è‡³å°‘ä¸€ä»½ç¤¼ç‰©ã€‚

ä¾‹å¦‚:

*   ç»™å„å®¶é€ç¤¼ç‰©ï¼Œå› ä¸ºåœ£è¯è€äººå»åŒ—æ–¹ï¼Œç„¶åæœºå™¨äººåœ£è¯è€äººå»å—æ–¹ã€‚

### [](#solution)è§£

å¤§éƒ¨åˆ†æºä»£ç ä¸ç¬¬ 1 éƒ¨åˆ†éå¸¸ç›¸ä¼¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†åªå…³æ³¨ä¸åŒä¹‹å¤„ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºåœ£è¯è€äººå’Œæœºå™¨äººåœ£è¯è€äººé›†æˆä¸€ä¸ªå…¬å…±ç»“æ„ï¼Œæˆ‘ç§°ä¹‹ä¸º`DeliveryMan`ã€‚

```
struct DeliveryMan
{
    Coordinate position;
    Path path;
};

DeliveryMan santa, roboSanta; 
```

<svg viewBox="0 0 448 512" class="highlight-action highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg viewBox="0 0 448 512" class="highlight-action highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨æ”¶é›†æŒ‡ä»¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¥æ”¶æŒ‡ä»¤çš„é€è´§å‘˜å’Œä¸‰å…ƒæŒ‡ä»¤ä¹‹é—´åˆ‡æ¢ã€‚

```
DeliveryMan deliveryMan;

deliveryMan = deliveryMan == &santa ? &roboSanta: &santa; 
```

<svg viewBox="0 0 448 512" class="highlight-action highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg viewBox="0 0 448 512" class="highlight-action highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æœ€åï¼Œä¸€æ—¦æˆ‘ä»¬æ’åºäº†åœ£è¯è€äººå’Œæœºå™¨äººåœ£è¯è€äººè·¯å¾„ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ä½¿ç”¨ std::unique ä¹‹å‰**åˆå¹¶**å®ƒä»¬ã€‚

```
std::vector<Coordinate> mergedPath;
    std::merge(std::begin(santa.path), std::end(santa.path), std::begin(roboSanta.path), std::end(roboSanta.path), std::back_inserter(mergedPath)); 
```

<svg viewBox="0 0 448 512" class="highlight-action highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg viewBox="0 0 448 512" class="highlight-action highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™éƒ¨åˆ†æœ‰è¶£çš„åœ°æ–¹å°±åœ¨è¿™é‡Œã€‚ä½ å¯ä»¥åœ¨æˆ‘çš„ [GitHub](https://github.com/Xav83/AdventOfCode/tree/2015.03/2015/Day3) ä¸ŠæŸ¥çœ‹è¿™æ®µä»£ç çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚

## [](#conclusion)ç»“è®º

ä½ å¯ä»¥æ³¨æ„åˆ°ï¼Œè¿™ä¸ªå¸–å­é‡Œå†™çš„è§£å†³æ–¹æ¡ˆï¼Œå¹¶æ²¡æœ‰åŒ…æ‹¬æ‰€æœ‰åˆ¶ä½œè¿è¡Œç¨‹åºçš„æºç ï¼Œè€Œåªæ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„æºç ä¸­æœ‰è¶£çš„éƒ¨åˆ†ã€‚å¦‚æœä½ æƒ³ä»å¤´åˆ°å°¾çœ‹å®ŒèŠ‚ç›®ï¼Œå¯ä»¥ä¸Šæˆ‘çš„ã€GitHub è´¦å·ã€‘[https://GitHub . com/xav 83/AdventOfCode/tree/2015.03/2015/day 3](https://github.com/Xav83/AdventOfCode/tree/2015.03/2015/Day3)ï¼Œæ¢ç´¢å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œå¦‚æœä½ æ„¿æ„å¯ä»¥æ·»åŠ è¯„è®ºæˆ–æé—®ã€‚

è¿™é‡Œæ˜¯æˆ‘ä»¬ä½¿ç”¨è¿‡çš„ std æ–¹æ³•å’Œå®¹å™¨çš„åˆ—è¡¨ï¼Œæˆ‘éå¸¸é¼“åŠ±ä½ å»çœ‹çœ‹å®ƒä»¬çš„å®šä¹‰:

*   [std::vector](https://en.cppreference.com/w/cpp/container/vector)
*   [std::sort](https://en.cppreference.com/w/cpp/algorithm/sort)
*   [std::unique](https://en.cppreference.com/w/cpp/algorithm/unique)
*   [æ ‡å‡†::è·ç¦»](https://en.cppreference.com/w/cpp/iterator/distance)
*   [std::merge](https://en.cppreference.com/w/cpp/algorithm/merge)
*   [std::back_inserter](https://en.cppreference.com/w/cpp/iterator/back_inserter)

æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œå¸Œæœ›æ‚¨å–œæ¬¢ [![ğŸ˜ƒ](../Images/1a8a82559b31687e49e2968a76ad7283.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--M8HQryyi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://s0.wp.com/wp-content/mu-plugins/wpcom-smileys/twemoji/2/72x72/1f603.png)

ç›´åˆ°ä¸‹ä¸€éƒ¨åˆ†ï¼Œäº«å—å­¦ä¹ å’Œæˆé•¿çš„ä¹è¶£ã€‚