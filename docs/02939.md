# å¦‚ä½•åœ¨ä½ çš„ Ionic 4 åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ Firebase åˆå­¦è€…æŒ‡å—

> åŸæ–‡:[https://dev . to/enappd/how-to-use-fire base-in-your-ionic-4-app-guide-for-åˆå­¦è€…-2h60](https://dev.to/enappd/how-to-use-firebase-in-your-ionic-4-app-guide-for-beginners-2h60)

* * *

> ä½ ä»Šå¤©è¿æ°”ä¸é”™ã€‚çœ‹çœ‹ä¸‹é¢çš„&å¸®åŠ©æˆ‘ä»¬ä¼ æ’­ç¾å¥½çš„äº‹ç‰©ï¼ï¼
> [**Firebase å…¥é—¨å¥—ä»¶(Ionic 4)**](https://store.enappd.com/product/firebase-starter-kitionic4-firebase-starter/) **:** å¸®åŠ©æ‚¨å¼€å§‹ä½¿ç”¨ Ionic 4 å’Œ Firebase çš„ç»ä½³å…¥é—¨å·¥å…·ã€‚

ç°åœ¨è®©æˆ‘ä»¬æ·±å…¥äº†è§£ Firebase å¯¹æ‚¨çš„ Ionic4 åº”ç”¨ç¨‹åºçš„æœ€å¤§å¥½å¤„ã€‚

**Firebase** æ˜¯ç”± Firebase Inc .äº 2011 å¹´å¼€å‘çš„ç§»åŠ¨å’Œ web åº”ç”¨ç¨‹åºå¼€å‘å¹³å°ï¼Œéšåäº 2014 å¹´è¢«è°·æ­Œæ”¶è´­ã€‚Firebase æ˜¯ä¸€ä¸ªâ€œæ„å»ºã€æ”¹è¿›å’Œå‘å±•ä½ çš„åº”ç”¨â€çš„å·¥å…·é›†ã€‚å®ƒä¸ºæ‚¨æä¾›äº†åˆ†æã€æ•°æ®åº“ã€æ¶ˆæ¯ä¼ é€’å’Œå´©æºƒæŠ¥å‘Šç­‰åŠŸèƒ½ï¼Œå› æ­¤æ‚¨å¯ä»¥å¿«é€Ÿç§»åŠ¨å¹¶ä¸“æ³¨äºæ‚¨çš„ç”¨æˆ·ã€‚

ä»Šå¤©ï¼ŒFirebase æ˜¯å‘å±•æœ€å¿«çš„åº”ç”¨ç¨‹åºå¼€å‘å¹³å°ä¹‹ä¸€ã€‚ä¸€äº›åŸå› æ˜¯

1.  ä¸éœ€è¦ä»å¤´å¼€å§‹å†™åç«¯ã€‚Firebase æ˜¯ä¸€ä¸ªç°æˆçš„åç«¯ï¼Œé™„å¸¦ä¸€ä¸ª DBã€‚æ‚¨åªéœ€å°† Firebase SDK é›†æˆåˆ°æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå°±ä¸‡äº‹å¤§å‰äº†ã€‚
2.  è¿™æ˜¯ğŸ•º.å¦‚æœä½ æ˜¯ä¸€åå¼€å‘äººå‘˜ï¼Œä½ å°±ä¼šæ˜ç™½å®æ—¶åç«¯/æ•°æ®åº“åœ¨å½“ä»Šåº”ç”¨å¸‚åœºä¸­çš„é‡è¦æ€§ã€‚å¦‚æœä½ è€ƒè™‘åˆ°å®æ—¶æ“ä½œï¼ŒåƒèŠå¤©ã€æ–°é—»ã€è¯„çº§ã€é¢„è®¢ç­‰äº‹æƒ…éƒ½éå¸¸å®¹æ˜“
3.  ç®€å•çš„è®¤è¯æ“ä½œã€‚é¢å‘ç”¨æˆ·çš„åº”ç”¨ç¨‹åºé¦–å…ˆéœ€è¦çš„æ˜¯ç™»å½•/æ³¨å†Œæ“ä½œã€‚Firebase å¯ä»¥éå¸¸æµç•…åœ°å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”åªéœ€å¾ˆå°‘çš„ç¼–ç å·¥ä½œã€‚ä½ å¯ä»¥æ•´åˆä¸€äº›ç¤¾ä¼šè®¤è¯æœåŠ¡ï¼Œå¦‚è„¸ä¹¦ï¼Œè°·æ­Œç­‰ã€‚è¿˜æœ‰ Firebaseã€‚
4.  æ‚¨å¯ä»¥è·å¾—å¤§é‡å†…ç½®çš„é™„åŠ åŠŸèƒ½ï¼Œä¾‹å¦‚æ¨é€é€šçŸ¥ã€åˆ†æç­‰ğŸ˜ğŸ˜
5.  åœ¨ä¸€å®šçš„ä½¿ç”¨èŒƒå›´å†…ï¼Œå®ƒæ˜¯å…è´¹çš„ã€‚ä½†è¿™å¯¹äºæ­£åœ¨å°è¯•ã€åˆ¶ä½œ MVPã€ç”šè‡³æ˜¯å°è§„æ¨¡åº”ç”¨ä¸šåŠ¡çš„å¼€å‘è€…æ¥è¯´ï¼Œæ˜¯ç›¸å½“æ£’çš„ã€‚ğŸ¤‘

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å…³æ³¨**ä½ å¯ä»¥åœ¨ Ionic 4 åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ Firebase åšä»€ä¹ˆã€‚** Firebase ä» Ionic 1 å¼€å§‹å°±æœ‰äº†ï¼Œä¹‹åä¸€ç›´åœ¨å˜ã€‚å› æ­¤ï¼Œè¿™é‡Œæœ‰ä¸€äº›æœ€æ–°çš„æ’ä»¶å’ŒåŠŸèƒ½ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Firebase å’Œ Ionic 4 æ¥å®ç°

### 1.åˆ†æç«åŸº

![](img/7c72f78c63e983a30555a11db2c30213.png)

æ¯ä¸ªäººéƒ½çŸ¥é“è°·æ­Œåˆ†æã€‚Firebase å†…ç½®äº†åˆ†æåŠŸèƒ½ã€‚è¿™æ˜¯ä¸€ä¸ªå…è´¹å’Œæ— é™çš„åˆ†æè§£å†³æ–¹æ¡ˆã€‚åˆ†ææœ‰åŠ©äºæ‚¨äº†è§£ç”¨æˆ·çš„è¡Œä¸ºï¼Œå› æ­¤æ‚¨å¯ä»¥å°±å¦‚ä½•è¥é”€æ‚¨çš„åº”ç”¨ç¨‹åºåšå‡ºæ˜æ™ºçš„å†³ç­–ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡æœ‰æœºæ¸ é“å’Œä»˜è´¹æ¸ é“æŸ¥çœ‹æ‚¨çš„æ´»åŠ¨è¡¨ç°ï¼Œä»¥äº†è§£å“ªäº›æ–¹æ³•æœ€èƒ½æœ‰æ•ˆåœ°å¸å¼•é«˜ä»·å€¼ç”¨æˆ·ã€‚

ç”¨å®‰è£…æ’ä»¶

```
ionic cordova plugin add cordova-plugin-firebase-analytics
```

```
npm install @ionic-native/firebase-analytics
```

å¯¹äºæ‰€æœ‰æ’ä»¶ï¼Œåœ¨ç»„ä»¶ä¸­å¯¼å…¥æ’ä»¶çš„æ­¥éª¤å°†ä¿æŒä¸å˜(åªéœ€æ›´æ”¹æ’ä»¶åç§°)

```
import { FirebaseAnalytics } from '@ionic-native/firebase-analytics/ngx'; 
```

```
constructor(private firebaseAnalytics: FirebaseAnalytics) {  
... your code here
}
```

ä»è®¾ç½®å¼€å§‹ï¼Œå®ƒå°†è‡ªåŠ¨å¼€å§‹è·Ÿè¸ªä¸€ç»„å®šä¹‰çš„äº‹ä»¶ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä»ç¬¬ä¸€æ­¥å¼€å§‹å­¦ä¹ ã€‚å¦‚æœè¿™è¿˜ä¸å¤Ÿï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ·»åŠ æˆ‘ä»¬è‡ªå·±çš„**è‡ªå®šä¹‰äº‹ä»¶**æ¥è·Ÿè¸ª

```
this.firebaseAnalytics.logEvent('my_event', {param1: "value1"})
  .then((res: any) => console.log(res))
  .catch((error: any) => console.error(error));
```

![](img/f416563215d25cb620b51e20430086fc.png)

<figure>

<figcaption class="imageCaption">This is how Firebase automatically projects the analytics for yourÂ app</figcaption>

</figure>

ä¸‹é¢åˆ—å‡ºäº†ä¸€äº›æœ‰ç”¨çš„ Firebase å‡½æ•°ï¼Œæ‚¨å¯ä»¥ç”¨ä¸ä¸Šé¢ç±»ä¼¼çš„æ–¹å¼ç¼–å†™å®ƒä»¬

1.  **è®¾ç½®ç”¨æˆ· Id** â€” `this.firebaseAnalytics.setUserId("123123")`è¿™æœ‰åŠ©äºè¯†åˆ«ä¸ç”¨æˆ·ç›¸å…³çš„äº‹ä»¶ã€‚
2.  **è®¾ç½®ç”¨æˆ·å±æ€§** â€” `this.firebaseAnalytics.setUserProperty("name","value")`è¿™æœ‰åŠ©äºåˆ›å»ºè¿‡æ»¤å™¨ï¼Œè¿‡æ»¤ç”¨æˆ·åœ¨åº”ç”¨ç¨‹åºä¸­å¯¹äº‹ä»¶çš„ç‰¹å®šæ“ä½œæˆ–ç‰¹å®šè¡Œä¸ºã€‚å½“ä½ æƒ³å‘é€‰å®šçš„é¢‘é“å‘é€æ¨é€é€šçŸ¥æˆ–åº”ç”¨å†…æ¶ˆæ¯æ—¶ï¼Œè¿™äº›è¿‡æ»¤å™¨å¾ˆæ–¹ä¾¿ã€‚
3.  **è®¾ç½®å½“å‰å±å¹•** â€” `this.firebaseAnalytics.setUserId("123123")`è¿™ä¸ªé€‰é¡¹å¯ä»¥æ–¹ä¾¿åœ°è¯†åˆ«ä¸å±å¹•ç›¸å…³çš„äº‹ä»¶ã€‚æ¯”å¦‚â€”â€”ç”¨æˆ·é€šå¸¸åœ¨å“ªä¸ªå±å¹•ä¸Šé€€å‡º app ç­‰ç­‰ã€‚

ç„¶åï¼Œæ‰€æœ‰è¿™äº›äº‹ä»¶éƒ½å¯ä»¥é€šè¿‡ Firebase æ§åˆ¶å°ä¸­çš„ Firebase ä»ªè¡¨æ¿æŸ¥çœ‹ï¼Œè¿™æ˜¯æˆ‘ä»¬è®¿é—®åˆ†ææŠ¥å‘Šå’Œå…¶ä»– firebase æœåŠ¡çš„ä¸­å¿ƒç‚¹ã€‚

![](img/62a0e75c705028454f5384a01cbbcf35.png)

<figure>

<figcaption class="imageCaption">Firebase Dashboard for Events Analytics</figcaption>

</figure>

æ³¨æ„:è¿™ä¸ªæ’ä»¶ä¾èµ–äº[Cordova-support-google-services](https://github.com/chemerisuk/cordova-support-google-services)æ¥æ­£ç¡®è®¾ç½® Google æœåŠ¡ã€‚æ‚¨å¯ä»¥ä»”ç»†å‚è€ƒ[è‡ªè¿°æ–‡ä»¶](https://github.com/chemerisuk/cordova-support-google-services/blob/master/README.md)ï¼Œä»¥é¿å…é¡¹ç›®é…ç½®ä¸­çš„å¸¸è§é—®é¢˜ã€‚æ­¤å¤–ï¼Œä½¿ç”¨å˜é‡`FIREBASE_CORE_VERSION`è¦†ç›– Android ä¸Šçš„ä¾èµ–ç‰ˆæœ¬ã€‚

åœ¨ iOS ä¸Šï¼Œä¸ºäº†æ”¶é›†äººå£ç»Ÿè®¡ã€å¹´é¾„ã€æ€§åˆ«ç­‰æ•°æ®ã€‚ä½ è¿˜åº”è¯¥åœ¨ä½ çš„é¡¹ç›®ä¸­åŠ å…¥`AdSupport.framework`ã€‚

### 2.Firebase äº‘æ¶ˆæ¯ä¼ é€’(FCM)

![](img/680465c07dc4bb4c0392c3b40c93dcb4.png)

æƒ³è±¡ä¸€ä¸‹ä¸€ä¸ª Whatsappï¼Œä½ æ¯æ¬¡éƒ½å¿…é¡»æ‰“å¼€åº”ç”¨ç¨‹åºæ¥æ£€æŸ¥æ–°æ¶ˆæ¯ï¼Œå¾ˆå¯æ€•å§ï¼Ÿæ¨é€é€šçŸ¥æ˜¯å¸å¼•åº”ç”¨ç”¨æˆ·çš„æœ€ä½³æ–¹æ³•ä¹‹ä¸€ã€‚
Firebase äº‘æ¶ˆæ¯ä¼ é€’(FCM)æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„æ¶ˆæ¯ä¼ é€’è§£å†³æ–¹æ¡ˆï¼Œè®©æ‚¨èƒ½å¤Ÿå¯é åœ°å…è´¹ä¼ é€’æ¶ˆæ¯ã€‚ä½¿ç”¨ FCMï¼Œæ‚¨å¯ä»¥é€šçŸ¥å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæœ‰æ–°çš„ç”µå­é‚®ä»¶æˆ–å…¶ä»–æ•°æ®å¯ä¾›åŒæ­¥ã€‚å¦‚æœä½ çš„åº”ç”¨è¦å–å¾—æˆåŠŸï¼Œé‚£ä¹ˆä½ éœ€è¦éšç€æ—¶é—´çš„æ¨ç§»ä¿æŒç”¨æˆ·çš„å…´è¶£ï¼Œé€šçŸ¥æ˜¯ä¿æŒä½ çš„å—ä¼—å‚ä¸çš„é‡è¦æ–¹å¼ã€‚é€šè¿‡åœ¨**æ°å½“çš„æ—¶åˆ»**å‘ç”¨æˆ·æä¾›åŠæ—¶ã€ç›¸å…³çš„é€šçŸ¥ï¼Œä½ å¯ä»¥é‡æ–°æ•æ‰ä»–ä»¬å¾˜å¾Šçš„å…´è¶£ï¼Œå¹¶æŠŠä»–ä»¬æ‹‰å›åˆ°ä½ çš„åº”ç”¨ä¸­ã€‚

ç”¨å®‰è£…æ’ä»¶

```
ionic cordova plugin add cordova-plugin-firebase-analytics
```

```
npm install @ionic-native/firebase-analytics
```

åœ¨æ ¹ç»„ä»¶ä¸­å¯¼å…¥æ’ä»¶ã€‚

```
import { FCM } from '@ionic-native/fcm/ngx';
```

```
constructor(private fcm: FCM) {}
```

ä½¿ç”¨ä»¥ä¸‹åŠŸèƒ½å……åˆ†åˆ©ç”¨æ¨é€é€šçŸ¥

#### I .æ¥æ”¶ä»¤ç‰Œåˆ·æ–°

```
this.fcm.onTokenRefresh().subscribe(token => {
  alert(token);
});
```

è¯·æ³¨æ„ï¼Œæ¯æ¬¡ç”Ÿæˆæ–°ä»¤ç‰Œæ—¶(åŒ…æ‹¬ç¬¬ä¸€æ¬¡)éƒ½ä¼šè§¦å‘è¿™ä¸ªå›è°ƒã€‚

#### äºŒã€‚è·å–ä»¤ç‰Œ

```
this.fcm.getToken().then(token => {
  alert(token);
});
```

è¯·è®°ä½ï¼Œå¦‚æœä»¤ç‰Œå°šæœªå»ºç«‹ï¼Œæ­¤å‡½æ•°å°†è¿”å› nullã€‚æ‰€ä»¥åœ¨æ’ä»¶æ­£ç¡®åˆå§‹åŒ–ä¹‹å‰ä¸è¦è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚

#### ä¸‰ã€‚è®¢é˜…ä¸»é¢˜

```
this.fcm.subscribeToTopic('marketing');
```

ä¸»é¢˜æ˜¯å‘ä¸€ç»„ç‰¹å®šç”¨æˆ·æä¾›è¿‡æ»¤æ•°æ®çš„ç‰¹å®šæ¸ é“ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ˜¯ä¸€ä¸ªé£Ÿå“é…é€åº”ç”¨ç¨‹åºï¼Œä½ å¯èƒ½æƒ³åªå‘é‚£äº›åœ¨è¿‡å» 7 å¤©å†…æ²¡æœ‰è®¢è´­ä»»ä½•ä¸œè¥¿çš„ç”¨æˆ·å‘é€ä¼˜æƒ åˆ¸ã€‚
æ ¹æ®è®¾å¤‡ç±»å‹ï¼Œæ‰€æœ‰è®¾å¤‡åˆ†åˆ«è‡ªåŠ¨è®¢é˜…â€œå…¨éƒ¨â€å’Œâ€œiosâ€æˆ–â€œandroidâ€ä¸»é¢˜ã€‚å¦‚æœæ‚¨æ­£åœ¨åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ä¸»é¢˜ï¼Œæ‚¨çš„ä¸»é¢˜åç§°å¿…é¡»åŒ¹é…ä»¥ä¸‹æ­£åˆ™è¡¨è¾¾å¼:
**ã€a-zA-Z0â€“9-_ã€‘ã€‚~ %]{ 1900 } "**

#### å››ã€‚å–æ¶ˆè®¢é˜…ä¸»é¢˜

```
this.fcm.unsubscribeFromTopic('marketing');
```

å½“ç”¨æˆ·æƒ³è¦å…³é—­åº”ç”¨ç¨‹åºä¸­çš„æ¨é€é€šçŸ¥æ—¶ï¼Œè¯¥åŠŸèƒ½ç‰¹åˆ«æœ‰ç”¨ã€‚

#### åŠ¨è¯ ï¼ˆverb çš„ç¼©å†™ï¼‰æ¥æ”¶æ¨é€é€šçŸ¥æ•°æ®

```
this.fcm.onNotification().subscribe(data => {
  if(data.wasTapped){
    console.log("Push received in background");
  } else {
    console.log("Push received in foreground");
  };
});
```

è¿™é‡Œéœ€è¦ç†è§£çš„é‡è¦ä¸€ç‚¹æ˜¯æœ‰æ•ˆè½½è·çš„ç±»å‹ã€‚æœ‰ä¸¤ç§ç±»å‹â€” **æ•°æ®å’Œ**é€šçŸ¥ã€‚Firebase ç®¡ç†é¢æ¿å…è®¸æ‚¨éå¸¸å®¹æ˜“åœ°å‘é€æœ‰æ•ˆè½½è·ï¼Œå¹¶æä¾›å„ç§é€‰é¡¹æ¥è¿‡æ»¤

![](img/19cb89d45390f9ba3507557a8389b841.png)

<figure>

<figcaption class="imageCaption">Prepare a Push notification right from FirebaseÂ console</figcaption>

</figure>

æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ FCM ä»æ‚¨çš„æœåŠ¡å™¨å‘é€æœ‰æ•ˆè´Ÿè½½ã€‚æœ‰æ•ˆè´Ÿè½½çš„è¯­æ³•å°†æ˜¯

```
{
  "notification":{
    "title":"Notification title",
    "body":"Notification body",
    "sound":"default",
    "click_action":"FCM_PLUGIN_ACTIVITY",
    "icon":"fcm_push_icon"
  },
  "data":{
    "param1":"value1",
    "param2":"value2"
  },
    "to":"/topics/topicExample",
    "priority":"high",
    "restricted_package_name":""
}
```

é€šè¿‡æ‚¨çš„æœåŠ¡å™¨å‘é€é€šçŸ¥çš„å®Œæ•´æ–‡æ¡£å¯ä»¥åœ¨[è¿™é‡Œ](https://firebase.google.com/docs/cloud-messaging/http-server-ref)æ‰¾åˆ°

### 3.Firebase(è¿œç¨‹)é…ç½®

![](img/531507dc1eee21950ddcdae66872e1df.png)

Firebase Remote Config æ˜¯ä¸€é¡¹äº‘æœåŠ¡ï¼Œå…è®¸æ‚¨æ›´æ”¹åº”ç”¨ç¨‹åºçš„è¡Œä¸ºå’Œå¤–è§‚ï¼Œè€Œæ— éœ€ç”¨æˆ·ä¸‹è½½åº”ç”¨ç¨‹åºæ›´æ–°ã€‚ä½¿ç”¨è¿œç¨‹é…ç½®æ—¶ï¼Œæ‚¨å¯ä»¥åˆ›å»ºåº”ç”¨å†…é»˜è®¤å€¼æ¥æ§åˆ¶åº”ç”¨çš„è¡Œä¸ºå’Œå¤–è§‚ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥ç¨åä½¿ç”¨ Firebase æ§åˆ¶å°æˆ–è¿œç¨‹ Config REST API æ¥è¦†ç›–æ‰€æœ‰åº”ç”¨ç¨‹åºç”¨æˆ·æˆ–éƒ¨åˆ†ç”¨æˆ·ç¾¤çš„åº”ç”¨ç¨‹åºå†…é»˜è®¤å€¼ã€‚ä¾‹å¦‚ï¼Œ**æ‚¨å¯ä»¥æ›´æ”¹åº”ç”¨çš„å¸ƒå±€æˆ–é¢œè‰²ä¸»é¢˜ï¼Œä»¥æ”¯æŒå­£èŠ‚æ€§ä¿ƒé”€ï¼Œè€Œæ— éœ€å‘å¸ƒåº”ç”¨æ›´æ–°ã€‚**

ç”¨å®‰è£…æ’ä»¶

```
ionic cordova plugin add cordova-plugin-firebase-config
```

```
npm install @ionic-native/firebase-config
```

åœ¨ç»„ä»¶ä¸­å¯¼å…¥æ’ä»¶ã€‚

```
import { FirebaseConfig } from '@ionic-native/firebase-config/ngx';
```

```
constructor(private firebaseConfig: FirebaseConfig) { }
```

ç„¶åï¼Œæ‚¨å¯ä»¥è·å¾—æœåŠ¡å™¨ç«¯å‚æ•°ï¼Œè¿™äº›å‚æ•°å¯ä»¥å‘Šè¯‰æ‚¨çš„åº”ç”¨ç¨‹åºå¦‚ä½•å…·ä½“æ“ä½œã€‚æ­¤å¤–ï¼ŒFirebase æ§åˆ¶å°å…è®¸æ‚¨åœ¨ä¸€ä¸ªç®€å•çš„ GUI ä¸­æ·»åŠ å‚æ•°ã€‚

```
this.firebaseConfig.getBoolean('is_my_holiday_promotion_on')
  .then((res: any) => console.log(res))
  .catch((error: any) => console.error(error));
```

![](img/cd87cd0aa095941625e3893236d12550.png)

<figure>

<figcaption class="imageCaption">Define Remote config parameters in FirebaseÂ console</figcaption>

</figure>

è¿œç¨‹é…ç½®çš„ä¸€ä¸ªéšè—çš„ä½†å¾ˆæ£’çš„ç‰¹æ€§æ˜¯æ¥æ”¶å®šåˆ¶å‚æ•°çš„ç”¨æˆ·çš„åˆ†æ®µã€‚ä¾‹å¦‚ï¼Œæ‚¨å¸Œæœ›ä»…å‘æ¥è‡ªå°åº¦çš„ç”¨æˆ·å‘é€ç‰¹å®šçš„ä¿ƒé”€ä»£ç ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥åœ¨ Firebase æ§åˆ¶å°ä¸­å°† holiday_promo_code å‚æ•°çš„æ¡ä»¶è®¾ç½®ä¸º`user country` : `India`

![](img/5260c6ffde55176980028813f41cc917.png)

<figure>

<figcaption class="imageCaption">Setting custom conditions for Firebase RemoteÂ Config</figcaption>

</figure>

### 4.Firebase åŠ¨æ€é“¾æ¥

![](img/fbb2fac54b51041d5e8c3813106f7afd.png)

åŠ¨æ€é“¾æ¥æ˜¯æ™ºèƒ½ç½‘å€ï¼Œå…è®¸æ‚¨å°†ç°æœ‰å’Œæ½œåœ¨ç”¨æˆ·å‘é€åˆ° iOS æˆ– Android åº”ç”¨ç¨‹åºä¸­çš„ä»»ä½•ä½ç½®ã€‚åŠ¨æ€é“¾æ¥è§£å†³äº†åœ¨ **Deeplinks** ä¸­é¢ä¸´çš„é—®é¢˜ï¼Œåœ¨é‚£é‡Œäº‹æƒ…æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰å®‰è£…ä½ çš„åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆ deeplink å°±ä¸ä¼šå·¥ä½œã€‚æˆ–è€…ï¼Œå¦‚æœç”¨æˆ·ä» deeplink å®‰è£…æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œä¸ deeplink æœ¬èº«ç›¸å…³çš„ä¿¡æ¯(ä¾‹å¦‚ä¼˜æƒ åˆ¸ä»£ç )ä¼šåœ¨å®‰è£…è¿‡ç¨‹ä¸­ä¸¢å¤±ã€‚

åŠ¨æ€é“¾æ¥åœ¨åº”ç”¨ç¨‹åºå®‰è£…è¿‡ç¨‹ä¸­ä»ç„¶æœ‰æ•ˆï¼Œå› æ­¤å³ä½¿æ˜¯æ–°ç”¨æˆ·ï¼Œåœ¨ç¬¬ä¸€æ¬¡æ‰“å¼€åº”ç”¨ç¨‹åºæ—¶ä¹Ÿèƒ½çœ‹åˆ°ä»–ä»¬æ­£åœ¨å¯»æ‰¾çš„å†…å®¹ã€‚å¦‚æœç”¨æˆ·åœ¨æ¡Œé¢æµè§ˆå™¨ä¸­æ‰“å¼€ç›¸åŒçš„åŠ¨æ€é“¾æ¥ï¼Œä»–ä»¬å°†è¢«å¸¦åˆ°ä½ çš„ç½‘ç«™ä¸Šç›¸åŒçš„å†…å®¹ã€‚

![](img/0ec036e2d2fb4fabf1bb96715035dd6c.png)

<figure>

<figcaption class="imageCaption">Add Dynamic Links from FirebaseÂ Console</figcaption>

</figure>

æœ‰äº†åŠ¨æ€é“¾æ¥ï¼Œä½ çš„ç”¨æˆ·å¯ä»¥åœ¨ä»–ä»¬æ‰“å¼€é“¾æ¥çš„å¹³å°ä¸Šè·å¾—æœ€å¥½çš„ä½“éªŒã€‚åŠ¨æ€é“¾æ¥çš„ä¸»è¦ä¼˜åŠ¿:

*   å°†ç§»åŠ¨ç½‘ç»œç”¨æˆ·è½¬åŒ–ä¸ºåŸç”Ÿåº”ç”¨ç”¨æˆ·ã€‚å°†ç”¨æˆ·å‘é€åˆ° app store æˆ–å‘ä»–ä»¬æ˜¾ç¤ºå¹¿å‘Š
*   æé«˜ç”¨æˆ·åˆ°ç”¨æˆ·åˆ†äº«çš„è½¬åŒ–ç‡ã€‚ä¾‹å¦‚åº”ç”¨é‚€è¯·ã€ä¼˜æƒ åˆ¸ç­‰ã€‚
*   é€šè¿‡ç¤¾äº¤ã€ç”µå­é‚®ä»¶å’ŒçŸ­ä¿¡è¥é”€æ´»åŠ¨æ¨åŠ¨æ›´å¤šå®‰è£…ã€‚
*   æŠŠæ¡Œé¢ç”¨æˆ·å˜æˆæ‰‹æœº app ç”¨æˆ·ã€‚å°†ç”¨æˆ·å‘é€åˆ° app store
*   ç”¨æˆ·ç‰¹å®šçš„è½¬åŒ–â€”â€”å¦‚æœç”¨æˆ·ä»æåˆ°`Chinese`ç¾é£Ÿçš„å¹¿å‘Šä¸­å®‰è£…äº†ä½ çš„ç¾é£Ÿåº”ç”¨ï¼Œé‚£ä¹ˆåœ¨å®‰è£…åï¼Œä½ å¯ä»¥å°†ç”¨æˆ·ç›´æ¥å¸¦åˆ°ä¸€ä¸ªä¸­å›½é¤é¦†é¡µé¢ã€‚å¾ˆé…·ï¼Œå¯¹å§ï¼Ÿ

ç”¨å®‰è£…æ’ä»¶

```
ionic cordova plugin add cordova-plugin-firebase-dynamiclinks
```

```
npm install @ionic-native/firebase-dynamic-links
```

åœ¨ç»„ä»¶ä¸­å¯¼å…¥æ’ä»¶ã€‚

```
import { FirebaseDynamicLinks } from '@ionic-native/firebase-dynamic-links/ngx'; 
```

```
constructor(private firebaseDynamicLinks: FirebaseDynamicLinks) { }
```

æ‰“å¼€å¸¦æœ‰åŠ¨æ€é“¾æ¥çš„åº”ç”¨ç¨‹åºåï¼Œåœ¨è¿™é‡Œå¤„ç†é€»è¾‘

```
this.firebaseDynamicLinks.onDynamicLink()
  .subscribe((res: any) => console.log(res), (error:any) => console.log(error));
```

ä½¿ç”¨å˜é‡`APP_DOMAIN`æ¥æŒ‡å®š web URLï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºå°†åœ¨æ­¤å¯åŠ¨ä¸€ä¸ªæ´»åŠ¨æ¥å¤„ç†é“¾æ¥ã€‚

ä½¿ç”¨å˜é‡`PAGE_LINK_DOMAIN`æ¥æŒ‡å®šæ‚¨çš„`*.page.link`åŸŸã€‚

ä½¿ç”¨å˜é‡`FIREBASE_DYNAMIC_LINKS_VERSION`è¦†ç›– Android ä¸Šçš„ä¾èµ–ç‰ˆæœ¬ã€‚

### 5.Firebase è®¤è¯

ä½¿ç”¨æˆ‘ä»¬çš„ [**Firebase å…¥é—¨å¥—ä»¶**](https://store.enappd.com/product/firebase-starter-kitionic4-firebase-starter/) å¼€å§‹ä½¿ç”¨ Firebase è®¤è¯ã€‚

![](img/f3d0842614a69796134e57458ead4311.png)

å¤§å¤šæ•°åº”ç”¨ç¨‹åºéœ€è¦çŸ¥é“ç”¨æˆ·çš„èº«ä»½ã€‚äº†è§£ç”¨æˆ·çš„èº«ä»½å…è®¸åº”ç”¨ç¨‹åºå®‰å…¨åœ°å°†ç”¨æˆ·æ•°æ®ä¿å­˜åœ¨äº‘ä¸­ï¼Œå¹¶åœ¨ç”¨æˆ·çš„æ‰€æœ‰è®¾å¤‡ä¸Šæä¾›ç›¸åŒçš„ä¸ªæ€§åŒ–ä½“éªŒã€‚Firebase Authentication æä¾›åç«¯æœåŠ¡ã€æ˜“äºä½¿ç”¨çš„ SDK å’Œç°æˆçš„ UI åº“ï¼Œç”¨äºå‘æ‚¨çš„åº”ç”¨ç¨‹åºéªŒè¯ç”¨æˆ·ã€‚å®ƒæ”¯æŒä½¿ç”¨å¯†ç ã€ç”µè¯å·ç ã€æµè¡Œçš„è”åˆèº«ä»½æä¾›å•†(å¦‚è°·æ­Œã€è„¸ä¹¦å’Œ Twitter)ç­‰è¿›è¡Œèº«ä»½è®¤è¯ã€‚

![](img/a9dddc96726b9aea29c243bcc5441b81.png)

<figure>

<figcaption class="imageCaption">Firebase provides various methods to authenticate users</figcaption>

</figure>

ç”¨å®‰è£…æ’ä»¶

```
ionic cordova plugin add cordova-plugin-firebase-authentication
```

```
npm install @ionic-native/firebase-authentication
```

åœ¨ç»„ä»¶ä¸­å¯¼å…¥æ’ä»¶ã€‚

```
import { FirebaseAuthentication } from '@ionic-native/firebase-authentication/ngx';
```

```
constructor(private firebaseAuthentication: FirebaseAuthentication) { }
```

æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹åŠŸèƒ½åœ¨èº«ä»½éªŒè¯æ¨¡å—ä¸­æ‰§è¡Œå„ç§ä»»åŠ¡ã€‚

#### I .ç”¨ç”µå­é‚®ä»¶å’Œå¯†ç æ³¨å†Œç”¨æˆ·

```
this.firebaseAuthentication.createUserWithEmailAndPassword('[test@gmail.com](mailto:test@gmail.com)', '123')
  .then((res: any) => console.log(res))
  .catch((error: any) => console.error(error));
```

#### äºŒã€‚å‘é€ç”µå­é‚®ä»¶éªŒè¯

ä¸ºå½“å‰ç”¨æˆ·å¯åŠ¨ç”µå­é‚®ä»¶éªŒè¯ã€‚

```
this.firebaseAuthentication.sendEmailVerification()
  .then((res: any) => console.log(res))
  .catch((error: any) => console.error(error));
```

#### ä¸‰ã€‚å‘é€å¯†ç é‡ç½®ç”µå­é‚®ä»¶

è§¦å‘ Firebase èº«ä»½éªŒè¯åç«¯å‘ç»™å®šçš„ç”µå­é‚®ä»¶åœ°å€å‘é€å¯†ç é‡ç½®ç”µå­é‚®ä»¶ï¼Œè¯¥ç”µå­é‚®ä»¶åœ°å€å¿…é¡»å¯¹åº”äºæ‚¨çš„åº”ç”¨ç¨‹åºçš„ç°æœ‰ç”¨æˆ·ã€‚

```
this.firebaseAuthentication.sendPasswordResetEmail()
  .then((res: any) => console.log(res))
  .catch((error: any) => console.error(error));
```

#### å››ã€‚ä½¿ç”¨ç”µå­é‚®ä»¶å’Œå¯†ç ç™»å½•

ä½¿ç”¨ç”µå­é‚®ä»¶å’Œå¯†ç å¼‚æ­¥ç™»å½•ã€‚

```
this.firebaseAuthentication.signInWithEmailAndPassword('[test@gmail.com](mailto:test@gmail.com)', '123')
  .then((res: any) => console.log(res))
  .catch((error: any) => console.error(error));
```

#### åŠ¨è¯ ï¼ˆverb çš„ç¼©å†™ï¼‰éªŒè¯ç”µè¯å·ç (ç”µè¯å·ç ï¼Œè¶…æ—¶)

ä¸ºç»™å®šçš„ç”µè¯å·ç å¯åŠ¨ç”µè¯å·ç éªŒè¯è¿‡ç¨‹ã€‚

```
this.firebaseAuthentication.verifyPhoneNumber('+123456789', '30000')
  .then((res: any) => console.log(res))
  .catch((error: any) => console.error(error));
```

#### ä¸åŠç‰©åŠ¨è¯åŒ¿åç™»å½•

åˆ›å»ºå¹¶ä½¿ç”¨ä¸´æ—¶åŒ¿åå¸æˆ·é€šè¿‡ Firebase è¿›è¡Œèº«ä»½éªŒè¯ã€‚

```
this.firebaseAuthentication.signInAnonymously().then(function(userInfo) {
    // user is signed in
});
```

#### ä¸ƒã€‚Google ç™»å½•â€” signInWithGoogle(idTokenï¼ŒaccessToken)

ä½¿ç”¨è°·æ­Œçš„ *idToken* å’Œ *accessToken* ç™»å½• firebase è´¦æˆ·ã€‚ä¸ºäº†å–å›è¿™äº›ä»¤ç‰Œï¼Œè¯·éµå¾ª [Android](https://firebase.google.com/docs/auth/android/google-signin) å’Œ [iOS](https://firebase.google.com/docs/auth/ios/google-signin) çš„è¯´æ˜ã€‚

#### å…«ã€‚è„¸ä¹¦ç™»å½•â€”ç™»å½•åˆ° Facebook(accessToken)

ä½¿ç”¨è„¸ä¹¦çš„ *accessToken* ç™»å½• firebase å¸æˆ·ã€‚ä¸ºäº†å–å›è¿™äº›ä»¤ç‰Œï¼Œè¯·éµå¾ª [Android](https://firebase.google.com/docs/auth/android/facebook-login) å’Œ [iOS](https://firebase.google.com/docs/auth/ios/facebook-login) çš„è¯´æ˜ã€‚

#### ä¹ã€‚Twitter ç™»å½•â€” signInWithTwitter(ä»¤ç‰Œï¼Œæœºå¯†)

ä½¿ç”¨ Twitter çš„*ä»¤ç‰Œ*å’Œ*ç§˜å¯†*ç™»å½• firebase è´¦æˆ·ã€‚ä¸ºäº†å–å›è¿™äº›ä»¤ç‰Œï¼Œè¯·éµå¾ª [Android](https://firebase.google.com/docs/auth/android/twitter-login) å’Œ [iOS](https://firebase.google.com/docs/auth/ios/twitter-login) çš„è¯´æ˜ã€‚

#### X.ç­¾åç™»è®°ç¦»å¼€

æ³¨é”€å½“å‰ç”¨æˆ·å¹¶å°†å…¶ä»ç£ç›˜ç¼“å­˜ä¸­æ¸…é™¤ã€‚

```
this.firebaseAuthentication.signOut().then(function() {
    // user was signed out
});
```

### ç»“è®º:

åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬äº†è§£äº† Firebase ä¸º Ionic åº”ç”¨ç¨‹åºæä¾›çš„è®¸å¤šåŠŸèƒ½ã€‚ä½ å¯ä»¥åˆ›å»ºç”¨æˆ·éªŒè¯æ¨¡å—æ¥åˆ†æï¼ŒåŠ¨æ€é“¾æ¥é‚€è¯·ï¼Œæ¨é€é€šçŸ¥ï¼Œè¿œç¨‹é…ç½®ç­‰ç­‰ã€‚Firebase ç¡®å®æ˜¯ç°ä»£ç§»åŠ¨åº”ç”¨ç¨‹åºçš„ç»ä½³åŒ¹é…ï¼Œå¹¶ä¸”å¯¹å¼€å‘è€…éå¸¸å‹å¥½ã€‚

* * *

æˆä¸ºå¤©ä½¿çš„æœºä¼šå°±åœ¨è¿™é‡Œï¼ï¼
åˆ«å¿˜äº†åˆ†äº«å…³äº [**Firebase å…¥é—¨å¥—ä»¶(Ionic 4)**](https://store.enappd.com/product/firebase-starter-kitionic4-firebase-starter/) **çš„æ¶ˆæ¯ã€‚**é¼“åŠ±å…¶ä»–å´­éœ²å¤´è§’çš„ Ionic åº”ç”¨ç¨‹åºå¼€å‘è€…ã€‚

[![](img/e2f006ab10b1375ced08236f0c398865.png)](https://store.enappd.com/product/firebase-starter-kitionic4-firebase-starter/)

* * *

### è§‰å¾—è¿™ä¸ªå¸–å­æœ‰æ„æ€ï¼Ÿ

è¿˜å¯ä»¥çœ‹çœ‹æˆ‘ä»¬çš„å…¶ä»–åšå®¢æ–‡ç« ï¼ŒåŒ…æ‹¬ä¸ Ionic 4 ä¸­çš„[Firebase](https://medium.com/enappd/how-to-use-firebase-with-ionic-4-complete-guide-for-beginners-1888b1034024)ã€Ionic 4 ä¸­çš„[åœ°ç†å®šä½](https://medium.com/enappd/using-geolocation-and-beacon-plugins-in-ionic-4-754b41304007)ã€Ionic 4 ä¸­çš„[äºŒç»´ç å’Œæ‰«æä»ª](https://medium.com/enappd/qr-code-scanning-and-optical-character-recognition-ocr-in-ionic-4-95fd46be91dd)ä»¥åŠ Ionic 4 ä¸­çš„[æ”¯ä»˜ç½‘å…³](https://medium.com/enappd/payment-solutions-in-ionic-8c4bb28ce5cc)

ä¹Ÿå¯ä»¥çœ‹çœ‹è¿™ä¸ªæœ‰è¶£çš„å¸–å­[å¦‚ä½•ç”¨ Phaser](https://medium.com/enappd/how-to-create-mobile-games-pwa-with-ionic4-and-phaser-7fb1e917678e) åœ¨ Ionic 4 ä¸­åˆ›å»ºæ¸¸æˆ

### éœ€è¦å…è´¹ç¦»å­ 4 å¯åŠ¨å™¨ï¼Ÿ

ä½ ä¹Ÿå¯ä»¥åœ¨æˆ‘ä»¬çš„ç½‘ç«™[enappd.com](http://enappd.com)æ‰¾åˆ°å…è´¹çš„ç¦»å­ 4 å¯åŠ¨å™¨

*   ã€Ionic 4 çš„å…è´¹èŠå¤©ä¸»é¢˜å¯åŠ¨å™¨
*   [æ¸¸ç¦»ç¦»å­ 4 â€”ç‡ƒçƒ§åŸºå¯åŠ¨å™¨](https://store.enappd.com/product/ionic4-firebase-starter/)

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ [Ionic 4 å®Œæ•´ç‰ˆåº”ç”¨](https://store.enappd.com/product/ionic-4-full-app/)åˆ¶ä½œä½ çš„ä¸‹ä¸€ä¸ªç²¾å½©åº”ç”¨

### å‚è€ƒ

*   [ç¦»å­æ–‡ä»¶](https://ionicframework.com/docs)

å…¶ä»–:
[https://en.wikipedia.org/wiki/Firebase](https://en.wikipedia.org/wiki/Firebase)
[https://firebase.google.com/docs/analytics/](https://firebase.google.com/docs/analytics/)
[https://medium . com/exploring-Android/exploring-firebase-on-Android-IOs-](https://medium.com/exploring-android/exploring-firebase-on-android-ios-)analytics-8484 b61a 21 ba
[https://firebase.google.com/docs/cloud-messaging/](https://firebase.google.com/docs/cloud-messaging/)
[https://firebase.google.com/docs/remote-config/](https://firebase.google.com/docs/remote-config/)
[https://dzone.com/articles/firebase-dynamic-links](https://dzone.com/articles/firebase-dynamic-links)
[http://fjbatresv.com/firebase-me/](http://fjbatresv.com/firebase-me/)

*æœ¬åšå®¢æœ€åˆå‘è¡¨äº* [*Enappd*](https://enappd.com/blog/) *ã€‚*