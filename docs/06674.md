# ä½ çš„ NPM å‰§æœ¬å¤±æ§äº†å—ï¼Ÿ

> åŸæ–‡ï¼š<https://dev.to/codingcatdev/are-you-npm-scripts-out-of-control-2pg7>

## ä¸¾ä¾‹

è¿™æ˜¯å¯è¡Œçš„ï¼Œä½†æˆ‘æ„Ÿè§‰å®ƒå¯ä»¥æ›´å¥½ï¼æ–‡æ¡ˆ:deps é•¿çš„å“äºº lolã€‚

[å‰§æœ¬](https://github.com/AJONPLLC/ajonp-ajsbooks-nextjs/blob/64f9eea1b900a37cbb75a16a745f8ee2a0f8cd81/package.json#L37)

```
 "scripts":  {  "dev":  "next",  "build":  "next build",  "start":  "next start",  "export":  "next export",  "analyze":  "cross-env BUNDLE_ANALYZE=both next build",  "analyze:server":  "cross-env BUNDLE_ANALYZE=server next build",  "analyze:browser":  "cross-env BUNDLE_ANALYZE=browser next build",  "build:functions":  "npm run build:functions:lint && cpx \"functions/lib/functions/src/**/*.*\" dist/functions",  "build:functions:lint":  "cd functions && npm run lint && npm run build",  "clean":  "rimraf dist && rimraf functions/lib && rimraf .next",  "copy:deps":  "cpx \"functions/*{package.json,package-lock.json}\" dist/functions && ncp functions/node_modules/ dist/functions/node_modules && cpx \".next/serverless/**/*.*\" dist/functions/_next/serverless/ && cpx \".next/static/**/*.*\" dist/public/_next/static/ && cpx \"static/**/*.*\" dist/public/static && cpx \"dist/functions/_next/static/**/*.*\" dist/public/_next/static && cpx \"dist/functions/_next/serverless/pages/*.html\" dist/public",  "firebase:build":  "npm install && npm run clean && npm run build && npm run build:functions && npm run copy:deps",  "firebase:serve":  "npm run firebase:build && firebase serve",  "firebase:deploy":  "npm run firebase:build && firebase deploy"  }, 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## æˆ‘ä»¬åº”è¯¥ä»€ä¹ˆæ—¶å€™åœæ­¢å‘¢ï¼Ÿ

é‚£ä¹ˆä¸€ä¸ªå‰§æœ¬ä»€ä¹ˆæ—¶å€™ç®—å¤ªé•¿å‘¢ï¼Ÿæˆ‘çœŸçš„ä¸çŸ¥é“ï¼

æœ‰æ—¶æˆ‘ä¼šå°†å®ƒä»¬åˆ†è§£åˆ°æˆ‘çš„ cloudbuild.yaml æ–‡ä»¶ä¸­ï¼Œè¯¥æ–‡ä»¶ä¼šåƒè¿™æ ·è°ƒç”¨å¦ä¸€ä¸ªæ–‡ä»¶ã€‚

```
# Git the submodules, run npm install, hugo build
- name: 'gcr.io/$PROJECT_ID/hugo'
  args: ['bash', './deploy.sh'] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¹Ÿæ¿€å‘äº†å¾ˆå¤šä½¿ç”¨ NPM å¯ä»¥åšçš„äº‹æƒ…ã€‚æˆ‘ä¹‹æ‰€ä»¥ç§»åŠ¨è¿™ä¸ªï¼Œæ˜¯å› ä¸ºå¦‚æœæˆ‘æœ‰ GCloud è¿è¡Œå®ƒï¼Œæˆ‘å°±ä¸ç”¨æ‹…å¿ƒ git ä¼šå› ä¸ºç™»å½•è€Œå´©æºƒğŸ¦„ï¼

```
#!/bin/bash

echo -e "\033[0;32mAdding Submodules...\033[0m"

git submodule init
git submodule update --recursive --remote

echo -e "\033[0;32mInstalling via npm...\033[0m"

npm install

echo -e "\033[0;32mBuilding via npm...\033[0m"

npm run build 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## æ€æƒ³

å‘Šè¯‰æˆ‘æƒ…å†µæœ‰å¤šç³Ÿï¼Œä½ æœ‰ä»€ä¹ˆä¾‹å­å—ï¼Ÿï¼Ÿ