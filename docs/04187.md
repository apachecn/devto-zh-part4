# ä»€ä¹ˆæ˜¯ Next.js ä»¥åŠå¦‚ä½•ç”¨å®ƒæ¥æ„å»º AMP é¡µé¢ï¼Ÿ

> åŸæ–‡:[https://dev . to/quickly _ react/what-next-js-and-how-you-can-build-a-amp-page-with-it-4g 12](https://dev.to/quickly_react/what-is-next-js-and-how-you-can-build-an-amp-page-with-it-4g12)

[![framework](img/60dc736326a75ffb28bb9454575a852d.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--KI74As1d--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://images.unsplash.com/photo-1465829235810-1f912537f253%3Fixlib%3Drb-1.2.1%26ixid%3DeyJhcHBfaWQiOjEyMDd9%26auto%3Dformat%26fit%3Dcrop%26w%3D1351%26q%3D80)

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æƒ³çœ‹çœ‹ React.js çš„ä¸€ä¸ªæ¡†æ¶ï¼Œåä¸º **Next.js** å’Œ**åŠ é€Ÿç§»åŠ¨é¡µé¢(AMP)** ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ **Next.js** æ„å»º **AMP** ã€‚ä½ çŸ¥é“ Marvels å®˜æ–¹[ç½‘ç«™](https://marvel.com)æ˜¯å»ºç«‹åœ¨ Next.js ä¸Šçš„å—ï¼Œå¾ˆé…·å§ï¼Ÿ

## [](#what-is-a-nextjs)ä»€ä¹ˆæ˜¯ Next.jsï¼Ÿ

> Next.js æ˜¯ä¸€ä¸ª React.js æ¡†æ¶ã€‚

[![expand on that](img/f6665a0d07bc0f678b62ea3ddd07c6cb.png)T2ã€‘](https://i.giphy.com/media/8mhh8Ksp30jAimkp1p/source.gif)

*å¤§å®¶:ä½†æ˜¯ï¼Œä»€ä¹ˆæ˜¯æ¡†æ¶ï¼ŒReact.js æ¡†æ¶æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ*

æ¡†æ¶æ˜¯æ„å»ºå’Œéƒ¨ç½²åº”ç”¨ç¨‹åºçš„æ ‡å‡†æ–¹å¼ã€‚æ¢å¥è¯è¯´ï¼Œæ¡†æ¶æ˜¯ä¸€å¥—åœ¨é¡¹ç›®ä¸­é€šç”¨çš„åŸºæœ¬åŸåˆ™ã€‚å½“æˆ‘ä»¬è¯´ React.js æ¡†æ¶æ—¶ï¼Œå®ƒæ˜¯ä¸€ç»„ç”¨äºæ„å»º React.js åº”ç”¨ç¨‹åºçš„åŸåˆ™å’Œçº¦å®šã€‚

æ¯ä¸ªäºº:å¦‚æœæˆ‘ä»¬åœ¨æ²¡æœ‰æ¡†æ¶çš„æƒ…å†µä¸‹æ„å»º React.jsï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¡†æ¶å‘¢ï¼Ÿ

1.  ä½ ä¸éœ€è¦åœ¨æ¯æ¬¡å¼€å§‹ä¸€ä¸ªæ–°é¡¹ç›®æ—¶éƒ½å®šä¹‰è¿™äº›åŸåˆ™ã€‚

2.  æ¡†æ¶çš„è®¾è®¡å·²ç»å®Œæˆï¼Œè¿™æ ·ä½ å°±ä¸éœ€è¦èŠ±å¾ˆå¤šæ—¶é—´å»å¼„æ¸…æ¥šä»€ä¹ˆæ˜¯æ­£ç¡®çš„æ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥ç«‹å³å¼€å§‹ã€‚

3.  ä¸€è‡´æ€§æ˜¯å…³é”®ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹å›¢é˜Ÿä¸­ï¼Œæ¡†æ¶å‡å°‘äº†äº‹åçŒœæµ‹ï¼Œæ›´ä¸ç”¨è¯´é˜…è¯»ã€ç»´æŠ¤å’Œå¼€å‘ä»£ç æ›´åŠ å®¹æ˜“å’Œå¿«æ·ã€‚

## [](#how-to-use-nextjs)å¦‚ä½•ä½¿ç”¨ Next.jsï¼Ÿ

ç°åœ¨æˆ‘ä»¬çŸ¥é“ Next.js æ˜¯ React çš„ä¸€ä¸ªæ¡†æ¶ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹å¦‚ä½•å¼€å§‹:

å’Œ`create-react-app`ç±»ä¼¼çš„è¿˜æœ‰ä¸€ä¸ª`Next.js`å«`create-next-app`ã€‚

1.  è®©æˆ‘ä»¬ç”¨è¿™ä¸ªå‘½ä»¤å¼€å§‹æˆ‘ä»¬çš„é¡¹ç›®:

```
 npx create-next-app nextjs-prj 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

1.  ç„¶åæˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­å®‰è£… Next.js

```
 npm install --save next react react-dom 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

1.  ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨

```
 npx next dev 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

1.  åœ¨`pages/index.js`ä¸­å·²ç»æœ‰ä¸€ä¸ªç°æœ‰çš„æ¬¢è¿æ¨¡æ¿ï¼Œä½†æ˜¯æˆ‘ä»¬å°†æ›¿æ¢å®ƒä»¥äº†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…:

```
function Home() {
    return <div > Welcome to Next.js! < /div> }

export default Home 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä½ æ²¡æœ‰æ³¨æ„åˆ°çš„è¯ï¼Œå¾ˆæœ‰è¶£çš„æ˜¯ï¼Œä½ ä¸å¿…æ‹…å¿ƒ`containers`å’Œå£°æ˜`routes`å°±åƒé€šå¸¸çš„`React.js`åº”ç”¨ä¸€æ ·ï¼Œå› ä¸ºä½ å¯ä»¥ä¸º eg æ·»åŠ `pages`ï¼›`pages/home.js`ä¼šè‡ªåŠ¨ä¸º`/home`å¢åŠ ä¸€æ¡æ–°è·¯çº¿ğŸ˜ƒã€‚

1.  å†æ¥åŠ ç‚¹ css å§ï¼

```
function Home() {
  return ( 
    <div> 
      <p>Welcome to Next.js!</p>       <style jsx>{
      `
        p{
          color: white;
          font-size: 50px;
          text-align: center;
        }
      `
      }</style>
      <style global jsx>{
        `
        body {
          background: black;
        }
        `
      }
      </style>
    </div>
  )
}

export default Home 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œ

[![confusion](img/333f2d9f9dfb93388b36439be0ae52f4.png)T2ã€‘](https://i.giphy.com/media/SqmkZ5IdwzTP2/source.gif)

ä¸€äº›äº‹æƒ…å¯èƒ½çœ‹èµ·æ¥æœ‰ç‚¹ä¸åŒå¯»å¸¸ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ¥ç ´ã€‚

```
 <style jsx>{
      `
        p{
          color: white;
          font-size: 50px;
          text-align: center;
        }
      `
      }
      </style> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*å¤§å®¶:è¿™æ˜¯ä»€ä¹ˆé£æ ¼å…ƒç´ ï¼Ÿ*

Next.js ä¸ [styled-jsx](https://github.com/zeit/styled-jsx) æ†ç»‘åœ¨ä¸€èµ·ã€‚é£æ ¼ JSX æ˜¯ä¸€ä¸ªæ”¯æŒ JSX CSS çš„åŒ…ï¼Œå®ƒå…è®¸ä½ ç”¨`<style jsx>`ä¸ºå…ƒç´ å†™ CSSã€‚

*å¤§å®¶:å’Œå†…è”é€ å‹ç±»ä¼¼å—ï¼Ÿ*

ä¸å®Œå…¨æ˜¯ï¼Œå®ƒæ˜¯åœ¨åŒä¸€ä¸ªé¡µé¢ä¸­ä¸ºç±»å’Œå…ƒç´ ç¼–å†™æ ·å¼ï¼Œè™½ç„¶å®ƒçœ‹èµ·æ¥åƒå†…è”æ ·å¼ï¼Œä½†å®ƒä¸æ˜¯ã€‚

*å¤§å®¶:ä»€ä¹ˆæ˜¯å…¨å±€é“å…·ï¼Œä¸ºä»€ä¹ˆè¦åˆ†å¼€ï¼Ÿ*

å…¨å±€æ ·å¼ç”¨äºè®¾è®¡æ•´ä¸ªé¡µé¢çš„æ ·å¼ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨`body`æ ‡ç­¾ï¼Œå› ä¸ºæ¡†æ¶å·²ç»å£°æ˜äº†å®ƒï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³å¯¹`body`å…ƒç´ åšä»»ä½•æ”¹å˜ï¼Œæˆ‘ä»¬éœ€è¦`global`å±æ€§ã€‚

1.  æˆ‘ä»¬å¯ä»¥æ·»åŠ ç»„ä»¶å—ï¼Ÿ

æ˜¯çš„ï¼Œæˆ‘ä»¬å¯ä»¥ã€‚Next.js å…è®¸ä½ åœ¨`components/`ç›®å½•ä¸‹åˆ¶ä½œç»„ä»¶ã€‚

ä¼¼ä¹åœ¨`components/`ä¸­å·²ç»æœ‰äº†ä¸€ä¸ª`Nav`å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡ç”¨å®ƒã€‚

```
import Nav from '../components/nav' //imported the Nav element from components

function Home() {
  return (
    <div>
      <Nav/>
      <p>Welcome to Next.js</p>
      <a href='/home'>home page</a>
      <style jsx>{
        `
          p {
            color: white;
            font-size: 50px;
            text-align: center;
          }
          a {
            color: purple;
            font-size: 60px;
            text-decoration: none;
          }
        `
      }</style>
      <style global jsx>{
        `
          body {
            background: black;
          }
          `
      }
      </style>
    </div>
  )
}

export default Home 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸å¤§å¤šæ•° React.js åº”ç”¨ç¨‹åºç›¸ä¼¼ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†`components`ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯¼å…¥å¹¶ä½¿ç”¨äº†`Nav`å…ƒç´ ã€‚

Next.js å°±æ˜¯è¿™ä¹ˆè¿ä½œçš„ã€‚

*å¤§å®¶:å¥½å§ï¼Œä½†æ˜¯æˆ‘ä»¬å·²ç»æœ‰ React.js äº†ä¸ºä»€ä¹ˆè¿˜è¦ç”¨ Next.jsï¼Ÿ*

## [](#why-use-nextjs)ä¸ºä»€ä¹ˆè¦ç”¨ Next.jsï¼Ÿ

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç»™å‡ºäº†ä¸€ä¸ª Next.js å¦‚ä½•å·¥ä½œçš„ä¾‹å­ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Next.js å‘¢ï¼Ÿï¼š

1.  ä»ä¸Šé¢çš„ä¾‹å­æ¥çœ‹ï¼Œè·¯ç”±é¡µé¢è‚¯å®šè¦å®¹æ˜“å¾—å¤šã€‚æ·»åŠ åˆ°`pages`ç›®å½•ä¸­å³å¯ã€‚å¯¹äº egï¼›`pages/home.js`ä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªä»`pages/home.js`å‘ˆç°çš„é¡µé¢`/home`ã€‚

2.  æˆ‘ä»¬æ²¡æœ‰è®¨è®ºçš„æ˜¯ Next.js é»˜è®¤ä½¿ç”¨æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œå¦‚æœä½ ä½¿ç”¨`create-react-app`å®ƒç›®å‰é»˜è®¤ä¸ä½¿ç”¨æœåŠ¡å™¨ç«¯æ¸²æŸ“ã€‚

*å¤§å®¶:ä»€ä¹ˆæ˜¯æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œä¸ºä»€ä¹ˆæ›´å¥½ï¼Ÿ*

ç½‘ç«™çš„æœåŠ¡å™¨ç«¯å‘ˆç°æ˜¯å½“ä½ åœ¨æœåŠ¡å™¨ä¸Šæ‰˜ç®¡æ‰€æœ‰èµ„æºçš„æ—¶å€™ã€‚å¦ä¸€ç§æ–¹å¼æ˜¯å®¢æˆ·ç«¯å‘ˆç°ï¼Œé€šè¿‡ javascript è¯·æ±‚èµ„æºã€‚æœåŠ¡å™¨ç«¯å‘ˆç°é€šå¸¸æ›´é€‚åˆé™æ€ç½‘ç«™ï¼Œå› ä¸ºä½ ä¸æƒ³è¯·æ±‚ä¸€ä¸ªç½‘ç«™ç„¶åç­‰å¾… JS æ¥å‘ˆç° HTMLï¼Œè€Œæ˜¯å½“ä½ è¯·æ±‚æœåŠ¡å™¨æ—¶ä½ æƒ³è¦ HTMLã€‚

1.  Next.js æœ‰æ¨¡å—çš„å»¶è¿ŸåŠ è½½ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæœ‰è‡ªåŠ¨ä»£ç åˆ†å‰²ï¼Œè¿™ä½¿å¾—é¡µé¢åŠ è½½æ›´å¿«ã€‚

ä»ä»¥ä¸Šå‡ ç‚¹æ¥çœ‹ï¼Œä¼¼ä¹ Next.js å¯èƒ½åªç”¨äºé™æ€ç½‘ç«™ï¼Œä½†ä¹Ÿå¯ä»¥ç”¨äº web appsã€‚

*ç°åœ¨æˆ‘ä»¬å·²ç»æŒæ¡äº† Next.jsï¼Œè®©æˆ‘ä»¬è¯•ç€æ‰©å±•æˆ‘ä»¬çš„é¡¹ç›®ä»¥ç”¨ä½œ AMP é¡µé¢*

## [](#what-are-amp-pages)ä»€ä¹ˆæ˜¯ AMP é¡µï¼Ÿ

AMP é¡µé¢æ˜¯åŠ é€Ÿç§»åŠ¨é¡µé¢ã€‚AMP é¡µé¢é’ˆå¯¹ç§»åŠ¨åº”ç”¨è¿›è¡Œäº†ä¼˜åŒ–ï¼Œé€Ÿåº¦è¾ƒæ…¢çš„ç½‘ç«™è·³å‡ºç‡å¾ˆé«˜ï¼Œæœ‰äº† AMPï¼Œæ‚¨å¯ä»¥æ›´å¿«åœ°ä¸ºè®¿é—®è€…æä¾›æœåŠ¡ã€‚AMP æ®è¯´æ˜¯è°·æ­Œç§»åŠ¨æœç´¢ç´¢å¼•ä¸Šçš„ä¸€ä¸ªä¿¡å·ã€‚å¦‚æœä½ ç”¨è°·æ­Œæœç´¢ä»»ä½•æ–‡ç« æˆ–ä¸»é¢˜ï¼Œä½ å¯ä»¥åœ¨æœç´¢ç´¢å¼•çš„é¡¶éƒ¨çœ‹åˆ°è¿™äº› AMP é¡µé¢ã€‚

[![amp gif](img/82baf62c89ca6d280269b25f29325ed9.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--BI2bWOef--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://amphtml.files.wordpress.com/2016/02/f0787-amp_v6_phone_cropped-mov.gif)

*å¤§å®¶:AMP é¡µé¢å’Œæ™®é€šç½‘é¡µæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ*

```
<!doctype html>
<html amp lang="en">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>Hello, AMP pages</title>
    <link rel="canonical" href="https://amp.dev/documentation/guides-and-tutorials/start/create/basic_markup/">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "NewsArticle",
        "headline": "Open-source framework for publishing content",
        "datePublished": "2015-10-07T12:02:41Z",
        "image": [
          "logo.jpg"
        ]
      }
    </script>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
  </head>
  <body>
    <h1>Welcome to the mobile web</h1>
  </body>
</html> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ç¤ºä¾‹[ã€‚](https://amp.dev/documentation/guides-and-tutorials/start/create/basic_markup/?format=websites)

æœ‰å‡ ä¸ªè§„åˆ™å¯ä»¥ç»„æˆä¸€ä¸ªé¡µé¢:

1.  `<html amp>`å°†é¡µé¢è¯†åˆ«ä¸º AMP å†…å®¹ã€‚

2.  `<script async src="https://cdn.ampproject.org/v0.js">`éœ€è¦åœ¨`<head>`æ ‡ç­¾å†…ã€‚

3.  åœ¨`<head>`æ ‡ç­¾ä¸­éœ€è¦ä¸€ä¸ª`<meta name="viewport" content="width=device-width,minimum-scale=1">`æ ‡ç­¾ã€‚

4.  é¡µé¢éœ€è¦ä»¥`<!doctype html>`å¼€å¤´ã€‚

5.  eg çš„`<head>`æ ‡ç­¾ä¸­éœ€è¦æœ‰ä¸€ä¸ªåˆ°å®é™…é¡µé¢çš„é“¾æ¥ï¼›`<link rel="canonical" href="*actual page url*">`

6.  `amp-boilerplate` (AMP æ ·æ¿ä»£ç )éœ€è¦åœ¨`<head>`æ ‡ç­¾ä¸­

ä»æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­:

```
 <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`amp-boilerplate`ç”¨äºä¸º AMP å£°æ˜ CSSã€‚

## [](#how-to-build-amp-pages-with-nextjs)å¦‚ä½•ç”¨ Next.js æ„å»º AMP é¡µé¢ï¼Ÿ

å¹¸è¿çš„æ˜¯ï¼Œå¦ä¸€ä¸ªå¾ˆé…·çš„ç‰¹æ€§æ˜¯`Next.js`ä¹Ÿæ”¯æŒ AMPğŸ˜Šã€‚

è®©æˆ‘ä»¬å°†ç¤ºä¾‹æ‰©å±•ä¸ºç”¨ä½œæ”¾å¤§å™¨ã€‚

*   `pages/index.js`

```
import Nav from '../components/nav'
import { useAmp } from 'next/amp'

export const config = {
  amp: true
}

export default () => {  
  const isAmp = useAmp()
  return (
    <div>
      <Nav/>
      <p>Welcome to Next.js</p>
      <a href={isAmp ? '/home?amp=1' : '/home'}>home page</a>
      <style jsx>{
        `
          p {
            color: white;
            font-size: 50px;
            text-align: center;
          }
          a {
            color: purple;
            font-size: 60px;
            text-decoration: none;
          }
        `
      }</style>
      <style global jsx>{
        `
          body {
            background: black;
          }
          `
      }
      </style>
    </div>
  )
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`next/amp`åŠŸèƒ½ä¸­çš„`useAmp`åŠŸèƒ½æœ‰åŠ©äºå†³å®šæ˜¯å¦ä½¿ç”¨ AMPã€‚

å¯¹äºæˆ‘ä»¬çš„ç´¢å¼•é¡µé¢ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®æåˆ°å°†é¡µé¢ç”¨ä½œ AMPï¼Œè¿™æ˜¯é€šè¿‡`config`å®Œæˆçš„ã€‚ç”¨`config`ä½ å¯ä»¥æ˜ç¡®åœ°ç”¨`amp: true`æ¥æã€‚

```
 export const config = {
    amp: true
  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*   `pages/home.js`

```
import { useAmp } from 'next/amp'

export const config = {
  amp: 'hybrid'
}

export default () => {
  const isAmp = useAmp()
  return (
    <div>
      <p>{isAmp ? 'Not AMP Home Page' : 'Home Page'}</p>
      <style jsx>{
        `
        p {
            color: white;
            font-size: 50px;
            text-align: center;
          }
          a {
            color: blue;
            font-size: 60px;
          }
        `
      }</style>
      <style global jsx>{
        `
        body {
          background: black;
        }
        `
      }
      </style>
    </div>
  )
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨æˆ‘ä»¬çš„`index`é¡µé¢ä¸­ï¼Œæˆ‘ä»¬æ˜ç¡®æåˆ°ä½¿ç”¨ AMP å’Œ`amp: true`ï¼Œä½†æ˜¯åœ¨`home`é¡µé¢ä¸­æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯`amp: hybrid`ã€‚æˆ‘ä»¬è¿™æ ·åšæ˜¯å› ä¸ºï¼Œç°åœ¨ AMP éœ€è¦æ ¹æ®ä¸»é¡µ(ç´¢å¼•é¡µ)æ˜¯å¦æ˜¯ AMP æ¥å†³å®šã€‚

å¦‚æœæ‚¨ä¹ŸæŸ¥çœ‹`index`é¡µé¢ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°

```
 <a href={isAmp ? '/home?amp=1' : '/home'}>home page</a> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœé¡µé¢`isAmp`ï¼Œåœ¨å‚æ•°ä¸­æˆ‘ä»¬é€šè¿‡`amp=1`ã€‚

é…·ï¼æˆ‘ä»¬è¿˜å°†ç¤ºä¾‹æ‰©å±•ä¸ºç”¨ä½œæ”¾å¤§å™¨ã€‚

## [](#conclusion)ç»“è®º

1.  Next.js æ˜¯ä¸€ä¸ªéå¸¸é…·çš„ React.js æ¡†æ¶ï¼Œç”¨äºå¿«é€Ÿæ„å»ºç½‘ç«™ã€‚å®ƒæœ‰å¾ˆå¤šæœ‰è¶£çš„ç‰¹æ€§ï¼Œè€Œä¸”ä»`Next.js`å¼€å§‹æ¯”ä»å¤´å¼€å§‹å®¹æ˜“å¾—å¤šã€‚

2.  Next.js ä¸ styled-jsx æ†ç»‘åœ¨ä¸€èµ·ã€‚Styled-JSX å…è®¸ä½ ä¸ºé¡µé¢/ç»„ä»¶å†…éƒ¨çš„ç±»å’Œå…ƒç´ ç¼–å†™æ ·å¼ï¼Œä¹Ÿå¯ä»¥å…¨å±€åœ°ä¸º`body`å’Œå°è£…å…ƒç´ ç¼–å†™æ ·å¼ã€‚ğŸ¤˜

3.  AMP é¡µé¢é’ˆå¯¹ç§»åŠ¨åº”ç”¨è¿›è¡Œäº†ä¼˜åŒ–ï¼Œé€Ÿåº¦è¾ƒæ…¢çš„ç½‘ç«™è·³å‡ºç‡å¾ˆé«˜ï¼Œæœ‰äº† AMPï¼Œæ‚¨å¯ä»¥æ›´å¿«åœ°ä¸ºè®¿é—®è€…æä¾›æœåŠ¡ã€‚

4.  æœ‰äº† Next.js ä¸º AMP æä¾›çš„æ”¯æŒï¼Œæ„å»º AMP é¡µé¢å˜å¾—å®¹æ˜“å¤šäº†ã€‚

5.  å¦‚æœä½ æƒ³æ£€æŸ¥è¿™ä¸ªé¡¹ç›®ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œæ£€æŸ¥æˆ‘ä»¬åœ¨[å·¥ä½œçš„ Next.js ç¤ºä¾‹ï¼Œå¯¹äº AMP é¡µé¢ç¤ºä¾‹ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œ](https://github.com/nishantrpai/nextjs-prj)æ£€æŸ¥[ï¼Œåœ¨è¿™é‡Œ](https://github.com/nishantrpai/nextjs-prj/tree/amp-pages)æ£€æŸ¥å®˜æ–¹ Next.js ç¤ºä¾‹[ã€‚](https://github.com/zeit/next.js/tree/canary/examples)

[![bye](img/686aba7391d6ae45dd4e591effeb6341.png)T2ã€‘](https://i.giphy.com/media/7DzlajZNY5D0I/source.gif)

æŸ¥çœ‹æˆ‘ä»¬çš„å®˜æ–¹åšå®¢é¡µé¢:[https://blog.quicklyreact.com/](https://blog.quicklyreact.com/)