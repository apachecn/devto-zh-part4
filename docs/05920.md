# å¸¸è§ Git é—®é¢˜çš„ 4 ä¸ªæœ‰ç”¨è§£å†³æ–¹æ¡ˆ

> åŸæ–‡:[https://dev . to/Jacob herrington/4-useful-patterns-in-git-19ac](https://dev.to/jacobherrington/4-useful-patterns-in-git-19ac)

<sup>å°é¢å›¾ç‰‡:[é»‘è‰²å’Œé“¶è‰²çš„ç¬”è®°æœ¬ç”µè„‘æ”¾åœ¨åœ†å½¢æ£•è‰²æœ¨æ¡Œä¸Š](https://www.pexels.com/photo/black-and-silver-laptop-computer-on-round-brown-wooden-table-1181243/)ä½œè€…[å…‹é‡Œæ–¯è’‚å¨œÂ·è«é‡Œæ´›](https://www.pexels.com/@divinetechygirl)</sup>
å¦‚ä»Šï¼Œå¤§å¤šæ•°å¼€å‘äººå‘˜éƒ½åœ¨ä½¿ç”¨æŸç§å½¢å¼çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œè€Œå½“ä»Šæœ€æµè¡Œçš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå°±æ˜¯ gitã€‚

æˆ‘å†™è¿‡å‡ ç¯‡æ–¹ä¾¿çš„ git æ–‡ç« :

*   [10 ä¸ªèŠ‚çœæ—¶é—´å’Œä¿æŒç†æ™ºçš„çªé—¨](https://dev.to/jacobherrington/10-git-tricks-to-save-your-time-and-sanity-289h)
*   [Git äºŒç­‰åˆ†å¾ˆå®¹æ˜“](https://dev.to/jacobherrington/git-bisect-is-easy-44ol)
*   [Hunky Git å¿«é€ŸæŒ‡å—](https://dev.to/jacobherrington/a-quick-guide-to-hunky-git-49no)
*   [ä½ åº”è¯¥çŸ¥é“çš„å¦å¤– 10 ä¸ª Git æŠ€å·§](https://dev.to/jacobherrington/10-more-git-tricks-that-you-should-know-3bbp)

è¿™ä¸€ç¯‡å°†æ˜¯é‚£äº›æ–‡ç« çš„å»¶ç»­ï¼Œæ›´ä¾§é‡äºå®ç”¨ä¸»ä¹‰ã€‚åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘åˆ†äº«äº†ä½ å¯ä»¥ç”¨ git åšçš„æœ‰è¶£çš„äº‹æƒ…ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å…³æ³¨æ¯ä¸ªå¼€å‘äººå‘˜åº”è¯¥çŸ¥é“å¦‚ä½•åšçš„äº‹æƒ…ã€‚

### [](#1-add-a-change-to-the-last-commit)1ã€‚å°†æ›´æ”¹æ·»åŠ åˆ°ä¸Šæ¬¡æäº¤

ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤å¯¹äºé‚£äº›å¿˜è®°å‡†å¤‡å˜æ›´çš„äºº(ä¹Ÿå°±æ˜¯æ‰€æœ‰ä½¿ç”¨è¿‡ git çš„äºº)æ¥è¯´å¾ˆæ–¹ä¾¿ã€‚

è¿™çœŸçš„å¾ˆç®€å•ã€‚æ‚¨æ‰€è¦åšçš„å°±æ˜¯æš‚å­˜æ‚¨å¿˜è®°æš‚å­˜çš„æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨`git commit --amend`å‘½ä»¤ã€‚

å‡è®¾æˆ‘å¿˜è®°äº†å¯¹è‡ªè¿°æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œæˆ‘ä¼šè¿™æ ·åš:

```
git add README.md
git commit --amend 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä¼šè¢«æç¤ºä¿®æ”¹æäº¤æ¶ˆæ¯ï¼Œç„¶å:Tadaï¼README.md æ›´æ”¹å·²æ·»åŠ åˆ°ä¸Šæ¬¡æäº¤ä¸­ã€‚

### [](#2-split-the-last-commit-into-multiple-commits)2ã€‚å°†æœ€åä¸€æ¬¡æäº¤æ‹†åˆ†ä¸ºå¤šæ¬¡æäº¤

å‡è®¾ä½ æœ‰ä¸€ä¸ªä¸åŒçš„é—®é¢˜ã€‚å¦‚æœæ‚¨ä¸å°å¿ƒæš‚å­˜äº†æŸä¸ªå†…å®¹ï¼Œç„¶ååœ¨æ‰“ç®—æäº¤ä¸¤æ¬¡æ—¶æäº¤äº†ä¸€æ¬¡ã€‚

æ‚¨æ‰€éœ€è¦åšçš„å°±æ˜¯ä½¿ç”¨`git reset`å‘½ä»¤:
è¿”å›ä¸€æ¬¡æäº¤

```
git reset HEAD~1 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶åä½¿ç”¨`git add`æ¥å±•ç¤ºä½ çš„æ”¹å˜(æˆ‘æ¨èä½¿ç”¨`git add --patch`ï¼Œ[ï¼Œæˆ‘å†™äº†ä¸€ç¯‡å…³äºå®ƒçš„æ–‡ç« ï¼Œå¦‚æœä½ ä¸ç†Ÿæ‚‰](https://dev.to/jacobherrington/a-quick-guide-to-hunky-git-49no)ï¼Œç„¶åæäº¤:

```
git add --patch
git commit -m "This is the first commit" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶åæ ¹æ®éœ€è¦å¤šæ¬¡é‡å¤è¯¥è¿‡ç¨‹:

```
git add --patch
git commit -m "This is the second commit" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸€æ¬¡æ‰¿è¯ºå˜æˆäº†å¤šæ¬¡æ‰¿è¯ºã€‚ğŸ’¥

### [](#3-squash-some-previous-commits-into-one-commit)3ã€‚å°†ä»¥å‰çš„ä¸€äº›æäº¤å‹ç¼©æˆä¸€ä¸ªæäº¤

æ¯ä¸ªå¼€å‘äººå‘˜éƒ½åº”è¯¥çŸ¥é“å¦‚ä½•æŒ¤å‹æäº¤ã€‚å¦‚æœä½ å¯¹å¼€æ”¾æºç åšå‡ºäº†è´¡çŒ®ï¼Œå¹¶ä¸”å·²ç»æäº¤äº†ä¸€äº›å¤šä½™çš„æˆ–è€…æªè¾ä¸å½“çš„æäº¤æ¶ˆæ¯ï¼Œä½ å¯èƒ½ä¼šè¢«è¦æ±‚è¿™ä¹ˆåšã€‚

æˆ‘å°†åˆ†äº«å‡ ç§æ–¹æ³•ï¼Œä¸€ç§ä½¿ç”¨`git rebase`ï¼Œå¦ä¸€ç§ä¸ä½¿ç”¨ã€‚

å¦‚æœæ²¡æœ‰`git rebase`ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°å°†æœ€åå‡ ä¸ªæäº¤å‹ç¼©æˆä¸€ä¸ªã€‚é¦–å…ˆï¼Œæ‚¨å°†å¸Œæœ›ä½¿ç”¨`git reset`å‘½ä»¤åœ¨æ‚¨æƒ³è¦å‹ç¼©çš„æäº¤ä¸­å‘åç§»åŠ¨ã€‚

æ‚¨å¯ä»¥é€šè¿‡å°†`HEAD~x`ä¼ é€’ç»™`git rebase`å‘½ä»¤æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œå…¶ä¸­`x`æ˜¯æ‚¨æƒ³è¦æŒ¤å‹åœ¨ä¸€èµ·çš„æäº¤æ•°é‡ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³å°†å‰é¢çš„ä¸‰æ¬¡æäº¤å‹ç¼©æˆä¸€æ¬¡æäº¤ï¼Œæ‚¨å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤:

```
git reset HEAD~3 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœæ‚¨æ£€æŸ¥æ—¥å¿—ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°æ‚¨ç°åœ¨æ¯”ä¹‹å‰çš„ä½ç½®è½åäº†ä¸‰æ¬¡æäº¤ã€‚

ä¸€ä¸ªå¿«é€Ÿçš„`git log`å°†ä¼šæ˜¾ç¤ºæ¥è‡ªå‰ä¸‰æ¬¡æäº¤çš„æ‰€æœ‰æ›´æ”¹ä»ç„¶å­˜åœ¨äºæ‚¨çš„æœºå™¨ä¸Šï¼Œä½†æ˜¯ç°åœ¨æ²¡æœ‰è¢«æš‚å­˜ã€‚

ä¸ºäº†å°†å®ƒä»¬å‹ç¼©åˆ°ä¸€ä¸ªæäº¤ä¸­ï¼Œæ‚¨éœ€è¦åšçš„å°±æ˜¯å°†å®ƒä»¬åˆ†æ®µå¹¶æäº¤:

```
git commit -am "Some commit message" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ­å–œä½ ï¼ğŸ‰ä½ æŠŠä¸‰æ¬¡æäº¤å‹ç¼©æˆäº†ä¸€æ¬¡ï¼

æˆ–è€…ï¼Œæ‚¨å¯ä»¥å°†`git rebase`ä¸äº¤äº’æ ‡å¿—ä¸€èµ·ä½¿ç”¨ã€‚çœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·çš„:

```
git rebase -i master 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç”¨æ‚¨æœ€ç»ˆå°†åˆå¹¶çš„åˆ†æ”¯æ›¿æ¢ masterã€‚

`git rebase -i`ä¼šè®©ä½ è¿›å…¥ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·:

```
pick 1eabc17a8 Add data-attributes to container elements
pick 90c58b487 Fix react-dom warning

Rebase 5f5e140ea..90c58b487 onto 5f5e140ea (2 commands)

Commands:
p, pick <commit> = use commit
r, reword <commit> = use commit, but edit the commit message
e, edit <commit> = use commit, but stop for amending
s, squash <commit> = use commit, but meld into previous commit
f, fixup <commit> = like "squash", but discard this commit's log message
x, exec <command> = run command (the rest of the line) using shell
b, break = stop here (continue rebase later with 'git rebase --continue')
d, drop <commit> = remove commit
l, label <label> = label current HEAD with a name
t, reset <label> = reset HEAD to a label
m, merge [-C <commit> | -c <commit>] <label> [# <oneline>]
.       create a merge commit using the original merge commit's
.       message (or the oneline, if no original merge commit was
.       specified). Use -c <commit> to reword the commit message.

These lines can be re-ordered; they are executed from top to bottom.

If you remove a line here THAT COMMIT WILL BE LOST.

However, if you remove everything, the rebase will be aborted.

Note that empty commits are commented out 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä½ ä»¥å‰ä»æœªæ‰§è¡Œè¿‡ rebaseï¼Œè¿™å¯èƒ½æœ‰ç‚¹å“äººï¼Œä½†å®é™…ä¸Šéå¸¸ç®€å•ã€‚

ä¸ºäº†å‹ç¼©è¿™ä¸¤ä¸ªæäº¤ï¼Œåªéœ€å°†ç¬¬äºŒè¡Œä¸­çš„å•è¯`pick`æ›¿æ¢ä¸º`squash` :

```
pick 1eabc17a8 Add data-attributes for styling checkout
squash 90c58b487 Fix react-dom warning; non-critical, but annoying 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¿å­˜æ–‡ä»¶(å¦‚æœæ‚¨åœ¨ Vim ä¸­ï¼Œè¿™æ˜¯ç”¨`:wq`å®Œæˆçš„)ï¼Œç„¶åæ‚¨å°†è¿›å…¥ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨æ¥ç¼–å†™æäº¤æ¶ˆæ¯ã€‚å½“ä½ é«˜å…´çš„æ—¶å€™ï¼Œä¿å­˜æäº¤ï¼Œä½ å°±å®Œæˆäº†ï¼

å‘œå“‡ï¼ğŸ¤ ç°åœ¨ï¼Œæ‚¨å·²ç»çœ‹åˆ°äº†ä¸¤ç§ä¸åŒçš„æ–¹å¼æ¥æŒ¤å‹æäº¤ã€‚

ä½ å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆä½ ä¼šé€‰æ‹©ä½¿ç”¨`rebase`å½“ç¬¬ä¸€ç§æ–¹æ³•æ˜¯å¦‚æ­¤å®¹æ˜“ï¼Œè¿™æ˜¯å¯ä»¥ç†è§£çš„ã€‚ä½¿ç”¨`git rebase`å¯ä»¥è®©ä½ å¯¹å¤§çš„å˜åŒ–æœ‰æ›´å¤šçš„æ§åˆ¶ï¼Œæˆ‘æ¨èä½ åœ¨é‡åˆ°è¿™äº›é—®é¢˜æ—¶ä½¿ç”¨å®ƒã€‚

### [](#4-get-the-most-recent-changes-from-another-branch)4ã€‚ä»å¦ä¸€ä¸ªåˆ†æ”¯è·å–æœ€æ–°çš„æ›´æ”¹

å½“æ‚¨ä½¿ç”¨ç‰¹å¾åˆ†æ”¯æ—¶ï¼Œè¿™å¯èƒ½æ˜¯æ‚¨ä¸€å¤©è¦åšå¤šæ¬¡çš„äº‹æƒ…ï¼

æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚

æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯`git merge`å‘½ä»¤ã€‚æ‚¨æ‰€è¦åšçš„å°±æ˜¯ä½¿ç”¨æ‚¨æƒ³è¦ä»ä¸­è·å–å˜æ›´çš„åˆ†æ”¯çš„åç§°è¿è¡Œ`git merge`å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ ä»å¸ˆçˆ¶é‚£é‡Œå¾—åˆ°æœ€æ–°çš„å˜åŒ–:

```
git merge master 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°†åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤ï¼Œç§°ä¸ºåˆå¹¶æäº¤ã€‚åˆå¹¶æäº¤åŸºæœ¬ä¸Šåªæ˜¯ä¸€ä¸ªå‘ç”Ÿäº†åˆå¹¶çš„æŒ‡ç¤ºï¼Œåœ¨æ‚¨çš„ git å†å²ä¸­æœ‰è¿™äº›æäº¤æ²¡æœ‰ä»»ä½•é—®é¢˜(åœ¨æˆ‘çœ‹æ¥)ã€‚

ç„¶è€Œï¼Œæœ‰äº›äººä¸å–œæ¬¢åˆå¹¶æäº¤å‡ºç°åœ¨ä»–ä»¬çš„å­˜å‚¨åº“çš„å†å²ä¸­ã€‚å¯¹äºé‚£äº›äººï¼Œä½ å¯ä»¥ç”¨`git rebase`èµ¶ä¸Šå¦ä¸€ä¸ªåˆ†æ”¯ã€‚è¿™æ˜¯å…¸å‹çš„æˆ‘å–œæ¬¢è®©æˆ‘çš„ç‰¹æ€§åˆ†æ”¯èµ¶ä¸Šä¸»çš„æ–¹å¼:

```
git rebase master 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åªè¦æ²¡æœ‰ä»€ä¹ˆå¥‡æ€ªçš„äº‹æƒ…å‘ç”Ÿï¼Œè¿™å°†åœ¨ä¸»åˆ†æ”¯çš„é¡¶éƒ¨æ— ç—›è‹¦åœ°é‡æ”¾æ‚¨çš„æ›´æ”¹ï¼Œåœ¨ä¸åˆ›å»ºåˆå¹¶æäº¤çš„æƒ…å†µä¸‹èµ¶ä¸Šæ‚¨ã€‚

ğŸ¤—

### [](#theres-more)è¿˜æœ‰æ›´å¤š...

è¿™äº›å¤©æ¥ï¼Œæˆ‘å†™äº†å¾ˆå¤šæ–‡ç« ï¼Œè¿è¡Œäº†ä¸€ä¸ª T2 æ’­å®¢ï¼Œå¹¶å¼€å§‹å‘é€ä¸€ä¸ª T4 æ—¶äº‹æ‘˜è¦ï¼Œä»‹ç»æˆ‘å¬åˆ°çš„æ‰€æœ‰ç²¾å½©æ•…äº‹ã€‚

ä½ ä¹Ÿå¯ä»¥åœ¨ Twitter ä¸Šå…³æ³¨æˆ‘ï¼Œåœ¨é‚£é‡Œæˆ‘åˆ¶ä½œä¸€äº›æ„šè ¢çš„è¿·å› ï¼Œè°ˆè®ºå¦‚ä½•æˆä¸ºä¸€åå¼€å‘è€…ã€‚