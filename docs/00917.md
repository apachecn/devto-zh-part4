# React é’©å­(intermedian): useStateForm

> åŸæ–‡:[https://dev . to/miguelromegutierrez/react-hooks-intermedian-usestateform-4651](https://dev.to/miguelromerogutierrez/react-hooks-intermedian-usestateform-4651)

> æ³¨æ„:ç¡®ä¿ä½ äº†è§£ react é’©å­çš„åŸºç¡€çŸ¥è¯†ï¼Œåœ¨ä¸ä¹…çš„å°†æ¥ï¼Œæˆ‘ä¼šå‘å¸ƒå…³äºè¿™ä¸ªçš„å¸–å­ã€‚

## [](#problem-weary)é—®é¢˜ğŸ˜©

ä½ å¯èƒ½çŸ¥é“ç®¡ç†ä¸€ä¸ªè¡¨å•çš„çŠ¶æ€æ˜¯ä¸€ä»¶ç—›è‹¦çš„äº‹æƒ…ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡çŠ¶æ€ï¼Œæ–¹æ³•æ¥ç®¡ç†è¾“å…¥çš„å˜åŒ–ï¼Œå¹¶ä¸”å°å¿ƒä½ æ­£åœ¨æ”¹å˜çš„æ•°æ®ã€‚åƒ Formik è¿™æ ·çš„åº“æŠ½è±¡äº†çŠ¶æ€ï¼Œå¹¶æä¾›äº†ä¸€äº›æœ‰ç”¨çš„ç»„ä»¶æ¥å¤„ç†å®ƒã€‚ä½†æ­£å¦‚æˆ‘æ‰€çŸ¥çš„ Formik ä½¿ç”¨èµ·æ¥å¾ˆå¤æ‚ï¼Œé˜…è¯»èµ·æ¥ä¹Ÿå¾ˆå¤æ‚ï¼Œæœ‰æ—¶ä½ éœ€è¦é«˜é˜¶ç»„ä»¶ï¼Œæœ‰æ—¶éœ€è¦ render-prop ç»„ä»¶ï¼Œä½†è¿™ä¸¤ä¸ªé€‰é¡¹éƒ½ä¼šäº§ç”Ÿéš¾ä»¥ç†è§£çš„ä»£ç ã€‚

## [](#solution)è§£

**ä½¿ç”¨ React é’©å­**ğŸ˜

### [](#context-openmouth)ä¸Šä¸‹æ–‡ğŸ˜®

å¦‚æœæ‚¨å–œæ¬¢ React çš„æ–°ç‰ˆæœ¬ï¼Œé‚£ä¹ˆæ‚¨è‚¯å®šå¬è¯´è¿‡ React æŒ‚é’©ï¼Œæ­£å¦‚æ–‡æ¡£ä¸­æ‰€è¯´:

> **é’©å­å…è®¸ä½ åœ¨ä¸æ”¹å˜ç»„ä»¶å±‚æ¬¡ç»“æ„çš„æƒ…å†µä¸‹é‡ç”¨æœ‰çŠ¶æ€é€»è¾‘**

React æŒ‚é’©æ˜¯å…è®¸æˆ‘ä»¬*æŒ‚é’©*ç»„ä»¶çš„çŠ¶æ€å’Œå‘ˆç°é˜¶æ®µçš„å‡½æ•°ï¼Œæœ€æ£’çš„éƒ¨åˆ†æ˜¯æˆ‘ä»¬å¯ä»¥åˆ›å»º**å®šåˆ¶æŒ‚é’©**æ¥è§£å†³ç‰¹å®šçš„é—®é¢˜ã€‚

ä½†æ˜¯å¦‚ä½•ä½¿ç”¨é’©å­æ¥ç®¡ç†æˆ‘ä»¬çš„è¡¨å•å‘¢ï¼Ÿè¿™å°±æ˜¯æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„åŸå› ğŸ¤“

### [](#ok-here-we-go-sweatsmile)å¥½äº†æˆ‘ä»¬å¼€å§‹å§ï¼ğŸ˜…

æƒ³æƒ³è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦å°†çŠ¶æ€ç®¡ç†æŠ½è±¡åˆ°ä¸€ä¸ªå®šåˆ¶é’©å­ä¸­ï¼Œè¿™ä¸ªå®šåˆ¶é’©å­éœ€è¦è®©æˆ‘ä»¬è®¿é—®å®ƒçš„çŠ¶æ€ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é’©å­çš„ä¸€ä¸ªç®€å•å®ç°æ¥å¤„ç†çŠ¶æ€è¡¨å•ã€‚

```
function MyForm(props) {
  const [formState, setFormState] = useState({...});
  const handleChanges = (event) => {...};

  return (
    ...
    <input
      onChange={handleChanges}
      value={formState.prop1}
      name="prop1"
    />
    ...
  )
} 
```

ä¸ºäº†æŠ½è±¡çŠ¶æ€ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º **useStateForm** çš„å®šåˆ¶é’©å­ï¼Œåœ¨é‚£é‡Œä½¿ç”¨é’©å­ *useState* æ¥å¤„ç†çŠ¶æ€å¹¶è¿”å›å®ƒä»¥ä¿æŒå®ƒå¯¹ç»„ä»¶å¯è§ã€‚æˆ‘ä»¬è¿˜éœ€è¦å°†è¡¨å•çš„ initialState ä¼ é€’ç»™è‡ªå®šä¹‰é’©å­ã€‚

```
function useStateForm(initialState) {
  const [formState, setFormState] = useState(initialState);

  return formState
} 
```

é…·ï¼çŠ¶æ€æ˜¯åœ¨æˆ‘ä»¬è‡ªå®šä¹‰é’©å­ä¸­å¤„ç†çš„ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸€äº› handleChange å®ç°æ¥æ”¹å˜æˆ‘ä»¬çš„çŠ¶æ€ğŸ¤”ã€‚

```
function useStateForm(initialState) {
  const [formState, setFormState] = useState(initialState);
  const handleChanges = (event) => {
    setFormState({
      ...formState,
      [event.target.name]: event.target.value
    })
  };
  return { formState, handleChanges };
} 
```

å‰å®³ï¼æˆ‘ä»¬çš„çŠ¶æ€æ˜¯å®Œå…¨æŠ½è±¡çš„ï¼Œæ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™åŸºæœ¬ä¸Šæ˜¯åŒä¸€ä¸ªç»„ä»¶ï¼Œæ²¡æœ‰ render return è¯­å¥ï¼Œè¿™å°±æ˜¯é’©å­çš„åŠ›é‡ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥é‡ç”¨å…¬å…±çŠ¶æ€åŠŸèƒ½ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„ç»„ä»¶ä¹‹é—´éå¸¸å®¹æ˜“åœ°å…±äº«å®ƒï¼Œè¿™å°†ä½¿æˆ‘ä»¬èŠ‚çœå¤§é‡çš„ç±»å‹ç¼–ç ã€‚ç°åœ¨æˆ‘ä»¬çš„ç»„ä»¶å°†çœ‹èµ·æ¥åƒè¿™æ ·:

```
function MyForm(props) {
  const {formState, handleChanges} = useStateForm({ prop1: '' });

  return (
    ...
    <input
      onChange={handleChanges}
      value={formState.prop1}
      name="prop1"
    />
    ...
  )
} 
```

ç°åœ¨æˆ‘ä»¬å¯ä»¥èµ°å¾—æ›´è¿œäº†ï¼Œå¦‚æœä¸æ˜¯è®©ç¨‹åºå‘˜è´Ÿè´£æ­£ç¡®è®¾ç½®è¾“å…¥çš„åç§°ï¼Œè€Œæ˜¯ç”±æˆ‘ä»¬çš„è‡ªå®šä¹‰é’©å­æ¥è´Ÿè´£è¿™ä»¶äº‹å‘¢ï¼ŸéªŒè¯è¡¨å•çŠ¶æ€æ€ä¹ˆæ ·ï¼Œæˆ–è€…æœ‰æ—¶æˆ‘ä»¬éœ€è¦æ ¼å¼åŒ–åŸå§‹æ•°æ®ã€‚ä½ èƒ½åœ¨æˆ‘çš„ github é¡¹ç›®ä¸­æ‰¾åˆ°çš„:

## ![GitHub logo](img/a73f630113876d78cff79f59c2125b24.png)[miguelromegutierrez](https://github.com/miguelromerogutierrez)/[ååº”-çŠ¶æ€-å½¢å¼](https://github.com/miguelromerogutierrez/react-state-form)