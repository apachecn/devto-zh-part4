# ä½¿ç”¨ JS åº“ä¸­çš„ Emotion CSS è®¾è®¡ react åº”ç”¨ç¨‹åºçš„æ ·å¼â€”â€”Emotion ç®€ä»‹

> åŸæ–‡:[https://dev . to/param Harrison/styling-a-react-app-using-emotion-CSS-in-js-library-an-introduction-to-emotion-11g 4](https://dev.to/paramharrison/styling-a-react-app-using-emotion-css-in-js-library-an-introduction-to-emotion-11g4)

> è¯·å°†æ­¤è§†ä¸ºä¸€ç¯‡ç‹¬ç«‹çš„æ–‡ç« ã€‚å¦‚æœä½ å·²ç»çŸ¥é“ react å’Œ react é’©å­çš„åŸºç¡€çŸ¥è¯†ï¼Œä½ å°±ä¸éœ€è¦é˜…è¯»æœ¬ç³»åˆ—çš„æ‰€æœ‰å†…å®¹ã€‚

è¿™ç¯‡åšæ–‡å°†æ˜¯å¯¹æƒ…æ„Ÿçš„ä»‹ç»ã€‚æˆ‘ä»¬è®¾è®¡ä¸€ä¸ª react åº”ç”¨ç¨‹åºï¼ŒåŒæ—¶å­¦ä¹ è®¾è®¡ç»„ä»¶çš„æ¦‚å¿µã€‚

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ª react åº”ç”¨ç¨‹åºï¼Œå®ƒå¯ä»¥æœç´¢è°·æ­Œå›¾ä¹¦å¹¶å°†å…¶åŠ è½½åˆ°é¡µé¢ä¸Šï¼Œè¿˜å¯ä»¥ä¸ºæ¯æœ¬ä¹¦åˆ›å»ºä¸€ä¸ªå›¾ä¹¦è¯¦æƒ…é¡µé¢ï¼Œ

ä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°å®ƒçš„ä½œç”¨ï¼Œ

[https://codesandbox.io/embed/books-detail-page-by2nj](https://codesandbox.io/embed/books-detail-page-by2nj)

#### [](#install-emotion)å®‰è£…æƒ…æ„Ÿ

æœ‰ä¸¤ä¸ªåŒ…ï¼Œä¸€ä¸ªæ˜¯`core`ï¼Œå¦ä¸€ä¸ªæ˜¯ä¸ºæ ·å¼ç»„ä»¶`@emotion/styled`æä¾›åŠ¨åŠ›çš„åŒ…ã€‚æˆ‘ä»¬å°†çœ‹åˆ°ä¸¤è€…çš„ä¾‹å­ã€‚

```
yarn add @emotion/core
yarn add @emotion/styled 
```

### [](#global-styles-in-emotion)æƒ…æ„Ÿä¸­çš„å…¨å±€é£æ ¼

åœ¨å¼€å§‹ä»»ä½•ç«™ç‚¹æ ·å¼ä¹‹å‰ï¼Œæˆ‘ä»¬æ€»æ˜¯éœ€è¦ä¸€äº›é‡ç½®æ¥ä½¿æµè§ˆå™¨é»˜è®¤æ ·å¼æ­£å¸¸åŒ–ã€‚æˆ‘è¦ç”¨`normalize.css`ã€‚è®©æˆ‘ä»¬å®‰è£…å®ƒï¼Œ

```
yarn add normalize.css 
```

åœ¨`create-react-app`ä¸­æ·»åŠ å¤–éƒ¨æ ·å¼è¡¨æœ‰å‡ ç§æ–¹æ³•ã€‚æˆ‘å°†ä½¿ç”¨ä¸€ç§ä¸å¯»å¸¸çš„æŠ€æœ¯æ¥å±•ç¤ºå¦‚ä½•åˆ©ç”¨æƒ…æ„Ÿæ¥å®Œæˆã€‚

Emotion æœ‰ä¸€ä¸ª`Global`ç»„ä»¶ï¼Œå®ƒå°†ä¸ºä½ çš„åº”ç”¨ç¨‹åºåˆ›å»ºå…¨å±€æ ·å¼ã€‚è®©æˆ‘ä»¬æŠŠå®ƒæ·»åŠ åˆ°æˆ‘ä»¬çš„æœç´¢é¡µé¢ã€‚

```
/* App.js */

// Adding global CSS
import { Global, css } from "@emotion/core";
// importing the text from normalize.css file
import normalize from "normalize.css";

...

const App = () => {
  return (
    <>
      <Global
        styles={css`
          ${normalize}
          body {
            background-color: #fafafa;
          }
        `}
      />
      ...
    </>
  );
};

... 
```

è¿™é‡Œæˆ‘ä»¬ä¸º body å…ƒç´ æ·»åŠ äº†è§„æ ¼åŒ– css å’ŒèƒŒæ™¯è‰²ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æƒ…æ„Ÿä¸­æ·»åŠ ä»»ä½•åƒè¿™æ ·çš„é€šç”¨å…¨å±€ CSSã€‚ä½†æ˜¯ï¼Œå½“æ‚¨å¯ä»¥éšæ—¶æå–æ ·å¼å’Œç»„ä»¶å¹¶åœ¨éœ€è¦æ—¶é‡ç”¨å…±äº«ç»„ä»¶æ—¶ï¼Œæ·»åŠ é€šç”¨ CSS æ˜¯ä¸€ç§åæ¨¡å¼ã€‚

### [](#styling-the-header-using-emotion-styled-react-components)ä½¿ç”¨æƒ…æ„Ÿé£æ ¼ react ç»„ä»¶å¯¹æ ‡é¢˜è¿›è¡Œæ ·å¼åŒ–

è¯¥æ ‡é¢˜å°†åŒ…å«ä¸€ä¸ªæ ‡å¿—åœ¨å·¦è¾¹å’Œä¸€ä¸ªæŒ‰é’®åœ¨å³è¾¹çš„æœç´¢è¾“å…¥ã€‚

emotion ä¸­æ ·å¼åŒ–ç»„ä»¶è¯­æ³•çš„ç¤ºä¾‹

```
const Header = styled.header`
  background-color: #ffffff;
`;

<Header></Header>; 
```

ä½ ä¹Ÿå¯ä»¥ç»™å®ƒä¼ é€’é“å…·

```
const Header = styled.header`
  background-color: ${props => props.bgColor};
`;

<Header bgColor="#FEFEFE"></Header>; 
```

æ‚¨è¿˜å¯ä»¥æ‰©å±•ä¸€ä¸ªç»„ä»¶å¹¶åˆ›å»ºæ–°ç»„ä»¶ã€‚å½“æˆ‘ä»¬æƒ³è¦ä¸ºä¸åŒçš„ç»„ä»¶å…±äº«ç»„ä»¶æ ·å¼æ—¶ï¼Œè¿™å°†æ˜¯æœ‰ç”¨çš„ã€‚

```
const Header = styled.header`
  background-color: #ffffff;
`;

const PageHeader = styled(Header)`
  color: #444;
`;

<PageHeader></PageHeader>; // this will have both background color and color 
```

è®©æˆ‘ä»¬ç”¨æ‰€æœ‰è¿™äº›çŸ¥è¯†æ¥è®¾è®¡æˆ‘ä»¬çš„æ ‡é¢˜ã€‚

```
// pages/searchPage.js

...
import styled from "@emotion/styled";

import BookSearchForm from "../components/bookSearchForm";
...

// Its very easy to create a syled component using emotion
const Header = styled.header`
  background-color: #ffffff;
`;

const Container = styled.div`
  max-width: 960px;
  padding: 15px;
  margin: 0 auto;
`;

// We can extend a react styled component to create styles on top of it
const HeaderContainer = styled(Container)`
  display: flex;
  align-items: center;
`;

const LogoText = styled.h3`
  margin: 0;
`;

// The styles written inside follows same syntax as CSS, so there is no special learning curve for styled components
const HeaderSearchForm = styled.div`
  margin-left: auto;
`;

const SearchPage = () => {
  ...

  return (
    <>
      <Header>
        <HeaderContainer>
          <LogoText>Bookie</LogoText>
          <HeaderSearchForm>
            <BookSearchForm
              onSubmitHandler={onSubmitHandler}
              onInputChange={onInputChange}
              searchTerm={searchTerm}
              error={error}
            />
          </HeaderSearchForm>
        </HeaderContainer>
      </Header>
      ...
    </>
  );
}; 
```

åœ¨æœç´¢é¡µé¢ä¸Šï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº†å¾½æ ‡å’Œæ ‡é¢˜è¡¨å•ã€‚ç°åœ¨è®©æˆ‘ä»¬è¿›å…¥æ ‡é¢˜è¡¨å•ç»„ä»¶å’Œæ ·å¼çš„å½¢å¼ã€‚

åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ä¸€ä¸ªä¾‹å­ï¼Œå¦‚ä½•è®¾è®¡ HTML å…ƒç´ çš„ä¸åŒçŠ¶æ€(å³ï¼Œæ‚¬åœã€æ´»åŠ¨ã€ç„¦ç‚¹çŠ¶æ€)

```
const Input = styled.input`
  min-width: 280px;
  &:focus,
  &:active {
    border-color: #85b7d9;
  }
`; 
```

å¦‚ä½•åœ¨æˆ‘ä»¬çš„æ ·å¼ç»„ä»¶ä¸­è®¾ç½® css ç±» HTML å…ƒç´ çš„æ ·å¼ï¼Ÿå…¶è¯­æ³•ä¸ SCSS ç›¸åŒ

```
const Element = styled.element`
  outline: 0;

  .css-classname {
    background-color: #ffffff;
  }
`; 
```

ç°åœ¨è®©æˆ‘ä»¬ç”¨åŒæ ·çš„ä¾‹å­æ¥è®¾è®¡è¡¨å•å…ƒç´ çš„æ ·å¼

```
// components/bookSearchForm.js

...

const Input = styled.input`
  outline: 0;
  padding: 0.6rem 1rem;
  border: 1px solid rgba(34, 36, 38, 0.15);
  border-radius: 3px;
  min-width: 280px;
  &:focus,
  &:active {
    border-color: #85b7d9;
  }
`;

const Button = styled.button`
  background-color: #2185d0;
  color: #ffffff;
  text-shadow: none;
  background-image: none;
  padding: 0.6rem 1.5rem;
  margin-left: 15px;
  border-radius: 3px;
  cursor: pointer;
`;

const BookSearchForm = ({
  onSubmitHandler,
  searchTerm,
  onInputChange,
  error
}) => {
  return (
    <form onSubmit={onSubmitHandler}>
      <Input
        type="search"
        placeholder="Search for books"
        value={searchTerm}
        onChange={onInputChange}
        required
      />
      <Button type="submit">Search</Button>
      ...
    </form>
  );
}; 
```

### [](#styling-loader-component-using-css-in-js)åœ¨ JS ä¸­ä½¿ç”¨ CSS æ ·å¼åŒ–åŠ è½½å™¨ç»„ä»¶

æœ‰å‡ ç§æ–¹æ³•å¯ä»¥å¯¹æƒ…æ„Ÿä¸­çš„ç»„ä»¶è¿›è¡Œæ ·å¼åŒ–ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ JS æ ·å¼ä¸­ä½¿ç”¨ CSS æ¥è¡¨è¾¾æƒ…æ„Ÿã€‚è®©æˆ‘ä»¬ä½¿ç”¨æƒ…æ„Ÿåº“æ¥è®¾è®¡ JS ä¸­ CSS çš„ loader ç»„ä»¶ã€‚

æƒ…æ„Ÿæ”¯æ’‘`css`é“å…·ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­

```
// We have to import jsx, else it won't work on react component
import { css, jsx } from '@emotion/core';

<div
  css={css`
    color: green;
    text-align: center;
    padding: 20px 0;
  `}
>
  {children}
</div>; 
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨ JS ä¸­ä½¿ç”¨ç®€å•çš„ CSS æ ·å¼åŒ–äº†ä¸€ä¸ª div å…ƒç´ ã€‚

å¦‚æœæˆ‘ä»¬æ²¡æœ‰å¯¼å…¥ jsxï¼Œemotion å°±ä¸ä¼šç¼–è¯‘ CSSï¼Œè¿™ä¸ªé“å…·ä¼šè¢«å½“ä½œå¦ä¸€ä¸ª react é“å…·ã€‚

è®©æˆ‘ä»¬ä½¿ç”¨ç›¸åŒçš„åŸåˆ™æ¥è®¾è®¡åŠ è½½å™¨ç»„ä»¶çš„æ ·å¼

```
/** @jsx jsx */
import { css, jsx } from '@emotion/core';
import React from 'react';

const Loader: React.FunctionComponent<{}> = ({ loading, children }) => {
  return (
    <>
      {loading && (
        <div
          css={css`
            color: green;
            text-align: center;
            padding: 20px 0;
          `}
        >
          {children}
        </div>
      )}
    </>
  );
};

export default Loader; 
```

å¦‚æœä½ ä»”ç»†çœ‹ï¼Œæˆ‘ä»¬åœ¨ä¸¤è¡Œä»£ç ä¸­åšäº†ä¸€äº›å¥‡æ€ªçš„è¯­æ³•ï¼Œ

```
/** @jsx jsx */

const Loader: React.FunctionComponent<{}> = { loading, children }; 
```

åŸå› åªæ˜¯ä¸€ä¸ªé»‘å®¢ï¼Œè¿™æ · linter å°±ä¸ä¼šå¯¹ä½ å¤§å–Šï¼Œ`React`å·²å®šä¹‰ä½†æœªä½¿ç”¨ã€‚å¯¹äº`jsx`ä¹Ÿæ˜¯ä¸€æ ·ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œç»„ä»¶é£æ ¼æ˜¯éå¸¸ç›´æ¥çš„ï¼Œå®ƒä¸æ ·å¼åŒ–ç»„ä»¶ç›¸ä¼¼ï¼Œä½†å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œæˆ‘ä»¬åœ¨ JS æ–¹æ³•ä¸­ä½¿ç”¨äº†å†…è” CSSã€‚

### [](#shared-error-component-using-emotion-without-react)å…±äº«é”™è¯¯æˆåˆ†åˆ©ç”¨æƒ…æ„Ÿè€Œä¸ä½œå‡ºååº”

æˆ‘ä»¬å¯ä»¥åœ¨ä¸ä½¿ç”¨ react çš„æƒ…å†µä¸‹åˆ›å»ºä¸€ä¸ªç»„ä»¶å¹¶å…±äº«å®ƒã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªé”™è¯¯ç»„ä»¶ï¼Œå¹¶å°†å…¶å…±äº«ç»™å¤šä¸ªæ–‡ä»¶ã€‚

```
// errorText.js
import styled from '@emotion/styled';

const ErrorText = styled.div`
  color: red;
  text-align: center;
  padding: 20px 0;
`;

export default ErrorText; 
```

å°±è¿™ä¹ˆç®€å•ï¼Œæˆ‘ä»¬ä¸éœ€è¦åˆ›å»ºå°çš„ react ç»„ä»¶ï¼Œåªéœ€è¦æœ‰ä¸€ä¸ªé£æ ¼åŒ–çš„ç»„ä»¶ã€‚è¿™æ ·ä¼šå‡å°‘ä¸€ä¸ªçœŸå® app ä¸­å¤§é‡çš„åŠŸèƒ½ç»„ä»¶éœ€æ±‚ã€‚

å“åº”é£æ ¼å†æ¬¡ä¸ SCSS ç›¸åŒï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ åª’ä½“æŸ¥è¯¢åˆ°ä»»ä½•ç»„ä»¶ã€‚è®©æˆ‘ä»¬å¼€å§‹è®©æ ‡é¢˜å“åº”ã€‚

```
// pages/searchPage.js

const HeaderContainer = styled(Container)`
  display: flex;
  align-items: center;
  @media (max-width: 778px) {
    flex-direction: column;
    align-items: flex-start;
  }
`;

// components/bookSearchForm.js
const Input = styled.input`
  ... @media (max-width: 778px) {
    margin-top: 10px;
  }
`;

const Button = styled.button`
  ...border-radius: 3px;
  cursor: pointer;

  @media (max-width: 778px) {
    margin-left: 0;
    margin-top: 10px;
  }
`; 
```

æ·»åŠ åª’ä½“æŸ¥è¯¢å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚æ‚¨å¯ä»¥å‘ä»»ä½•æ ·å¼çš„ç»„ä»¶æ·»åŠ åª’ä½“æŸ¥è¯¢ï¼Œå¹¶ä½¿å…¶å…·æœ‰å“åº”æ€§ã€‚è¯¥è¯­æ³•ä¹Ÿé€‚ç”¨äº JS è¯­æ³•ä¸­çš„ CSSã€‚

### [](#theming-to-share-common-colors)å…±äº«å…±åŒé¢œè‰²çš„ä¸»é¢˜åŒ–

ç°åœ¨å¦‚ä½•åˆ†äº«å…±åŒçš„é¢œè‰²ï¼Œå­—ä½“ï¼Œè§„æ¨¡ç­‰ã€‚æœ‰åŠæ³•å—ï¼Ÿ

æ˜¯çš„ï¼Œæœ‰ï¼Œæƒ…æ„Ÿåº“æä¾›äº†ä¸€ä¸ªæƒ…æ„Ÿä¸»é¢˜åŒ…ã€‚å®ƒå…è®¸ä½ åˆ›å»ºä¸€ä¸ª react `context`å¹¶åœ¨ä»»ä½•ä½ æƒ³è¦çš„ç»„ä»¶ä¸Šä½¿ç”¨ä¸»é¢˜ã€‚è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬çš„å¤´ç»„ä»¶ã€‚

è®©æˆ‘ä»¬å…ˆå®‰è£…åŒ…

```
yarn add emotion-theming 
```

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„ä¸»é¢˜æ–‡ä»¶å¹¶å¯¼å‡ºå®ƒ

```
// theme.js

const theme = {
  colors: {
    success: 'green',
    error: 'red',
    white: 'white',
  },
};

export default theme; 
```

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä»`emotion-theming`åŒ…
ä¸­å¯¼å…¥ä¸»é¢˜å¹¶ä½¿ç”¨å®ƒ

```
// App.js

...
import { ThemeProvider } from "emotion-theming";

import theme from "./components/theme";
...

const App = () => {
  return (
    <ThemeProvider theme={theme}>
      <Global
        styles={css`
          ${normalize}
          body {
            background-color: #fafafa;
          }
        `}
      />
      <Router>
        ...
      </Router>
    </ThemeProvider>
  );
};

export default App; 
```

æ­£å¦‚ä½ çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬ç”¨ä¸»é¢˜æä¾›è€…å°è£…äº†æ•´ä¸ªåº”ç”¨ç¨‹åºï¼Œå¹¶å°†ä¸»é¢˜å¯¹è±¡ä¼ é€’ç»™ä¸»é¢˜é“å…·ã€‚

ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•æ ·å¼çš„ç»„ä»¶ä¸Šä½¿ç”¨ä¸»é¢˜å€¼ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ header ç»„ä»¶
ä¸­çš„ä¾‹å­

```
// Props will have a theme object and here you can use it in any react component which is enclosed inside the ThemeProvider
export const Header = styled.header`
  background-color: ${props => props.theme.colors.white};
`; 
```

### [](#sharing-styled-components)å…±äº«æ ·å¼ç»„ä»¶

ç°åœ¨æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å‡ ä¹å¤§éƒ¨åˆ†ä½¿ç”¨æƒ…æ„Ÿåº“çš„æ¡ˆä¾‹ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å…±äº«æ ·å¼ç»„ä»¶çš„æœ€åä¸€ä¸ªæŠ€å·§ã€‚æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å¦‚ä½•ç”¨è¯¯å·®åˆ†é‡æ¥å®Œæˆã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†åˆ†äº«æˆ‘ä»¬çš„æ ‡é¢˜æ ·å¼ï¼Œä»¥ä¾¿æœç´¢é¡µé¢å’Œè¯¦ç»†ä¿¡æ¯é¡µé¢æ ‡é¢˜çœ‹èµ·æ¥ä¸€æ ·ã€‚

```
// components/shared.js

import styled from '@emotion/styled';

export const Header = styled.header`
  background-color: ${props => props.theme.colors.white};
`;

export const Container = styled.div`
  max-width: 960px;
  padding: 15px;
  margin: 0 auto;
`; 
```

ç°åœ¨æ‚¨å¯ä»¥å°†å…±äº«çš„æ ·å¼ç»„ä»¶å¯¼å…¥åˆ°é¡µé¢

```
// pages/searchPage.js, pages/bookDetailPage.js

import { Container, Header } from '../components/shared'; 
```

[https://codesandbox.io/embed/styling-with-emotion-gfbni](https://codesandbox.io/embed/styling-with-emotion-gfbni)

> æˆ‘æ²¡æœ‰ç”¨æƒ…æ„Ÿæ¥è®¾è®¡å®Œæ•´çš„åº”ç”¨ç¨‹åºï¼Œåªæ˜¯è®¾è®¡äº†å®ƒçš„ä¸€éƒ¨åˆ†æ¥æ•™æˆæƒ…æ„Ÿã€‚æˆ‘å°†å¾ˆå¿«æ›´æ–° codesandbox å’Œ repo çš„å®Œæ•´æ ·å¼ï¼ŒåŒ…æ‹¬å¡ç‰‡å’Œè¯¦ç»†ä¿¡æ¯é¡µé¢çš„æ ·å¼ã€‚

åœ¨è¿™é‡ŒæŸ¥çœ‹è¿™éƒ¨åˆ†[çš„ä»£ç åº“ï¼Œåœ¨è¿™é‡Œ](https://github.com/learnwithparam/books-series-react-hooks/pull/1/files)å¯ä»¥æŸ¥é˜…æ•´ä¸ªç³»åˆ—çš„ä»£ç åº“[ã€‚](https://github.com/learnwithparam/books-series-react-hooks)

å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ äº†è§£æƒ…æ„Ÿåº“åŠå…¶åŠŸèƒ½ã€‚å®ƒæ˜¯åœ¨ react åº”ç”¨ç¨‹åºä¸Šç”¨ JS å®ç°é£æ ¼åŒ–ç»„ä»¶æˆ– CSS çš„æœ€ä½³åŒ…ä¹‹ä¸€ğŸ˜