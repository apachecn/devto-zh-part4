# é€šè¿‡ Angular Universal åœ¨ç¤¾äº¤åª’ä½“å¹³å°ä¸Šæ›´å¥½åœ°åˆ†äº«

> åŸæ–‡ï¼š<https://dev.to/angular/better-sharing-on-social-media-platforms-with-angular-universal-1d1o>

*æœ€åˆå‘å¸ƒäº[https://samvloeberghs . be](https://samvloeberghs.be/posts/better-sharing-on-social-media-platforms-with-angular-universal)2019 å¹´ 2 æœˆ 24 æ—¥*

## ç›®æ ‡å—ä¼—

è¿™ç¯‡å…³äºå¦‚ä½•ä½¿ç”¨ Angular Universal åœ¨ç¤¾äº¤åª’ä½“å¹³å°ä¸Šæ›´å¥½åœ°åˆ†äº«çš„æ–‡ç« å’ŒæŒ‡å—æ˜¯é’ˆå¯¹é‚£äº›è‡³å°‘å¯¹ Angular æœ‰åŸºæœ¬äº†è§£ï¼Œå¹¶ä¸”å¯èƒ½å·²ç»æœ‰äº† Angular Universal å®ç°å¹¶æ­£åœ¨è¿è¡Œçš„å¼€å‘äººå‘˜çš„ã€‚æˆ‘ä»¬å°†æè¿°ä¸€äº›é«˜å±‚æ¬¡çš„æƒ³æ³•å’Œæ¦‚å¿µï¼Œä¸åŒçš„å·¥å…·å’Œæœ‰è§’åº¦çš„æœåŠ¡ï¼Œå®ƒä»¬å°†ä¸ºè„¸ä¹¦ã€Twitter å’Œ LinkedIn ç­‰å¹³å°æä¾›æ›´å¥½çš„ç¤¾äº¤åˆ†äº«ã€‚

## è§’ä¸‡èƒ½å’Œ SEO é—®é¢˜ä¸ spa

è¿™ä¸æ˜¯ä»€ä¹ˆæ–°æ¦‚å¿µï¼Œç”¨ Universal åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ Angularã€‚è¿™ä¸ªç½‘ç«™çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬æ˜¯åœ¨ 2016 å¹´ 11 æœˆç”¨ Angular v2 å’Œ Universal concepts æ„å»ºçš„ã€‚ä»é‚£æ—¶èµ·ï¼Œå›´ç»•å®ƒçš„å·¥å…·å·²ç»å‘å±•äº†å¾ˆå¤šï¼Œæˆ‘çš„ç½‘ç«™ä¹Ÿéšç€è¿™äº›å·¥å…·çš„æ›´æ–°è€Œå‘å±•ã€‚

*å¦‚ä»Šå»ºç«‹ä¸€ä¸ª Angular é€šç”¨ç½‘ç«™æˆ–åº”ç”¨ç¨‹åºè¦å®¹æ˜“å¾—å¤šï¼Œå› ä¸ºå®ƒæ˜¯[å®Œå…¨è®°å½•çš„](https://angular.io/guide/universal)ï¼Œå¹¶ä¸”æœ‰è®¸å¤š[ç¤ºä¾‹é¡¹ç›®](https://github.com/angular/universal)å¯ç”¨ã€‚Angular CLI è¿˜ä¸ºæˆ‘ä»¬æä¾›äº†é€šè¿‡ä½¿ç”¨[ç®€å•å‘½ä»¤](https://angular.io/cli/generate#universal-command)è‡ªåŠ¨æ·»åŠ è¯¥åŠŸèƒ½çš„å·¥å…·ã€‚*

äº‹å®ä¸Š**spa åœ¨ç´¢å¼•å’Œç¤¾äº¤åˆ†äº«æ–¹é¢æ™®éå­˜åœ¨å¾ˆå¤§çš„é—®é¢˜**å·²ç»æˆä¸ºè®¸å¤šè®¨è®ºçš„è¯é¢˜ï¼Œè€Œä¸”å¤šå¹´æ¥ï¼Œè‡ªä»ç¬¬ä¸€ä¸ª JS åº”ç”¨ç¨‹åºå»ºç«‹ä»¥æ¥ã€‚äººä»¬å·²ç»è€ƒè™‘äº†ä¸åŒçš„æ–¹æ³•ï¼Œå…¶ä¸­ä¸€ç§æ–¹æ³•å¯ä»¥å½’ç±»ä¸º[é»‘å¸½ SEO](https://www.webopedia.com/TERM/B/Black_Hat_SEO.html) ï¼Œæ¯”å¦‚ç”¨ PhantomJS æˆ– Puppeteer è¿™æ ·çš„æ— å¤´æµè§ˆå™¨é¢„æ¸²æŸ“åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸ºä¸åŒçš„æ¶ˆè´¹è€…æä¾›ä¸åŒçš„å†…å®¹ï¼Œæœºå™¨äººä¸çœŸå®è®¿å®¢ã€‚

## æœç´¢å¼•æ“å¯¹ spa çš„ç´¢å¼•èƒ½åŠ›

å½“æ‚¨é€šè¿‡ angular-cli ç”Ÿæˆ Angular åº”ç”¨ç¨‹åºæ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ª`polyfills.ts`æ–‡ä»¶ã€‚å®ƒåŒ…æ‹¬ä»¥ä¸‹å†…å®¹:

```
// polyfills.ts

/** IE9, IE10, IE11, and Chrome <55 requires all of the following polyfills.
* This also includes Android Emulators with older versions of Chrome
* and Google Search/Googlebot
*/ 
```

è¿™æ„å‘³ç€æˆ‘ä»¬çš„ Angular åº”ç”¨ç¨‹åºæ”¯æŒ Google Search / Googlebotï¼Œå³ä½¿æ²¡æœ‰ SSRï¼Œå¦‚æœæˆ‘ä»¬åŒ…æ‹¬é‚£äº›ç‰¹å®šçš„ polyfillsã€‚å®ƒæ²¡æœ‰æåˆ°ä»»ä½•å…¶ä»–æœç´¢å¼•æ“ã€‚å…¶ä»–å…¸å‹çš„æœç´¢å¼•æ“ï¼Œå¦‚ Bingã€Yahooã€DuckDuckGo ç­‰ï¼Œåœ¨è§£æå¤§é‡ä½¿ç”¨ JavaScript çš„ç½‘ç«™ï¼Œå¦‚ SPAs æˆ–ä½¿ç”¨ jQuery ç­‰æ¡†æ¶çš„åº”ç”¨ç¨‹åºæ—¶éƒ½å­˜åœ¨é—®é¢˜ã€‚

**æ›´æ–°(2019 å¹´ 5 æœˆ):***Google bot/crawler ç°åœ¨æ˜¯æœ€æ–°çš„ Chromiumï¼Œä¼šå®šæœŸæ›´æ–°ã€‚ä½ å¯ä»¥åœ¨è°·æ­Œç½‘ç«™ç®¡ç†å‘˜åšå®¢ä¸Šäº†è§£æ›´å¤šå…³äºè¿™æ¬¡æ›´æ–°çš„ä¿¡æ¯ã€‚*

ä¸‹é¢çš„æ¦‚è¿°ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå“ªäº›æœç´¢å¼•æ“èƒ½å¤Ÿç´¢å¼• JavaScript ç¹é‡çš„åº”ç”¨ç¨‹åºï¼Œç”¨ä¸åŒçš„æ¡†æ¶å’Œåº“æ„å»ºã€‚

[![Going Beyond Google: Are Search Engines Ready for JavaScript Crawling & Indexing?](img/084cc60aebac33547ae7222ab0607a9f.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--L6haInKB--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/p4m38v6sw774iknoehpb.png)

å¦‚æœä½ æƒ³è¿›ä¸€æ­¥äº†è§£è¿™ä¸ªè¯é¢˜ï¼Œæˆ‘å»ºè®®ä½ é˜…è¯»[https://moz . com/blog/search-engines-ready-for-JavaScript-crawling](https://moz.com/blog/search-engines-ready-for-javascript-crawling)ã€‚åšå®¢å¸–å­æœ‰ç‚¹è¿‡æ—¶ï¼Œå› ä¸ºçˆ¬è™«å¾ˆå¯èƒ½å·²ç»è¿›åŒ–äº†å®ƒä»¬çš„èƒ½åŠ›ï¼Œä¾‹å¦‚ Googlebot è§£æ Angular v2+åº”ç”¨ç¨‹åºçš„èƒ½åŠ›ã€‚æ™®éçš„é—®é¢˜ä»ç„¶å­˜åœ¨:*æœç´¢å¼•æ“ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œåœ¨ç´¢å¼•*æ—¶ä¸å¤ªèƒ½å¤Ÿå‘ˆç° JavaScriptã€‚

### ç¬¬äºŒæ³¢æŒ‡æ•°åŒ–

è¯´æ¸©æ³‰æ²¡æœ‰è¢«æŒ‡æ•°åŒ–æ˜¯é”™è¯¯çš„ã€‚Google åœ¨ç¬¬äºŒæ³¢ç´¢å¼•ä¸­åšäº†é¢å¤–çš„åŠªåŠ›ï¼Œåœ¨è¿™ä¸€æ³¢ç´¢å¼•ä¸­ï¼ŒJS å¯†é›†å‹åº”ç”¨ç¨‹åºçš„è§£æåšå¾—æ›´å¥½ã€‚[æœ‰å…³è¯¥ç‰¹å®šä¸»é¢˜çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·ç‚¹å‡»æ­¤å¤„](http://www.thesempost.com/google-indexes-ranks-javascript-pages-two-waves-days-apart/)ã€‚

## è°·æ­Œã€å¿…åº”ç­‰å¹¶ä¸æ˜¯å”¯ä¸€çš„æœç´¢å¼•æ“

ä¸Šé¢æè¿°çš„ä¸€åˆ‡å¯¹å…¶ä»–çˆ¬è™«æ¥è¯´ä¹Ÿæ˜¯æ­£ç¡®çš„ï¼Œæ¯”å¦‚è„¸ä¹¦ã€Twitter å’Œ LinkedInï¼Œè¿™åªæ˜¯æˆ‘è®¤ä¸ºå¯¹æˆ‘çš„æ¡ˆä¾‹å¾ˆé‡è¦çš„ç¤¾äº¤åª’ä½“å¹³å°ä¸­çš„å‡ ä¸ªã€‚è¿™äº›ä¹Ÿå¯ä»¥è¢«è®¤ä¸ºæ˜¯æœç´¢å¼•æ“ï¼Œå› ä¸ºå½“ä»–ä»¬çš„ç”¨æˆ·åˆ†äº«ä½ çš„å†…å®¹æ—¶ï¼Œä»–ä»¬è§£æå’Œç¼“å­˜ä½ çš„ç½‘ç«™æˆ–åº”ç”¨ç¨‹åºçš„å†…å®¹ã€‚

å°±åƒå…¶ä»–å…¸å‹çš„æœç´¢å¼•æ“ä¸€æ ·ï¼Œå¤§éƒ¨åˆ†(å¦‚æœä¸æ˜¯å…¨éƒ¨çš„è¯)éƒ½ä¸èƒ½è§£æ JavaScriptï¼Œåªèƒ½ä¾èµ–é™æ€ç”Ÿæˆçš„ HTMLã€‚

## ç¤¾äº¤åª’ä½“å¹³å°å¦‚ä½•æŠ“å–ä½ çš„é¡µé¢ï¼Ÿ

ç¤¾äº¤åª’ä½“å¹³å°ä½¿ç”¨æ‚¨é™æ€ç”Ÿæˆçš„ HTML åœ¨ä»–ä»¬çš„ feed ä¸Šå…±äº«æ‚¨çš„é¡µé¢æ—¶æ˜¾ç¤ºé¢„è§ˆã€‚å› æ­¤ï¼Œå®ƒä»¬è§£æå¯ä»¥åœ¨`<head>`æ ‡ç­¾ä¸­æ‰¾åˆ°çš„`title`å’Œ`meta`æ ‡ç­¾ã€‚

```
<!-- static-generated.html -->

<!doctype html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <title>Sam Vloeberghs - Freelance Webdeveloper &amp; Software Engineer</title>
      <meta name="description" content="Hi there! ğŸ‘‹ Thank you for visiting my website!">
      <meta name="author" content="Sam Vloeberghs">
   </head>
   ... 
```

*è¿™çœ‹èµ·æ¥å¾ˆå®¹æ˜“ï¼Œä½†è¦åšå¯¹å´æ²¡é‚£ä¹ˆå®¹æ˜“ã€‚å› ä¸º**æ‰€æœ‰ä¸åŒçš„ç¤¾äº¤åª’ä½“å¹³å°éƒ½æœŸæœ›å…¶ä»–`meta`æ ‡ç­¾**æ¥å‘ˆç°å®ƒä»¬çš„é¢„è§ˆã€‚ä»–ä»¬ç”šè‡³ä¸ä½¿ç”¨ç›¸åŒçš„å±æ€§æ¥è¯†åˆ«æ­£ç¡®çš„`meta`æ ‡ç­¾ã€‚æœ‰äº›ä½¿ç”¨`name`å±æ€§ï¼Œæœ‰äº›ä½¿ç”¨`property`å±æ€§ã€‚è¿™æ„å‘³ç€ä½ å¿…é¡»æ”¯æŒå¤§çº¦ 15 ä¸ªä¸åŒçš„`meta`æ ‡ç­¾ï¼Œæ‰èƒ½è·å¾—åŸºæœ¬çš„ä¿¡æ¯ï¼Œå¦‚æ ‡é¢˜ã€å›¾ç‰‡ã€æè¿°å’Œä½œè€…æƒåˆ©(é€‚ç”¨äºè„¸ä¹¦ã€LinkedIn å’Œ Twitter)ã€‚*

æ‰€æœ‰è®¨è®ºè¿‡çš„ç¤¾äº¤åª’ä½“å¹³å°éƒ½ä¸ºæˆ‘ä»¬æä¾›äº†åœ¨åˆ†äº«é¡µé¢æˆ–å¸–å­ä¹‹å‰éªŒè¯å®ƒä»¬çš„å·¥å…·ã€‚ä¸€äº›å¹³å°ï¼Œåƒè„¸ä¹¦å’Œ LinkedIn ç¼“å­˜æ‰€æœ‰çš„å…±äº«å†…å®¹ï¼Œæ‰€ä»¥è¿™äº›å·¥å…·ä¹Ÿå…è®¸æˆ‘ä»¬*ä½¿ç¼“å­˜çš„å†…å®¹*æ— æ•ˆã€‚å¦‚æœæ‚¨ä¹‹å‰å·²ç»å…±äº«äº†æ‚¨çš„é¡µé¢ï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³ä¸€æ¬¡æ€§ä½¿ä¸€ç»„é¡µé¢çš„ç¼“å­˜æ— æ•ˆï¼Œè¿™å°†éå¸¸æ–¹ä¾¿ã€‚

### è„¸ä¹¦

ä¸ºäº†è®©è„¸ä¹¦æ­£ç¡®æ˜¾ç¤ºä½ çš„å†…å®¹ï¼Œä½ éœ€è¦å®ç°ä»¥ä¸‹åŸºæœ¬çš„`meta`æ ‡ç­¾ã€‚è¯·æ³¨æ„ï¼Œè„¸ä¹¦ä½¿ç”¨`property`å±æ€§æ¥å®šä¹‰`meta`å€¼çš„ç±»å‹ï¼Œè¿™äº›ç±»å‹æ€»æ˜¯ä»¥`og:`ä¸ºå‰ç¼€ï¼Œè¿™æ˜¯å¼€æ”¾å›¾åè®®çš„å‰ç¼€ã€‚

```
<!-- static-generated-facebook.html -->

<head>
  <meta property="og:title" content="Sam Vloeberghs - Freelance Webdeveloper &amp; Software Engineer">
  <meta property="og:description" content="Hi there! ğŸ‘‹ Thank you for visiting my website!">
  <meta property="og:url" content="https://samvloeberghs.be/">
  <meta property="og:image" content="/assets/share_img.png">
  <meta property="og:image:alt" content="Sam Vloeberghs - Freelance Webdeveloper &amp; Software Engineer">
  <meta property="og:image:height" content="xxx">
  <meta property="og:image:width" content="xxx">
</head> 
```

å¼€æ”¾å›¾åè®®å…è®¸å®šä¹‰æ›´å¤šçš„`meta`æ ‡ç­¾ã€‚å°¤å…¶æ˜¯è„¸ä¹¦æ”¯æŒæ›´å¤šï¼Œå¦‚è§†é¢‘ã€‚æŸ¥çœ‹è„¸ä¹¦åˆ†äº«çš„[æ–‡æ¡£ï¼Œäº†è§£æ›´å¤šä¿¡æ¯ã€‚](https://developers.facebook.com/docs/sharing/webmasters)

#### è„¸ä¹¦å…±äº«è°ƒè¯•å™¨

é€šè¿‡[https://developers.facebook.com/tools/debug/sharing](https://developers.facebook.com/tools/debug/sharing)å¯ä»¥éªŒè¯ä½ åœ¨è„¸ä¹¦ä¸Šçš„å¸–å­é¢„è§ˆã€‚è„¸ä¹¦è¿˜æä¾›äº†ä¸€ç§ä½¿ä¸€æ‰¹é¡µé¢æ— æ•ˆçš„æ–¹æ³•ï¼Œè¿™ä¹Ÿå¯ä»¥é€šè¿‡å®ƒä»¬çš„ API ä»¥ç¼–ç¨‹æ–¹å¼å®Œæˆã€‚

### é¢†è‹±

ä¸ºäº†è®©ä½ çš„å¸–å­åœ¨ LinkedIn ä¸Šæ­£ç¡®æ˜¾ç¤ºï¼Œä½ éœ€è¦å®ç°ä»¥ä¸‹åŸºæœ¬çš„`meta`æ ‡ç­¾ã€‚è¯·æ³¨æ„ï¼ŒLinkedIn ä¹Ÿä½¿ç”¨`og:`å‰ç¼€ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„å€¼éƒ½ä½¿ç”¨ï¼Œæ¯”å¦‚ä½œè€…`meta`æ ‡ç­¾ã€‚

```
<!-- static-generated-linkedin.html -->

<head>
  <meta property="og:title" content="Sam Vloeberghs - Freelance Webdeveloper &amp; Software Engineer">
  <meta property="og:type" content="website">
  <meta property="og:image" content="/assets/share/home.png">
  <meta property="og:description" content="Hi there! ğŸ‘‹ Thank you for visiting my website!">
  <meta name="author" content="Sam Vloeberghs">
</head> 
```

#### LinkedIn å¸–å­æ£€æŸ¥å‘˜

é€šè¿‡[https://www.linkedin.com/post-inspector/](https://www.linkedin.com/post-inspector/)å¯ä»¥éªŒè¯ä½ çš„å¸–å­æˆ–ç½‘ç«™çš„é¢„è§ˆï¼Œå¹¶åˆ·æ–° LinkedIn ä¸Šçš„ç¼“å­˜ã€‚

æˆ‘å”¯ä¸€ä¸ç¡®å®šçš„æ˜¯ä»–ä»¬ç”¨å“ªä¸ª`meta` `property`æˆ–`name`æ¥æ­£ç¡®è¯»å‡ºâ€œå‡ºç‰ˆæ—¥æœŸâ€ã€‚æˆ‘å·²ç»é—®äº†è¿™ä¸ªé—®é¢˜æ¥è·å¾—ä»–ä»¬çš„æ”¯æŒï¼Œæˆ‘è¿˜åœ¨ç­‰å¾…ä»–ä»¬çš„å›ç­”ã€‚é—æ†¾çš„æ˜¯ï¼Œåœ¨è¿™ä¸ªä¸»é¢˜ä¸Šå‡ ä¹æ‰¾ä¸åˆ°ä»»ä½•æ–‡çŒ®ã€‚

**æ›´æ–°** : *æˆ‘åšäº†ä¸€äº›åå¤è¯•éªŒçš„æµ‹è¯•ï¼Œçœ‹èµ·æ¥`meta`æ ‡ç­¾`<meta name="published_date" content="2019-02-24T11:00:00.000Z">`ç¡®å®æœ‰ç”¨ã€‚*

### ç¢ç¢å¿µ

ä¸ºäº†è®©ä½ çš„å¸–å­åœ¨ Twitter ä¸Šä»¥å¡ç‰‡çš„å½¢å¼æ­£ç¡®æ˜¾ç¤ºï¼Œä½ éœ€è¦å®ç°ä¸‹é¢çš„ meta æ ‡ç­¾ã€‚è¯·æ³¨æ„ï¼Œ**ä¸è„¸ä¹¦å’Œ LinkedIn** ç›¸æ¯”ï¼ŒTwitter ä½¿ç”¨`name`å±æ€§æ¥å®šä¹‰`meta`å€¼çš„ç±»å‹ï¼Œè¿™äº›ç±»å‹æ€»æ˜¯ä»¥`twitter` :
ä¸ºå‰ç¼€

```
<!-- static-generated-twitter.html -->

<head>
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Sam Vloeberghs - Freelance Webdeveloper &amp; Software Engineer">
  <meta name="twitter:description" content="Hi there! ğŸ‘‹ Thank you for visiting my website!">
  <meta name="twitter:image" content="https://samvloeberghs.be/assets/share/home.png">
  <meta name="twitter:image:alt" content="Sam Vloeberghs - Freelance Webdeveloper &amp; Software Engineer">
  <meta name="twitter:site" content="@samvloeberghs">
  <meta name="twitter:creator" content="@samvloeberghs">
</head> 
```

#### æ¨ç‰¹å¡éªŒè¯å™¨

é€šè¿‡[https://cards-dev.twitter.com/validator](https://cards-dev.twitter.com/validator)å¯ä»¥éªŒè¯ä½ åœ¨ Twitter ä¸Šçš„å¸–å­é¢„è§ˆã€‚

**é‡è¦**:*`twitter:image`çš„å€¼å¿…é¡»æ˜¯å…¨é™å®šçš„å®Œæ•´ç»å¯¹ URLï¼Œè€Œä¸æ˜¯éƒ¨åˆ†/ç›¸å¯¹ URLï¼Œå¦åˆ™ Twitter çˆ¬è™«å°†æ— æ³•æ‰¾åˆ°å¹¶æ˜¾ç¤ºå›¾ç‰‡ã€‚*

## åœ¨ Angular ä¸­ä½¿ç”¨å…ƒå’Œæ ‡é¢˜æœåŠ¡

ä¸ºäº†å®ç°è¿™ä¸€åˆ‡ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨çš„å”¯ä¸€ä¸¤ä¸ªæœåŠ¡æ˜¯[æ ‡é¢˜](https://angular.io/api/platform-browser/Title)å’Œ[å…ƒ](https://angular.io/api/platform-browser/Meta)æœåŠ¡ã€‚æˆ‘ä»¬ä½¿ç”¨å®ƒä»¬æ¥åŠ¨æ€æ›´æ–°ç½‘é¡µçš„æ ‡é¢˜ï¼Œå¹¶è®¾ç½®ä¹‹å‰æè¿°çš„æ‰€éœ€çš„ meta æ ‡ç­¾ã€‚

ä½¿ç”¨è·¯ç”±å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é™„åŠ éœ€è¦è€¦åˆåˆ°æˆ‘ä»¬çš„è·¯ç”±çš„å…ƒæ•°æ®ã€‚å¦‚æœæˆ‘ä»¬æƒ³ä¸ºä¸€ä¸ªåŠ¨æ€é¡µé¢è®¾ç½®æ ‡é¢˜ï¼Œæ¯”å¦‚ blogpostï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆè·å–æ•°æ®ï¼Œç„¶åè°ƒç”¨ç›¸åŒçš„æœåŠ¡æ¥æ›´æ–°`meta`å’Œ`title`æ ‡ç­¾ã€‚æ­£å¦‚æ‚¨åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­çœ‹åˆ°çš„ï¼Œå¯¹äºâ€œå…³äºâ€é¡µé¢ï¼Œæˆ‘ä»¬å·²ç»é…ç½®äº†è¿™äº›å€¼å¹¶å°†å®ƒä»¬é™„åŠ åˆ°è·¯çº¿ã€‚

```
// about-routing.module.ts

RouterModule.forChild([{
  path: '',
  component: AboutComponent,
  data: {
    seo: {
      title: `About Sam - ${environment.seo.title}`,
      description: `I'm a 30 year old software engineer living in Belgium.`,
      shareImg: '/assets/share/about.png',
    }
  }
}]) 
```

ä½¿ç”¨æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥è®¢é˜…è·¯ç”±æ›´æ”¹ï¼Œä»¥æå–è¿™äº›æ•°æ®å¹¶æ›´æ–°æˆ‘ä»¬çš„`title`å’Œ`meta`æ ‡ç­¾ã€‚

```
// route-helper.service.ts

@Injectable({
  providedIn: 'root',
})
export class RouteHelper {

  constructor(
    private readonly router: Router,
    private readonly activatedRoute: ActivatedRoute,
    private readonly seoSocialShareService: SeoSocialShareService
  ) {
    this.setupRouting();
  }

  private setupRouting() {
    this.router.events.pipe(
      filter(event => event instanceof NavigationEnd),
      map(() => this.activatedRoute),
      map(route => {
        while (route.firstChild) {
          route = route.firstChild;
        }
        return route;
      }),
      filter(route => route.outlet === 'primary')
    ).subscribe((route: ActivatedRoute) => {
      const seo = route.snapshot.data['seo'];
      // set your meta tags & title here
      this.seoSocialShareService.setData(seo);
    });
  }

} 
```

å¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„ç¤¾äº¤å¹³å°éƒ½æœŸå¾…å…¶ä»–çš„`meta`æ ‡ç­¾ã€‚å› æ­¤ï¼Œæœ€å¥½åˆ›å»ºä¸€ä¸ª SEO åŒ…è£…æœåŠ¡ï¼Œä» Angular æ³¨å…¥å…ƒæœåŠ¡å’Œæ ‡é¢˜æœåŠ¡ã€‚ä¾‹å¦‚ï¼Œæˆ‘å°†åªå®ç°æ–¹æ³•æ¥æ›´æ–°é¡µé¢ä¸Šçš„æ ‡é¢˜å€¼ã€‚å¦‚æœä½ æƒ³çœ‹å®Œæ•´çš„ä¾‹å­ï¼Œçœ‹çœ‹æˆ‘çš„ SeoService çš„[å®Œæ•´å®ç°ã€‚](https://github.com/samvloeberghs/kwerri-oss/blob/master/projects/ngx-seo/src/lib/seo-social-share/seo-social-share.service.ts) 

```
// ngx-seo/seo-social-share.service.ts

@Injectable({
    providedIn: 'root',
})
export class SeoSocialShareService {

  constructor(
    private readonly metaService: Meta,
    private readonly titleService: Title
  ) {
  }

  setData(data: SeoSocialShareData) {
    this.setTitle(data.title);
    ... // set all other meta tags
  }

  private setTitle(title: string = '') {
    this.titleService.setTitle(title);
    if (title && title.length) {
      this.metaService.updateTag({name: 'twitter:title', content: title});
      this.metaService.updateTag({name: 'twitter:image:alt', content: title});
      this.metaService.updateTag({property: 'og:image:alt', content: title});
      this.metaService.updateTag({property: 'og:title', content: title});
      this.metaService.updateTag({name: 'title', content: title});
    } else {
      this.metaService.removeTag(`name='twitter:title'`);
      this.metaService.removeTag(`name='twitter:image:alt'`);
      this.metaService.removeTag(`property='og:image:alt'`);
      this.metaService.removeTag(`property='og:title'`);
      this.metaService.removeTag(`name='title'`);
    }
  }

} 
```

## å°å¿ƒè¿‡åº¦ä¼˜åŒ–

å½“åœ¨æœåŠ¡å™¨ç«¯ç”Ÿæˆé™æ€é¡µé¢æ—¶ï¼Œä½ ä¹Ÿå¯ä»¥è€ƒè™‘ä¼˜åŒ–å‘ˆç°çš„ HTMLã€‚åƒ [HTMLMinifier](https://github.com/kangax/html-minifier) è¿™æ ·çš„å·¥å…·æ¶ˆé™¤äº† HTML çš„æ‰€æœ‰è†¨èƒ€ï¼Œä»¥ä¿æŒæµè§ˆå™¨èƒ½å¤Ÿå‘ˆç°å®ƒæ‰€éœ€çš„æœ€ä½é™åº¦ã€‚

ä½†æ˜¯è¦å°å¿ƒã€‚åƒ Chromeã€Firefox å’Œå…¶ä»–æµè§ˆå™¨èƒ½å¤Ÿè§£æä½ ç¼©å°çš„ HTMLï¼Œå› ä¸ºå®ƒä»¬éå¸¸å®½å®¹ï¼Œå¯ä»¥ä¸ºæˆ‘ä»¬ä¿®å¤é”™è¯¯ã€‚ä½†æ˜¯ï¼Œä¸¥é‡ä¾èµ–ç»“æ„åŒ– HTML çš„è§£æå™¨ï¼Œå¦‚ç¤¾äº¤å¹³å°ä½¿ç”¨çš„è§£æå™¨ï¼Œå¯èƒ½æ— æ³•æ­£ç¡®è§£æ HTML å¹¶è·å¾—ä»–ä»¬éœ€è¦çš„ä¿¡æ¯ã€‚

### ä¸€ä¸ªç®€å•çš„ä¾‹å­

ä¸‹é¢çš„ HTMLminifier é€‰é¡¹åˆ é™¤äº†æ‰€æœ‰æµè§ˆå™¨ä¸éœ€è¦çš„ä¸œè¥¿æ¥æ­£ç¡®æ˜¾ç¤ºä½ çš„é¡µé¢:

```
// too-much-minify-options.ts

const tooMuchHtmlMinifyOptions = {
    removeComments: true,
    removeCommentsFromCDATA: true,
    collapseWhitespace: true,
    collapseBooleanAttributes: true,
    removeRedundantAttributes: true,
    useShortDoctype: true,
    removeEmptyAttributes: true,
    minifyCSS: true,
    removeAttributeQuotes: true,
    removeOptionalTags: true
};

const minify = require('html-minifier').minify;
const minifiedHtml = minify(html, minifyOptions); 
```

è®©æˆ‘ä»¬å¤„ç†ä¸‹é¢çš„ HTML:

```
<!-- too-much-minify-options-input.html -->

<!doctype html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta property="og:title" content="Sam Vloeberghs - Freelance Webdeveloper &amp; Software Engineer">
      ... 
```

ç»“æœåœ¨

```
<!-- too-much-minify-options-output.html -->

<!doctype html><html lang=en><meta charset=utf-8><meta property=og:title content="Sam Vloeberghs - Freelance Webdeveloper &amp; Software Engineer"> 
```

è¿™å¯¹äº LinkedIn å¸–å­æ£€æŸ¥å™¨æ¥è¯´ï¼Œä¼˜åŒ–å¤ªå¤šäº†ã€‚å¦‚æœä»”ç»†è§‚å¯Ÿï¼Œæ‚¨ä¼šæ³¨æ„åˆ°å¯é€‰çš„`<head>`æ ‡è®°è¢«åˆ é™¤äº†ï¼Œç®€å•å±æ€§å€¼å‘¨å›´çš„å¼•å·(å¸¦æœ‰ä¸€ä¸ªéç©ºæ ¼å€¼)ä¹Ÿè¢«åˆ é™¤äº†ã€‚ä¸ºäº†èƒ½å¤Ÿç¼©å° HTML å¹¶è®© LinkedIn Post Inspector æ»¡æ„ï¼Œæˆ‘ä»¬éœ€è¦ç¨å¾®æ”¹å˜ä¸€ä¸‹æˆ‘ä»¬çš„é…ç½®ã€‚æˆ‘ä»¬å¸Œæœ›ä¿ç•™å±æ€§å¼•å·å’Œå¯é€‰æ ‡ç­¾:

```
// good-minify-options.ts

const goodHtmlMinifyOptions = {
    â€¦
    removeAttributeQuotes: false,
    removeOptionalTags: false
}; 
```

ç°åœ¨è®©æˆ‘ä»¬ç”¨ä¸Šé¢æåˆ°çš„ HTML å†æ¬¡è¿è¡Œè¿·ä½ åŒ–å™¨ï¼Œçœ‹çœ‹æœ€ç»ˆç»“æœæ˜¯ä»€ä¹ˆæ ·å­:

```
<!-- good-minify-options-output.html -->

<!doctype html><html lang="en"><head><meta charset="utf-8"><meta property="og:title" content="Sam Vloeberghs - Freelance Webdeveloper &amp; Software Engineer"> 
```

æˆ‘ä»¬ä¿ç•™äº†`<head>`æ ‡ç­¾å’Œå±æ€§å¼•å·ã€‚ç°åœ¨ LinkedIn å¸–å­æ£€æŸ¥å‘˜å¾ˆé«˜å…´ğŸ˜ƒã€‚

## ç»“è®º

å¹¶éæ‰€æœ‰çš„æœç´¢å¼•æ“éƒ½ä»¥ç›¸åŒçš„æ–¹å¼è¿è¡Œã€‚**ä¸ä»…ä»…æ˜¯ Googleï¼ŒBing ç­‰ã€‚å¯ä»¥å½’ç±»ä¸ºæœç´¢å¼•æ“**ï¼Œä½†æˆ‘ä»¬å¿…é¡»è€ƒè™‘åƒè„¸ä¹¦ã€Twitter å’Œ LinkedIn è¿™æ ·çš„ç¤¾äº¤å¹³å°ï¼Œå®ƒä»¬ä¹ŸæŠ“å–å’Œç¼“å­˜å¤–éƒ¨å†…å®¹ã€‚**æ¯ä¸ªçˆ¬è™«çš„è¡Œä¸ºæ–¹å¼ä¸åŒ**ï¼Œå®ƒä»¬ä¸­çš„å¤§å¤šæ•°éƒ½ä¸èƒ½è§£æ JavaScript ç¹é‡çš„åº”ç”¨ç¨‹åºã€‚

è¿™æ„å‘³ç€æˆ‘ä»¬å¿…é¡»**é’ˆå¯¹æˆ‘ä»¬æƒ³è¦æ”¯æŒçš„ç¤¾äº¤å¹³å°çš„ä¸åŒçˆ¬è™«**è°ƒæ•´å’Œé…ç½®æˆ‘ä»¬çš„åº”ç”¨ã€‚é€šè¿‡ä½¿ç”¨ Angular Universalï¼Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨æœåŠ¡å™¨ä¸Šç”Ÿæˆåº”ç”¨ç¨‹åºçš„é™æ€ç‰ˆæœ¬ï¼Œå¹¶è¾“å‡ºé™æ€ HTMLã€‚å½“ç¼©å°è¿™ä¸ªé™æ€çš„ HTML æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°å¿ƒå¹¶ä¸”**ä¿æŒæˆ‘ä»¬çš„ HTML å°½å¯èƒ½çš„ä¸¥æ ¼å’Œç»“æ„åŒ–**ã€‚

## è¿›ä¸€æ­¥é˜…è¯»

*   [è°·æ­Œåˆ†ä¸¤æ¬¡å¯¹ JavaScript é¡µé¢è¿›è¡Œç´¢å¼•å’Œæ’å](http://www.thesempost.com/google-indexes-ranks-javascript-pages-two-waves-days-apart/)
*   æ–°çš„å¸¸é’æ ‘è°·æ­Œæœºå™¨äºº

## ç‰¹åˆ«æ„Ÿè°¢

*   [é©¬å°”æ»•Â·è’‚ä¿](https://twitter.com/maartentibau)
*   [æ‰ç›Â·æ±—Â·ç©†ç½•é»˜å¾·](https://twitter.com/mohamedzamakhan)
*   ç“¦è¥¿å§†Â·åˆ‡æ ¼å§†
*   [å®‰è¿ªÂ·å¸•æ³¢](https://twitter.com/andypiper)

æ„Ÿè°¢æ‚¨å®¡é˜…è¿™ç¯‡æ–‡ç« å¹¶æä¾›å®è´µçš„åé¦ˆï¼

*æœ€åˆå‘å¸ƒäº[https://samvloeberghs . be](https://samvloeberghs.be/posts/better-sharing-on-social-media-platforms-with-angular-universal)2019 å¹´ 2 æœˆ 24 æ—¥*