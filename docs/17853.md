# Angular @ViewChild è£…é¥°å™¨

> åŸæ–‡:[https://dev.to/angular/the-angular-viewchild-decorator-424c](https://dev.to/angular/the-angular-viewchild-decorator-424c)

åœ¨ Angular 8 ä¸­ï¼Œ@ViewChild decorator çš„é™æ€å‚æ•°[å˜æˆäº†ä¸´æ—¶å¼ºåˆ¶å‚æ•°](https://angular.io/guide/static-query-migration)ã€‚
åœ¨ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒAngular è‡ªåŠ¨å†³å®šæŸ¥è¯¢å¿…é¡»æ˜¯é™æ€çš„è¿˜æ˜¯åŠ¨æ€çš„ï¼Œç”±äºæˆ‘ä¸ç†Ÿæ‚‰è¿™ä¸ªå‚æ•°ï¼Œæˆ‘è®¤ä¸ºè¿™æ˜¯æ·±å…¥ç ”ç©¶å®ƒå¹¶æ’°å†™æˆ‘çš„ç¬¬ä¸€ç¯‡åšæ–‡çš„å¥½æ—¶æœºï¼ğŸ˜„

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ç®€è¦ä»‹ç»ä»€ä¹ˆæ˜¯è£…é¥°å™¨ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒï¼Œç„¶åæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨`@ViewChild`è£…é¥°å™¨å¹¶è§£é‡Šå…¶å‚æ•°çš„ä½œç”¨ã€‚

## [](#decorators-and-the-decorator-pattern)è£…é¥°è€…å’Œè£…é¥°è€…æ¨¡å¼

å½“è°ˆåˆ°ç¼–ç¨‹è¯­è¨€æ—¶ï¼Œè£…é¥°è€…è¿™ä¸ªè¯å¯ä»¥æŒ‡ä¸¤ç§ä¸åŒçš„ä¸œè¥¿:è£…é¥°è€…æ¨¡å¼å’Œå®é™…çš„è£…é¥°è€…ã€‚è®©æˆ‘ä»¬æ¥æ­å¼€è¿™äº›æ¦‚å¿µçš„ç¥ç§˜é¢çº±å§ï¼

### [](#the-decorator-pattern)è£…é¥°å›¾æ¡ˆ

è£…é¥°æ¨¡å¼æ˜¯ä¸€ç§ OOP è®¾è®¡æ¨¡å¼ï¼Œå…è®¸åŠ¨æ€åœ°å‘ç±»æˆ–ç±»æˆå‘˜æ·»åŠ è¡Œä¸ºã€‚è¿™æ„å‘³ç€ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¯¹è±¡å®ä¾‹åŒ–æ—¶æ”¹å˜ç±»çš„è¡Œä¸ºï¼Œè€Œä¸æ”¹å˜è¿›ä¸€æ­¥å®ä¾‹åŒ–çš„è¡Œä¸ºã€‚æˆ‘ä¸æƒ³åœ¨è¿™é‡Œæ·±å…¥è§£é‡Šè¿™ç§è®¾è®¡æ¨¡å¼ã€‚

### [](#decorators)è£…ä¿®å·¥

æˆ‘ä»¬å°†åœ¨æœ¬æ–‡ä¸­è®¨è®ºçš„è£…é¥°å™¨æ˜¯è£…é¥°å™¨æ¨¡å¼åœ¨ç¼–ç¨‹è¯­è¨€ä¸­çš„å…·ä½“å®ç°ã€‚ç”±äºæœ¬æ–‡æ˜¯å…³äº Angular å’Œ TypeScript çš„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å•è¯ decorator æ¥æŒ‡å®šè¿™ç§è®¾è®¡æ¨¡å¼åœ¨ TypeScript ä¸­çš„å…·ä½“å®ç°ã€‚

Decorators æ˜¯ä¸€ä¸ªå®éªŒæ€§çš„ TypeScript ç‰¹æ€§ï¼Œæ‰€ä»¥å¯ä»¥éšæ—¶å¼•å…¥çªç ´æ€§çš„å˜åŒ–ã€‚ç„¶è€Œï¼ŒAngular è¯­æ³•ä¸¥é‡ä¾èµ–äº decoratorsã€‚

åŸºæœ¬ä¸Šï¼ŒTypeScript ä¸­çš„ decorator æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ä»¥`@`å¼€å¤´çš„æ³¨é‡Šé™„åŠ åˆ°ç±»æˆ–ç±»æˆå‘˜(å±æ€§æˆ–æ–¹æ³•)ä¸Šã€‚è£…é¥°è€…å¯ä»¥æ¥å—å‚æ•°ã€‚
ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰ä¸€ä¸ªç”¨äºç»„ä»¶çš„`@isAdmin`è£…é¥°å™¨:

```
user = this.userService.getUser();

@isAdmin(user)
deleteEntry(entryId: string) {
// Delete some entry.
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¾‹å¦‚ï¼Œè¿™ä¸ªè£…é¥°å™¨å¯ä»¥ç”¨æ¥é™åˆ¶å…·æœ‰ç®¡ç†å‘˜è§’è‰²çš„ç”¨æˆ·å¯¹è¯¥æ–¹æ³•çš„è®¿é—®ã€‚

è£…é¥°å£°æ˜å¯èƒ½æ˜¯è¿™æ ·çš„:

```
import { jwtDecode } from 'jwt-decode';

function isAdmin(user: User) {
  return jwtDecode(user.token).isAdmin;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¾ˆé…·ï¼Œä¸æ˜¯å—ï¼Ÿè£…é¥°è€…å¯ä»¥é€šè¿‡å°†è¡Œä¸ºåŒ…è£…åœ¨å¯é‡ç”¨çš„å‡½æ•°ä¸­æ¥å¸®åŠ©æˆ‘ä»¬æ„å»ºä»£ç ã€‚

å¦‚æœä½ ç†Ÿæ‚‰ Angularï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ°æˆ‘ä»¬æ˜¯å¦‚ä½•å£°æ˜ Angular ç»„ä»¶ã€æ¨¡å—ç­‰çš„ã€‚ä¾‹å¦‚ï¼ŒAngular ç»„ä»¶æ˜¯ä¸€ä¸ªç”¨`@Component` decorator æ³¨é‡Šçš„ç±»ï¼Œè¿™ä¸ª decorator æ¥å—ä¸€äº›å‚æ•°ï¼Œæ¯”å¦‚å®ƒçš„æ¨¡æ¿ URL å’Œå®ƒçš„å˜åŒ–æ£€æµ‹ç­–ç•¥ã€‚

Angular æä¾›çš„å¦ä¸€ä¸ªè£…é¥°å™¨æ˜¯`@ViewChild`ã€‚æˆ‘ä»¬è¦å…³æ³¨çš„å°±æ˜¯è¿™ç¯‡æ–‡ç« ï¼

## [](#the-angular-raw-viewchild-endraw-decorator)æ£±è§’åˆ†æ˜`@ViewChild`è£…é¥°å·¥

å¯ä»¥åœ¨å±æ€§ä¸Šåº”ç”¨`@ViewChild`è£…é¥°å™¨ï¼Œå¹¶å…è®¸é…ç½®ä¸€ä¸ª**è§†å›¾æŸ¥è¯¢**ã€‚

### [](#the-selector)é€‰æ‹©å™¨

è¿™ä¸ªè£…é¥°å™¨çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯**é€‰æ‹©å™¨**ã€‚Angular å°†ä½¿ç”¨é€‰æ‹©å™¨å°è¯•åŒ¹é…æ¨¡æ¿ä¸­çš„å…ƒç´ ï¼Œç”¨è£…é¥°å™¨æ³¨é‡Šçš„å±æ€§å°†å¼•ç”¨ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ **ã€‚**

ä¸€ä¸ªé€‰æ‹©å™¨å¯ä»¥æœ‰å‡ ç§å½¢å¼ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬æ¥ç ”ç©¶ä¸€ä¸‹ï¼Œå¹¶å†™ä¸€äº›ä¾‹å­ã€‚

*   ä»»ä½•å¸¦æœ‰`@Component`æˆ–`@Directive`è£…é¥°å™¨çš„ç±»

```
@Component({
  selector: 'user-card'
})
export class UserCard {
  @Input() firstName: string;
  @Input() lastName: string;
  @Input() age: number;
}

@Component({
  selector: 'myComp',
  template: `
    <user-card [firstName]="'Roger'" [lastName]="'Dupont'" [age]="53">
    </user-card>
  `
})
export class MyCompComponent {
  @ViewChild(UserCard, { static: false }) userCard: UserCard;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
@Directive({
  selector: 'myMenu'
})
export class MenuDirective {
  open() {}
  close() {}
}

@Component({
  selector: 'my-comp',
  template: `
    <div myMenu></div>
  `
})
export class MyCompComponent {
  @ViewChild(MyMenuDirective, { static: false }) menu: MyMenuDirective;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*   å­—ç¬¦ä¸²å½¢å¼çš„æ¨¡æ¿å¼•ç”¨å˜é‡

```
@Component({
  selector: 'my-comp',
  template: `
    <div #someElement></div>
  `
})
export class MyCompComponent {
  @ViewChild('someElement', { static: false }) someElement: ElementRef;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*   æ¨¡æ¿å‚è€ƒ

```
@Component({
  selector: 'my-comp',
  template: `
    <ng-template></ng-template>
  `
})
export class MyCompComponent {
  @ViewChild(TemplateRef, { static: false }) someTemplate: TemplateRef;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*è§’åº¦æ–‡æ¡£è¯´æ˜æœ‰ä¸¤ç§å…¶ä»–é€‰æ‹©å™¨çš„å¯èƒ½æ€§:*

*   *å½“å‰ç»„ä»¶çš„å­ç»„ä»¶æ ‘ä¸­å®šä¹‰çš„ä»»ä½•æä¾›è€…(å¦‚`@ViewChild(SomeService) someService: SomeService` )*
*   *é€šè¿‡å­—ç¬¦ä¸²ä»¤ç‰Œå®šä¹‰çš„ä»»ä½•æä¾›è€…(ä¾‹å¦‚`@ViewChild('someToken') someTokenVal: any` )*

ç„¶è€Œï¼Œæˆ‘ä¸çŸ¥é“å¦‚ä½•åº”ç”¨è¿™äº›æ¡ˆä¾‹ã€‚å¦‚æœæœ‰äººæœ‰ç­”æ¡ˆå¹¶æƒ³ä¼¸å‡ºæ´æ‰‹ï¼Œå¥¹æˆ–ä»–å°†éå¸¸å—æ¬¢è¿ã€‚ğŸ˜‰

### `static`å‚æ•°

è¿™å°±æ˜¯æˆ‘ä»¬ï¼Œæˆä¸ºä¸´æ—¶å¼ºåˆ¶çš„å‚æ•°ï¼æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆã€‚

`static`å‚æ•°ï¼Œæˆ‘ç›¸ä¿¡ä½ å·²ç»çŒœåˆ°äº†ï¼Œåœ¨è¿™é‡Œå‘Šè¯‰ Angular æŸ¥è¯¢åº”è¯¥é™æ€è¿è¡Œè¿˜æ˜¯åŠ¨æ€è¿è¡Œã€‚ä½†æ˜¯è¿™åœ¨å®è·µä¸­æ”¹å˜äº†ä»€ä¹ˆå‘¢ï¼Ÿ
åŸºæœ¬ä¸Šï¼Œå½“è§†å›¾æŸ¥è¯¢å°†è¢«è§£ææ—¶ï¼Œå®ƒä¼šæ”¹å˜**ã€‚**

Angular å»ºè®®åœ¨`ngAfterViewInit` [ç”Ÿå‘½å‘¨æœŸé’©å­](https://angular.io/guide/lifecycle-hooks)ä¸­æ£€ç´¢è§†å›¾æŸ¥è¯¢ç»“æœï¼Œä»¥ç¡®ä¿ä¾èµ–äºç»‘å®šè§£æ(å¦‚åœ¨`*ngFor`å¾ªç¯æˆ–`*ngIf`æ¡ä»¶ä¸­)çš„æŸ¥è¯¢åŒ¹é…å·²ç»å‡†å¤‡å¥½ï¼Œå› æ­¤å°†è¢«æŸ¥è¯¢æ‰¾åˆ°ã€‚è¦è·å¾—è¿™ç§è¡Œä¸ºï¼Œå¿…é¡»å°†`static`å‚æ•°è®¾ç½®ä¸º`false`ã€‚

è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­(æ‰“å¼€ StackBlitz æ§åˆ¶å°æŸ¥çœ‹æ—¥å¿—):

[https://stackblitz.com/edit/angular-viewchild-static-false?embed=1&&file=src/app/hello.component.ts](https://stackblitz.com/edit/angular-viewchild-static-false?embed=1&&file=src/app/hello.component.ts)

å°†`static`å‚æ•°è®¾ç½®ä¸º false æ¶µç›–äº†æˆ‘ä»¬çš„å¤§å¤šæ•°ç”¨ä¾‹ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µ:åœ¨è°ƒç”¨ ngAfterVewInit æŒ‚é’©ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è®¿é—®è§†å›¾æŸ¥è¯¢ç»“æœã€‚å°†`static`è®¾ç½®ä¸º true é€šè¿‡å…è®¸è®¿é—® ngOnInit ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­çš„è§†å›¾æŸ¥è¯¢ç»“æœæ¥å…è®¸è¿™ç§è¡Œä¸ºï¼Œä½†æ˜¯**å®ƒåªå¯¹å¯ä»¥é™æ€è§£æçš„æŸ¥è¯¢æœ‰æ•ˆ**ã€‚æˆ‘ä»¬æƒ³ç”¨`@ViewChild`è·å–çš„å…ƒç´ å¿…é¡»ä¸åœ¨* `ngFor`å¾ªç¯æˆ–`*ngIf`æ¡ä»¶ä¸­ã€‚

è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­:

[https://stackblitz.com/edit/angular-viewchild-static-true?embed=1&&file=src/app/hello.component.ts](https://stackblitz.com/edit/angular-viewchild-static-true?embed=1&&file=src/app/hello.component.ts)

å¦‚ Angular æ–‡æ¡£ä¸­æ‰€è¿°ï¼Œ`static`åœ¨ç‰ˆæœ¬ 8 ä¸­åªæ˜¯å¼ºåˆ¶æ€§çš„ï¼Œä»¥æ–¹ä¾¿æ›´æ”¹é»˜è®¤å€¼å¹¶é¿å…è¿›ä¸€æ­¥çš„é”™è¯¯ã€‚é€šè¿‡è®©å¼€å‘äººå‘˜è€ƒè™‘è¿™ä¸ªå‚æ•°ï¼Œä»–ä»¬ä¸º`@ViewChild`çš„ä¸‹ä¸€ä¸ªé»˜è®¤è¡Œä¸ºåšå¥½äº†å‡†å¤‡ã€‚

ä»ç‰ˆæœ¬ 9 å¼€å§‹ï¼Œ`static`å‚æ•°é»˜è®¤å€¼å°†ä¸º`false`ã€‚ä¹‹å‰çš„è¡Œä¸º(ç¼ºçœå€¼ç”± Angular æ ¹æ®è§†å›¾æŸ¥è¯¢ç»“æœçš„ä½¿ç”¨æ–¹å¼è‡ªåŠ¨ç¡®å®š)å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æ£˜æ‰‹çš„é”™è¯¯ã€‚

### `read`å‚æ•°

`read`å‚æ•°æ˜¯å¯é€‰çš„ã€‚æ­¤å‚æ•°å…è®¸æ›´æ”¹æŸ¥çœ‹æŸ¥è¯¢ç»“æœçš„ç±»å‹ã€‚äº‹å®ä¸Šï¼Œæ¯ç§é€‰æ‹©å™¨éƒ½æœ‰å…¶é»˜è®¤ç±»å‹:

*   ä»»ä½•å¸¦æœ‰`@Component`æˆ–`@Directive`è£…é¥°å™¨çš„ç±»éƒ½æ˜¯â¡ï¸ç±»
*   ä½œä¸ºå­—ç¬¦ä¸²çš„æ¨¡æ¿å¼•ç”¨å˜é‡ï¸ï¸ï¸â¡ï¸ `ï¸ï¸ï¸ElementRef`
*   è¿™ä¸ªç»“æœæ˜¯çœŸçš„å—

ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›ä½¿ç”¨æ¨¡æ¿å¼•ç”¨å˜é‡ä½œä¸ºå­—ç¬¦ä¸²è¿›è¡ŒæŸ¥è¯¢ï¼Œå¹¶ä½¿ç”¨ç›®æ ‡å…ƒç´ çš„å®é™…ç±»å‹ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç±»ä½œä¸ºé€‰æ‹©å™¨ï¼Œå¹¶å¸Œæœ›é€šè¿‡`ElementRef`ç±»å‹è®¿é—®å®ƒã€‚

ç¤ºä¾‹çš„éç©·å°½åˆ—è¡¨:

```
@Component({
  selector: 'my-comp',
  template: `
    <user-card #userCard></user-card>
  `
})
export class MyCompComponent {
  // We set read to the UserCard type corresponding to a component class, so the view query result will be of type UserCard.
  @ViewChild('userCard', { read: UserCard, static: false }) userCard: UserCard;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½¿ç”¨ç»„ä»¶æˆ–æŒ‡ä»¤ç±»å…è®¸è®¿é—®è¯¥ç±»çš„å±æ€§ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªä»£è¡¨å¸¦æœ‰ç”¨æˆ·ä¿¡æ¯çš„å¡ç‰‡çš„`UserCard`ç»„ä»¶å¯ä»¥åŒ…å«ä¸€ä¸ªæ–¹æ³•ï¼Œå› æ­¤è¿™ä¸ªæ–¹æ³•å¯ä»¥ä»è§†å›¾æŸ¥è¯¢ç»“æœä¸­ä»¥ç¼–ç¨‹æ–¹å¼ä½¿ç”¨ã€‚å®ƒçœ‹èµ·æ¥åƒæ˜¯`this.userCard.flip();`ã€‚

```
@Component({
  selector: 'my-comp',
  template: `
    <user-card></user-card>
  `
})
export class MyCompComponent {
  // We set read to ElementRef so, even if the selector is a component class, the query view result will be of type ElementRef.
  @ViewChild(UserCard, { read: ElementRef, static: false })
  userCard: ElementRef;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ˜¯ä¸€ä¸ªæœ¬åœ°å…ƒç´ çš„åŒ…è£…å™¨ï¼Œæ‰€ä»¥å®ƒå¯¹è®¿é—® HTML å±æ€§ã€ç±»ç­‰ä¸œè¥¿å¾ˆæœ‰ç”¨ã€‚

```
@Component({
  selector: 'my-comp',
  template: `
    <div #myContainer></div>
  `
})
export class MyCompComponent {
  @ViewChild('myContainer', { read: ViewContainerRef, static: false })
  myList: ViewContainerRef;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`ViewContainerRef`å…è®¸è·å–ä½œä¸ºå®¹å™¨çš„å…ƒç´ ã€‚å½“æˆ‘ä»¬éœ€è¦æ“ä½œ DOM(ä¾‹å¦‚åŠ¨æ€æ·»åŠ æˆ–åˆ é™¤èŠ‚ç‚¹)æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚

è¿™ä¸ªå‚æ•°ä½¿æˆ‘ä»¬çš„æŸ¥è¯¢éå¸¸çµæ´»ï¼Œå› ä¸ºè¿”å›çš„ç±»å‹å¯ä»¥ç‹¬ç«‹äºæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨çš„é€‰æ‹©å™¨ç±»å‹ã€‚

## [](#a-quick-view-on-raw-viewchildren-endraw-)å¿«é€Ÿæµè§ˆ`@ViewChildren`

è¿˜æœ‰ä¸€ä¸ªå«`@ViewChildren`çš„æ£±è§’è£…é¥°å¸ˆã€‚

æ­£å¦‚æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„ï¼Œä¸€ä¸ª`@ViewChild`æŸ¥è¯¢åªè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ ã€‚é‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³å¾—åˆ°æ‰€æœ‰åŒ¹é…å…ƒç´ çš„åˆ—è¡¨å‘¢ï¼Ÿè¿™æ­£æ˜¯`@ViewChildren`çš„ä½œç”¨ã€‚

å®ƒåƒ`@ViewChild`ä¸€æ ·éœ€è¦ä¸€ä¸ª`selector`å’Œä¸€ä¸ª`read`å‚æ•°ï¼Œä½†æ²¡æœ‰`static`ã€‚å”¯ä¸€å¯ç”¨çš„è¡Œä¸ºæ˜¯åŠ¨æ€çš„ï¼Œæ‰€ä»¥æŸ¥è¯¢å°†åªåœ¨`ngAfterViewInit`ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­è§£æã€‚

[https://stackblitz.com/edit/angular-viewchildren-always-dynamic?embed=1&&file=src/app/hello.component.ts](https://stackblitz.com/edit/angular-viewchildren-always-dynamic?embed=1&&file=src/app/hello.component.ts)

`@ViewChildren`è¿”å›ä¸€ä¸ª`QueryList`å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª`EventEmitter`å¯¹è±¡ã€‚`QueryList`æ˜¯åŠ¨æ€æ›´æ–°çš„ï¼Œå› æ­¤å¦‚æœåŒ¹é…çš„å…ƒç´ è¢«æ·»åŠ æˆ–åˆ é™¤ï¼Œ`QueryList`å°†å‘å‡ºä¸€ä¸ªæ–°äº‹ä»¶ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è®¢é˜…å®ƒå¹¶å¯¹å€¼çš„å˜åŒ–åšå‡ºååº”ã€‚

## [](#first-article-in-the-wild)ç¬¬ä¸€ç¯‡é‡å¤–æ–‡ç« 

è€¶ï¼Œä½ åˆ°è¾¾äº†æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« çš„ç»“å°¾ï¼Œç¥è´ºä½ ï¼

æ¬¢è¿ä»»ä½•å»ºè®®å’Œæ„è§ğŸ˜„

## [](#useful-links-and-sources)æœ‰ç”¨çš„é“¾æ¥å’Œæ¥æº

*   [æ’ç‰ˆè£…é¥°è€…æ–‡æ¡£](https://www.typescriptlang.org/docs/handbook/decorators.html)
*   [è£…é¥°è€…æ¨¡å¼ç»´åŸºç™¾ç§‘é¡µé¢](https://en.wikipedia.org/wiki/Decorator_pattern)
*   [é™æ€æŸ¥è¯¢è¿ç§»(ä¸ºä»€ä¹ˆ ViewChild é™æ€å‚æ•°å˜æˆä¸´æ—¶å¼ºåˆ¶çš„)](https://angular.io/guide/static-query-migration)
*   [è§’åº¦ç”Ÿå‘½å‘¨æœŸæŒ‚é’©](https://angular.io/guide/lifecycle-hooks)
*   [Angular ElementRef documentation](https://angular.io/api/core/ElementRef)
*   [è§’åº¦æ¨¡æ¿å‚è€ƒæ–‡ä»¶](https://angular.io/api/core/TemplateRef)
*   [è§’åº¦è§†å›¾å®¹å™¨å‚è€ƒæ–‡ä»¶](https://angular.io/api/core/ViewContainerRef)