# Vue.js ä¸Šçš„ç®€å•å¤©æ°” App

> åŸæ–‡:[https://dev.to/oxyyyyy/simple-weather-app-on-vue-js-1g20](https://dev.to/oxyyyyy/simple-weather-app-on-vue-js-1g20)

ä½ å¥½ã€‚æˆ‘ç°åœ¨æ­£åœ¨å­¦ä¹  Vueã€‚å› æ­¤ï¼Œæˆ‘è®¤ä¸º*å…¨é¢äº†è§£äº‹ç‰©çš„æœ€ä½³æ–¹å¼æ˜¯å†™ä¸€ç¯‡å…³äºå®ƒä»¬çš„æ–‡ç« * :]
æ­¤å¤–ï¼Œå½“æˆ‘å¼€å‘åº”ç”¨ç¨‹åºæ—¶ï¼Œæˆ‘æ„è¯†åˆ°ç¼ºå°‘æˆ‘å°†è¦è°ˆåˆ°çš„ä¿¡æ¯ã€‚

æˆ‘å°†æ¦‚è¿°æˆ‘çš„å® ç‰©é¡¹ç›® Vue åº”ç”¨ç¨‹åºï¼Œè¯¥åº”ç”¨ç¨‹åºä½¿ç”¨æ¥è‡ª [Weatherbit](https://www.weatherbit.io/) çš„å…¬å…± APIï¼Œå¹¶ä¸”åªè·å¾—åŸºäºåŸå¸‚çš„å¤©æ°”:æ¸©åº¦å’Œæè¿°ã€‚

app æœ‰ä¸¤ç§è§†å›¾:
**é¦–é¡µ**
[![Home view](../Images/2ca0721aca490e62c22996f4579062f1.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--1ZrqT7OG--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/dx5y7pie2kskzkmke2hh.png) 
**å…³äº**
[![About page](../Images/33127b137c049cdda8ca057e7b7c6cf6.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--wtoK7V5S--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/qtb1tosdn47d3ucag5u1.png)
**æœ¬æ–‡ä¸­æˆ‘ä¸æ‰“ç®—ç”¨**æ¥æè¿°æ¯ä¸€ç¬”ä»£ç ã€‚ç›¸åï¼Œ**æˆ‘ä¼šæŠŠé‡ç‚¹æ”¾åœ¨**app çš„æ¶æ„å’Œæµç¨‹ä¸Šã€‚

> ä½ å¯èƒ½éœ€è¦æœ‰ HTMLã€CSS & JS çš„åŸºç¡€çŸ¥è¯†ï¼Œä»¥åŠ Vue.js çš„æ¦‚å¿µï¼Œæ‰èƒ½å®Œå…¨ç†è§£è¿™é‡Œå‘ç”Ÿçš„äº‹æƒ…ã€‚

#### [](#techs-i-have-used)æˆ‘ç”¨è¿‡çš„æŠ€æœ¯:

*   å­˜å‚¨æ•°æ®çš„ Vuexã€‚
*   ä» API è·å–æ•°æ®çš„ Axiosã€‚
*   å¯¼èˆªç”¨çš„è·¯ç”±å™¨æ‰” appã€‚å®é™…ä¸Šï¼Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸­æ²¡æœ‰å¿…è¦ä½¿ç”¨å®ƒï¼Œä½†æˆ‘åªæ˜¯æƒ³ç”¨è¡ŒåŠ¨æ¥å±•ç¤ºå®ƒã€‚

è¯¥é¡¹ç›®ç”± [Vue CLI](https://cli.vuejs.org/) ç”Ÿæˆå’Œç®¡ç†ã€‚
æˆ‘å¼ºçƒˆæ¨èä½ ä½¿ç”¨è¿™å°ä»ªå™¨ã€‚éå¸¸é€‚åˆåˆå­¦è€…ã€‚

## [](#lets-take-a-look-at-the-architecture-of-the-project)æˆ‘ä»¬æ¥çœ‹çœ‹é¡¹ç›®çš„æ¶æ„ã€‚

æ‰€ä»¥`src`æ–‡ä»¶å¤¹åŒ…å«:

```
src
â”‚
â”œâ”€â”€â”€assets # Stuff like images are stored here
â”‚       logo.png
â”‚
â”œâ”€â”€ components # Independent "bricks" of app
â”‚       weatherWidget.vue
â”‚
â”œâ”€â”€ services # Code that works with API. Axios gets data from API here
â”‚       service.js
â”‚
â”œâ”€â”€ views # Views are like pages. Router navigates through them
â”‚       About.vue
â”‚       Home.vue
â”œâ”€â”€ App.vue # Root Vue component
â”œâ”€â”€ constants.js # Just some constants that I want to store
â”œâ”€â”€ main.js # Core JS file that imports and mounts our app
â”œâ”€â”€ router.js # Router config is here
â”œâ”€â”€ store.js # Store management with Vuex 
```

ç°åœ¨è®©æˆ‘ä»¬æ›´ä»”ç»†åœ°ç ”ç©¶ä»£ç ï¼

#### [](#mainjs)main.jsğŸš©

ä»`main.js`å¼€å§‹ã€‚
`main.js`æ˜¯æ•´ä¸ªé¡¹ç›®çš„æ ¹ javascript æ–‡ä»¶ã€‚
æˆ‘ä»¬æ­£åœ¨å¯¼å…¥æ ¸å¿ƒåº“é…ç½®å’Œç»„ä»¶ï¼Œç„¶ååˆ›å»º`new Vue`å®ä¾‹å¹¶å‘Šè¯‰ Vue ä½¿ç”¨`router`å’Œ`store`ã€‚

```
import Vue from "vue"; // Vue lib
import App from "./App.vue"; // Our root component
import router from "./router"; // Router config
import store from "./store"; // Store config

import "normalize.css"; // Normalize.css lib to reset default styles

Vue.config.productionTip = false;

new Vue({
  router,
  store,
  render: h => h(App)
}).$mount("#app"); // Create Vue instance and mount it in index.html -> #app element 
```

#### [T1ã€‘constants . jsğŸ“„](#constantsjs)

è¿™æ˜¯å­˜å‚¨æˆ‘çš„ API å¯†é’¥å’Œ URL çš„åœ°æ–¹ã€‚
å¯ä»¥ä» REST API ä¸­å–å‡ºå¾ˆå¤šæ•°æ®ã€‚æŸ¥çœ‹[æ–‡æ¡£](https://www.weatherbit.io/api)å¼€å§‹ç ”ç©¶ã€‚
åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘å°†è·å–æˆ‘çš„å®¶ä¹¡åŸºè¾…çš„å½“å‰å¤©æ°”ã€‚å› æ­¤ï¼Œå¸¦æœ‰ API è¯·æ±‚çš„æŸ¥è¯¢å’Œå…³é”®å­—çš„ URL å°†ç±»ä¼¼äº`CURRENT_WEATHER`ã€‚

```
const API_KEY = "b60f3577e8eb46f089853e2a9fd7d744";
const CURRENT_WEATHER = `https://api.weatherbit.io/v2.0/current?city=Kiev,UA&key=${API_KEY}`;

export { API_KEY, CURRENT_WEATHER }; // export constant to be able to use them in components 
```

#### [](#routerjs)router.jsğŸ”€

è·¯ç”±å™¨é…ç½®ã€‚è¯¥åº”ç”¨ç¨‹åºæœ‰ä¸¤ä¸ªè§†å›¾(é¡µé¢)-ä¸»é¡µå’Œå…³äºã€‚æ‰€ä»¥æˆ‘å¸Œæœ›æœ‰è¿™æ ·çš„ç½‘å€:`https://app`å’Œ`https://app/about`ã€‚æˆ‘å¯ä»¥åœ¨`router.js`ä¸­å®šä¹‰å®ƒä»¬ã€‚æˆ‘æ‰€éœ€è¦çš„å°±æ˜¯æŒ‡å®š`Router`å®ä¾‹çš„`routes`ä¸­çš„æ¯ä¸ªé¡µé¢:å†™ä¸‹è·¯å¾„ï¼Œç»™å‡ºè·¯ç”±çš„åç§°ï¼Œå¹¶å°†å…¶ä¸ç°æœ‰ç»„ä»¶é“¾æ¥ã€‚æ³¨æ„ï¼Œ`/about`è§†å›¾å°†è¢«å»¶è¿ŸåŠ è½½ã€‚
`mode: "history"`è¡¨ç¤ºè·¯ç”±åœ¨ URL ä¸­å°†æ²¡æœ‰`#`ã€‚æ²¡æœ‰è¿™ä¸€è¡Œï¼Œæ¯ä¸€ä¸ª URL éƒ½ä¼šæ˜¯è¿™ä¸ªæ ·å­:`https://app/#route`ã€‚ä½†æ˜¯ä¸è¦å¿˜è®°[é…ç½®](https://router.vuejs.org/guide/essentials/history-mode.html)ä½ çš„æœåŠ¡å™¨ï¼Œè®©å®ƒåœ¨å†å²æ¨¡å¼ä¸‹æ­£å¸¸å·¥ä½œã€‚

```
import Vue from "vue";
import Router from "vue-router";
import Home from "./views/Home.vue"; // import components that you wish to became Routes

Vue.use(Router); // tell Vue to action with Router

export default new Router({
  mode: "history",
  base: process.env.BASE_URL,
  routes: [ // All the routes are described here
    {
      path: "/",
      name: "home",
      component: Home
    },
    {
      path: "/about",
      name: "about",
      // route level code-splitting
      // this generates a separate chunk (about.[hash].js) for this route
      // which is lazy-loaded when the route is visited.
      component: () =>
        import(/* webpackChunkName: "about" */ "./views/About.vue")
    }
  ]
}); 
```

#### [](#storejs)store.js ğŸ—ƒï¸

`Store`ç®¡ç†ã€‚
`Store`åŒ…å«å…¨å±€æ•°æ® app çš„çŠ¶æ€ã€‚
è¿™é‡Œè®¾ç½® app çš„`state`ï¼Œå®šä¹‰`mutations` & `actions`ã€‚

å¦‚æœä½ ç®€åŒ–ä¸€ä¸‹ï¼Œå¤„ç†`Store`çš„ç®—æ³•æ˜¯:
æˆ‘ä»¬ç§°ä¸€ä¸ª`action` â¡ï¸åŠ¨ä½œè°ƒç”¨ä¸€ä¸ª`mutation` â¡ï¸ `mutation`æ”¹å˜`state`

*æ³¨æ„:`import`è·¯å¾„ä¸­çš„* `@`è¡¨ç¤ºä»æˆ‘ä»¬å·¥ä½œåŒºçš„æ ¹ç›®å½•`src`æ–‡ä»¶å¤¹å¼€å§‹ã€‚

```
import Vue from "vue";
import Vuex from "vuex";

import service from "@/services/service.js"; // service.js fetch data from API. We will have a look at it in the next step.

Vue.use(Vuex); // tell Vue to action with Vuex

export default new Vuex.Store({
  state: { // define here data that you wish to store
    weather: {},
    dataIsRecived: false
  },
  mutations: { // change state from here
    UPDATE_WEATHER(state) {
      service
        .getWeather() // call the function from service.js that returns the data from API
        .then(response => { // if the response was get
          state.weather = response.data.data[0]; // set weather obj in state to real weather obj
          state.dataIsRecived = true; // mark that data was recived
          console.log(response); // and log it
        })
        .catch(error => { // if there was an error
          console.log("There was an error:", error.response); // log it
          state.dataIsRecived = false; // and mark that data wasn't recived
        });
    }
  },
  actions: { // call mutations that change the state here
    updateWeather(context) {
      context.commit("UPDATE_WEATHER");
    }
  }
}); 
```

#### [](#servicesservicejs)æœåŠ¡/æœåŠ¡ã€‚jsâ–¡

ä¸ API çš„é€šä¿¡ã€‚è¿™é‡Œç”¨çš„æ˜¯
`Axios`ã€‚åŸºäº Promise çš„ HTTP è¯·æ±‚åˆ°è¾¾ Weatherbit å¹¶è·å¾—å½“å‰å¤©æ°”çš„çœŸå®æ•°æ®ã€‚

```
import axios from "axios";
import { CURRENT_WEATHER } from "@/constants"; // URL with queries and API key

const apiClient = axios.create({ // create promise
  baseURL: CURRENT_WEATHER,
  withCredentials: false, // CORS
  headers: { // some HTTP headers
    Accept: "application/json",
    "Content-Type": "application/json"
  }
});

export default {
  getWeather() { // function that is used in store.js ğŸ‘†
    return apiClient.get();
  }
}; 
```

### [](#whats-next)æ¥ä¸‹æ¥æ˜¯ä»€ä¹ˆï¼Ÿ

å®é™…ä¸Šï¼Œç°åœ¨æˆ‘ä»¬å·²ç»æ‹¥æœ‰äº†ç¼–å†™ Vue ç»„ä»¶å¹¶åœ¨å…¶ä¸­ä½¿ç”¨æ‰€æœ‰è¿™äº›ä¸œè¥¿çš„ä¸€åˆ‡ã€‚é‚£å°±è®©æˆ‘ä»¬å¼€å§‹å§ï¼

#### app . view

æ ¹ Vue ç»„ä»¶ã€‚
æ­¤å¤„ä½¿ç”¨è·¯ç”±å™¨æ·»åŠ å¯¼èˆªæ ï¼Œé“¾æ¥åˆ°ä¸»é¡µå’Œå…³äºè§†å›¾ã€‚

```
<template>
  <div id="app"> // root
    <div class="nav"> // navbar
      <router-link to="/" class="nav__link">Home</router-link>
      <router-link to="/about" class="nav__link">About</router-link>
    </div>
    <router-view /> // router views will be rendered here
  </div> </template> 
<style lang="scss"> // some styles ğŸ–ï¸
  @import url('https://fonts.googleapis.com/css?family=Montserrat:100,200,300,400&display=swap&subset=cyrillic');

  body {
    font-family: 'Montserrat', sans-serif;
    max-height: 100vh;
  }

  a {
    color: #153B50;
    text-decoration-color: rgba($color: #153B50, $alpha: 0.5);
    transition: all 0.3s ease;

    &:hover {
      text-decoration-color: #153B50;
    }
  }

  .nav {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 15px 0;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
  }

  .nav__link {
    &:not(:last-child) {
      margin-right: 15px;
    }
  }
</style> 
```

#### [](#viewsaboutvue)è§†å›¾/About.vue

åªæœ‰å ä½ç¬¦çš„è§†å›¾ã€‚

```
<template>
  <div class="about">
    <p>Thanks <a href="https://www.weatherbit.io/">Weatherbit</a> for public API!</p>
  </div> </template> 
<style lang="scss" scoped> // some styles ğŸ–ï¸
  .about {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
</style> 
```

#### [](#viewshomevue)è§†å›¾/Home.vue

å…·æœ‰ weatherWidget vue ç»„ä»¶çš„è§†å›¾ã€‚è¯·çœ‹ä¸‹ä¸€éƒ¨åˆ†ã€‚

```
<template>
  <div class="home">
    <weatherWidget />
  </div> </template> 
<script>
import weatherWidget from '@/components/weatherWidget.vue'; // import component

export default {
  name: "home",
  components: { // and register it
    weatherWidget
  }
}
</script> 
<style lang="scss" scoped> // some styles ğŸ–ï¸
  .home {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
</style> 
```

#### [](#componentsweatherwidgetvue)ç»„ä»¶/weatherWidget.vue

*äºæ˜¯ç¥å¥‡å°±åœ¨è¿™é‡Œå‘ç”Ÿäº†ã€‚*
æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½è·å–å¤©æ°”æ•°æ®å¹¶åœ¨ç»„ä»¶ä¸­å‘ˆç°å®ƒã€‚
æˆ‘ä»¬ç°åœ¨è¦åšçš„åªæ˜¯`dispatch`å­˜å‚¨`action`(è¿™å°†è°ƒç”¨çªå˜ï¼Œè¿™å°†è°ƒç”¨æœåŠ¡å¹¶å°†ä» API æ•è·çš„æ•°æ®å†™å…¥`state`)ã€‚
ä¸ç”Ÿå‘½å‘¨æœŸæŒ‚é’©`created`æˆ‘ä»¬ç§°ä¹‹ä¸º`updateWeather` `action`ã€‚ç„¶åæˆ‘ä»¬æœ‰äº†`computed property`å¤©æ°”ï¼Œå®ƒä¿å­˜äº†çŠ¶æ€å’Œç»„ä»¶ä¹‹é—´çš„ååº”ã€‚
æœ€åä¸€ä»¶äº‹:æˆ‘ä»¬å¿…é¡»å°†è®¡ç®—çš„å±æ€§æ’å…¥åˆ°ç»„ä»¶ä¸­ã€‚
è¿˜æœ‰ï¼Œæœ‰æŸç§é¢„è£…å™¨ã€‚å½“`dataIsRecived`çŠ¶æ€å±æ€§ä¸º`false`(æŸ¥çœ‹ store.js)æ—¶ï¼ŒSVG å¾®è°ƒå™¨æ­£åœ¨æ—‹è½¬å¹¶ç­‰å¾…æ•°æ®ã€‚

```
<template>
  <div>
    <div v-if="this.$store.state.dataIsRecived" class="weather-widget"> // widget itself
      <p class="weather-widget__city">{{ weather.city_name }}</p>
      <h2 class="weather-widget__temp">{{ weather.temp }}<span>Â°C</span></h2>
      <p class="weather-widget__status">{{ weather.weather.description }}</p>
    </div>
    <div v-else class="weather-widget"> // preloader
      <img src="spinner.svg" alt="">
    </div>
  </div> </template> 
<script>
  export default {
    computed: {
      weather() {
        return this.$store.state.weather // gets weather state from Vuex store
      }
    },
    created() {
      this.$store.dispatch("updateWeather"); // dispatch "updateWeather" when component is created
    }
  }
</script> 
<style lang="scss" scoped> // some styles ğŸ–ï¸
  .weather-widget {
    display: flex;
    flex-direction: column;
    align-items: center;
    color: #429EA6;
  }

  .weather-widget__city {
    font-size: 20px;
    margin: 0;
  }

  .weather-widget__temp {
    display: flex;
    align-items: flex-start;
    color: #16F4D0;
    font-size: 200px;
    font-weight: 200;
    margin: 0;

    span {
      font-size: 30px;
      font-weight: 400;
      margin-top: 35px;
    }
  }

  .weather-widget__status {
    font-size: 20px;
    margin: 0;
  }
</style> 
```

## [](#thats-it)å°±æ˜¯è¿™æ ·ï¼

æˆ‘ä»¬çš„ Vue SPA æœ‰æ•ˆï¼å®ƒä» Weatherbit è·å–æ•°æ®å¹¶å°†å…¶æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ç®€å•ã€‚

ä½ å¯ä»¥åœ¨æˆ‘çš„ GitHub åº“ä¸­æ‰¾åˆ°å®Œæ•´çš„æºä»£ç ã€‚

## ![GitHub logo](../Images/a73f630113876d78cff79f59c2125b24.png)[oxyyyyy](https://github.com/oxyyyyy)/[vue-å¤©æ°”](https://github.com/oxyyyyy/vue-weather)

### ç”¨ Vue å’Œå…¬å…±å¤©æ°” API åˆ¶ä½œçš„å¤©æ°” app

<article class="markdown-body entry-content container-lg" itemprop="text">

# Vue å¤©æ°”åº”ç”¨

> å…³äºå®ƒçš„[ç¯‡](https://dev.to/oxyyyyy/simple-weather-app-on-vue-js-1g20)ã€‚

[![Vue Weather App](../Images/71f7c024241e72c5ccd3813008e2b32d.png)T2ã€‘](https://camo.githubusercontent.com/1fd7091de81edf0c9a4daa0ff72ff97325a9413e/68747470733a2f2f74686570726163746963616c6465762e73332e616d617a6f6e6177732e636f6d2f692f79636d76357a6168636e687779666d346833646c2e706e67)

## é¡¹ç›®è®¾ç½®

```
yarn install 
```

### ä¸ºå¼€å‘è¿›è¡Œç¼–è¯‘å’Œçƒ­é‡æ–°åŠ è½½

```
yarn run serve 
```

### ä¸ºç”Ÿäº§è¿›è¡Œç¼–è¯‘å’Œç²¾ç®€

```
yarn run build 
```

### è¿è¡Œæ‚¨çš„æµ‹è¯•

```
yarn run test 
```

### é“¾æ¥å¹¶ä¿®å¤æ–‡ä»¶

```
yarn run lint 
```

### è‡ªå®šä¹‰é…ç½®

å‚è§[é…ç½®å‚è€ƒ](https://cli.vuejs.org/config/)ã€‚

</article>

[View on GitHub](https://github.com/oxyyyyy/vue-weather)

æˆ‘æœŸå¾…ç€ä½ ä»¬çš„åé¦ˆï¼Œä¼™è®¡ä»¬ï¼Œè¿™å¯¹æˆ‘å¾ˆé‡è¦ã€‚è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘å¾ˆé«˜å…´èƒ½ä¸º DEV.to ç¤¾åŒºåšå‡ºè‡ªå·±çš„è´¡çŒ®ã€‚æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹æŸäººæœ‰æ‰€å¸®åŠ©ğŸ˜‰