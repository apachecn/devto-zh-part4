# react è·¯ç”±å™¨ä¸­çš„é‡å®šå‘è·¯ç”±

> åŸæ–‡:[https://dev . to/param Harrison/redirect-routes-in-react-router-4f0n](https://dev.to/paramharrison/redirect-routes-in-react-router-4f0n)

é‡å®šå‘ä¸»è¦ç”¨äºæ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æƒè®¿é—®è¯¥é¡µé¢ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™é‡å®šå‘åˆ°ç›¸å…³é¡µé¢ã€‚

åœ¨ react åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ react è·¯ç”±å™¨ç»„ä»¶å¾ˆå®¹æ˜“åšåˆ°è¿™ä¸€ç‚¹ã€‚

è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªé‡å®šå‘ç»„ä»¶å¦‚ä½•åœ¨ react è·¯ç”±å™¨ä¸­å·¥ä½œçš„åŸºæœ¬ç¤ºä¾‹ã€‚è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„é¡µé¢ï¼Œæ ¹æ®æ¡ä»¶é‡å®šå‘åˆ°ä¸åŒçš„é¡µé¢ã€‚

æˆ‘ä»¬å°†æ‰©å±•æˆ‘ä»¬çš„è·¯ç”±å™¨ç¤ºä¾‹ï¼Œ

*   æ¼”ç¤º`/old-route`åˆ°`/new-route`çš„ç®€å•é¡µé¢

#### [](#simple-redirect-example)ç®€å•é‡å®šå‘ç¤ºä¾‹

å°†é‡å®šå‘è·¯ç”±æ·»åŠ åˆ° react è·¯ç”±å™¨ç¤ºä¾‹ä¸­ï¼Œ

åœ¨è¿™ä¸ªä¾‹å­ä¸­ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸¤ä¸ª URL

*   `/old-route`æ˜¯æ—§çš„ URLï¼Œå°†ä½¿ç”¨ react è·¯ç”±å™¨çš„`Redirect`ç»„ä»¶é‡å®šå‘åˆ°æ–°çš„ URL `/new-route`ã€‚

```
// Import Redirect component from react-router
import { Route, Redirect } from 'react-router';

// Pass from URL and to URL for the Redirect component
<Redirect from="/old-route" to="/new-route" />
// Handle the to Route and load new page
<Route exact path="/new-route" component={RedirectPage} />

// Add link to the old route and see the page displays the new url onClick
<Link to="/new-route">Redirecting to New page</Link>

// Page component
const RedirectPage = () => {
  return (
    <h3>Redirect Page</h3>
  );
}; 
```

ç°åœ¨ï¼Œåœ¨è¿™é‡ŒæŸ¥çœ‹ç®€å•é‡å®šå‘è·¯ç”±çš„ç¤ºä¾‹

[https://codesandbox.io/embed/redirect-route-simple-yewt5](https://codesandbox.io/embed/redirect-route-simple-yewt5)

æ‚¨å¯ä»¥çœ‹åˆ°é“¾æ¥ä¸­çš„æ—§ç½‘å€è¢«é‡å®šå‘åˆ°æ–°ç½‘å€ï¼Œæ–°ç½‘å€æ˜¾ç¤ºåœ¨æµè§ˆå™¨ä¸­ã€‚

### [](#complex-redirect-example-based-on-props)åŸºäº props çš„å¤æ‚é‡å®šå‘ç¤ºä¾‹

ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªå°é¡µé¢ï¼Œ

*   å¦‚æœå±æ€§`isLoggedin`ä¸ºçœŸæˆ–
*   å¦‚æœå±æ€§`isLoggedin`ä¸ºå‡ï¼Œåˆ™æ˜¾ç¤ºä¸€æ¡ç®€å•çš„æ¶ˆæ¯â€œæœªç™»å½•â€

è®©æˆ‘ä»¬å…ˆæ„å»ºé¡µé¢ï¼Œ

```
const AuthPage = ({ isLoggedIn }) => {
  if (isLoggedIn) {
    return <Redirect to="/dashboard" />;
  } else {
    return <h3>User not loggedin</h3>;
  }
};

const DashboardPage = () => {
  return <h3>Dashboard Page</h3>;
}; 
```

è®©æˆ‘ä»¬ä¸º`Auth`é¡µå’Œ`Dashboard`é¡µã€
å®šä¹‰è·¯çº¿

```
// Route definition for Dashboard
<Route exact path="/dashboard" component={DashboardPage} />
// Route definition for not loggedin page by passing IsLoggedIn props as false
<Route exact path="/auth-not-loggedin" render={(props) => <AuthPage {...props} isLoggedIn={false} />} />
// Route definition for loggedin page by passing IsLoggedIn props as true. This route will automatically redirect to dashboard because of the condition
<Route exact path="/auth-loggedin" render={(props) => <AuthPage {...props} isLoggedIn={true} />} />

// Lets add the links to navigate to these pages
<Link to="/auth-not-loggedin">Not Loggedin</Link>
<Link to="/auth-loggedin">User Loggedin</Link> 
```

ä½ å¥½ï¼Œä½ ç°åœ¨å¯ä»¥æ£€æŸ¥äº†ã€‚å½“æˆ‘ä»¬å°†`isLoggedIn`å±æ€§ä½œä¸º`true`ä¼ é€’æ—¶ï¼Œè·¯ç”±é‡å®šå‘å¹¶å°†æµè§ˆå™¨ URL æ›´æ”¹ä¸º dashboardã€‚å¦‚æœæ²¡æœ‰è®¾ç½® propsï¼Œåˆ™æ˜¾ç¤ºä¸€æ¡ç®€å•çš„æœªç™»å½•æ¶ˆæ¯ã€‚

æ‚¨å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹åŠŸèƒ½ï¼Œ

[https://codesandbox.io/embed/redirect-route-complex-x6o6v](https://codesandbox.io/embed/redirect-route-complex-x6o6v)

å°±æ˜¯è¿™æ ·ï¼Œä¼™è®¡ä»¬ï¼Œå¸Œæœ›è¿™æœ‰åŠ©äºæ‚¨äº†è§£ react è·¯ç”±å™¨ä¸­é‡å®šå‘çš„å·¥ä½œåŸç†ã€‚react ç³»åˆ—çš„æ›´å¤šå†…å®¹ï¼Œæ•¬è¯·æœŸå¾…ğŸ¤—

ä½ å¯ä»¥æŸ¥çœ‹è¿™ä¸ªç³»åˆ—çš„ä»£ç åº“[è¿™é‡Œ](https://github.com/learnwithparam/react-router-series)å’Œè¿™ä¸ªéƒ¨åˆ†çš„ä»£ç [è¿™é‡Œ](https://github.com/learnwithparam/react-router-series/commit/e354527b3c43917112e36101fbd4f5f66924252e)