# å¦‚ä½•ç”¨ React é’©å­åš http è¯·æ±‚ï¼Ÿ

> åŸæ–‡:[https://dev . to/h2r mone/how-to-make-http-request-with-react-hooks-4ib 5](https://dev.to/h2rmone/how-to-make-http-request-with-react-hooks-4ib5)

è¿™æ˜¯æˆ‘åœ¨ [dev.to](//dev.to) çš„ç¬¬ä¸€ä¸ªå¸–å­ã€‚æˆ‘å°†ä»‹ç»ä¸€ä¸ªå®šåˆ¶çš„ React é’©å­æ¥å¸®åŠ©ç”Ÿæˆ http è¯·æ±‚- [`use-request`](https://github.com/react-rekindle/use-request)

æˆ‘è§è¿‡å¾ˆå¤šç”¨ React Hooks ç¼–å†™çš„è¯·æ±‚åº“ï¼Œä½†æ²¡æœ‰ä¸€ä¸ªæ˜¯æˆ‘å–œæ¬¢çš„ã€‚ä»–ä»¬ä¸­çš„å¤§å¤šæ•°å°†å®¢æˆ·ç«¯æ”¾åœ¨å…¶ä¸­ï¼Œè¿™å¯¼è‡´çµæ´»æ€§é™ä½ã€‚åˆ‡æ¢åˆ° [`use-request`](https://github.com/react-rekindle/use-request) æ—¶ï¼Œç”¨`axios`è¿˜æ˜¯`fetch`ç”±ä½ å†³å®šã€‚å°†å°è£…å®¢æˆ·ç«¯å’Œ api è¯·æ±‚çš„å‡½æ•°ä¼ é€’ç»™`useRequest`å‡½æ•°ï¼Œå°±å¯ä»¥å¾—åˆ°è¯·æ±‚å’Œå›è°ƒå‡½æ•°çš„çŠ¶æ€ã€‚æœ‰äº† typescript æ”¯æŒï¼Œè¯·æ±‚å›è°ƒå‡½æ•°çš„è¾“å…¥å‚æ•°ä¹Ÿå¯ä»¥æ ¹æ® api å‡½æ•°çš„ç±»å‹å®šä¹‰å‡†ç¡®æ˜¾ç¤ºã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼

## [](#feature)ç‰¹å¾

*   ğŸ‘•Typescript æ”¯æŒã€‚
*   æ²¡æœ‰ gzip ç¼©å°åçš„ğŸ—œï¸ 1.3kbã€‚
*   ğŸ“¤æ˜“äºä½¿ç”¨ä¸åŒçš„è¯·æ±‚å®¢æˆ·ç«¯ã€‚

## [](#install)å®‰è£…

```
yarn add @rekindle/use-request 
```

## [](#usage)ç”¨æ³•

```
import useRequest from '@rekindle/use-request'
import getFooApi from '@/utils/axios'

function App() {
  const [{ loading, error, data }, fetch] = useRequest(getFooApi)

  function handleClick() {
    fetch()
  }

  useEffect(() => {
    fetch()
  }, [fetch])

  if (loading) return <div>loading...</div>
  if (error) return <div>error</div>

  return (
    <div>
      <p>{data && data.text}</p>
      <button onClick={handleClick}>refetch</button>
    </div>
  )
} 
```

## [](#api)Api

```
type useRequest = (api, initialState) => [state, memoizedRequestCallback] 
```

æ³¨æ„:ä¸ºä»€ä¹ˆè¦ç§»åŠ¨è¯·æ±‚å›è°ƒï¼Ÿ

å‚è€ƒ:[ä»ä¾èµ–åˆ—è¡¨ä¸­çœç•¥å‡½æ•°å®‰å…¨å—ï¼Ÿ](https://reactjs.org/docs/hooks-faq.html#is-it-safe-to-omit-functions-from-the-list-of-dependencies)

å¦‚æœä½ æƒ³æ·±å…¥äº†è§£ä½¿ç”¨æ•ˆæœå’Œä¾èµ–æ€§ï¼Œè¿™é‡Œ:[https://overreacted.io/a-complete-guide-to-useeffect/](https://overreacted.io/a-complete-guide-to-useeffect/)