# ECMAScript 2019 çš„æœ‰ç”¨åŠŸèƒ½å·²å®¡æ ¸

> åŸæ–‡:[https://dev . to/ya shints/useful-features-of-ecmascript-2019-reviewed-gdc](https://dev.to/yashints/useful-features-of-ecmascript-2019-reviewed-gdc)

é¦–å…ˆï¼Œè®©æˆ‘ä¸ºæ²¡æœ‰åƒæˆ‘å¸Œæœ›çš„é‚£æ ·ç»å¸¸å†™ä¿¡é“æ­‰ã€‚è¿™æ˜¯ç–¯ç‹‚å¿™ç¢Œçš„å‡ å‘¨ï¼Œæˆ‘åœ¨ 2019 å¹´ DDD ç€æ–¯å¤§ä¼šä¸Šçš„æ¼”è®²å……æ»¡äº†ä¹è¶£ã€‚

å¥½äº†ï¼Œè¿™ä¸€æ¬¡æˆ‘æƒ³è®©æˆ‘ä»¬çœ‹çœ‹æ·»åŠ åˆ° [ECMAScript 2019(åˆå ES2019 æˆ– ES10)](https://www.ecma-international.org/ecma-262/10.0/index.html) ä¸­çš„æ–°åŠŸèƒ½ï¼Œå› ä¸ºå®ƒä»¬è¶…çº§ä»¤äººå…´å¥‹ï¼Œè®©æˆ‘ä»¬çš„ç”Ÿæ´»å˜å¾—æ›´åŠ è½»æ¾ğŸ˜ã€‚

## TLDRï¼›

ä¸€ç›®äº†ç„¶ï¼Œè¿™ä¸ªç‰ˆæœ¬åœ¨`Array.prototype`ã€`flat`å’Œ`flatMap`ä¸Šå¢åŠ äº†å‡ ä¸ªå†…ç½®å‡½æ•°ã€‚ç„¶åæˆ‘ä»¬ç”¨`Object.fromEntries`ç›´æ¥æŠŠ`Object.entries`çš„è¿”å›å€¼å˜æˆä¸€ä¸ªæ–°çš„*å¯¹è±¡*ã€‚

åœ¨å¹¿æ³›ä½¿ç”¨çš„éæ ‡å‡†ç‰ˆæœ¬`String.prototype.trimLeft`å’Œ`trimRight`ä¹‹ä¸Šï¼Œæˆ‘ä»¬è¿˜æœ‰`String.prototype`ä¸Šçš„`trimStart`å’Œ`trimEnd`ã€‚

å¦ä¸€ä¸ªä»¤äººå…´å¥‹çš„ç‰¹æ€§æ˜¯å¯é€‰çš„`catch`ç»‘å®šå‚æ•°ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº› JSON çš„æ”¹è¿›ï¼Œå¢åŠ äº†`Symbol.prototype.description`ï¼Œå…è®¸ä½ ä¸ºä½ çš„ç¬¦å·æŒ‡å®šä¸€ä¸ªæè¿°ï¼Œ`JSON.stringify`è¿”å›æ ¼å¼è‰¯å¥½çš„ **UTF-8** ï¼Œä¸ç®¡è¾“å…¥æ˜¯ä»€ä¹ˆï¼Œæœ€åæ¾„æ¸…`Function.prototype.toString`ï¼Œè¦æ±‚å®ƒè¿”å›ç›¸åº”çš„åŸå§‹æºæ–‡æœ¬æˆ–æ ‡å‡†å ä½ç¬¦ã€‚

å¦‚æœä½ å‡†å¤‡å¥½äº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚

### [](#-raw-arrayprototypeflat-flatmap-endraw-)`Array.prototype.{flat, flatMap}`

æ˜¯ä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼Œè®©ä½ ä»ä¸€ä¸ªå¤šç»´æ•°ç»„åˆ›å»ºä¸€ä¸ªä¸€ç»´æ•°ç»„ã€‚

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„æ•°ç»„:

```
const myArray = [1, 2, 3, [4, 5, 6, [7, 8, 9, [10, 11, 12]]]]; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨`flat`ä¹‹å‰ï¼Œå¦‚æœä½ æƒ³åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å¿…é¡»è¿™æ ·åš:

```
const myNewArray = [].concat.apply([], myArray)
// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ–è€…:

```
var myNewArray = myArray.reduce(
  function(prev,curr) {
    return prev.concat(curr)
  }
)
// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æœ‰äº†è¿™ä¸ªæ–°çš„é™„åŠ åŠŸèƒ½ï¼Œäº‹æƒ…å°±ç®€å•äº†:

```
var myNewArray = myArray.flat(4);
// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨ä¹Ÿå¯ä»¥è¿é”å¤šä¸ªå‘¼å«:

```
var myNewArray = myArray.flat().flat().flat().flat();
// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`flat`å‡½æ•°çš„å‚æ•°åªæ˜¯æŒ‡å®šå®ƒåº”è¯¥åœ¨æ•°ç»„ä¸­æŸ¥çœ‹å¤šæ·±ã€‚å¦‚æœä½ ä¸ç¡®å®šæ•°ç»„æœ‰å¤šæ·±ï¼Œåªéœ€ä½¿ç”¨`Infinity`ä½œä¸ºè¾“å…¥:

```
var myNewArray = myArray.flat(Infinity);
// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœæ‚¨ä¸æä¾›ä»»ä½•è¾“å…¥ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒåªä¼šè¿›å…¥ä¸‹ä¸€çº§:

```
var myNewArray = myArray.flat(); 
// [1, 2, 3, 4, 5, 6, Array(4)]; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

* * *

`flatMap`å¦ä¸€æ–¹é¢ï¼Œå…è®¸æ‚¨ä½¿ç”¨æ˜ å°„å‡½æ•°æ˜ å°„æ¯ä¸ªå…ƒç´ ï¼Œç„¶åå°†ç»“æœå¹³é“ºåˆ°ä¸€ä¸ªæ–°çš„æ•°ç»„ä¸­ã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆç”¨ä¸€ä¸ª`flat`é“¾æ¥ä¸€ä¸ª`map`å‡½æ•°ã€‚ç„¶è€Œï¼Œå®ƒåœ¨ä½¿ç”¨å’Œæ‰§è¡Œæ•ˆç‡æ–¹é¢ç¡®å®å¾ˆæœ‰å¸®åŠ©ã€‚

```
let myArray = [1, 2, 3, 4, 5];

let mappedArray = myArray.map(x => [x, x * 2]);
// [Array(2), Array(2), Array(2), Array(2), Array(2)]
// 0: (2)[1, 2]
// 1: (2)[2, 4]
// 2: (2)[3, 6]
// 3: (2)[4, 8]
// 4: (2)[5, 10]

let mappedFlattenedArr = mappedArray.flat();

// [1, 2, 2, 4, 3, 6, 4, 8, 5, 10]

let myNewArray = myArray.flatMap(v => [v, v * 2]);
// [1, 2, 2, 4, 3, 6, 4, 8, 5, 10] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#-raw-stringprototypetrimstart-trimend-endraw-)`String.prototype.{trimStart, .trimEnd}`

è¿™äº›æ–¹æ³•å¯¹æˆ‘ä»¬çš„ä½œç”¨æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚è¯·è®°ä½ï¼Œæˆ‘ä»¬çš„`trimLeft`å°†è¢«`trimStart`å–ä»£ï¼Œè€Œ`trimRight`å°†è¢«`trimEnd`å–ä»£ã€‚

```
let message = ' This is a string with white space around ';

message = message.trimStart();
// 'This is a string with white space around '

message = message.trimEnd();
// 'This is a string with white space around' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#-raw-objectfromentries-endraw-)`Object.fromEntries`

è¿™ä¸ªæ–¹æ³•è·å–ä¸€ä¸ª`Iterable`å¹¶å°†é”®å€¼å¯¹è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ã€‚ä½†æ˜¯è®©æˆ‘ä»¬çœ‹çœ‹ä»€ä¹ˆæ˜¯`Iterable`:

> JavaScript æ”¯æŒä¸€ç§åè®®ï¼Œé€šè¿‡è¿™ç§åè®®ï¼Œè¯¸å¦‚æ•°ç»„ä¹‹ç±»çš„å¯¹è±¡å¯ä»¥è¢«è¯¸å¦‚`for` â€¦ `of`å’Œæ‰©å±•æ“ä½œç¬¦`...`ä¹‹ç±»çš„æ§åˆ¶ç»“æ„ç”¨æ¥é¡ºåºåœ°éå†æ•°æ®ã€‚è¿™è¢«ç§°ä¸ºå¯è¿­ä»£çš„ï¼Œæ”¯æŒè¿™ç§åŠŸèƒ½çš„æ•°æ®ç»“æ„è¢«ç§°ä¸ºå¯è¿­ä»£çš„ã€‚è™½ç„¶ JavaScript ä»ä¸€å¼€å§‹å°±ä¸ºæ˜ å°„ã€æ•°ç»„å’Œé›†åˆæä¾›äº† iterable å±æ€§ï¼Œä½†æ™®é€šå¯¹è±¡åœ¨é»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰è¿™ç§å±æ€§ã€‚

è¦äº†è§£è¿™ä¸€ç‚¹:

```
let entries = new Map([["name", "john"], ["age", 22]]);

let newObj = Object.fromEntries(entries);
// { name: 'john', age: 22 } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸€ä¸ªçœŸå®çš„ç”¨ä¾‹æ˜¯è§£ææŸ¥è¯¢å­—ç¬¦ä¸²:

```
let query = Object.fromEntries(new URLSearchParams('foo=bar&baz=qux'));

// { foo: 'bar', baz: 'qux' } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#optional-catch-binding)å¯é€‰æ•æ‰ç»‘å®š

å¯é€‰çš„ catch ç»‘å®šå…è®¸æˆ‘ä»¬åœ¨ catch å—ä¸­ä½¿ç”¨ä¸å¸¦`error`å‚æ•°çš„`try/catch`ã€‚

ä»¥å‰ï¼Œä¸ç®¡ä½ æ˜¯å¦å…³å¿ƒ`err`ï¼Œä½ éƒ½å¿…é¡»ä½¿ç”¨è¿™ç§è¯­æ³•ï¼Œæ¯”å¦‚å½“ä½ ä¸å¾—ä¸å›é€€åˆ°æ”¯æŒæ—§æµè§ˆå™¨çš„ç‰¹æ€§:

```
try {
  // try to use a web feature which may not be implemented
} catch (unused) {
  // fall back to a less desirable web feature with broader support
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç”¨`ES2019`ä½ å¯ä»¥åš:

```
try {
  // ...
} catch {
  // ...
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#-raw-symboldescription-endraw-)`Symbol.description`

è¿™ä¸ªæ–°çš„åªè¯»æè¿°å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›å¯¹`Symbol`å¯¹è±¡çš„å¯é€‰æè¿°ã€‚é¼“åŠ±ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œè€Œä¸è¦ä½¿ç”¨`Symbol.prototype.toString`
ï¼Œå› ä¸ºè¿”å›çš„å†…å®¹å¹¶ä¸æ˜æ˜¾ã€‚

```
let description = 'This symbol represents an emoji ğŸ˜';

let mySym = Symbol(description);
// Symbol('This symbol represents an emoji ğŸ˜')

console.log(mySym.description);
'This symbol represents an emoji ğŸ˜' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#-raw-functiontostring-endraw-)`Function.toString`

è¿™ä¸ªæ–¹æ³•éå¸¸æœ‰ç”¨ï¼Œå®ƒè¿”å›ä¸€ä¸ªå‡½æ•°çš„æºä»£ç ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¯¹ä½¿ç”¨ç¬¬ä¸‰æ–¹å‡½æ•°çš„ä»£ç å—è¿›è¡Œæ•…éšœæ’é™¤ã€‚è¿™å¯èƒ½æœ‰åŠ©äºæ‚¨çœ‹åˆ°å®ç°(å‡å®šå®ƒæœ‰æºä»£ç å›¾)ã€‚

```
function myFn(emoji) {
  let msg = `${emoji} is hellav an emoji`;
  console.log(msg);
}

console.log(myFn.toString());

// "function myFn(emoji) {
//   let msg = `${emoji} is hellav an emoji`;
//   console.log(msg);
// }" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“ç„¶è¿™å¹¶ä¸é€‚ç”¨äºæ‰€æœ‰æƒ…å†µã€‚å¦‚æœæˆ‘ä»¬å¯¹æ•°ç»„
ä¸Šçš„`map`å‡½æ•°è¿›è¡Œå°è¯•

```
Array.prototype.map.toString();

// "function map() { [native code] }" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å› ä¸ºå®ç°ä¸æ˜¯ç”¨ JavaScript ç¼–å†™çš„ï¼Œæ‰€ä»¥å®ƒåªä¼šå‘æ‚¨å±•ç¤ºè¿™ä¸ªå‡½æ•°æ˜¯ç”¨æœ¬æœºä»£ç ç¼–å†™çš„ã€‚

### [](#-raw-jsonstringify-endraw-)`JSON.stringify`

å›¢é˜Ÿå·²ç»å¯¹ Unicode å­—ç¬¦åšäº†æ”¹è¿›ï¼Œç°åœ¨è¿™ä¸ªæ–¹æ³•ä¸èƒ½è¿”å›æ ¼å¼é”™è¯¯çš„æ•°æ®ã€‚

```
// Non-BMP characters still serialize to surrogate pairs.
JSON.stringify('ğŒ†')
// â†’ '"ğŒ†"'
JSON.stringify('\uD834\uDF06')
// â†’ '"ğŒ†"'

// Unpaired surrogate code units will serialize to escape sequences.
JSON.stringify('\uDF06\uD834')
// â†’ '"\\udf06\\ud834"'
JSON.stringify('\uDEAD')
// â†’ '"\\udead"' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#-raw-arraysort-endraw-stability)`Array.sort`ç¨³å®š

å›¢é˜Ÿå·²ç»å†³å®šæ”¹å˜æ’åºå®ç°ï¼Œä½¿å…¶ä¿æŒç¨³å®š(ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯”è¾ƒç›¸ç­‰çš„å…ƒç´ å¿…é¡»ä¿æŒå…¶åŸå§‹é¡ºåº)ã€‚

```
const grades = [
  { topic: 'math', grade: 10 },
  { topic: 'literacy', grade: 10 },
  { topic: 'chemical', grade: 13 },
  { topic: 'geography', grade: 12 },
  { topic: 'modern history', grade: 12 },
  { topic: 'art', grade: 13 },
  { topic: 'computer basics', grade: 14 },
  { topic: 'algebra', grade: 14 },
];

grades.sort(a, b => a.grade - b.grade);

// 0: {topic: "math", grade: 10}
// 1: {topic: "literacy", grade: 10}
// 2: {topic: "geography", grade: 12}
// 3: {topic: "modern history", grade: 12}
// 4: {topic: "chemical", grade: 13}
// 5: {topic: "art", grade: 13}
// 6: {topic: "computer basics", grade: 14}
// 7: {topic: "algebra", grade: 14} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#summary)æ€»ç»“

æ€»çš„æ¥è¯´ï¼ŒJavaScript æ­£æœç€å¸®åŠ©å¼€å‘äººå‘˜ç¼–å†™æ›´ç¨³å®šã€å¯é å’Œä¸€è‡´çš„ä»£ç çš„æ­£ç¡®æ–¹å‘å‰è¿›ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ›´å¤šå…³äº GitHub å›è´­çš„ä¿¡æ¯ã€‚

å¸Œæœ›åœ¨ JavaScript ä¸­çœ‹åˆ°æ›´å¤šä»¤äººæ•¬ç•çš„ç‰¹æ€§ï¼Œå¹¶åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ä¸æ‚¨è§é¢ã€‚