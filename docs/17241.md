# åƒè€æ¿ä¸€æ ·é€šè¿‡ React çš„æ ‘ä¼ é€’æ•°æ®ğŸ˜

> åŸæ–‡ï¼š<https://dev.to/bassemibrahim/pass-data-through-react-s-tree-like-a-boss-2fbi>

å˜¿ğŸ‘‹ï¼Œæ¬¢è¿å›åˆ°å¦ä¸€ç¯‡åšæ–‡ã€‚è¿™ä¸€æ¬¡ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åƒ **BOSS** ä¸€æ ·é€šè¿‡ React çš„ç»„ä»¶æ ‘ä¼ é€’æ•°æ®ğŸ˜

# æ­£å¸¸(é BOSS)çš„æ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿ

æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æœ€ç®€å•çš„æ–¹æ³•ã€‚åªéœ€å°†æ•°æ®ä½œä¸ºé“å…·é€šè¿‡æ•´æ£µæ ‘ã€‚æƒ³è±¡ä»¥ä¸‹åœºæ™¯ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º *StatusComponent* çš„ç»„ä»¶ï¼Œå®ƒå‘ˆç°æè¿°åº”ç”¨ç¨‹åºçŠ¶æ€çš„ç®€å•æ–‡æœ¬ã€‚å¯¹äºæˆ‘ä»¬çš„ç¤ºä¾‹åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬æœ‰ä¸‹é¢çš„æ ‘:

### æˆ‘ä»¬çš„ç¤ºä¾‹åº”ç”¨çš„ç»„ä»¶æ ‘:

-> App
- > - >é¦–é¡µ
- > - > - >ä¾§è¾¹æ 
- > - > - > - >çŠ¶æ€ç»„ä»¶

å½“ç„¶ï¼Œåœ¨è¿™é‡Œæˆ‘å°†ä½¿ç”¨ä¸€ä¸ªå°çš„ç¤ºä¾‹åº”ç”¨ç¨‹åºã€‚ç°å®ç”Ÿæ´»ä¸­å¯èƒ½æœ‰å‡ åä¸ªç»„ä»¶ã€‚è¿™æ„å‘³ç€éæœ€ä¼˜çš„æ–¹æ³•å¯èƒ½ä¼šå¯¹å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§äº§ç”Ÿä¸¥é‡çš„ä¸è‰¯å½±å“ã€‚

```
// App is calling the HomePage and passing those data as props
<HomePage
    successMsg="App initialized"
    loadingMsg="Loading appâ€¦"
    errorMsg="Error encountered"
    serverDownMsg="Server down, Try again later!"
/>

// HomePage is calling SideBar and passing its props along
<SideBar
    successMsg={this.props.successMsg}
    loadingMsg={this.props.loadingMsg}
    errorMsg={this.props.errorMsg}
    serverDownMsg={this.props.serverDownMsg}
/> 
// SideBar is calling StatusComponent and passing its props along
<StatusComponent    
    successMsg={this.props.successMsg}
    loadingMsg={this.props.loadingMsg}
    errorMsg={this.props.errorMsg}
    serverDownMsg={this.props.serverDownMsg}
/> 
// Finally, StatusComponent is using the data passed all the way from App
switch(state) {
    case normal : return <p{this.props.successMsg}/>
    case loading : return <p{this.props.loadingMsg}/>
    case error : return <p{this.props.errorMsg}/>
    case serverDown : return <p{this.props.serverDownMsg}/> } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å¾ˆç®€å•æ˜äº†ã€‚ğŸ‘ä½†æ˜¯ï¼Œå¦‚æœåœ¨æ•´ä¸ªç»„ä»¶æ ‘ä¸­ä½¿ç”¨ï¼Œå¯èƒ½ä¼šéå¸¸ç³Ÿç³•ã€‚ğŸ‘æ‚¨å°†ç»§ç»­åœ¨æ ‘ä¸­ä¼ é€’æ•°æ®ã€‚ä½ çš„ç»„ä»¶ä¼šå˜å¾—å¤ªå¤§å¤ªå¿«ã€‚ä»£ç å°†è¢«é‡å¤ã€‚**(ä¸Šå¸ç¦æ­¢ï¼ğŸ˜ )**

æˆ‘ä»¬èƒ½åšä»€ä¹ˆï¼Ÿæˆ‘ä»¬å¦‚ä½•ä¼˜åŒ–è¿™ä¸€ç‚¹ï¼Ÿæˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼ğŸ§è¿™é‡Œæœ‰ä¸¤ä¸ªå› ç´ åœ¨èµ·ä½œç”¨:

1.  ä¿å­˜æ•°æ®çš„å˜é‡æ•°é‡(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯ 4)
2.  æ•°æ®å¿…é¡»é€šè¿‡çš„ç»„ä»¶æ•°é‡ï¼Œè¿™é‡Œåªæœ‰ 2 ä¸ªã€‚*åº”ç”¨ç¨‹åº*æ‹¥æœ‰æ•°æ®ï¼Œè€Œ*çŠ¶æ€ç»„ä»¶*æ­£åœ¨ä½¿ç”¨è¿™äº›æ•°æ®ã€‚è¿™æ ·æˆ‘ä»¬å°±å‰©ä¸‹äº†*ä¸»é¡µ*å’Œ*ä¾§è¾¹æ *ã€‚

æˆ‘æœ‰ä¸¤ç§ç­–ç•¥å¯ä¾›é€‰æ‹©ğŸ”¥ğŸ”¥ã€‚æ¯ç§ç­–ç•¥éƒ½å°†è§£å†³å…¶ä¸­ä¸€ä¸ªå› ç´ ã€‚

# åˆ†ç»„å˜é‡:

è®©æˆ‘ä»¬å¤„ç†ç¬¬ä¸€ä¸ªå› ç´ ï¼Œä¿å­˜æ•°æ®çš„å˜é‡çš„æ•°é‡ã€‚

**è¿™æ˜¯ Javascriptï¼æˆ‘ä»¬å¯ä»¥ç®€å•åœ°æŠŠ 4 åˆ†æˆ 1 ç»„ã€‚ä½†æ˜¯ä¸è¦æŠŠä½ å‘ç°çš„ä»»ä½•å˜é‡åˆ†ç»„ã€‚å°½é‡åªå°†é€»è¾‘ä¸Šç›¸å…³çš„åˆ†ç»„ã€‚å¹¸è¿çš„æ˜¯ï¼Œåœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œæ‰€æœ‰ 4 ä¸ªå˜é‡éƒ½æ˜¯ç›¸å…³çš„ã€‚** 

```
// App is calling the HomePage and passing those grouped variables as props
<HomePage
    messages= {
        successMsg:"App initialized",
        loadingMsg:"Loading appâ€¦",
        errorMsg:"Error encountered",
        serverDownMsg:"Server down, Try again later!"
    }
/> 
// HomePage is calling SideBar and passing its props along
<SideBar
    messages={this.props.messages}
/> 
// SideBar is calling StatusComponent and passing its props along
<StatusComponent
    messages={this.props.messages}
/> 
// Finally, StatusComponent is dividing the grouped variable passed all the way from App
switch(state) {
    case(success)    : return <p>{this.props.messages.successMsg}</p>
    case(loading)    : return <p>{this.props.messages.loadingText}</p>
    case(error)      : return <p>{this.props.messages.errorText}</p>
    case(serverDown) : return <p>{this.props.messages.serverDownText}</p>  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™çœ‹èµ·æ¥æ›´å¥½ï¼Œä¸æ˜¯å—ï¼Ÿæˆ‘ä»¬å¯ä»¥åˆ°æ­¤ä¸ºæ­¢å—ï¼Ÿ

ä¸è¦ï¼å°½ç®¡å¦‚æ­¤ï¼Œè¿™é‡Œè¿˜æ˜¯æœ‰å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼ä½ å·²ç»çŸ¥é“äº†å—ï¼Ÿä¸»é¡µå’Œä¾§è¾¹æ å®é™…ä¸Šå¹¶ä¸éœ€è¦è¿™äº›æ•°æ®ã€‚ä»–ä»¬åªæ˜¯å……å½“æ•°æ®ä¼ é€’çš„æ¡¥æ¢ã€‚æˆ‘é—»åˆ°äº†**ä»£ç é‡å¤** ğŸ§ğŸ˜ ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½å°±è¿™æ ·æŠŠå®ƒå»æ‰ã€‚æˆ–è€…æˆ‘ä»¬å¯ä»¥å—ï¼ŸğŸ˜ˆ

# ä½¿ç”¨ React ä¸Šä¸‹æ–‡:

è®©æˆ‘ä»¬æ¥è§£å†³ç¬¬äºŒä¸ªå› ç´ ï¼Œæ•°æ®å¿…é¡»é€šè¿‡æ ‘çš„çº§æ•°ã€‚è¿™é‡Œæˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸Šä¸‹æ–‡ã€‚

æ ¹æ® React docsï¼Œ **Context** æä¾›äº†ä¸€ç§é€šè¿‡ç»„ä»¶æ ‘ä¼ é€’æ•°æ®çš„æ–¹å¼ï¼Œè€Œä¸å¿…åœ¨æ¯ä¸€å±‚æ‰‹åŠ¨ä¼ é€’å±æ€§ã€‚è¿™å¯¹äºåƒåŒºåŸŸè®¾ç½®é¦–é€‰é¡¹å’Œ UI ä¸»é¢˜è¿™æ ·çš„å…¨å±€æ•°æ®æ¥è¯´æ˜¯å®Œç¾çš„ã€‚åº”ç”¨ç¨‹åºä¸­çš„è®¸å¤šç»„ä»¶éƒ½éœ€è¦æ•°æ®ã€‚

æƒ³çœ‹çœ‹ä¾‹å­å—ï¼Ÿå½“ç„¶å¯ä»¥ï¼

```
// First we create a context
const MessageContext = React.createContext({
    successMsg:"App initialized",
    loadingMsg:"Loading appâ€¦",
    errorMsg:"Error encountered",
    serverDownMsg:"Server down, Try again later!"
});

// App render method
<MessageContext.Provider>
    <HomePage />
</MessageContext.Provider> 
// HomePage is calling SideBar without passing props
<SideBar/>

// SideBar is calling StatusComponent without passing props
<StatusComponent/>

// StatusComponent receiving its required data from the context instead of its parent
static contextType = MessageContext;
render() {
    switch(state) {
        case(success)    : return <p>{this.context.successMsg}</p>
        case(loading)    : return <p>{this.context.loadingText}</p>
        case(error)      : return <p>{this.context.errorText}</p>
        case(serverDown) : return <p>{this.context.serverDownText}</p>     }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ­£å¦‚æ‚¨åœ¨ä¸Šé¢çš„ä»£ç ä¸­çœ‹åˆ°çš„ã€‚æˆ‘ä»¬ä¸ä¼šæŠŠæ•°æ®å½“ä½œé“å…·æ¥ä¼ é€’ã€‚ä½¿ç”¨ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬ä¸å…³å¿ƒæˆ‘ä»¬å¿…é¡»ç»å†å¤šå°‘ç»„ä»¶æ·±åº¦ã€‚å¯ä»¥ä»ç»„ä»¶æ ‘ä¸­çš„ä»»ä½•ä½ç½®è®¿é—®ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®ã€‚

æ‚¨å¯ä»¥åœ¨ [React ä¸Šä¸‹æ–‡æ–‡æ¡£é¡µé¢](https://reactjs.org/docs/context.html)ä¸­æ‰¾åˆ°æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚

ä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨å—ï¼Ÿä½ å·²ç»çŸ¥é“è¿™ä¸€åˆ‡äº†å—ï¼Ÿè¯·åœ¨ä¸‹é¢çš„è¯„è®ºä¸­å‘Šè¯‰æˆ‘ã€‚

ä»¥ always ä¸ºä¾‹ï¼Œt0Â±t1Â±happe code & & & & & & &